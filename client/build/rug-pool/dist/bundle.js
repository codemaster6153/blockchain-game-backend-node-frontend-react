!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=73)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.formatNumber=function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},t.formatTime=function(t){return t-Math.floor(t)>0?t.toString():t.toString()+".0"},t}();e.GameVars=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.DEVELOPMENT=!1,t.VERBOSE=!1,t.DEBUG=!1,t.GAME_WIDTH=1024,t.GAME_HEIGHT=640,t.LEFT="left",t.RIGHT="right",t.PHYS_SCALE=.01,t.BALL_RADIUS=1400,t.CUES_DATA=[{id:1,name:"DEFAULT CUE","name-nft":"default",guide:"short","animation-frames":0,"guide-color":"0xFFFFFF"},{id:2,name:"TESTER","name-nft":"Pool Cue: Tester",guide:"short","animation-frames":0,"guide-color":"0x63DFF5"},{id:3,name:"ZAPPER","name-nft":"Pool Cue: Zapper",guide:"medium","animation-frames":20,"guide-color":"0xFAE500"},{id:4,name:"CORE LOOP","name-nft":"Pool Cue: Core-Loop",guide:"long","animation-frames":13,"guide-color":"0xFF00FF"},{id:5,name:"AMBASSADOR","name-nft":"Pool Cue: Ambassador",guide:"medium","animation-frames":14,"guide-color":"0xFDFB66"},{id:6,name:"GUEST","name-nft":"Pool Cue: Guest",guide:"short","animation-frames":0,"guide-color":"0xFDFB66"},{id:7,name:"DOMER","name-nft":"Pool Cue: Domer",guide:"medium","animation-frames":24,"guide-color":"0xA04FFF"},{id:8,name:"THE JUICER","name-nft":"The Juicer",guide:"medium","animation-frames":12,"guide-color":"0xFFDD14"},{id:9,name:"POOLMEISTER","name-nft":"Pool Cue: PoolMeister",guide:"long","animation-frames":20,"guide-color":"0xFFDD14"},{id:10,name:"PLASMAZOID","name-nft":"Pool Cue: Plasmazoid",guide:"medium","animation-frames":12,"guide-color":"0xA0FF4E"},{id:11,name:"CARBZ CUE","name-nft":"Pool Cue: Carbz Cue",guide:"medium","animation-frames":11,"guide-color":"0xA2FF09"},{id:12,name:"HALLOWEEN","name-nft":"Pool Cue: Halloween",guide:"medium","animation-frames":19,"guide-color":"0xff9900"},{id:13,name:"JIGOWATTS CUE","name-nft":"Pool Cue: Jigowatts Cue",guide:"medium","animation-frames":18,"guide-color":"0x00FFFF"},{id:14,name:"TACO CUE","name-nft":"Pool Cue: Taco Cue",guide:"short","animation-frames":0,"guide-color":"0xFFFF00"}],t.SAVED_GAME_DATA_KEY="Rug-Pool-data",t}();e.GameConstants=n},function(t,e,i){"use strict";var n,r,s,a,o;i.r(e),function(t){t.START_GAME="start game",t.SKIP_GAME="skip game",t.LEAVE_GAME="leave game",t.PURCHASE_BOOSTER="purchase booster",t.SET_SEED="set seed",t.CONFIG="config"}(n||(n={})),function(t){t.LUDIO="LUDIO",t.JIGO="CDJIGO",t.CARBZ="CDCARBZ"}(r||(r={})),function(t){t.PLAYER="player",t.ADVERSARY="adversary",t.REPLAY="replay"}(s||(s={})),function(t){t.FINISH="finish",t.SKIP="skip",t.QUIT="quit"}(a||(a={})),function(t){t.EDITED_LEVEL="edited_level"}(o||(o={}));var h;i(39);class l{static getPlayersAvatarUrls(t,e,n){const r=[],s=i(43).JsonRpc;try{const i=new s(U.urls.apis[0]);let a=t.length;for(let s=0;s<t.length;s++){const o=t[s];i.get_table_rows({json:!0,code:"clashdomewld",scope:"clashdomewld",table:"citiz",lower_bound:o,upper_bound:o}).then((function(t){t.rows.length>0?r.push({account:o,url:"https://cloudflare-ipfs.com/ipfs/"+t.rows[0].avatar}):r.push({account:o,url:null}),a--,0===a&&e.apply(n,[r])})).catch((function(t){r.push({account:o,url:null}),a--,0===a&&e.apply(n,[r])}))}}catch(t){e.apply(n,[[]])}}static async getPlayerNick(t,e){const i=await l.getTableRows("clashdomewld","social",1,1,"i64",t,t,!1,0);if(i.rows&&i.rows[0]){let t=JSON.parse(i.rows[0].data).cn;switch(e){case s.PLAYER:U.playerNick=t;break;case s.ADVERSARY:U.adversaryNick=t;break;case s.REPLAY:U.replayNick=t}}}static getTimeUntilEndOfDay(){const t=new Date;return 86400-60*t.getUTCHours()*60-60*t.getUTCMinutes()-t.getUTCSeconds()}static formatNumber(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}static formatTime(t,e){if(isNaN(t)||t>86400&&!e)return{str:"0:00:00",h:"00",m:"00",s:"00"};const i=Math.floor(t/3600),n=Math.floor((t-3600*i)/60),r=t-3600*i-60*n;let s=i.toString(),a=n.toString(),o=r.toString();return i<10&&(s="0"+i),n<10&&(a="0"+n),r<10&&(o="0"+r),{str:s+":"+a+":"+o,h:s,m:a,s:o}}static getTournamentID(t){const e=new Date,i=(e.getUTCDate()<10?"0":"")+e.getUTCDate(),n=(e.getUTCMonth()+1<10?"0":"")+(e.getUTCMonth()+1);return e.getUTCFullYear()+n+i+l.GAME_IDS[t]}static fixNumber(t){return isNaN(t)?0:Math.floor(1e5*t)/1e5}static async getTrialCitizenData(){if(U.development)return{full:!0,staked:!0};{const t=await l.getTableRows("clashdomewld","trials",1,1,"i64",U.playerAccount,U.playerAccount,!1,0);return t.rows&&t.rows.length>0?t.rows[0]:null}}static async getIsAdversaryFriend(t){if(U.development)return!0;{const e=await l.getTableRows("clashdomewld","social",1,1,"i64",U.playerAccount,U.playerAccount,!1,0);if(e.rows&&e.rows.length>0){let i=JSON.parse(e.rows[0].data);return!!i.fr&&!!i.fr[t]}return!1}}static areAllFeesZero(){let t=!0;const e=U.gameFees.fees;for(let i=0;i<e.length;i++)if(-1===e[i].indexOf("0.0000")){t=!1;break}return t}static async doesPlayerOwnVIP(){const t=new(0,i(12).ExplorerApi)(U.urls.atomic,"atomicassets",{fetch:fetch});return 0!==(await t.getAssets({owner:U.playerAccount,collection_name:"clashdomenft",schema_name:"vip"})).length}static async doesPlayerOwnLand(){let t=!1;if(U.development)t=!0;else{let e,n;switch(U.gameName){case"rug-pool":e="poolhalls",n="hall_id";break;case"endless-siege-2":e="lands",n="land_id"}const r=new(0,i(12).ExplorerApi)(U.urls.atomic,"atomicassets",{fetch:fetch}),s=await r.getAssets({owner:U.playerAccount,collection_name:"clashdomenft",schema_name:e});for(let e=0;e<s.length;e++){if(s[e].data[n]===U.landID){t=!0;break}}}return t}static async hasPlayerCitizenStaked(){const t=await l.getTableRows("clashdomewld","citiz",1,1,"i64",U.playerAccount,U.playerAccount,!1,0);return!(!t.rows||0===t.rows.length)}static isPlayerLogged(){return!!U.development||!(!U.reactClass.state||!U.reactClass.state.wax.userAccount)}static getLandName(){let t;switch(U.gameName){case"rug-pool":t=l.RUG_POOL_LANDS[U.landID.toString()];break;case"endless-siege-2":t=l.ENDLESS_SIEGE_2_LANDS[U.landID.toString()]}return t}static async getTableRows(t,e,n,r,s,a,o,h,u){try{const c=new(0,i(43).JsonRpc)(U.urls.apis[u]);try{return await c.get_table_rows({json:!0,code:t,scope:t,table:e,limit:n,index_position:r,key_type:s,lower_bound:a,upper_bound:o,reverse:h,show_payer:!1})}catch(i){return u!==U.urls.apis.length-1?l.getTableRows(t,e,n,r,s,a,o,h,u+1):{error:i}}}catch(t){console.error(t)}}static async delay(t){return new Promise((e,i)=>{setTimeout(e,t)}).then((function(){}))}static openExternalLink(t,e){let i;i=e?window.open(t,"_self"):window.open(t,"_blank"),i&&i.focus?i.focus():i||(window.location.href=t)}static getQuantityValue(t){-1!==t.indexOf(" CREDITS")?t.replace(" CREDITS",""):-1!==t.indexOf(" LUDIO")?t.replace(" LUDIO",""):-1!==t.indexOf(" CDJIGO")&&t.replace(" CDJIGO","");let e=parseFloat(t);return e=isNaN(e)?0:Math.round(10*e)/10,e}static isBoosterSupported(){if(U.private)return!1;let t=!1;return(0===U.fee&&U.gameFees.waxToLudioFactor&&0!==parseInt(U.gameFees.waxToLudioFactor)||U.fee>0&&U.gameFees.creditsToJigoFactor&&0!==parseInt(U.gameFees.creditsToJigoFactor))&&(t=!0),t}static getBoosterFee(){let t;return t=0===U.fee?U.gameFees.creditsToJigoFactor*parseFloat(U.gameFees.reward.replace("CREDITS",""))/1e4:U.gameFees.waxToLudioFactor*U.fee/1e4,t=Math.floor(1e4*t)/1e4,t}static async getCDTokenBalance(t){if(U.development)return new Promise((t,e)=>{setTimeout(t,3e3)}).then((function(){return Math.random()>.5?11.5:.2}));{let e=await U.reactClass.state.wax.rpc.get_currency_balance("clashdometkn",U.playerAccount,t);return e=e.length?parseFloat(e[0]):0,e}}static getFormattedTokenBoosterFee(t){let e=t.toString(),i=0===U.fee?r.JIGO:r.LUDIO;const n=e.indexOf(".");if(-1===n)e+=".0000 "+i;else{let t=4-e.length+n+1;for(let i=0;i<t;i++)e+="0";e+=" "+i}return e}static async callAction(t,e,i){try{const n=[{account:t,name:e,authorization:[{actor:U.playerAccount,permission:"active"}],data:i}];return"wcw"===U.reactClass.state.wax.type?await U.reactClass.state.wax.api.transact({actions:n},{blocksBehind:3,expireSeconds:30}):"anchor"===U.reactClass.state.wax.type&&await U.reactClass.state.wax.signTransaction({actions:n},{blocksBehind:3,expireSeconds:30}),{error:null}}catch(t){return{error:t.message}}}static async fetchWithTimeout(t,e={}){let i=e.timeout||8e3;const n=new AbortController,r=setTimeout(()=>n.abort(),i),s=await fetch(t,{...e,signal:n.signal});return clearTimeout(r),s}}l.ENDLESS_SIEGE_2_LANDS={1:"CRAPSMOOR",2:"NEW TURDINGTON",3:"AVERAGEBY",4:"CHAMPTON",5:"PIMPSHIRE",6:"HIGH GOLDENFORD",7:"NICEBURY",8:"ST. MEH UPON AVON",9:"TRASHDALE",10:"LITTERTOFT",11:"UPPER JUNKWICK",12:"DUMPFORD HEIGHTS",13:"NOTSOTHORPE",14:"CHADHAM TURN",15:"SMINEMDALE",16:"MERRYSQUIRT MEADOWS",17:"RADVILLE",18:"SHIPPLETHWAITE",19:"TARNISHGATE",20:"BEARISHTOWN",21:"MUDWHARF",22:"POOPBURY",23:"REGULAR CREEK",24:"EPICWORTH",25:"MAYDENHEAD",26:"LUDIOVILLE HIGH",27:"BOOSTERBURY",28:"DECENTSHIRE",29:"LOWER DUNGMOOR",30:"DISMAYWICK",31:"SHAGGYFORD BAY",32:"PUKEHAVEN",33:"DULLFOLKSMERE",34:"OVERTHETOPPENHAM",35:"REAT BLINGHAM",36:"LAMBOVILLE",37:"WAXTON PENINSULA",38:"BLANDFORD",39:"ROTTENSIDE",40:"FUDWATER PORT"},l.RUG_POOL_LANDS={1:"MotherHustlers",2:"Sly's Snooker Club",3:"Rack & Chalk",4:"Sizzling Balls",5:"Solids, Stars & Stripes",6:"Tight Rack",7:"The Ragtag Shed",8:"Marielito Management Co.",9:"Lata Snooker Classic",10:"Chillin' Ronnie"},l.GAME_IDS={"candy-fiesta":"01",templok:"02","ringy-dingy":"03","endless-siege-2":"04","rug-pool":"05","pac-man":"06"},l.GAME_TITLES={"candy-fiesta":"Candy Fiesta",templok:"Templok","ringy-dingy":"Ringy Dingy","endless-siege-2":"Endless Siege 2","rug-pool":"Rug Pool","pac-man":"Maze (coming soon)"},l.BOOSTER_DESCRIPTION={"candy-fiesta":"Activate this booster for 5 extra moves in Candy Fiesta.",templok:"Activate this booster to get an extra re-roll.","ringy-dingy":"Activate this booster and remove all the rings of the same color.","endless-siege-2":"","rug-pool":"Activate this booster for 5 extra seconds.","pac-man":""},l.GAME_LOGOS={"candy-fiesta":"assets/sdk/images/logo_candyFiesta.png",templok:"assets/sdk/images/logo_templok.png","ringy-dingy":"assets/sdk/images/logo_ringy.png","endless-siege-2":"assets/sdk/images/logo_endless.png","rug-pool":"assets/sdk/images/logo_rugPool.png","pac-man":"assets/sdk/images/logo_pacman.png"},l.MONTH_NAMES=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],l.CANDY_FIESTA_DEV_LOG=[{type:"start game",data:{seed:61715485}},{type:"move",data:{move:56,p1:{c:3,r:0},p2:{c:3,r:1},score:0}},{type:"set seed",data:{seed:17892100,i:1}},{type:"move",data:{move:55,p1:{c:5,r:1},p2:{c:5,r:2},score:30}},{type:"set seed",data:{seed:12698900,i:2}},{type:"move",data:{move:54,p1:{c:4,r:1},p2:{c:4,r:2},score:60}},{type:"set seed",data:{seed:48687200,i:3}},{type:"skip game"},{type:"end game",data:{userName:"clashdomeali",score:90,duration:7214337}}],l.ENDLESS_SIEGE_2_DEV_LOG=[{type:"start game",data:{seed:21319167}},{type:"ccrd",tk:0},{type:"ccrd",tk:0},{type:"ccrd",tk:0},{type:"ccrd",tk:0},{type:"cc",tk:30,id:3,p:{r:7,c:5}},{type:"dc",tk:30,id:3},{type:"ccrd",tk:30},{type:"set seed",data:{seed:750730,i:1}},{type:"cc",tk:58,id:4,p:{r:6,c:9}},{type:"dc",tk:58,id:4},{type:"ccrd",tk:58},{type:"set seed",data:{seed:369970,i:2}},{type:"br",tk:104,p:{r:8,c:6}},{type:"dc",tk:104,id:2},{type:"ccrd",tk:104},{type:"set seed",data:{seed:518870,i:3}},{type:"cc",tk:123,id:1,p:{r:8,c:6}},{type:"dc",tk:123,id:1},{type:"ccrd",tk:123},{type:"set seed",data:{seed:457290,i:4}},{type:"at",tk:141,trT:"laser",p:{r:6,c:9},id:6},{type:"dc",tk:141,id:6},{type:"ccrd",tk:141},{type:"set seed",data:{seed:298410,i:5}},{type:"at",tk:165,trT:"launch",p:{r:8,c:6},id:8},{type:"dc",tk:165,id:8},{type:"ccrd",tk:165},{type:"set seed",data:{seed:744320,i:6}},{type:"lu",tk:191,cardId:9,id:6},{type:"ccrd",tk:191},{type:"set seed",data:{seed:813700,i:7}},{type:"nw",tk:210},{type:"nw",tk:385},{type:"lu",tk:424,cardId:5,id:6},{type:"ccrd",tk:424},{type:"set seed",data:{seed:663960,i:8}},{type:"lu",tk:464,cardId:10,id:6},{type:"ccrd",tk:464},{type:"set seed",data:{seed:624040,i:9}},{type:"lu",tk:504,cardId:7,id:8},{type:"ccrd",tk:504},{type:"set seed",data:{seed:185120,i:10}},{type:"nw",tk:555},{type:"lu",tk:622,cardId:13,id:6},{type:"ccrd",tk:622},{type:"set seed",data:{seed:497220,i:11}},{type:"lu",tk:705,cardId:14,id:6},{type:"ccrd",tk:705},{type:"set seed",data:{seed:856890,i:12}},{type:"nw",tk:809},{type:"nw",tk:1122},{type:"at",tk:1406,trT:"projectile",p:{r:7,c:4},id:12},{type:"dc",tk:1406,id:12},{type:"ccrd",tk:1406},{type:"set seed",data:{seed:898170,i:13}},{type:"nw",tk:1474},{type:"ubc",tk:1509,id:17},{type:"dc",tk:1509,id:17},{type:"ccrd",tk:1509},{type:"set seed",data:{seed:289450,i:14}},{type:"lu",tk:1666,cardId:18,id:8},{type:"ccrd",tk:1666},{type:"set seed",data:{seed:305180,i:15}},{type:"nw",tk:1771},{type:"lu",tk:1843,cardId:19,id:8},{type:"ccrd",tk:1843},{type:"set seed",data:{seed:536e3,i:16}},{type:"lu",tk:1886,cardId:15,id:6},{type:"ccrd",tk:1886},{type:"set seed",data:{seed:530990,i:17}},{type:"lu",tk:1926,cardId:20,id:6},{type:"ccrd",tk:1926},{type:"set seed",data:{seed:8080,i:18}},{type:"lu",tk:1978,cardId:21,id:8},{type:"ccrd",tk:1978},{type:"set seed",data:{seed:34530,i:19}},{type:"nw",tk:2023},{type:"lu",tk:2059,cardId:22,id:12},{type:"ccrd",tk:2059},{type:"set seed",data:{seed:193390,i:20}},{type:"at",tk:2137,trT:"glue",p:{r:9,c:8},id:16},{type:"dc",tk:2137,id:16},{type:"ccrd",tk:2137},{type:"set seed",data:{seed:111490,i:21}},{type:"lu",tk:2167,cardId:11,id:16},{type:"ccrd",tk:2167},{type:"set seed",data:{seed:300460,i:22}},{type:"lu",tk:2242,cardId:26,id:16},{type:"ccrd",tk:2242},{type:"set seed",data:{seed:597980,i:23}},{type:"lu",tk:2290,cardId:23,id:8},{type:"ccrd",tk:2290},{type:"set seed",data:{seed:779030,i:24}},{type:"nw",tk:2306},{type:"lu",tk:2349,cardId:24,id:6},{type:"ccrd",tk:2349},{type:"set seed",data:{seed:61540,i:25}},{type:"lu",tk:2383,cardId:27,id:6},{type:"ccrd",tk:2383},{type:"set seed",data:{seed:207780,i:26}},{type:"lu",tk:2495,cardId:25,id:8},{type:"ccrd",tk:2495},{type:"set seed",data:{seed:136960,i:27}},{type:"nw",tk:2677},{type:"lu",tk:2785,cardId:30,id:8},{type:"ccrd",tk:2785},{type:"set seed",data:{seed:52930,i:28}},{type:"nw",tk:3068},{type:"lu",tk:3152,cardId:32,id:12},{type:"ccrd",tk:3152},{type:"set seed",data:{seed:442270,i:29}},{type:"nw",tk:3274},{type:"lu",tk:3316,cardId:33,id:16},{type:"ccrd",tk:3316},{type:"set seed",data:{seed:31390,i:30}},{type:"lu",tk:3370,cardId:34,id:8},{type:"ccrd",tk:3370},{type:"set seed",data:{seed:130770,i:31}},{type:"end game",data:{userName:"gr.au.wam",score:10,duration:1234}}],l.TEMPLOK_DEV_LOG=[{type:"start game",data:{seed:25780989}},{type:"drop block",data:{p:{c:8,r:3},blockData:{id:3,n:5,data:[1,2,1,2],i:1},isOnNiche:!1}},{type:"drop block",data:{p:{c:4,r:7},blockData:{id:2,n:5,data:[34956,7936,50244,63488],i:0},isOnNiche:!1}},{type:"drop block into niche",data:{blockData:{id:1,n:4,data:[27648,35904,27648,35904],i:1}}},{type:"set seed",data:{seed:275570,i:1}},{type:"rerroll",data:null},{type:"set seed",data:{seed:835200,i:2}},{type:"drop block",data:{p:{c:3,r:7},blockData:{id:1007,n:2,data:[49152,34816,49152,34816],i:2},isOnNiche:!0}},{type:"drop block",data:{p:{c:5,r:5},blockData:{id:5,n:3,data:[51200,35840,19456,50176],i:2},isOnNiche:!1}},{type:"drop block",data:{p:{c:0,r:3},blockData:{id:4,n:9,data:[61152,61152,61152,61152],i:1},isOnNiche:!1}},{type:"drop block",data:{p:{c:1,r:7},blockData:{id:6,n:1,data:[32768,32768,32768,32768],i:1},isOnNiche:!1}},{type:"set seed",data:{seed:809660,i:3}},{type:"drop block",data:{p:{c:4,r:3},blockData:{id:1008,n:5,data:[34956,7936,50244,63488],i:0},isOnNiche:!1}},{type:"drop block",data:{p:{c:1,r:5},blockData:{id:1009,n:4,data:[51328,36352,17600,57856],i:2},isOnNiche:!1}},{type:"drop block",data:{p:{c:4,r:4},blockData:{id:1010,n:1,data:[32768,32768,32768,32768],i:1},isOnNiche:!1}},{type:"set seed",data:{seed:185920,i:4}},{type:"drop block",data:{p:{c:3,r:0},blockData:{id:1011,n:4,data:[50688,19584,50688,19584],i:0},isOnNiche:!1}},{type:"drop block into niche",data:{blockData:{id:1012,n:3,data:[57344,34944,57344,34944],i:3}}},{type:"rotate",data:null},{type:"drop block",data:{p:{c:5,r:0},blockData:{id:1012,n:3,data:[57344,34944,57344,34944],i:3},isOnNiche:!0}},{type:"drop block",data:{p:{c:1,r:1},blockData:{id:1013,n:1,data:[32768,32768,32768,32768],i:2},isOnNiche:!1}},{type:"set seed",data:{seed:870640,i:5}},{type:"drop block",data:{p:{c:8,r:1},blockData:{id:1014,n:2,data:[49152,34816,49152,34816],i:2},isOnNiche:!1}},{type:"purchase booster",data:null},{type:"drop block into niche",data:{blockData:{id:1016,n:4,data:[19520,58368,35968,19968],i:0}}},{type:"rerroll",data:null},{type:"set seed",data:{seed:547730,i:6}},{type:"drop block",data:{p:{c:4,r:4},blockData:{id:1025,n:4,data:[27648,35904,27648,35904],i:0},isOnNiche:!0}},{type:"drop block into niche",data:{blockData:{id:1015,n:5,data:[1,2,1,2],i:0}}},{type:"set seed",data:{seed:616570,i:7}},{type:"drop block",data:{p:{c:3,r:2},blockData:{id:1029,n:3,data:[57344,34944,57344,34944],i:2},isOnNiche:!1}},{type:"rerroll",data:null},{type:"set seed",data:{seed:941520,i:8}},{type:"drop block",data:{p:{c:5,r:2},blockData:{id:1027,n:4,data:[50688,19584,50688,19584],i:0},isOnNiche:!1}},{type:"end game",data:{userName:"gr.au.wam",score:560,duration:1234}}],l.RINGY_DINGY_DEV_LOG=[{type:"start game",data:{seed:57571305}},{type:"drop block",data:{p:{c:5,r:4},blockData:{id:4,n:5,data:[20032,20032,20032,20032],i:1},isOnNiche:!1}},{type:"drop block into niche",data:{blockData:{id:2,n:2,data:[49152,34816,49152,34816],i:1}}},{type:"rerroll",data:null},{type:"set seed",data:{seed:433280,i:1}},{type:"rotate",data:null},{type:"drop block",data:{p:{c:8,r:4},blockData:{id:5,n:5,data:[1,2,1,2],i:3},isOnNiche:!0}},{type:"drop block",data:{p:{c:4,r:6},blockData:{id:1,n:5,data:[52288,60416,36032,28160],i:1},isOnNiche:!1}},{type:"set seed",data:{seed:953280,i:2}},{type:"drop block",data:{p:{c:1,r:6},blockData:{id:9,n:4,data:[35008,11776,50240,59392],i:2},isOnNiche:!1}},{type:"drop block",data:{p:{c:0,r:5},blockData:{id:7,n:3,data:[51200,35840,19456,50176],i:0},isOnNiche:!1}},{type:"drop block",data:{p:{c:2,r:3},blockData:{id:6,n:5,data:[59520,35040,8928,57888],i:1},isOnNiche:!1}},{type:"set seed",data:{seed:494200,i:3}},{type:"drop block",data:{p:{c:1,r:8},blockData:{id:10,n:1,data:[32768,32768,32768,32768],i:2},isOnNiche:!1}},{type:"drop block",data:{p:{c:2,r:4},blockData:{id:11,n:4,data:[50688,19584,50688,19584],i:0},isOnNiche:!1}},{type:"drop block",data:{p:{c:3,r:5},blockData:{id:12,n:3,data:[57344,34944,57344,34944],i:1},isOnNiche:!1}},{type:"set seed",data:{seed:540760,i:4}},{type:"drop block",data:{p:{c:0,r:2},blockData:{id:13,n:4,data:[19520,58368,35968,19968],i:1},isOnNiche:!1}},{type:"drop block",data:{p:{c:6,r:5},blockData:{id:15,n:3,data:[51200,35840,19456,50176],i:1},isOnNiche:!1}},{type:"drop block",data:{p:{c:3,r:2},blockData:{id:14,n:4,data:[34952,61440,34952,61440],i:2},isOnNiche:!1}},{type:"set seed",data:{seed:341400,i:5}},{type:"drop block",data:{p:{c:0,r:0},blockData:{id:16,n:4,data:[51328,36352,17600,57856],i:1},isOnNiche:!1}},{type:"drop block",data:{p:{c:2,r:0},blockData:{id:18,n:3,data:[57344,34944,57344,34944],i:2},isOnNiche:!1}},{type:"drop block",data:{p:{c:4,r:0},blockData:{id:17,n:4,data:[51328,36352,17600,57856],i:2},isOnNiche:!1}},{type:"set seed",data:{seed:151450,i:6}},{type:"drop block",data:{p:{c:1,r:4},blockData:{id:19,n:4,data:[50688,19584,50688,19584],i:2},isOnNiche:!1}},{type:"drop block into niche",data:{blockData:{id:20,n:5,data:[20032,20032,20032,20032],i:0}}},{type:"rerroll",data:null},{type:"set seed",data:{seed:522570,i:7}},{type:"drop block",data:{p:{c:0,r:6},blockData:{id:22,n:5,data:[59520,35040,8928,57888],i:0},isOnNiche:!0}},{type:"drop block into niche",data:{blockData:{id:21,n:5,data:[59520,35040,8928,57888],i:2}}},{type:"set seed",data:{seed:502020,i:8}},{type:"drop block",data:{p:{c:5,r:5},blockData:{id:24,n:5,data:[51336,36608,17484,61696],i:2},isOnNiche:!1}},{type:"drop block",data:{p:{c:7,r:2},blockData:{id:23,n:4,data:[27648,35904,27648,35904],i:2},isOnNiche:!1}},{type:"purchase booster",data:null},{type:"rerroll",data:null},{type:"set seed",data:{seed:587990,i:9}},{type:"drop block",data:{p:{c:6,r:7},blockData:{id:27,n:3,data:[51200,35840,19456,50176],i:2},isOnNiche:!0}},{type:"drop block into niche",data:{blockData:{id:25,n:4,data:[35008,11776,50240,59392],i:0}}},{type:"set seed",data:{seed:468800,i:10}},{type:"drop block",data:{p:{c:0,r:1},blockData:{id:30,n:3,data:[51200,35840,19456,50176],i:1},isOnNiche:!1}},{type:"end game",data:{userName:"gr.au.wam",score:810,duration:1234}}],l.RUG_POOL_DEV_LOG=[{data:{seed:22823281},type:"start game"},{data:{fee:0,cueID:1,engineVersion:"0.0.36"},type:"config"},{data:{english:0,cueSpeed:{vx:2133.62599,vy:-536.27201},deltaScrew:{x:0,y:0},verticalSpeed:0},type:"shot"},{data:{i:1,seed:45336766},type:"set seed"},{data:{english:0,cueSpeed:{vx:445.39099,vy:1930.00123},deltaScrew:{x:0,y:0},verticalSpeed:0},type:"shot"},{data:{i:2,seed:58228596},type:"set seed"},{data:{english:0,cueSpeed:{vx:-1632.22083,vy:66.04418},deltaScrew:{x:0,y:0},verticalSpeed:0},type:"shot"},{data:{i:3,seed:87852202},type:"set seed"},{data:{english:0,cueSpeed:{vx:1711.00026,vy:-1052.92634},deltaScrew:{x:0,y:0},verticalSpeed:0},type:"shot"},{data:{i:4,seed:69336750},type:"set seed"},{data:{english:0,cueSpeed:{vx:1828.25893,vy:-545.80077},deltaScrew:{x:0,y:0},verticalSpeed:0},type:"shot"},{data:{i:5,seed:97194995},type:"set seed"},{data:{english:0,cueSpeed:{vx:-1756.65027,vy:117.80134},deltaScrew:{x:0,y:0},verticalSpeed:0},type:"shot"},{data:{i:6,seed:70378389},type:"set seed"},{data:{english:0,cueSpeed:{vx:373.61702,vy:59.95748},deltaScrew:{x:0,y:0},verticalSpeed:0},type:"shot"},{data:{i:7,seed:30346308},type:"set seed"},{data:{english:0,cueSpeed:{vx:-683.15741,vy:-910.60334},deltaScrew:{x:0,y:0},verticalSpeed:0},type:"shot"},{data:{i:8,seed:55848908},type:"set seed"},{data:{english:0,cueSpeed:{vx:-1772.49333,vy:-114.27878},deltaScrew:{x:0,y:0},verticalSpeed:0},type:"shot"},{data:{i:9,seed:66192005},type:"set seed"},{data:{english:0,cueSpeed:{vx:219.5278,vy:936.17116},deltaScrew:{x:0,y:0},verticalSpeed:0},type:"shot"},{data:{i:10,seed:61796400},type:"set seed"},{data:{english:0,cueSpeed:{vx:-950.29503,vy:-1282.60777},deltaScrew:{x:0,y:0},verticalSpeed:0},type:"shot"},{data:{i:11,seed:9964193},type:"set seed"},{data:{score:540,landID:2,duration:120704,userName:"gsube.wam"},type:"end game"}],l.PAC_MAN_DEV_LOG=[{type:"start game",data:{seed:123456}},{type:"change direction",data:{dir:1,tick:44}},{type:"change direction",data:{dir:2,tick:69}},{type:"change direction",data:{dir:0,tick:107}},{type:"change direction",data:{dir:1,tick:128}},{type:"change direction",data:{dir:3,tick:149}},{type:"change direction",data:{dir:1,tick:187}},{type:"change direction",data:{dir:3,tick:198}},{type:"change direction",data:{dir:null,tick:219}},{type:"change direction",data:{dir:2,tick:229}},{type:"change direction",data:{dir:0,tick:280}},{type:"change direction",data:{dir:3,tick:331}},{type:"change direction",data:{dir:1,tick:382}},{type:"change direction",data:{dir:null,tick:430}},{type:"change direction",data:{dir:3,tick:452}},{type:"change direction",data:{dir:1,tick:543}},{type:"change direction",data:{dir:2,tick:595}},{type:"change direction",data:{dir:0,tick:633}},{type:"change direction",data:{dir:1,tick:668}},{type:"change direction",data:{dir:0,tick:681}},{type:"change direction",data:{dir:null,tick:691}},{type:"change direction",data:{dir:0,tick:743}},{type:"change direction",data:{dir:3,tick:781}},{type:"change direction",data:{dir:1,tick:806}},{type:"change direction",data:{dir:2,tick:881}},{type:"change direction",data:{dir:0,tick:932}},{type:"change direction",data:{dir:1,tick:954}},{type:"change direction",data:{dir:3,tick:977}},{type:"change direction",data:{dir:1,tick:1050}},{type:"change direction",data:{dir:3,tick:1102}},{type:"change direction",data:{dir:2,tick:1191}},{type:"change direction",data:{dir:0,tick:1214}},{type:"end game",data:{userName:"gr.au.wam",score:1200,duration:1234}}];class u{constructor(t){this._seed=t||Math.random(),this._seed=l.fixNumber(l.fixNumber(Math.imul(741103597,this._seed))>>>0)}set seed(t){this._seed=t,this._seed=l.fixNumber(l.fixNumber(Math.imul(741103597,this._seed))>>>0)}getRandom(){return this._seed=l.fixNumber(l.fixNumber(Math.imul(741103597,this._seed)>>>0)),l.fixNumber(this._seed/2**32)}}!function(t){t.PRELOAD_LAYER_COMMUNICATING="PRELOAD_LAYER_COMMUNICATING",t.PAYMENTS_LAYER_DUEL_READY_LABEL="PAYMENTS_LAYER_DUEL_READY_LABEL",t.PAYMENTS_LAYER_PLAY="PAYMENTS_LAYER_PLAY",t.PAYMENTS_LAYER_INFO_LABEL="PAYMENTS_LAYER_INFO_LABEL",t.PAYMENTS_LAYER_REWARD="PAYMENTS_LAYER_REWARD",t.PAYMENTS_LAYER_REWARD3="PAYMENTS_LAYER_REWARD3",t.PAYMENTS_LAYER_STAKED_CITIZEN_LABEL="PAYMENTS_LAYER_STAKED_CITIZEN_LABEL",t.PAYMENTS_LAYER_STAKED_TRIAL_LABEL="PAYMENTS_LAYER_STAKED_TRIAL_LABEL",t.PAYMENTS_LAYER_FREE="PAYMENTS_LAYER_FREE",t.PAYMENTS_LAYER_BALANCED="PAYMENTS_LAYER_BALANCED",t.PAYMENTS_LAYER_FAST_MATCHING="PAYMENTS_LAYER_FAST_MATCHING",t.PAYMENTS_LAYER_TERMS="PAYMENTS_LAYER_TERMS",t.ACCEPT_LAYER_TERMS="ACCEPT_LAYER_LAYER_TERMS",t.PAYMENTS_LAYER_UNLOCK_MULTIPLIER="PAYMENTS_LAYER_UNLOCK_MULTIPLIER",t.PAYMENTS_LAYER_ENTRY_FEE="PAYMENTS_LAYER_ENTRY_FEE",t.PAYMENTS_LAYER_EARLY_ACCESS="PAYMENTS_LAYER_EARLY_ACCESS",t.BOOSTER_LAYER_YOUR_CURRENT_SCORE="BOOSTER_LAYER_YOUR_CURRENT_SCORE",t.BOOSTER_LAYER_SKIP="BOOSTER_LAYER_SKIP",t.GAMEOVER_LAYER_CLOSED_DUEL_GAMEOVER="GAMEOVER_LAYER_CLOSED_DUEL_GAMEOVER",t.GAMEOVER_PLAY_AGAIN="GAMEOVER_PLAY_AGAIN",t.GAMEOVER_LAYER_CLOSED_DUEL_CLAIM_WAX="GAMEOVER_LAYER_CLOSED_DUEL_CLAIM_WAX",t.GAMEOVER_LAYER_CLOSED_DUEL_YOU_EARNED="GAMEOVER_LAYER_CLOSED_DUEL_YOU_EARNED",t.GAMEOVER_LAYER_OPEN_DUEL_GAMEOVER="GAMEOVER_LAYER_OPEN_DUEL_GAMEOVER",t.GAMEOVER_LAYER_OPEN_DUEL_SCORE_SUBMITTED="GAMEOVER_LAYER_OPEN_DUEL_SCORE_SUBMITTED",t.GAMEOVER_LAYER_OPEN_DUEL_WAITING="GAMEOVER_LAYER_OPEN_DUEL_WAITING",t.GAMEOVER_LAYER_REPLAY_GAME_ENDED="GAMEOVER_LAYER_REPLAY_GAME_ENDED",t.GAMEOVER_LAYER_REPLAY_PLAYER_SKIPPED="GAMEOVER_LAYER_REPLAY_PLAYER_SKIPPED",t.GAMEOVER_LAYER_REPLAY_PLAYER_QUIT="GAMEOVER_LAYER_REPLAY_PLAYER_QUIT",t.GAMEOVER_LAYER_REPLAY_RESTART="GAMEOVER_LAYER_REPLAY_RESTART",t.PAYMENT_LAYER_TOURNAMENT_PLAY="PAYMENT_LAYER_TOURNAMENT_PLAY",t.PAYMENT_LAYER_TOURNAMENT_CURRENT_TOURNAMENT_POT="PAYMENT_LAYER_TOURNAMENT_CURRENT_TOURNAMENT_POT",t.PRELOADER_LAYER_REPLAY="PRELOADER_LAYER_REPLAY",t.SLOTS_CONTAINER_REPLAY="SLOTS_CONTAINER_REPLAY",t.ERROR_DESC_CONTAINER_LOW_RESOURCES="ERROR_DESC_CONTAINER_LOW_RESOURCES",t.ERROR_DESC_CONTAINER_HERE="ERROR_DESC_CONTAINER_HERE",t.ERROR_DESC_CONTAINER_MORE_INFO="ERROR_DESC_CONTAINER_MORE_INFO",t.REPLAY_INFO_LAYER_SCORE="REPLAY_INFO_LAYER_SCORE",t.REPLAY_INFO_LAYER_DURATION="REPLAY_INFO_LAYER_DURATION",t.REPLAY_PAYMENT_LAYER_WATCH_REPLAY="REPLAY_PAYMENT_LAYER_WATCH_REPLAY",t.REPLAY_PAYMENT_LAYER_50="REPLAY_PAYMENT_LAYER_50",t.REPLAY_PAYMENT_LAYER_REMEMBER="REPLAY_PAYMENT_LAYER_REMEMBER",t.RESTORED_SESSION_LAYER_SESSION_RESTORED="RESTORED_SESSION_LAYER_SESSION_RESTORED",t.RESTORED_SESSION_LAYER_SEED_MSG_1="RESTORED_SESSION_LAYER_SEED_MSG_1",t.RESTORED_SESSION_LAYER_SEED_MSG_2="RESTORED_SESSION_LAYER_SEED_MSG_2",t.RESTORED_SESSION_LAYER_CONTINUE="RESTORED_SESSION_LAYER_CONTINUE",t.SKIP_DUEL_LAYER_ALREADY_BEAT="SKIP_DUEL_LAYER_ALREADY_BEAT",t.SKIP_DUEL_LAYER_SKIP="SKIP_DUEL_LAYER_SKIP",t.WAITING_LAYER_GAME_OVER="WAITING_LAYER_GAME_OVER",t.WAITING_LAYER_VALIDATING="WAITING_LAYER_VALIDATING",t.WEEKLY_HIGHSCORE="WEEKLY_HIGHSCORE",t.ALL_TIME_HIGHSCORE="ALL_TIME_HIGHSCORE"}(h||(h={}));const c={[h.PRELOAD_LAYER_COMMUNICATING]:{en:"communicating with the dome"},[h.PAYMENTS_LAYER_DUEL_READY_LABEL]:{en:"DUEL READY!"},[h.PAYMENTS_LAYER_PLAY]:{en:"PLAY"},[h.PAYMENTS_LAYER_INFO_LABEL]:{en:"Both you and your rival share the same random seed\nleading to the same random outcomes."},[h.PAYMENTS_LAYER_REWARD]:{en:"reward {reward}"},[h.PAYMENTS_LAYER_REWARD3]:{en:"REWARD"},[h.PAYMENTS_LAYER_STAKED_CITIZEN_LABEL]:{en:"* You need to stake a ClashDome citizen to play this game for free."},[h.PAYMENTS_LAYER_STAKED_TRIAL_LABEL]:{en:"* Your trial citizen is full. Stake a ClashDome citizen to continue playing for free."},[h.PAYMENTS_LAYER_FREE]:{en:"FREE"},[h.PAYMENTS_LAYER_BALANCED]:{en:"BALANCED"},[h.PAYMENTS_LAYER_FAST_MATCHING]:{en:"FAST"},[h.PAYMENTS_LAYER_TERMS]:{en:"BY CLICKING THE PLAY BUTTON YOU ACCEPT THE TERMS AND CONDITIONS OF CLASHDOME"},[h.ACCEPT_LAYER_TERMS]:{en:"BY CLICKING THE ACCEPT BUTTON YOU ACCEPT THE TERMS AND CONDITIONS OF CLASHDOME"},[h.PAYMENTS_LAYER_UNLOCK_MULTIPLIER]:{en:"UNLOCK MULTIPLIER BY PLAYING ONE DUEL ON THE WAX TIER"},[h.PAYMENTS_LAYER_ENTRY_FEE]:{en:"ENTRY FEE"},[h.PAYMENTS_LAYER_EARLY_ACCESS]:{en:"EARLY ACCESS"},[h.BOOSTER_LAYER_YOUR_CURRENT_SCORE]:{en:"YOUR CURRENT SCORE"},[h.BOOSTER_LAYER_SKIP]:{en:" SKIP"},[h.GAMEOVER_LAYER_CLOSED_DUEL_GAMEOVER]:{en:"GAME OVER"},[h.GAMEOVER_PLAY_AGAIN]:{en:"PLAY AGAIN"},[h.GAMEOVER_LAYER_CLOSED_DUEL_CLAIM_WAX]:{en:"CLAIM your WAX on HUB > Duel Results"},[h.GAMEOVER_LAYER_CLOSED_DUEL_YOU_EARNED]:{en:"YOU EARNED"},[h.GAMEOVER_LAYER_OPEN_DUEL_GAMEOVER]:{en:"GAME OVER"},[h.GAMEOVER_LAYER_OPEN_DUEL_SCORE_SUBMITTED]:{en:"YOUR SCORE WAS SUBMITTED!"},[h.GAMEOVER_LAYER_OPEN_DUEL_WAITING]:{en:"Waiting for a rival to respond your duel.\nCheck later the DUEL RESULTS section."},[h.GAMEOVER_LAYER_REPLAY_GAME_ENDED]:{en:"REPLAY ENDED"},[h.GAMEOVER_LAYER_REPLAY_PLAYER_SKIPPED]:{en:"The player skipped the match"},[h.GAMEOVER_LAYER_REPLAY_PLAYER_QUIT]:{en:"The player quit the match"},[h.GAMEOVER_LAYER_REPLAY_RESTART]:{en:"RESTART"},[h.PAYMENT_LAYER_TOURNAMENT_PLAY]:{en:"PLAY"},[h.PAYMENT_LAYER_TOURNAMENT_CURRENT_TOURNAMENT_POT]:{en:"CURRENT TOURNAMENT POT"},[h.PRELOADER_LAYER_REPLAY]:{en:"REPLAY..."},[h.SLOTS_CONTAINER_REPLAY]:{en:"REPLAY"},[h.ERROR_DESC_CONTAINER_LOW_RESOURCES]:{en:"The CPU of your WAX account is not enough to perform this transaction. Stake more resources    "},[h.ERROR_DESC_CONTAINER_HERE]:{en:"here."},[h.ERROR_DESC_CONTAINER_MORE_INFO]:{en:"More info about staking WAX here."},[h.REPLAY_INFO_LAYER_SCORE]:{en:"score: {score}"},[h.REPLAY_INFO_LAYER_DURATION]:{en:"duration: {duration}"},[h.REPLAY_PAYMENT_LAYER_WATCH_REPLAY]:{en:"WATCH REPLAY"},[h.REPLAY_PAYMENT_LAYER_50]:{en:"50% GOES TO"},[h.REPLAY_PAYMENT_LAYER_REMEMBER]:{en:"REMEMBER: WATCHING YOUR REPLAYS AND THE REPLAYS OF YOUR DIRECT RIVAL IS FREE."},[h.RESTORED_SESSION_LAYER_SESSION_RESTORED]:{en:"SESSION RESTORED"},[h.RESTORED_SESSION_LAYER_SEED_MSG_1]:{en:"STARTED: {date}"},[h.RESTORED_SESSION_LAYER_SEED_MSG_2]:{en:"STARTED: {date}\n DUEL ID: {duelId}"},[h.RESTORED_SESSION_LAYER_CONTINUE]:{en:"CONTINUE"},[h.SKIP_DUEL_LAYER_ALREADY_BEAT]:{en:"YOU ALREADY BEAT\nYOUR RIVAL'S SCORE!"},[h.SKIP_DUEL_LAYER_SKIP]:{en:"SKIP"},[h.WAITING_LAYER_GAME_OVER]:{en:"GAME OVER"},[h.WAITING_LAYER_VALIDATING]:{en:"Validating score ..."},[h.WEEKLY_HIGHSCORE]:{en:"NEW WEEK HIGHSCORE!"},[h.ALL_TIME_HIGHSCORE]:{en:"ALL TIME NEW HIGHSCORE!"}};class d{constructor(){this._textInstances=[]}init(t,e){this.translationData=c,this.lang=t,this.events=new Phaser.Events.EventEmitter,this._textInstances=[]}setLanguage(t){this.lang=t,this.events.emit(d.LANGUAGE_CHANGED),this._textInstances.forEach(t=>{t.text.setText(this.get(t.value,t.variables))})}track(t,e){const i=t.text;this._textInstances.push({text:t,value:i,variables:e}),t.setText(this.get(i,e)),t.once(Phaser.GameObjects.Events.DESTROY,()=>{const e=this._textInstances.findIndex(e=>e.text===t);e>=0&&this._textInstances.splice(e,1)},this)}get(t,e={}){if(!this.translationData[t])return t;let i=this.translationData[t][this.lang];i||(i=this.translationData[t][this.fallback]),i||(i=t);return i.replace(/{(\w+)}/g,(t,i)=>e.hasOwnProperty(i)?e[i]:t)}}d.LANGUAGE_CHANGED="LANGUAGE_CHANGED";const f=new d;class p extends Phaser.GameObjects.Image{constructor(t,e,i,n,r,s=r){super(t,e,i,n,r),this.setInteractive({pixelPerfect:!0,useHandCursor:!0}),r!==s&&(this.on("pointerover",()=>{this.setFrame(s)},this),this.on("pointerout",()=>{this.setFrame(r)},this),this.on("pointerdown",()=>{this.setFrame(s)},this),this.on("pointerup",()=>{this.setFrame(r)},this))}setFrames(t,e=t){this.on("pointerover",()=>{this.setFrame(e)},this),this.on("pointerout",()=>{this.setFrame(t)},this),this.on("pointerdown",()=>{this.setFrame(e)},this),this.on("pointerup",()=>{this.setFrame(t)},this)}setInflationTween(t,e=this.scaleX,i=this.scaleY,n,r){this.setScale(e,i),this.defaultScale={x:e,y:i},n&&(r||(r={ease:Phaser.Math.Easing.Cubic.Out,duration:200})),this.on("pointerover",()=>{n?this.scene.tweens.add({targets:[this],scaleX:this.defaultScale.x*t,scaleY:this.defaultScale.y*t,ease:r.ease,duration:r.duration}):this.setScale(this.defaultScale.x*t,this.defaultScale.y*t)},this),this.on("pointerout",()=>{n?this.scene.tweens.add({targets:[this],scaleX:this.defaultScale.x,scaleY:this.defaultScale.y,ease:r.ease,duration:r.duration}):this.setScale(this.defaultScale.x,this.defaultScale.y)},this),this.on("pointerdown",()=>{this.scene.game.device.os.desktop?this.setScale(this.defaultScale.x,this.defaultScale.y):this.setScale(this.defaultScale.x*t,this.defaultScale.y*t)},this),this.on("pointerup",()=>{this.scene.game.device.os.desktop?this.setScale(this.defaultScale.x*t,this.defaultScale.y*t):this.setScale(this.defaultScale.x,this.defaultScale.y)},this)}onUp(t,e){this.on("pointerup",t,e)}onDown(t,e){this.on("pointerdown",t,e)}onOver(t,e){this.on("pointerover",t,e)}onOut(t,e){this.on("pointerout",t,e)}disable(){this.disableInteractive()}enable(){this.setInteractive()}}class g extends Phaser.GameObjects.Container{constructor(t,e,i,n,r){super(t),this.buttonImage=e,this.buttonImage.setInteractive({useHandCursor:!0}),this.buttonImage.on("pointerover",()=>{this.originalScale=this.scaleX,this.setScale(1.025*this.originalScale)},this),this.buttonImage.on("pointerout",()=>{this.setScale(this.originalScale)},this),this.buttonImage.on("pointerup",()=>{!U.currentScene.game.device.os.desktop&&U.gameWidth>U.gameHeight&&U.currentScene.scale.startFullscreen(),n.apply(r)},this),this.add(this.buttonImage),this.add(i)}enable(){this.buttonImage.setInteractive({useHandCursor:!0})}disable(){this.buttonImage.disableInteractive()}}const m=new class{create(t,e,i,n){if(!t.textures.exists(i))return;t.textures.exists(e)&&t.textures.remove(e);const r=t.textures.createCanvas(e,510,510),s=r.context;for(let e=0;e<5;e++)for(let a=0;a<5;a++){const o=102*e,h=102*a,l=new Phaser.Curves.Path(o+1+100,h+1+50).circleTo(50).getPoints();s.save(),s.moveTo(l[0].x,l[0].y),s.beginPath();for(let t=1;t<l.length;t++)s.lineTo(l[t].x,l[t].y);s.closePath(),s.clip();const u=t.textures.get(i).getSourceImage();if(Boolean(n)){const e=t.textures.getFrame(i,n).canvasData;s.drawImage(u,e.x,e.y,e.width,e.height,0,0,102,102)}else s.drawImage(u,0,0,102,102);s.restore(),r.add(`${e}x${a}`,0,102*e,102*a,102,102)}r.refresh()}};class y extends Phaser.GameObjects.Container{constructor(t,e){if(super(t),"string"!=typeof e&&(e=JSON.stringify(e)),-1!==e.indexOf("ClashDome")&&(e=e.replace("ClashDome Error - ","")),e.includes("billed CPU time"))this.composeCaseCPU();else{let t=30-5*Math.floor(e.length/80);t<20&&(t=20),e.length>260&&(e=e.substring(0,257)+"...");const i=new Phaser.GameObjects.Text(this.scene,0,46,e,{fontFamily:"Oswald-ExtraLight",fontSize:t+"px",color:"#00ddfe",align:"center"});i.setOrigin(.5),i.setWordWrapWidth(460),this.add(i)}}composeCaseCPU(){const t=new Phaser.GameObjects.Text(this.scene,0,46,h.ERROR_DESC_CONTAINER_LOW_RESOURCES,{fontFamily:"Oswald-ExtraLight",fontSize:"25px",color:"#00ddfe",align:"center"});t.setOrigin(.5),t.setWordWrapWidth(460),this.add(t),f.track(t);const e=new Phaser.GameObjects.Text(this.scene,155,46,h.ERROR_DESC_CONTAINER_HERE,{fontFamily:"Oswald-ExtraLight",fontSize:"25px",color:"#FFFFFF"});e.setOrigin(0),this.add(e),f.track(e),e.setInteractive(),e.on("pointerup",()=>{var t=window.open(U.urls.bloks+"/wallet/resources/stake","_blank");t&&t.focus?t.focus():t||(window.location.href=U.urls.bloks+"/wallet/resources/stake")},this.scene);const i=new Phaser.GameObjects.Graphics(this.scene);i.fillStyle(16777215,1),i.fillRect(155,75,41,1),this.add(i);const n=new Phaser.GameObjects.Text(this.scene,0,100,h.ERROR_DESC_CONTAINER_MORE_INFO,{fontFamily:"Oswald-ExtraLight",fontSize:"25px",color:"#FFFFFF",align:"center"});n.setOrigin(.5),this.add(n),f.track(n),n.setInteractive(),n.on("pointerup",()=>{var t=window.open("https://youtu.be/GAts5Pwg_Is?t=267","_blank");t&&t.focus?t.focus():t||(window.location.href="https://youtu.be/GAts5Pwg_Is?t=267")},this.scene);const r=new Phaser.GameObjects.Graphics(this.scene);r.fillStyle(16777215,1),r.fillRect(-140,112,280,1),this.add(r)}}class v extends Phaser.GameObjects.Container{constructor(t,e,i,n,r,s){super(t,e,i),this._text=new Phaser.GameObjects.Text(this.scene,0,0,s.toUpperCase(),{fontFamily:"Oswald-Medium",fontSize:"30px",color:"#387ecb"}),this.add(this._text),this._text.setOrigin(0,.5),this._button=new p(this.scene,n,0,"texture_atlas_0","btn_play_off","btn_play_on"),this.add(this._button),this._button.setOrigin(1,0),this._text.y=this._button.displayHeight/2,this._button.onDown(()=>{l.openExternalLink(U.urls.clashdome+`/${r}/play?duel=true`,!0)},this),-1!==s.indexOf("(coming soon)")&&(this._button.alpha=.35,this._button.disableInteractive())}get DisplayHeight(){return this._button.displayHeight}}class _ extends Phaser.GameObjects.Container{constructor(t){super(t,0,0),this.WIDTH=.7*U.gameWidth,this._overlay=new Phaser.GameObjects.Rectangle(t,0,0,U.gameWidth,U.gameHeight,0,.3),this.add(this._overlay),this._overlay.x+=U.gameWidth/2,this._overlay.y+=U.gameHeight/2,this._overlay.setInteractive(),this._container=new Phaser.GameObjects.Container(this.scene),this.add(this._container),this._container.setAlpha(0),this._container.setScale(U.scaleX,U.scaleY),U.gameWidth>U.gameHeight&&(this._container.scaleX*=.7,this._container.scaleY*=.7),this._bg=new Phaser.GameObjects.Graphics(t,{fillStyle:{color:16777215,alpha:1}}),this._bg.fillRect(0,0,this.WIDTH,2*U.gameHeight),this._container.add(this._bg),this._closeButton=new p(this.scene,this.WIDTH-10,10,"texture_atlas_0","btn_close_on","btn_close_off"),this._container.add(this._closeButton),this._closeButton.onDown(this.close,this),this._closeButton.setOrigin(1,0);let e=this._closeButton.getBottomCenter().y+30;this._hubButton=new p(this.scene,0,0,"texture_atlas_0","btn_hub_on","btn_hub_off"),this._container.add(this._hubButton),this._hubButton.setOrigin(0),this._hubButton.onDown(()=>{l.openExternalLink(U.urls.clashdome+"/token-mining-game/"+U.playerAccount,!0)},!0);const i=[this._hubButton];Object.keys(l.GAME_TITLES).forEach(t=>{if(t===U.gameName)return;const e=l.GAME_TITLES[t],n=new v(this.scene,0,0,this.WIDTH-40,t,e);this._container.add(n),i.push(n)});for(let t=0;t<i.length;t++){this.createHorizonalLine().setPosition(0,e);const n=i[t];e+=15,n.setPosition(20,e),n instanceof p?e+=n.displayHeight:n instanceof v&&(e+=n.DisplayHeight),e+=15}this.createHorizonalLine().setPosition(0,e),this.scene.add.tween({targets:this._container,alpha:1,x:{from:this._container.x-50,to:this._container.x},duration:400,ease:Phaser.Math.Easing.Quartic.Out})}close(){this.scene.add.tween({targets:this._container,alpha:0,x:"-=50",duration:400,ease:Phaser.Math.Easing.Quartic.Out,onComplete:()=>{this.destroy(!0)},onCompleteScope:this})}createHorizonalLine(){const t=new Phaser.GameObjects.Graphics(this.scene,{lineStyle:{color:13421772,width:1}});return this._container.add(t),t.lineBetween(0,0,this.WIDTH,0),t}}class x extends Phaser.GameObjects.Container{constructor(t,e,i,n,r,s,a){super(U.currentScene),this.retryCallback=i,this.args=n,this.retryCallbackScope=r,s=s||"TRY AGAIN",this.enableInputsAfterClosing=a;const o=new Phaser.GameObjects.Graphics(this.scene);o.fillStyle(597301,.85),o.fillRect(0,0,U.gameWidth,U.gameHeight),this.add(o),this.scaledItemsContainer=new Phaser.GameObjects.Container(this.scene),this.scaledItemsContainer.x=.5*U.gameWidth,this.scaledItemsContainer.y=.4*U.gameHeight,this.scaledItemsContainer.scaleX=U.scaleX,this.scaledItemsContainer.scaleY=U.scaleY,this.add(this.scaledItemsContainer),U.gameWidth>U.gameHeight&&(this.scaledItemsContainer.scaleX*=.74,this.scaledItemsContainer.scaleY*=.74);const h=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","box_small");this.scaledItemsContainer.add(h);const u=new Phaser.GameObjects.Image(this.scene,0,-175,"texture_atlas_0","logo_cd");this.scaledItemsContainer.add(u);const c=new Phaser.GameObjects.Text(this.scene,0,-38,t,{fontFamily:"Oswald-Medium",fontSize:"40px",color:"#FFFFFF"});c.setOrigin(.5),this.scaledItemsContainer.add(c);const d=new y(this.scene,e);if(this.scaledItemsContainer.add(d),!U.replayMode){if(l.isPlayerLogged()){const t=U.development?"gr.au.wam":U.reactClass.state.wax.userAccount,e=new Phaser.GameObjects.Text(this.scene,-230,125,t,{fontFamily:"Oswald-ExtraLight",fontSize:"22px",color:"#00ddfe"});e.setOrigin(0,.5),e.tint=56830,this.scaledItemsContainer.add(e)}if(null!==U.duelID&&-1!==U.duelID){const t=new Phaser.GameObjects.Text(this.scene,230,125,"ID:"+U.duelID,{fontFamily:"Oswald-ExtraLight",fontSize:"22px",color:"#00ddfe"});t.setOrigin(1,.5),t.tint=56830,this.scaledItemsContainer.add(t)}}if(this.retryCallback||this.enableInputsAfterClosing){const t=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","btn_regular"),e=new Phaser.GameObjects.Text(this.scene,0,0,s,{fontFamily:"Oswald-Medium",fontSize:"36px",color:"#361601"});e.setOrigin(.5);const i=new g(this.scene,t,e,this.onDownTryAgain,this);i.y=230,i.visible=!1,this.scaledItemsContainer.add(i),this.scene.time.delayedCall(500,(function(){i.visible=!0}),[],this)}if(U.expiredGame){const t=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","btn_regular");t.setOrigin(.5),t.setScale(1.2);const e=new Phaser.GameObjects.Text(this.scene,0,0,"OK",{fontFamily:"Oswald-Medium",fontSize:"40px",color:"#361601"});e.setOrigin(.5);const i=new g(this.scene,t,e,U.onRestart,this);i.x=0,i.y=220,i.alpha=0,this.scaledItemsContainer.add(i),this.scene.tweens.add({targets:i,alpha:1,ease:Phaser.Math.Easing.Cubic.Out,duration:350,delay:500})}this.moreGamesMenuBtn=new p(this.scene,65*U.scaleX,65*U.scaleY,"texture_atlas_0","btn_menu_off","btn_menu_on"),this.moreGamesMenuBtn.onDown(this.openMenu,this),this.moreGamesMenuBtn.setScale(U.scaleX,U.scaleY),this.add(this.moreGamesMenuBtn),U.gameWidth>U.gameHeight&&(this.moreGamesMenuBtn.scaleX*=.7,this.moreGamesMenuBtn.scaleY*=.7)}onOrientationChange(){this.scaledItemsContainer.scaleX=U.scaleX,this.scaledItemsContainer.scaleY=U.scaleY}openMenu(){const t=new _(this.scene);this.add(t)}onDownTryAgain(){this.destroy(),U.errorLayer=null,b.errorLayer=null,this.retryCallback&&this.retryCallback.apply(this.retryCallbackScope,this.args),this.enableInputsAfterClosing&&U.enableInputsCallback.apply(U.gameManagerReference,[])}}class w extends Phaser.GameObjects.Container{constructor(t,e,i){super(t);const n=new Phaser.GameObjects.Graphics(this.scene);n.fillStyle(597301,.85),n.fillRect(0,0,U.gameWidth,U.gameHeight),this.add(n),this.scaledItemsContainer=new Phaser.GameObjects.Container(this.scene),this.scaledItemsContainer.x=.5*U.gameWidth,this.scaledItemsContainer.y=.5*U.gameHeight,this.scaledItemsContainer.scaleX=U.scaleX,this.scaledItemsContainer.scaleY=U.scaleY,this.add(this.scaledItemsContainer),U.gameWidth>U.gameHeight&&(this.scaledItemsContainer.scaleX*=.74,this.scaledItemsContainer.scaleY*=.74);const r=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","box_bg");if(this.scaledItemsContainer.add(r),r.setScale(.75),this.titleLabel=new Phaser.GameObjects.Text(this.scene,0,-110,e,{fontFamily:"Oswald-Medium",fontSize:"35px",align:"center",color:"#FFFFFF"}),this.titleLabel.setWordWrapWidth(300),this.titleLabel.setOrigin(.5),this.scaledItemsContainer.add(this.titleLabel),i){const t=new Phaser.GameObjects.Text(this.scene,0,-35,i,{fontFamily:"Oswald-ExtraLight",fontSize:"25px",align:"center",color:"#FFFFFF"});t.setOrigin(.5),this.scaledItemsContainer.add(t)}const s=new Phaser.GameObjects.Image(this.scene,0,65,"texture_atlas_0","load_icon");this.scaledItemsContainer.add(s),this.scene.tweens.add({targets:s,angle:360,ease:Phaser.Math.Easing.Linear,duration:2e3,repeat:-1})}updateTitle(t){this.titleLabel.text=t}}class b{static async saveGameData(t,e){const i=U.gameName+"-"+t;localStorage.setItem(i,JSON.stringify(e))}static async retrieveGameData(t){const e=U.gameName+"-"+t;return{error:null,gameData:localStorage.getItem(e),t:12345}}static throwError(t){U.disableInputsCallback.apply(U.gameManagerReference,[]),b.errorLayer=new x("ERROR!",t,null,[],null,"CLOSE",!0),U.currentScene.add.existing(b.errorLayer)}static async mintNFT(t,e){const i=parseInt(l.GAME_IDS[U.gameName]);if(U.disableInputsCallback.apply(U.gameManagerReference,[]),b.errorLayer&&(b.errorLayer.destroy(),b.errorLayer=null),b.infoLayer=new w(U.currentScene,"MINTING NFT"),U.currentScene.add.existing(b.infoLayer),U.development)return new Promise((t,e)=>{setTimeout(t,1500)}).then((function(){return b.infoLayer.destroy(),U.enableInputsCallback.apply(U.gameManagerReference,[]),e.apply(U.gameManagerReference,[]),{message:"success"}}));if("pac-man"===U.gameName){const n=[{account:"eosio.token",name:"transfer",authorization:[{actor:U.playerAccount,permission:"active"}],data:{from:U.playerAccount,to:"clashdomepay",quantity:"0.01000000 WAX",memo:"mint level"}}];try{"wcw"===U.reactClass.state.wax.type?await U.reactClass.state.wax.api.transact({actions:n},{blocksBehind:3,expireSeconds:30}):"anchor"===U.reactClass.state.wax.type&&await U.reactClass.state.wax.signTransaction({actions:n},{blocksBehind:3,expireSeconds:30})}catch(e){return b.errorLayer=new x("ERROR!",e.message,b.mintNFT,[t],b),U.currentScene.add.existing(b.errorLayer),{error:e.message}}const r=await l.fetchWithTimeout("/api/pac-man-game/mint-level-nft",{headers:{"Content-type":"application/json"},method:"POST",body:JSON.stringify({nftData:t,userName:U.playerAccount,gameID:i}),timeout:15e3});if(200===r.status)return U.enableInputsCallback.apply(U.gameManagerReference,[]),e.apply(U.gameManagerReference,[]),{message:"success"};{const t=await r.json();return b.errorLayer=new x("ERROR!",t.error,null,[],null,"CLOSE",!0),U.currentScene.add.existing(b.errorLayer),{error:t.error}}}}static async getNFTs(t,e,n){const r=new(0,i(12).ExplorerApi)(U.urls.atomic,"atomicassets",{fetch:fetch}),s=await r.getAssets({owner:U.playerAccount,collection_name:"clashdomenft",schema_name:t});e.apply(n,[s])}static async hasPlayerEditedLevel(t){if(U.development)return new Promise((function(t,e){setTimeout(t,500)})).then((function(){return!0}));{const t=parseInt(l.GAME_IDS[U.gameName]),e=await l.fetchWithTimeout("/api/pac-man-game/has-player-edited-level/"+U.playerAccount+"/"+t,{timeout:15e3}),i=await e.json();if(200===e.status)return i.hasPlayerEditedLevel;throw b.errorLayer=new x("ERROR!",i.error,b.stakeNFTs),U.currentScene.add.existing(b.errorLayer),new Error(i.error)}}static async getNFTsAndImages(t,e,n,r){U.disableInputsCallback.apply(U.gameManagerReference,[]);const s=new(0,i(12).ExplorerApi)(U.urls.atomic,"atomicassets",{fetch:fetch});let a=[];for(let e=0;e<t.length;e++){const i=await s.getAssets({owner:U.playerAccount,collection_name:"clashdomenft",schema_name:t[e]});a[t[e]]=i}U.currentScene.load.setPath("https://atomichub-ipfs.com/ipfs");for(let t=0;t<e.length;t++)U.currentScene.load.image(e[t],e[t]);U.currentScene.load.once("complete",()=>{U.enableInputsCallback.apply(U.gameManagerReference,[]),b.infoLayer.destroy(),n.apply(r,[a])},b),U.currentScene.load.start()}static async getStakedNFTs(t,e){b.infoLayer=new w(U.currentScene,"GETTING STAKED NFTs DATA"),U.currentScene.add.existing(b.infoLayer);let i=await l.getTableRows(t,e,500,2,"i64",U.playerAccount,U.playerAccount,!1,0);return b.infoLayer.destroy(),i.rows}static async getStakedNFTsAndImages(t,e,i,n,r){b.infoLayer=new w(U.currentScene,"GETTING STAKED NFTs DATA"),U.currentScene.add.existing(b.infoLayer);let s=await l.getTableRows(t,e,500,2,"i64",U.playerAccount,U.playerAccount,!1,0);b.infoLayer.updateTitle("LOADING NFTs IMAGES"),U.currentScene.load.setPath("https://atomichub-ipfs.com/ipfs");for(let t=0;t<i.length;t++)U.currentScene.load.image(i[t],i[t]);U.currentScene.load.once("complete",()=>{U.enableInputsCallback.apply(U.gameManagerReference,[]),b.infoLayer.destroy(),n.apply(r,[s.rows])},b),U.currentScene.load.start()}static async stakeNFTs(t,e,n,r,s,a){if(U.disableInputsCallback.apply(U.gameManagerReference,[]),b.errorLayer&&(b.errorLayer.destroy(),b.errorLayer=null),b.infoLayer=new w(U.currentScene,"STAKING NFTs"),U.currentScene.add.existing(b.infoLayer),U.development)return new Promise((t,e)=>{setTimeout(t,1500)}).then((function(){return b.infoLayer.destroy(),s.apply(a),U.enableInputsCallback.apply(U.gameManagerReference,[]),{error:null}}));{const o=new(0,i(12).ExplorerApi)(U.urls.atomic,"atomicassets",{fetch:fetch});let h=await o.getAssets({owner:U.playerAccount,collection_name:"clashdomenft",schema_name:r});const u=h.length,c=await l.callAction("atomicassets","transfer",{from:U.playerAccount,to:t,asset_ids:e,memo:n});if(c.error)return b.infoLayer.destroy(),b.errorLayer=new x("ERROR!",c.error,b.stakeNFTs,[t,e,n],b),U.currentScene.add.existing(b.errorLayer),{error:c.error};for(await l.delay(2500),h=await o.getAssets({owner:U.playerAccount,collection_name:"clashdomenft",schema_name:r});u===h.length;)await l.delay(2500),h=await o.getAssets({owner:U.playerAccount,collection_name:"clashdomenft",schema_name:r});b.infoLayer.destroy(),s.apply(a),U.enableInputsCallback.apply(U.gameManagerReference,[])}}static async unstakeNFTs(t,e,n,r,s,a){if(U.disableInputsCallback.apply(U.gameManagerReference,[]),b.errorLayer&&(b.errorLayer.destroy(),b.errorLayer=null),b.infoLayer=new w(U.currentScene,"UNSTAKING NFTs"),U.currentScene.add.existing(b.infoLayer),U.development)return new Promise((t,e)=>{setTimeout(t,1500)}).then((function(){return b.infoLayer.destroy(),s.apply(a),U.enableInputsCallback.apply(U.gameManagerReference,[]),{error:null}}));{const o=new(0,i(12).ExplorerApi)(U.urls.atomic,"atomicassets",{fetch:fetch});let h=await o.getAssets({owner:U.playerAccount,collection_name:"clashdomenft",schema_name:r});const u=h.length,c=await l.callAction(t,e,{account:U.playerAccount,asset_ids:n});if(c.error)return b.infoLayer.destroy(),b.errorLayer=new x("ERROR!",c.error,b.stakeNFTs,[n,s,a],b),U.currentScene.add.existing(b.errorLayer),{error:c.error};for(await l.delay(2500),h=await o.getAssets({owner:U.playerAccount,collection_name:"clashdomenft",schema_name:r});u===h.length;)await l.delay(2500),h=await o.getAssets({owner:U.playerAccount,collection_name:"clashdomenft",schema_name:r});b.infoLayer.destroy(),s.apply(a),U.enableInputsCallback.apply(U.gameManagerReference,[])}}static async castVote(t){if(U.development)return new Promise((t,e)=>{setTimeout(t,1200)}).then((function(){T.currentInstance.onVoteCasted()}));{const e=await l.fetchWithTimeout("/api/pac-man-game/vote-level/"+U.playerAccount+"/"+U.landID+"/"+t+"/"+U.credential,{timeout:15e3});if(200===e.status)T.currentInstance.onVoteCasted();else{const t=await e.json();U.gameOverLayerOpenDuel&&U.gameOverLayerOpenDuel.destroy(),U.gameOverLayerClosedDuel&&U.gameOverLayerClosedDuel.destroy(),b.errorLayer=new x("ERROR!",t.error),U.currentScene.add.existing(b.errorLayer)}}}static async getReplayLog(){if(U.development)return new Promise((t,e)=>{setTimeout(t,500)}).then((function(){let t;switch(U.gameName){case"candy-fiesta":t=JSON.parse(JSON.stringify(l.CANDY_FIESTA_DEV_LOG));break;case"templok":t=JSON.parse(JSON.stringify(l.TEMPLOK_DEV_LOG));break;case"ringy-dingy":t=JSON.parse(JSON.stringify(l.RINGY_DINGY_DEV_LOG));break;case"endless-siege-2":t=JSON.parse(JSON.stringify(l.ENDLESS_SIEGE_2_DEV_LOG));break;case"rug-pool":t=JSON.parse(JSON.stringify(l.RUG_POOL_DEV_LOG));break;case"pac-man":t=JSON.parse(JSON.stringify(l.PAC_MAN_DEV_LOG))}const e=t.pop();return U.replayAccount=e.data.userName,U.replayScore=e.data.score,U.replayDuration=Math.floor(e.data.duration/1e3),U.landID=e.data.landID,t[t.length-1].type===n.SKIP_GAME?U.gameOverType=a.SKIP:t[t.length-1].type===n.LEAVE_GAME&&(U.gameOverType=a.QUIT),{actions:t}}));{const t=await fetch("/api/clashdome-game/get-replay-log/"+U.replayDuelID+"/"+U.duelReplayPlayerOrder),e=await t.json();if(e.error)return U.errorLayer=new x("ERROR!",e.error),U.currentScene.add.existing(U.errorLayer),{error:!0};{const t=JSON.parse(e.actions);if(t){const e=t.pop();return U.replayAccount=e.data.userName,U.replayScore=e.data.score,U.replayDuration=Math.floor(e.data.duration/1e3),U.landID=e.data.landID,t[t.length-1].type===n.SKIP_GAME?U.gameOverType=a.SKIP:t[t.length-1].type===n.LEAVE_GAME&&(U.gameOverType=a.QUIT),{actions:t}}return U.errorLayer=new x("ERROR!","No actions found for duel:"+U.replayDuelID),U.currentScene.add.existing(U.errorLayer),{error:!0}}}}static async fetchLevelData(){if(U.development)return new Promise((t,e)=>{setTimeout(t,500)}).then((function(){"pac-man"===U.gameName&&(U.levelData={board:[[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2],[3,3,3,2,2,2,2,2,2,2,2,2,1,1,1,1,1,2],[3,3,3,2,1,1,1,1,1,1,2,2,1,2,2,2,1,2],[3,3,3,2,1,2,2,1,2,1,2,2,1,2,3,2,1,2],[3,3,3,2,1,1,1,1,2,1,2,2,1,2,2,2,1,2],[3,3,3,2,1,2,2,1,1,1,2,2,1,1,1,1,1,2],[3,3,3,2,1,2,2,2,2,1,2,2,2,2,2,2,2,2],[3,3,3,2,1,2,2,2,2,1,2,2,3,3,3,3,3,3],[3,3,3,2,1,1,1,1,1,1,1,2,3,3,3,3,3,3],[3,3,3,2,1,2,2,2,2,2,1,2,3,3,3,3,3,3],[3,3,3,2,1,1,1,1,1,1,1,2,3,3,3,3,3,3],[3,3,3,2,1,2,2,2,2,2,1,2,2,2,2,2,3,3],[3,3,3,2,1,2,3,3,3,2,1,1,1,1,1,2,3,3],[3,3,3,2,1,2,2,2,2,2,1,2,2,2,1,2,3,3],[3,3,3,2,1,1,1,1,1,1,1,1,1,1,1,2,3,3],[3,3,3,2,2,2,2,1,2,2,1,2,2,2,1,2,3,3],[3,3,3,3,3,3,2,1,2,2,1,2,2,2,1,2,3,3],[3,3,3,3,3,3,2,1,2,2,1,1,1,1,1,2,3,3],[3,3,3,3,3,3,2,1,2,2,1,2,2,2,1,2,3,3],[3,3,3,3,3,3,2,1,2,2,1,1,1,1,1,2,3,3],[3,3,3,3,3,3,2,1,2,2,2,2,2,2,1,2,3,3],[3,3,3,3,3,3,2,1,2,3,3,3,3,2,1,2,3,3],[3,3,3,3,3,3,2,1,2,3,3,3,3,2,1,2,3,3],[3,3,3,3,3,3,2,1,2,2,2,2,2,2,1,2,3,3],[3,3,3,3,3,3,2,1,1,1,1,1,1,1,1,2,3,3],[3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3]],interactiveItems:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,5,4,4,4,4,0],[0,0,0,0,4,4,4,4,4,4,0,0,4,0,0,0,4,0],[0,0,0,0,4,0,0,4,0,4,0,0,4,0,0,0,4,0],[0,0,0,0,4,4,4,4,0,4,0,0,4,0,0,0,4,0],[0,0,0,0,4,0,0,5,4,4,0,0,7,4,4,4,11,0],[0,0,0,0,4,0,0,0,0,4,0,0,0,0,0,0,0,0],[0,0,0,0,4,0,0,0,0,4,0,0,0,0,0,0,0,0],[0,0,0,0,4,4,4,6,4,4,4,0,0,0,0,0,0,0],[0,0,0,0,4,0,0,0,0,0,4,0,0,0,0,0,0,0],[0,0,0,0,5,4,4,4,4,4,11,0,0,0,0,0,0,0],[0,0,0,0,4,0,0,0,0,0,4,0,0,0,0,0,0,0],[0,0,0,0,4,0,0,0,0,0,4,4,4,4,4,0,0,0],[0,0,0,0,4,0,0,0,0,0,4,0,0,0,4,0,0,0],[0,0,0,0,4,4,4,5,4,4,4,4,4,4,4,0,0,0],[0,0,0,0,0,0,0,4,0,0,4,0,0,0,4,0,0,0],[0,0,0,0,0,0,0,4,0,0,4,0,0,0,4,0,0,0],[0,0,0,0,0,0,0,4,0,0,4,4,4,4,4,0,0,0],[0,0,0,0,0,0,0,4,0,0,4,0,0,0,4,0,0,0],[0,0,0,0,0,0,0,5,0,0,9,4,4,4,4,0,0,0],[0,0,0,0,0,0,0,4,0,0,0,0,0,0,4,0,0,0],[0,0,0,0,0,0,0,4,0,0,0,0,0,0,4,0,0,0],[0,0,0,0,0,0,0,4,0,0,0,0,0,0,4,0,0,0],[0,0,0,0,0,0,0,4,0,0,0,0,0,0,4,0,0,0],[0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],gameOverOptions:{time:3600,lifes:2},playerData:{position:{x:13,y:7},iVelocity:null},ghostData:[{position:{x:10,y:12},ghosts:["blinky"],iVelocity:0},{position:{x:24,y:10},ghosts:["blinky","pinky","inky"],iVelocity:0}],editionTimestamp:1676555239464,author:"clashdomeali"})}))}}class T extends Phaser.GameObjects.Container{constructor(t){if(super(t),T.currentInstance=this,this.x=U.gameWidth/2,this.y=U.gameHeight,!U.hasPlayerVotedLevel){this.votesContainer=new Phaser.GameObjects.Container(this.scene),this.add(this.votesContainer);const t=new Phaser.GameObjects.Image(this.scene,6,0,"texture_atlas_0","votes_cartridge");t.setOrigin(.5,1),this.votesContainer.add(t);const e=new Phaser.GameObjects.Text(this.scene,-140,-25,"RATE THIS LEVEL",{fontFamily:"Oswald-Medium",fontSize:"26px",color:"#FFFFFF"});e.setOrigin(1,.5),this.votesContainer.add(e),this.stars=[];const i=this;for(let t=0;t<5;t++){const e=new Phaser.GameObjects.Image(this.scene,43*t-80,-26,"texture_atlas_0","star_voting_off");e.setInteractive({useHandCursor:!0}),e.on("pointerdown",(function(){i.onDownStar(t)}),this),this.scene.game.device.os.desktop&&(e.on("pointerout",(function(){i.onOutStar()}),this),e.on("pointerover",(function(){i.onOverStar(t)}),this)),this.votesContainer.add(e),this.stars.push(e)}this.votesContainer.y=75,e.visible=!1,this.scene.tweens.add({targets:this.votesContainer,y:0,ease:Phaser.Math.Easing.Cubic.Out,duration:500,delay:1e3,onComplete:function(){e.visible=!0},onCompleteScope:this})}const e=new Phaser.GameObjects.Text(this.scene,U.gameWidth/2-10,-10,"ID:"+U.landID,{fontFamily:"Oswald-ExtraLight",fontSize:"20px",color:"#00ddfe"});e.setOrigin(1),this.add(e);const i=new Phaser.GameObjects.Text(this.scene,U.gameWidth/2-80,45-U.gameHeight,"Designed by\n"+U.levelData.author,{fontFamily:"Oswald-ExtraLight",fontSize:"20px",color:"#00ddfe",align:"center"});i.setOrigin(.5),i.setInteractive({useHandCursor:!0}),i.on("pointerdown",this.onDownAuthorLabel,this),this.add(i),m.create(this.scene,"circle-avatar-"+U.levelData.author,"avatar-"+U.levelData.author);const n="circle-avatar-"+U.adversaryAccount;this.scene.textures.exists(n)?this.levelAuthorAvatar=new Phaser.GameObjects.Image(this.scene,U.gameWidth/2-80,125-U.gameHeight,n):this.levelAuthorAvatar=new Phaser.GameObjects.Image(this.scene,U.gameWidth/2-80,125-U.gameHeight,"texture_atlas_0","default_avatar"),this.levelAuthorAvatar.setScale(80/this.levelAuthorAvatar.width),this.add(this.levelAuthorAvatar)}onVoteCasted(){this.votesContainer.visible=!1;const t=new Phaser.GameObjects.Text(this.scene,0,-25,"THANKS FOR VOTING!",{fontFamily:"Oswald-ExtraLight",fontSize:"26px",color:"#00ddfe"});t.setOrigin(.5),this.add(t)}onDownStar(t){b.castVote(t+1);for(let t=0;t<5;t++)this.stars[t].disableInteractive();this.votesContainer.alpha=.5}onLevelAuthorAvatarLoaded(){m.create(this.scene,"circle-avatar-"+U.levelData.author,"avatar-"+U.levelData.author),this.levelAuthorAvatar&&this.levelAuthorAvatar.destroy();const t="circle-avatar-"+U.levelData.author;this.scene.textures.exists(t)?this.levelAuthorAvatar=new Phaser.GameObjects.Image(this.scene,U.gameWidth/2-80,125-U.gameHeight,t):this.levelAuthorAvatar=new Phaser.GameObjects.Image(this.scene,U.gameWidth/2-80,125-U.gameHeight,"texture_atlas_0","default_avatar"),this.levelAuthorAvatar.setScale(80/this.levelAuthorAvatar.width),this.add(this.levelAuthorAvatar)}onOutStar(){for(let t=0;t<5;t++)this.stars[t].setFrame("star_voting_off")}onOverStar(t){for(let e=0;e<5;e++)this.stars[e].setFrame(e<=t?"star_voting_on":"star_voting_off")}onDownAuthorLabel(){l.openExternalLink("https://clashdome.io/token-mining-game/"+U.levelData.author)}}class E extends Phaser.GameObjects.Container{constructor(t,e,i,n,r,s,a){super(t),this.y=50,this.account=e,this.isPlayer=n,this.score=i,this.isWinner=r,this.tie=s,this.gameDuration=a,this.accountLabel=new Phaser.GameObjects.Text(this.scene,0,75,e,{fontFamily:"Oswald-ExtraLight",fontSize:"30px",color:"#FFFFFF"}),this.accountLabel.setOrigin(.5),this.accountLabel.alpha=0,this.accountLabel.setScale(.5),this.add(this.accountLabel);const o="circle-avatar-"+this.account;this.scene.textures.exists(o)?this.avatar=new Phaser.GameObjects.Image(this.scene,0,0,o):this.avatar=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","default_avatar"),this.avatar.setScale(105/this.avatar.width),this.isPlayer||(this.avatar.scaleX=-105/this.avatar.width),this.add(this.avatar),this.isWinner?(this.glow=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","glow"),this.glow.visible=!1,this.addAt(this.glow,0)):this.glow=null,this.scoreLabel=new Phaser.GameObjects.Text(this.scene,0,120,l.formatNumber(this.score),{fontFamily:"Oswald-ExtraLight",fontSize:"36px",color:"#F9EA00"}),this.scoreLabel.setOrigin(.5),this.scoreLabel.alpha=0,this.scoreLabel.setScale(.5),this.add(this.scoreLabel),this.replayButton=new p(this.scene,0,170,"texture_atlas_0","btn_replay_off","btn_replay_on"),this.replayButton.onDown(this.onClickReplay,this),this.replayButton.visible=!1,this.add(this.replayButton),this.scene.sys.updateList.add(this)}preUpdate(){this.isPlayer?U.playerNick&&(this.accountLabel.text=U.playerNick):U.adversaryNick&&(this.accountLabel.text=U.adversaryNick)}onAvatarsLoaded(){this.avatar.destroy();const t="circle-avatar-"+this.account;this.scene.textures.exists(t)?this.avatar=new Phaser.GameObjects.Image(this.scene,0,0,t):this.avatar=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","default_avatar"),this.avatar.setScale(90/this.avatar.width),this.isPlayer||(this.avatar.scaleX=-90/this.avatar.width),this.add(this.avatar)}activate(){let t=this.isWinner?0:100;this.scene.tweens.add({targets:this.accountLabel,alpha:1,scaleX:1,scaleY:1,ease:Phaser.Math.Easing.Cubic.Out,duration:450,delay:t}),this.isPlayer&&(this.scoreLabel.text=l.formatNumber(this.score)),this.scene.tweens.add({targets:this.scoreLabel,alpha:1,scaleX:1,scaleY:1,ease:Phaser.Math.Easing.Cubic.Out,duration:450,delay:450+t})}onWinnerRevealed(){if(this.scene.tweens.add({targets:this,y:-90,ease:Phaser.Math.Easing.Cubic.Out,duration:450}),this.replayButton.visible=!0,this.replayButton.setScale(0),this.scene.tweens.add({targets:this.replayButton,scaleX:1,scaleY:1,ease:Phaser.Math.Easing.Cubic.Out,duration:350}),this.glow){this.glow.visible=!0,this.glow.alpha=0,this.glow.setScale(.25);const t=this.scene,e=this.glow;this.scene.tweens.add({targets:this.glow,alpha:1,scaleX:.75,scaleY:.75,ease:Phaser.Math.Easing.Cubic.Out,duration:550,onComplete:function(){t.tweens.add({targets:e,scaleX:.6,scaleY:.6,ease:Phaser.Math.Easing.Cubic.Out,duration:1e3,repeat:-1,yoyo:!0})},onCompleteScope:this})}else this.avatar.tint=11184810;if(this.accountLabel.setInteractive({cursor:"pointer"}),this.accountLabel.on("pointerdown",this.onDownAccountLabel,this),this.tie){this.scoreLabel.x=-50;const t=l.formatNumber(this.gameDuration),e=new Phaser.GameObjects.Text(this.scene,this.scoreLabel.width/2-50+10,this.scoreLabel.y+2,"("+t+" seconds)",{fontFamily:"Oswald-ExtraLight",fontSize:"20px",color:"#FF0000"});e.setOrigin(0,.5),e.setColor(this.isWinner?"#00FF00":"#FF0000"),this.add(e)}}onClickReplay(){let t;if(U.private)if(this.isPlayer){let e=!0===U.isSecondPlayer?2:1;t=U.urls.clashdome+"/"+U.gameName+"/play?replay=true&duel=true&player="+e.toString()+"&id="+U.duelID}else{let e=!0===U.isSecondPlayer?1:2;t=U.urls.clashdome+"/"+U.gameName+"/play?replay=true&duel=true&player="+e.toString()+"&id="+U.duelID}else t=this.isPlayer?U.urls.clashdome+"/"+U.gameName+"/play?replay=true&duel=true&player=2&id="+U.duelID:U.urls.clashdome+"/"+U.gameName+"/play?replay=true&duel=true&player=1&id="+U.duelID;l.openExternalLink(t)}onDownAccountLabel(){l.openExternalLink(U.urls.clashdome+"/profile/"+this.account)}}class A extends Phaser.GameObjects.Container{constructor(t,e,i,n){super(U.currentScene),A.currentInstance=this,this.playerScore=t,this.tPlayer=e,this.adversaryScore=i,this.tAdversary=n,this.tie=!1,this.playerScore===this.adversaryScore?(this.tie=!0,this.tPlayer<this.tAdversary?this.isPlayerWinner=!0:this.isPlayerWinner=!1):this.playerScore>this.adversaryScore?this.isPlayerWinner=!0:this.isPlayerWinner=!1;const r=new Phaser.GameObjects.Graphics(this.scene);r.fillStyle(597301,.85),r.fillRect(0,0,U.gameWidth,U.gameHeight),this.add(r),this.scaledItemsContainer=new Phaser.GameObjects.Container(this.scene),this.scaledItemsContainer.x=.5*U.gameWidth,this.scaledItemsContainer.y=.5*U.gameHeight,this.scaledItemsContainer.scaleX=U.scaleX,this.scaledItemsContainer.scaleY=U.scaleY,this.add(this.scaledItemsContainer),U.gameWidth>U.gameHeight&&(this.scaledItemsContainer.scaleX*=.74,this.scaledItemsContainer.scaleY*=.74);const s=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","box_bg");s.setScale(1.2),this.scaledItemsContainer.add(s),m.create(this.scene,"circle-avatar-"+U.playerAccount,"avatar-"+U.playerAccount),m.create(this.scene,"circle-avatar-"+U.adversaryAccount,"avatar-"+U.adversaryAccount),this.winLoseImage=new Phaser.GameObjects.Image(this.scene,0,-240,"texture_atlas_0",this.isPlayerWinner?"you_win":"you_lose"),this.winLoseImage.setScale(1.1).setAlpha(0),this.scaledItemsContainer.add(this.winLoseImage),this.playerInfoContainer=new E(this.scene,U.playerAccount,this.playerScore,!0,this.isPlayerWinner,this.tie,this.tPlayer),this.playerInfoContainer.x=-155,this.scaledItemsContainer.add(this.playerInfoContainer),this.adversaryInfoContainer=new E(this.scene,U.adversaryAccount,this.adversaryScore,!1,!this.isPlayerWinner,this.tie,this.tAdversary),this.adversaryInfoContainer.x=155,this.scaledItemsContainer.add(this.adversaryInfoContainer),this.vsImage=new Phaser.GameObjects.Image(this.scene,0,40,"texture_atlas_0","vs"),this.vsImage.alpha=0,this.vsImage.setScale(.5),this.scaledItemsContainer.add(this.vsImage);const a=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","btn_regular"),o=new Phaser.GameObjects.Text(this.scene,0,0,h.GAMEOVER_PLAY_AGAIN,{fontFamily:"Oswald-Medium",fontSize:"28px",color:"#361601"});o.setOrigin(.5),f.track(o),this.playAgainButton=new g(this.scene,a,o,this.onClickPlayAgain,this),this.playAgainButton.x=0,this.playAgainButton.y=250,this.playAgainButton.visible=!1,this.scaledItemsContainer.add(this.playAgainButton),this.isPlayerWinner&&0!==U.fee&&!U.private?(this.claimInfoLabel=new Phaser.GameObjects.Text(this.scene,0,this.playAgainButton.y+50,h.GAMEOVER_LAYER_CLOSED_DUEL_CLAIM_WAX,{fontFamily:"Oswald-ExtraLight",fontSize:"20px",color:"#00ddfe"}),this.claimInfoLabel.setOrigin(.5),this.claimInfoLabel.visible=!1,this.scaledItemsContainer.add(this.claimInfoLabel),f.track(this.claimInfoLabel)):this.claimInfoLabel=null,this.moreGamesMenuBtn=new p(this.scene,65*U.scaleX,65*U.scaleY,"texture_atlas_0","btn_menu_off","btn_menu_on"),this.moreGamesMenuBtn.visible=!1,this.moreGamesMenuBtn.setScale(U.scaleX,U.scaleY),this.moreGamesMenuBtn.onDown(this.openMenu,this),this.add(this.moreGamesMenuBtn),U.gameWidth>U.gameHeight&&(this.moreGamesMenuBtn.scaleX*=.7,this.moreGamesMenuBtn.scaleY*=.7);const l=this;this.scene.tweens.add({targets:this.vsImage,alpha:1,scaleX:1.3,scaleY:1.3,ease:Phaser.Math.Easing.Cubic.In,duration:250,delay:500,onComplete:function(){l.scene.tweens.add({targets:l.vsImage,scaleX:1,scaleY:1,ease:Phaser.Math.Easing.Cubic.Out,duration:350,onComplete:function(){A.currentInstance.revealWinner()},onCompleteScope:l})},onCompleteScope:this}),this.playerInfoContainer.activate(),this.adversaryInfoContainer.activate(),"pac-man"===U.gameName&&(this.levelRatingCapsule=new T(this.scene),this.add(this.levelRatingCapsule))}onPlayersAvatarsLoaded(){this.playerInfoContainer.onAvatarsLoaded(),this.adversaryInfoContainer.onAvatarsLoaded(),this.levelRatingCapsule&&this.levelRatingCapsule.onLevelAuthorAvatarLoaded()}revealWinner(){if(this.isPlayerWinner){const t=new Phaser.GameObjects.Text(this.scene,0,130,h.GAMEOVER_LAYER_CLOSED_DUEL_YOU_EARNED,{fontFamily:"Oswald-ExtraLight",fontSize:"30px",color:"#FFFFFF"});if(t.setOrigin(.5),this.scaledItemsContainer.add(t),f.track(t),0===U.fee){const e=new Phaser.GameObjects.Image(this.scene,0,t.y+40,"texture_atlas_0","icon_credits");e.setScale(1.25),this.scaledItemsContainer.add(e);const i=parseFloat(U.gameFees.reward.replace("CREDITS","")),n=new Phaser.GameObjects.Text(this.scene,-30,e.y,i.toString(),{fontFamily:"Oswald-Medium",fontSize:"32px",color:"#F9EA00"});if(n.setOrigin(1,.5),this.scaledItemsContainer.add(n),U.playerMultiplier){const t=new Phaser.GameObjects.Text(this.scene,30,e.y,"x"+U.playerMultiplier,{fontFamily:"Oswald-Medium",fontSize:"32px",color:"#00ddfe"});t.setOrigin(0,.5),this.scaledItemsContainer.add(t)}}else{let e;e=-1===U.feeStr.indexOf("CDJIGO")?(1.9*U.fee).toString()+" WAX":(1.4*U.fee).toString()+" CDJIGO";const i=new Phaser.GameObjects.Text(this.scene,0,t.y+40,e,{fontFamily:"Oswald-Medium",fontSize:"32px",color:"#F9EA00"});i.setOrigin(.5),this.scaledItemsContainer.add(i)}}this.scene.tweens.add({targets:this.winLoseImage,alpha:{from:0,to:1},ease:Phaser.Math.Easing.Sine.InOut,duration:500}),U.private||(this.playAgainButton.visible=!0,this.playAgainButton.alpha=0,this.playAgainButton.setScale(0),this.scene.tweens.add({targets:this.playAgainButton,alpha:1,scaleX:1,scaleY:1,ease:Phaser.Math.Easing.Sine.Out,duration:350})),this.moreGamesMenuBtn.visible=!0,this.moreGamesMenuBtn.alpha=0,this.moreGamesMenuBtn.setScale(0),this.scene.tweens.add({targets:[this.moreGamesMenuBtn],alpha:1,scaleX:U.scaleX,scaleY:U.scaleY,ease:Phaser.Math.Easing.Cubic.Out,duration:250}),this.claimInfoLabel&&(this.claimInfoLabel.visible=!0,this.claimInfoLabel.alpha=0,this.scene.tweens.add({targets:[this.claimInfoLabel],alpha:1,scaleX:1,scaleY:U.scaleY,ease:Phaser.Math.Easing.Cubic.Out,duration:250})),this.scene.tweens.add({targets:this.vsImage,y:-90,ease:Phaser.Math.Easing.Cubic.Out,duration:450}),this.playerInfoContainer.onWinnerRevealed(),this.adversaryInfoContainer.onWinnerRevealed()}onClickPlayAgain(){U.onRestart()}openMenu(){const t=new _(this.scene);this.add(t)}}class S extends Phaser.GameObjects.Container{constructor(){super(U.currentScene);const t=new Phaser.GameObjects.Graphics(this.scene);t.fillStyle(597301,.85),t.fillRect(0,0,U.gameWidth,U.gameHeight),this.add(t),this.scaledItemsContainer=new Phaser.GameObjects.Container(this.scene),this.scaledItemsContainer.x=.5*U.gameWidth,this.scaledItemsContainer.y=.5*U.gameHeight,this.scaledItemsContainer.scaleX=U.scaleX,this.scaledItemsContainer.scaleY=U.scaleY,this.add(this.scaledItemsContainer),U.gameWidth>U.gameHeight&&(this.scaledItemsContainer.scaleX*=.74,this.scaledItemsContainer.scaleY*=.74);const e=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","box_bg");this.scaledItemsContainer.add(e),e.setScale(1.2);const i=new Phaser.GameObjects.Image(this.scene,0,-330,"texture_atlas_0","logo_cd");i.alpha=0,this.scaledItemsContainer.add(i),this.scene.add.tween({targets:i,alpha:1,duration:400,ease:Phaser.Math.Easing.Cubic.Out});const n=new Phaser.GameObjects.Text(this.scene,0,-150,U.private?"WAITING FOR RIVAL'S SCORE":h.GAMEOVER_LAYER_OPEN_DUEL_GAMEOVER,{fontFamily:"Oswald-Medium",fontSize:U.private?"50px":"70px",color:"#FFFFFF"});n.setOrigin(.5),this.scaledItemsContainer.add(n),f.track(n);const r=new Phaser.GameObjects.Text(this.scene,0,-65,h.GAMEOVER_LAYER_OPEN_DUEL_SCORE_SUBMITTED,{fontFamily:"Oswald-ExtraLight",fontSize:"30px",color:"#00ddfe"});r.setOrigin(.5),r.tint=56830,this.scaledItemsContainer.add(r),f.track(r);const s=new Phaser.GameObjects.Graphics(this.scene);s.fillStyle(1004659),s.fillRoundedRect(-140,-37.5,280,75,15),s.y=5,this.scaledItemsContainer.add(s);const a=new Phaser.GameObjects.Text(this.scene,0,s.y,l.formatNumber(U.score),{fontFamily:"Oswald-Medium",fontSize:"44px",color:"#fbde00"});if(a.setOrigin(.5),this.scaledItemsContainer.add(a),U.private){const t=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","btn_buy"),e=new Phaser.GameObjects.Text(this.scene,0,0,"OK",{fontFamily:"Oswald-Medium",fontSize:"34px",color:"#361601"});e.setOrigin(.5),e.tint=3544577,f.track(e);const i=new g(this.scene,t,e,this.onClickOK,this);i.x=0,i.y=180,i.setScale(1.25),this.scaledItemsContainer.add(i)}else{const t=new Phaser.GameObjects.Text(this.scene,0,95,h.GAMEOVER_LAYER_OPEN_DUEL_WAITING,{fontFamily:"Oswald-ExtraLight",fontSize:"26px",color:"#00ddfe",align:"center"});t.setOrigin(.5),this.scaledItemsContainer.add(t),f.track(t);const e=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","btn_regular"),i=new Phaser.GameObjects.Text(this.scene,0,0,h.GAMEOVER_PLAY_AGAIN,{fontFamily:"Oswald-Medium",fontSize:"28px",color:"#361601"});i.setOrigin(.5),i.tint=3544577,f.track(i);const n=new g(this.scene,e,i,this.onClickPlayAgain,this);n.x=0,n.y=230,this.scaledItemsContainer.add(n)}const o=new p(this.scene,65*U.scaleX,65*U.scaleY,"texture_atlas_0","btn_menu_off","btn_menu_on");o.alpha=0,o.onDown(this.openMenu,this),this.add(o),U.gameWidth>U.gameHeight&&(o.scaleX*=.7,o.scaleY*=.7),"pac-man"===U.gameName&&(this.levelRatingCapsule=new T(this.scene),this.add(this.levelRatingCapsule)),this.scene.tweens.add({targets:[o],alpha:1,scaleX:1,scaleY:U.scaleY,ease:Phaser.Math.Easing.Cubic.Out,duration:250})}onPlayersAvatarsLoaded(){this.levelRatingCapsule&&this.levelRatingCapsule.onLevelAuthorAvatarLoaded()}onClickPlayAgain(){U.onRestart()}onClickOK(){l.openExternalLink(U.urls.clashdome+"/token-mining-game/"+U.playerAccount,!0)}openMenu(){const t=new _(this.scene);this.add(t)}}class C extends Phaser.GameObjects.Container{constructor(){super(U.currentScene);const t=new Phaser.GameObjects.Graphics(this.scene);t.fillStyle(597301,.85),t.fillRect(0,0,U.gameWidth,U.gameHeight),this.add(t),this.scaledItemsContainer=new Phaser.GameObjects.Container(this.scene),this.scaledItemsContainer.x=.5*U.gameWidth,this.scaledItemsContainer.y=.4*U.gameHeight,this.scaledItemsContainer.scaleX=U.scaleX,this.scaledItemsContainer.scaleY=U.scaleY,this.add(this.scaledItemsContainer),U.gameWidth>U.gameHeight&&(this.scaledItemsContainer.scaleX*=.74,this.scaledItemsContainer.scaleY*=.74);const e=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","box_small");this.scaledItemsContainer.add(e);const i=new Phaser.GameObjects.Image(this.scene,0,-175,"texture_atlas_0","logo_cd");let n;this.scaledItemsContainer.add(i),n=U.private?1===U.numActions?"CHALLENGE ACCEPTED":"CHALLENGE RESTORED":"SESSION RESTORED";const r=new Phaser.GameObjects.Text(this.scene,0,-40,n,{fontFamily:"Oswald-Medium",fontSize:"36px",color:"#FFFFFF"});let s;r.setOrigin(.5),this.scaledItemsContainer.add(r),f.track(r);let a=new Date(Date.parse(U.date)).toLocaleString();s=-1===U.duelID?h.RESTORED_SESSION_LAYER_SEED_MSG_1:h.RESTORED_SESSION_LAYER_SEED_MSG_2;const o=new Phaser.GameObjects.Text(this.scene,0,60,s,{fontFamily:"Oswald-ExtraLight",fontSize:"28px",color:"#00ddfe",align:"center"});if(o.setOrigin(.5),this.scaledItemsContainer.add(o),f.track(o,{date:a,duelId:U.duelID}),U.private){m.create(this.scene,"circle-avatar-"+U.adversaryAccount,"avatar-"+U.adversaryAccount);const t="circle-avatar-"+U.adversaryAccount;this.scene.textures.exists(t)?this.adversaryAvatar=new Phaser.GameObjects.Image(this.scene,0,120,t):this.adversaryAvatar=new Phaser.GameObjects.Image(this.scene,0,120,"texture_atlas_0","default_avatar"),this.adversaryAvatar.setScale(45/this.adversaryAvatar.width),this.scaledItemsContainer.add(this.adversaryAvatar);U.adversaryNick?U.adversaryNick:U.adversaryAccount;this.adversaryLabel=new Phaser.GameObjects.Text(this.scene,30,120,U.adversaryNick,{fontFamily:"Oswald-Medium",fontSize:"22px",color:"#FFFFFF"}),this.adversaryLabel.setOrigin(0,.5),this.scaledItemsContainer.add(this.adversaryLabel);const e=(7.5+this.adversaryLabel.width)/2;this.adversaryAvatar.x=-e,this.adversaryLabel.x=30-e}const l=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","btn_regular"),u=new Phaser.GameObjects.Text(this.scene,0,0,h.RESTORED_SESSION_LAYER_CONTINUE,{fontFamily:"Oswald-Medium",fontSize:"36px",color:"#361601"});u.setOrigin(.5),f.track(u),this.continueButton=new g(this.scene,l,u,this.onClickContinueBtn,this),this.continueButton.y=230,this.scaledItemsContainer.add(this.continueButton),this.loadIcon=new Phaser.GameObjects.Image(this.scene,0,this.continueButton.y,"texture_atlas_0","load_icon"),this.loadIcon.visible=!1,this.scaledItemsContainer.add(this.loadIcon),this.scene.tweens.add({targets:this.loadIcon,angle:360,ease:Phaser.Math.Easing.Linear,duration:2e3,repeat:-1})}onAdversaryAvatarLoaded(){m.create(this.scene,"circle-avatar-"+U.adversaryAccount,"avatar-"+U.adversaryAccount),this.adversaryAvatar&&this.adversaryAvatar.destroy();const t="circle-avatar-"+U.adversaryAccount;if(this.scene.textures.exists(t)?this.adversaryAvatar=new Phaser.GameObjects.Image(this.scene,0,120,t):this.adversaryAvatar=new Phaser.GameObjects.Image(this.scene,0,120,"texture_atlas_0","default_avatar"),this.adversaryAvatar.setScale(45/this.adversaryAvatar.width),this.scaledItemsContainer.add(this.adversaryAvatar),this.adversaryLabel){U.adversaryNick&&(this.adversaryLabel.text=U.adversaryNick);const t=(7.5+this.adversaryLabel.width)/2;this.adversaryAvatar.x=-t,this.adversaryLabel.x=30-t}}onClickContinueBtn(){this.continueButton.visible=!1,this.loadIcon.visible=!0,U.continueRestoredGame()}}class O extends Phaser.GameObjects.Container{constructor(t){super(t);const e=new Phaser.GameObjects.Graphics(this.scene);e.fillStyle(597301,.85),e.fillRect(0,0,U.gameWidth,U.gameHeight),this.add(e),this.scaledItemsContainer=new Phaser.GameObjects.Container(this.scene),this.scaledItemsContainer.x=.5*U.gameWidth,this.scaledItemsContainer.y=.5*U.gameHeight,this.scaledItemsContainer.scaleX=U.scaleX,this.scaledItemsContainer.scaleY=U.scaleY,this.add(this.scaledItemsContainer),U.gameWidth>U.gameHeight&&(this.scaledItemsContainer.scaleX*=.74,this.scaledItemsContainer.scaleY*=.74);const i=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","box_bg");this.scaledItemsContainer.add(i),i.setScale(1.2);const n=new Phaser.GameObjects.Text(this.scene,0,-150,h.WAITING_LAYER_GAME_OVER,{fontFamily:"Oswald-Medium",fontSize:"70px",color:"#FFFFFF"});n.setOrigin(.5),this.scaledItemsContainer.add(n),f.track(n);const r=new Phaser.GameObjects.Image(this.scene,0,155,"texture_atlas_0","load_icon");this.scaledItemsContainer.add(r),this.scene.tweens.add({targets:r,angle:360,ease:Phaser.Math.Easing.Linear,duration:2e3,repeat:-1});const s=new Phaser.GameObjects.Text(this.scene,0,-5,h.WAITING_LAYER_VALIDATING,{fontFamily:"Oswald-ExtraLight",fontSize:"40px",color:"#00ddfe"});s.setOrigin(.5),this.scaledItemsContainer.add(s),f.track(s),U.hasBoosterBeenDiscarded||(this.alpha=0,this.scene.tweens.add({targets:this,alpha:1,ease:Phaser.Math.Easing.Cubic.Out,duration:500}))}}class P extends Phaser.GameObjects.Container{constructor(){super(U.currentScene);const t=new Phaser.GameObjects.Graphics(this.scene);t.fillStyle(597301,.85),t.fillRect(0,0,U.gameWidth,U.gameHeight),this.add(t),this.scaledItemsContainer=new Phaser.GameObjects.Container(this.scene),this.scaledItemsContainer.x=.5*U.gameWidth,this.scaledItemsContainer.y=.5*U.gameHeight,this.scaledItemsContainer.scaleX=U.scaleX,this.scaledItemsContainer.scaleY=U.scaleY,this.add(this.scaledItemsContainer),U.gameWidth>U.gameHeight&&(this.scaledItemsContainer.scaleX*=.74,this.scaledItemsContainer.scaleY*=.74);const e=new Phaser.GameObjects.Image(this.scene,0,-110,"texture_atlas_0","box_small");this.scaledItemsContainer.add(e);const i=new Phaser.GameObjects.Image(this.scene,0,-285,"texture_atlas_0","logo_cd");this.scaledItemsContainer.add(i);const n=new Phaser.GameObjects.Text(this.scene,0,-150,h.GAMEOVER_LAYER_REPLAY_GAME_ENDED,{fontFamily:"Oswald-Medium",fontSize:"40px",color:"#FFFFFF"});if(n.setOrigin(.5),this.scaledItemsContainer.add(n),f.track(n),U.gameOverType!==a.FINISH){const t=new Phaser.GameObjects.Text(this.scene,0,-100,U.gameOverType===a.SKIP?h.GAMEOVER_LAYER_REPLAY_PLAYER_SKIPPED:h.GAMEOVER_LAYER_REPLAY_PLAYER_QUIT,{fontFamily:"Oswald-ExtraLight",fontSize:"30px",color:"#0BA1FF"});t.setOrigin(.5),this.scaledItemsContainer.add(t),f.track(t)}const r=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","btn_regular"),s=new Phaser.GameObjects.Text(this.scene,0,0,h.GAMEOVER_LAYER_REPLAY_RESTART,{fontFamily:"Oswald-Medium",fontSize:"32px",color:"#361601"});s.setOrigin(.5),f.track(s);const o=new g(this.scene,r,s,U.restartReplay,this);o.x=0,o.y=-30,o.alpha=0,this.scaledItemsContainer.add(o),this.moreGamesMenuBtn=new p(this.scene,65*U.scaleX,65*U.scaleY,"texture_atlas_0","btn_menu_off","btn_menu_on"),this.moreGamesMenuBtn.onDown(this.openMenu,this),this.moreGamesMenuBtn.setScale(U.scaleX,U.scaleY),this.add(this.moreGamesMenuBtn),U.gameWidth>U.gameHeight&&(this.moreGamesMenuBtn.scaleX*=.7,this.moreGamesMenuBtn.scaleY*=.7),this.alpha=0,this.scene.tweens.add({targets:this,alpha:1,ease:Phaser.Math.Easing.Cubic.Out,duration:500,onComplete:()=>{this.scene.tweens.add({targets:o,alpha:1,ease:Phaser.Math.Easing.Cubic.Out,duration:750})},onCompleteScope:this})}openMenu(){const t=new _(this.scene);this.add(t)}}class R extends Phaser.GameObjects.Container{constructor(){super(U.currentScene);const t=new Phaser.GameObjects.Graphics(this.scene);t.fillStyle(597301,.5),t.fillRect(0,0,U.gameWidth,U.gameHeight),this.add(t),this.skipMenu=new Phaser.GameObjects.Container(this.scene),this.add(this.skipMenu),this.skipMenu.x=U.gameWidth,this.skipMenu.y=20*U.scaleY,this.skipMenu.scaleX=U.scaleX,this.skipMenu.scaleY=U.scaleY;const e=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","tab_skip");e.setOrigin(0),this.skipMenu.add(e);const i=new Phaser.GameObjects.Text(this.scene,25,11,h.SKIP_DUEL_LAYER_ALREADY_BEAT,{fontFamily:"Oswald-Medium",fontSize:"20px",color:"#FFFFFF",align:"center"});this.skipMenu.add(i),f.track(i);const n=new p(this.scene,5,15,"texture_atlas_0","btn_skip_off","btn_skip_on");n.onUp(this.onUpClose,this),this.skipMenu.add(n);const r=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","btn_skip"),s=new Phaser.GameObjects.Text(this.scene,0,0,h.SKIP_DUEL_LAYER_SKIP,{fontFamily:"Oswald-Medium",fontSize:"24px",color:"#361601",align:"center"});s.setOrigin(.5),f.track(s);const a=new g(this.scene,r,s,this.onSkipDown,this);a.x=255,a.y=40,this.skipMenu.add(a),this.scene.tweens.add({targets:this.skipMenu,x:U.gameWidth-302*U.scaleX,ease:Phaser.Math.Easing.Cubic.Out,duration:500}),this.scene.sys.updateList.add(this)}preUpdate(){U.isSkipPossible?this.alpha=1:this.alpha=.65}onUpClose(){U.isSkipPossible&&U.removeSkipDuelLayer()}onSkipDown(){U.isSkipPossible&&U.onGameOver(null,!1,!0)}}class M extends Phaser.GameObjects.Container{constructor(){super(U.currentScene),this.f=0;const t=new Phaser.GameObjects.Graphics(this.scene);t.fillStyle(597301,.85),t.fillRect(0,0,U.gameWidth,U.gameHeight),this.add(t),this.scaledItemsContainer=new Phaser.GameObjects.Container(this.scene),this.scaledItemsContainer.x=.5*U.gameWidth,this.scaledItemsContainer.y=.5*U.gameHeight,this.scaledItemsContainer.scaleX=U.scaleX,this.scaledItemsContainer.scaleY=U.scaleY,this.add(this.scaledItemsContainer),U.gameWidth>U.gameHeight&&(this.scaledItemsContainer.scaleX*=.65,this.scaledItemsContainer.scaleY*=.65);const e=new Phaser.GameObjects.Image(this.scene,0,35,"texture_atlas_0","box_big");e.setScale(1.213),this.scaledItemsContainer.add(e);const i=new Phaser.GameObjects.Image(this.scene,0,-375,"texture_atlas_0","logo_cd");this.scaledItemsContainer.add(i);const n=new Phaser.GameObjects.Text(this.scene,0,-210,h.BOOSTER_LAYER_YOUR_CURRENT_SCORE,{fontFamily:"Oswald-ExtraLight",fontSize:"24px",color:"#00ddfe"});n.setOrigin(.5),this.scaledItemsContainer.add(n),f.track(n);const s=new Phaser.GameObjects.Graphics(this.scene);s.fillStyle(1004659),s.fillRoundedRect(-140,-37.5,280,75,15),s.y=-145,this.scaledItemsContainer.add(s);const a=new Phaser.GameObjects.Text(this.scene,0,s.y,l.formatNumber(U.score),{fontFamily:"Oswald-Medium",fontSize:"44px",color:"#fbde00"});a.setOrigin(.5),this.scaledItemsContainer.add(a);const o=parseInt(l.GAME_IDS[U.gameName]),u=new Phaser.GameObjects.Image(this.scene,0,100,"texture_atlas_0","banner_booster_"+o);this.scaledItemsContainer.add(u);const c=new Phaser.GameObjects.Text(this.scene,0,218,l.BOOSTER_DESCRIPTION[U.gameName],{fontFamily:"Oswald-ExtraLight",fontSize:"28px",color:"#00ddfe"});c.setOrigin(.5),this.scaledItemsContainer.add(c);const d=new Phaser.GameObjects.Image(this.scene,175,50,"texture_atlas_0","logo booster");this.scaledItemsContainer.add(d),this.scene.tweens.add({targets:d,scaleX:1.05,scaleY:1.05,ease:Phaser.Math.Easing.Cubic.Out,duration:1e3,yoyo:!0,repeat:-1});let p=l.getBoosterFee();p=Math.floor(100*p)/100;const m=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","btn_buy"),y=new Phaser.GameObjects.Text(this.scene,-15,0,p.toString(),{fontFamily:"Oswald-Medium",fontSize:"22px",color:"#361601"});y.setOrigin(.5),this.buyBoosterButton=new g(this.scene,m,y,this.onClickBuyBooster,this),this.buyBoosterButton.x=d.x,this.buyBoosterButton.y=140,this.scaledItemsContainer.add(this.buyBoosterButton);let v=0===U.fee?r.JIGO:r.LUDIO;this.notEnoughTokenLabel=new Phaser.GameObjects.Text(this.scene,this.buyBoosterButton.x,this.buyBoosterButton.y,"Your "+v+" balance\n is too low.",{fontFamily:"Oswald-Medium",fontSize:"24px",color:"#FFFFFF",align:"center"}),this.notEnoughTokenLabel.setOrigin(.5),this.notEnoughTokenLabel.visible=!1,this.scaledItemsContainer.add(this.notEnoughTokenLabel),(0===U.fee?U.jigoBalance:U.ludioBalance)?this.checkCDTokenBalance():(this.buyBoosterButton.disable(),this.buyBoosterButton.alpha=.35);const _=new Phaser.GameObjects.Image(this.scene,25,0,"texture_atlas_0",0===U.fee?"jigo_icon":"ludioIcon");this.buyBoosterButton.add(_),this.loadIcon=new Phaser.GameObjects.Image(this.scene,this.buyBoosterButton.x,this.buyBoosterButton.y,"texture_atlas_0","load_icon"),this.loadIcon.visible=!1,this.scaledItemsContainer.add(this.loadIcon),this.scene.tweens.add({targets:this.loadIcon,angle:360,ease:Phaser.Math.Easing.Linear,duration:2e3,repeat:-1});const x=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","btn_regular"),w=new Phaser.GameObjects.Text(this.scene,0,0,h.BOOSTER_LAYER_SKIP,{fontFamily:"Oswald-Medium",fontSize:"32px",color:"#361601"});w.setOrigin(.5),f.track(w);const b=new g(this.scene,x,w,this.onClickSkip,this);b.x=0,b.y=320,this.scaledItemsContainer.add(b),this.alpha=0,this.scene.tweens.add({targets:this,alpha:1,ease:Phaser.Math.Easing.Cubic.Out,duration:500}),this.scene.sys.updateList.add(this)}preUpdate(){this.loadIcon.visible||(this.f++,90===this.f&&(this.f=0,(async()=>{0!==U.fee?U.ludioBalance=await l.getCDTokenBalance(r.LUDIO):U.jigoBalance=await l.getCDTokenBalance(r.JIGO)})(),this.checkCDTokenBalance()))}checkCDTokenBalance(){let t=l.getBoosterFee();t=Math.floor(100*t)/100,(0===U.fee?U.jigoBalance:U.ludioBalance)>=t?(this.buyBoosterButton.enable(),this.buyBoosterButton.alpha=1,this.buyBoosterButton.visible=!0,this.notEnoughTokenLabel.visible=!1):(this.buyBoosterButton.visible=!1,this.notEnoughTokenLabel.visible=!0)}onClickSkip(){U.errorLayer||U.inputsDisabled||U.discardBooster()}onClickBuyBooster(){U.inputsDisabled||(this.buyBoosterButton.visible=!1,this.loadIcon.visible=!0,U.buyBooster())}}class L extends Phaser.GameObjects.Container{constructor(){super(U.currentScene);const t=new Phaser.GameObjects.Graphics(this.scene);t.fillStyle(461639),t.fillRect(0,0,U.gameWidth,U.gameHeight),this.add(t),this.scaledItemsContainer=new Phaser.GameObjects.Container(this.scene),this.scaledItemsContainer.x=.5*U.gameWidth,this.scaledItemsContainer.y=.5*U.gameHeight,this.scaledItemsContainer.scaleX=U.scaleX,this.scaledItemsContainer.scaleY=U.scaleY,this.add(this.scaledItemsContainer);const e=new Phaser.GameObjects.Image(this.scene,0,0,"arcade_base");this.scaledItemsContainer.add(e),e.setScale(.9),e.y=120;const i=new Phaser.GameObjects.Image(this.scene,0,0,"arcade_base");this.scaledItemsContainer.add(i),i.setScale(e.scale),i.setFlipX(!0),i.y=e.y;const n=new Phaser.GameObjects.Image(this.scene,0,0,"arcade_btns");this.scaledItemsContainer.add(n),n.setScale(e.scale),n.setPosition(0,160);const r=new Phaser.GameObjects.Image(this.scene,0,-75,"game_logo");r.setScale(e.scale),this.scaledItemsContainer.add(r),this.progressBarBg=new Phaser.GameObjects.Graphics(this.scene,{fillStyle:{color:16777215,alpha:.1}}),this.progressBarBg.fillRect(0,0,10,275).setAngle(-90).setPosition(-137.5,20),this.scaledItemsContainer.add(this.progressBarBg),this.progressBar=new Phaser.GameObjects.Graphics(this.scene),this.progressBar.fillGradientStyle(16711832,16711832,56319,56319),this.progressBar.fillRect(0,0,10,275),this.progressBar.angle=this.progressBarBg.angle,this.progressBar.x=this.progressBarBg.x,this.progressBar.y=this.progressBarBg.y,this.progressBar.scaleY=0,this.scaledItemsContainer.add(this.progressBar),U.replayMode&&(this.replay=new Phaser.GameObjects.Text(this.scene,this.progressBar.x,this.progressBar.y+15,h.PRELOADER_LAYER_REPLAY,{fontFamily:"Arial",fontSize:"25px",color:"#2BB0FF"}),this.scaledItemsContainer.add(this.replay),f.track(this.replay))}updateProgressbar(t){this.progressBar.scaleY=t,t>=1&&!this.label&&(this.progressBarBg.setVisible(!1),this.progressBar.setVisible(!1),this.label=new Phaser.GameObjects.Text(this.scene,this.progressBar.x+137.5,this.progressBar.y-5,h.PRELOAD_LAYER_COMMUNICATING,{fontFamily:"Arial",fontSize:"25px",color:"#2BB0FF"}),this.label.setOrigin(.5),this.scaledItemsContainer.add(this.label),f.track(this.label),this.scene.tweens.add({targets:this.label,alpha:.25,ease:Phaser.Math.Easing.Cubic.Out,duration:350,repeat:-1,yoyo:!0}))}onOrientationChange(){this.scaledItemsContainer.scaleX=U.scaleX,this.scaledItemsContainer.scaleY=U.scaleY}}class I extends Phaser.GameObjects.Container{constructor(t){super(U.currentScene);const e=new Phaser.GameObjects.Graphics(this.scene);e.fillStyle(597301,.5),e.fillRect(0,0,U.gameWidth,U.gameHeight),this.add(e),this.highScoreContainer=new Phaser.GameObjects.Container(this.scene),this.add(this.highScoreContainer),this.highScoreContainer.x=0,this.highScoreContainer.y=20*U.scaleY,this.highScoreContainer.scaleX=U.scaleX,this.highScoreContainer.scaleY=U.scaleY;const i=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","tab_skip");let n;i.setOrigin(0),i.scaleX=-1,this.highScoreContainer.add(i),n=t?h.WEEKLY_HIGHSCORE:h.ALL_TIME_HIGHSCORE;const r=new Phaser.GameObjects.Text(this.scene,-275,10,n,{fontFamily:"Oswald-Medium",fontSize:"24px",color:"#FFFFFF",align:"center"});this.highScoreContainer.add(r),f.track(r),this.scoreLabel=new Phaser.GameObjects.Text(this.scene,r.x+r.width/2,40,l.formatNumber(U.score),{fontFamily:"Oswald-Medium",fontSize:"24px",color:"#fff448",align:"center"}),this.scoreLabel.setOrigin(.5,0),this.highScoreContainer.add(this.scoreLabel),this.scene.tweens.add({targets:this.highScoreContainer,x:302*U.scaleX,ease:Phaser.Math.Easing.Cubic.Out,duration:500});const s=this;this.scene.time.delayedCall(3500,(function(){s.scene.tweens.add({targets:s.highScoreContainer,x:0,ease:Phaser.Math.Easing.Cubic.Out,duration:500,onComplete:function(){U.highScoreLayer=null,s.destroy()},onCompleteScope:s})}),[],this),this.scene.sys.updateList.add(this)}preUpdate(){this.scoreLabel.text=l.formatNumber(U.score)}}class k extends Phaser.GameObjects.Container{constructor(t){super(U.currentScene),this.scaleX=U.scaleX,this.scaleY=U.scaleY;let e="up"===t.position?0:U.gameHeight-k.BAR_HEIGHT;const i=t.backgroundColor,n=t.gradient,r=t.fontColor;if(this.y=e*U.scaleY,"none"===n){const t=new Phaser.GameObjects.Graphics(this.scene);t.fillStyle(i),t.fillRect(0,0,U.gameWidth,k.BAR_HEIGHT),this.add(t)}else if("vertical"===n){const e=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","white-gradient");e.scaleX=U.gameWidth/50,"up"===t.position?(e.setOrigin(0,1),e.scaleY=-k.BAR_HEIGHT/50):(e.setOrigin(0),e.scaleY=k.BAR_HEIGHT/50),e.tint=i,this.add(e)}const s=new Phaser.GameObjects.Text(this.scene,130*U.scaleX,0,U.replayAccount,{fontFamily:"Oswald-Medium",fontSize:"30px",color:r,align:"center"});s.setInteractive({cursor:"pointer"}),s.on("pointerdown",this.onDownAccountLabel,this),this.add(s);const a=new Phaser.GameObjects.Text(this.scene,300*U.scaleX,0,h.REPLAY_INFO_LAYER_SCORE,{fontFamily:"Oswald-Medium",fontSize:"30px",color:r,align:"center"});this.add(a),f.track(a,{score:l.formatNumber(U.replayScore)});const o=l.formatTime(Math.floor(U.replayDuration));let u;u=U.replayDuration>3600?o.h+"h "+o.m+"m "+o.s+"s":U.replayDuration>60?o.m+"m "+o.s+"s":o.s+"s";const c=new Phaser.GameObjects.Text(this.scene,510*U.scaleX,0,h.REPLAY_INFO_LAYER_DURATION,{fontFamily:"Oswald-Medium",fontSize:"30px",color:r,align:"center"});this.add(c),f.track(c,{duration:u})}onDownAccountLabel(){window.open(U.urls.clashdome+"/profile/"+U.replayAccount)}}k.BAR_HEIGHT=42;var D=i(72);class F{constructor(){this.scoreSentTimeStamp=0}init(){let t;t=-1!==window.location.hostname.indexOf("localhost")||-1!==window.location.hostname.indexOf("127")?"ws://localhost:3001":"wss://"+window.location.hostname+":443",this.client=new D.Client(t)}async joinOrCreateRoom(t,e){try{try{this.room=await this.client.joinById(t,{roomId:t,username:e})}catch(i){this.room=await this.client.create("lobby",{roomId:t,username:e})}this.room.onMessage(F.PLAYER_JOINED,t=>{t!==e&&U.onAdversaryJoined()}),this.room.onMessage(F.GAME_OVER,t=>{let i=JSON.parse(t);i.username!==e&&U.onAdversaryGameOverReceived(i)}),this.room.onMessage(F.SCORE,t=>{let i=JSON.parse(t);i.username!==e&&U.onAdversaryScoreReceived(i.score)})}catch(t){console.log(t)}}async sendMessage(t,e){if(t===F.SCORE){const t=(new Date).getTime();t-this.scoreSentTimeStamp>12e3&&(this.scoreSentTimeStamp=t,this.room.send(F.SCORE,e))}else this.room.send(t,e)}}F.LOBBY="lobby",F.GAME_OVER="game_over",F.PLAYER_JOINED="joined",F.SCORE="score";class B extends Phaser.GameObjects.Container{constructor(){super(U.currentScene);const t=new Phaser.GameObjects.Graphics(this.scene);t.fillStyle(597301,.85),t.fillRect(0,0,U.gameWidth,U.gameHeight),this.add(t),this.scaledItemsContainer=new Phaser.GameObjects.Container(this.scene),this.scaledItemsContainer.x=.5*U.gameWidth,this.scaledItemsContainer.y=.5*U.gameHeight,this.scaledItemsContainer.scaleX=U.scaleX,this.scaledItemsContainer.scaleY=U.scaleY,this.add(this.scaledItemsContainer),U.gameWidth>U.gameHeight&&(this.scaledItemsContainer.y=.525*U.gameHeight,this.scaledItemsContainer.scaleX*=.74,this.scaledItemsContainer.scaleY*=.74);const e=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","box_big");this.scaledItemsContainer.add(e);const i=new Phaser.GameObjects.Image(this.scene,0,-345,"texture_atlas_0","logo_cd");this.scaledItemsContainer.add(i),this.progressMessageLabel=new Phaser.GameObjects.Text(this.scene,0,190,"",{fontFamily:"Oswald-ExtraLight",fontSize:"36px",color:"#00ddfe"}),this.progressMessageLabel.setOrigin(.5),this.progressMessageLabel.tint=56830,this.progressMessageLabel.visible=!1,this.scaledItemsContainer.add(this.progressMessageLabel),this.loadIcon=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","load_icon"),this.scaledItemsContainer.add(this.loadIcon),this.scene.tweens.add({targets:this.loadIcon,angle:360,ease:Phaser.Math.Easing.Linear,duration:2e3,repeat:-1})}setProgressMessage(t){this.progressMessageLabel.visible=!0,this.progressMessageLabel.setText(t)}onDuelReady(){this.loadIcon.destroy(),this.progressMessageLabel.visible=!1;const t=new Phaser.GameObjects.Text(this.scene,0,-150,h.PAYMENTS_LAYER_DUEL_READY_LABEL,{fontFamily:"Oswald-Medium",fontSize:"60px",color:"#FFFFFF"});t.setOrigin(.5),this.scaledItemsContainer.add(t),f.track(t);const e=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","btn_regular"),i=new Phaser.GameObjects.Text(this.scene,0,0,h.PAYMENTS_LAYER_PLAY,{fontFamily:"Oswald-Medium",fontSize:"36px",color:"#361601"});i.setOrigin(.5),f.track(i);const n=new g(this.scene,e,i,this.onClickPlay,this);n.x=0,n.y=15,this.scaledItemsContainer.add(n);const r=new Phaser.GameObjects.Text(this.scene,0,260,h.PAYMENTS_LAYER_INFO_LABEL,{fontFamily:"Oswald-ExtraLight",fontSize:"24px",color:"#00ddfe",align:"center"});r.setOrigin(.5),this.scaledItemsContainer.add(r),f.track(r),this.termsAndConditionsLabel=new Phaser.GameObjects.Text(this.scene,U.gameWidth/2,U.gameHeight-20*U.scaleY,h.PAYMENTS_LAYER_TERMS,{fontFamily:"Oswald-ExtraLight",fontSize:"22px",color:"#00ddfe"}),this.termsAndConditionsLabel.setOrigin(.5),this.termsAndConditionsLabel.scaleX=U.scaleX,this.termsAndConditionsLabel.scaleY=U.scaleY,this.termsAndConditionsLabel.setInteractive({cursor:"pointer"}),f.track(this.termsAndConditionsLabel),this.termsAndConditionsLabel.on("pointerdown",(function(){l.openExternalLink(U.urls.clashdome+"/terms-and-conditions")}),this),this.add(this.termsAndConditionsLabel)}onClickPlay(){U.startDuel()}}class N extends Phaser.GameObjects.Container{constructor(t){super(U.currentScene);const e=new Phaser.GameObjects.Graphics(this.scene);e.fillStyle(597301,.85),e.fillRect(0,0,U.gameWidth,U.gameHeight),this.add(e),this.scaledItemsContainer=new Phaser.GameObjects.Container(this.scene),this.scaledItemsContainer.x=.5*U.gameWidth,this.scaledItemsContainer.y=.5*U.gameHeight,this.scaledItemsContainer.scaleX=U.scaleX,this.scaledItemsContainer.scaleY=U.scaleY,this.add(this.scaledItemsContainer),U.gameWidth>U.gameHeight&&(this.scaledItemsContainer.y=.525*U.gameHeight,this.scaledItemsContainer.scaleX*=.74,this.scaledItemsContainer.scaleY*=.74);const i=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","box_big");this.scaledItemsContainer.add(i);const n=new Phaser.GameObjects.Image(this.scene,0,-345,"texture_atlas_0","logo_cd");this.scaledItemsContainer.add(n);const r=U.gameFees.fees.indexOf(t);let s;switch(r){case 0:s=16776960;break;case 1:s=16762646;break;case 2:s=16743719;break;case 3:s=16734759;break;default:s=16776960}const a=new Phaser.GameObjects.Graphics(this.scene);a.fillStyle(s),a.fillRoundedRect(-202.5,-43,405,86,6),a.y=-165,this.scaledItemsContainer.add(a);const o=new Phaser.GameObjects.Text(this.scene,0,a.y,"TIER "+parseFloat(t),{fontFamily:"Oswald-Medium",fontSize:"66px",color:"#442302",align:"center"});o.setOrigin(0,.5),this.scaledItemsContainer.add(o);let u=new Phaser.GameObjects.Image(this.scene,o.width+45,a.y,"texture_atlas_0",0===r?"token_alcor_jigo":"icon_waxp_token");this.scaledItemsContainer.add(u);let c=-(o.width+45+u.width/2)/2;o.x+=c,u.x+=c;const d=new Phaser.GameObjects.Text(this.scene,0,a.y+68,"CHALLENGE RECEIVED FROM",{fontFamily:"Oswald-Medium",fontSize:"35px",color:"#"+s.toString(16),align:"center"});d.setOrigin(.5),this.scaledItemsContainer.add(d),this.adversaryLabel=new Phaser.GameObjects.Text(this.scene,-90,30,U.adversaryNick?U.adversaryNick:U.adversaryAccount,{fontFamily:"Oswald-Medium",fontSize:"34px",color:"#FFFFFF"}),this.adversaryLabel.setOrigin(.5),this.scaledItemsContainer.add(this.adversaryLabel),this.adversaryAvatar=new Phaser.GameObjects.Image(this.scene,100,this.adversaryLabel.y,"texture_atlas_0","default_avatar"),this.scaledItemsContainer.add(this.adversaryAvatar);const p=new Phaser.GameObjects.Text(this.scene,U.gameWidth/2,U.gameHeight-20*U.scaleY,h.ACCEPT_LAYER_TERMS,{fontFamily:"Oswald-ExtraLight",fontSize:"22px",color:"#00ddfe"});p.setOrigin(.5),p.scaleX=U.scaleX,p.scaleY=U.scaleY,p.setInteractive({cursor:"pointer"}),f.track(p),p.on("pointerdown",(function(){l.openExternalLink(U.urls.clashdome+"/terms-and-conditions",!1)}),this),this.add(p),this.buttonsContainer=new Phaser.GameObjects.Container(this.scene),this.scaledItemsContainer.add(this.buttonsContainer);const m=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","btn_accept"),y=new Phaser.GameObjects.Text(this.scene,0,0,"ACCEPT",{fontFamily:"Oswald-Medium",fontSize:"34px",color:"#FFFFFF"});y.setOrigin(.5),f.track(y);const v=new g(this.scene,m,y,this.onClickAccept,this);v.x=-100,v.y=190,this.buttonsContainer.add(v);const _=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","btn_decline"),x=new Phaser.GameObjects.Text(this.scene,0,0,"DECLINE",{fontFamily:"Oswald-Medium",fontSize:"34px",color:"#FFFFFF"});x.setOrigin(.5),f.track(x);const w=new g(this.scene,_,x,this.onClickDecline,this);w.x=-v.x,w.y=v.y,this.buttonsContainer.add(w);const b=new Phaser.GameObjects.Text(this.scene,v.x,v.y+64,parseFloat(t).toString(),{fontFamily:"Oswald-ExtraLight",fontSize:"30px",color:"#00ddfe"});b.setOrigin(0,.5),this.buttonsContainer.add(b),u=new Phaser.GameObjects.Image(this.scene,b.x+b.width+25,b.y,"texture_atlas_0",0===r?"token_alcor_jigo":"icon_waxp_token"),u.setScale(.5),this.buttonsContainer.add(u),c=-(b.width+25+u.width*u.scale/2)/2,b.x+=c,u.x+=c,this.alpha=0,this.scene.tweens.add({targets:this,alpha:1,ease:Phaser.Math.Easing.Cubic.Out,duration:350})}onAdversaryAvatarLoaded(t){if(t!==U.adversaryAccount)return;this.adversaryLabel.text=U.adversaryNick?U.adversaryNick:U.adversaryAccount,this.adversaryAvatar&&this.adversaryAvatar.destroy(),m.create(this.scene,"circle-avatar-"+U.adversaryAccount,"avatar-"+U.adversaryAccount);const e="circle-avatar-"+U.adversaryAccount;this.scene.textures.exists(e)?this.adversaryAvatar=new Phaser.GameObjects.Image(this.scene,100,this.adversaryLabel.y,e):this.adversaryAvatar=new Phaser.GameObjects.Image(this.scene,100,this.adversaryLabel.y,"texture_atlas_0","default_avatar"),this.scaledItemsContainer.add(this.adversaryAvatar)}async onClickAccept(){U.inputsDisabled||(this.buttonsContainer.visible=!1,this.addLoadIcon(),await U.proceedWithPrivateDuelInvitation())}async onClickDecline(){U.inputsDisabled||(this.buttonsContainer.visible=!1,this.addLoadIcon(),await U.cancelPrivateDuelInvitation())}addLoadIcon(){const t=new Phaser.GameObjects.Image(this.scene,0,190,"texture_atlas_0","load_icon");this.scaledItemsContainer.add(t),this.scene.tweens.add({targets:t,angle:360,ease:Phaser.Math.Easing.Linear,duration:2e3,repeat:-1})}}class G extends Phaser.GameObjects.Container{constructor(){super(U.currentScene),this.score=0,this.scaleX=U.scaleX,this.scaleY=U.scaleY,U.adversaryScoreContainerConfig?(this.x=U.adversaryScoreContainerConfig.x,this.y=U.adversaryScoreContainerConfig.y,this.containerWidth=U.adversaryScoreContainerConfig.width,this.containerHeight=U.adversaryScoreContainerConfig.height):(this.x=U.gameWidth/2,this.y=U.gameHeight,this.containerWidth=125,this.containerHeight=30),this.adversaryGameOver=!1;const t=new Phaser.GameObjects.Graphics(this.scene);t.fillStyle(6724,.5),t.fillRoundedRect(-this.containerWidth/2,-1.5*this.containerHeight,this.containerWidth,this.containerHeight,.25*this.containerHeight),this.add(t),m.create(this.scene,"circle-avatar-"+U.adversaryAccount,"avatar-"+U.adversaryAccount);const e="circle-avatar-"+U.adversaryAccount;let i;i=this.scene.textures.exists(e)?new Phaser.GameObjects.Image(this.scene,-3.15*this.containerHeight,-this.containerHeight,e):new Phaser.GameObjects.Image(this.scene,-3.15*this.containerHeight,-this.containerHeight,"texture_atlas_0","default_avatar"),i.setScale(1.35*this.containerHeight/i.width),this.add(i);const n=Math.floor(.8*this.containerHeight);this.scoreLabel=new Phaser.GameObjects.Text(this.scene,0,-this.containerHeight,"-",{fontFamily:"Oswald-ExtraLight",fontSize:n+"px",color:"#FFFFFF",align:"center"}),this.scoreLabel.setOrigin(.5,.5),this.add(this.scoreLabel),this.loadIcon=new Phaser.GameObjects.Image(this.scene,i.x,i.y,"texture_atlas_0","load_icon"),this.loadIcon.setScale(1.45*this.containerHeight/this.loadIcon.width),this.loadIcon.visible=!1,this.add(this.loadIcon),this.scene.tweens.add({targets:this.loadIcon,angle:360,ease:Phaser.Math.Easing.Linear,duration:2e3,repeat:-1}),null!==U.adversaryScore&&this.onAdversaryGameOver(U.adversaryScore)}updateScore(t){if(this.adversaryGameOver)return;const e=this;this.scene.tweens.add({targets:this,score:t,ease:Phaser.Math.Easing.Linear,duration:450,onUpdate:function(){e.scoreLabel.text=l.formatNumber(Math.floor(e.score))},onUpdateScope:this}),this.adversaryGameOver&&(this.loadIcon.visible=!0)}onAdversaryGameOver(t){this.adversaryGameOver=!0,this.loadIcon.visible=!1,this.scoreLabel.destroy();const e=Math.floor(.7*this.containerHeight);this.scoreLabel=new Phaser.GameObjects.Text(this.scene,0,-this.containerHeight-2,l.formatNumber(t),{fontFamily:"Oswald-Medium",fontSize:e+"px",color:"#fbde00",align:"center"}),this.scoreLabel.setOrigin(.5,.5),this.add(this.scoreLabel),this.scoreLabel.alpha=0,this.scene.tweens.add({targets:this.scoreLabel,alpha:1,ease:Phaser.Math.Easing.Cubic.Out,duration:500});const i=this.scoreLabel.width,n=this.scoreLabel.y+.56*e,r=Math.floor(.125*this.containerHeight),s=new Phaser.GameObjects.Graphics(this.scene);s.lineStyle(r,16506368),s.moveTo(-i/2,n),s.lineTo(i/2,n),s.stroke(),this.add(s),s.scaleX=0,this.scene.tweens.add({targets:s,scaleX:1,ease:Phaser.Math.Easing.Cubic.Out,duration:650,delay:500})}onAddedToGameOverLayer(){this.x=U.gameWidth/2,this.y=U.gameHeight,"-"!==this.scoreLabel.text&&(this.loadIcon.visible=!0)}}class Y extends Phaser.GameObjects.Container{constructor(){super(U.currentScene),this.stakedCitizenLabel=null,this.areButtonsEnabled=!1,this.tierButtons=[];const t=this;setTimeout(()=>{t.areButtonsEnabled=!0},250);const e=new Phaser.GameObjects.Graphics(this.scene);e.fillStyle(597301,.85),e.fillRect(0,0,U.gameWidth,U.gameHeight),this.add(e),this.scaledItemsContainer=new Phaser.GameObjects.Container(this.scene),this.scaledItemsContainer.x=.5*U.gameWidth,this.scaledItemsContainer.y=.5*U.gameHeight,this.scaledItemsContainer.scaleX=U.scaleX,this.scaledItemsContainer.scaleY=U.scaleY,this.add(this.scaledItemsContainer),U.gameWidth>U.gameHeight&&(this.scaledItemsContainer.y=.525*U.gameHeight,this.scaledItemsContainer.scaleX*=.74,this.scaledItemsContainer.scaleY*=.74);const i=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","box_big");this.scaledItemsContainer.add(i);const n=new Phaser.GameObjects.Image(this.scene,0,-345,"texture_atlas_0","logo_cd");this.scaledItemsContainer.add(n),this.paymentMenuContainer=new Phaser.GameObjects.Container(this.scene),this.scaledItemsContainer.add(this.paymentMenuContainer),this.composeBackground(),this.progressMessageLabel=new Phaser.GameObjects.Text(this.scene,0,190,"",{fontFamily:"Oswald-ExtraLight",fontSize:"36px",color:"#00ddfe"}),this.progressMessageLabel.setOrigin(.5),this.progressMessageLabel.tint=56830,this.progressMessageLabel.visible=!1,this.scaledItemsContainer.add(this.progressMessageLabel),this.alpha=0,this.addJigoButton(),this.addWAXButtons(),U.isPrivateDuelAllowed||this.disableButtons(),this.scene.tweens.add({targets:this,alpha:1,ease:Phaser.Math.Easing.Cubic.Out,duration:350})}setProgressMessage(t){this.progressMessageLabel.visible=!0,this.progressMessageLabel.setText(t)}onPrivateDuelAccepted(){this.loadIcon.destroy(),this.titleMessageLabel.setText(U.adversaryAccount.toUpperCase()+"\nACCEPTED THE DUEL!");const t=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","btn_regular"),e=new Phaser.GameObjects.Text(this.scene,0,0,h.PAYMENTS_LAYER_PLAY,{fontFamily:"Oswald-Medium",fontSize:"36px",color:"#361601"});e.setOrigin(.5),f.track(e);const i=new g(this.scene,t,e,this.onClickPlay,this);i.x=0,i.y=15,this.scaledItemsContainer.add(i)}disableButtons(){for(let t=0;t<this.tierButtons.length;t++){const e=this.tierButtons[t];e.disable(),e.alpha=.5}}onAdversaryAvatarLoaded(){if(m.create(this.scene,"circle-avatar-"+U.adversaryAccount,"avatar-"+U.adversaryAccount),U.adversaryNick){let t=U.adversaryNick;t.length>12&&(t.length>18&&(t=t.substring(0,14)+"..."),this.adversaryLabel.setFontSize(15)),this.adversaryLabel.text=t}this.adversaryAvatar&&this.adversaryAvatar.destroy();const t="circle-avatar-"+U.adversaryAccount;this.scene.textures.exists(t)?this.adversaryAvatar=new Phaser.GameObjects.Image(this.scene,165,-215,t):this.adversaryAvatar=new Phaser.GameObjects.Image(this.scene,165,-215,"texture_atlas_0","default_avatar"),this.adversaryAvatar.setScale(70/this.adversaryAvatar.width),this.paymentMenuContainer.add(this.adversaryAvatar)}composeBackground(){let t;t=U.isPrivateDuelAllowed?new Phaser.GameObjects.Text(this.scene,0,-215,"YOU ARE CHALLENGING:",{fontFamily:"Oswald-ExtraLight",fontSize:"25px",color:"#FFFFFF"}):new Phaser.GameObjects.Text(this.scene,0,-215,"DUEL NOT POSSIBLE:",{fontFamily:"Oswald-Medium",fontSize:"25px",color:"#FF2456"}),t.setOrigin(1,.5),this.paymentMenuContainer.add(t),this.adversaryLabel=new Phaser.GameObjects.Text(this.scene,120,-215,U.adversaryAccount,{fontFamily:"Oswald-Medium",fontSize:"20px",color:"#FFFFFF"}),this.adversaryLabel.setOrigin(1,.5),this.paymentMenuContainer.add(this.adversaryLabel),m.create(this.scene,"circle-avatar-"+U.adversaryAccount,"avatar-"+U.adversaryAccount);const e="circle-avatar-"+U.adversaryAccount;this.scene.textures.exists(e)?this.adversaryAvatar=new Phaser.GameObjects.Image(this.scene,165,-215,e):this.adversaryAvatar=new Phaser.GameObjects.Image(this.scene,165,-215,"texture_atlas_0","default_avatar"),this.adversaryAvatar.setScale(70/this.adversaryAvatar.width),this.paymentMenuContainer.add(this.adversaryAvatar);const i=new Phaser.GameObjects.Text(this.scene,-170,-135,"ENTRY FEE",{fontFamily:"Oswald-Medium",fontSize:"25px",color:"#00dbff"});i.setOrigin(.5),this.paymentMenuContainer.add(i);let n=new Phaser.GameObjects.Text(this.scene,10,i.y,h.PAYMENTS_LAYER_REWARD3,{fontFamily:"Oswald-Medium",fontSize:"25px",color:"#00dbff"});n.setOrigin(.5),this.paymentMenuContainer.add(n),f.track(n);let r=new Phaser.GameObjects.Text(this.scene,170,i.y,"SEND INVITE",{fontFamily:"Oswald-Medium",fontSize:"25px",color:"#00dbff"});r.setOrigin(.5),this.paymentMenuContainer.add(r);const s=new Phaser.GameObjects.Text(this.scene,-170,12,h.PAYMENTS_LAYER_ENTRY_FEE,{fontFamily:"Oswald-Medium",fontSize:"25px",color:"#00dbff"});s.setOrigin(.5),this.paymentMenuContainer.add(s),f.track(s),n=new Phaser.GameObjects.Text(this.scene,10,s.y,h.PAYMENTS_LAYER_REWARD3,{fontFamily:"Oswald-Medium",fontSize:"25px",color:"#00dbff"}),n.setOrigin(.5),this.paymentMenuContainer.add(n),f.track(n),r=new Phaser.GameObjects.Text(this.scene,170,s.y,"SEND INVITE",{fontFamily:"Oswald-Medium",fontSize:"25px",color:"#00dbff"}),r.setOrigin(.5),this.paymentMenuContainer.add(r);let a=new Phaser.GameObjects.Graphics(this.scene);a.fillStyle(14702),a.fillRect(-250,0,500,83),a.y=-110,this.paymentMenuContainer.add(a),a=new Phaser.GameObjects.Graphics(this.scene),a.fillStyle(14702),a.fillRect(-250,0,500,83),a.y=44,this.paymentMenuContainer.add(a),a=new Phaser.GameObjects.Graphics(this.scene),a.fillStyle(14702),a.fillRect(-250,0,500,83),a.y=217,this.paymentMenuContainer.add(a)}addJigoButton(){const t=this,e=this.getPrivateDuelNoStakeFee(),i=new Phaser.GameObjects.Text(this.scene,-180,-65,e.toString(),{fontFamily:"Oswald-ExtraLight",fontSize:"24px",color:"#FFFFFF"});i.setOrigin(.5),i.alpha=U.isPrivateDuelAllowed?1:.35,this.paymentMenuContainer.add(i),f.track(i);let n=this.getPrivateDuelNoStakeTokenLogo();n.x=i.x+i.width/2+22,n.y=i.y,n.alpha=U.isPrivateDuelAllowed?1:.35,this.paymentMenuContainer.add(n);const r=Math.round(1.4*e*100)/100,s=new Phaser.GameObjects.Text(this.scene,0,i.y,r.toString(),{fontFamily:"Oswald-Medium",fontSize:"24px",color:"#fff835"});s.setOrigin(.5),s.alpha=U.isPrivateDuelAllowed?1:.35,this.paymentMenuContainer.add(s),n=this.getPrivateDuelNoStakeTokenLogo(),n.x=s.x+s.width/2+22,n.y=s.y,n.alpha=U.isPrivateDuelAllowed?1:.35,this.paymentMenuContainer.add(n),this.freeDuelButton=new p(this.scene,170,-69,"texture_atlas_0","btn_tier_free","btn_tier_hover"),this.freeDuelButton.onDown((function(){t.onClickProceed(U.gameFees.fees[0])}),this),this.paymentMenuContainer.add(this.freeDuelButton),this.tierButtons.push(this.freeDuelButton)}addWAXButtons(){const t=this,e=this.getWAXFees();let i=new Phaser.GameObjects.Text(this.scene,-180,84,e[0].toString(),{fontFamily:"Oswald-ExtraLight",fontSize:"24px",color:"#FFFFFF"});i.alpha=U.isPrivateDuelAllowed?1:.35,i.setOrigin(.5),this.paymentMenuContainer.add(i);let n=new Phaser.GameObjects.Image(this.scene,i.x+i.width/2+22,i.y,"texture_atlas_0","logo_wax");n.alpha=U.isPrivateDuelAllowed?1:.35,n.setScale(.7),this.paymentMenuContainer.add(n);let r=Math.round(1.9*e[0]*100)/100,s=new Phaser.GameObjects.Text(this.scene,0,i.y,r.toString(),{fontFamily:"Oswald-Medium",fontSize:"24px",color:"#fff835"});s.alpha=U.isPrivateDuelAllowed?1:.35,s.setOrigin(.5),this.paymentMenuContainer.add(s),n=new Phaser.GameObjects.Image(this.scene,s.x+s.width/2+22,i.y,"texture_atlas_0","logo_wax"),n.alpha=U.isPrivateDuelAllowed?1:.35,n.setScale(.7),this.paymentMenuContainer.add(n);const a=new p(this.scene,170,i.y,"texture_atlas_0","btn_tier_1","btn_tier_hover");a.onDown((function(){t.onClickProceed(U.gameFees.fees[1])}),this),this.paymentMenuContainer.add(a),i=new Phaser.GameObjects.Text(this.scene,-180,173,e[1].toString(),{fontFamily:"Oswald-ExtraLight",fontSize:"24px",color:"#FFFFFF"}),i.alpha=U.isPrivateDuelAllowed?1:.35,i.setOrigin(.5),this.paymentMenuContainer.add(i),n=new Phaser.GameObjects.Image(this.scene,i.x+i.width/2+22,i.y,"texture_atlas_0","logo_wax"),n.alpha=U.isPrivateDuelAllowed?1:.35,n.setScale(.7),this.paymentMenuContainer.add(n),r=Math.round(1.9*e[1]*100)/100,s=new Phaser.GameObjects.Text(this.scene,0,i.y,r.toString(),{fontFamily:"Oswald-Medium",fontSize:"24px",color:"#fff835"}),s.setOrigin(.5),s.alpha=U.isPrivateDuelAllowed?1:.35,this.paymentMenuContainer.add(s),n=new Phaser.GameObjects.Image(this.scene,s.x+s.width/2+22,i.y,"texture_atlas_0","logo_wax"),n.alpha=U.isPrivateDuelAllowed?1:.35,n.setScale(.7),this.paymentMenuContainer.add(n);const o=new p(this.scene,170,i.y,"texture_atlas_0","btn_tier_2","btn_tier_hover");o.onDown((function(){t.onClickProceed(U.gameFees.fees[2])}),this),this.paymentMenuContainer.add(o),i=new Phaser.GameObjects.Text(this.scene,-180,259,e[2].toString(),{fontFamily:"Oswald-ExtraLight",fontSize:"24px",color:"#FFFFFF"}),i.alpha=U.isPrivateDuelAllowed?1:.35,i.setOrigin(.5),this.paymentMenuContainer.add(i),n=new Phaser.GameObjects.Image(this.scene,i.x+i.width/2+22,i.y,"texture_atlas_0","logo_wax"),n.alpha=U.isPrivateDuelAllowed?1:.35,n.setScale(.7),this.paymentMenuContainer.add(n),r=Math.round(1.9*e[2]*100)/100,s=new Phaser.GameObjects.Text(this.scene,0,i.y,r.toString(),{fontFamily:"Oswald-Medium",fontSize:"24px",color:"#fff835"}),s.setOrigin(.5),s.alpha=U.isPrivateDuelAllowed?1:.35,this.paymentMenuContainer.add(s),n=new Phaser.GameObjects.Image(this.scene,s.x+s.width/2+22,i.y,"texture_atlas_0","logo_wax"),n.alpha=U.isPrivateDuelAllowed?1:.35,n.setScale(.7),this.paymentMenuContainer.add(n);const h=new p(this.scene,170,i.y,"texture_atlas_0","btn_tier_3","btn_tier_hover");h.onDown((function(){t.onClickProceed(U.gameFees.fees[3])}),this),this.paymentMenuContainer.add(h),r=Math.round(1.9*e[2]*100)/100,this.tierButtons.push(a),this.tierButtons.push(o),this.tierButtons.push(h)}onClickPlay(){U.startDuel()}onClickProceed(t){this.areButtonsEnabled&&(this.stakedCitizenLabel&&this.stakedCitizenLabel.destroy(),this.loadIcon=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","load_icon"),this.scaledItemsContainer.add(this.loadIcon),this.scene.tweens.add({targets:this.loadIcon,angle:360,ease:Phaser.Math.Easing.Linear,duration:2e3,repeat:-1}),this.paymentMenuContainer.visible=!1,this.termsAndConditionsLabel&&(this.termsAndConditionsLabel.visible=!1),U.proceedWithPrivateDuel(t))}getPrivateDuelNoStakeFee(){let t=0;const e=U.gameFees.fees[0];let i=null;return-1!==U.gameFees.fees[0].indexOf("CDJIGO")?i=e.replace(" CDJIGO",""):-1!==U.gameFees.fees[0].indexOf("CDCARBZ")?i=e.replace(" CDCARBZ",""):-1!==U.gameFees.fees[0].indexOf("LUDIO")&&(i=e.replace(" LUDIO","")),i&&(t=parseFloat(i)),t}getWAXFees(){const t=[];for(let e=0;e<U.gameFees.fees.length;e++)if(-1!==U.gameFees.fees[e].indexOf("WAX")){const i=U.gameFees.fees[e].replace(" WAX",""),n=parseFloat(i);t.push(n)}return t}getPrivateDuelNoStakeTokenLogo(){let t,e=null;return-1!==U.gameFees.fees[0].indexOf("CDJIGO")?t="jigo_icon":-1!==U.gameFees.fees[0].indexOf("CDCARBZ")?t="carbz_icon":-1!==U.gameFees.fees[0].indexOf("LUDIO")&&(t="ludio_icon"),t&&(e=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0",t)),e}}class z extends Phaser.GameObjects.Container{constructor(){super(U.currentScene);const t=new Phaser.GameObjects.Graphics(this.scene);t.fillStyle(597301,.85),t.fillRect(0,0,U.gameWidth,U.gameHeight),this.add(t),this.scaledItemsContainer=new Phaser.GameObjects.Container(this.scene),this.scaledItemsContainer.x=.5*U.gameWidth,this.scaledItemsContainer.y=.5*U.gameHeight,this.scaledItemsContainer.scaleX=U.scaleX,this.scaledItemsContainer.scaleY=U.scaleY,this.add(this.scaledItemsContainer),U.gameWidth>U.gameHeight&&(this.scaledItemsContainer.y=.525*U.gameHeight,this.scaledItemsContainer.scaleX*=.74,this.scaledItemsContainer.scaleY*=.74);const e=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","box_big");this.scaledItemsContainer.add(e);const i=new Phaser.GameObjects.Image(this.scene,0,-345,"texture_atlas_0","logo_cd");this.scaledItemsContainer.add(i);const n=new Phaser.GameObjects.Text(this.scene,0,-180,"CHALLENGE SENT TO:",{fontFamily:"Oswald-Medium",fontSize:"36px",color:"#FFFFFF",align:"center"});n.setOrigin(.5),this.scaledItemsContainer.add(n),this.adversaryLabel=new Phaser.GameObjects.Text(this.scene,-90,-70,U.adversaryNick?U.adversaryNick:U.adversaryAccount,{fontFamily:"Oswald-ExtraLight",fontSize:"28px",color:"#FFFFFF",align:"center"}),this.adversaryLabel.setOrigin(.5),this.scaledItemsContainer.add(this.adversaryLabel),m.create(this.scene,"circle-avatar-"+U.adversaryAccount,"avatar-"+U.adversaryAccount);const r="circle-avatar-"+U.adversaryAccount;this.scene.textures.exists(r)?this.adversaryAvatar=new Phaser.GameObjects.Image(this.scene,70,-70,r):this.adversaryAvatar=new Phaser.GameObjects.Image(this.scene,70,-70,"texture_atlas_0","default_avatar"),this.adversaryAvatar.setScale(110/this.adversaryAvatar.width),this.scaledItemsContainer.add(this.adversaryAvatar);const s=new Phaser.GameObjects.Text(this.scene,0,60,"You'll be notified when the challenge has been accepted\nso you can start playing",{fontFamily:"Oswald-ExtraLight",fontSize:"22px",color:"#00ddfe",align:"center"});s.setOrigin(.5),this.scaledItemsContainer.add(s);const a=new Phaser.GameObjects.Graphics(this.scene);a.fillStyle(208712),a.fillRoundedRect(-230,180,360,60,30),this.scaledItemsContainer.add(a),-1!==window.location.hostname.indexOf("localhost")?this.urlStr=window.location.hostname+":3000":this.urlStr="https://"+window.location.hostname,this.urlStr+="/"+U.gameName+"/play?duel=true&private=true&duelID="+U.duelID;const o=new Phaser.GameObjects.Text(this.scene,-210,210,this.urlStr.substring(0,40)+"...",{fontFamily:"Oswald-ExtraLight",fontSize:"22px",color:"#FFFFFF",align:"center"});o.setOrigin(0,.5),this.scaledItemsContainer.add(o);const h=new p(this.scene,185,212,"texture_atlas_0","btn_link_challenge_off","btn_link_challenge_on");h.onDown(this.onDownCopyLinkBtn,this),this.scaledItemsContainer.add(h);const l=new Phaser.GameObjects.Text(this.scene,0,280,"SHARE SHORTCUT LINK WITH FRIENDO (OPTIONAL)",{fontFamily:"Oswald-ExtraLight",fontSize:"22px",color:"#00ddfe",align:"center"});l.setOrigin(.5),this.scaledItemsContainer.add(l)}onAdversaryAvatarLoaded(){m.create(this.scene,"circle-avatar-"+U.adversaryAccount,"avatar-"+U.adversaryAccount),U.adversaryNick&&(this.adversaryLabel.text=U.adversaryNick),this.adversaryAvatar&&this.adversaryAvatar.destroy();const t="circle-avatar-"+U.adversaryAccount;this.scene.textures.exists(t)?this.adversaryAvatar=new Phaser.GameObjects.Image(this.scene,70,-70,t):this.adversaryAvatar=new Phaser.GameObjects.Image(this.scene,70,-70,"texture_atlas_0","default_avatar"),this.adversaryAvatar.setScale(110/this.adversaryAvatar.width),this.scaledItemsContainer.add(this.adversaryAvatar)}onDownCopyLinkBtn(){navigator.clipboard.writeText(this.urlStr)}}class U{static init(t){console.log("ClashDome SDK v:"+U.VERSION),U.reactClass=t.reactClass,U.gameName=t.gameName,U.development=t.development,U.gameOverMenuDelay=t.gameOverMenuDelay||0,U.adversaryScoreContainerConfig=t.adversaryScoreContainerConfig||null,U.startResumedGameCallback=t.startResumedGameCallback,U.goToHomeCallback=t.goToHomeCallback,U.disableInputsCallback=t.disableInputsCallback,U.enableInputsCallback=t.enableInputsCallback,U.gameOverGameCallback=t.gameOverCallback,U.purchasedBoosterCallback=t.purchasedBoosterCallback||null,U.gameManagerReference=t.gameManagerReference,U.engineClass=t.engineClass||null,U.actions=[],U.seedsCounter=0,U.date=null,U.expiredGame=!1,U.errorLayer=null,U.credential=null,U.gameOver=!1,U.resumedGame=!1,U.score=0,U.playerNick=null,U.adversaryNick=null,U.adversaryScore=null,U.replayAccount=null,U.replayNick=null,U.skipLayerShown=!1,U.hasPlayerCitizenStaked=!1,U.trialCitizenData=null,U.isSkipPossible=!0,U.gameOverType=a.FINISH,U.hasBoosterBeenPurchased=!1,U.hasBoosterBeenDiscarded=!1,U.countryCode=null,U.playerMultiplier=null,U.fee=null,U.allTimeHighScore=0,U.weekHighScore=0,U.weeklyHighScoreShown=!1,U.allTimeHighScoreShown=!1,U.levelData=null,U.inputsDisabled=!1,U.numActions=0,U.isSecondPlayer=null,U.hasPlayerVotedLevel=!1;const e=new URLSearchParams(window.location.search);if(U.duelMode="true"===e.get("duel"),U.private="true"===e.get("private"),U.duelID=parseInt(e.get("duelID"))||null,U.duelSeed=parseInt(e.get("seed"))||null,U.adversaryAccount=e.get("adversary")||null,U.replayMode="true"===e.get("replay"),U.replayDuelID=parseInt(e.get("id")),U.duelReplayPlayerOrder=parseInt(e.get("player")),U.landID=parseInt(e.get("land"))||0,U.gameWidth=U.currentScene.game.config.width,U.gameHeight=U.currentScene.game.config.height,U.currentScene.sys.game.device.os.desktop)U.scaleX=1,U.scaleY=1;else{const t=window.innerWidth/window.innerHeight;U.gameWidth>U.gameHeight?(U.scaleX=U.gameWidth/U.gameHeight/t,U.scaleY=1):(U.scaleX=1,U.scaleY=U.gameHeight/U.gameWidth*t)}U.development||U.reactClass&&U.reactClass.state&&"testnet"===U.reactClass.state.serverType?U.urls={clashdome:"http://test.clashdome.io",bloks:"https://wax-test.bloks.io",atomic:"https://test.wax.api.atomicassets.io",apis:["http://wax-testnet.eosphere.io","https://testnet.wax.pink.gg","https://testnet.wax.eosdetroit.io"]}:U.urls={clashdome:"https://clashdome.io",bloks:"https://wax.bloks.io",atomic:"https://aa.dapplica.io",apis:["https://api.waxsweden.org","https://wax.pink.gg","https://apiwax.3dkrender.com","https://wax.eu.eosamsterdam.net","https://wax.blacklusion.io","https://wax.csx.io","https://wax.dapplica.io","https://api-wax.eosarabia.net","https://wax.eoseoul.io","https://api.wax.greeneosio.com","https://wax.hkeos.com","https://api.wax.liquidstudios.io","https://wax.eosn.io"]};i(109).location((function(t){U.countryCode=t}),"","","country")}static onOrientationChange(){if(U.currentScene.game.device.os.desktop)return;const t=window.innerWidth/window.innerHeight;U.gameWidth>U.gameHeight?(U.scaleX=U.gameWidth/U.gameHeight/t,U.scaleY=1):(U.scaleX=1,U.scaleY=U.gameHeight/U.gameWidth*t),U.preloadLayer&&U.preloadLayer.onOrientationChange(),U.errorLayer&&U.errorLayer.onOrientationChange()}static setCurrentScene(t){U.currentScene=t}static loadPreloaderAssets(t){U.currentScene.load.image("arcade_base","assets/sdk/images/arcade_base.png"),U.currentScene.load.image("arcade_btns","assets/sdk/images/arcade_btns.png"),U.currentScene.load.image("game_logo",l.GAME_LOGOS[t])}static loadAssets(){f.init("en","en"),U.preloadLayer=new L,U.currentScene.add.existing(U.preloadLayer),U.currentScene.load.atlas("texture_atlas_0","assets/sdk/images/texture_atlas_0.png","assets/sdk/images/texture_atlas_0.json"),U.currentScene.load.on("progress",t=>{U.preloadLayer.updateProgressbar(t)},U.currentScene)}static isPlayerLogged(){return!!U.development||!(!U.reactClass.state||!U.reactClass.state.wax.userAccount)}static async getReplayLog(){if(U.development)return new Promise((t,e)=>{setTimeout(t,500)}).then((function(){let t;switch(U.gameName){case"candy-fiesta":t=JSON.parse(JSON.stringify(l.CANDY_FIESTA_DEV_LOG));break;case"templok":t=JSON.parse(JSON.stringify(l.TEMPLOK_DEV_LOG));break;case"ringy-dingy":t=JSON.parse(JSON.stringify(l.RINGY_DINGY_DEV_LOG));break;case"endless-siege-2":t=JSON.parse(JSON.stringify(l.ENDLESS_SIEGE_2_DEV_LOG));break;case"rug-pool":t=JSON.parse(JSON.stringify(l.RUG_POOL_DEV_LOG));break;case"pac-man":t=JSON.parse(JSON.stringify(l.PAC_MAN_DEV_LOG))}const e=t.pop();return U.replayAccount=e.data.userName,U.replayScore=e.data.score,U.replayDuration=Math.floor(e.data.duration/1e3),U.landID=e.data.landID,t[t.length-1].type===n.SKIP_GAME?U.gameOverType=a.SKIP:t[t.length-1].type===n.LEAVE_GAME&&(U.gameOverType=a.QUIT),{actions:t}}));{const t=await fetch("/api/clashdome-game/get-replay-log/"+U.replayDuelID+"/"+U.duelReplayPlayerOrder),e=await t.json();if(e.error)return U.errorLayer=new x("ERROR!",e.error),U.currentScene.add.existing(U.errorLayer),{error:!0};{const t=JSON.parse(e.actions);if(t){const e=t.pop();return U.replayAccount=e.data.userName,U.replayScore=e.data.score,U.replayDuration=Math.floor(e.data.duration/1e3),U.landID=e.data.landID,t[t.length-1].type===n.SKIP_GAME?U.gameOverType=a.SKIP:t[t.length-1].type===n.LEAVE_GAME&&(U.gameOverType=a.QUIT),{actions:t}}return U.errorLayer=new x("ERROR!","No actions found for duel:"+U.replayDuelID),U.currentScene.add.existing(U.errorLayer),{error:!0}}}}static async checkPlayerLogin(t,e,i){if(U.gameDataReceivedCallback=t,U.gameDataReceivedCallbackScope=i,U.startGameCallback=e,U.startGameCallbackScope=i,U.replayMode)U.gameDataReceivedCallback.apply(U.gameDataReceivedCallbackScope);else if(l.isPlayerLogged()){U.playerAccount=U.development?"clashdomeali":U.reactClass.state.wax.userAccount;(await U.getGameConfig()).error||(U.gameDataReceivedCallback.apply(U.gameDataReceivedCallbackScope),l.getPlayersAvatarUrls([U.playerAccount],U.loadPlayerAvatars,U),l.getPlayerNick(U.playerAccount,s.PLAYER))}else U.errorLayer=new x("ERROR!","Please login to play the game.",U.login,[],U,"LOGIN"),U.currentScene.add.existing(U.errorLayer)}static async login(){U.development?U.onLoginSuccess():U.reactClass.loginFromGame(U.gameName)}static async onLoginSuccess(){setTimeout((function(){(async()=>{(await U.getGameConfig()).error||U.gameDataReceivedCallback.apply(U.gameDataReceivedCallbackScope)})()}),750)}static async getGameConfig(){const t=parseInt(l.GAME_IDS[U.gameName]);if(U.development){if(localStorage.getItem(U.gameName+"-actions")){U.resumedGame=!0,U.duelID=4321,U.date=localStorage.getItem(U.gameName+"-date");const t=new Date(Date.parse(U.date)).getTime();(new Date).getTime()-t>72e5&&(localStorage.removeItem(U.gameName+"-duelSeed"),localStorage.removeItem(U.gameName+"-seedsCounter"),localStorage.removeItem(U.gameName+"-actions"),localStorage.removeItem(U.gameName+"-date"),localStorage.removeItem(U.gameName+"-landID"),U.expiredGame=!0)}else U.resumedGame=!1,U.adversaryScore=null;const e=!1,i={1:{fees:["100.0000 CDJIGO","5.00000000 WAX","10.00000000 WAX","25.00000000 WAX"],reward:"26.9878 CREDITS",waxToLudioFactor:"20000",creditsToJigoFactor:"1000"},2:{fees:["100.0000 CDJIGO","5.00000000 WAX","10.00000000 WAX","25.00000000 WAX"],reward:"10.0000 CREDITS",waxToLudioFactor:"20000",creditsToJigoFactor:"1000"},3:{fees:["100.0000 CDJIGO","5.00000000 WAX","10.00000000 WAX","25.00000000 WAX"],reward:"15.1123 CREDITS",waxToLudioFactor:"20000",creditsToJigoFactor:"1000"},4:{fees:["100.0000 CDJIGO","5.00000000 WAX","10.00000000 WAX","25.00000000 WAX"],reward:"37.9876 CREDITS",waxToLudioFactor:"0",creditsToJigoFactor:"0"},5:{fees:["100.0000 CDJIGO","5.00000000 WAX","10.00000000 WAX","25.00000000 WAX"],reward:"15.9862 CREDITS",waxToLudioFactor:"20000",creditsToJigoFactor:"1000"},6:{fees:["100.0000 CDJIGO","5.00000000 WAX","10.00000000 WAX","25.00000000 WAX"],reward:"11.5562 CREDITS",waxToLudioFactor:"0",creditsToJigoFactor:"0"}};return U.gameFees=i[t],U.playerMultiplier=1,U.weekHighScore=3150,U.allTimeHighScore=5150,-1!==U.gameFees.fees.indexOf("0.0000 CREDITS")&&(U.hasPlayerCitizenStaked=await l.hasPlayerCitizenStaked(),U.trialCitizenData=await l.getTrialCitizenData()),U.private&&(U.isPrivateDuelAllowed=await l.getIsAdversaryFriend(U.adversaryAccount)),e?(U.errorLayer=new x("VALIDATING SCORE","Your score is being validated and recorded on the blockchain."),U.currentScene.add.existing(U.errorLayer),{error:"validating game"}):new Promise((t,e)=>{setTimeout(t,500)}).then((function(){return{error:null}}))}{const e=await fetch("/api/clashdome-game/get-game-cofig/"+U.playerAccount+"/"+t+"/"+U.landID+"/"+U.private+"/"+U.duelID+"/"+U.adversaryAccount),i=await e.json();if(U.private=U.private||i.private||!1,U.duelID=U.duelID||i.duelID||null,U.feeStr=i.fee?i.fee:"0.0000 LUDIO",U.numActions=i.numActions,U.isSecondPlayer=i.isSecondPlayer,U.adversaryAccount=i.adversaryAccount,U.private&&(U.colyseusManager=new F,U.colyseusManager.init(),l.getPlayersAvatarUrls([U.adversaryAccount],U.loadPlayerAvatars,U),l.getPlayerNick(U.adversaryAccount,s.ADVERSARY)),i.error)return U.errorLayer=new x("ERROR!",i.error),U.currentScene.add.existing(U.errorLayer),{error:i.error};if(i.validating)return U.errorLayer=new x("VALIDATING SCORE","Your score is being validated and recorded on the blockchain."),U.currentScene.add.existing(U.errorLayer),{error:"validating game"};if(U.private&&U.duelID&&!i.resumedGame&&0===i.state&&i.isSecondPlayer){if(U.duelSeed=i.seed,U.gameFees=i.gameFees[t],-1!==i.fee.indexOf("WAX")){const t=i.fee.replace(" WAX","");U.fee=parseFloat(t)}else U.fee=0;return U.acceptPrivateLayer=new N(i.fee),U.currentScene.add.existing(U.acceptPrivateLayer),{error:null}}if(U.resumedGame=i.resumedGame,U.duelID=i.duelID,U.gameFees=i.gameFees[t],U.date=i.date,U.expiredGame=i.expired,U.playerMultiplier=i.playerMultiplier,U.weekHighScore=i.high_scores?i.high_scores.WEEK_HIGH_SCORE:0,U.allTimeHighScore=i.high_scores?i.high_scores.ALL_TIME_HIGH_SCORE:0,i.credential&&(U.credential=i.credential),U.private){const t=await l.getIsAdversaryFriend(U.adversaryAccount),e=l.areAllFeesZero();U.isPrivateDuelAllowed=t&&!i.pendingDuels&&!e,!(i.state>=2)&&i.isSecondPlayer||i.resumedGame||(U.duelID=null),i.roomId&&await U.colyseusManager.joinOrCreateRoom(i.roomId,U.playerAccount)}else U.hasPlayerCitizenStaked=await l.hasPlayerCitizenStaked(),U.trialCitizenData=await l.getTrialCitizenData();return{error:null}}}static showRestoredGameLayer(){if(U.preloadLayer.visible=!1,U.disableInputsCallback.apply(U.gameManagerReference,[]),U.expiredGame){const t=new Date,e=new Date(Date.parse(U.date)),i=l.formatTime((t.getTime()-e.getTime())/1e3,!0),n="Start time: "+e.toLocaleString()+"\n"+l.formatNumber(parseInt(i.h))+"h "+l.formatNumber(parseInt(i.m))+"m ago (duels expire automatically after 2 h)";U.errorLayer=new x("SESSION EXPIRED!",n),U.currentScene.add.existing(U.errorLayer)}else U.private&&(l.getPlayersAvatarUrls([U.adversaryAccount],U.loadPlayerAvatars,U),l.getPlayerNick(U.adversaryAccount,s.ADVERSARY)),U.restoredGameLayer=new C,U.currentScene.add.existing(U.restoredGameLayer);return U.expiredGame}static onAdversaryGameOverReceived(t){U.gameOverLayerOpenDuel?(U.gameOverLayerOpenDuel.destroy(),U.gameOverLayerOpenDuel=null,U.adversaryScoreLayer&&(U.adversaryScoreLayer.destroy(),U.adversaryScoreLayer=null),U.gameOverLayerClosedDuel=new A(U.score,t.tAdversary,t.score,t.tPlayer),U.currentScene.add.existing(U.gameOverLayerClosedDuel)):U.adversaryScoreLayer&&U.adversaryScoreLayer.onAdversaryGameOver(t.score)}static onAdversaryScoreReceived(t){U.adversaryScoreLayer&&U.adversaryScoreLayer.updateScore(t)}static continueRestoredGame(){U.development?setTimeout((function(){const t=Math.random();U.restoredGameLayer.destroy(),U.restoredGameLayer=null,U.credential=Math.floor(1e5*t);const e=localStorage.getItem(U.gameName+"-actions"),i=JSON.parse(e);U.hasBoosterBeenPurchased=-1!==e.indexOf(n.PURCHASE_BOOSTER),U.seedsCounter=parseInt(localStorage.getItem(U.gameName+"-seedsCounter")),U.landID=parseInt(localStorage.getItem(U.gameName+"-landID")),U.devPRNG=new u(U.duelSeed);for(let t=0;t<i.length;t++)"set seed"===i[t].type&&U.devPRNG.getRandom();U.adversaryScore=45,U.adversaryAccount&&(l.getPlayersAvatarUrls([U.adversaryAccount],U.loadPlayerAvatars,U),l.getPlayerNick(U.adversaryAccount,s.ADVERSARY)),U.startResumedGameCallback.apply(U.gameManagerReference,[i])}),2500):(async()=>{const t=parseInt(l.GAME_IDS[U.gameName]);try{const e=[{account:"clashdomedll",name:"startsession",authorization:[{actor:U.playerAccount,permission:"active"}],data:{account:U.playerAccount,game:t}}];let i;"wcw"===U.reactClass.state.wax.type?i=await U.reactClass.state.wax.api.transact({actions:e},{blocksBehind:3,expireSeconds:30}):"anchor"===U.reactClass.state.wax.type&&(i=await U.reactClass.state.wax.signTransaction({actions:e},{blocksBehind:3,expireSeconds:30}))}catch(t){return U.errorLayer&&(U.errorLayer.destroy(),U.errorLayer=null),U.errorLayer=new x("ERROR!",t.message,U.continueRestoredGame,[],U),U.currentScene.add.existing(U.errorLayer),{error:t.message}}await l.delay(2500);const e=await fetch("/api/clashdome-game/restore-game/"+U.playerAccount+"/"+t),i=await e.json();if(null!==U.restoredGameLayer&&(U.restoredGameLayer.destroy(),U.restoredGameLayer=null),i.error)return U.errorLayer&&(U.errorLayer.destroy(),U.errorLayer=null),U.errorLayer=new x("ERROR!",i.error,U.continueRestoredGame,[],U),U.currentScene.add.existing(U.errorLayer),{error:i.error};{i.private&&(U.private=!0,U.colyseusManager||(U.colyseusManager=new F,U.colyseusManager.init()),await U.colyseusManager.joinOrCreateRoom(i.roomId,U.playerAccount));const t=JSON.parse(i.actions);if(U.landID=i.landID,U.duelSeed=parseInt(i.seed),U.seedsCounter=i.seedsCounter,U.adversaryScore=null===i.adversaryScore?null:parseInt(i.adversaryScore),i.adversaryAccount[0],i.private&&0===i.state)return U.waitingPrivateLayer=new z,U.currentScene.add.existing(U.waitingPrivateLayer),!0;U.hasBoosterBeenPurchased=-1!==i.actions.indexOf(n.PURCHASE_BOOSTER),U.feeStr=i.fee;let e=i.fee;-1!==e.indexOf(" CREDITS")?e.replace(" CREDITS",""):-1!==e.indexOf(" WAX")&&e.replace(" WAX",""),U.fee=parseFloat(e),U.credential=i.credential,U.adversaryAccount&&(l.getPlayersAvatarUrls([U.adversaryAccount],U.loadPlayerAvatars,U),l.getPlayerNick(U.adversaryAccount,s.ADVERSARY)),U.startResumedGameCallback.apply(U.gameManagerReference,[t])}})()}static removeRestoredGameLayer(){U.restoredGameLayer.destroy(),U.restoredGameLayer=null}static async fetchSeed(){if(U.disableInputsCallback.apply(U.gameManagerReference,[]),U.development){const t=localStorage.getItem(U.gameName+"-seedsCounter");if(parseInt(t)!==U.seedsCounter)return U.errorLayer=new x("ERROR!","Duplicated game session."),U.currentScene.add.existing(U.errorLayer),{seed:null,seedsCounter:null,error:"Duplicated game session."};(new Date).getTime()-new Date(Date.parse(U.date)).getTime()>72e5&&(U.disableInputsCallback.apply(U.gameManagerReference,[]),localStorage.removeItem(U.gameName+"-duelSeed"),localStorage.removeItem(U.gameName+"-seedsCounter"),localStorage.removeItem(U.gameName+"-actions"),localStorage.removeItem(U.gameName+"-date"),localStorage.removeItem(U.gameName+"-booster"),U.expiredGame=!0,U.showRestoredGameLayer());const e=localStorage.getItem(U.gameName+"-actions");let i;i=e?JSON.parse(e):[];const n=Math.floor(1e6*U.devPRNG.getRandom());return new Promise((t,e)=>{setTimeout(t,250+250*Math.random())}).then((function(){return i=i.concat(U.actions),U.seedsCounter++,localStorage.setItem(U.gameName+"-seedsCounter",(parseInt(t)+1).toString()),i.push({type:"set seed",data:{seed:n,i:U.seedsCounter}}),localStorage.setItem(U.gameName+"-actions",JSON.stringify(i)),U.actions=[],U.enableInputsCallback.apply(U.gameManagerReference,[]),{seed:n,seedsCounter:U.seedsCounter,error:null}}))}try{const t=parseInt(l.GAME_IDS[U.gameName]),e=await fetch("/api/clashdome-game/fetch-seed/"+U.playerAccount+"/"+t+"/"+JSON.stringify(U.actions)+"/"+U.seedsCounter+"/"+U.credential),i=await e.json();return i.error?(U.errorLayer=new x("ERROR!",i.error),U.currentScene.add.existing(U.errorLayer),{seed:null,seedsCounter:null,error:i.error}):i.expired?(U.expiredGame=!0,U.date=i.date,U.showRestoredGameLayer(),{seed:null,seedsCounter:null,error:"session expired"}):(U.seedsCounter++,U.actions=[],U.enableInputsCallback.apply(U.gameManagerReference,[]),{seed:i.seed,seedsCounter:i.seedsCounter,error:null})}catch(t){return U.errorLayer=new x("ERROR!",t),U.currentScene.add.existing(U.errorLayer),{seed:null,seedsCounter:null,error:t}}}static async addAction(t,e,i){if(U.actions.push(t),e){if(i&&U.disableInputsCallback.apply(U.gameManagerReference,[]),U.development){const t=localStorage.getItem(U.gameName+"-actions");let e;e=t?JSON.parse(t):[],e=e.concat(U.actions),localStorage.setItem(U.gameName+"-actions",JSON.stringify(e)),U.actions=[],i&&U.enableInputsCallback.apply(U.gameManagerReference,[])}else try{const t=parseInt(l.GAME_IDS[U.gameName]),e=await fetch("/api/clashdome-game/store-actions/"+U.playerAccount+"/"+t+"/"+JSON.stringify(U.actions)+"/"+U.credential);if(200===e.status)U.actions=[];else{const t=await e.json();U.errorLayer=new x("ERROR!",t.error),U.currentScene.add.existing(U.errorLayer)}i&&U.enableInputsCallback.apply(U.gameManagerReference,[])}catch(t){U.errorLayer=new x("ERROR!",t),U.currentScene.add.existing(U.errorLayer),i&&U.enableInputsCallback.apply(U.gameManagerReference,[])}U.resumedGame&&(U.resumedGame=!1)}}static onScoreUpdated(t){U.score=t,U.score>U.allTimeHighScore&&U.allTimeHighScore>0&&!U.allTimeHighScoreShown?(U.allTimeHighScoreShown=!0,U.highScoreLayer=new I,U.currentScene.add.existing(U.highScoreLayer)):U.score>U.weekHighScore&&U.weekHighScore>0&&!U.weeklyHighScoreShown&&!U.allTimeHighScoreShown&&(U.weeklyHighScoreShown=!0,U.highScoreLayer=new I(!0),U.currentScene.add.existing(U.highScoreLayer)),U.private?t>0&&U.colyseusManager.sendMessage(F.SCORE,JSON.stringify({username:U.playerAccount,score:t})):null!==U.adversaryScore&&U.adversaryScore<U.score&&!U.skipLayerShown&&(U.skipLayerShown=!0,U.skipDuelLayer=new R,U.currentScene.add.existing(U.skipDuelLayer),U.disableInputsCallback.apply(U.gameManagerReference,[!0]))}static removeSkipDuelLayer(){U.skipDuelLayer.destroy(),U.skipDuelLayer=null,U.enableInputsCallback.apply(U.gameManagerReference,[!0])}static async onGameOver(t,e,i){if(U.replayMode)return;if(U.gameOver=!0,U.score=t||U.score,U.score>U.weekHighScore&&(U.weekHighScore=U.score),U.score>U.allTimeHighScore&&(U.allTimeHighScore=U.score),U.disableInputsCallback.apply(U.gameManagerReference,[]),!U.credential)return;U.skipDuelLayer&&(U.skipDuelLayer.destroy(),U.skipDuelLayer=null);let s=null;if(U.waitingLayer?(U.waitingLayer.destroy(),U.waitingLayer=null):s=U.gameOverGameCallback.apply(U.gameManagerReference,[]),U.boosterLayer&&(U.inputsDisabled=!1,U.boosterLayer.destroy(),U.boosterLayer=null),e&&U.addAction({type:n.LEAVE_GAME,data:s}),i&&U.addAction({type:n.SKIP_GAME,data:s}),!U.hasBoosterBeenPurchased&&!U.hasBoosterBeenDiscarded&&l.isBoosterSupported()&&!e&&!U.skipLayerShown)return U.ludioBalance=null,U.jigoBalance=null,(async()=>{0===U.fee?U.jigoBalance=await l.getCDTokenBalance(r.JIGO):U.ludioBalance=await l.getCDTokenBalance(r.LUDIO)})(),new Promise((t,e)=>{setTimeout(t,U.gameOverMenuDelay)}).then((function(){U.boosterLayer=new M,U.currentScene.add.existing(U.boosterLayer)}));"pac-man"===U.gameName&&l.getPlayersAvatarUrls([U.levelData.author],U.loadPlayerAvatars,U),await U.addWaitingLayer();const a=parseInt(l.GAME_IDS[U.gameName]);let o,h;if(U.development){"pac-man"===U.gameName&&(U.hasPlayerVotedLevel=!1);const t=localStorage.getItem(U.gameName+"-actions");let e;return e=t?JSON.parse(t):[],e=e.concat(U.actions),e.push({type:"end game",data:{userName:"gr.au.wam",score:U.score,duration:1234}}),console.log(JSON.stringify(e)),localStorage.removeItem(U.gameName+"-actions"),localStorage.removeItem(U.gameName+"-duelSeed"),localStorage.removeItem(U.gameName+"-seedsCounter"),localStorage.removeItem(U.gameName+"-date"),localStorage.removeItem(U.gameName+"-booster"),o=700,h=600,new Promise((t,e)=>{setTimeout(t,500+500*Math.random())}).then((function(){let t=null;if(U.engineClass){const i=new U.engineClass;i.init(U.landID,U.engineInitObject),i.processActions(e),U.score!==i.score&&(t="Score validation mismatch.\nClient:"+l.formatNumber(U.score)+" Server:"+l.formatNumber(i.score))}t?(U.errorLayer=new x("ERROR!",t),U.currentScene.add.existing(U.errorLayer)):(U.waitingLayer.destroy(),U.waitingLayer=null,U.adversaryScore?(U.duelID=7777,U.gameOverLayerClosedDuel=new A(U.score,o,U.adversaryScore,h),U.currentScene.add.existing(U.gameOverLayerClosedDuel)):(U.gameOverLayerOpenDuel=new S,U.currentScene.add.existing(U.gameOverLayerOpenDuel)))}))}try{const t=await fetch("/api/clashdome-game/update-score/"+U.playerAccount+"/"+a+"/"+JSON.stringify(U.actions)+"/"+U.score+"/"+U.credential),e=await t.json();if(U.waitingLayer.destroy(),U.waitingLayer=null,e.error)U.errorLayer=new x("ERROR!",e.error),U.currentScene.add.existing(U.errorLayer);else if(e.expired){U.expiredGame=!0;const t=new Date,i=new Date(Date.parse(e.date)),n=l.formatTime((t.getTime()-i.getTime())/1e3,!0);let r="Start time: "+i.toLocaleString()+"\n"+l.formatNumber(parseInt(n.h))+"h "+l.formatNumber(parseInt(n.m))+"m ago (duels expire automatically after 2 h)";U.errorLayer=new x("SESSION EXPIRED!",r),U.currentScene.add.existing(U.errorLayer)}else U.duelID=e.duelID,U.score=parseInt(e.playerScore),o=Math.floor(e.tPlayer/1e3),U.adversaryScore=null===e.adversaryScore?null:parseInt(e.adversaryScore),h=Math.floor(e.tAdversary/1e3),U.playerMultiplier=e.playerMultiplier,U.hasPlayerVotedLevel=e.hasPlayerVotedLevel,null!==U.adversaryScore?(U.private&&U.adversaryScoreLayer.destroy(),U.gameOverLayerClosedDuel=new A(U.score,o,U.adversaryScore,h),U.currentScene.add.existing(U.gameOverLayerClosedDuel)):(U.gameOverLayerOpenDuel=new S,U.currentScene.add.existing(U.gameOverLayerOpenDuel),U.private&&(U.gameOverLayerOpenDuel.add(U.adversaryScoreLayer),U.adversaryScoreLayer.onAddedToGameOverLayer())),U.private&&U.colyseusManager.sendMessage(F.GAME_OVER,JSON.stringify({username:U.playerAccount,score:U.score,tPlayer:o,tAdversary:h}))}catch(e){U.errorLayer=new x("ERROR!","Dome connection lost.",U.onGameOver,[t],U),U.currentScene.add.existing(U.errorLayer)}}static discardBooster(){U.hasBoosterBeenDiscarded=!0,U.onGameOver()}static async buyBooster(t){if(U.development)return new Promise((t,e)=>{setTimeout(t,1500)}).then((function(){return U.inputsDisabled=!1,U.boosterLayer.destroy(),U.boosterLayer=null,U.enableInputsCallback.apply(U.gameManagerReference,[]),U.hasBoosterBeenPurchased=!0,U.gameOver=!1,localStorage.setItem(U.gameName+"-booster","true"),U.addAction({type:n.PURCHASE_BOOSTER,data:null}),U.purchasedBoosterCallback&&U.purchasedBoosterCallback.apply(U.gameManagerReference,[]),null}));{const e=l.getFormattedTokenBoosterFee(l.getBoosterFee());let i;i=0===U.fee?l.GAME_TITLES[U.gameName]+" booster fee free duel":l.GAME_TITLES[U.gameName]+" booster fee WAX duel";const n=[{account:"clashdometkn",name:"transfer",authorization:[{actor:U.playerAccount,permission:"active"}],data:{from:U.playerAccount,to:"clashdomedll",quantity:e,memo:i}}];try{t||(U.inputsDisabled=!0,"wcw"===U.reactClass.state.wax.type?await U.reactClass.state.wax.api.transact({actions:n},{blocksBehind:3,expireSeconds:30}):"anchor"===U.reactClass.state.wax.type&&await U.reactClass.state.wax.signTransaction({actions:n},{blocksBehind:3,expireSeconds:30}))}catch(t){return U.errorLayer&&(U.errorLayer.destroy(),U.errorLayer=null),U.errorLayer=new x("ERROR!",t.message,U.buyBooster,[],U),U.currentScene.add.existing(U.errorLayer),{error:t.message}}U.inputsDisabled=!1;const r=parseInt(l.GAME_IDS[U.gameName]),s=await fetch("/api/clashdome-game/booster-purchased/"+U.playerAccount+"/"+r+"/"+e+"/"+U.credential),a=await s.json();a.error?(U.errorLayer=new x("ERROR!",a.error),U.currentScene.add.existing(U.errorLayer)):(U.boosterLayer.destroy(),U.boosterLayer=null,U.hasBoosterBeenPurchased=!0,U.gameOver=!1,U.enableInputsCallback.apply(U.gameManagerReference,[]),U.purchasedBoosterCallback.apply(U.gameManagerReference,[]))}}static onErrorWhilePurchasingBooster(){U.inputsDisabled=!0,U.boosterLayer=new M,U.currentScene.add.existing(U.boosterLayer)}static async onReplayGameOver(){U.gameOver=!0,U.gameOverGameCallback.apply(U.gameManagerReference,[]),await U.addReplayGameOverLayer()}static async proceedWithFreeDuel(){U.fee=0,U.freeDuelInfoLayer||(U.freeDuelInfoLayer=new B,U.currentScene.add.existing(U.freeDuelInfoLayer)),U.freeDuelInfoLayer.setProgressMessage("LOOKING FOR A RIVAL\nWITH SIMILAR SKILLS");const t=parseInt(l.GAME_IDS[U.gameName]);if(U.development){U.duelSeed=Math.round(1e8*Math.random()),U.duelID=123456,U.adversaryScore=null,U.adversaryAccount=null,U.credential=654321,U.landID=U.landID?U.landID:0,U.devPRNG=new u(U.duelID),U.seedsCounter=0,U.date=(new Date).toString(),await b.fetchLevelData();const t=[{type:"start game",data:{seed:U.duelID}}];return localStorage.setItem(U.gameName+"-actions",JSON.stringify(t)),localStorage.setItem(U.gameName+"-duelSeed",U.duelSeed.toString()),localStorage.setItem(U.gameName+"-seedsCounter",U.seedsCounter.toString()),localStorage.setItem(U.gameName+"-date",U.date),localStorage.setItem(U.gameName+"-fee",U.fee.toString()),localStorage.setItem(U.gameName+"-landID",U.landID.toString()),new Promise((function(t,e){setTimeout(t,500)})).then((function(){U.freeDuelInfoLayer.onDuelReady()}))}{const e=[{account:"clashdomedll",name:"startsession",authorization:[{actor:U.playerAccount,permission:"active"}],data:{account:U.playerAccount,game:t}}];try{"wcw"===U.reactClass.state.wax.type?await U.reactClass.state.wax.api.transact({actions:e},{blocksBehind:3,expireSeconds:30}):"anchor"===U.reactClass.state.wax.type&&await U.reactClass.state.wax.signTransaction({actions:e},{blocksBehind:3,expireSeconds:30})}catch(t){return U.errorLayer&&(U.errorLayer.destroy(),U.errorLayer=null),U.errorLayer=new x("ERROR!",t.message,U.proceedWithFreeDuel,[],U),void U.currentScene.add.existing(U.errorLayer)}try{const e=await l.fetchWithTimeout("/api/clashdome-game/get-duel-id-and-seed/"+U.playerAccount+"/"+t+"/0.0000 LUDIO/"+U.landID+"/"+U.countryCode,{timeout:15e3}),i=await e.json();if(200!==e.status)return U.errorLayer&&(U.errorLayer.destroy(),U.errorLayer=null),U.errorLayer=new x("ERROR!",i.error,U.proceedWithFreeDuel,[],U),void U.currentScene.add.existing(U.errorLayer);U.duelID=i.duelID,U.landID=i.landID,U.duelSeed=parseInt(i.seed),i.levelData&&(U.levelData=JSON.parse(i.levelData)),U.adversaryScore=parseInt(i.adversaryScore),U.adversaryAccount=i.adversaryAccount,U.credential=i.credential,U.freeDuelInfoLayer.setProgressMessage("SEED: "+U.duelSeed),U.freeDuelInfoLayer.onDuelReady()}catch(t){null===U.duelID&&null===U.errorLayer&&(U.freeDuelInfoLayer&&(U.freeDuelInfoLayer.destroy(),U.freeDuelInfoLayer=null),U.errorLayer=new x("ERROR!","The Dome failed to provide a rival.",U.proceedWithFreeDuel,[],U,"RETRY"),U.currentScene.add.existing(U.errorLayer))}}}static async proceedWithPrivateDuel(t){if(U.feeStr=t,-1!==t.indexOf("WAX")){const e=t.replace(" WAX","");U.fee=parseFloat(e)}else{const e=t.replace(" CDJIGO","");U.fee=parseFloat(e)}U.paymentLayerPrivateDuel.visible=!0,U.paymentLayerPrivateDuel.setProgressMessage("CREATING PRIVATE DUEL");const e=await U.getPrivateDuelIDAndSeed();e.error||(U.duelID=e.duelID,U.landID=e.landID,U.duelSeed=e.seed,U.isSecondPlayer=e.isSecondPlayer,U.credential=e.credential,U.paymentLayerPrivateDuel.destroy(),U.paymentLayerPrivateDuel=null,U.waitingPrivateLayer=new z,U.currentScene.add.existing(U.waitingPrivateLayer))}static async proceedWithPrivateDuelInvitation(){let t=await fetch("/api/clashdome-game/check-join-private-duel/"+U.duelID);if((await t.json()).value){const t=await U.getPrivateDuelIDAndSeed();t.error||(U.duelID=t.duelID,U.landID=t.landID,U.duelSeed=t.seed,U.isSecondPlayer=t.isSecondPlayer,U.credential=t.credential,U.startDuel())}else U.errorLayer&&(U.errorLayer.destroy(),U.errorLayer=null),U.errorLayer=new x("ERROR!","THIS DUEL CAN'T BE JOINED.",U.proceedWithPrivateDuelInvitation,[!1],U),U.currentScene.add.existing(U.errorLayer)}static async cancelPrivateDuelInvitation(){try{const t=parseInt(l.GAME_IDS[U.gameName]),e=[{account:"clashdomedll",name:"startsession",authorization:[{actor:U.playerAccount,permission:"active"}],data:{account:U.playerAccount,game:t}}];let i;"wcw"===U.reactClass.state.wax.type?i=await U.reactClass.state.wax.api.transact({actions:e},{blocksBehind:3,expireSeconds:30}):"anchor"===U.reactClass.state.wax.type&&(i=await U.reactClass.state.wax.signTransaction({actions:e},{blocksBehind:3,expireSeconds:30}));let n=await fetch("/api/clashdome-game/reject-duel/"+U.playerAccount+"/"+U.duelID+"/"+t),r=await n.json();r.error?(U.errorLayer&&(U.errorLayer.destroy(),U.errorLayer=null),U.errorLayer=new x("ERROR!",r.error,U.cancelPrivateDuelInvitation,[],U),U.currentScene.add.existing(U.errorLayer)):U.onRestart()}catch(t){U.errorLayer&&(U.errorLayer.destroy(),U.errorLayer=null),U.errorLayer=new x("ERROR!",t.message,U.cancelPrivateDuelInvitation,[],U),U.currentScene.add.existing(U.errorLayer)}}static startDuel(){U.acceptPrivateLayer&&(U.acceptPrivateLayer.destroy(),U.acceptPrivateLayer=null),U.paymentLayerPrivateDuel&&(U.paymentLayerPrivateDuel.destroy(),U.paymentLayerPrivateDuel=null),U.freeDuelInfoLayer&&(U.freeDuelInfoLayer.destroy(),U.freeDuelInfoLayer=null),U.startGameCallback.apply(U.startGameCallbackScope,[])}static onGameStarted(){U.private&&(U.adversaryScoreLayer=new G,U.currentScene.add.existing(U.adversaryScoreLayer))}static onRestart(){U.actions=[],U.seedsCounter=0,U.duelID=null,U.gameOver=!1,U.credential=null,U.score=0,U.adversaryScore=null,U.adversaryNick=null,U.adversaryAccount=null,U.skipLayerShown=!1,U.resumedGame=!1,U.expiredGame=!1,U.isSkipPossible=!0,U.hasBoosterBeenPurchased=!1,U.hasBoosterBeenDiscarded=!1,U.duelSeed=null,U.gameOverLayerClosedDuel=null,U.weeklyHighScoreShown=!1,U.allTimeHighScoreShown=!1,U.private=!1,U.isSecondPlayer=null;const t=new URLSearchParams(window.location.search);U.landID=parseInt(t.get("land"))||0,U.duelID=parseInt(t.get("duelID"))||null,U.enableInputsCallback.apply(U.gameManagerReference,[]),U.goToHomeScene()}static restartReplay(){U.gameOver=!1,U.currentScene.scene.restart()}static goToHomeScene(){U.goToHomeCallback.apply(U.gameManagerReference,[])}static async showPaymentLayer(t,e){if(U.startGameCallback=t,U.startGameCallbackScope=e,l.getPlayersAvatarUrls([U.playerAccount],U.loadPlayerAvatars,U),l.getPlayerNick(U.playerAccount,s.PLAYER),U.adversaryAccount&&(l.getPlayersAvatarUrls([U.adversaryAccount],U.loadPlayerAvatars,U),l.getPlayerNick(U.adversaryAccount,s.ADVERSARY)),U.private){if(!U.adversaryAccount)return U.errorLayer=new x("ERROR!","Private duels require the username of the opponent. Go to your friendo HUB to send a new invitation.",null,[],U),void U.currentScene.add.existing(U.errorLayer);U.paymentLayerPrivateDuel=new Y,U.currentScene.add.existing(U.paymentLayerPrivateDuel);let t=!1;0!==U.landID&&(t=await l.doesPlayerOwnLand()),0===U.landID||t||U.paymentLayerPrivateDuel.disableButtons()}else U.proceedWithFreeDuel()}static onReplayStart(t){U.replayInfoLayer=new k(t),U.currentScene.add.existing(U.replayInfoLayer)}static onClickPlay(){U.startGameCallback.apply(U.startGameCallbackScope,[])}static async onAdversaryJoined(){if(U.waitingPrivateLayer&&U.private){const t=parseInt(l.GAME_IDS[U.gameName]),e=await fetch("/api/clashdome-game/create-private-ongoing/"+U.duelID+"/"+U.playerAccount+"/"+t),i=await e.json();U.credential=i.credential,U.waitingPrivateLayer&&(U.waitingPrivateLayer.destroy(),U.waitingPrivateLayer=null),U.startGameCallback.apply(U.startGameCallbackScope,[])}}static loadPlayerAvatars(t){if(0!==t.length){for(let e=0;e<t.length;e++)t[e].url&&U.currentScene.load.image("avatar-"+t[e].account,t[e].url);U.currentScene.load.once("complete",(function(){U.private&&U.restoredGameLayer&&U.restoredGameLayer.onAdversaryAvatarLoaded(),U.gameOverLayerClosedDuel&&U.gameOverLayerClosedDuel.onPlayersAvatarsLoaded(),U.gameOverLayerOpenDuel&&U.gameOverLayerOpenDuel.onPlayersAvatarsLoaded(),U.acceptPrivateLayer&&U.acceptPrivateLayer.onAdversaryAvatarLoaded(t[0].account),U.paymentLayerPrivateDuel&&U.paymentLayerPrivateDuel.onAdversaryAvatarLoaded(),U.waitingPrivateLayer&&U.waitingPrivateLayer.onAdversaryAvatarLoaded()})),U.currentScene.load.start()}else U.gameOverLayerClosedDuel&&U.gameOverLayerClosedDuel.onPlayersAvatarsLoaded()}static async addWaitingLayer(){return new Promise((t,e)=>{setTimeout(t,U.gameOverMenuDelay)}).then((function(){U.waitingLayer=new O(U.currentScene),U.currentScene.add.existing(U.waitingLayer)}))}static async addReplayGameOverLayer(){return new Promise((t,e)=>{setTimeout(t,U.gameOverMenuDelay)}).then((function(){U.gameOverLayerReplay=new P,U.currentScene.add.existing(U.gameOverLayerReplay)}))}static async getPrivateDuelIDAndSeed(t){const e=parseInt(l.GAME_IDS[U.gameName]);if(U.inputsDisabled=!0,U.development){const t=Math.round(1e8*Math.random()),e=123456,i=654321,n=U.landID?U.landID:1;U.devPRNG=new u(t),U.seedsCounter=0,U.date=(new Date).toString();const r=[{type:"start game",data:{seed:t}}];return localStorage.setItem(U.gameName+"-actions",JSON.stringify(r)),localStorage.setItem(U.gameName+"-duelSeed",t.toString()),localStorage.setItem(U.gameName+"-seedsCounter",U.seedsCounter.toString()),localStorage.setItem(U.gameName+"-date",U.date),localStorage.setItem(U.gameName+"-fee",U.fee.toString()),localStorage.setItem(U.gameName+"-landID",U.landID.toString()),new Promise((function(t,e){setTimeout(t,500)})).then((function(){return U.inputsDisabled=!1,{duelID:e,landID:n,seed:t,adversaryScore:0,adversaryAccount:U.adversaryAccount,credential:i}}))}{let i;i=-1===U.feeStr.indexOf("WAX")?[{account:"clashdometkn",name:"transfer",authorization:[{actor:U.playerAccount,permission:"active"}],data:{from:U.playerAccount,to:"clashdomedll",quantity:U.feeStr,memo:l.GAME_TITLES[U.gameName]+" private duel setup fee"}}]:[{account:"eosio.token",name:"transfer",authorization:[{actor:U.playerAccount,permission:"active"}],data:{from:U.playerAccount,to:"clashdomedll",quantity:U.feeStr,memo:l.GAME_TITLES[U.gameName]+" private duel fee"}}];try{t||("wcw"===U.reactClass.state.wax.type?await U.reactClass.state.wax.api.transact({actions:i},{blocksBehind:3,expireSeconds:30}):"anchor"===U.reactClass.state.wax.type&&await U.reactClass.state.wax.signTransaction({actions:i},{blocksBehind:3,expireSeconds:30}))}catch(t){return U.errorLayer&&(U.errorLayer.destroy(),U.errorLayer=null),U.errorLayer=new x("ERROR!",t.message,U.getPrivateDuelIDAndSeed,[!1],U),U.currentScene.add.existing(U.errorLayer),{error:t.message}}try{const t=await l.fetchWithTimeout("/api/clashdome-game/join-private-duel/"+U.playerAccount+"/"+e+"/"+U.feeStr+"/"+U.landID+"/"+U.countryCode+"/"+U.adversaryAccount+"/"+U.duelID,{timeout:15e3}),i=await t.json();return i.error?(U.errorLayer=new x("ERROR!",i.error,U.getPrivateDuelIDAndSeed,[!1],U),U.currentScene.add.existing(U.errorLayer),{error:i.error}):(await U.colyseusManager.joinOrCreateRoom(i.roomId,U.playerAccount),U.inputsDisabled=!1,{duelID:i.duelID,landID:i.landID,seed:i.seed,isSecondPlayer:i.isSecondPlayer,credential:i.credential})}catch(t){return U.errorLayer=new x("ERROR!",t.message,U.getPrivateDuelIDAndSeed,[!0],U),U.currentScene.add.existing(U.errorLayer),{error:"server doesn't respond to open private duel"}}}}}U.VERSION="0.4.3";class X{constructor(t){console.log("ClashDomeMessageClient:","started"),this._callbacks=t,this._onStartGame=this._onStartGame.bind(this),this._onLoginSuccess=this._onLoginSuccess.bind(this),this._onCustomEvent=this._onCustomEvent.bind(this),this._onDisposeGame=this._onDisposeGame.bind(this),this._customEventListeners=[],window.addEventListener("start-game",this._onStartGame),window.addEventListener("login-success",this._onLoginSuccess),window.addEventListener("clashdome-server-event",this._onCustomEvent),window.addEventListener("dispose-game",this._onDisposeGame)}dispatchGameStarted(t){console.log("ClashDomeMessageClient:","dispatchGameStarted");const e=new Event("game-started");e.game=t,window.dispatchEvent(e)}dispatchMessageToWeb(t){console.log("ClashDomeMessageClient:","dispatchMessageToWeb",t);const e=new Event("clashdome-client-event");e.data=t,window.dispatchEvent(e)}addCustomEventListener(t,e,i){this._customEventListeners.push({id:t,callback:e,context:i})}removeCustomEventListener(t){const e=this._customEventListeners.findIndex(e=>e.id===t);this._customEventListeners.splice(e,1)}removeCustomEventListeners(){this._customEventListeners=[]}_onStartGame(t){console.log("ClashDomeMessageClient:","_onStartGame",t),this._callbacks.onStartGame(t.reactClass),window.removeEventListener("start-game",this._onStartGame)}_onDisposeGame(){window.removeEventListener("start-game",this._onStartGame),window.removeEventListener("login-success",this._onLoginSuccess),window.removeEventListener("clashdome-server-event",this._onCustomEvent),window.removeEventListener("dispose-game",this._onDisposeGame)}_onLoginSuccess(){console.log("ClashDomeMessageClient:","_onLoginSuccess"),this._callbacks.onLoginSuccess(),window.removeEventListener("login-success",this._onLoginSuccess)}_onCustomEvent(t){console.log("ClashDomeMessageClient:","custom-event:",t),this._customEventListeners.forEach(e=>{e.id===t.data.id&&e.callback.call(e.context,t.data.payload)})}}i.d(e,"ActionType",(function(){return n})),i.d(e,"DataType",(function(){return o})),i.d(e,"SDK",(function(){return U})),i.d(e,"Utils",(function(){return l})),i.d(e,"ClashDomeMessageClient",(function(){return X})),i.d(e,"DataManager",(function(){return b}))},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(7),s=function(){function t(){}return t.init=function(){t.howl.mute(n.GameVars.gameData.muted),t.lastEffectPlayed=null,t.loopID=null,t.loopKey=null},t.toggleAudioState=function(){n.GameVars.gameData.muted=!n.GameVars.gameData.muted,r.GameManager.writeGameData(),t.howl&&t.howl.mute(n.GameVars.gameData.muted)},t.mute=function(){null!==t.howl&&t.howl.mute(!0)},t.unmute=function(){null!==t.howl&&(n.GameVars.gameData.muted||t.howl.mute(!1))},t.playSound=function(e,i,n,r,s){var a=(new Date).getTime();if(!(a-t.timeLastEffectPlayed<100&&t.lastEffectPlayed===e||i&&t.loopKey===e)){t.timeLastEffectPlayed=a,t.lastEffectPlayed=e,i=i||!1,n=n||1;var o=t.howl.play(e);return t.howl.volume(n,o),i&&(t.loopKey=e,t.loopID&&t.howl.stop(t.loopID),t.loopID=o,t.howl.loop(!0,t.loopID)),r&&t.howl.rate(r,o),s&&t.howl.seek(s,o),o}},t.stopSound=function(e){t.howl.stop(e)},t.setLoopVolume=function(e,i){t.howl.fade(e,i,500,t.loopID)},t.stopLoop=function(e){var i=t.loopID||e;i&&t.howl.fade(1,0,1e3,i)},t.onBlur=function(){!n.GameVars.gameData.muted&&t.howl&&t.howl.mute(!0)},t.onFocus=function(){!n.GameVars.gameData.muted&&t.howl&&t.howl.mute(!1)},t.howl=null,t}();e.AudioManager=s},function(t,e,i){"use strict";var n,r,s;i.r(e),function(t){t.SOLID="ball solid",t.STRIPED="ball striped",t.BLACK="ball black",t.NONE="ball none"}(n||(n={})),function(t){t.BALL="ball",t.LINE="line",t.POCKET="pocket",t.VERTEX="vertex"}(r||(r={})),function(t){t.START_GAME="start game",t.SHOT="shot",t.SET_SEED="set seed",t.PURCHASE_BOOSTER="purchase booster",t.SKIP_GAME="skip game",t.LEAVE_GAME="leave game"}(s||(s={}));class a{constructor(t,e){this.x=t||0,this.y=e||0}static interpolate(t,e,i){return new a(o.fixNumber((1-i)*t.x+i*e.x),o.fixNumber((1-i)*t.y+i*e.y))}equals(t){return this.x===t.x&&this.y===t.y}}class o{static fixNumber(t,e){let i;return i=e?3===e?isNaN(t)?0:Math.floor(1e3*t)/1e3:4===e?isNaN(t)?0:Math.floor(1e4*t)/1e4:5===e?isNaN(t)?0:Math.floor(1e5*t)/1e5:isNaN(t)?0:Math.floor(1e6*t)/1e6:isNaN(t)?0:Math.floor(1e5*t)/1e5,i}static getTangents(t,e,i,n){let r=t.x,s=t.y,o=i.x,h=i.y,l=(r-o)*(r-o)+(s-h)*(s-h);if(l<=(e-n)*(e-n))return null;let u=Math.sqrt(l),c=(o-r)/u,d=(h-s)/u,f=[[],[],[],[]],p=0;for(let t=1;t>=-1;t-=2){let i=(e-t*n)/u;if(i*i<=1){let a=Math.sqrt(Math.max(0,1-i*i));for(let l=1;l>=-1;l-=2){let u=c*i-l*a*d,g=d*i+l*a*c,m=f[p++];m[0]=r+e*u,m[1]=s+e*g,m[2]=o+t*n*u,m[3]=h+t*n*g}}}return{externTangent1:{p1:new a(f[0][0],f[0][1]),p2:new a(f[0][2],f[0][3])},externTangent2:{p1:new a(f[1][0],f[1][1]),p2:new a(f[1][2],f[1][3])},internTangent1:{p1:new a(f[2][0],f[2][1]),p2:new a(f[2][2],f[2][3])},internTangent2:{p1:new a(f[3][0],f[3][1]),p2:new a(f[3][2],f[3][3])}}}static lineIntersectLine(t,e,i,n,r){let s=e.y-t.y,h=t.x-e.x,l=e.x*t.y-t.x*e.y,u=n.y-i.y,c=i.x-n.x,d=n.x*i.y-i.x*n.y,f=s*c-u*h;if(0===f)return null;let p=new a((h*d-c*l)/f,(u*l-s*d)/f);return p.x=o.fixNumber(p.x,r),p.y=o.fixNumber(p.y,r),o.fixNumber((p.x-t.x)*(p.x-e.x),r)>0||o.fixNumber((p.y-t.y)*(p.y-e.y),r)>0||o.fixNumber((p.x-i.x)*(p.x-n.x),r)>0||o.fixNumber((p.y-i.y)*(p.y-n.y),r)>0?null:p}static lineIntersectCircle(t,e,i,n,r){let s={inside:!1,tangent:!1,intersects:!1,enter:null,exit:null},h=(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y),l=2*((e.x-t.x)*(t.x-i.x)+(e.y-t.y)*(t.y-i.y)),u=i.x*i.x+i.y*i.y+t.x*t.x+t.y*t.y-2*(i.x*t.x+i.y*t.y)-n*n,c=o.fixNumber(l*l-4*h*u,r);if(c<=0)s.inside=!1;else{let i=o.fixNumber(Math.sqrt(c),r),n=o.fixNumber((-l+i)/(2*h),r),u=o.fixNumber((-l-i)/(2*h),r);(n<0||n>1)&&(u<0||u>1)?s.inside=!(n<0&&u<0||n>1&&u>1):(0<=u&&u<=1&&(s.enter=a.interpolate(t,e,u),s.enter=new a(o.fixNumber(s.enter.x,r),o.fixNumber(s.enter.y,r))),0<=n&&n<=1&&(s.exit=a.interpolate(t,e,n),s.exit=new a(o.fixNumber(s.exit.x,r),o.fixNumber(s.exit.y,r))),s.intersects=!0,null!==s.exit&&null!==s.enter&&s.exit.equals(s.enter)&&(s.tangent=!0))}return s}static findBearing(t,e){let i=o._180_DIV_PI*Math.atan2(e,t);return o.fixNumber(i)}static angleDiff(t,e){let i=o.wrapValue(t+180-e)-180;return o.fixNumber(i)}static wrapValue(t){return t>360&&(t-=360),t<0&&(t+=360),t}static createVectorFrom2Points(t,e){return new h(e.x-t.x,e.y-t.y)}static checkObjectsConverging(t,e,i,n,r,s){let a=e.minus(t).normalize(),h=n.minus(i);return h.angleBetween(a)>o.PI_2||0===h.angleBetween(a)}static shuffleArray(t,e,i){let n;n=i?JSON.parse(JSON.stringify(t)):t;let r,s,a=n.length;for(;0!==a;)s=Math.floor(e.getRandom()*a),a-=1,r=n[a],n[a]=n[s],n[s]=r;return n}static cloneBallsArray(t){const e=[];for(let i=0;i<t.length;i++){const n=t[i],r=new l(n.id,n.position.x,n.position.y);e.push(r)}return e}}o._180_DIV_PI=57.29578,o.PI_DIV_180=.01745329,o.PI_2=1.570796;class h{constructor(t,e){this.xValue=o.fixNumber(t),this.yValue=o.fixNumber(e)}plus(t){let e=new h(this.xValue,this.yValue);return e.xValue=o.fixNumber(e.xValue+t.xValue),e.yValue=o.fixNumber(e.yValue+t.yValue),e}minus(t){let e=new h(this.xValue,this.yValue);return e.xValue=o.fixNumber(e.xValue-t.xValue),e.yValue=o.fixNumber(e.yValue-t.yValue),e}times(t){let e=new h(this.xValue,this.yValue);return t instanceof h?(e.xValue*=t.xValue,e.yValue*=t.yValue):(e.xValue*=t,e.yValue*=t),e.xValue=o.fixNumber(e.xValue),e.yValue=o.fixNumber(e.yValue),e}normalize(){let t=new h(this.xValue,this.yValue);return t=t.times(1/t.magnitude),t}dot(t){return o.fixNumber(this.xValue*t.xValue+this.yValue*t.yValue)}angleBetween(t){return o.fixNumber(Math.acos(this.dot(t)/(this.magnitude*t.magnitude)))}getRightNormal(){return new h(this.yValue,-this.xValue)}getLeftNormal(){return new h(-this.yValue,this.xValue)}get x(){return this.xValue}set x(t){this.xValue=o.fixNumber(t)}get y(){return this.yValue}set y(t){this.yValue=o.fixNumber(t)}get magnitude(){return o.fixNumber(Math.sqrt(this.xValue*this.xValue+this.yValue*this.yValue))}get magnitudeSquared(){return o.fixNumber(this.xValue*this.xValue+this.yValue*this.yValue)}}class l{constructor(t,e,i){this.id=t,this.active=!0,this.position=new h(e,i),this.velocity=new h(0,0),this.firstContact=!1,this.contactArray=[],this.collisionsCounter={borders:0,balls:0,distance:0,velocityBeforeContact:null},this.screw=0,this.english=0,this.deltaScrew=new h(0,0),this.grip=0,this.ySpin=0,this.radius=v.BALL_RADIUS}}class u{}u.FORMATION_TRIANGLE="formation triangle",u.FORMATION_V="formation v",u.FORMATION_HEXAGON="formation hexagon",u.TRIANGLES_CENTER=[[{r:0,c:1},{r:1,c:1},{r:-1,c:1}],[{r:0,c:2},{r:1,c:2},{r:-1,c:2}],[{r:0,c:3},{r:1,c:3},{r:-1,c:3}],[{r:0,c:4},{r:1,c:4},{r:-1,c:4}],[{r:0,c:5},{r:1,c:5},{r:-1,c:5}],[{r:0,c:6},{r:1,c:6},{r:-1,c:6}],[{r:0,c:7},{r:1,c:7},{r:-1,c:7}],[{r:1,c:0},{r:0,c:1},{r:-1,c:0}],[{r:1,c:1},{r:0,c:2},{r:-1,c:1}],[{r:1,c:2},{r:0,c:3},{r:-1,c:2}],[{r:1,c:3},{r:0,c:4},{r:-1,c:3}],[{r:1,c:4},{r:0,c:5},{r:-1,c:4}],[{r:1,c:5},{r:0,c:6},{r:-1,c:5}],[{r:1,c:6},{r:0,c:7},{r:-1,c:6}]],u.TRIANGLES_NO_CENTER=[[{r:2,c:0},{r:1,c:0},{r:3,c:0}],[{r:6,c:0},{r:5,c:0},{r:7,c:0}],[{r:10,c:0},{r:9,c:0},{r:11,c:0}],[{r:2,c:1},{r:3,c:1},{r:4,c:1}],[{r:6,c:1},{r:8,c:1},{r:7,c:1}],[{r:10,c:1},{r:12,c:1},{r:11,c:1}],[{r:4,c:2},{r:3,c:2},{r:5,c:2}],[{r:8,c:2},{r:7,c:2},{r:9,c:2}],[{r:12,c:2},{r:11,c:2},{r:13,c:2}],[{r:2,c:3},{r:3,c:3},{r:4,c:3}],[{r:6,c:3},{r:8,c:3},{r:7,c:3}],[{r:10,c:3},{r:12,c:3},{r:11,c:3}],[{r:4,c:4},{r:3,c:4},{r:5,c:4}],[{r:8,c:4},{r:7,c:4},{r:9,c:4}],[{r:12,c:4},{r:11,c:4},{r:13,c:4}],[{r:4,c:5},{r:6,c:5},{r:5,c:5}],[{r:8,c:5},{r:10,c:5},{r:9,c:5}],[{r:4,c:6},{r:3,c:6},{r:5,c:6}],[{r:12,c:6},{r:11,c:6},{r:13,c:6}],[{r:2,c:7},{r:4,c:7},{r:3,c:7}],[{r:6,c:7},{r:8,c:7},{r:7,c:7}]],u.V_CENTER=[{r:0,c:1},{r:0,c:2},{r:0,c:3},{r:0,c:4},{r:0,c:5},{r:0,c:6},{r:0,c:7}],u.V_NO_CENTER_4=[[{r:2,c:0},{r:3,c:0},{r:4,c:1},{r:5,c:1}],[{r:11,c:0},{r:10,c:1},{r:9,c:1},{r:8,c:2}],[{r:1,c:0},{r:2,c:1},{r:3,c:1},{r:4,c:2}],[{r:7,c:1},{r:6,c:2},{r:5,c:2},{r:4,c:3}],[{r:10,c:2},{r:11,c:2},{r:12,c:3},{r:13,c:3}],[{r:7,c:2},{r:6,c:3},{r:5,c:3},{r:4,c:4}],[{r:7,c:3},{r:8,c:4},{r:9,c:4},{r:10,c:5}],[{r:13,c:4},{r:12,c:5},{r:11,c:5},{r:10,c:6}],[{r:6,c:4},{r:5,c:4},{r:4,c:5},{r:3,c:5}],[{r:7,c:3},{r:8,c:4},{r:9,c:4},{r:10,c:5}],[{r:7,c:4},{r:6,c:5},{r:5,c:5},{r:4,c:6}]],u.V_NO_CENTER_3=[[{r:4,c:0},{r:5,c:0},{r:6,c:1}],[{r:11,c:1},{r:12,c:2},{r:13,c:2}],[{r:6,c:0},{r:7,c:0},{r:8,c:1}],[{r:9,c:2},{r:10,c:3},{r:11,c:3}],[{r:8,c:3},{r:9,c:3},{r:10,c:4}],[{r:3,c:4},{r:2,c:5},{r:1,c:5}],[{r:12,c:6},{r:11,c:6},{r:10,c:7}],[{r:8,c:5},{r:7,c:5},{r:6,c:6}],[{r:5,c:6},{r:6,c:7},{r:7,c:7}],[{r:2,c:6},{r:3,c:6},{r:4,c:7}],[{r:1,c:1},{r:2,c:2},{r:3,c:2}],[{r:7,c:6},{r:8,c:7},{r:9,c:7}]],u.V_HEXAGON=[[{r:4,c:0},{r:3,c:0},{r:4,c:1},{r:6,c:1},{r:7,c:0},{r:6,c:0}],[{r:9,c:0},{r:8,c:1},{r:9,c:1},{r:11,c:1},{r:12,c:1},{r:11,c:0}],[{r:10,c:2},{r:12,c:2},{r:9,c:2},{r:10,c:3},{r:12,c:3},{r:13,c:2}],[{r:7,c:2},{r:5,c:2},{r:4,c:2},{r:5,c:1},{r:7,c:1},{r:8,c:2}],[{r:8,c:4},{r:9,c:4},{r:11,c:4},{r:12,c:4},{r:11,c:3},{r:9,c:3}],[{r:3,c:3},{r:5,c:3},{r:2,c:4},{r:3,c:4},{r:5,c:4},{r:6,c:4}],[{r:9,c:5},{r:10,c:5},{r:12,c:5},{r:13,c:5},{r:12,c:6},{r:10,c:6}],[{r:3,c:5},{r:4,c:5},{r:6,c:5},{r:7,c:5},{r:6,c:6},{r:4,c:6}],[{r:3,c:6},{r:2,c:7},{r:3,c:7},{r:5,c:7},{r:6,c:7},{r:5,c:6}],[{r:8,c:7},{r:9,c:7},{r:11,c:7},{r:12,c:7},{r:11,c:6},{r:9,c:6}]];class c{static getBallsArray(t){const e=t.getRandom();let i;i=e>.66?u.FORMATION_HEXAGON:e>.33?u.FORMATION_TRIANGLE:u.FORMATION_V;const n=[new l(0,-21e3,0)];let r,s,a;const h=1.05*v.BALL_RADIUS;if(i===u.FORMATION_HEXAGON){let e=o.shuffleArray(u.TRIANGLES_CENTER,t,!0)[0];for(let i=0;i<e.length;i++)s=e[i].c*(4*h*Math.cos(Math.PI/6))+h,a=e[i].r*h,e[i].r%2&&(s+=2*h*Math.cos(Math.PI/6)),s+=.025-.05*t.getRandom(),a+=.025-.05*t.getRandom(),r=new l(n.length+1,s,a),n.push(r);const i=o.shuffleArray(u.V_HEXAGON,t,!0);for(let e=0;e<i[0].length;e++)s=i[0][e].c*(4*h*Math.cos(Math.PI/6))+h,a=i[0][e].r*h,i[0][e].r%2&&(s+=2*h*Math.cos(Math.PI/6)),s+=.025-.05*t.getRandom(),a+=.025-.05*t.getRandom(),r=new l(n.length+1,s,a),n.push(r),r=new l(n.length+1,s,-a),n.push(r)}if(i===u.FORMATION_V){s=o.shuffleArray(u.V_CENTER,t,!0)[0].c*(4*h*Math.cos(Math.PI/6))+h,a=0,s+=.025-.05*t.getRandom(),a+=.025-.05*t.getRandom(),r=new l(n.length+1,s,a),n.push(r);const e=o.shuffleArray(u.V_NO_CENTER_4,t,!0);for(let i=0;i<e[0].length;i++)s=e[0][i].c*(4*h*Math.cos(Math.PI/6))+h,a=e[0][i].r*h,e[0][i].r%2&&(s+=2*h*Math.cos(Math.PI/6)),s+=.025-.05*t.getRandom(),a+=.025-.05*t.getRandom(),r=new l(n.length+1,s,a),n.push(r),r=new l(n.length+1,s,-a),n.push(r);const i=o.shuffleArray(u.V_NO_CENTER_3,t,!0);for(let e=0;e<i[0].length;e++)s=i[0][e].c*(4*h*Math.cos(Math.PI/6))+h,a=i[0][e].r*h,i[0][e].r%2&&(s+=2*h*Math.cos(Math.PI/6)),s+=.025-.05*t.getRandom(),a+=.025-.05*t.getRandom(),r=new l(n.length+1,s,a),n.push(r),r=new l(n.length+1,s,-a),n.push(r)}if(i===u.FORMATION_TRIANGLE){let e=o.shuffleArray(u.TRIANGLES_CENTER,t,!0)[0];for(let i=0;i<e.length;i++)s=e[i].c*(4*h*Math.cos(Math.PI/6))+h,a=e[i].r*h,e[i].r%2&&(s+=2*h*Math.cos(Math.PI/6)),s+=.025-.05*t.getRandom(),a+=.025-.05*t.getRandom(),r=new l(n.length+1,s,a),n.push(r);const i=o.shuffleArray(u.TRIANGLES_NO_CENTER,t,!0);for(let o=0;o<2;o++){e=i[o];for(let i=0;i<e.length;i++)s=e[i].c*(4*h*Math.cos(Math.PI/6))+h,a=e[i].r*h,e[i].r%2&&(s+=2*h*Math.cos(Math.PI/6)),s+=.025-.05*t.getRandom(),a+=.025-.05*t.getRandom(),r=new l(n.length+1,s,a),n.push(r),r=new l(n.length+1,s,-a),n.push(r)}}let c=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15];c=o.shuffleArray(c,t,!1);for(let t=1;t<n.length;t++){n[t].id=c[t-1]}return n}static getLinesAndVertexArrays(){const t=[],e=[];let i={name:"AB",direction:null,normal:null,p1:new h(-42e3,-24360),p2:new h(-38640,-21e3),p3:null,p4:null,p5:null,p6:null};e.push(i);let n={name:"B",position:new h(i.p2.x,i.p2.y)};t.push(n),i={name:"BC",direction:null,normal:null,p1:new h(-38640,-21e3),p2:new h(-3360,-21e3),p3:null,p4:null,p5:null,p6:null},e.push(i),n={name:"C",position:new h(i.p2.x,i.p2.y)},t.push(n),i={name:"CD",direction:null,normal:null,p1:new h(-3360,-21e3),p2:new h(-1680,-24360),p3:null,p4:null,p5:null,p6:null},e.push(i),i={name:"EF",direction:null,normal:null,p1:new h(1680,-24360),p2:new h(3360,-21e3),p3:null,p4:null,p5:null,p6:null},e.push(i),n={name:"F",position:new h(i.p2.x,i.p2.y)},t.push(n),i={name:"FG",direction:null,normal:null,p1:new h(3360,-21e3),p2:new h(38640,-21e3),p3:null,p4:null,p5:null,p6:null},e.push(i),n={name:"G",position:new h(i.p2.x,i.p2.y)},t.push(n),i={name:"GH",direction:null,normal:null,p1:new h(38640,-21e3),p2:new h(42e3,-24360),p3:null,p4:null,p5:null,p6:null},e.push(i),i={name:"IJ",direction:null,normal:null,p1:new h(45360,-21e3),p2:new h(42e3,-17640),p3:null,p4:null,p5:null,p6:null},e.push(i),n={name:"J",position:new h(i.p2.x,i.p2.y)},t.push(n),i={name:"JK",direction:null,normal:null,p1:new h(42e3,-17640),p2:new h(42e3,17640),p3:null,p4:null,p5:null,p6:null},e.push(i),n={name:"K",position:new h(i.p2.x,i.p2.y)},t.push(n),i={name:"KL",direction:null,normal:null,p1:new h(42e3,17640),p2:new h(45360,21e3),p3:null,p4:null,p5:null,p6:null},e.push(i),i={name:"MN",direction:null,normal:null,p1:new h(42e3,24360),p2:new h(38640,21e3),p3:null,p4:null,p5:null,p6:null},e.push(i),n={name:"N",position:new h(i.p2.x,i.p2.y)},t.push(n),i={name:"NO",direction:null,normal:null,p1:new h(38640,21e3),p2:new h(3360,21e3),p3:null,p4:null,p5:null,p6:null},e.push(i),n={name:"O",position:new h(i.p2.x,i.p2.y)},t.push(n),i={name:"OP",direction:null,normal:null,p1:new h(3360,21e3),p2:new h(1680,24360),p3:null,p4:null,p5:null,p6:null},e.push(i),i={name:"QR",direction:null,normal:null,p1:new h(-1680,24360),p2:new h(-3360,21e3),p3:null,p4:null,p5:null,p6:null},e.push(i),n={name:"R",position:new h(i.p2.x,i.p2.y)},t.push(n),i={name:"RS",direction:null,normal:null,p1:new h(-3360,21e3),p2:new h(-38640,21e3),p3:null,p4:null,p5:null,p6:null},e.push(i),n={name:"S",position:new h(i.p2.x,i.p2.y)},t.push(n),i={name:"ST",direction:null,normal:null,p1:new h(-38640,21e3),p2:new h(-42e3,24360),p3:null,p4:null,p5:null,p6:null},e.push(i),i={name:"UV",direction:null,normal:null,p1:new h(-45360,21e3),p2:new h(-42e3,17640),p3:null,p4:null,p5:null,p6:null},e.push(i),n={name:"V",position:new h(i.p2.x,i.p2.y)},t.push(n),i={name:"VW",direction:null,normal:null,p1:new h(-42e3,17640),p2:new h(-42e3,-17640),p3:null,p4:null,p5:null,p6:null},e.push(i),n={name:"W",position:new h(i.p2.x,i.p2.y)},t.push(n),i={name:"WX",direction:null,normal:null,p1:new h(-42e3,-17640),p2:new h(-45360,-21e3),p3:null,p4:null,p5:null,p6:null},e.push(i);for(let t=0;t<e.length;t++){let i=e[t];i.direction=new h(i.p2.x-i.p1.x,i.p2.y-i.p1.y).normalize(),i.normal=i.direction.getLeftNormal();const n=i.normal.times(v.BALL_RADIUS);i.p3=i.p1.plus(n),i.p4=i.p2.plus(n);const r=i.normal.times(.525*v.BALL_RADIUS);i.p5=i.p1.plus(r),i.p6=i.p2.plus(r)}return{lineArray:e,vertexArray:t}}static getPocketArray(){const t=[];let e={id:0,position:new h(-42e3-v.POCKET_RADIUS/4,-21e3-v.POCKET_RADIUS/4),dropPosition:new h(-42840-v.POCKET_RADIUS/2,-21840-v.POCKET_RADIUS/4)};return t.push(e),e={id:1,position:new h(0,-21e3-v.POCKET_RADIUS),dropPosition:new h(0,-21420-v.POCKET_RADIUS)},t.push(e),e={id:2,position:new h(42e3+v.POCKET_RADIUS/4,-21e3-v.POCKET_RADIUS/4),dropPosition:new h(42840+v.POCKET_RADIUS/2,-21840-v.POCKET_RADIUS/4)},t.push(e),e={id:3,position:new h(42e3+v.POCKET_RADIUS/4,21e3+v.POCKET_RADIUS/4),dropPosition:new h(42840+v.POCKET_RADIUS/2,21840+v.POCKET_RADIUS/4)},t.push(e),e={id:4,position:new h(0,21e3+v.POCKET_RADIUS),dropPosition:new h(0,21420+v.POCKET_RADIUS)},t.push(e),e={id:5,position:new h(-42e3-v.POCKET_RADIUS/4,21e3+v.POCKET_RADIUS/4),dropPosition:new h(-42840-v.POCKET_RADIUS/2,21840+v.POCKET_RADIUS/4)},t.push(e),t}}class d{constructor(){this.ballsArray=[],this.partialPocketedBalls=0,this.totalTicks=0,this.partialTick=null,this.cannonsCounter=0}setBallsArray(t){this.ballsArray=t}onShot(t,e){this.isBreakingShot=e,this.partialPocketedBalls=0,this.partialTick=null;for(let t=0;t<this.ballsArray.length;t++){const e=this.ballsArray[t];e.collisionsCounter.borders=0,e.collisionsCounter.balls=0,e.collisionsCounter.distance=0}}onTurnCompleted(t){this.partialPocketedBalls>0&&(this.totalTicks+=t-this.partialTick)}onContactBallBall(t,e){t.collisionsCounter.balls++,e.collisionsCounter.balls+=t.collisionsCounter.balls,e.collisionsCounter.borders+=t.collisionsCounter.borders,e.collisionsCounter.distance+=t.collisionsCounter.distance}onContactBallBorder(t,e){const i=e.p1.x-e.p2.x,n=e.p1.y-e.p2.y;0!==i&&0!==n||t.velocity.angleBetween(t.collisionsCounter.velocityBeforeContact)>.175&&t.collisionsCounter.borders++}onBallPocketed(t,e){0!==t.id&&(1.5*t.collisionsCounter.borders+t.collisionsCounter.balls>2&&t.collisionsCounter.distance/42e3>1.25&&!this.isBreakingShot&&this.cannonsCounter++,this.partialTick=e,this.partialPocketedBalls++)}}class f{constructor(t,e){this.type=t,this.params=e||null}getParams(){return this.params}getType(){return this.type}}f.CONTACT="contact",f.TURN_COMPLETED="turn completed",f.CUE_BALL_RESTITUTED="cue ball restituted",f.ALL_BALLS_RESTITUTED="all balls restituted",f.CUEBALL_COLLISION_WITH_BORDER="cue ball collision with border",f.COMBO="combo",f.GAME_OVER="game over";class p{constructor(){this.listeners=[]}hasEventListener(t,e){let i=!1;for(let n=0;n<this.listeners.length;n++)this.listeners[n].type===t&&this.listeners[n].listenerFunction===e&&(i=!0);return i}addEventListener(t,e,i){this.hasEventListener(t,e)||this.listeners.push({type:t,listenerFunction:e,scope:i})}removeEventListener(t,e){for(let i=0;i<this.listeners.length;i++)if(this.listeners[i].type===t&&this.listeners[i].listenerFunction===e){this.listeners.splice(i,1);break}}dispatchEvent(t){for(let e=0;e<this.listeners.length;e++)if(this.listeners[e].type===t.getType()){this.listeners[e].listenerFunction.apply(this.listeners[e].scope,t.getParams());break}}}class g{constructor(t){this.engine=t,this.ballRestitution=v.BALL_RESTITUTION,this.cushionRestitution=v.CUSHION_RESTITUTION,this.friction=v.FRICTION}randomize(){const t=this.engine.prng;this.engine.precision=4+Math.floor(3*t.getRandom());const e=this.engine.ballsArray;for(let i=0;i<e.length;i++)e[i].active&&(e[i].radius=o.fixNumber(v.BALL_RADIUS-4*t.getRandom(),this.engine.precision),e[i].position.x=o.fixNumber(e[i].position.x+o.fixNumber(-4*t.getRandom(),this.engine.precision)),e[i].position.y=o.fixNumber(e[i].position.y+o.fixNumber(-4*t.getRandom(),this.engine.precision)));this.engine.ballRestitution=o.fixNumber(this.ballRestitution+.02*t.getRandom(),this.engine.precision),this.engine.cushionRestitution=o.fixNumber(this.cushionRestitution+.025-.05*t.getRandom(),this.engine.precision),this.engine.friction=o.fixNumber(this.friction+.03-.06*t.getRandom(),this.engine.precision),!this.engine.freeGame&&this.engine.turns>0&&(this.engine.contactCounterManager.cannonsCounter>2&&this.blurCollisions(),this.engine.turns>3&&o.fixNumber(this.engine.contactCounterManager.totalTicks/this.engine.turns)<125&&o.fixNumber(this.engine.absoluteTick/this.engine.pocketedBalls)<300&&this.increaseTurnTicks())}blurCollisions(){this.engine.dV=o.fixNumber(this.engine.dV+.01,this.engine.precision),this.engine.dV>.065&&(this.engine.dV=.065)}increaseTurnTicks(){this.ballRestitution=o.fixNumber(1.02*this.ballRestitution,this.engine.precision),this.ballRestitution>.975&&(this.ballRestitution=.975),this.cushionRestitution=o.fixNumber(1.02*this.cushionRestitution,this.engine.precision),this.cushionRestitution>.85&&(this.cushionRestitution=.85),this.friction=o.fixNumber(this.friction/1.02,this.engine.precision),this.friction<.75&&(this.friction=.75)}}class m{constructor(t){this.engine=t,this.engine.score=0,this.pocketMultiplier_ID=0,this.lastPocketMultiplier_ID=0,this.pocketMultiplier=1,this.pocketedBallsCounter=0}setBallsPoints(){const t=o.shuffleArray(m.BALLS_POINTS,this.engine.prng,!0);this.pointsSolidBalls=t[0][0],this.pointsStripedBalls=t[0][1],this.pointsBlackBall=2*Math.max(this.pointsSolidBalls,this.pointsStripedBalls)}onTurnCompleted(){0===this.pocketedBallsCounter&&(this.pocketMultiplier=1),this.pocketedBallsCounter=0}onCueBallPocketed(){this.pocketMultiplier=1}onBallPocketed(t,e){if(this.engine.gameOver||this.engine.scoreDisabled)return;let i;i=e<8?this.pointsSolidBalls:e>8?this.pointsStripedBalls:this.pointsBlackBall;let n=0,r=0;for(t.id===this.pocketMultiplier_ID?(n=this.pocketMultiplier*i,r=this.pocketMultiplier*m.DELTA_TICKS_POCKETED_BALL,this.pocketMultiplier+=.5):(n=i,r=m.DELTA_TICKS_POCKETED_BALL),this.pocketedBallsCounter++,this.pocketedBallsCounter>1&&(n*=this.pocketedBallsCounter,r*=this.pocketedBallsCounter,this.engine.eventDispatcher.dispatchEvent(new f(f.COMBO,[this.pocketedBallsCounter]))),this.engine.score+=Math.floor(n),this.engine.tick+=Math.floor(r),this.engine.tick>v.START_TICKS&&(this.engine.tick=v.START_TICKS),this.pocketMultiplier_ID=Math.floor(6*this.engine.prng.getRandom());this.pocketMultiplier_ID===this.lastPocketMultiplier_ID||this.pocketMultiplier_ID===t.id;)this.pocketMultiplier_ID=Math.floor(6*this.engine.prng.getRandom());this.lastPocketMultiplier_ID=this.pocketMultiplier_ID}onNewRack(){this.engine.gameOver||this.engine.scoreDisabled||(this.engine.score+=m.POINTS_COMPLETED_RACK,this.pocketedBallsCounter=0)}onCollisionCueBallWithLine(t,e){this.engine.gameOver||this.engine.scoreDisabled||"BC"!==e.name&&"FG"!==e.name&&"JK"!==e.name&&"NO"!==e.name&&"RS"!==e.name&&"VW"!==e.name||(this.engine.score+=m.POINTS_COLLISION_CUE_BALL_BORDERS,this.engine.eventDispatcher.dispatchEvent(new f(f.CUEBALL_COLLISION_WITH_BORDER,[t,e.name,!0])))}onCollisionCueBallWithVertex(t){this.engine.gameOver||this.engine.scoreDisabled||(this.engine.score+=m.POINTS_COLLISION_CUE_BALL_BORDERS,this.engine.eventDispatcher.dispatchEvent(new f(f.CUEBALL_COLLISION_WITH_BORDER,[t.position,t.name,!1])))}}m.POINTS_COMPLETED_RACK=150,m.POINTS_COLLISION_CUE_BALL_BORDERS=5,m.COMBO_DELTA_TICKS=60,m.DELTA_TICKS_POCKETED_BALL=45,m.BALLS_POINTS=[[60,45],[50,30],[45,20],[55,15],[65,25],[25,5],[45,60],[30,50],[20,45],[15,55],[25,65],[5,25]];class y{constructor(t){this._seed=t||12345,this._seed=Math.imul(741103597,this._seed)>>>0}set seed(t){this._seed=t,this._seed=Math.imul(741103597,this._seed)>>>0}getRandom(){return this._seed=Math.imul(741103597,this._seed)>>>0,Math.floor(this._seed/2**32*1e5)/1e5}}class v{constructor(){console.log("Rug Pool Engine v"+v.VERSION)}init(t,e){this.freeGame=e,this.tick=v.START_TICKS,this.absoluteTick=0,this.pocketedCueBallTicksCounter=0,this.hasCueBallBeenPocketed=!1,this.pocketCueBall_id=null,this.restitutingCueBall=!1,this.ballsMoving=!1,this.gameOver=!1,this.scoreDisabled=!1,this.absoluteTickScoreDisabled=null,this.pocketedBallsIDs=[],this.boosterPurchased=!1,this.rack=1,this.precision=6,this.minVelocity=2,this.friction=v.FRICTION,this.cushionRestitution=v.CUSHION_RESTITUTION,this.ballRestitution=v.BALL_RESTITUTION,this.pocketRadius=2300,this.cueBallPocketSpeed=175,this.turns=0,this.pocketedBalls=0,this.isBreakingShot=!0,this.dV=.015,this.ballsArray=null,this.startBallsArray=null;const i=c.getLinesAndVertexArrays();this.lineArray=i.lineArray,this.vertexArray=i.vertexArray,this.pocketArray=c.getPocketArray(),this.omissionArray=[],this.prng=new y,this.eventDispatcher=new p,this.scoreManager=new m(this),this.randomizer=new g(this),this.contactCounterManager=new d}update(){this.gameOver||(this.tick--,this.absoluteTick++),null!==this.absoluteTickScoreDisabled&&this.absoluteTickScoreDisabled===this.absoluteTick&&(this.absoluteTickScoreDisabled=null,this.disableScore()),this.predictCollisions(),this.updateFriction(),0!==this.tick||this.gameOver||(this.gameOver=!0,this.eventDispatcher.dispatchEvent(new f(f.GAME_OVER,[this.score]))),this.checkBalls()}addEventListener(t,e,i){this.eventDispatcher.addEventListener(t,e,i)}removeEventListener(t,e){this.eventDispatcher.removeEventListener(t,e)}setSeed(t){return null!=t&&!isNaN(t)&&(this.prng.seed=t,this.ballsArray?this.randomizer.randomize():(this.startBallsArray=c.getBallsArray(this.prng),this.ballsArray=o.cloneBallsArray(this.startBallsArray),this.contactCounterManager.setBallsArray(this.ballsArray),this.scoreManager.setBallsPoints()),!0)}disableScore(){return this.scoreDisabled=!0,{tick:this.absoluteTick,score:this.score}}enableScore(){this.scoreDisabled=!1}processActions(t){for(let e=0;e<t.length;e++){const i=t[e].type,n=t[e].data;i!==s.LEAVE_GAME&&i!==s.SKIP_GAME||(this.absoluteTickScoreDisabled=n.tick+1)}for(let e=0;e<t.length;e++){const i=t[e].type,n=t[e].data;let r,a=!0;switch(i){case s.START_GAME:r=n.seed,this.setSeed(r);break;case s.SHOT:const i=t[e+1];if(i.type===s.SET_SEED){r=i.data.seed,this.setSeed(r),e++,this.shoot(n);let t=0;for(;this.ballsMoving&&t<1e4;)this.update(),t++;1e4===t&&console.error("error while processing shot")}else a=!1;break;case s.PURCHASE_BOOSTER:a=this.onBoosterPurchased()}if(!a){console.error("Validator error "+i);break}}}shoot(t){this.turns++,this.ballsMoving=!0;const e=this.ballsArray[0];e.velocity.x=t.cueSpeed.vx,e.velocity.y=t.cueSpeed.vy,e.english=t.english,e.deltaScrew=new h(t.deltaScrew.x,t.deltaScrew.y),this.contactCounterManager.onShot(this.turns,this.isBreakingShot),this.isBreakingShot=!1}onBoosterPurchased(){return 0===this.tick&&!this.boosterPurchased&&(this.boosterPurchased=!0,this.gameOver=!1,this.scoreDisabled=!1,this.tick=v.EXTRA_TICKS_BOOSTER,this.enableScore(),!0)}predictCollisions(){let t=0,e=0,i=[];do{let n,s=1;i.length=0;const l=o.fixNumber(1-t,this.precision);for(let e=0;e<this.ballsArray.length;e++){const u=this.ballsArray[e];if(u.active){u.collisionsCounter.velocityBeforeContact=new h(u.velocity.x,u.velocity.y);const c=u.position.plus(u.velocity.times(l));for(let c=e+1,d=this.ballsArray.length;c<d;c++){const e=this.ballsArray[c];if(u.velocity.magnitudeSquared>0||e.velocity.magnitudeSquared>0){const c=o.checkObjectsConverging(u.position,e.position,u.velocity,e.velocity,u.id,e.id);if(e.active&&c){const c=u.velocity.minus(e.velocity),d=u.position.plus(c.times(l)),f=new a(u.position.x,u.position.y),p=new a(d.x,d.y),g=new a(e.position.x,e.position.y),m=u.radius+e.radius,y=o.lineIntersectCircle(f,p,g,m,this.precision);if(y.intersects||y.inside){let a,c,d;if(null!==y.exit&&(a=y.exit),null!==y.enter&&(a=y.enter),y.intersects){c=new h(a.x,a.y);let e=o.createVectorFrom2Points(f,p),i=o.createVectorFrom2Points(f,a);d=o.fixNumber(t+i.magnitude/e.magnitude*l,this.precision)}if(y.inside){let i=u.position.minus(e.position).normalize();c=e.position.plus(i.times(2*u.radius)),d=t}d<s?(n={type:null,object:null,target:null,time:null,objectIntersectPoint:null,targetIntersectPoint:null},s=d,n.type=r.BALL,n.object=u,n.time=s,y.intersects&&(n.objectIntersectPoint=u.position.plus(u.velocity.times(s-t)),n.targetIntersectPoint=e.position.plus(e.velocity.times(s-t))),y.inside&&(n.objectIntersectPoint=c,n.targetIntersectPoint=e.position),n.target=e,i=[],i.push(n)):d===s&&1!==d&&(n={type:null,object:null,target:null,time:null,objectIntersectPoint:null,targetIntersectPoint:null},s=d,n.type=r.BALL,n.object=u,n.time=s,n.objectIntersectPoint=u.position.plus(u.velocity.times(s-t)),n.target=e,n.targetIntersectPoint=e.position.plus(e.velocity.times(s-t)),y.inside&&(n.objectIntersectPoint=c,n.targetIntersectPoint=e.position),i.push(n))}}}}if(u.velocity.magnitudeSquared>0){for(let e=0,d=this.lineArray.length;e<d;e++){const d=this.lineArray[e];let f=o.lineIntersectLine(new a(u.position.x,u.position.y),new a(c.x,c.y),new a(d.p3.x,d.p3.y),new a(d.p4.x,d.p4.y),this.precision);if(null===f)if(f=o.lineIntersectLine(new a(u.position.x,u.position.y),new a(c.x,c.y),new a(d.p5.x,d.p5.y),new a(d.p6.x,d.p6.y),this.precision),null!==f){let t=new h(f.x,f.y),e=d.normal.times(.475*u.radius),i=t.plus(e);f=new a(i.x,i.y)}else"VW"===d.name&&u.position.x<d.p3.x&&u.position.y<d.p3.y&&u.position.y>d.p4.y||"JK"===d.name&&u.position.x>d.p3.x&&u.position.y>d.p3.y&&u.position.y<d.p4.y?f=new a(d.p3.x,u.position.y):("BC"===d.name&&u.position.y<d.p3.y&&u.position.x>d.p3.x&&u.position.x<d.p4.x||"FG"===d.name&&u.position.y<d.p3.y&&u.position.x>d.p3.x&&u.position.x<d.p4.x||"NO"===d.name&&u.position.y>d.p3.y&&u.position.x<d.p3.x&&u.position.x>d.p4.x||"RS"===d.name&&u.position.y>d.p3.y&&u.position.x<d.p3.x&&u.position.x>d.p4.x)&&(f=new a(u.position.x,d.p3.y));if(null!==f){const e=new h(f.x,f.y),a=o.createVectorFrom2Points(u.position,c),p=o.createVectorFrom2Points(u.position,e),g=o.fixNumber(t+p.magnitude/a.magnitude*l,this.precision);g<0?(s=g,n={type:r.LINE,object:u,target:d,time:s,objectIntersectPoint:e,targetIntersectPoint:null},i=[],i.push(n)):1!==g&&(s=g,n={type:r.LINE,object:u,target:d,time:s,objectIntersectPoint:e,targetIntersectPoint:null},i.push(n))}}for(let e=0;e<this.vertexArray.length;e++){let d,f=this.vertexArray[e];if(d=Math.abs(u.position.x-f.position.x)<8e3&&Math.abs(u.position.y-f.position.y)<8e3,d){let e=new a(u.position.x,u.position.y),d=new a(c.x,c.y),p=new a(f.position.x,f.position.y),g=o.lineIntersectCircle(e,d,p,u.radius,this.precision);if(g.intersects||g.inside){let c,m,y;if(null!==g.enter&&(c=g.enter),null!==g.exit&&(c=g.exit),null!==g.enter&&null!==g.exit&&(c=g.enter),null===g.enter&&g.exit,g.intersects){m=new h(c.x,c.y);let i=o.createVectorFrom2Points(e,d),n=o.createVectorFrom2Points(e,c);y=o.fixNumber(t+n.magnitude/i.magnitude*l,this.precision)}if(g.inside){let i=u.position.plus(u.velocity.normalize().times(2*-u.radius)),n=new a(i.x,i.y);c=o.lineIntersectCircle(e,n,p,u.radius,this.precision).exit,m=new h(c.x,c.y),y=t}y<s?(s=y,n={type:null,object:null,target:null,time:null,objectIntersectPoint:null,targetIntersectPoint:null},n.type=r.VERTEX,n.object=u,n.time=s,n.objectIntersectPoint=m,n.target=f,i=[],i.push(n)):y===s&&1!==y&&(s=y,n={type:null,object:null,target:null,time:null,objectIntersectPoint:null,targetIntersectPoint:null},n.type=r.VERTEX,n.object=u,n.time=s,g.intersects&&(n.objectIntersectPoint=new h(c.x,c.y)),g.inside&&(n.objectIntersectPoint=m),n.target=f,i.push(n))}}}if(0===u.id&&this.restitutingCueBall)continue;for(let e=0;e<this.pocketArray.length;e++){const d=this.pocketArray[e];let f=!1;Math.abs(u.position.x-d.position.x)<8e3&&Math.abs(u.position.y-d.position.y)<8e3&&(f=!0);let p=!1;if(f){const t=d.position.minus(u.position).normalize();u.velocity.dot(t)>0&&(p=!0)}if(f&&p){const e=new a(u.position.x,u.position.y),f=new a(c.x,c.y),p=new a(d.position.x,d.position.y),g=o.lineIntersectCircle(e,f,p,this.pocketRadius,this.precision);if(g.intersects||g.inside){let a,c,m;if(null!==g.enter&&(a=g.enter),null!==g.exit&&(a=g.exit),g.intersects){c=new h(a.x,a.y);let i=o.createVectorFrom2Points(e,f),n=o.createVectorFrom2Points(e,a);m=o.fixNumber(t+n.magnitude/i.magnitude*l,this.precision)}if(g.inside){let i=o.createVectorFrom2Points(p,e).normalize();c=new h(p.x,p.y).plus(i.times(this.pocketRadius)),m=t}if(m<s){s=m,n={type:null,object:null,target:null,time:null,objectIntersectPoint:null,targetIntersectPoint:null},n.type=r.POCKET,n.object=u,n.time=s,g.intersects&&(n.objectIntersectPoint=new h(a.x,a.y)),g.inside&&(n.objectIntersectPoint=c),n.target=d,i=[],i.push(n);break}if(m===s&&1!==m){n={type:null,object:null,target:null,time:null,objectIntersectPoint:null,targetIntersectPoint:null},n.type=r.POCKET,n.object=u,n.time=s,g.intersects&&(n.objectIntersectPoint=new h(a.x,a.y)),g.inside&&(n.objectIntersectPoint=c),n.target=d,i.push(n);break}}}}}}}i.length>0&&this.resolveCollisions(i);let u=o.fixNumber(s-t,this.precision);this.moveBalls(u),t=s,e++}while(i.length>0&&e<20)}resolveCollisions(t){this.omissionArray.length=0;for(let e=0,i=t.length;e<i;e++){const i=t[e];let n,s,a,l;if(i.type===r.BALL){n=i.object,n.position=i.objectIntersectPoint,s=i.target,this.omissionArray.push(n),this.omissionArray.push(s);let t=s.position.minus(n.position).normalize(),e=new h(t.x,t.y),r=e.getRightNormal();a=e.times(n.velocity.dot(e));let l=r.times(n.velocity.dot(r)),u=e.times(s.velocity.dot(e)),c=r.times(s.velocity.dot(r));Math.abs(s.ySpin)<Math.abs(n.ySpin)&&(s.ySpin=-.5*n.ySpin),0!==n.id||n.firstContact||(n.firstContact=!0);let d=u.times(this.ballRestitution).plus(a.times(1-this.ballRestitution)),f=a.times(this.ballRestitution).plus(u.times(1-this.ballRestitution));n.velocity=l.plus(d),s.velocity=c.plus(f),0!==n.id&&(o.fixNumber(this.prng.getRandom())>.5?(n.velocity.x=o.fixNumber(n.velocity.x*(1+this.dV)),n.velocity.y=o.fixNumber(n.velocity.y*(1-this.dV)),s.velocity.x=o.fixNumber(s.velocity.x*(1-this.dV)),s.velocity.y=o.fixNumber(s.velocity.y*(1+this.dV))):(n.velocity.x=o.fixNumber(n.velocity.x*(1-this.dV)),n.velocity.y=o.fixNumber(n.velocity.y*(1+this.dV)),s.velocity.x=o.fixNumber(s.velocity.x*(1+this.dV)),s.velocity.y=o.fixNumber(s.velocity.y*(1-this.dV)))),f.magnitude>450&&(s.grip=0),n.lastCollisionObject=s,s.lastCollisionObject=n}if(i.type===r.LINE){n=i.object,n.position=i.objectIntersectPoint;const t=i.target;this.omissionArray.push(n),n.ySpin+=-n.velocity.dot(t.direction)/300,n.ySpin>20&&(n.ySpin=20),n.ySpin<-20&&(n.ySpin=-20),a=t.normal.times(n.velocity.dot(t.normal));let e=t.direction.times(n.velocity.dot(t.direction));0===n.id&&(e=e.plus(t.direction.times(o.fixNumber(.1*n.english*n.velocity.magnitude,this.precision))),n.english=o.fixNumber(.45*n.english,this.precision),n.english>-.1&&n.english<.1&&(n.english=0),n.deltaScrew=n.deltaScrew.times(.75),this.scoreManager.onCollisionCueBallWithLine(i.objectIntersectPoint,t)),n.velocity=a.times(-this.cushionRestitution).plus(e),o.fixNumber(this.prng.getRandom())>.5?(n.velocity.x=o.fixNumber(n.velocity.x*(1+.5*this.dV)),n.velocity.y=o.fixNumber(n.velocity.y*(1-.5*this.dV))):(n.velocity.x=o.fixNumber(n.velocity.x*(1-.5*this.dV)),n.velocity.y=o.fixNumber(n.velocity.y*(1+.5*this.dV))),a.magnitude>700&&(n.grip=0),n.lastCollisionObject=t,n.position=n.position.plus(t.normal.times(200))}if(i.type===r.VERTEX){n=i.object,n.position=i.objectIntersectPoint;let t=i.target;this.omissionArray.push(n);let e=t.position.minus(n.position).normalize(),r=new h(e.x,e.y),s=r.getRightNormal();a=r.times(n.velocity.dot(r));let o=s.times(n.velocity.dot(s));if(n.velocity=a.times(-this.cushionRestitution).plus(o),n.position=n.position.minus(r.times(200)),n.lastCollisionObject=t,n.lastVertex=t.name,0===n.id){n.deltaScrew=new h(0,0);const t=i.target;this.scoreManager.onCollisionCueBallWithVertex(t)}}if(i.type===r.POCKET)if(n=i.object,n.position=i.objectIntersectPoint,this.omissionArray.push(n),l=n.velocity.magnitude,n.active=!1,n.velocity.x=0,n.velocity.y=0,0===n.id)this.hasCueBallBeenPocketed=!0,this.pocketedCueBallTicksCounter=0,this.pocketCueBall_id=i.target.id,this.scoreManager.onCueBallPocketed();else{this.pocketedBalls++;const t=i.target;this.scoreManager.onBallPocketed(t,n.id),this.pocketedBallsIDs.push(n.id)}this.sendContactEvent(i,n,a,l,s)}}sendContactEvent(t,e,i,n,s){let a={collisionType:null,ball:null,target:null,ballVelocity:null,targetVelocity:null,normalVelocity:null,deltaScrew:null,speed:null};a.collisionType=t.type,a.ball=e,a.target=t.target,a.ballVelocity=e.velocity,t.type!==r.LINE&&t.type!==r.VERTEX||(a.normalVelocity=i,t.type===r.LINE&&this.contactCounterManager.onContactBallBorder(t.object,t.target)),t.type===r.POCKET&&(a.speed=n,this.contactCounterManager.onBallPocketed(t.object,this.absoluteTick)),t.type===r.BALL&&(a={collisionType:null,ball:null,target:null,ballVelocity:null,targetVelocity:null,normalVelocity:null,deltaScrew:null,speed:null},a.collisionType=t.type,a.ball=t.target,a.target=e,a.ballVelocity=t.target.velocity,a.targetVelocity=e.velocity,0===s.id&&(a.deltaScrew=t.target.deltaScrew),this.contactCounterManager.onContactBallBall(t.object,t.target)),this.eventDispatcher.dispatchEvent(new f(f.CONTACT,[a]))}moveBalls(t){for(let e=0,i=this.ballsArray.length;e<i;e++){const i=this.ballsArray[e];if((0===this.omissionArray.length||-1===this.omissionArray.indexOf(i))&&i.active){const e=i.velocity.times(t);i.position=i.position.plus(e),i.collisionsCounter.distance+=e.magnitude}}this.omissionArray.length=0}updateFriction(){this.ballsMoving=!1;for(let t=0;t<this.ballsArray.length;t++){let e=this.ballsArray[t];if(e.active){0===e.id&&e.deltaScrew.magnitudeSquared>0&&(e.deltaScrew=e.deltaScrew.times(.95),e.firstContact&&(e.velocity=e.velocity.plus(e.deltaScrew)),e.deltaScrew.magnitudeSquared<1&&(e.deltaScrew=new h(0,0)));let t=e.velocity.magnitude;t-=this.friction;let i=e.velocity.normalize();if(e.velocity=i.times(t),e.velocity.magnitude<this.minVelocity&&(e.velocity=new h(0,0)),e.grip<1&&(e.grip+=.03),e.ySpin>=.2&&(e.ySpin-=.2),e.ySpin<=-.2&&(e.ySpin+=.2),e.ySpin>=-.2&&e.ySpin<=.2&&(e.ySpin=0),0!==e.ySpin){let t=e.velocity.getLeftNormal().normalize().times(.5*e.ySpin*e.velocity.magnitude/500);e.velocity=e.velocity.plus(t)}e.velocity.magnitudeSquared>0&&(this.ballsMoving=!0)}}this.hasCueBallBeenPocketed&&(this.ballsMoving=!0),this.ballsMoving||(this.scoreManager.onTurnCompleted(),this.contactCounterManager.onTurnCompleted(this.absoluteTick),this.eventDispatcher.dispatchEvent(new f(f.TURN_COMPLETED)))}checkBalls(){let t=0;for(let e=1;e<this.ballsArray.length;e++)this.ballsArray[e].active&&t++;if(0===t)return this.ballsArray=o.cloneBallsArray(this.startBallsArray),this.contactCounterManager.setBallsArray(this.ballsArray),this.pocketedBallsIDs=[],this.rack++,this.scoreManager.onNewRack(),this.ballsMoving=!1,this.hasCueBallBeenPocketed=!1,this.pocketedCueBallTicksCounter=0,this.restitutingCueBall=!1,this.isBreakingShot=!0,void this.eventDispatcher.dispatchEvent(new f(f.ALL_BALLS_RESTITUTED));if(this.hasCueBallBeenPocketed){if(this.pocketedCueBallTicksCounter++,25===this.pocketedCueBallTicksCounter){this.hasCueBallBeenPocketed=!1;const t=this.ballsArray[0];let e,i;switch(t.active=!0,this.pocketCueBall_id){case 0:e=3,i=new h(-1,-1).normalize().times(this.cueBallPocketSpeed);break;case 1:e=4,i=new h(0,-1).normalize().times(this.cueBallPocketSpeed);break;case 2:e=5,i=new h(1,-1).normalize().times(this.cueBallPocketSpeed);break;case 3:e=0,i=new h(1,1).normalize().times(this.cueBallPocketSpeed);break;case 4:e=1,i=new h(0,1).normalize().times(this.cueBallPocketSpeed);break;case 5:e=2,i=new h(-1,1).normalize().times(this.cueBallPocketSpeed)}this.restitutingCueBall=!0,this.pocketedCueBallTicksCounter=0,t.position=this.pocketArray[e].position,t.velocity=i,this.eventDispatcher.dispatchEvent(new f(f.CUE_BALL_RESTITUTED,[e]))}}else this.restitutingCueBall&&(this.pocketedCueBallTicksCounter++,12===this.pocketedCueBallTicksCounter&&(this.restitutingCueBall=!1))}}v.VERSION="0.0.36",v.BALL_RADIUS=1400,v.POCKET_RADIUS=2300,v.CUE_MAX_IMPULSE=2200,v.START_TICKS=3600,v.EXTRA_TICKS_BOOSTER=300,v.BALL_RESTITUTION=.91,v.CUSHION_RESTITUTION=.6,v.FRICTION=1,i.d(e,"BallType",(function(){return n})),i.d(e,"ContactType",(function(){return r})),i.d(e,"ActionType",(function(){return s})),i.d(e,"Engine",(function(){return v})),i.d(e,"Vector2D",(function(){return h})),i.d(e,"EventDispatcher",(function(){return p})),i.d(e,"Event",(function(){return f})),i.d(e,"PRNG",(function(){return y})),i.d(e,"BallObject",(function(){return l})),i.d(e,"Maths",(function(){return o})),i.d(e,"Point",(function(){return a})),i.d(e,"ScoreManager",(function(){return m})),i.d(e,"BallsStartConfig",(function(){return c}))},function(t,e,i){"use strict";var n=i(16),r=i(9);function s(t,e){return 55296==(64512&t.charCodeAt(e))&&(!(e<0||e+1>=t.length)&&56320==(64512&t.charCodeAt(e+1)))}function a(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function o(t){return 1===t.length?"0"+t:t}function h(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}e.inherits=r,e.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var i=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),r=0;r<t.length;r+=2)i.push(parseInt(t[r]+t[r+1],16))}else for(var n=0,r=0;r<t.length;r++){var a=t.charCodeAt(r);a<128?i[n++]=a:a<2048?(i[n++]=a>>6|192,i[n++]=63&a|128):s(t,r)?(a=65536+((1023&a)<<10)+(1023&t.charCodeAt(++r)),i[n++]=a>>18|240,i[n++]=a>>12&63|128,i[n++]=a>>6&63|128,i[n++]=63&a|128):(i[n++]=a>>12|224,i[n++]=a>>6&63|128,i[n++]=63&a|128)}else for(r=0;r<t.length;r++)i[r]=0|t[r];return i},e.toHex=function(t){for(var e="",i=0;i<t.length;i++)e+=o(t[i].toString(16));return e},e.htonl=a,e.toHex32=function(t,e){for(var i="",n=0;n<t.length;n++){var r=t[n];"little"===e&&(r=a(r)),i+=h(r.toString(16))}return i},e.zero2=o,e.zero8=h,e.join32=function(t,e,i,r){var s=i-e;n(s%4==0);for(var a=new Array(s/4),o=0,h=e;o<a.length;o++,h+=4){var l;l="big"===r?t[h]<<24|t[h+1]<<16|t[h+2]<<8|t[h+3]:t[h+3]<<24|t[h+2]<<16|t[h+1]<<8|t[h],a[o]=l>>>0}return a},e.split32=function(t,e){for(var i=new Array(4*t.length),n=0,r=0;n<t.length;n++,r+=4){var s=t[n];"big"===e?(i[r]=s>>>24,i[r+1]=s>>>16&255,i[r+2]=s>>>8&255,i[r+3]=255&s):(i[r+3]=s>>>24,i[r+2]=s>>>16&255,i[r+1]=s>>>8&255,i[r]=255&s)}return i},e.rotr32=function(t,e){return t>>>e|t<<32-e},e.rotl32=function(t,e){return t<<e|t>>>32-e},e.sum32=function(t,e){return t+e>>>0},e.sum32_3=function(t,e,i){return t+e+i>>>0},e.sum32_4=function(t,e,i,n){return t+e+i+n>>>0},e.sum32_5=function(t,e,i,n,r){return t+e+i+n+r>>>0},e.sum64=function(t,e,i,n){var r=t[e],s=n+t[e+1]>>>0,a=(s<n?1:0)+i+r;t[e]=a>>>0,t[e+1]=s},e.sum64_hi=function(t,e,i,n){return(e+n>>>0<e?1:0)+t+i>>>0},e.sum64_lo=function(t,e,i,n){return e+n>>>0},e.sum64_4_hi=function(t,e,i,n,r,s,a,o){var h=0,l=e;return h+=(l=l+n>>>0)<e?1:0,h+=(l=l+s>>>0)<s?1:0,t+i+r+a+(h+=(l=l+o>>>0)<o?1:0)>>>0},e.sum64_4_lo=function(t,e,i,n,r,s,a,o){return e+n+s+o>>>0},e.sum64_5_hi=function(t,e,i,n,r,s,a,o,h,l){var u=0,c=e;return u+=(c=c+n>>>0)<e?1:0,u+=(c=c+s>>>0)<s?1:0,u+=(c=c+o>>>0)<o?1:0,t+i+r+a+h+(u+=(c=c+l>>>0)<l?1:0)>>>0},e.sum64_5_lo=function(t,e,i,n,r,s,a,o,h,l){return e+n+s+o+l>>>0},e.rotr64_hi=function(t,e,i){return(e<<32-i|t>>>i)>>>0},e.rotr64_lo=function(t,e,i){return(t<<32-i|e>>>i)>>>0},e.shr64_hi=function(t,e,i){return t>>>i},e.shr64_lo=function(t,e,i){return(t<<32-i|e>>>i)>>>0}},function(t,e,i){"use strict";var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{h(n.next(t))}catch(t){s(t)}}function o(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}h((n=n.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var i,n,r,s,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&s[0]?n.return:s[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,s[1])).done)return r;switch(n=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(1),o=i(0),h=i(8),l=i(38),u=i(26),c=i(4),d=i(71),f=(s(i(5)),s(i(2))),p=function(){function t(){}return t.init=function(){if(o.GameVars.isDesktop)o.GameVars.scaleX=1,o.GameVars.correctionScale=1;else{o.GameVars.currentScene.game.scale.displaySize=o.GameVars.currentScene.game.scale.parentSize,o.GameVars.currentScene.game.scale.refresh();var e=Math.max(window.innerWidth,window.innerHeight)/Math.min(window.innerWidth,window.innerHeight);o.GameVars.scaleX=a.GameConstants.GAME_WIDTH/a.GameConstants.GAME_HEIGHT/e,o.GameVars.correctionScale=e<=1.6?.825:1}var i={reactClass:o.GameVars.reactClass,gameName:"rug-pool",activatePaymentLayer:!0,development:!1,gameOverMenuDelay:750,adversaryScoreContainerConfig:{x:a.GameConstants.GAME_WIDTH/2+150,y:a.GameConstants.GAME_HEIGHT,width:125,height:30},startResumedGameCallback:t.startResumedGameCallback,goToHomeCallback:t.enterSplashScene,disableInputsCallback:t.disableInputs,enableInputsCallback:t.enableInputs,gameOverCallback:t.onGameOver,purchasedBoosterCallback:t.onBoosterPurchased,gameManagerReference:t,engineClass:null};f.SDK.init(i),o.GameVars.availableCues={},o.GameVars.availableCues.default=!0,t.readGameData()},t.readGameData=function(){t.getGameStorageData(a.GameConstants.SAVED_GAME_DATA_KEY,(function(e){e?o.GameVars.gameData=JSON.parse(e):(o.GameVars.gameData={muted:!1,powerBarSide:a.GameConstants.LEFT,cueID:1},t.writeGameData()),t.startGame()}))},t.setCurrentScene=function(t){o.GameVars.currentScene=t,f.SDK.setCurrentScene(o.GameVars.currentScene)},t.onGameAssetsLoaded=function(){c.AudioManager.init(),o.GameVars.currentScene.time.delayedCall(500,(function(){f.SDK.checkPlayerLogin(t.onGameConfigReceived,t.enterBoardScene,t)}),[],t)},t.onGameConfigReceived=function(){var e=this;o.GameVars.actionsLog=null,f.SDK.replayMode?n(e,void 0,void 0,(function(){var e;return r(this,(function(i){switch(i.label){case 0:return[4,f.SDK.getReplayLog()];case 1:return(e=i.sent()).error||(o.GameVars.actionsLog=e.actions,t.enterBoardScene()),[2]}}))})):(f.DataManager.getNFTs("poolcues",t.onNFTsInfoReceived,t),f.SDK.resumedGame?f.SDK.showRestoredGameLayer():f.SDK.private?f.SDK.duelID||t.enterPaymentScene():t.enterSplashScene())},t.startResumedGameCallback=function(e){o.GameVars.actionsLog=e,t.enterBoardScene()},t.enterSplashScene=function(){o.GameVars.currentScene.scene.start("SplashScene")},t.enterShopScene=function(){o.GameVars.currentScene.scene.start("ShopScene")},t.enterPaymentScene=function(){o.GameVars.isDesktop||o.GameVars.currentScene.scale.startFullscreen(),o.GameVars.currentScene.scene.start("PaymentScene")},t.enterBoardScene=function(){o.GameVars.currentScene.scene.start("BoardScene")},t.disableInputs=function(t){o.GameVars.paused=!0,t&&c.AudioManager.playSound("surpassed_score")},t.enableInputs=function(){setTimeout((function(){o.GameVars.paused=!1}),100)},t.onGameOver=function(){var t=null;return f.SDK.replayMode||(t=u.BoardScene.currentInstance.onGameOver()),t},t.onBoosterPurchased=function(){h.BoardManager.currentInstance.onBoosterPurchased()},t.changePowerBarSide=function(){o.GameVars.gameData.powerBarSide=o.GameVars.gameData.powerBarSide===a.GameConstants.RIGHT?a.GameConstants.LEFT:a.GameConstants.RIGHT,t.writeGameData(),l.PowerBarContainer.currentInstance.changeSide()},t.equipCue=function(e){o.GameVars.gameData.cueID=e,d.ShopScene.currentInstance.onCueEquipped(),t.writeGameData()},t.onNFTsInfoReceived=function(e){for(var i=[],n=0;n<e.length;n++){var r=e[n].name;-1===i.indexOf(r)&&i.push(r)}o.GameVars.availableCues["Pool Cue: Tester"]=-1!==i.indexOf("Pool Cue: Tester"),o.GameVars.availableCues["Pool Cue: Zapper"]=-1!==i.indexOf("Pool Cue: Zapper"),o.GameVars.availableCues["Pool Cue: Core-Loop"]=-1!==i.indexOf("Pool Cue: Core-Loop"),o.GameVars.availableCues["Pool Cue: Ambassador"]=-1!==i.indexOf("Pool Cue: Ambassador"),o.GameVars.availableCues["Pool Cue: Guest"]=-1!==i.indexOf("Pool Cue: Guest"),o.GameVars.availableCues["Pool Cue: Domer"]=-1!==i.indexOf("Pool Cue: Domer"),o.GameVars.availableCues["The Juicer"]=-1!==i.indexOf("The Juicer"),o.GameVars.availableCues["Pool Cue: PoolMeister"]=-1!==i.indexOf("Pool Cue: PoolMeister"),o.GameVars.availableCues["Pool Cue: Plasmazoid"]=-1!==i.indexOf("Pool Cue: Plasmazoid"),o.GameVars.availableCues["Pool Cue: Carbz Cue"]=-1!==i.indexOf("Pool Cue: Carbz Cue")||-1!==i.indexOf("\tPool Cue: Carbz Cue"),o.GameVars.availableCues["Pool Cue: Halloween"]=-1!==i.indexOf("Pool Cue: Halloween")||-1!==i.indexOf("\tPool Cue: Halloween"),o.GameVars.availableCues["Pool Cue: Jigowatts Cue"]=-1!==i.indexOf("Pool Cue: Jigowatts Cue")||-1!==i.indexOf("\tPool Cue: Jigowatts Cue"),o.GameVars.availableCues["Pool Cue: Taco Cue"]=-1!==i.indexOf("Pool Cue: Taco Cue")||-1!==i.indexOf("\tPool Cue: Taco Cue");var s=a.GameConstants.CUES_DATA[o.GameVars.gameData.cueID-1]["name-nft"];o.GameVars.availableCues[s]||(o.GameVars.gameData.cueID=1),t.writeGameData()},t.writeGameData=function(){t.setGameStorageData(a.GameConstants.SAVED_GAME_DATA_KEY,o.GameVars.gameData,(function(){t.log("game data successfully saved")}))},t.log=function(t,e){a.GameConstants.VERBOSE&&(e?console.error(t+":",e):console.log(t))},t.startGame=function(){o.GameVars.currentScene.scene.start("PreloadScene")},t.getGameStorageData=function(t,e){e(localStorage.getItem(t))},t.setGameStorageData=function(t,e,i){localStorage.setItem(t,JSON.stringify(e)),i()},t}();e.GameManager=p},function(t,e,i){"use strict";var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{h(n.next(t))}catch(t){s(t)}}function o(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}h((n=n.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var i,n,r,s,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&s[0]?n.return:s[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,s[1])).done)return r;switch(n=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(0),o=i(11),h=i(26),l=i(20),u=s(i(2)),c=s(i(5)),d=i(38),f=function(){function t(){t.currentInstance=this,this.boosterPurchased=!1,a.GameVars.billiardEngine=null,a.GameVars.shotRunnig=!1,a.GameVars.restitutingBalls=!1,a.GameVars.paused=!0,a.GameVars.english=0,a.GameVars.verticalSpin=0,a.GameVars.billiardEngine=null,a.GameVars.shotData=null,u.SDK.resumedGame?this.startResumedGame():u.SDK.replayMode||this.startGame()}return t.prototype.update=function(){a.GameVars.billiardEngine.update()},t.prototype.startResumedGame=function(){a.GameVars.paused=!1,a.GameVars.billiardEngine=new c.Engine,a.GameVars.billiardEngine.init(null,0===u.SDK.fee),a.GameVars.billiardEngine.processActions(a.GameVars.actionsLog),this.addEngineListeners(),h.BoardScene.currentInstance.startGame(),u.SDK.onGameStarted(),u.SDK.gameOver=a.GameVars.billiardEngine.gameOver,u.SDK.onScoreUpdated(a.GameVars.billiardEngine.score),u.SDK.gameOver&&u.SDK.onGameOver()},t.prototype.startGame=function(){a.GameVars.paused=!1,a.GameVars.billiardEngine=new c.Engine,a.GameVars.billiardEngine.init(null,0===u.SDK.fee),a.GameVars.billiardEngine.setSeed(u.SDK.duelSeed),this.addEngineListeners(),h.BoardScene.currentInstance.startGame(),u.SDK.onGameStarted(),u.SDK.addAction({type:u.ActionType.CONFIG,data:{fee:u.SDK.fee,cueID:a.GameVars.gameData.cueID,engineVersion:c.Engine.VERSION}}),u.SDK.onScoreUpdated(a.GameVars.billiardEngine.score)},t.prototype.disableScore=function(){return a.GameVars.billiardEngine.disableScore()},t.prototype.shoot=function(t,e){var i=this;if(!a.GameVars.shotRunnig){var s,o=e.times(t*c.Engine.CUE_MAX_IMPULSE);s=a.GameVars.verticalSpin>0?.035:a.GameVars.verticalSpin<0?.0425:0;var h=e.times(o.magnitude*s*a.GameVars.verticalSpin);a.GameVars.shotData={cueSpeed:{vx:o.x,vy:o.y},deltaScrew:{x:h.x,y:h.y},english:a.GameVars.english};var f={type:c.ActionType.SHOT,data:{cueSpeed:{vx:o.x,vy:o.y},deltaScrew:{x:h.x,y:h.y},english:a.GameVars.english,verticalSpeed:a.GameVars.verticalSpin}};u.SDK.addAction(f),n(i,void 0,void 0,(function(){var t;return r(this,(function(e){switch(e.label){case 0:return[4,u.SDK.fetchSeed()];case 1:return(t=e.sent()).error?console.log(t.error):(a.GameVars.billiardEngine.setSeed(t.seed),l.CueContainer.currentInstance.applyImpulse(),a.GameVars.isDesktop||d.PowerBarContainer.currentInstance.applyImpulse()),[2]}}))}))}},t.prototype.onCueImpulseApplied=function(){a.GameVars.shotRunnig=!0,a.GameVars.billiardEngine.shoot(a.GameVars.shotData)},t.prototype.showPauseMenu=function(){a.GameVars.paused=!0,h.BoardScene.currentInstance.showPauseMenu()},t.prototype.hidePauseMenu=function(){setTimeout((function(){a.GameVars.paused=!1}),250),h.BoardScene.currentInstance.hidePauseMenu()},t.prototype.showSpinCircleLayer=function(){a.GameVars.paused=!0,h.BoardScene.currentInstance.showSpinCircleLayer()},t.prototype.hideSpinCircleLayer=function(t,e){setTimeout((function(){a.GameVars.paused=!1}),250),a.GameVars.english=t,a.GameVars.verticalSpin=e,h.BoardScene.currentInstance.hideSpinCircleLayer()},t.prototype.onNewBallsOnBoard=function(){a.GameVars.restitutingBalls=!1,this.onTurnCompleted()},t.prototype.onBoosterPurchased=function(){a.GameVars.paused=!1,a.GameVars.shotRunnig?(this.boosterPurchased=!0,h.BoardScene.currentInstance.onBoosterPurchased()):(a.GameVars.billiardEngine.onBoosterPurchased(),h.BoardScene.currentInstance.onBoosterActivated(),h.BoardScene.currentInstance.onTurnCompleted())},t.prototype.onTurnCompleted=function(){a.GameVars.shotRunnig=!1,a.GameVars.english=0,a.GameVars.verticalSpin=0,a.GameVars.billiardEngine.gameOver||(u.SDK.onScoreUpdated(a.GameVars.billiardEngine.score),h.BoardScene.currentInstance.onTurnCompleted()),this.boosterPurchased&&(this.boosterPurchased=!1,a.GameVars.billiardEngine.onBoosterPurchased(),h.BoardScene.currentInstance.onBoosterActivated(),h.BoardScene.currentInstance.onTurnCompleted())},t.prototype.onContact=function(t){var e=t.ball.id;switch(t.collisionType){case c.ContactType.BALL:o.BoardContainer.currentInstance.onBallsHit(t);break;case c.ContactType.LINE:case c.ContactType.VERTEX:0===e&&u.SDK.onScoreUpdated(a.GameVars.billiardEngine.score),o.BoardContainer.currentInstance.onCushionHit(t);break;case c.ContactType.POCKET:var i=t.target,n=t.speed;u.SDK.onScoreUpdated(a.GameVars.billiardEngine.score),h.BoardScene.currentInstance.onBallPocketed(e,i,n)}},t.prototype.onCueBallRestituted=function(t){a.GameVars.restitutingBalls||o.BoardContainer.currentInstance.restituteCueBall(t)},t.prototype.onAllBallsRestituted=function(){a.GameVars.restitutingBalls=!0,a.GameVars.shotRunnig=!1,h.BoardScene.currentInstance.restituteAllBalls()},t.prototype.onCueBalCollisionWithBorder=function(t,e,i){o.BoardContainer.currentInstance.onCueBalCollisionWithBorder(t,e,i)},t.prototype.onCombo=function(t){h.BoardScene.currentInstance.hud.onCombo(t)},t.prototype.addEngineListeners=function(){a.GameVars.billiardEngine.addEventListener(c.Event.TURN_COMPLETED,this.onTurnCompleted,this),a.GameVars.billiardEngine.addEventListener(c.Event.CONTACT,this.onContact,this),a.GameVars.billiardEngine.addEventListener(c.Event.CUE_BALL_RESTITUTED,this.onCueBallRestituted,this),a.GameVars.billiardEngine.addEventListener(c.Event.ALL_BALLS_RESTITUTED,this.onAllBallsRestituted,this),a.GameVars.billiardEngine.addEventListener(c.Event.CUEBALL_COLLISION_WITH_BORDER,this.onCueBalCollisionWithBorder,this),a.GameVars.billiardEngine.addEventListener(c.Event.COMBO,this.onCombo,this),a.GameVars.billiardEngine.addEventListener(c.Event.GAME_OVER,u.SDK.onGameOver,this)},t}();e.BoardManager=f},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var s=i(0),a=function(t){function e(e,i,n,r,s,a){void 0===a&&(a=s);var o=t.call(this,e,i,n,r,s)||this;return o.setInteractive({pixelPerfect:!0,useHandCursor:!0}),s!==a&&(o.on("pointerover",(function(){o.setFrame(a)}),o),o.on("pointerout",(function(){o.setFrame(s)}),o),o.on("pointerdown",(function(){o.setFrame(a)}),o),o.on("pointerup",(function(){o.setFrame(s)}),o)),o}return r(e,t),e.prototype.setFrames=function(t,e){var i=this;void 0===e&&(e=t),this.on("pointerover",(function(){i.setFrame(e)}),this),this.on("pointerout",(function(){i.setFrame(t)}),this),this.on("pointerdown",(function(){i.setFrame(e)}),this),this.on("pointerup",(function(){i.setFrame(t)}),this)},e.prototype.setInflationTween=function(t,e,i,n,r){var a=this;void 0===e&&(e=this.scaleX),void 0===i&&(i=this.scaleY),this.setScale(e,i),this.defaultScale={x:e,y:i},n&&(r||(r={ease:Phaser.Math.Easing.Cubic.Out,duration:200})),this.on("pointerover",(function(){n?a.scene.tweens.add({targets:[a],scaleX:a.defaultScale.x*t,scaleY:a.defaultScale.y*t,ease:r.ease,duration:r.duration}):a.setScale(a.defaultScale.x*t,a.defaultScale.y*t)}),this),this.on("pointerout",(function(){n?a.scene.tweens.add({targets:[a],scaleX:a.defaultScale.x,scaleY:a.defaultScale.y,ease:r.ease,duration:r.duration}):a.setScale(a.defaultScale.x,a.defaultScale.y)}),this),this.on("pointerdown",(function(){s.GameVars.isDesktop?a.setScale(a.defaultScale.x,a.defaultScale.y):a.setScale(a.defaultScale.x*t,a.defaultScale.y*t)}),this),this.on("pointerup",(function(){s.GameVars.isDesktop?a.setScale(a.defaultScale.x*t,a.defaultScale.y*t):a.setScale(a.defaultScale.x,a.defaultScale.y)}),this)},e.prototype.onUp=function(t,e){this.on("pointerup",t,e)},e.prototype.onDown=function(t,e){this.on("pointerdown",t,e)},e.prototype.onOver=function(t,e){this.on("pointerover",t,e)},e.prototype.onOut=function(t,e){this.on("pointerout",t,e)},e}(Phaser.GameObjects.Image);e.Button=a},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(1),o=i(0),h=i(27),l=i(20),u=i(133),c=i(134),d=i(42),f=i(4),p=i(135),g=s(i(2)),m=s(i(5)),y=function(t){function e(i){var n=t.call(this,i)||this;e.currentInstance=n,n.x=a.GameConstants.GAME_WIDTH/2,n.y=365,n.restitutingBalls=!1,n.setScale(o.GameVars.scaleX*o.GameVars.correctionScale,o.GameVars.correctionScale),n.pocketedBallsTrail=new d.PocketedBallsTrail(n.scene),n.add(n.pocketedBallsTrail);var r=new Phaser.GameObjects.Image(n.scene,0,0,"texture_atlas_2","table_holes_1");n.add(r),n.tunnelContainer=new Phaser.GameObjects.Container(n.scene),n.add(n.tunnelContainer);var s=new Phaser.GameObjects.Image(n.scene,0,0,"texture_atlas_hall","cloth");n.add(s),n.ballsContainer=new h.BallsContainer(n.scene),n.add(n.ballsContainer),n.effectsContainer=new u.EffectsContainer(n.scene),n.add(n.effectsContainer),n.pocketMarkContainer=new Phaser.GameObjects.Container(n.scene),n.pocketMarkContainer.visible=!1,n.add(n.pocketMarkContainer);var f=new Phaser.GameObjects.Image(n.scene,0,0,"texture_atlas_1","pocket_mark");return f.setScale(.75),n.pocketMarkContainer.add(f),g.SDK.replayMode?n.guideContainer=null:(n.guideContainer=new c.GuideContainer(n.scene),n.add(n.guideContainer)),n.scene.tweens.add({targets:f,alpha:.65,scaleX:.85,scaleY:.85,ease:Phaser.Math.Easing.Linear,duration:650,yoyo:!0,repeat:-1}),n.pocketMultiplier=new Phaser.GameObjects.Text(n.scene,0,0,"x1.5",{fontFamily:"Avenir_Next",fontSize:"22px",color:"#4fffd4"}),n.pocketMultiplier.setOrigin(.5),n.pocketMultiplier.scaleX=.75,n.pocketMultiplier.setShadow(1,1,"#4fffd4",3,!0),n.pocketMarkContainer.add(n.pocketMultiplier),n.cueContainer=new l.CueContainer(n.scene),n.add(n.cueContainer),a.GameConstants.DEBUG&&(n.debugGraphics=new p.DebugGraphics(n.scene),n.add(n.debugGraphics)),n}return r(e,t),e.prototype.update=function(){this.ballsContainer.update(),this.guideContainer&&this.guideContainer.update(),this.cueContainer.update(),this.pocketedBallsTrail.update(),this.pocketMultiplier.text="x"+o.GameVars.billiardEngine.scoreManager.pocketMultiplier,this.pocketMultiplier.visible=1!==o.GameVars.billiardEngine.scoreManager.pocketMultiplier,this.debugGraphics&&this.debugGraphics.update()},e.prototype.startGame=function(){this.ballsContainer.setBalls(),this.cueContainer.startGame(),this.pocketedBallsTrail.startGame(),this.pocketMarkContainer.visible=!0,this.setPocketMultiplier()},e.prototype.onTurnCompleted=function(){g.SDK.gameOver||this.cueContainer.onTurnCompleted()},e.prototype.onBallPocketed=function(t,e,i){this.ballsContainer.onBallPocketed(t,e,i),this.setPocketMultiplier()},e.prototype.moveBallToTunnel=function(t){this.tunnelContainer.add(t)},e.prototype.restituteCueBall=function(t){this.ballsContainer.restituteCueBall();var e=o.GameVars.billiardEngine.pocketArray[t],i=e.position.x*a.GameConstants.PHYS_SCALE,n=e.position.y*a.GameConstants.PHYS_SCALE,r=new Phaser.GameObjects.Image(this.scene,i,n,"texture_atlas_1","glow");r.setScale(0),this.add(r),this.scene.tweens.add({targets:r,scaleX:1.75,scaleY:1.75,ease:Phaser.Math.Easing.Cubic.Out,duration:125,onComplete:function(){this.scene.tweens.add({targets:r,alpha:0,ease:Phaser.Math.Easing.Cubic.Out,duration:450,onComplete:function(){r.destroy()},onCompleteScope:this})},onCompleteScope:this})},e.prototype.restituteAllBalls=function(){this.restitutingBalls=!0,this.ballsContainer.restituteAllBalls(),this.pocketedBallsTrail.clear(),this.effectsContainer.onAllBallsRestituted(),f.AudioManager.playSound("surpassed_score")},e.prototype.onAllBallsRestituted=function(){this.restitutingBalls=!1},e.prototype.onCueBalCollisionWithBorder=function(t,e,i){this.effectsContainer.onCueBalCollisionWithBorder(t,e,i)},e.prototype.setPocketMultiplier=function(){var t=o.GameVars.billiardEngine.scoreManager.pocketMultiplier_ID,e=o.GameVars.billiardEngine.pocketArray,i=e[t].position.x*a.GameConstants.PHYS_SCALE,n=e[t].position.y*a.GameConstants.PHYS_SCALE;this.pocketMarkContainer.x=i,this.pocketMarkContainer.y=n},e.prototype.onCushionHit=function(t){var e=t.normalVelocity.magnitude/6e3;e=e>1?1:e,f.AudioManager.playSound("cushion-hit",!1,e)},e.prototype.onBallsHit=function(t){var e=t.ballVelocity.minus(t.targetVelocity).magnitude/6e3;e=e>1?1:e,f.AudioManager.playSound("ball-hit",!1,e)},e.CUSHION_VERTEXES_PLUS_RADIUS=[new m.Point(-42e3+a.GameConstants.BALL_RADIUS,-21e3+a.GameConstants.BALL_RADIUS),new m.Point(42e3-a.GameConstants.BALL_RADIUS,-21e3+a.GameConstants.BALL_RADIUS),new m.Point(42e3-a.GameConstants.BALL_RADIUS,21e3-a.GameConstants.BALL_RADIUS),new m.Point(-42e3+a.GameConstants.BALL_RADIUS,21e3-a.GameConstants.BALL_RADIUS),new m.Point(-42e3+a.GameConstants.BALL_RADIUS,-21e3+a.GameConstants.BALL_RADIUS)],e.CUSHION_VERTEXES=[new m.Point(-42e3,-21e3),new m.Point(42e3,-21e3),new m.Point(42e3,21e3),new m.Point(-42e3,21e3),new m.Point(-42e3,-21e3)],e}(Phaser.GameObjects.Container);e.BoardContainer=y},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ActionGenerator=e.ExplorerActionGenerator=e.RpcActionGenerator=e.ParserTypes=e.serialize=e.deserialize=e.ObjectSchema=e.ExplorerApi=e.RpcApi=void 0;const r=n(i(49));e.ExplorerActionGenerator=r.default;const s=i(30);Object.defineProperty(e,"ActionGenerator",{enumerable:!0,get:function(){return s.ActionGenerator}});const a=n(i(50));e.RpcActionGenerator=a.default;const o=n(i(88));e.ExplorerApi=o.default;const h=n(i(90));e.RpcApi=h.default;const l=i(34);Object.defineProperty(e,"ObjectSchema",{enumerable:!0,get:function(){return l.ObjectSchema}});const u=i(22);Object.defineProperty(e,"deserialize",{enumerable:!0,get:function(){return u.deserialize}}),Object.defineProperty(e,"serialize",{enumerable:!0,get:function(){return u.serialize}});const c=i(100);Object.defineProperty(e,"ParserTypes",{enumerable:!0,get:function(){return c.ParserTypes}})},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.byte_vector_to_int=e.int_to_byte_vector=e.concat_byte_arrays=e.hex_encode=e.hex_decode=e.base58_encode=e.base58_decode=e.zigzag_decode=e.zigzag_encode=e.integer_unsign=e.integer_sign=e.varint_decode=e.varint_encode=void 0;const r=n(i(32)),s=n(i(23)),a=n(i(21)),o=n(i(92));e.varint_encode=function(t){const e=[];let i=r.default(t);if(i.lesser(0))throw new a.default("cant pack negative integer");for(;;){const t=i.and(127);if(i=i.shiftRight(7),i.equals(0)){e.push(t.toJSNumber());break}e.push(t.toJSNumber()+128)}return new Uint8Array(e)},e.varint_decode=function(t){let e=r.default(0);for(let i=0;;i++){if(t.position>=t.data.length)throw new s.default("failed to unpack integer");const n=r.default(t.data[t.position]);if(t.position+=1,n.lesser(128)){e=e.plus(n.shiftLeft(7*i));break}e=e.plus(n.and(127).shiftLeft(7*i))}return e},e.integer_sign=function(t,e){const i=r.default(t);if(i.greaterOrEquals(r.default(2).pow(8*e-1)))throw new Error("cannot sign integer: too big");return i.greaterOrEquals(0)?i:i.negate().xor(r.default(2).pow(8*e).minus(1)).plus(1)},e.integer_unsign=function(t,e){const i=r.default(t);if(i.greater(r.default(2).pow(8*e)))throw new Error("cannot unsign integer: too big");return i.greater(r.default(2).pow(8*e-1))?i.minus(1).xor(r.default(2).pow(8*e).minus(1)).negate():i},e.zigzag_encode=function(t){const e=r.default(t);return e.lesser(0)?e.plus(1).multiply(-2).plus(1):e.multiply(2)},e.zigzag_decode=function(t){const e=r.default(t);return e.mod(2).equals(0)?e.divmod(2).quotient:e.divmod(2).quotient.multiply(-1).minus(1)};const h=new o.default("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");e.base58_decode=function(t){return h.decode(t)},e.base58_encode=function(t){return h.encode(t)},e.hex_decode=function(t){const e=t.match(/.{1,2}/g);return e?new Uint8Array(e.map(t=>parseInt(t,16))):new Uint8Array(0)},e.hex_encode=function(t){return t.reduce((t,e)=>t+e.toString(16).padStart(2,"0"),"")},e.concat_byte_arrays=function(t){const e=new Uint8Array(t.reduce((t,e)=>t+e.length,0));let i=0;for(const n of t)e.set(n,i),i+=n.length;return e},e.int_to_byte_vector=function(t){const e=[];let i=r.default(t);for(;i.notEquals(0);)e.push(i.and(255).toJSNumber()),i=i.shiftRight(8);return new Uint8Array(e)},e.byte_vector_to_int=function(t){let e=r.default(0);for(let i=0;i<t.length;i++)e=e.plus(r.default(t[i]).shiftLeft(8*i));return e.toJSNumber()}},function(t,e){var i,n,r=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(t){if(i===setTimeout)return setTimeout(t,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:s}catch(t){i=s}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var h,l=[],u=!1,c=-1;function d(){u&&h&&(u=!1,h.length?l=h.concat(l):c=-1,l.length&&f())}function f(){if(!u){var t=o(d);u=!0;for(var e=l.length;e;){for(h=l,l=[];++c<e;)h&&h[c].run();c=-1,e=l.length}h=null,u=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new p(t,e)),1!==l.length||u||o(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,i){"use strict";var n=i(24),r=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};t.exports=c;var s=i(19);s.inherits=i(9);var a=i(59),o=i(63);s.inherits(c,a);for(var h=r(o.prototype),l=0;l<h.length;l++){var u=h[l];c.prototype[u]||(c.prototype[u]=o.prototype[u])}function c(t){if(!(this instanceof c))return new c(t);a.call(this,t),o.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||n.nextTick(f,this)}function f(t){t.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),c.prototype._destroy=function(t,e){this.push(null),this.end(),n.nextTick(e,t)}},function(t,e){function i(t,e){if(!t)throw new Error(e||"Assertion failed")}t.exports=i,i.equal=function(t,e,i){if(t!=e)throw new Error(i||"Assertion failed: "+t+" != "+e)}},function(t,e,i){"use strict";var n=i(6),r=i(16);function s(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=s,s.prototype.update=function(t,e){if(t=n.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var i=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-i,t.length),0===this.pending.length&&(this.pending=null),t=n.join32(t,0,t.length-i,this.endian);for(var r=0;r<t.length;r+=this._delta32)this._update(t,r,r+this._delta32)}return this},s.prototype.digest=function(t){return this.update(this._pad()),r(null===this.pending),this._digest(t)},s.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,i=e-(t+this.padLength)%e,n=new Array(i+this.padLength);n[0]=128;for(var r=1;r<i;r++)n[r]=0;if(t<<=3,"big"===this.endian){for(var s=8;s<this.padLength;s++)n[r++]=0;n[r++]=0,n[r++]=0,n[r++]=0,n[r++]=0,n[r++]=t>>>24&255,n[r++]=t>>>16&255,n[r++]=t>>>8&255,n[r++]=255&t}else for(n[r++]=255&t,n[r++]=t>>>8&255,n[r++]=t>>>16&255,n[r++]=t>>>24&255,n[r++]=0,n[r++]=0,n[r++]=0,n[r++]=0,s=8;s<this.padLength;s++)n[r++]=0;return n}},function(t,e,i){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=i(113),r=i(114),s=i(55);function a(){return h.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return h.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=h.prototype:(null===t&&(t=new h(e)),t.length=e),t}function h(t,e,i){if(!(h.TYPED_ARRAY_SUPPORT||this instanceof h))return new h(t,e,i);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return l(this,t,e,i)}function l(t,e,i,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,i,n){if(e.byteLength,i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===i&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,i):new Uint8Array(e,i,n);h.TYPED_ARRAY_SUPPORT?(t=e).__proto__=h.prototype:t=d(t,e);return t}(t,e,i,n):"string"==typeof e?function(t,e,i){"string"==typeof i&&""!==i||(i="utf8");if(!h.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=0|p(e,i),r=(t=o(t,n)).write(e,i);r!==n&&(t=t.slice(0,r));return t}(t,e,i):function(t,e){if(h.isBuffer(e)){var i=0|f(e.length);return 0===(t=o(t,i)).length||e.copy(t,0,0,i),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?o(t,0):d(t,e);if("Buffer"===e.type&&s(e.data))return d(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t,e){if(u(e),t=o(t,e<0?0:0|f(e)),!h.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function d(t,e){var i=e.length<0?0:0|f(e.length);t=o(t,i);for(var n=0;n<i;n+=1)t[n]=255&e[n];return t}function f(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(h.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return Y(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return z(t).length;default:if(n)return Y(t).length;e=(""+e).toLowerCase(),n=!0}}function g(t,e,i){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,i);case"utf8":case"utf-8":return S(this,e,i);case"ascii":return C(this,e,i);case"latin1":case"binary":return O(this,e,i);case"base64":return A(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,i);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function m(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function y(t,e,i,n,r){if(0===t.length)return-1;if("string"==typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=r?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(r)return-1;i=t.length-1}else if(i<0){if(!r)return-1;i=0}if("string"==typeof e&&(e=h.from(e,n)),h.isBuffer(e))return 0===e.length?-1:v(t,e,i,n,r);if("number"==typeof e)return e&=255,h.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):v(t,[e],i,n,r);throw new TypeError("val must be string, number or Buffer")}function v(t,e,i,n,r){var s,a=1,o=t.length,h=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,o/=2,h/=2,i/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(r){var u=-1;for(s=i;s<o;s++)if(l(t,s)===l(e,-1===u?0:s-u)){if(-1===u&&(u=s),s-u+1===h)return u*a}else-1!==u&&(s-=s-u),u=-1}else for(i+h>o&&(i=o-h),s=i;s>=0;s--){for(var c=!0,d=0;d<h;d++)if(l(t,s+d)!==l(e,d)){c=!1;break}if(c)return s}return-1}function _(t,e,i,n){i=Number(i)||0;var r=t.length-i;n?(n=Number(n))>r&&(n=r):n=r;var s=e.length;if(s%2!=0)throw new TypeError("Invalid hex string");n>s/2&&(n=s/2);for(var a=0;a<n;++a){var o=parseInt(e.substr(2*a,2),16);if(isNaN(o))return a;t[i+a]=o}return a}function x(t,e,i,n){return U(Y(e,t.length-i),t,i,n)}function w(t,e,i,n){return U(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,n)}function b(t,e,i,n){return w(t,e,i,n)}function T(t,e,i,n){return U(z(e),t,i,n)}function E(t,e,i,n){return U(function(t,e){for(var i,n,r,s=[],a=0;a<t.length&&!((e-=2)<0);++a)i=t.charCodeAt(a),n=i>>8,r=i%256,s.push(r),s.push(n);return s}(e,t.length-i),t,i,n)}function A(t,e,i){return 0===e&&i===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,i))}function S(t,e,i){i=Math.min(t.length,i);for(var n=[],r=e;r<i;){var s,a,o,h,l=t[r],u=null,c=l>239?4:l>223?3:l>191?2:1;if(r+c<=i)switch(c){case 1:l<128&&(u=l);break;case 2:128==(192&(s=t[r+1]))&&(h=(31&l)<<6|63&s)>127&&(u=h);break;case 3:s=t[r+1],a=t[r+2],128==(192&s)&&128==(192&a)&&(h=(15&l)<<12|(63&s)<<6|63&a)>2047&&(h<55296||h>57343)&&(u=h);break;case 4:s=t[r+1],a=t[r+2],o=t[r+3],128==(192&s)&&128==(192&a)&&128==(192&o)&&(h=(15&l)<<18|(63&s)<<12|(63&a)<<6|63&o)>65535&&h<1114112&&(u=h)}null===u?(u=65533,c=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),r+=c}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var i="",n=0;for(;n<e;)i+=String.fromCharCode.apply(String,t.slice(n,n+=4096));return i}(n)}e.Buffer=h,e.SlowBuffer=function(t){+t!=t&&(t=0);return h.alloc(+t)},e.INSPECT_MAX_BYTES=50,h.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),h.poolSize=8192,h._augment=function(t){return t.__proto__=h.prototype,t},h.from=function(t,e,i){return l(null,t,e,i)},h.TYPED_ARRAY_SUPPORT&&(h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0})),h.alloc=function(t,e,i){return function(t,e,i,n){return u(e),e<=0?o(t,e):void 0!==i?"string"==typeof n?o(t,e).fill(i,n):o(t,e).fill(i):o(t,e)}(null,t,e,i)},h.allocUnsafe=function(t){return c(null,t)},h.allocUnsafeSlow=function(t){return c(null,t)},h.isBuffer=function(t){return!(null==t||!t._isBuffer)},h.compare=function(t,e){if(!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,n=e.length,r=0,s=Math.min(i,n);r<s;++r)if(t[r]!==e[r]){i=t[r],n=e[r];break}return i<n?-1:n<i?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!s(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var n=h.allocUnsafe(e),r=0;for(i=0;i<t.length;++i){var a=t[i];if(!h.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,r),r+=a.length}return n},h.byteLength=p,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},h.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},h.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},h.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?S(this,0,t):g.apply(this,arguments)},h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){var t="",i=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(t+=" ... ")),"<Buffer "+t+">"},h.prototype.compare=function(t,e,i,n,r){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),e<0||i>t.length||n<0||r>this.length)throw new RangeError("out of range index");if(n>=r&&e>=i)return 0;if(n>=r)return-1;if(e>=i)return 1;if(this===t)return 0;for(var s=(r>>>=0)-(n>>>=0),a=(i>>>=0)-(e>>>=0),o=Math.min(s,a),l=this.slice(n,r),u=t.slice(e,i),c=0;c<o;++c)if(l[c]!==u[c]){s=l[c],a=u[c];break}return s<a?-1:a<s?1:0},h.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},h.prototype.indexOf=function(t,e,i){return y(this,t,e,i,!0)},h.prototype.lastIndexOf=function(t,e,i){return y(this,t,e,i,!1)},h.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-e;if((void 0===i||i>r)&&(i=r),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return _(this,t,e,i);case"utf8":case"utf-8":return x(this,t,e,i);case"ascii":return w(this,t,e,i);case"latin1":case"binary":return b(this,t,e,i);case"base64":return T(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,i);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function C(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(127&t[r]);return n}function O(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(t[r]);return n}function P(t,e,i){var n=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>n)&&(i=n);for(var r="",s=e;s<i;++s)r+=G(t[s]);return r}function R(t,e,i){for(var n=t.slice(e,i),r="",s=0;s<n.length;s+=2)r+=String.fromCharCode(n[s]+256*n[s+1]);return r}function M(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,i,n,r,s){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<s)throw new RangeError('"value" argument is out of bounds');if(i+n>t.length)throw new RangeError("Index out of range")}function I(t,e,i,n){e<0&&(e=65535+e+1);for(var r=0,s=Math.min(t.length-i,2);r<s;++r)t[i+r]=(e&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function k(t,e,i,n){e<0&&(e=4294967295+e+1);for(var r=0,s=Math.min(t.length-i,4);r<s;++r)t[i+r]=e>>>8*(n?r:3-r)&255}function D(t,e,i,n,r,s){if(i+n>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function F(t,e,i,n,s){return s||D(t,0,i,4),r.write(t,e,i,n,23,4),i+4}function B(t,e,i,n,s){return s||D(t,0,i,8),r.write(t,e,i,n,52,8),i+8}h.prototype.slice=function(t,e){var i,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),h.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=h.prototype;else{var r=e-t;i=new h(r,void 0);for(var s=0;s<r;++s)i[s]=this[s+t]}return i},h.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||M(t,e,this.length);for(var n=this[t],r=1,s=0;++s<e&&(r*=256);)n+=this[t+s]*r;return n},h.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||M(t,e,this.length);for(var n=this[t+--e],r=1;e>0&&(r*=256);)n+=this[t+--e]*r;return n},h.prototype.readUInt8=function(t,e){return e||M(t,1,this.length),this[t]},h.prototype.readUInt16LE=function(t,e){return e||M(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUInt16BE=function(t,e){return e||M(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUInt32LE=function(t,e){return e||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUInt32BE=function(t,e){return e||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||M(t,e,this.length);for(var n=this[t],r=1,s=0;++s<e&&(r*=256);)n+=this[t+s]*r;return n>=(r*=128)&&(n-=Math.pow(2,8*e)),n},h.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||M(t,e,this.length);for(var n=e,r=1,s=this[t+--n];n>0&&(r*=256);)s+=this[t+--n]*r;return s>=(r*=128)&&(s-=Math.pow(2,8*e)),s},h.prototype.readInt8=function(t,e){return e||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){e||M(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},h.prototype.readInt16BE=function(t,e){e||M(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},h.prototype.readInt32LE=function(t,e){return e||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return e||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readFloatLE=function(t,e){return e||M(t,4,this.length),r.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return e||M(t,4,this.length),r.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return e||M(t,8,this.length),r.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return e||M(t,8,this.length),r.read(this,t,!1,52,8)},h.prototype.writeUIntLE=function(t,e,i,n){(t=+t,e|=0,i|=0,n)||L(this,t,e,i,Math.pow(2,8*i)-1,0);var r=1,s=0;for(this[e]=255&t;++s<i&&(r*=256);)this[e+s]=t/r&255;return e+i},h.prototype.writeUIntBE=function(t,e,i,n){(t=+t,e|=0,i|=0,n)||L(this,t,e,i,Math.pow(2,8*i)-1,0);var r=i-1,s=1;for(this[e+r]=255&t;--r>=0&&(s*=256);)this[e+r]=t/s&255;return e+i},h.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||L(this,t,e,1,255,0),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},h.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||L(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},h.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||L(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},h.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||L(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):k(this,t,e,!0),e+4},h.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||L(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):k(this,t,e,!1),e+4},h.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*i-1);L(this,t,e,i,r-1,-r)}var s=0,a=1,o=0;for(this[e]=255&t;++s<i&&(a*=256);)t<0&&0===o&&0!==this[e+s-1]&&(o=1),this[e+s]=(t/a>>0)-o&255;return e+i},h.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*i-1);L(this,t,e,i,r-1,-r)}var s=i-1,a=1,o=0;for(this[e+s]=255&t;--s>=0&&(a*=256);)t<0&&0===o&&0!==this[e+s+1]&&(o=1),this[e+s]=(t/a>>0)-o&255;return e+i},h.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||L(this,t,e,1,127,-128),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||L(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},h.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||L(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},h.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||L(this,t,e,4,2147483647,-2147483648),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):k(this,t,e,!0),e+4},h.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||L(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):k(this,t,e,!1),e+4},h.prototype.writeFloatLE=function(t,e,i){return F(this,t,e,!0,i)},h.prototype.writeFloatBE=function(t,e,i){return F(this,t,e,!1,i)},h.prototype.writeDoubleLE=function(t,e,i){return B(this,t,e,!0,i)},h.prototype.writeDoubleBE=function(t,e,i){return B(this,t,e,!1,i)},h.prototype.copy=function(t,e,i,n){if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var r,s=n-i;if(this===t&&i<e&&e<n)for(r=s-1;r>=0;--r)t[r+e]=this[r+i];else if(s<1e3||!h.TYPED_ARRAY_SUPPORT)for(r=0;r<s;++r)t[r+e]=this[r+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+s),e);return s},h.prototype.fill=function(t,e,i,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!h.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var s;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(s=e;s<i;++s)this[s]=t;else{var a=h.isBuffer(t)?t:Y(new h(t,n).toString()),o=a.length;for(s=0;s<i-e;++s)this[s+e]=a[s%o]}return this};var N=/[^+\/0-9A-Za-z-_]/g;function G(t){return t<16?"0"+t.toString(16):t.toString(16)}function Y(t,e){var i;e=e||1/0;for(var n=t.length,r=null,s=[],a=0;a<n;++a){if((i=t.charCodeAt(a))>55295&&i<57344){if(!r){if(i>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&s.push(239,191,189);continue}r=i;continue}if(i<56320){(e-=3)>-1&&s.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&(e-=3)>-1&&s.push(239,191,189);if(r=null,i<128){if((e-=1)<0)break;s.push(i)}else if(i<2048){if((e-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return s}function z(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(N,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function U(t,e,i,n){for(var r=0;r<n&&!(r+i>=e.length||r>=t.length);++r)e[r+i]=t[r];return r}}).call(this,i(3))},function(t,e,i){(function(t){function i(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===i(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===i(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===i(t)},e.isError=function(t){return"[object Error]"===i(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,i(18).Buffer)},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(1),o=i(0),h=i(8),l=i(28),u=i(4),c=i(11),d=i(27),f=s(i(5)),p=s(i(2)),g=function(t){function e(i){var n=t.call(this,i)||this;return e.currentInstance=n,n.down_px=0,n.down_py=0,n.impulseFactor=0,n.aimDirectionVector=new f.Vector2D(1,0),n.shooting=!1,n.angle=180,n.down_px=null,n.down_py=null,n.startCue=0,n.startAng=0,n.startAim=!1,o.GameVars.isDesktop&&(n.scene.input.on("pointerup",n.shoot,n),n.scene.input.on("pointerdown",n.onDownDesktop,n)),n.visible=!1,n}return r(e,t),e.prototype.update=function(){!this.visible||this.shooting||o.GameVars.paused||p.SDK.replayMode||(o.GameVars.isDesktop?this.updateDesktop():this.updateMobile())},e.prototype.startGame=function(){this.visible=!0;var t=a.GameConstants.CUES_DATA,e=t[o.GameVars.gameData.cueID-1],i=(e=p.SDK.replayMode?t[o.GameVars.replayCueID-1]:t[o.GameVars.gameData.cueID-1]).id,n=i>=10?"cue_":"cue_0";this.cue=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_3",n+i+"_00"),this.cue.setOrigin(-.02,.5),this.add(this.cue),e["animation-frames"]>0?(this.cueSprite=new Phaser.GameObjects.Sprite(this.scene,0,0,"texture_atlas_3"),this.cueSprite.setOrigin(-.02,.5),this.cueSprite.anims.play("cue_anim_"+i),this.scene.add.existing(this.cueSprite),this.add(this.cueSprite)):this.cueSprite=null;var r=o.GameVars.billiardEngine.ballsArray[0];this.x=r.position.x*a.GameConstants.PHYS_SCALE,this.y=r.position.y*a.GameConstants.PHYS_SCALE},e.prototype.onTurnCompleted=function(){this.alphaTween&&this.alphaTween.remove(),this.visible=!0,this.alpha=1,this.rotation=Math.PI;var t=o.GameVars.billiardEngine.ballsArray[0];this.x=t.position.x*a.GameConstants.PHYS_SCALE,this.y=t.position.y*a.GameConstants.PHYS_SCALE,this.startCue=0,this.startAng=0,this.startAim=!1,this.aimDirectionVector=new f.Vector2D(1,0),this.scene.time.delayedCall(500,(function(){this.shooting=!1}),[],this)},e.prototype.onNewReplayTurn=function(){this.visible=!0,this.alpha=1;var t=o.GameVars.billiardEngine.ballsArray[0];this.x=t.position.x*a.GameConstants.PHYS_SCALE,this.y=t.position.y*a.GameConstants.PHYS_SCALE;var e=o.GameVars.shotData.cueSpeed;this.rotation=Math.atan2(-e.vy,-e.vx)},e.prototype.applyImpulse=function(){var t=0;if(p.SDK.replayMode){var i=o.GameVars.shotData.cueSpeed,n=new f.Vector2D(i.vx,i.vx).magnitude/f.Engine.CUE_MAX_IMPULSE*e.MAX_DELTA_CUE;this.scene.tweens.add({targets:this.cue,x:n,ease:Phaser.Math.Easing.Cubic.Out,duration:300}),t=850,this.visible=!0}this.scene.tweens.add({targets:[this.cue,this.cueSprite],x:-5,ease:Phaser.Math.Easing.Cubic.Out,duration:200,delay:t,onComplete:function(){p.SDK.replayMode?l.ReplayManager.currentInstance.onCueImpulseApplied():h.BoardManager.currentInstance.onCueImpulseApplied(),this.alphaTween=this.scene.tweens.add({targets:this,alpha:0,ease:Phaser.Math.Easing.Cubic.Out,duration:450,delay:200,onComplete:function(){this.visible=!1},onCompleteScope:this});var t=o.GameVars.shotData.cueSpeed.vx,e=o.GameVars.shotData.cueSpeed.vy,i=Math.sqrt(t*t+e*e)/f.Engine.CUE_MAX_IMPULSE;u.AudioManager.playSound("cue-hit",!1,i)},onCompleteScope:this})},e.prototype.shoot=function(){this.shooting||o.GameVars.paused||o.GameVars.restitutingBalls||(this.settingPower=!1,this.impulseFactor>0?(this.shooting=!0,h.BoardManager.currentInstance.shoot(this.impulseFactor,this.aimDirectionVector)):this.impulseFactor=0)},e.prototype.onDownDesktop=function(){this.shooting||o.GameVars.paused||o.GameVars.restitutingBalls||(this.settingPower=!0,this.down_px=this.scene.game.input.activePointer.x,this.down_py=this.scene.game.input.activePointer.y)},e.prototype.updateDesktop=function(){if(this.settingPower){var t=this.down_px-this.scene.game.input.activePointer.x,i=this.down_py-this.scene.game.input.activePointer.y,n=t*Math.cos(this.rotation)+i*Math.sin(this.rotation);this.impulseFactor=Math.floor(-Phaser.Math.Clamp(n,-e.MAX_DELTA_CUE,0)/e.MAX_DELTA_CUE*1e5)/1e5,this.cue.x=this.impulseFactor*e.MAX_DELTA_CUE,this.cueSprite&&(this.cueSprite.x=this.cue.x)}else{var r=this.x-this.scene.game.input.activePointer.x,s=this.y-this.scene.game.input.activePointer.y;this.rotation=Math.atan2(s+this.parentContainer.y,r+this.parentContainer.x),this.aimDirectionVector=new f.Vector2D(-Math.cos(this.rotation),-Math.sin(this.rotation))}},e.prototype.updateMobile=function(){if(this.settingPower)this.cue.x=this.impulseFactor*e.MAX_DELTA_CUE,this.cueSprite&&(this.cueSprite.x=this.cue.x);else if(this.scene.game.input.activePointer.isDown){var t=d.BallsContainer.currentInstance.balls[0].x,i=d.BallsContainer.currentInstance.balls[0].y,n=(this.scene.game.input.activePointer.x-c.BoardContainer.currentInstance.x)/(o.GameVars.scaleX*o.GameVars.correctionScale)-t,r=this.scene.game.input.activePointer.y-+c.BoardContainer.currentInstance.y-i;if(this.startAim){var s=180/Math.PI*Math.atan2(r,n),a=this.angleDiff(s,this.startAng);this.angle=this.startCue+a,this.aimDirectionVector=new f.Vector2D(-Math.cos(this.rotation),-Math.sin(this.rotation))}else this.startCue=this.angle,this.startAng=180/Math.PI*Math.atan2(r,n),this.startAim=!0}else this.startAim=!1},e.prototype.angleDiff=function(t,e){return this.wrapValue(t+180-e)-180},e.prototype.wrapValue=function(t){return t>360&&(t-=360),t<0&&(t+=360),t},e.MAX_DELTA_CUE=150,e}(Phaser.GameObjects.Container);e.CueContainer=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n extends Error{}e.default=n},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.deserialize=e.serialize=void 0;const r=n(i(52)),s=i(13),a=n(i(93));e.serialize=function(t,e){const i=e.serialize(t);return e instanceof r.default?i.slice(0,i.length-1):i},e.deserialize=function(t,e){e instanceof r.default&&(t=s.concat_byte_arrays([t,s.varint_encode(0)]));const i=new a.default(t,0);return e.deserialize(i)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n extends Error{}e.default=n},function(t,e,i){"use strict";(function(e){void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,i,n,r){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var s,a,o=arguments.length;switch(o){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,i)}));case 3:return e.nextTick((function(){t.call(null,i,n)}));case 4:return e.nextTick((function(){t.call(null,i,n,r)}));default:for(s=new Array(o-1),a=0;a<s.length;)s[a++]=arguments[a];return e.nextTick((function(){t.apply(null,s)}))}}}:t.exports=e}).call(this,i(14))},function(t,e,i){var n=i(18),r=n.Buffer;function s(t,e){for(var i in t)e[i]=t[i]}function a(t,e,i){return r(t,e,i)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(s(n,e),e.Buffer=a),s(r,a),a.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return r(t,e,i)},a.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=r(t);return void 0!==e?"string"==typeof i?n.fill(e,i):n.fill(e):n.fill(0),n},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(1),o=i(7),h=i(130),l=i(67),u=i(8),c=i(11),d=i(69),f=i(131),p=i(0),g=i(28),m=i(4),y=i(132),v=s(i(2)),_=function(t){function e(){var i=t.call(this,"BoardScene")||this;return e.currentInstance=i,i}return r(e,t),e.prototype.preload=function(){var t=v.SDK.landID;this.load.atlas("texture_atlas_hall","assets/texture_atlas_hall_"+t+".png","assets/texture_atlas_hall_"+t+".json"),this.scaledItemsContainer=this.add.container(),this.scaledItemsContainer.x=a.GameConstants.GAME_WIDTH/2,this.scaledItemsContainer.y=a.GameConstants.GAME_HEIGHT/2,this.scaledItemsContainer.scaleX=p.GameVars.scaleX,this.loadIcon=new Phaser.GameObjects.Image(this,0,0,"texture_atlas_0","load_icon"),this.scaledItemsContainer.add(this.loadIcon),this.tweens.add({targets:this.loadIcon,angle:360,ease:Phaser.Math.Easing.Linear,duration:2e3,repeat:-1})},e.prototype.create=function(){o.GameManager.setCurrentScene(this),this.scaledItemsContainer.destroy();var t=this.add.image(a.GameConstants.GAME_WIDTH/2,0,"texture_atlas_hall","bg");t.setOrigin(.5,0);var e=this.add.image(0,0,"texture_atlas_1","gradient");if(e.alpha=.6,e.setOrigin(0,0),e.scaleX=a.GameConstants.GAME_WIDTH,e.scaleY=.35,p.GameVars.isDesktop||t.setScale(1.25*p.GameVars.scaleX,1.15),this.hud=new h.HUD(this),this.add.existing(this.hud),this.addCueAnimations(),this.boardContainer=new c.BoardContainer(this),this.add.existing(this.boardContainer),this.gui=new l.GUI(this),this.add.existing(this.gui),v.SDK.replayMode?(this.boardManager=null,this.replayManager=new g.ReplayManager):(this.boardManager=new u.BoardManager,this.replayManager=null),Math.random()>.995){this.anims.create({key:"bug_walking",frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"bug_",start:1,end:15,zeroPad:4,suffix:""}),frameRate:20,repeat:-1,skipMissedFrames:!1});var i=new y.Bug(this);this.add.existing(i)}m.AudioManager.playSound("music_game",!0)},e.prototype.update=function(){null!==p.GameVars.billiardEngine&&(p.GameVars.shotRunnig&&(this.boardManager?this.boardManager.update():this.replayManager.update()),this.boardContainer.update(),this.hud.update(),this.gui.update(),this.spinCircleLayer&&this.spinCircleLayer.update())},e.prototype.startGame=function(){this.boardContainer.startGame(),this.hud.startGame()},e.prototype.showPauseMenu=function(){this.pauseLayer=new f.PauseLayer(this),this.add.existing(this.pauseLayer),m.AudioManager.setLoopVolume(1,.4)},e.prototype.hidePauseMenu=function(){this.pauseLayer.destroy(),m.AudioManager.setLoopVolume(.4,1)},e.prototype.onTurnCompleted=function(){this.boardContainer.onTurnCompleted(),this.gui.onTurnCompleted()},e.prototype.showSpinCircleLayer=function(){this.spinCircleLayer=new d.SpinCircleLayer(this),this.add.existing(this.spinCircleLayer),m.AudioManager.setLoopVolume(1,.4)},e.prototype.hideSpinCircleLayer=function(){this.spinCircleLayer.destroy(),this.spinCircleLayer=null,this.gui.cueBallSpinButton.setRedPointPosition(),m.AudioManager.setLoopVolume(.4,1)},e.prototype.onBallPocketed=function(t,e,i){this.boardContainer.onBallPocketed(t,e,i),0!==t&&(this.hud.onBallPocketed(),m.AudioManager.playSound("pocket-hit"))},e.prototype.restituteAllBalls=function(){this.hud.onRackCleared(),this.boardContainer.restituteAllBalls()},e.prototype.onGameOver=function(){return this.hud.onGameOver(),u.BoardManager.currentInstance.disableScore()},e.prototype.onBoosterPurchased=function(){this.hud.onBoosterPurchased()},e.prototype.onBoosterActivated=function(){this.hud.onBoosterActivated()},e.prototype.addCueAnimations=function(){for(var t=a.GameConstants.CUES_DATA,e=0;e<t.length;e++)if(t[e]["animation-frames"]>0){var i=t[e].id,n="cue_anim_"+i,r=i>=10?"cue_"+i+"_":"cue_0"+i+"_",s=t[e]["animation-frames"];this.anims.create({key:n,frames:this.anims.generateFrameNames("texture_atlas_3",{prefix:r,start:1,end:s,zeroPad:2,suffix:""}),frameRate:18,repeat:-1})}},e}(Phaser.Scene);e.BoardScene=_},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(1),o=i(0),h=i(41),l=i(8),u=i(28),c=s(i(2)),d=i(11),f=function(t){function e(i){var n=t.call(this,i)||this;return e.currentInstance=n,n.balls=[],n.shadowsContainer=new Phaser.GameObjects.Container(n.scene),n.add(n.shadowsContainer),n.ballsContainer=new Phaser.GameObjects.Container(n.scene),n.add(n.ballsContainer),n}return r(e,t),e.prototype.setBalls=function(){this.balls=[];for(var t=o.GameVars.billiardEngine.ballsArray,e=0;e<t.length;e++){var i=t[e];if(i.active){var n=new h.Ball(this.scene,a.GameConstants.BALL_RADIUS*a.GameConstants.PHYS_SCALE,t[e]);n.x=i.position.x*a.GameConstants.PHYS_SCALE,n.y=i.position.y*a.GameConstants.PHYS_SCALE,n.setShadowPosition(),this.balls.push(n),this.ballsContainer.add(n),this.shadowsContainer.add(n.shadow)}}d.BoardContainer.currentInstance.onAllBallsRestituted()},e.prototype.update=function(){if(o.GameVars.shotRunnig)for(var t=0;t<this.balls.length;t++)this.balls[t].update()},e.prototype.onBallPocketed=function(t,e,i){var n=this.getBall(t);n&&n.pocket(e,i)},e.prototype.restituteCueBall=function(){var t=o.GameVars.billiardEngine.ballsArray[0],e=new h.Ball(this.scene,a.GameConstants.BALL_RADIUS*a.GameConstants.PHYS_SCALE,t);e.x=t.position.x*a.GameConstants.PHYS_SCALE,e.y=t.position.y*a.GameConstants.PHYS_SCALE,e.setShadowPosition(),this.balls.unshift(e),this.ballsContainer.add(e),this.shadowsContainer.add(e.shadow)},e.prototype.restituteAllBalls=function(){var t=this.balls.shift();t&&(t.pocketed?t.destroy():t.removeFromBoard()),this.scene.time.delayedCall(1500,(function(){this.setBalls(),c.SDK.replayMode?u.ReplayManager.currentInstance.onNewBallsOnBoard():l.BoardManager.currentInstance.onNewBallsOnBoard()}),[],this)},e.prototype.removeBall=function(t){var e=this.balls.indexOf(t);-1!==e?this.balls.splice(e,1):console.log("ERROR. BOLA NO ENCONTRADA"),this.ballsContainer.remove(t),t.destroy()},e.prototype.getBall=function(t){for(var e=null,i=0;i<this.balls.length;i++)if(this.balls[i].ballObject.id===t){e=this.balls[i];break}return e},e}(Phaser.GameObjects.Container);e.BallsContainer=f},function(t,e,i){"use strict";var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),s=n(i(2)),a=n(i(5)),o=i(26),h=i(20),l=i(11),u=i(68),c=function(){function t(){t.currentInstance=this,this.i=0,this.hasBoosterBeenPurchased=!1,this.isBoosterActivated=!1,this.gameOver=!1,r.GameVars.billiardEngine=null,r.GameVars.shotRunnig=!1,r.GameVars.shotData=null,r.GameVars.replayCueID=1;s.SDK.onReplayStart({position:"down",backgroundColor:1449038,gradient:"vertical",fontColor:"#CCCCCC"}),this.startReplay()}return t.prototype.update=function(){r.GameVars.billiardEngine.update()},t.prototype.startReplay=function(){for(var t,e=0;e<r.GameVars.actionsLog.length;e++){var i=r.GameVars.actionsLog[e];i.type===s.ActionType.CONFIG?(r.GameVars.replayCueID=i.data.cueID,t=i.data.fee):i.type===s.ActionType.PURCHASE_BOOSTER&&(this.hasBoosterBeenPurchased=!0)}r.GameVars.billiardEngine=new a.Engine,r.GameVars.billiardEngine.init(null,0===t),r.GameVars.billiardEngine.addEventListener(a.Event.CUE_BALL_RESTITUTED,this.onCueBallRestituted,this),r.GameVars.billiardEngine.addEventListener(a.Event.TURN_COMPLETED,this.onTurnCompleted,this),r.GameVars.billiardEngine.addEventListener(a.Event.CONTACT,this.onContact,this),r.GameVars.billiardEngine.addEventListener(a.Event.ALL_BALLS_RESTITUTED,this.onAllBallsRestituted,this),r.GameVars.billiardEngine.addEventListener(a.Event.CUEBALL_COLLISION_WITH_BORDER,this.onCueBalCollisionWithBorder,this),r.GameVars.billiardEngine.addEventListener(a.Event.COMBO,this.onCombo,this),r.GameVars.billiardEngine.addEventListener(a.Event.GAME_OVER,this.onGameOver,this),this.processAction()},t.prototype.onCueImpulseApplied=function(){r.GameVars.shotRunnig=!0,r.GameVars.billiardEngine.shoot(r.GameVars.shotData)},t.prototype.onNewBallsOnBoard=function(){r.GameVars.restitutingBalls=!1,this.onTurnCompleted()},t.prototype.processAction=function(){if(this.i===r.GameVars.actionsLog.length&&!this.gameOver)return this.gameOver=!0,void s.SDK.onReplayGameOver();var e=r.GameVars.actionsLog[this.i];switch(this.i++,e.type){case s.ActionType.START_GAME:var i=e.data.seed;r.GameVars.billiardEngine.setSeed(i),o.BoardScene.currentInstance.startGame(),r.GameVars.currentScene.time.delayedCall(t.PROCESSING_ACTIONS_DELAY,(function(){this.processAction()}),[],this);break;case s.ActionType.CONFIG:this.processAction();break;case s.ActionType.SKIP_GAME:this.onGameOver();break;case a.ActionType.SHOT:var n=e.data;r.GameVars.shotData={cueSpeed:{vx:n.cueSpeed.vx,vy:n.cueSpeed.vy},deltaScrew:{x:n.deltaScrew.x,y:n.deltaScrew.y},english:n.english};var l=r.GameVars.actionsLog[this.i++];if(l.type===s.ActionType.SET_SEED){var c=l.data.seed;r.GameVars.billiardEngine.setSeed(c),h.CueContainer.currentInstance.applyImpulse(),u.CueBallSpinButton.currentInstance.setRedPointPosition(n.english,n.verticalSpeed),h.CueContainer.currentInstance.onNewReplayTurn()}break;case s.ActionType.PURCHASE_BOOSTER:this.isBoosterActivated=!0,o.BoardScene.currentInstance.hud.onBoosterPurchased()}},t.prototype.onTurnCompleted=function(){r.GameVars.shotRunnig=!1,u.CueBallSpinButton.currentInstance.setRedPointPosition(0,0),l.BoardContainer.currentInstance.setPocketMultiplier();var e=this;r.GameVars.currentScene.time.delayedCall(t.PROCESSING_ACTIONS_DELAY,(function(){e.isBoosterActivated&&(e.isBoosterActivated=!1,r.GameVars.billiardEngine.onBoosterPurchased()),e.gameOver||e.processAction()}),[],this)},t.prototype.onContact=function(t){var e=t.ball.id;switch(t.collisionType){case a.ContactType.BALL:l.BoardContainer.currentInstance.onBallsHit(t);break;case a.ContactType.LINE:case a.ContactType.VERTEX:l.BoardContainer.currentInstance.onCushionHit(t);break;case a.ContactType.POCKET:var i=t.target,n=t.speed;o.BoardScene.currentInstance.onBallPocketed(e,i,n)}},t.prototype.onCueBallRestituted=function(t){r.GameVars.restitutingBalls||l.BoardContainer.currentInstance.restituteCueBall(t)},t.prototype.onAllBallsRestituted=function(){r.GameVars.restitutingBalls=!0,r.GameVars.shotRunnig=!1,o.BoardScene.currentInstance.restituteAllBalls()},t.prototype.onCueBalCollisionWithBorder=function(t,e,i){l.BoardContainer.currentInstance.onCueBalCollisionWithBorder(t,e,i)},t.prototype.onCombo=function(t){o.BoardScene.currentInstance.hud.onCombo(t)},t.prototype.onGameOver=function(){if(this.hasBoosterBeenPurchased)return this.hasBoosterBeenPurchased=!1,void this.processAction();this.gameOver||(this.gameOver=!0,s.SDK.onReplayGameOver()),o.BoardScene.currentInstance.hud.onGameOver()},t.PROCESSING_ACTIONS_DELAY=750,t}();e.ReplayManager=c},function(t,e,i){"use strict";var n=this&&this.__read||function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,s=i.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return a},r=this&&this.__spreadArray||function(t,e){for(var i=0,n=e.length,r=t.length;i<n;i++,r++)t[r]=e[i];return t},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.signatureToString=e.stringToSignature=e.privateKeyToString=e.privateKeyToLegacyString=e.stringToPrivateKey=e.convertLegacyPublicKeys=e.convertLegacyPublicKey=e.publicKeyToString=e.publicKeyToLegacyString=e.stringToPublicKey=e.signatureDataSize=e.privateKeyDataSize=e.publicKeyDataSize=e.KeyType=e.base64ToBinary=e.binaryToBase58=e.base58ToBinary=e.signedBinaryToDecimal=e.binaryToDecimal=e.signedDecimalToBinary=e.decimalToBinary=e.negate=e.isNegative=void 0;var a=i(77),o=i(84).RIPEMD160.hash,h="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=function(){for(var t=Array(256).fill(-1),e=0;e<h.length;++e)t[h.charCodeAt(e)]=e;return t}(),c=function(){for(var t=Array(256).fill(-1),e=0;e<l.length;++e)t[l.charCodeAt(e)]=e;return t["=".charCodeAt(0)]=0,t}();e.isNegative=function(t){return 0!=(128&t[t.length-1])};e.negate=function(t){for(var e=1,i=0;i<t.length;++i){var n=(255&~t[i])+e;t[i]=n,e=n>>8}};e.decimalToBinary=function(t,e){for(var i=new Uint8Array(t),n=0;n<e.length;++n){var r=e.charCodeAt(n);if(r<"0".charCodeAt(0)||r>"9".charCodeAt(0))throw new Error("invalid number");for(var s=r-"0".charCodeAt(0),a=0;a<t;++a){var o=10*i[a]+s;i[a]=o,s=o>>8}if(s)throw new Error("number is out of range")}return i};e.signedDecimalToBinary=function(t,i){var n="-"===i[0];n&&(i=i.substr(1));var r=e.decimalToBinary(t,i);if(n){if(e.negate(r),!e.isNegative(r))throw new Error("number is out of range")}else if(e.isNegative(r))throw new Error("number is out of range");return r};e.binaryToDecimal=function(t,e){void 0===e&&(e=1);for(var i=Array(e).fill("0".charCodeAt(0)),s=t.length-1;s>=0;--s){for(var a=t[s],o=0;o<i.length;++o){var h=(i[o]-"0".charCodeAt(0)<<8)+a;i[o]="0".charCodeAt(0)+h%10,a=h/10|0}for(;a;)i.push("0".charCodeAt(0)+a%10),a=a/10|0}return i.reverse(),String.fromCharCode.apply(String,r([],n(i)))};e.signedBinaryToDecimal=function(t,i){if(void 0===i&&(i=1),e.isNegative(t)){var n=t.slice();return e.negate(n),"-"+e.binaryToDecimal(n,i)}return e.binaryToDecimal(t,i)};e.base58ToBinary=function(t,e){if(!t)return function(t){for(var e,i,n=[],r=0;r<t.length;++r){var a=u[t.charCodeAt(r)];if(a<0)throw new Error("invalid base-58 value");for(var o=0;o<n.length;++o){var h=58*n[o]+a;n[o]=255&h,a=h>>8}a&&n.push(a)}try{for(var l=s(t),c=l.next();!c.done;c=l.next()){if("1"!==c.value)break;n.push(0)}}catch(t){e={error:t}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(e)throw e.error}}return n.reverse(),new Uint8Array(n)}(e);for(var i=new Uint8Array(t),n=0;n<e.length;++n){var r=u[e.charCodeAt(n)];if(r<0)throw new Error("invalid base-58 value");for(var a=0;a<t;++a){var o=58*i[a]+r;i[a]=o,r=o>>8}if(r)throw new Error("base-58 value is out of range")}return i.reverse(),i};e.binaryToBase58=function(t,e){var i,a,o,l;void 0===e&&(e=1);var c=[];try{for(var d=s(t),f=d.next();!f.done;f=d.next()){for(var p=f.value,g=0;g<c.length;++g){var m=(u[c[g]]<<8)+p;c[g]=h.charCodeAt(m%58),p=m/58|0}for(;p;)c.push(h.charCodeAt(p%58)),p=p/58|0}}catch(t){i={error:t}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}try{for(var y=s(t),v=y.next();!v.done;v=y.next()){if(v.value)break;c.push("1".charCodeAt(0))}}catch(t){o={error:t}}finally{try{v&&!v.done&&(l=y.return)&&l.call(y)}finally{if(o)throw o.error}}return c.reverse(),String.fromCharCode.apply(String,r([],n(c)))};var d;e.base64ToBinary=function(t){var e=t.length;if(1==(3&e)&&"="===t[e-1]&&(e-=1),0!=(3&e))throw new Error("base-64 value is not padded correctly");var i=e>>2,n=3*i;e>0&&"="===t[e-1]&&("="===t[e-2]?n-=2:n-=1);for(var r=new Uint8Array(n),s=0;s<i;++s){var a=c[t.charCodeAt(4*s+0)],o=c[t.charCodeAt(4*s+1)],h=c[t.charCodeAt(4*s+2)],l=c[t.charCodeAt(4*s+3)];r[3*s+0]=a<<2|o>>4,3*s+1<n&&(r[3*s+1]=(15&o)<<4|h>>2),3*s+2<n&&(r[3*s+2]=(3&h)<<6|l)}return r},function(t){t[t.k1=0]="k1",t[t.r1=1]="r1",t[t.wa=2]="wa"}(d=e.KeyType||(e.KeyType={})),e.publicKeyDataSize=33,e.privateKeyDataSize=32,e.signatureDataSize=65;var f=function(t,e){for(var i=new Uint8Array(t.length+e.length),n=0;n<t.length;++n)i[n]=t[n];for(n=0;n<e.length;++n)i[t.length+n]=e.charCodeAt(n);return o(i)},p=function(t,i,n,r){var s=e.base58ToBinary(n?n+4:0,t),a={type:i,data:new Uint8Array(s.buffer,0,s.length-4)},o=new Uint8Array(f(a.data,r));if(o[0]!==s[s.length-4]||o[1]!==s[s.length-3]||o[2]!==s[s.length-2]||o[3]!==s[s.length-1])throw new Error("checksum doesn't match");return a},g=function(t,i,n){for(var r=new Uint8Array(f(t.data,i)),s=new Uint8Array(t.data.length+4),a=0;a<t.data.length;++a)s[a]=t.data[a];for(a=0;a<4;++a)s[a+t.data.length]=r[a];return n+e.binaryToBase58(s)};e.stringToPublicKey=function(t){if("string"!=typeof t)throw new Error("expected string containing public key");if("EOS"===t.substr(0,3)){for(var i=e.base58ToBinary(e.publicKeyDataSize+4,t.substr(3)),n={type:d.k1,data:new Uint8Array(e.publicKeyDataSize)},r=0;r<e.publicKeyDataSize;++r)n.data[r]=i[r];var s=new Uint8Array(o(n.data));if(s[0]!==i[e.publicKeyDataSize]||s[1]!==i[34]||s[2]!==i[35]||s[3]!==i[36])throw new Error("checksum doesn't match");return n}if("PUB_K1_"===t.substr(0,7))return p(t.substr(7),d.k1,e.publicKeyDataSize,"K1");if("PUB_R1_"===t.substr(0,7))return p(t.substr(7),d.r1,e.publicKeyDataSize,"R1");if("PUB_WA_"===t.substr(0,7))return p(t.substr(7),d.wa,0,"WA");throw new Error("unrecognized public key format")};e.publicKeyToLegacyString=function(t){if(t.type===d.k1&&t.data.length===e.publicKeyDataSize)return g(t,"","EOS");throw t.type===d.r1||t.type===d.wa?new Error("Key format not supported in legacy conversion"):new Error("unrecognized public key format")};e.publicKeyToString=function(t){if(t.type===d.k1&&t.data.length===e.publicKeyDataSize)return g(t,"K1","PUB_K1_");if(t.type===d.r1&&t.data.length===e.publicKeyDataSize)return g(t,"R1","PUB_R1_");if(t.type===d.wa)return g(t,"WA","PUB_WA_");throw new Error("unrecognized public key format")};e.convertLegacyPublicKey=function(t){return"EOS"===t.substr(0,3)?e.publicKeyToString(e.stringToPublicKey(t)):t};e.convertLegacyPublicKeys=function(t){return t.map(e.convertLegacyPublicKey)};e.stringToPrivateKey=function(t){if("string"!=typeof t)throw new Error("expected string containing private key");if("PVT_R1_"===t.substr(0,7))return p(t.substr(7),d.r1,e.privateKeyDataSize,"R1");if("PVT_K1_"===t.substr(0,7))return p(t.substr(7),d.k1,e.privateKeyDataSize,"K1");var i=e.base58ToBinary(e.privateKeyDataSize+5,t),n={type:d.k1,data:new Uint8Array(e.privateKeyDataSize)};if(128!==i[0])throw new Error("unrecognized private key type");for(var r=0;r<e.privateKeyDataSize;++r)n.data[r]=i[r+1];return n};e.privateKeyToLegacyString=function(t){if(t.type===d.k1&&t.data.length===e.privateKeyDataSize){var i=[];i.push(128),t.data.forEach((function(t){return i.push(t)}));for(var n=new Uint8Array(a.sha256().update(a.sha256().update(i).digest()).digest()),r=new Uint8Array(e.privateKeyDataSize+5),s=0;s<i.length;s++)r[s]=i[s];for(s=0;s<4;s++)r[s+i.length]=n[s];return e.binaryToBase58(r)}throw t.type===d.r1||t.type===d.wa?new Error("Key format not supported in legacy conversion"):new Error("unrecognized public key format")};e.privateKeyToString=function(t){if(t.type===d.r1)return g(t,"R1","PVT_R1_");if(t.type===d.k1)return g(t,"K1","PVT_K1_");throw new Error("unrecognized private key format")};e.stringToSignature=function(t){if("string"!=typeof t)throw new Error("expected string containing signature");if("SIG_K1_"===t.substr(0,7))return p(t.substr(7),d.k1,e.signatureDataSize,"K1");if("SIG_R1_"===t.substr(0,7))return p(t.substr(7),d.r1,e.signatureDataSize,"R1");if("SIG_WA_"===t.substr(0,7))return p(t.substr(7),d.wa,0,"WA");throw new Error("unrecognized signature format")};e.signatureToString=function(t){if(t.type===d.k1)return g(t,"K1","SIG_K1_");if(t.type===d.r1)return g(t,"R1","SIG_R1_");if(t.type===d.wa)return g(t,"WA","SIG_WA_");throw new Error("unrecognized signature format")}},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.toAttributeMap=e.ActionGenerator=void 0;const r=n(i(21));e.ActionGenerator=class{constructor(t){this.contract=t}async acceptoffer(t,e){return this._pack(t,"acceptoffer",{offer_id:e})}async addcolauth(t,e,i){return this._pack(t,"addcolauth",{collection_name:e,account_to_add:i})}async addconftoken(t,e,i){return this._pack(t,"addconftoken",{token_contract:e,token_symbol:i})}async addnotifyacc(t,e,i){return this._pack(t,"addnotifyacc",{collection_name:e,account_to_add:i})}async announcedepo(t,e,i){return this._pack(t,"announcedepo",{owner:e,symbol_to_announce:i})}async backasset(t,e,i,n,r){return this._pack(t,"backasset",{payer:e,asset_owner:i,asset_id:n,token_to_back:r})}async burnasset(t,e,i){return this._pack(t,"burnasset",{asset_owner:e,asset_id:i})}async canceloffer(t,e){return this._pack(t,"canceloffer",{offer_id:e})}async createcol(t,e,i,n,r,s,a,o){return this._pack(t,"createcol",{author:e,collection_name:i,allow_notify:n,authorized_accounts:r,notify_accounts:s,market_fee:a,data:o})}async createoffer(t,e,i,n,r,s){return this._pack(t,"createoffer",{sender:e,recipient:i,sender_asset_ids:n,recipient_asset_ids:r,memo:s})}async createtempl(t,e,i,n,r,s,a,o){return this._pack(t,"createtempl",{authorized_creator:e,collection_name:i,schema_name:n,transferable:r,burnable:s,max_supply:a,immutable_data:o})}async createschema(t,e,i,n,r){return this._pack(t,"createschema",{authorized_creator:e,collection_name:i,schema_name:n,schema_format:r})}async declineoffer(t,e){return this._pack(t,"declineoffer",{offer_id:e})}async extendschema(t,e,i,n,r){return this._pack(t,"extendschema",{authorized_editor:e,collection_name:i,schema_name:n,schema_format_extension:r})}async forbidnotify(t,e){return this._pack(t,"forbidnotify",{collection_name:e})}async locktemplate(t,e,i,n){return this._pack(t,"locktemplate",{authorized_editor:e,collection_name:i,template_id:n})}async mintasset(t,e,i,n,r,s,a,o,h){return this._pack(t,"mintasset",{authorized_minter:e,collection_name:i,schema_name:n,template_id:r,new_asset_owner:s,immutable_data:a,mutable_data:o,tokens_to_back:h})}async payofferram(t,e,i){return this._pack(t,"payofferram",{payer:e,offer_id:i})}async remcolauth(t,e,i){return this._pack(t,"remcolauth",{collection_name:e,account_to_remove:i})}async remnotifyacc(t,e,i){return this._pack(t,"remnotifyacc",{collection_name:e,account_to_remove:i})}async setassetdata(t,e,i,n,r){return this._pack(t,"setassetdata",{authorized_editor:e,asset_owner:i,asset_id:n,new_mutable_data:r})}async setcoldata(t,e,i){return this._pack(t,"setcoldata",{collection_name:e,data:i})}async setmarketfee(t,e,i){return this._pack(t,"setmarketfee",{collection_name:e,market_fee:i})}async transfer(t,e,i,n,r){return this._pack(t,"transfer",{from:e,to:i,asset_ids:n,memo:r})}async withdraw(t,e,i){return this._pack(t,"withdraw",{owner:e,token_to_withdraw:i})}_pack(t,e,i){return[{account:this.contract,name:e,authorization:t,data:i}]}},e.toAttributeMap=function(t,e){const i={},n=[];for(const t of e)i[t.name]=t.type;const s=Object.keys(t);for(const e of s){if(void 0!==i[e])throw new r.default("field not defined in schema");n.push({key:e,value:[i[e],t[e]]})}return n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n extends Error{}e.default=n},function(t,e,i){(function(t){var n,r=function(t){"use strict";var e=1e7,i=9007199254740992,n=c(i),s="function"==typeof BigInt;function a(t,e,i,n){return void 0===t?a[0]:void 0!==e&&(10!=+e||i)?Y(t,e,i,n):H(t)}function o(t,e){this.value=t,this.sign=e,this.isSmall=!1}function h(t){this.value=t,this.sign=t<0,this.isSmall=!0}function l(t){this.value=t}function u(t){return-i<t&&t<i}function c(t){return t<1e7?[t]:t<1e14?[t%1e7,Math.floor(t/1e7)]:[t%1e7,Math.floor(t/1e7)%1e7,Math.floor(t/1e14)]}function d(t){f(t);var i=t.length;if(i<4&&O(t,n)<0)switch(i){case 0:return 0;case 1:return t[0];case 2:return t[0]+t[1]*e;default:return t[0]+(t[1]+t[2]*e)*e}return t}function f(t){for(var e=t.length;0===t[--e];);t.length=e+1}function p(t){for(var e=new Array(t),i=-1;++i<t;)e[i]=0;return e}function g(t){return t>0?Math.floor(t):Math.ceil(t)}function m(t,i){var n,r,s=t.length,a=i.length,o=new Array(s),h=0,l=e;for(r=0;r<a;r++)h=(n=t[r]+i[r]+h)>=l?1:0,o[r]=n-h*l;for(;r<s;)h=(n=t[r]+h)===l?1:0,o[r++]=n-h*l;return h>0&&o.push(h),o}function y(t,e){return t.length>=e.length?m(t,e):m(e,t)}function v(t,i){var n,r,s=t.length,a=new Array(s),o=e;for(r=0;r<s;r++)n=t[r]-o+i,i=Math.floor(n/o),a[r]=n-i*o,i+=1;for(;i>0;)a[r++]=i%o,i=Math.floor(i/o);return a}function _(t,e){var i,n,r=t.length,s=e.length,a=new Array(r),o=0;for(i=0;i<s;i++)(n=t[i]-o-e[i])<0?(n+=1e7,o=1):o=0,a[i]=n;for(i=s;i<r;i++){if(!((n=t[i]-o)<0)){a[i++]=n;break}n+=1e7,a[i]=n}for(;i<r;i++)a[i]=t[i];return f(a),a}function x(t,e,i){var n,r,s=t.length,a=new Array(s),l=-e;for(n=0;n<s;n++)r=t[n]+l,l=Math.floor(r/1e7),r%=1e7,a[n]=r<0?r+1e7:r;return"number"==typeof(a=d(a))?(i&&(a=-a),new h(a)):new o(a,i)}function w(t,e){var i,n,r,s,a=t.length,o=e.length,h=p(a+o);for(r=0;r<a;++r){s=t[r];for(var l=0;l<o;++l)i=s*e[l]+h[r+l],n=Math.floor(i/1e7),h[r+l]=i-1e7*n,h[r+l+1]+=n}return f(h),h}function b(t,i){var n,r,s=t.length,a=new Array(s),o=e,h=0;for(r=0;r<s;r++)n=t[r]*i+h,h=Math.floor(n/o),a[r]=n-h*o;for(;h>0;)a[r++]=h%o,h=Math.floor(h/o);return a}function T(t,e){for(var i=[];e-- >0;)i.push(0);return i.concat(t)}function E(t,i,n){return new o(t<e?b(i,t):w(i,c(t)),n)}function A(t){var e,i,n,r,s=t.length,a=p(s+s);for(n=0;n<s;n++){i=0-(r=t[n])*r;for(var o=n;o<s;o++)e=r*t[o]*2+a[n+o]+i,i=Math.floor(e/1e7),a[n+o]=e-1e7*i;a[n+s]=i}return f(a),a}function S(t,e){var i,n,r,s,a=t.length,o=p(a);for(r=0,i=a-1;i>=0;--i)r=(s=1e7*r+t[i])-(n=g(s/e))*e,o[i]=0|n;return[o,0|r]}function C(t,i){var n,r=H(i);if(s)return[new l(t.value/r.value),new l(t.value%r.value)];var u,m=t.value,y=r.value;if(0===y)throw new Error("Cannot divide by zero");if(t.isSmall)return r.isSmall?[new h(g(m/y)),new h(m%y)]:[a[0],t];if(r.isSmall){if(1===y)return[t,a[0]];if(-1==y)return[t.negate(),a[0]];var v=Math.abs(y);if(v<e){u=d((n=S(m,v))[0]);var x=n[1];return t.sign&&(x=-x),"number"==typeof u?(t.sign!==r.sign&&(u=-u),[new h(u),new h(x)]):[new o(u,t.sign!==r.sign),new h(x)]}y=c(v)}var w=O(m,y);if(-1===w)return[a[0],t];if(0===w)return[a[t.sign===r.sign?1:-1],a[0]];u=(n=m.length+y.length<=200?function(t,i){var n,r,s,a,o,h,l,u=t.length,c=i.length,f=e,g=p(i.length),m=i[c-1],y=Math.ceil(f/(2*m)),v=b(t,y),_=b(i,y);for(v.length<=u&&v.push(0),_.push(0),m=_[c-1],r=u-c;r>=0;r--){for(n=f-1,v[r+c]!==m&&(n=Math.floor((v[r+c]*f+v[r+c-1])/m)),s=0,a=0,h=_.length,o=0;o<h;o++)s+=n*_[o],l=Math.floor(s/f),a+=v[r+o]-(s-l*f),s=l,a<0?(v[r+o]=a+f,a=-1):(v[r+o]=a,a=0);for(;0!==a;){for(n-=1,s=0,o=0;o<h;o++)(s+=v[r+o]-f+_[o])<0?(v[r+o]=s+f,s=0):(v[r+o]=s,s=1);a+=s}g[r]=n}return v=S(v,y)[0],[d(g),d(v)]}(m,y):function(t,e){for(var i,n,r,s,a,o=t.length,h=e.length,l=[],u=[];o;)if(u.unshift(t[--o]),f(u),O(u,e)<0)l.push(0);else{r=1e7*u[(n=u.length)-1]+u[n-2],s=1e7*e[h-1]+e[h-2],n>h&&(r=1e7*(r+1)),i=Math.ceil(r/s);do{if(O(a=b(e,i),u)<=0)break;i--}while(i);l.push(i),u=_(u,a)}return l.reverse(),[d(l),d(u)]}(m,y))[0];var T=t.sign!==r.sign,E=n[1],A=t.sign;return"number"==typeof u?(T&&(u=-u),u=new h(u)):u=new o(u,T),"number"==typeof E?(A&&(E=-E),E=new h(E)):E=new o(E,A),[u,E]}function O(t,e){if(t.length!==e.length)return t.length>e.length?1:-1;for(var i=t.length-1;i>=0;i--)if(t[i]!==e[i])return t[i]>e[i]?1:-1;return 0}function P(t){var e=t.abs();return!e.isUnit()&&(!!(e.equals(2)||e.equals(3)||e.equals(5))||!(e.isEven()||e.isDivisibleBy(3)||e.isDivisibleBy(5))&&(!!e.lesser(49)||void 0))}function R(t,e){for(var i,n,s,a=t.prev(),o=a,h=0;o.isEven();)o=o.divide(2),h++;t:for(n=0;n<e.length;n++)if(!t.lesser(e[n])&&!(s=r(e[n]).modPow(o,t)).isUnit()&&!s.equals(a)){for(i=h-1;0!=i;i--){if((s=s.square().mod(t)).isUnit())return!1;if(s.equals(a))continue t}return!1}return!0}o.prototype=Object.create(a.prototype),h.prototype=Object.create(a.prototype),l.prototype=Object.create(a.prototype),o.prototype.add=function(t){var e=H(t);if(this.sign!==e.sign)return this.subtract(e.negate());var i=this.value,n=e.value;return e.isSmall?new o(v(i,Math.abs(n)),this.sign):new o(y(i,n),this.sign)},o.prototype.plus=o.prototype.add,h.prototype.add=function(t){var e=H(t),i=this.value;if(i<0!==e.sign)return this.subtract(e.negate());var n=e.value;if(e.isSmall){if(u(i+n))return new h(i+n);n=c(Math.abs(n))}return new o(v(n,Math.abs(i)),i<0)},h.prototype.plus=h.prototype.add,l.prototype.add=function(t){return new l(this.value+H(t).value)},l.prototype.plus=l.prototype.add,o.prototype.subtract=function(t){var e=H(t);if(this.sign!==e.sign)return this.add(e.negate());var i=this.value,n=e.value;return e.isSmall?x(i,Math.abs(n),this.sign):function(t,e,i){var n;return O(t,e)>=0?n=_(t,e):(n=_(e,t),i=!i),"number"==typeof(n=d(n))?(i&&(n=-n),new h(n)):new o(n,i)}(i,n,this.sign)},o.prototype.minus=o.prototype.subtract,h.prototype.subtract=function(t){var e=H(t),i=this.value;if(i<0!==e.sign)return this.add(e.negate());var n=e.value;return e.isSmall?new h(i-n):x(n,Math.abs(i),i>=0)},h.prototype.minus=h.prototype.subtract,l.prototype.subtract=function(t){return new l(this.value-H(t).value)},l.prototype.minus=l.prototype.subtract,o.prototype.negate=function(){return new o(this.value,!this.sign)},h.prototype.negate=function(){var t=this.sign,e=new h(-this.value);return e.sign=!t,e},l.prototype.negate=function(){return new l(-this.value)},o.prototype.abs=function(){return new o(this.value,!1)},h.prototype.abs=function(){return new h(Math.abs(this.value))},l.prototype.abs=function(){return new l(this.value>=0?this.value:-this.value)},o.prototype.multiply=function(t){var i,n,r,s=H(t),h=this.value,l=s.value,u=this.sign!==s.sign;if(s.isSmall){if(0===l)return a[0];if(1===l)return this;if(-1===l)return this.negate();if((i=Math.abs(l))<e)return new o(b(h,i),u);l=c(i)}return n=h.length,r=l.length,new o(-.012*n-.012*r+15e-6*n*r>0?function t(e,i){var n=Math.max(e.length,i.length);if(n<=30)return w(e,i);n=Math.ceil(n/2);var r=e.slice(n),s=e.slice(0,n),a=i.slice(n),o=i.slice(0,n),h=t(s,o),l=t(r,a),u=t(y(s,r),y(o,a)),c=y(y(h,T(_(_(u,h),l),n)),T(l,2*n));return f(c),c}(h,l):w(h,l),u)},o.prototype.times=o.prototype.multiply,h.prototype._multiplyBySmall=function(t){return u(t.value*this.value)?new h(t.value*this.value):E(Math.abs(t.value),c(Math.abs(this.value)),this.sign!==t.sign)},o.prototype._multiplyBySmall=function(t){return 0===t.value?a[0]:1===t.value?this:-1===t.value?this.negate():E(Math.abs(t.value),this.value,this.sign!==t.sign)},h.prototype.multiply=function(t){return H(t)._multiplyBySmall(this)},h.prototype.times=h.prototype.multiply,l.prototype.multiply=function(t){return new l(this.value*H(t).value)},l.prototype.times=l.prototype.multiply,o.prototype.square=function(){return new o(A(this.value),!1)},h.prototype.square=function(){var t=this.value*this.value;return u(t)?new h(t):new o(A(c(Math.abs(this.value))),!1)},l.prototype.square=function(t){return new l(this.value*this.value)},o.prototype.divmod=function(t){var e=C(this,t);return{quotient:e[0],remainder:e[1]}},l.prototype.divmod=h.prototype.divmod=o.prototype.divmod,o.prototype.divide=function(t){return C(this,t)[0]},l.prototype.over=l.prototype.divide=function(t){return new l(this.value/H(t).value)},h.prototype.over=h.prototype.divide=o.prototype.over=o.prototype.divide,o.prototype.mod=function(t){return C(this,t)[1]},l.prototype.mod=l.prototype.remainder=function(t){return new l(this.value%H(t).value)},h.prototype.remainder=h.prototype.mod=o.prototype.remainder=o.prototype.mod,o.prototype.pow=function(t){var e,i,n,r=H(t),s=this.value,o=r.value;if(0===o)return a[1];if(0===s)return a[0];if(1===s)return a[1];if(-1===s)return r.isEven()?a[1]:a[-1];if(r.sign)return a[0];if(!r.isSmall)throw new Error("The exponent "+r.toString()+" is too large.");if(this.isSmall&&u(e=Math.pow(s,o)))return new h(g(e));for(i=this,n=a[1];!0&o&&(n=n.times(i),--o),0!==o;)o/=2,i=i.square();return n},h.prototype.pow=o.prototype.pow,l.prototype.pow=function(t){var e=H(t),i=this.value,n=e.value,r=BigInt(0),s=BigInt(1),o=BigInt(2);if(n===r)return a[1];if(i===r)return a[0];if(i===s)return a[1];if(i===BigInt(-1))return e.isEven()?a[1]:a[-1];if(e.isNegative())return new l(r);for(var h=this,u=a[1];(n&s)===s&&(u=u.times(h),--n),n!==r;)n/=o,h=h.square();return u},o.prototype.modPow=function(t,e){if(t=H(t),(e=H(e)).isZero())throw new Error("Cannot take modPow with modulus 0");var i=a[1],n=this.mod(e);for(t.isNegative()&&(t=t.multiply(a[-1]),n=n.modInv(e));t.isPositive();){if(n.isZero())return a[0];t.isOdd()&&(i=i.multiply(n).mod(e)),t=t.divide(2),n=n.square().mod(e)}return i},l.prototype.modPow=h.prototype.modPow=o.prototype.modPow,o.prototype.compareAbs=function(t){var e=H(t),i=this.value,n=e.value;return e.isSmall?1:O(i,n)},h.prototype.compareAbs=function(t){var e=H(t),i=Math.abs(this.value),n=e.value;return e.isSmall?i===(n=Math.abs(n))?0:i>n?1:-1:-1},l.prototype.compareAbs=function(t){var e=this.value,i=H(t).value;return(e=e>=0?e:-e)===(i=i>=0?i:-i)?0:e>i?1:-1},o.prototype.compare=function(t){if(t===1/0)return-1;if(t===-1/0)return 1;var e=H(t),i=this.value,n=e.value;return this.sign!==e.sign?e.sign?1:-1:e.isSmall?this.sign?-1:1:O(i,n)*(this.sign?-1:1)},o.prototype.compareTo=o.prototype.compare,h.prototype.compare=function(t){if(t===1/0)return-1;if(t===-1/0)return 1;var e=H(t),i=this.value,n=e.value;return e.isSmall?i==n?0:i>n?1:-1:i<0!==e.sign?i<0?-1:1:i<0?1:-1},h.prototype.compareTo=h.prototype.compare,l.prototype.compare=function(t){if(t===1/0)return-1;if(t===-1/0)return 1;var e=this.value,i=H(t).value;return e===i?0:e>i?1:-1},l.prototype.compareTo=l.prototype.compare,o.prototype.equals=function(t){return 0===this.compare(t)},l.prototype.eq=l.prototype.equals=h.prototype.eq=h.prototype.equals=o.prototype.eq=o.prototype.equals,o.prototype.notEquals=function(t){return 0!==this.compare(t)},l.prototype.neq=l.prototype.notEquals=h.prototype.neq=h.prototype.notEquals=o.prototype.neq=o.prototype.notEquals,o.prototype.greater=function(t){return this.compare(t)>0},l.prototype.gt=l.prototype.greater=h.prototype.gt=h.prototype.greater=o.prototype.gt=o.prototype.greater,o.prototype.lesser=function(t){return this.compare(t)<0},l.prototype.lt=l.prototype.lesser=h.prototype.lt=h.prototype.lesser=o.prototype.lt=o.prototype.lesser,o.prototype.greaterOrEquals=function(t){return this.compare(t)>=0},l.prototype.geq=l.prototype.greaterOrEquals=h.prototype.geq=h.prototype.greaterOrEquals=o.prototype.geq=o.prototype.greaterOrEquals,o.prototype.lesserOrEquals=function(t){return this.compare(t)<=0},l.prototype.leq=l.prototype.lesserOrEquals=h.prototype.leq=h.prototype.lesserOrEquals=o.prototype.leq=o.prototype.lesserOrEquals,o.prototype.isEven=function(){return 0==(1&this.value[0])},h.prototype.isEven=function(){return 0==(1&this.value)},l.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},o.prototype.isOdd=function(){return 1==(1&this.value[0])},h.prototype.isOdd=function(){return 1==(1&this.value)},l.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},o.prototype.isPositive=function(){return!this.sign},h.prototype.isPositive=function(){return this.value>0},l.prototype.isPositive=h.prototype.isPositive,o.prototype.isNegative=function(){return this.sign},h.prototype.isNegative=function(){return this.value<0},l.prototype.isNegative=h.prototype.isNegative,o.prototype.isUnit=function(){return!1},h.prototype.isUnit=function(){return 1===Math.abs(this.value)},l.prototype.isUnit=function(){return this.abs().value===BigInt(1)},o.prototype.isZero=function(){return!1},h.prototype.isZero=function(){return 0===this.value},l.prototype.isZero=function(){return this.value===BigInt(0)},o.prototype.isDivisibleBy=function(t){var e=H(t);return!e.isZero()&&(!!e.isUnit()||(0===e.compareAbs(2)?this.isEven():this.mod(e).isZero()))},l.prototype.isDivisibleBy=h.prototype.isDivisibleBy=o.prototype.isDivisibleBy,o.prototype.isPrime=function(t){var e=P(this);if(void 0!==e)return e;var i=this.abs(),n=i.bitLength();if(n<=64)return R(i,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var s=Math.log(2)*n.toJSNumber(),a=Math.ceil(!0===t?2*Math.pow(s,2):s),o=[],h=0;h<a;h++)o.push(r(h+2));return R(i,o)},l.prototype.isPrime=h.prototype.isPrime=o.prototype.isPrime,o.prototype.isProbablePrime=function(t,e){var i=P(this);if(void 0!==i)return i;for(var n=this.abs(),s=void 0===t?5:t,a=[],o=0;o<s;o++)a.push(r.randBetween(2,n.minus(2),e));return R(n,a)},l.prototype.isProbablePrime=h.prototype.isProbablePrime=o.prototype.isProbablePrime,o.prototype.modInv=function(t){for(var e,i,n,s=r.zero,a=r.one,o=H(t),h=this.abs();!h.isZero();)e=o.divide(h),i=s,n=o,s=a,o=h,a=i.subtract(e.multiply(a)),h=n.subtract(e.multiply(h));if(!o.isUnit())throw new Error(this.toString()+" and "+t.toString()+" are not co-prime");return-1===s.compare(0)&&(s=s.add(t)),this.isNegative()?s.negate():s},l.prototype.modInv=h.prototype.modInv=o.prototype.modInv,o.prototype.next=function(){var t=this.value;return this.sign?x(t,1,this.sign):new o(v(t,1),this.sign)},h.prototype.next=function(){var t=this.value;return t+1<i?new h(t+1):new o(n,!1)},l.prototype.next=function(){return new l(this.value+BigInt(1))},o.prototype.prev=function(){var t=this.value;return this.sign?new o(v(t,1),!0):x(t,1,this.sign)},h.prototype.prev=function(){var t=this.value;return t-1>-i?new h(t-1):new o(n,!0)},l.prototype.prev=function(){return new l(this.value-BigInt(1))};for(var M=[1];2*M[M.length-1]<=e;)M.push(2*M[M.length-1]);var L=M.length,I=M[L-1];function k(t){return Math.abs(t)<=e}function D(t,e,i){e=H(e);for(var n=t.isNegative(),s=e.isNegative(),a=n?t.not():t,o=s?e.not():e,h=0,l=0,u=null,c=null,d=[];!a.isZero()||!o.isZero();)h=(u=C(a,I))[1].toJSNumber(),n&&(h=I-1-h),l=(c=C(o,I))[1].toJSNumber(),s&&(l=I-1-l),a=u[0],o=c[0],d.push(i(h,l));for(var f=0!==i(n?1:0,s?1:0)?r(-1):r(0),p=d.length-1;p>=0;p-=1)f=f.multiply(I).add(r(d[p]));return f}o.prototype.shiftLeft=function(t){var e=H(t).toJSNumber();if(!k(e))throw new Error(String(e)+" is too large for shifting.");if(e<0)return this.shiftRight(-e);var i=this;if(i.isZero())return i;for(;e>=L;)i=i.multiply(I),e-=L-1;return i.multiply(M[e])},l.prototype.shiftLeft=h.prototype.shiftLeft=o.prototype.shiftLeft,o.prototype.shiftRight=function(t){var e,i=H(t).toJSNumber();if(!k(i))throw new Error(String(i)+" is too large for shifting.");if(i<0)return this.shiftLeft(-i);for(var n=this;i>=L;){if(n.isZero()||n.isNegative()&&n.isUnit())return n;n=(e=C(n,I))[1].isNegative()?e[0].prev():e[0],i-=L-1}return(e=C(n,M[i]))[1].isNegative()?e[0].prev():e[0]},l.prototype.shiftRight=h.prototype.shiftRight=o.prototype.shiftRight,o.prototype.not=function(){return this.negate().prev()},l.prototype.not=h.prototype.not=o.prototype.not,o.prototype.and=function(t){return D(this,t,(function(t,e){return t&e}))},l.prototype.and=h.prototype.and=o.prototype.and,o.prototype.or=function(t){return D(this,t,(function(t,e){return t|e}))},l.prototype.or=h.prototype.or=o.prototype.or,o.prototype.xor=function(t){return D(this,t,(function(t,e){return t^e}))},l.prototype.xor=h.prototype.xor=o.prototype.xor;function F(t){var i=t.value,n="number"==typeof i?i|1<<30:"bigint"==typeof i?i|BigInt(1<<30):i[0]+i[1]*e|1073758208;return n&-n}function B(t,e){return t=H(t),e=H(e),t.greater(e)?t:e}function N(t,e){return t=H(t),e=H(e),t.lesser(e)?t:e}function G(t,e){if(t=H(t).abs(),e=H(e).abs(),t.equals(e))return t;if(t.isZero())return e;if(e.isZero())return t;for(var i,n,r=a[1];t.isEven()&&e.isEven();)i=N(F(t),F(e)),t=t.divide(i),e=e.divide(i),r=r.multiply(i);for(;t.isEven();)t=t.divide(F(t));do{for(;e.isEven();)e=e.divide(F(e));t.greater(e)&&(n=e,e=t,t=n),e=e.subtract(t)}while(!e.isZero());return r.isUnit()?t:t.multiply(r)}o.prototype.bitLength=function(){var t=this;return t.compareTo(r(0))<0&&(t=t.negate().subtract(r(1))),0===t.compareTo(r(0))?r(0):r(function t(e,i){if(i.compareTo(e)<=0){var n=t(e,i.square(i)),s=n.p,a=n.e,o=s.multiply(i);return o.compareTo(e)<=0?{p:o,e:2*a+1}:{p:s,e:2*a}}return{p:r(1),e:0}}(t,r(2)).e).add(r(1))},l.prototype.bitLength=h.prototype.bitLength=o.prototype.bitLength;var Y=function(t,e,i,n){i=i||"0123456789abcdefghijklmnopqrstuvwxyz",t=String(t),n||(t=t.toLowerCase(),i=i.toLowerCase());var r,s=t.length,a=Math.abs(e),o={};for(r=0;r<i.length;r++)o[i[r]]=r;for(r=0;r<s;r++){if("-"!==(u=t[r])&&(u in o&&o[u]>=a)){if("1"===u&&1===a)continue;throw new Error(u+" is not a valid digit in base "+e+".")}}e=H(e);var h=[],l="-"===t[0];for(r=l?1:0;r<t.length;r++){var u;if((u=t[r])in o)h.push(H(o[u]));else{if("<"!==u)throw new Error(u+" is not a valid character");var c=r;do{r++}while(">"!==t[r]&&r<t.length);h.push(H(t.slice(c+1,r)))}}return z(h,e,l)};function z(t,e,i){var n,r=a[0],s=a[1];for(n=t.length-1;n>=0;n--)r=r.add(t[n].times(s)),s=s.times(e);return i?r.negate():r}function U(t,e){if((e=r(e)).isZero()){if(t.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(e.equals(-1)){if(t.isZero())return{value:[0],isNegative:!1};if(t.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-t.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var i=Array.apply(null,Array(t.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return i.unshift([1]),{value:[].concat.apply([],i),isNegative:!1}}var n=!1;if(t.isNegative()&&e.isPositive()&&(n=!0,t=t.abs()),e.isUnit())return t.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(t.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:n};for(var s,a=[],o=t;o.isNegative()||o.compareAbs(e)>=0;){s=o.divmod(e),o=s.quotient;var h=s.remainder;h.isNegative()&&(h=e.minus(h).abs(),o=o.next()),a.push(h.toJSNumber())}return a.push(o.toJSNumber()),{value:a.reverse(),isNegative:n}}function X(t,e,i){var n=U(t,e);return(n.isNegative?"-":"")+n.value.map((function(t){return function(t,e){return t<(e=e||"0123456789abcdefghijklmnopqrstuvwxyz").length?e[t]:"<"+t+">"}(t,i)})).join("")}function V(t){if(u(+t)){var e=+t;if(e===g(e))return s?new l(BigInt(e)):new h(e);throw new Error("Invalid integer: "+t)}var i="-"===t[0];i&&(t=t.slice(1));var n=t.split(/e/i);if(n.length>2)throw new Error("Invalid integer: "+n.join("e"));if(2===n.length){var r=n[1];if("+"===r[0]&&(r=r.slice(1)),(r=+r)!==g(r)||!u(r))throw new Error("Invalid integer: "+r+" is not a valid exponent.");var a=n[0],c=a.indexOf(".");if(c>=0&&(r-=a.length-c-1,a=a.slice(0,c)+a.slice(c+1)),r<0)throw new Error("Cannot include negative exponent part for integers");t=a+=new Array(r+1).join("0")}if(!/^([0-9][0-9]*)$/.test(t))throw new Error("Invalid integer: "+t);if(s)return new l(BigInt(i?"-"+t:t));for(var d=[],p=t.length,m=p-7;p>0;)d.push(+t.slice(m,p)),(m-=7)<0&&(m=0),p-=7;return f(d),new o(d,i)}function H(t){return"number"==typeof t?function(t){if(s)return new l(BigInt(t));if(u(t)){if(t!==g(t))throw new Error(t+" is not an integer.");return new h(t)}return V(t.toString())}(t):"string"==typeof t?V(t):"bigint"==typeof t?new l(t):t}o.prototype.toArray=function(t){return U(this,t)},h.prototype.toArray=function(t){return U(this,t)},l.prototype.toArray=function(t){return U(this,t)},o.prototype.toString=function(t,e){if(void 0===t&&(t=10),10!==t)return X(this,t,e);for(var i,n=this.value,r=n.length,s=String(n[--r]);--r>=0;)i=String(n[r]),s+="0000000".slice(i.length)+i;return(this.sign?"-":"")+s},h.prototype.toString=function(t,e){return void 0===t&&(t=10),10!=t?X(this,t,e):String(this.value)},l.prototype.toString=h.prototype.toString,l.prototype.toJSON=o.prototype.toJSON=h.prototype.toJSON=function(){return this.toString()},o.prototype.valueOf=function(){return parseInt(this.toString(),10)},o.prototype.toJSNumber=o.prototype.valueOf,h.prototype.valueOf=function(){return this.value},h.prototype.toJSNumber=h.prototype.valueOf,l.prototype.valueOf=l.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};for(var j=0;j<1e3;j++)a[j]=H(j),j>0&&(a[-j]=H(-j));return a.one=a[1],a.zero=a[0],a.minusOne=a[-1],a.max=B,a.min=N,a.gcd=G,a.lcm=function(t,e){return t=H(t).abs(),e=H(e).abs(),t.divide(G(t,e)).multiply(e)},a.isInstance=function(t){return t instanceof o||t instanceof h||t instanceof l},a.randBetween=function(t,i,n){t=H(t),i=H(i);var r=n||Math.random,s=N(t,i),o=B(t,i).subtract(s).add(1);if(o.isSmall)return s.add(Math.floor(r()*o));for(var h=U(o,e).value,l=[],u=!0,c=0;c<h.length;c++){var d=u?h[c]+(c+1<h.length?h[c+1]/e:0):e,f=g(r()*d);l.push(f),f<h[c]&&(u=!1)}return s.add(a.fromArray(l,e,!1))},a.fromArray=function(t,e,i){return z(t.map(H),H(e||10),i)},a}();t.hasOwnProperty("exports")&&(t.exports=r),void 0===(n=function(){return r}.call(e,i,e,t))||(t.exports=n)}).call(this,i(53)(t))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(34),r=i(22);e.default=class{constructor(t,e,i,n=!0){this.api=t,this.name=e,this._data=new Promise(async(r,s)=>{if(i)r(i);else try{r(await t.queue.fetchCollection(e,n))}catch(t){s(t)}})}async author(){return(await this._data).author}async allowNotify(){return(await this._data).allow_notify}async authorizedAccounts(){return(await this._data).authorized_accounts}async notifyAccounts(){return(await this._data).notify_accounts}async marketFee(){return Number((await this._data).market_fee)}async data(){return r.deserialize((await this._data).serialized_data,n.ObjectSchema((await this.api.config()).collection_format))}async toObject(){return{collection_name:this.name,author:await this.author(),allowNotify:await this.allowNotify(),authorizedAccounts:await this.authorizedAccounts(),notifyAccounts:await this.notifyAccounts(),marketFee:await this.marketFee(),data:await this.data()}}}},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectSchema=void 0;const r=n(i(31)),s=n(i(52)),a=n(i(94)),o=n(i(95));function h(t,e){const i=[];let n=e[t];void 0===n&&(n=[]),delete e[t];for(const t of n)i.push({name:t.name,value:l(t.type,e)});return new s.default(i)}function l(t,e){if(t.endsWith("[]"))return new o.default(l(t.substring(0,t.length-2),e));if(t.startsWith("object{")&&t.endsWith("}")){const i=parseInt(t.substring(7,t.length-1),10);if(isNaN(i))throw new r.default(`invalid type '${t}'`);return h(i,e)}return new a.default(t)}e.ObjectSchema=function(t){const e={};for(const i of t){const t=void 0===i.parent?0:i.parent;void 0===e[t]&&(e[t]=[]),e[t].push(i)}return h(0,e)}},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(34),s=n(i(33));e.default=class{constructor(t,e,i,n,r=!0){this.api=t,this.collection=e,this.name=i,this._data=new Promise(async(s,a)=>{if(n)s(n);else try{s(await t.queue.fetchSchema(e,i,r))}catch(t){a(t)}}),this._collection=new Promise(async(i,n)=>{try{i(new s.default(t,e,void 0,r))}catch(t){n(t)}})}async format(){return r.ObjectSchema((await this._data).format)}async rawFormat(){return(await this._data).format}async toObject(){return{collection_name:this.collection,schema_name:this.name,format:await this.rawFormat()}}}},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(i(23)),s=n(i(21));e.default=class{constructor(t){this.size=t}deserialize(t){t.position+=this.size;const e=t.data.slice(t.position-this.size,t.position);if(e.length!==this.size)throw new r.default("FixedParser: read past end");return e}serialize(t){if(t.length!==this.size)throw new s.default("input data does not conform fixed size");return t}}},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(i(23)),s=i(13);e.default=class{deserialize(t){const e=s.varint_decode(t).toJSNumber();t.position+=e;const i=t.data.slice(t.position-e,t.position);if(i.length!==e)throw new r.default("VariableParser: read past end");return i}serialize(t){return s.concat_byte_arrays([s.varint_encode(t.length),t])}}},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(1),o=i(0),h=i(20),l=s(i(2)),u=function(t){function e(i){var n=t.call(this,i)||this;e.currentInstance=n,n.x=o.GameVars.gameData.powerBarSide===a.GameConstants.LEFT?0:a.GameConstants.GAME_WIDTH,n.y=a.GameConstants.GAME_HEIGHT/2+30,n.setScale(o.GameVars.scaleX*o.GameVars.correctionScale,o.GameVars.correctionScale),n.canMove=!0,n.initialY=0,n.background=new Phaser.GameObjects.Image(n.scene,0,0,"texture_atlas_1","power_bar_empty"),n.background.setOrigin(0,.5),n.background.setInteractive(),n.background.on("pointerdown",n.onDownBackground,n),n.add(n.background),o.GameVars.isDesktop||n.scene.input.on("pointerup",n.onUpBackground,n),n.powerMask=new Phaser.GameObjects.Graphics(n.scene),n.powerMask.setPosition(0,n.y-n.background.height/2),n.powerMask.fillStyle(16711680),n.powerMask.fillRect(0,0,n.background.width,n.background.height),n.powerMask.scaleY=.001;var r=n.powerMask.createGeometryMask();return n.forceBar=new Phaser.GameObjects.Image(n.scene,0,0,"texture_atlas_1","power_bar_full"),n.forceBar.setOrigin(0,.5),n.forceBar.setMask(r),n.add(n.forceBar),n.cue=new Phaser.GameObjects.Image(n.scene,5,0,"texture_atlas_1","cue_power"),n.cue.setOrigin(0,.5),n.add(n.cue),o.GameVars.gameData.powerBarSide===a.GameConstants.RIGHT&&(n.background.scaleX*=-1,n.forceBar.scaleX*=-1,n.powerMask.scaleX*=-1,n.cue.scaleX*=-1,n.cue.x*=-1),n}return r(e,t),e.prototype.update=function(){if(!o.GameVars.paused&&h.CueContainer.currentInstance.settingPower&&this.canMove){var t=this.scene.input.activePointer.y-this.y-this.initialY;t+=230,t=Phaser.Math.Clamp(t,0,430),h.CueContainer.currentInstance.impulseFactor=Math.floor(t/430*1e5)/1e5,this.powerMask.scaleY=t/430,this.cue.y=t}},e.prototype.onTurnCompleted=function(){this.canMove=!0,this.scene.tweens.add({targets:this,scaleX:o.GameVars.scaleX*o.GameVars.correctionScale,scaleY:o.GameVars.correctionScale,alpha:1,ease:Phaser.Math.Easing.Cubic.Out,duration:750,delay:500})},e.prototype.applyImpulse=function(){this.scene.tweens.add({targets:this.cue,y:0,ease:Phaser.Math.Easing.Cubic.Out,duration:200}),this.scene.tweens.add({targets:this.powerMask,scaleY:0,ease:Phaser.Math.Easing.Cubic.Out,duration:200,onComplete:function(){this.scene.tweens.add({targets:this,scaleX:.9*this.scaleX,scaleY:.9*this.scaleY,alpha:.4,ease:Phaser.Math.Easing.Cubic.Out,duration:500,delay:500})},onCompleteScope:this})},e.prototype.changeSide=function(){var t;t=o.GameVars.gameData.powerBarSide===a.GameConstants.LEFT?a.GameConstants.GAME_WIDTH+50:-50,this.scene.tweens.add({targets:this,x:t,ease:Phaser.Math.Easing.Cubic.Out,duration:450,onComplete:function(){this.background.scaleX*=-1,this.forceBar.scaleX*=-1,this.powerMask.scaleX*=-1,this.cue.scaleX*=-1,this.cue.x*=-1,o.GameVars.gameData.powerBarSide===a.GameConstants.LEFT?(t=0,this.x=-50):(t=a.GameConstants.GAME_WIDTH,this.x=a.GameConstants.GAME_WIDTH+50),this.scene.tweens.add({targets:this,x:t,ease:Phaser.Math.Easing.Cubic.Out,duration:450})},onCompleteScope:this})},e.prototype.onDownBackground=function(){o.GameVars.paused||l.SDK.replayMode||(this.initialY=this.scene.input.activePointer.y-110,h.CueContainer.currentInstance.settingPower=!0)},e.prototype.onUpBackground=function(){o.GameVars.paused||!h.CueContainer.currentInstance.settingPower||l.SDK.replayMode||(h.CueContainer.currentInstance.settingPower=!1,h.CueContainer.currentInstance.impulseFactor>0&&(this.canMove=!1,h.CueContainer.currentInstance.shoot()))},e}(Phaser.GameObjects.Container);e.PowerBarContainer=u},function(t,e,i){window,t.exports=function(){return i={},t.m=e=[function(t,e){function i(t,e,i,n){for(var s in e)if(e.hasOwnProperty(s)){var a=(u=e,c=s,p=f=void 0,p=(d=i)?u[c]:Object.getOwnPropertyDescriptor(u,c),!d&&p.value&&"object"==typeof p.value&&(p=p.value),!(!p||!((f=p).get&&"function"==typeof f.get||f.set&&"function"==typeof f.set))&&(void 0===p.enumerable&&(p.enumerable=!0),void 0===p.configurable&&(p.configurable=!0),p));if(!1!==a){if(o=(n||t).prototype,h=s,l=void 0,(l=Object.getOwnPropertyDescriptor(o,h))&&(l.value&&"object"==typeof l.value&&(l=l.value),!1===l.configurable)){if(r.ignoreFinals)continue;throw new Error("cannot override final property '"+s+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(t.prototype,s,a)}else t.prototype[s]=e[s]}var o,h,l,u,c,d,f,p}function n(t,e){if(e){Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++)i(t,e[n].prototype||e[n])}}function r(t){var e,r,s;if((t=t||{}).initialize){if("function"!=typeof t.initialize)throw new Error("initialize must be a function");s=t.initialize,delete t.initialize}else s=t.Extends?(r=t.Extends,function(){r.apply(this,arguments)}):function(){};t.Extends?(s.prototype=Object.create(t.Extends.prototype),s.prototype.constructor=s,e=t.Extends,delete t.Extends):s.prototype.constructor=s;var a=null;return t.Mixins&&(a=t.Mixins,delete t.Mixins),n(s,a),i(s,t,!0,e),s}r.extend=i,r.mixin=n,r.ignoreFinals=!1,t.exports=r},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e,i){var n=typeof t;return t&&"number"!=n&&"string"!=n&&t.hasOwnProperty(e)&&void 0!==t[e]?t[e]:i}},function(t,e,i){var n=i(0),r=i(106),s=new n({initialize:function(t,e){this.x=0,this.y=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0):(void 0===e&&(e=t),this.x=t||0,this.y=e||0)},clone:function(){return new s(this.x,this.y)},copy:function(t){return this.x=t.x||0,this.y=t.y||0,this},setFromObject:function(t){return this.x=t.x||0,this.y=t.y||0,this},set:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setTo:function(t,e){return this.set(t,e)},setToPolar:function(t,e){return null==e&&(e=1),this.x=Math.cos(t)*e,this.y=Math.sin(t)*e,this},equals:function(t){return this.x===t.x&&this.y===t.y},fuzzyEquals:function(t,e){return r(this.x,t.x,e)&&r(this.y,t.y,e)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},setAngle:function(t){return this.setToPolar(t,this.length())},add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(t){var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},distanceSq:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},length:function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},setLength:function(t){return this.normalize().scale(t)},lengthSq:function(){var t=this.x,e=this.y;return t*t+e*e},normalize:function(){var t=this.x,e=this.y,i=t*t+e*e;return 0<i&&(i=1/Math.sqrt(i),this.x=t*i,this.y=e*i),this},normalizeRightHand:function(){var t=this.x;return this.x=-1*this.y,this.y=t,this},normalizeLeftHand:function(){var t=this.x;return this.x=this.y,this.y=-1*t,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lerp:function(t,e){void 0===e&&(e=0);var i=this.x,n=this.y;return this.x=i+e*(t.x-i),this.y=n+e*(t.y-n),this},transformMat3:function(t){var e=this.x,i=this.y,n=t.val;return this.x=n[0]*e+n[3]*i+n[6],this.y=n[1]*e+n[4]*i+n[7],this},transformMat4:function(t){var e=this.x,i=this.y,n=t.val;return this.x=n[0]*e+n[4]*i+n[12],this.y=n[1]*e+n[5]*i+n[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(t){var e=this.length();return e&&t<e&&this.scale(t/e),this},reflect:function(t){return t=t.clone().normalize(),this.subtract(t.scale(2*this.dot(t)))},mirror:function(t){return this.reflect(t).negate()},rotate:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e*this.x-i*this.y,i*this.x+e*this.y)}});s.ZERO=new s,s.RIGHT=new s(1,0),s.LEFT=new s(-1,0),s.UP=new s(0,-1),s.DOWN=new s(0,1),s.ONE=new s(1,1),t.exports=s},function(t,e,i){var n=i(0),r=i(47),s=new n({initialize:function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.type=r.POINT,this.x=t,this.y=e},setTo:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this}});t.exports=s},function(t,e,i){var n=i(0),r=i(23),s=i(22),a=new n({initialize:function(t){this.scene=t,this.systems=t.sys,this.displayList,this.updateList,t.sys.events.once(s.BOOT,this.boot,this),t.sys.events.on(s.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.systems.events.once(s.DESTROY,this.destroy,this)},start:function(){this.systems.events.once(s.SHUTDOWN,this.shutdown,this)},existing:function(t){return(t.renderCanvas||t.renderWebGL)&&this.displayList.add(t),t.preUpdate&&this.updateList.add(t),t},shutdown:function(){this.systems.events.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(s.START,this.start,this),this.scene=null,this.systems=null,this.displayList=null,this.updateList=null}});a.register=function(t,e){a.prototype.hasOwnProperty(t)||(a.prototype[t]=e)},a.remove=function(t){a.prototype.hasOwnProperty(t)&&delete a.prototype[t]},r.register("GameObjectFactory",a,"add"),t.exports=a},function(t,e){t.exports=function(t,e,i){if(t&&"number"!=typeof t){if(t.hasOwnProperty(e))return t[e];if(-1===e.indexOf("."))return i;for(var n=e.split("."),r=t,s=i,a=0;a<n.length;a++){if(!r.hasOwnProperty(n[a])){s=i;break}s=r[n[a]],r=r[n[a]]}return s}return i}},function(t,e){t.exports=function(t){if("object"!=typeof t||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0}},function(t,e){var i={},n={install:function(t){for(var e in i)t[e]=i[e]},register:function(t,e){i[t]=e},destroy:function(){i={}}};t.exports=n},function(t,e){t.exports={getTintFromFloats:function(t,e,i,n){return((255&(255*n|0))<<24|(255&(255*t|0))<<16|(255&(255*e|0))<<8|255&(255*i|0))>>>0},getTintAppendFloatAlpha:function(t,e){return((255&(255*e|0))<<24|t)>>>0},getTintAppendFloatAlphaAndSwap:function(t,e){return((255&(255*e|0))<<24|(255&(0|t))<<16|(255&(t>>8|0))<<8|255&(t>>16|0))>>>0},getFloatsFromUintRGB:function(t){return[(255&(t>>16|0))/255,(255&(t>>8|0))/255,(255&(0|t))/255]},getComponentCount:function(t,e){for(var i=0,n=0;n<t.length;++n){var r=t[n];r.type===e.FLOAT?i+=r.size:i+=1}return i}}},function(t,e,i){"use strict";var n=Object.prototype.hasOwnProperty,r="~";function s(){}function a(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function o(t,e,i,n,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new a(i,n||t,s),h=r?r+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],o]:t._events[h].push(o):(t._events[h]=o,t._eventsCount++),t}function h(t,e){0==--t._eventsCount?t._events=new s:delete t._events[e]}function l(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(r=!1)),l.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)n.call(t,e)&&i.push(r?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},l.prototype.listeners=function(t){var e=r?r+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,s=i.length,a=new Array(s);n<s;n++)a[n]=i[n].fn;return a},l.prototype.listenerCount=function(t){var e=r?r+t:t,i=this._events[e];return i?i.fn?1:i.length:0},l.prototype.emit=function(t,e,i,n,s,a){var o=r?r+t:t;if(!this._events[o])return!1;var h,l=this._events[o],u=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,i),!0;case 4:return l.fn.call(l.context,e,i,n),!0;case 5:return l.fn.call(l.context,e,i,n,s),!0;case 6:return l.fn.call(l.context,e,i,n,s,a),!0}for(f=1,h=new Array(u-1);f<u;f++)h[f-1]=arguments[f];l.fn.apply(l.context,h)}else for(var c,d=l.length,f=0;f<d;f++)switch(l[f].once&&this.removeListener(t,l[f].fn,void 0,!0),u){case 1:l[f].fn.call(l[f].context);break;case 2:l[f].fn.call(l[f].context,e);break;case 3:l[f].fn.call(l[f].context,e,i);break;case 4:l[f].fn.call(l[f].context,e,i,n);break;default:if(!h)for(c=1,h=new Array(u-1);c<u;c++)h[c-1]=arguments[c];l[f].fn.apply(l[f].context,h)}return!0},l.prototype.on=function(t,e,i){return o(this,t,e,i,!1)},l.prototype.once=function(t,e,i){return o(this,t,e,i,!0)},l.prototype.removeListener=function(t,e,i,n){var s=r?r+t:t;if(!this._events[s])return this;if(!e)return h(this,s),this;var a=this._events[s];if(a.fn)a.fn!==e||n&&!a.once||i&&a.context!==i||h(this,s);else{for(var o=0,l=[],u=a.length;o<u;o++)(a[o].fn!==e||n&&!a[o].once||i&&a[o].context!==i)&&l.push(a[o]);l.length?this._events[s]=1===l.length?l[0]:l:h(this,s)}return this},l.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&h(this,e)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l},function(t,e,i){var n=i(0),r=i(48),s=i(152),a=i(274),o=i(47),h=i(56),l=i(155),u=new n({initialize:function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.type=o.RECTANGLE,this.x=t,this.y=e,this.width=i,this.height=n},contains:function(t,e){return r(this,t,e)},getPoint:function(t,e){return s(this,t,e)},getPoints:function(t,e,i){return a(this,t,e,i)},getRandomPoint:function(t){return l(this,t)},setTo:function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(t){return void 0===t&&(t=new h),t.setTo(this.x,this.y,this.right,this.y),t},getLineB:function(t){return void 0===t&&(t=new h),t.setTo(this.right,this.y,this.right,this.bottom),t},getLineC:function(t){return void 0===t&&(t=new h),t.setTo(this.right,this.bottom,this.x,this.bottom),t},getLineD:function(t){return void 0===t&&(t=new h),t.setTo(this.x,this.bottom,this.x,this.y),t},left:{get:function(){return this.x},set:function(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}},right:{get:function(){return this.x+this.width},set:function(t){t<=this.x?this.width=0:this.width=t-this.x}},top:{get:function(){return this.y},set:function(t){t>=this.bottom?this.height=0:this.height=this.bottom-t,this.y=t}},bottom:{get:function(){return this.y+this.height},set:function(t){t<=this.y?this.height=0:this.height=t-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});t.exports=u},function(t,e,i){t.exports={Alpha:i(533),AlphaSingle:i(269),Animation:i(504),BlendMode:i(272),ComputedSize:i(552),Crop:i(553),Depth:i(273),Flip:i(554),GetBounds:i(555),Mask:i(277),Origin:i(572),PathFollower:i(573),Pipeline:i(156),ScrollFactor:i(280),Size:i(574),Texture:i(575),TextureCrop:i(576),Tint:i(577),ToJSON:i(281),Transform:i(282),TransformMatrix:i(29),Visible:i(283)}},function(t,e){var i={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};t.exports=i},function(t,e,i){var n=i(0),r=i(281),s=i(113),a=i(10),o=i(90),h=new n({Extends:a,initialize:function(t,e){a.call(this),this.scene=t,this.type=e,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,t.sys.queueDepthSort()},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},setState:function(t){return this.state=t,this},setDataEnabled:function(){return this.data||(this.data=new s(this)),this},setData:function(t,e){return this.data||(this.data=new s(this)),this.data.set(t,e),this},incData:function(t,e){return this.data||(this.data=new s(this)),this.data.inc(t,e),this},toggleData:function(t){return this.data||(this.data=new s(this)),this.data.toggle(t),this},getData:function(t){return this.data||(this.data=new s(this)),this.data.get(t)},setInteractive:function(t,e,i){return this.scene.sys.input.enable(this,t,e,i),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},update:function(){},toJSON:function(){return r(this)},willRender:function(t){return!(h.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function(){for(var t=this,e=this.parentContainer,i=[];e&&(i.unshift(e.getIndex(t)),(t=e).parentContainer);)e=e.parentContainer;return i.unshift(this.scene.sys.displayList.getIndex(t)),i},destroy:function(t){var e;void 0===t&&(t=!1),this.scene&&!this.ignoreDestroy&&(this.preDestroy&&this.preDestroy.call(this),this.emit(o.DESTROY,this),e=this.scene.sys,t||(e.displayList.remove(this),e.updateList.remove(this)),this.input&&(e.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),t||e.queueDepthSort(),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0,this.removeAllListeners())}});h.RENDER_MASK=15,t.exports=h},function(t,e,i){var n=i(170),r=i(6);t.exports=function(t,e,i){var s=r(t,e,null);if(null===s)return i;if(Array.isArray(s))return n.RND.pick(s);if("object"==typeof s){if(s.hasOwnProperty("randInt"))return n.RND.integerInRange(s.randInt[0],s.randInt[1]);if(s.hasOwnProperty("randFloat"))return n.RND.realInRange(s.randFloat[0],s.randFloat[1])}else if("function"==typeof s)return s(e);return s}},function(t,e,i){var n=i(0),r=i(23),s=i(22),a=new n({initialize:function(t){this.scene=t,this.systems=t.sys,this.displayList,this.updateList,t.sys.events.once(s.BOOT,this.boot,this),t.sys.events.on(s.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.systems.events.once(s.DESTROY,this.destroy,this)},start:function(){this.systems.events.once(s.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(s.START,this.start,this),this.scene=null,this.systems=null,this.displayList=null,this.updateList=null}});a.register=function(t,e){a.prototype.hasOwnProperty(t)||(a.prototype[t]=e)},a.remove=function(t){a.prototype.hasOwnProperty(t)&&delete a.prototype[t]},r.register("GameObjectCreator",a,"make"),t.exports=a},function(t,e){t.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19}},function(t,e,i){var n=i(7),r=function(){var t,e,i,s,a,o,h=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof h&&(c=h,h=arguments[1]||{},l=2),u===l&&(h=this,--l);l<u;l++)if(null!=(t=arguments[l]))for(e in t)i=h[e],h!==(s=t[e])&&(c&&s&&(n(s)||(a=Array.isArray(s)))?(o=a?(a=!1,i&&Array.isArray(i)?i:[]):i&&n(i)?i:{},h[e]=r(c,o,s)):void 0!==s&&(h[e]=s));return h};t.exports=r},function(t,e){t.exports=function(t,e,i){return Math.max(e,Math.min(i,t))}},function(t,e,i){t.exports={BLUR:i(556),BOOT:i(557),CONTEXT_LOST:i(558),CONTEXT_RESTORED:i(559),DESTROY:i(560),FOCUS:i(561),HIDDEN:i(562),PAUSE:i(563),POST_RENDER:i(564),POST_STEP:i(565),PRE_RENDER:i(566),PRE_STEP:i(567),READY:i(568),RESUME:i(569),STEP:i(570),VISIBLE:i(571)}},function(t,e,i){var n=i(0),r=i(17),s=i(82),a=i(2),o=i(138),h=i(215),l=i(455),u=i(139),c=new n({initialize:function(t,e){this.loader=t,this.cache=a(e,"cache",!1),this.type=a(e,"type",!1),this.key=a(e,"key",!1);var i=this.key;if(t.prefix&&""!==t.prefix&&(this.key=t.prefix+i),!this.type||!this.key)throw new Error("Error calling 'Loader."+this.type+"' invalid key provided.");this.url=a(e,"url"),void 0===this.url?this.url=t.path+i+"."+a(e,"extension",""):"string"==typeof this.url&&0!==this.url.indexOf("blob:")&&0!==this.url.indexOf("data:")&&(this.url=t.path+this.url),this.src="",this.xhrSettings=u(a(e,"responseType",void 0)),a(e,"xhrSettings",!1)&&(this.xhrSettings=h(this.xhrSettings,a(e,"xhrSettings",{}))),this.xhrLoader=null,this.state="function"==typeof this.url?r.FILE_POPULATED:r.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=a(e,"config",{}),this.multiFile,this.linkFile},setLink:function(t){(this.linkFile=t).linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===r.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=r.FILE_LOADING,this.src=o(this,this.loader.baseURL),0===this.src.indexOf("data:")?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=l(this,this.loader.xhr))},onLoad:function(t,e){var i=t.responseURL&&0===t.responseURL.indexOf("file://")&&0===e.target.status,n=!(e.target&&200!==e.target.status)||i;4===t.readyState&&400<=t.status&&t.status<=599&&(n=!1),this.state=r.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,n)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(t){t.lengthComputable&&(this.bytesLoaded=t.loaded,this.bytesTotal=t.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(s.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=r.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=r.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=r.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(t){void 0===t&&(t=this.data);var e=this.key,i=this.type;this.loader.emit(s.FILE_COMPLETE,e,i,t),this.loader.emit(s.FILE_KEY_COMPLETE+i+"-"+e,e,i,t),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});c.createObjectURL=function(t,e,i){var n;"function"==typeof URL?t.src=URL.createObjectURL(e):((n=new FileReader).onload=function(){t.removeAttribute("crossOrigin"),t.src="data:"+(e.type||i)+";base64,"+n.result.split(",")[1]},n.onerror=t.onerror,n.readAsDataURL(e))},c.revokeObjectURL=function(t){"function"==typeof URL&&URL.revokeObjectURL(t.src)},t.exports=c},function(t,e,i){t.exports={BOOT:i(709),CREATE:i(710),DESTROY:i(711),PAUSE:i(712),POST_UPDATE:i(713),PRE_UPDATE:i(714),READY:i(715),RENDER:i(716),RESUME:i(717),SHUTDOWN:i(718),SLEEP:i(719),START:i(720),TRANSITION_COMPLETE:i(721),TRANSITION_INIT:i(722),TRANSITION_OUT:i(723),TRANSITION_START:i(724),TRANSITION_WAKE:i(725),UPDATE:i(726),WAKE:i(727)}},function(t,e){var i={},n={},r={register:function(t,e,n,r){void 0===r&&(r=!1),i[t]={plugin:e,mapping:n,custom:r}},registerCustom:function(t,e,i,r){n[t]={plugin:e,mapping:i,data:r}},hasCore:function(t){return i.hasOwnProperty(t)},hasCustom:function(t){return n.hasOwnProperty(t)},getCore:function(t){return i[t]},getCustom:function(t){return n[t]},getCustomClass:function(t){return n.hasOwnProperty(t)?n[t].plugin:null},remove:function(t){i.hasOwnProperty(t)&&delete i[t]},removeCustom:function(t){n.hasOwnProperty(t)&&delete n[t]},destroyCorePlugins:function(){for(var t in i)i.hasOwnProperty(t)&&delete i[t]},destroyCustomPlugins:function(){for(var t in n)n.hasOwnProperty(t)&&delete n[t]}};t.exports=r},function(t,e,i){var n=i(2);t.exports=function(t,e,i,r,s,a){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=a.width),void 0===r&&(r=a.height);var o=n(s,"isNotEmpty",!1),h=n(s,"isColliding",!1),l=n(s,"hasInterestingFace",!1);t<0&&(i+=t,t=0),e<0&&(r+=e,e=0),t+i>a.width&&(i=Math.max(a.width-t,0)),e+r>a.height&&(r=Math.max(a.height-e,0));for(var u=[],c=e;c<e+r;c++)for(var d=t;d<t+i;d++){var f=a.data[c][d];if(null!==f){if(o&&-1===f.index)continue;if(h&&!f.collides)continue;if(l&&!f.hasInterestingFace)continue;u.push(f)}}return u}},function(t,e){t.exports=function(t,e,i,n,r,s){var a;void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=1);var o=0,h=t.length;if(1===s)for(a=r;a<h;a++)t[a][e]=i+o*n,o++;else for(a=r;0<=a;a--)t[a][e]=i+o*n,o++;return t}},function(t,e,i){var n,r=i(33),s=i(167),a=[],o=!1;function h(t,e,i,h,l){void 0===e&&(e=1),void 0===i&&(i=1),void 0===h&&(h=r.CANVAS),void 0===l&&(l=!1);var u=n(h),c=(null===u?(u={parent:t,canvas:document.createElement("canvas"),type:h},h===r.CANVAS&&a.push(u)):u.parent=t,u.canvas);return l&&(u.parent=c),c.width=e,c.height=i,o&&h===r.CANVAS&&s.disable(c.getContext("2d")),c}function l(){var t=0;return a.forEach((function(e){e.parent&&t++})),t}t.exports={create2D:function(t,e,i){return h(t,e,i,r.CANVAS)},create:h,createWebGL:function(t,e,i){return h(t,e,i,r.WEBGL)},disableSmoothing:function(){o=!0},enableSmoothing:function(){o=!1},first:n=function(t){if(void 0===t&&(t=r.CANVAS),t===r.WEBGL)return null;for(var e=0;e<a.length;e++){var i=a[e];if(!i.parent&&i.type===t)return i}return null},free:function(){return a.length-l()},pool:a,remove:function(t){var e=t instanceof HTMLCanvasElement;a.forEach((function(i){(e&&i.canvas===t||!e&&i.parent===t)&&(i.parent=null,i.canvas.width=1,i.canvas.height=1)}))},total:l}},function(t,e,i){var n=i(52),r=i(15);t.exports=function(t,e,i){e.x=r(i,"x",0),e.y=r(i,"y",0),e.depth=r(i,"depth",0),e.flipX=r(i,"flipX",!1),e.flipY=r(i,"flipY",!1);var s=r(i,"scale",null);"number"==typeof s?e.setScale(s):null!==s&&(e.scaleX=r(s,"x",1),e.scaleY=r(s,"y",1));var a=r(i,"scrollFactor",null);"number"==typeof a?e.setScrollFactor(a):null!==a&&(e.scrollFactorX=r(a,"x",1),e.scrollFactorY=r(a,"y",1)),e.rotation=r(i,"rotation",0);var o=r(i,"angle",null);null!==o&&(e.angle=o),e.alpha=r(i,"alpha",1);var h,l,u=r(i,"origin",null);return"number"==typeof u?e.setOrigin(u):null!==u&&(h=r(u,"x",.5),l=r(u,"y",.5),e.setOrigin(h,l)),e.blendMode=r(i,"blendMode",n.NORMAL),e.visible=r(i,"visible",!0),r(i,"add",!0)&&t.sys.displayList.add(e),e.preUpdate&&t.sys.updateList.add(e),e}},function(t,e){t.exports=function(t,e,i,n,r){var s=n.alpha*i.alpha;if(s<=0)return!1;var a=t._tempMatrix1.copyFromArray(n.matrix.matrix),o=t._tempMatrix2.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY),h=t._tempMatrix3;return r?(a.multiplyWithOffset(r,-n.scrollX*i.scrollFactorX,-n.scrollY*i.scrollFactorY),o.e=i.x,o.f=i.y):(o.e-=n.scrollX*i.scrollFactorX,o.f-=n.scrollY*i.scrollFactorY),a.multiply(o,h),e.globalCompositeOperation=t.blendModes[i.blendMode],e.globalAlpha=s,e.save(),h.setToContext(e),e.imageSmoothingEnabled=!(!t.antialias||i.frame&&i.frame.source.scaleMode),!0}},function(t,e,i){var n=i(0),r=i(13),s=i(3),a=new n({initialize:function(t,e,i,n,r,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===r&&(r=0),void 0===s&&(s=0),this.matrix=new Float32Array([t,e,i,n,r,s,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(t){this.matrix[0]=t}},b:{get:function(){return this.matrix[1]},set:function(t){this.matrix[1]=t}},c:{get:function(){return this.matrix[2]},set:function(t){this.matrix[2]=t}},d:{get:function(){return this.matrix[3]},set:function(t){this.matrix[3]=t}},e:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},f:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},tx:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},ty:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var t=this.matrix,e=t[0],i=t[1],n=t[2],s=t[3];return e||i?0<i?Math.acos(e/this.scaleX):-Math.acos(e/this.scaleX):n||s?r.TAU-(0<s?Math.acos(-n/this.scaleY):-Math.acos(n/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var t=this.matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,this},translate:function(t,e){var i=this.matrix;return i[4]=i[0]*t+i[2]*e+i[4],i[5]=i[1]*t+i[3]*e+i[5],this},scale:function(t,e){var i=this.matrix;return i[0]*=t,i[1]*=t,i[2]*=e,i[3]*=e,this},rotate:function(t){var e=Math.sin(t),i=Math.cos(t),n=this.matrix,r=n[0],s=n[1],a=n[2],o=n[3];return n[0]=r*i+a*e,n[1]=s*i+o*e,n[2]=r*-e+a*i,n[3]=s*-e+o*i,this},multiply:function(t,e){var i=this.matrix,n=t.matrix,r=i[0],s=i[1],a=i[2],o=i[3],h=i[4],l=i[5],u=n[0],c=n[1],d=n[2],f=n[3],p=n[4],g=n[5],m=void 0===e?this:e;return m.a=u*r+c*a,m.b=u*s+c*o,m.c=d*r+f*a,m.d=d*s+f*o,m.e=p*r+g*a+h,m.f=p*s+g*o+l,m},multiplyWithOffset:function(t,e,i){var n=this.matrix,r=t.matrix,s=n[0],a=n[1],o=n[2],h=n[3],l=e*s+i*o+n[4],u=e*a+i*h+n[5],c=r[0],d=r[1],f=r[2],p=r[3],g=r[4],m=r[5];return n[0]=c*s+d*o,n[1]=c*a+d*h,n[2]=f*s+p*o,n[3]=f*a+p*h,n[4]=g*s+m*o+l,n[5]=g*a+m*h+u,this},transform:function(t,e,i,n,r,s){var a=this.matrix,o=a[0],h=a[1],l=a[2],u=a[3],c=a[4],d=a[5];return a[0]=t*o+e*l,a[1]=t*h+e*u,a[2]=i*o+n*l,a[3]=i*h+n*u,a[4]=r*o+s*l+c,a[5]=r*h+s*u+d,this},transformPoint:function(t,e,i){void 0===i&&(i={x:0,y:0});var n=this.matrix,r=n[0],s=n[1],a=n[2],o=n[3],h=n[4],l=n[5];return i.x=t*r+e*a+h,i.y=t*s+e*o+l,i},invert:function(){var t=this.matrix,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],a=t[5],o=e*r-i*n;return t[0]=r/o,t[1]=-i/o,t[2]=-n/o,t[3]=e/o,t[4]=(n*a-r*s)/o,t[5]=-(e*a-i*s)/o,this},copyFrom:function(t){var e=this.matrix;return e[0]=t.a,e[1]=t.b,e[2]=t.c,e[3]=t.d,e[4]=t.e,e[5]=t.f,this},copyFromArray:function(t){var e=this.matrix;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this},copyToContext:function(t){var e=this.matrix;return t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t},setToContext:function(t){var e=this.matrix;return t.setTransform(e[0],e[1],e[2],e[3],e[4],e[5]),t},copyToArray:function(t){var e=this.matrix;return void 0===t?t=[e[0],e[1],e[2],e[3],e[4],e[5]]:(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5]),t},setTransform:function(t,e,i,n,r,s){var a=this.matrix;return a[0]=t,a[1]=e,a[2]=i,a[3]=n,a[4]=r,a[5]=s,this},decomposeMatrix:function(){var t,e,i=this.decomposedMatrix,n=this.matrix,r=n[0],s=n[1],a=n[2],o=n[3],h=r*o-s*a;return i.translateX=n[4],i.translateY=n[5],r||s?(t=Math.sqrt(r*r+s*s),i.rotation=0<s?Math.acos(r/t):-Math.acos(r/t),i.scaleX=t,i.scaleY=h/t):a||o?(e=Math.sqrt(a*a+o*o),i.rotation=.5*Math.PI-(0<o?Math.acos(-a/e):-Math.acos(a/e)),i.scaleX=h/e,i.scaleY=e):(i.rotation=0,i.scaleX=0,i.scaleY=0),i},applyITRS:function(t,e,i,n,r){var s=this.matrix,a=Math.sin(i),o=Math.cos(i);return s[4]=t,s[5]=e,s[0]=o*n,s[1]=a*n,s[2]=-a*r,s[3]=o*r,this},applyInverse:function(t,e,i){void 0===i&&(i=new s);var n=this.matrix,r=n[0],a=n[1],o=n[2],h=n[3],l=n[4],u=n[5],c=1/(r*h+o*-a);return i.x=h*c*t+-o*c*e+(u*o-l*h)*c,i.y=r*c*e+-a*c*t+(-u*r+l*a)*c,i},getX:function(t,e){return t*this.a+e*this.c+this.e},getY:function(t,e){return t*this.b+e*this.d+this.f},getCSSMatrix:function(){var t=this.matrix;return"matrix("+t[0]+","+t[1]+","+t[2]+","+t[3]+","+t[4]+","+t[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});t.exports=a},function(t,e,i){var n=i(0),r=i(12),s=i(14),a=i(56),o=new n({Extends:s,Mixins:[r.AlphaSingle,r.BlendMode,r.ComputedSize,r.Depth,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Transform,r.Visible],initialize:function(t,e,i){void 0===e&&(e="Shape"),s.call(this,t,e),this.geom=i,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new a,this.initPipeline()},setFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.isFilled=!1:(this.fillColor=t,this.fillAlpha=e,this.isFilled=!0),this},setStrokeStyle:function(t,e,i){return void 0===i&&(i=1),void 0===t?this.isStroked=!1:(this.lineWidth=t,this.strokeColor=e,this.strokeAlpha=i,this.isStroked=!0),this},setClosePath:function(t){return this.closePath=t,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]}});t.exports=o},function(t,e,i){var n=i(0),r=i(165),s=i(295),a=i(166),o=i(296),h=new n({initialize:function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(t,e,i,n)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(t,e,i,n,r){return void 0===n&&(n=255),void 0===r&&(r=!0),this._locked=!0,this.red=t,this.green=e,this.blue=i,this.alpha=n,this._locked=!1,this.update(r)},setGLTo:function(t,e,i,n){return void 0===n&&(n=1),this._locked=!0,this.redGL=t,this.greenGL=e,this.blueGL=i,this.alphaGL=n,this._locked=!1,this.update(!0)},setFromRGB:function(t){return this._locked=!0,this.red=t.r,this.green=t.g,this.blue=t.b,t.hasOwnProperty("a")&&(this.alpha=t.a),this._locked=!1,this.update(!0)},setFromHSV:function(t,e,i){return a(t,e,i,this)},update:function(t){if(void 0===t&&(t=!1),this._locked)return this;var e=this.r,i=this.g,n=this.b,a=this.a;return this._color=r(e,i,n),this._color32=s(e,i,n,a),this._rgba="rgba("+e+","+i+","+n+","+a/255+")",t&&o(e,i,n,this),this},updateHSV:function(){var t=this.r,e=this.g,i=this.b;return o(t,e,i,this),this},clone:function(){return new h(this.r,this.g,this.b,this.a)},gray:function(t){return this.setTo(t,t,t)},random:function(t,e){void 0===t&&(t=0),void 0===e&&(e=255);var i=Math.floor(t+Math.random()*(e-t)),n=Math.floor(t+Math.random()*(e-t)),r=Math.floor(t+Math.random()*(e-t));return this.setTo(i,n,r)},randomGray:function(t,e){void 0===t&&(t=0),void 0===e&&(e=255);var i=Math.floor(t+Math.random()*(e-t));return this.setTo(i,i,i)},saturate:function(t){return this.s+=t/100,this},desaturate:function(t){return this.s-=t/100,this},lighten:function(t){return this.v+=t/100,this},darken:function(t){return this.v-=t/100,this},brighten:function(t){var e=this.r,i=this.g,n=this.b;return e=Math.max(0,Math.min(255,e-Math.round(-t/100*255))),i=Math.max(0,Math.min(255,i-Math.round(-t/100*255))),n=Math.max(0,Math.min(255,n-Math.round(-t/100*255))),this.setTo(e,i,n)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(t){this.gl[0]=Math.min(Math.abs(t),1),this.r=Math.floor(255*this.gl[0]),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(t){this.gl[1]=Math.min(Math.abs(t),1),this.g=Math.floor(255*this.gl[1]),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(t){this.gl[2]=Math.min(Math.abs(t),1),this.b=Math.floor(255*this.gl[2]),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(t){this.gl[3]=Math.min(Math.abs(t),1),this.a=Math.floor(255*this.gl[3]),this.update()}},red:{get:function(){return this.r},set:function(t){t=Math.floor(Math.abs(t)),this.r=Math.min(t,255),this.gl[0]=t/255,this.update(!0)}},green:{get:function(){return this.g},set:function(t){t=Math.floor(Math.abs(t)),this.g=Math.min(t,255),this.gl[1]=t/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(t){t=Math.floor(Math.abs(t)),this.b=Math.min(t,255),this.gl[2]=t/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(t){t=Math.floor(Math.abs(t)),this.a=Math.min(t,255),this.gl[3]=t/255,this.update()}},h:{get:function(){return this._h},set:function(t){this._h=t,a(t,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(t){this._s=t,a(this._h,t,this._v,this)}},v:{get:function(){return this._v},set:function(t){this._v=t,a(this._h,this._s,t,this)}}});t.exports=h},function(t,e){t.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(t,e,i){var n={VERSION:"3.24.1",BlendModes:i(52),ScaleModes:i(234),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};t.exports=n},function(t,e){t.exports=function(t){return t.y+t.height-t.height*t.originY}},function(t,e){t.exports=function(t){return t.x-t.width*t.originX}},function(t,e){t.exports=function(t){return t.x+t.width-t.width*t.originX}},function(t,e){t.exports=function(t){return t.y-t.height*t.originY}},function(t,e){t.exports=function(t,e,i,n,r,s){var a;void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=1);var o=0,h=t.length;if(1===s)for(a=r;a<h;a++)t[a][e]+=i+o*n,o++;else for(a=r;0<=a;a--)t[a][e]+=i+o*n,o++;return t}},function(t,e,i){var n=i(13);t.exports=function(t){return t*n.DEG_TO_RAD}},function(t,e,i){t.exports={DESTROY:i(647),FADE_IN_COMPLETE:i(648),FADE_IN_START:i(649),FADE_OUT_COMPLETE:i(650),FADE_OUT_START:i(651),FLASH_COMPLETE:i(652),FLASH_START:i(653),PAN_COMPLETE:i(654),PAN_START:i(655),POST_RENDER:i(656),PRE_RENDER:i(657),ROTATE_COMPLETE:i(658),ROTATE_START:i(659),SHAKE_COMPLETE:i(660),SHAKE_START:i(661),ZOOM_COMPLETE:i(662),ZOOM_START:i(663)}},function(t,e){t.exports=function(t,e,i,n){var r=i||e.fillColor,s=n||e.fillAlpha,a=(16711680&r)>>>16,o=(65280&r)>>>8,h=255&r;t.fillStyle="rgba("+a+","+o+","+h+","+s+")"}},,function(t,e){t.exports=function(t,e){return t.y=e+t.height*t.originY,t}},function(t,e){t.exports=function(t,e){return t.x=e+t.width*t.originX,t}},function(t,e){t.exports=function(t,e){return t.x=e-t.width+t.width*t.originX,t}},function(t,e){t.exports=function(t,e){return t.y=e-t.height+t.height*t.originY,t}},function(t,e){t.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},function(t,e){t.exports=function(t,e,i){return!(t.width<=0||t.height<=0)&&t.x<=e&&t.x+t.width>=e&&t.y<=i&&t.y+t.height>=i}},function(t,e){t.exports=function(t,e,i,n){var r=i||e.strokeColor,s=n||e.strokeAlpha,a=(16711680&r)>>>16,o=(65280&r)>>>8,h=255&r;t.strokeStyle="rgba("+a+","+o+","+h+","+s+")",t.lineWidth=e.lineWidth}},function(t,e){t.exports={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14}},function(t,e,i){var n=i(142),r=i(24);t.exports=function(t,e,i,s,a){for(var o,h,l,u,c=r(t,e,i,s,null,a),d=0;d<c.length;d++){var f=c[d];f&&(f.collides?(o=n(f.x,f.y-1,!0,a),h=n(f.x,f.y+1,!0,a),l=n(f.x-1,f.y,!0,a),u=n(f.x+1,f.y,!0,a),f.faceTop=!o||!o.collides,f.faceBottom=!h||!h.collides,f.faceLeft=!l||!l.collides,f.faceRight=!u||!u.collides):f.resetFaces())}}},function(t,e){t.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(t,e){t.exports=function(t,e,i,n){var r=t-i,s=e-n;return Math.sqrt(r*r+s*s)}},function(t,e,i){t.exports={BOOT:i(823),DESTROY:i(824),DRAG_END:i(825),DRAG_ENTER:i(826),DRAG:i(827),DRAG_LEAVE:i(828),DRAG_OVER:i(829),DRAG_START:i(830),DROP:i(831),GAME_OUT:i(832),GAME_OVER:i(833),GAMEOBJECT_DOWN:i(834),GAMEOBJECT_DRAG_END:i(835),GAMEOBJECT_DRAG_ENTER:i(836),GAMEOBJECT_DRAG:i(837),GAMEOBJECT_DRAG_LEAVE:i(838),GAMEOBJECT_DRAG_OVER:i(839),GAMEOBJECT_DRAG_START:i(840),GAMEOBJECT_DROP:i(841),GAMEOBJECT_MOVE:i(842),GAMEOBJECT_OUT:i(843),GAMEOBJECT_OVER:i(844),GAMEOBJECT_POINTER_DOWN:i(845),GAMEOBJECT_POINTER_MOVE:i(846),GAMEOBJECT_POINTER_OUT:i(847),GAMEOBJECT_POINTER_OVER:i(848),GAMEOBJECT_POINTER_UP:i(849),GAMEOBJECT_POINTER_WHEEL:i(850),GAMEOBJECT_UP:i(851),GAMEOBJECT_WHEEL:i(852),MANAGER_BOOT:i(853),MANAGER_PROCESS:i(854),MANAGER_UPDATE:i(855),POINTER_DOWN:i(856),POINTER_DOWN_OUTSIDE:i(857),POINTER_MOVE:i(858),POINTER_OUT:i(859),POINTER_OVER:i(860),POINTER_UP:i(861),POINTER_UP_OUTSIDE:i(862),POINTER_WHEEL:i(863),POINTERLOCK_CHANGE:i(864),PRE_UPDATE:i(865),SHUTDOWN:i(866),START:i(867),UPDATE:i(868)}},function(t,e){t.exports=function(t,e,i){return 0<t.radius&&e>=t.left&&e<=t.right&&i>=t.top&&i<=t.bottom&&(t.x-e)*(t.x-e)+(t.y-i)*(t.y-i)<=t.radius*t.radius}},function(t,e,i){var n=i(0),r=i(275),s=i(153),a=i(47),o=i(154),h=i(3),l=new n({initialize:function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.type=a.LINE,this.x1=t,this.y1=e,this.x2=i,this.y2=n},getPoint:function(t,e){return r(this,t,e)},getPoints:function(t,e,i){return s(this,t,e,i)},getRandomPoint:function(t){return o(this,t)},setTo:function(t,e,i,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x1=t,this.y1=e,this.x2=i,this.y2=n,this},getPointA:function(t){return void 0===t&&(t=new h),t.set(this.x1,this.y1),t},getPointB:function(t){return void 0===t&&(t=new h),t.set(this.x2,this.y2),t},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(t){this.x1<=this.x2?this.x1=t:this.x2=t}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(t){this.x1>this.x2?this.x1=t:this.x2=t}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(t){this.y1<=this.y2?this.y1=t:this.y2=t}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(t){this.y1>this.y2?this.y1=t:this.y2=t}}});t.exports=l},function(t,e){t.exports=function(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))}},function(t,e){t.exports=function(t,e,i){var n=i-e;return e+((t-e)%n+n)%n}},function(t,e,i){t.exports={COMPLETE:i(891),DECODED:i(892),DECODED_ALL:i(893),DESTROY:i(894),DETUNE:i(895),GLOBAL_DETUNE:i(896),GLOBAL_MUTE:i(897),GLOBAL_RATE:i(898),GLOBAL_VOLUME:i(899),LOOP:i(900),LOOPED:i(901),MUTE:i(902),PAUSE_ALL:i(903),PAUSE:i(904),PLAY:i(905),RATE:i(906),RESUME_ALL:i(907),RESUME:i(908),SEEK:i(909),STOP_ALL:i(910),STOP:i(911),UNLOCKED:i(912),VOLUME:i(913)}},function(t,e,i){var n=i(0),r=i(17),s=i(21),a=i(8),o=i(2),h=i(6),l=i(7),u=new n({Extends:s,initialize:function(t,e,i,n,a){var u,c="json";l(e)&&(e=o(u=e,"key"),i=o(u,"url"),n=o(u,"xhrSettings"),c=o(u,"extension",c),a=o(u,"dataKey",a));var d={type:"json",cache:t.cacheManager.json,extension:c,responseType:"text",key:e,url:i,xhrSettings:n,config:a};s.call(this,t,d),l(i)&&(this.data=a?h(i,a):i,this.state=r.FILE_POPULATED)},onProcess:function(){var t,e;this.state!==r.FILE_POPULATED&&(this.state=r.FILE_PROCESSING,t=JSON.parse(this.xhrLoader.responseText),e=this.config,this.data="string"==typeof e?h(t,e,t):t),this.onProcessComplete()}});a.register("json",(function(t,e,i,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new u(this,t[r]));else this.addFile(new u(this,t,e,n,i));return this})),t.exports=u},function(t,e,i){var n=new(i(0))({initialize:function(t,e,i,n){this.loader=t,this.type=e,this.key=i,this.multiKeyIndex=t.multiKeyIndex++,this.files=n,this.complete=!1,this.pending=n.length,this.failed=0,this.config={},this.baseURL=t.baseURL,this.path=t.path,this.prefix=t.prefix;for(var r=0;r<n.length;r++)n[r].multiFile=this},isReadyToProcess:function(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function(t){return this.files.push(t),(t.multiFile=this).pending++,this.complete=!1,this},onFileComplete:function(t){-1!==this.files.indexOf(t)&&this.pending--},onFileFailed:function(t){-1!==this.files.indexOf(t)&&this.failed++}});t.exports=n},,function(t,e){t.exports=function(t,e,i,n){void 0===e&&(e=!0);var r=n.baseTileWidth,s=n.tilemapLayer;return s&&(void 0===i&&(i=s.scene.cameras.main),t-=s.x+i.scrollX*(1-s.scrollFactorX),r*=s.scaleX),e?Math.floor(t/r):t/r}},function(t,e){t.exports=function(t,e,i,n){void 0===e&&(e=!0);var r=n.baseTileHeight,s=n.tilemapLayer;return s&&(void 0===i&&(i=s.scene.cameras.main),t-=s.y+i.scrollY*(1-s.scrollFactorY),r*=s.scaleY),e?Math.floor(t/r):t/r}},function(t,e,i){var n=i(0),r=i(55),s=i(266),a=i(267),o=i(47),h=i(150),l=new n({initialize:function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.type=o.CIRCLE,this.x=t,this.y=e,this._radius=i,this._diameter=2*i},contains:function(t,e){return r(this,t,e)},getPoint:function(t,e){return s(this,t,e)},getPoints:function(t,e,i){return a(this,t,e,i)},getRandomPoint:function(t){return h(this,t)},setTo:function(t,e,i){return this.x=t,this.y=e,this._radius=i,this._diameter=2*i,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(t){this._radius=t,this._diameter=2*t}},diameter:{get:function(){return this._diameter},set:function(t){this._diameter=t,this._radius=.5*t}},left:{get:function(){return this.x-this._radius},set:function(t){this.x=t+this._radius}},right:{get:function(){return this.x+this._radius},set:function(t){this.x=t-this._radius}},top:{get:function(){return this.y-this._radius},set:function(t){this.y=t+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(t){this.y=t-this._radius}}});t.exports=l},function(t,e,i){"use strict";function n(t,e,i){i=i||2;var n,h,u,c,d,g,m,y=e&&e.length,v=y?e[0]*i:t.length,_=r(t,0,v,i,!0),x=[];if(!_||_.next===_.prev)return x;if(y&&(_=function(t,e,i,n){var a,h,u,c=[];for(a=0,h=e.length;a<h;a++)(u=r(t,e[a]*n,a<h-1?e[a+1]*n:t.length,n,!1))===u.next&&(u.steiner=!0),c.push(function(t){for(var e=t,i=t;e.x<i.x&&(i=e),(e=e.next)!==t;);return i}(u));for(c.sort(o),a=0;a<c.length;a++)!function(t,e){var i;(e=function(t,e){var i,n=e,r=t.x,s=t.y,a=-1/0;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){var o=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(o<=r&&a<o){if((a=o)===r){if(s===n.y)return n;if(s===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(r===a)return i.prev;var h,u=i,c=i.x,d=i.y,p=1/0;for(n=i.next;n!==u;)r>=n.x&&n.x>=c&&r!==n.x&&l(s<d?r:a,s,c,d,s<d?a:r,s,n.x,n.y)&&((h=Math.abs(s-n.y)/(r-n.x))<p||h===p&&n.x>i.x)&&f(n,t)&&(i=n,p=h),n=n.next;return i}(t,e))&&s(i=p(e,t),i.next)}(c[a],i),i=s(i,i.next);return i}(t,e,_,i)),t.length>80*i){n=u=t[0],h=c=t[1];for(var w=i;w<v;w+=i)(d=t[w])<n&&(n=d),(g=t[w+1])<h&&(h=g),u<d&&(u=d),c<g&&(c=g);m=0!==(m=Math.max(u-n,c-h))?1/m:0}return a(_,x,i,n,h,m),x}function r(t,e,i,n,r){var s,a;if(r===0<v(t,e,i,n))for(s=e;s<i;s+=n)a=g(s,t[s],t[s+1],a);else for(s=i-n;e<=s;s-=n)a=g(s,t[s],t[s+1],a);return a&&c(a,a.next)&&(m(a),a=a.next),a}function s(t,e){if(!t)return t;e=e||t;var i,n=t;do{if(i=!1,n.steiner||!c(n,n.next)&&0!==u(n.prev,n,n.next))n=n.next;else{if(m(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function a(t,e,i,n,r,o,g){if(t){!g&&o&&function(t,e,i,n){for(var r=t;null===r.z&&(r.z=h(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,(r=r.next)!==t;);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,n,r,s,a,o,h,l=1;do{for(i=t,s=t=null,a=0;i;){for(a++,n=i,e=o=0;e<l&&(o++,n=n.nextZ);e++);for(h=l;0<o||0<h&&n;)0!==o&&(0===h||!n||i.z<=n.z)?(i=(r=i).nextZ,o--):(n=(r=n).nextZ,h--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;i=n}s.nextZ=null,l*=2}while(1<a)}(r)}(t,n,r,o);for(var y,v,_=t;t.prev!==t.next;)if(y=t.prev,v=t.next,o?function(t,e,i,n){var r=t.prev,s=t,a=t.next;if(0<=u(r,s,a))return!1;for(var o=r.x<s.x?r.x<a.x?r.x:a.x:s.x<a.x?s.x:a.x,c=r.y<s.y?r.y<a.y?r.y:a.y:s.y<a.y?s.y:a.y,d=r.x>s.x?r.x>a.x?r.x:a.x:s.x>a.x?s.x:a.x,f=r.y>s.y?r.y>a.y?r.y:a.y:s.y>a.y?s.y:a.y,p=h(o,c,e,i,n),g=h(d,f,e,i,n),m=t.prevZ,y=t.nextZ;m&&m.z>=p&&y&&y.z<=g;){if(m!==t.prev&&m!==t.next&&l(r.x,r.y,s.x,s.y,a.x,a.y,m.x,m.y)&&0<=u(m.prev,m,m.next))return!1;if(m=m.prevZ,y!==t.prev&&y!==t.next&&l(r.x,r.y,s.x,s.y,a.x,a.y,y.x,y.y)&&0<=u(y.prev,y,y.next))return!1;y=y.nextZ}for(;m&&m.z>=p;){if(m!==t.prev&&m!==t.next&&l(r.x,r.y,s.x,s.y,a.x,a.y,m.x,m.y)&&0<=u(m.prev,m,m.next))return!1;m=m.prevZ}for(;y&&y.z<=g;){if(y!==t.prev&&y!==t.next&&l(r.x,r.y,s.x,s.y,a.x,a.y,y.x,y.y)&&0<=u(y.prev,y,y.next))return!1;y=y.nextZ}return!0}(t,n,r,o):function(t){var e=t.prev,i=t,n=t.next;if(0<=u(e,i,n))return!1;for(var r=t.next.next;r!==t.prev;){if(l(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&0<=u(r.prev,r,r.next))return!1;r=r.next}return!0}(t))e.push(y.i/i),e.push(t.i/i),e.push(v.i/i),m(t),t=v.next,_=v.next;else if((t=v)===_){g?1===g?a(t=function(t,e,i){var n=t;do{var r=n.prev,s=n.next.next;!c(r,s)&&d(r,n,n.next,s)&&f(r,s)&&f(s,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(s.i/i),m(n),m(n.next),n=t=s),n=n.next}while(n!==t);return n}(t,e,i),e,i,n,r,o,2):2===g&&function(t,e,i,n,r,o){var h=t;do{for(var l=h.next.next;l!==h.prev;){if(h.i!==l.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&d(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&f(t,e)&&f(e,t)&&function(t,e){for(var i=t,n=!1,r=(t.x+e.x)/2,s=(t.y+e.y)/2;i.y>s!=i.next.y>s&&i.next.y!==i.y&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(n=!n),(i=i.next)!==t;);return n}(t,e)}(h,l)){var u=p(h,l);return h=s(h,h.next),u=s(u,u.next),a(h,e,i,n,r,o),a(u,e,i,n,r,o)}l=l.next}h=h.next}while(h!==t)}(t,e,i,n,r,o):a(s(t),e,i,n,r,o,1);break}}}function o(t,e){return t.x-e.x}function h(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function l(t,e,i,n,r,s,a,o){return 0<=(r-a)*(e-o)-(t-a)*(s-o)&&0<=(t-a)*(n-o)-(i-a)*(e-o)&&0<=(i-a)*(s-o)-(r-a)*(n-o)}function u(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function c(t,e){return t.x===e.x&&t.y===e.y}function d(t,e,i,n){return c(t,e)&&c(i,n)||c(t,n)&&c(i,e)||0<u(t,e,i)!=0<u(t,e,n)&&0<u(i,n,t)!=0<u(i,n,e)}function f(t,e){return u(t.prev,t,t.next)<0?0<=u(t,e,t.next)&&0<=u(t,t.prev,e):u(t,e,t.prev)<0||u(t,t.next,e)<0}function p(t,e){var i=new y(t.i,t.x,t.y),n=new y(e.i,e.x,e.y),r=t.next,s=e.prev;return(t.next=e).prev=t,(i.next=r).prev=i,(n.next=i).prev=n,(s.next=n).prev=s,n}function g(t,e,i,n){var r=new y(t,e,i);return n?(r.next=n.next,(r.prev=n).next.prev=r,n.next=r):(r.prev=r).next=r,r}function m(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function y(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function v(t,e,i,n){for(var r=0,s=e,a=i-n;s<i;s+=n)r+=(t[a]-t[s])*(t[s+1]+t[a+1]),a=s;return r}(t.exports=n).deviation=function(t,e,i,n){var r=e&&e.length,s=r?e[0]*i:t.length,a=Math.abs(v(t,0,s,i));if(r)for(var o=0,h=e.length;o<h;o++){var l=e[o]*i,u=o<h-1?e[o+1]*i:t.length;a-=Math.abs(v(t,l,u,i))}var c=0;for(o=0;o<n.length;o+=3){var d=n[o]*i,f=n[o+1]*i,p=n[o+2]*i;c+=Math.abs((t[d]-t[p])*(t[1+f]-t[1+d])-(t[d]-t[f])*(t[1+p]-t[1+d]))}return 0===a&&0===c?0:Math.abs((c-a)/a)},n.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var s=0;s<t[r].length;s++)for(var a=0;a<e;a++)i.vertices.push(t[r][s][a]);0<r&&(n+=t[r-1].length,i.holes.push(n))}return i}},function(t,e){t.exports=function(t){var e={};for(var i in t)Array.isArray(t[i])?e[i]=t[i].slice(0):e[i]=t[i];return e}},function(t,e){t.exports=function(t,e,i,n){var r=t.length;if(e<0||r<e||i<=e||r<i||r<e+i){if(n)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},function(t,e,i){var n=i(115),r=i(181);t.exports=function(t,e){var i,s=n.Power0;if("string"==typeof t?n.hasOwnProperty(t)?s=n[t]:(i="",t.indexOf(".")&&("in"===(i=t.substr(t.indexOf(".")+1)).toLowerCase()?i="easeIn":"out"===i.toLowerCase()?i="easeOut":"inout"===i.toLowerCase()&&(i="easeInOut")),t=r(t.substr(0,t.indexOf(".")+1)+i),n.hasOwnProperty(t)&&(s=n[t])):"function"==typeof t?s=t:Array.isArray(t)&&t.length,!e)return s;var a=e.slice(0);return a.unshift(0),function(t){return a[0]=t,s.apply(this,a)}}},function(t,e,i){var n=i(9);t.exports=function(t,e,i,r,s){var a=t.strokeTint,o=n.getTintAppendFloatAlphaAndSwap(e.strokeColor,e.strokeAlpha*i);a.TL=o,a.TR=o,a.BL=o,a.BR=o;var h=e.pathData,l=h.length-1,u=e.lineWidth,c=u/2,d=h[0]-r,f=h[1]-s;e.closePath||(l-=2);for(var p=2;p<l;p+=2){var g=h[p]-r,m=h[p+1]-s;t.setTexture2D(),t.batchLine(d,f,g,m,c,c,u,p-2,!!e.closePath&&p===l-1),d=g,f=m}}},function(t,e,i){var n=i(0),r=i(83),s=i(425),a=i(426),o=i(47),h=i(56),l=i(158),u=new n({initialize:function(t,e,i,n,r,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=0),this.type=o.TRIANGLE,this.x1=t,this.y1=e,this.x2=i,this.y2=n,this.x3=r,this.y3=s},contains:function(t,e){return r(this,t,e)},getPoint:function(t,e){return s(this,t,e)},getPoints:function(t,e,i){return a(this,t,e,i)},getRandomPoint:function(t){return l(this,t)},setTo:function(t,e,i,n,r,s){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=0),this.x1=t,this.y1=e,this.x2=i,this.y2=n,this.x3=r,this.y3=s,this},getLineA:function(t){return void 0===t&&(t=new h),t.setTo(this.x1,this.y1,this.x2,this.y2),t},getLineB:function(t){return void 0===t&&(t=new h),t.setTo(this.x2,this.y2,this.x3,this.y3),t},getLineC:function(t){return void 0===t&&(t=new h),t.setTo(this.x3,this.y3,this.x1,this.y1),t},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(t){var e=this.x1<=this.x2&&this.x1<=this.x3?this.x1-t:this.x2<=this.x1&&this.x2<=this.x3?this.x2-t:this.x3-t;this.x1-=e,this.x2-=e,this.x3-=e}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(t){var e=this.x1>=this.x2&&this.x1>=this.x3?this.x1-t:this.x2>=this.x1&&this.x2>=this.x3?this.x2-t:this.x3-t;this.x1-=e,this.x2-=e,this.x3-=e}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(t){var e=this.y1<=this.y2&&this.y1<=this.y3?this.y1-t:this.y2<=this.y1&&this.y2<=this.y3?this.y2-t:this.y3-t;this.y1-=e,this.y2-=e,this.y3-=e}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(t){var e=this.y1>=this.y2&&this.y1>=this.y3?this.y1-t:this.y2>=this.y1&&this.y2>=this.y3?this.y2-t:this.y3-t;this.y1-=e,this.y2-=e,this.y3-=e}}});t.exports=u},function(t,e,i){var n=i(0),r=i(17),s=i(21),a=i(8),o=i(2),h=i(7),l=new n({Extends:s,initialize:function t(e,i,n,r,a){var l,u,c="png";h(i)&&(i=o(u=i,"key"),n=o(u,"url"),l=o(u,"normalMap"),r=o(u,"xhrSettings"),c=o(u,"extension",c),a=o(u,"frameConfig")),Array.isArray(n)&&(l=n[1],n=n[0]);var d,f={type:"image",cache:e.textureManager,extension:c,responseType:"blob",key:i,url:n,xhrSettings:r,config:a};s.call(this,e,f),l&&((d=new t(e,this.key,l,r,a)).type="normalMap",this.setLink(d),e.addFile(d))},onProcess:function(){this.state=r.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var t=this;this.data.onload=function(){s.revokeObjectURL(t.data),t.onProcessComplete()},this.data.onerror=function(){s.revokeObjectURL(t.data),t.onProcessError()},s.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var t,e=this.linkFile;e&&e.state===r.FILE_COMPLETE?(t="image"===this.type?this.cache.addImage(this.key,this.data,e.data):this.cache.addImage(e.key,e.data,this.data),this.pendingDestroy(t),e.pendingDestroy(t)):e||(t=this.cache.addImage(this.key,this.data),this.pendingDestroy(t))}});a.register("image",(function(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new l(this,t[n]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},function(t,e){t.exports=function(t,e){e?t.setCollision(!0,!0,!0,!0,!1):t.resetCollision(!1)}},function(t,e,i){var n=i(0),r=i(12),s=i(444),a=new n({Mixins:[r.Alpha,r.Flip,r.Visible],initialize:function(t,e,i,n,r,s,a,o){this.layer=t,this.index=e,this.x=i,this.y=n,this.width=r,this.height=s,this.baseWidth=void 0!==a?a:r,this.baseHeight=void 0!==o?o:s,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=null,(this.collisionCallbackContext=this).tint=16777215,this.physics={}},containsPoint:function(t,e){return!(t<this.pixelX||e<this.pixelY||t>this.right||e>this.bottom)},copy:function(t){return this.index=t.index,this.alpha=t.alpha,this.properties=t.properties,this.visible=t.visible,this.setFlip(t.flipX,t.flipY),this.tint=t.tint,this.rotation=t.rotation,this.collideUp=t.collideUp,this.collideDown=t.collideDown,this.collideLeft=t.collideLeft,this.collideRight=t.collideRight,this.collisionCallback=t.collisionCallback,this.collisionCallbackContext=t.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(t){var e=this.tilemapLayer;return e?e.tileToWorldX(this.x,t):this.x*this.baseWidth},getRight:function(t){var e=this.tilemapLayer;return e?this.getLeft(t)+this.width*e.scaleX:this.getLeft(t)+this.width},getTop:function(t){var e=this.tilemapLayer;return e?e.tileToWorldY(this.y,t)-(this.height-this.baseHeight)*e.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(t){var e=this.tilemapLayer;return e?this.getTop(t)+this.height*e.scaleY:this.getTop(t)+this.height},getBounds:function(t,e){return void 0===e&&(e=new s),e.x=this.getLeft(),e.y=this.getTop(),e.width=this.getRight()-e.x,e.height=this.getBottom()-e.y,e},getCenterX:function(t){return(this.getLeft(t)+this.getRight(t))/2},getCenterY:function(t){return(this.getTop(t)+this.getBottom(t))/2},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},intersects:function(t,e,i,n){return!(i<=this.pixelX||n<=this.pixelY||t>=this.right||e>=this.bottom)},isInteresting:function(t,e){return t&&e?this.canCollide||this.hasInterestingFace:t?this.collides:!!e&&this.hasInterestingFace},resetCollision:function(t){return void 0===t&&(t=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,t&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(t,e,i,n,r){return void 0===e&&(e=t),void 0===i&&(i=t),void 0===n&&(n=t),void 0===r&&(r=!0),this.collideLeft=t,this.collideRight=e,this.collideUp=i,this.collideDown=n,this.faceLeft=t,this.faceRight=e,this.faceTop=i,this.faceBottom=n,r&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},setCollisionCallback:function(t,e){return null===t?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=t,this.collisionCallbackContext=e),this},setSize:function(t,e,i,n){return void 0!==t&&(this.width=t),void 0!==e&&(this.height=e),void 0!==i&&(this.baseWidth=i),void 0!==n&&(this.baseHeight=n),this.updatePixelXY(),this},updatePixelXY:function(){return this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight,this},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var t=this.layer.tilemapLayer;if(t){var e=t.gidMap[this.index];if(e)return e}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var t=this.tilemapLayer;return t?t.tilemap:null}}});t.exports=a},function(t,e,i){var n=i(0),r=i(12),s=i(14),a=i(967),o=new n({Extends:s,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Size,r.TextureCrop,r.Tint,r.Transform,r.Visible,a],initialize:function(t,e,i,n,a){s.call(this,t,"Sprite"),this._crop=this.resetCropObject(),this.anims=new r.Animation(this),this.setTexture(n,a),this.setPosition(e,i),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},preUpdate:function(t,e){this.anims.update(t,e)},play:function(t,e,i){return this.anims.play(t,e,i),this},toJSON:function(){return r.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});t.exports=o},function(t,e){t.exports=function(t){return t.x-t.width*t.originX+.5*t.width}},function(t,e){t.exports=function(t,e){var i=t.width*t.originX;return t.x=e+i-.5*t.width,t}},function(t,e){t.exports=function(t){return t.y-t.height*t.originY+.5*t.height}},function(t,e){t.exports=function(t,e){var i=t.height*t.originY;return t.y=e+i-.5*t.height,t}},function(t,e){t.exports=function(t,e){if(!(e>=t.length)){for(var i=t.length-1,n=t[e],r=e;r<i;r++)t[r]=t[r+1];return t.length=i,n}}},function(t,e,i){var n=i(0),r=i(176),s=i(11),a=i(3),o=new n({initialize:function(t){this.type=t,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new a,this._tmpVec2B=new a},draw:function(t,e){return void 0===e&&(e=32),t.strokePoints(this.getPoints(e))},getBounds:function(t,e){t=t||new s,void 0===e&&(e=16);var i=this.getLength();i<e&&(e=i/2);var n=Math.max(1,Math.round(i/e));return r(this.getSpacedPoints(n),t)},getDistancePoints:function(t){var e=this.getLength(),i=Math.max(1,e/t);return this.getSpacedPoints(i)},getEndPoint:function(t){return void 0===t&&(t=new a),this.getPointAt(1,t)},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,i=[],n=this.getPoint(0,this._tmpVec2A),r=0;i.push(0);for(var s=1;s<=t;s++)r+=(e=this.getPoint(s/t,this._tmpVec2B)).distance(n),i.push(r),n.copy(e);return this.cacheArcLengths=i},getPointAt:function(t,e){var i=this.getUtoTmapping(t);return this.getPoint(i,e)},getPoints:function(t,e,i){void 0===i&&(i=[]),t=t||(e?this.getLength()/e:this.defaultDivisions);for(var n=0;n<=t;n++)i.push(this.getPoint(n/t));return i},getRandomPoint:function(t){return void 0===t&&(t=new a),this.getPoint(Math.random(),t)},getSpacedPoints:function(t,e,i){void 0===i&&(i=[]),t=t||(e?this.getLength()/e:this.defaultDivisions);for(var n=0;n<=t;n++){var r=this.getUtoTmapping(n/t,null,t);i.push(this.getPoint(r))}return i},getStartPoint:function(t){return void 0===t&&(t=new a),this.getPointAt(0,t)},getTangent:function(t,e){void 0===e&&(e=new a);var i=t-1e-4,n=t+1e-4;return i<0&&(i=0),1<n&&(n=1),this.getPoint(i,this._tmpVec2A),this.getPoint(n,e),e.subtract(this._tmpVec2A).normalize()},getTangentAt:function(t,e){var i=this.getUtoTmapping(t);return this.getTangent(i,e)},getTFromDistance:function(t,e){return t<=0?0:this.getUtoTmapping(0,t,e)},getUtoTmapping:function(t,e,i){for(var n,r=this.getLengths(i),s=0,a=r.length,o=e?Math.min(e,r[a-1]):t*r[a-1],h=0,l=a-1;h<=l;)if((n=r[s=Math.floor(h+(l-h)/2)]-o)<0)h=s+1;else{if(!(0<n)){l=s;break}l=s-1}if(r[s=l]===o)return s/(a-1);var u=r[s];return(s+(o-u)/(r[s+1]-u))/(a-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});t.exports=o},function(t,e,i){t.exports={ADD:i(870),COMPLETE:i(871),FILE_COMPLETE:i(872),FILE_KEY_COMPLETE:i(873),FILE_LOAD_ERROR:i(874),FILE_LOAD:i(875),FILE_PROGRESS:i(876),POST_PROCESS:i(877),PROGRESS:i(878),START:i(879)}},function(t,e){t.exports=function(t,e,i){var n=t.x3-t.x1,r=t.y3-t.y1,s=t.x2-t.x1,a=t.y2-t.y1,o=e-t.x1,h=i-t.y1,l=n*n+r*r,u=n*s+r*a,c=n*o+r*h,d=s*s+a*a,f=s*o+a*h,p=l*d-u*u,g=0==p?0:1/p,m=(d*c-u*f)*g,y=(l*f-u*c)*g;return 0<=m&&0<=y&&m+y<1}},function(t,e,i){var n=i(4);t.exports=function(t,e,i){void 0===i&&(i=new n);var r=t.x1,s=t.y1,a=t.x2,o=t.y2,h=e.x1,l=e.y1,u=e.x2,c=e.y2,d=(c-l)*(a-r)-(u-h)*(o-s);if(0==d)return!1;var f=((u-h)*(s-l)-(c-l)*(r-h))/d,p=((a-r)*(s-l)-(o-s)*(r-h))/d;return 0<=f&&f<=1&&0<=p&&p<=1&&(i.x=r+f*(a-r),i.y=s+f*(o-s),!0)}},function(t,e){t.exports=function(t){return Math.atan2(t.y2-t.y1,t.x2-t.x1)}},,function(t,e,i){var n=i(19);t.exports=function(t,e,i){return(i-e)*n(t,0,1)}},function(t,e){t.exports=function(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}},function(t,e){t.exports={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26}},function(t,e,i){t.exports={DESTROY:i(582),VIDEO_COMPLETE:i(583),VIDEO_CREATED:i(584),VIDEO_ERROR:i(585),VIDEO_LOOP:i(586),VIDEO_PLAY:i(587),VIDEO_SEEKED:i(588),VIDEO_SEEKING:i(589),VIDEO_STOP:i(590),VIDEO_TIMEOUT:i(591),VIDEO_UNLOCKED:i(592)}},function(t,e,i){var n=i(0),r=i(12),s=i(39),a=i(10),o=i(40),h=i(11),l=i(29),u=i(164),c=i(3),d=new n({Extends:a,Mixins:[r.Alpha,r.Visible],initialize:function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),a.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.resolution=1,this.roundPixels=!1,this.useBounds=!1,this.worldView=new h,this.dirty=!0,this._x=t,this._y=e,this._cx=0,this._cy=0,this._cw=0,this._ch=0,this._width=i,this._height=n,this._bounds=new h,this._scrollX=0,this._scrollY=0,this._zoom=1,this._rotation=0,this.matrix=new l,this.transparent=!0,this.backgroundColor=u("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new c(i/2,n/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null},setOrigin:function(t,e){return void 0===t&&(t=.5),void 0===e&&(e=t),this.originX=t,this.originY=e,this},getScroll:function(t,e,i){void 0===i&&(i=new c);var n=.5*this.width,r=.5*this.height;return i.x=t-n,i.y=e-r,this.useBounds&&(i.x=this.clampX(i.x),i.y=this.clampY(i.y)),i},centerOnX:function(t){var e=.5*this.width;return this.midPoint.x=t,this.scrollX=t-e,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(t){var e=.5*this.height;return this.midPoint.y=t,this.scrollY=t-e,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(t,e){return this.centerOnX(t),this.centerOnY(e),this},centerToBounds:function(){var t,e,i;return this.useBounds&&(t=this._bounds,e=.5*this.width,i=.5*this.height,this.midPoint.set(t.centerX,t.centerY),this.scrollX=t.centerX-e,this.scrollY=t.centerY-i),this},centerToSize:function(){return this.scrollX=.5*this.width,this.scrollY=.5*this.height,this},cull:function(t){if(this.disableCull)return t;var e=this.matrix.matrix,i=e[0],n=e[1],r=e[2],s=e[3];if(!(i*s-n*r))return t;for(var a=e[4],o=e[5],h=this.scrollX,l=this.scrollY,u=this.width,c=this.height,d=this.y,f=d+c,p=this.x,g=p+u,m=this.culledObjects,y=t.length,v=m.length=0;v<y;++v){var _,x,w,b,T=t[v];T.hasOwnProperty("width")&&!T.parentContainer?(_=T.width,x=T.height,p<((w=T.x-h*T.scrollFactorX-_*T.originX)+_)*i+((b=T.y-l*T.scrollFactorY-x*T.originY)+x)*r+a&&w*i+b*r+a<g&&d<(w+_)*n+(b+x)*s+o&&w*n+b*s+o<f&&m.push(T)):m.push(T)}return m},getWorldPoint:function(t,e,i){void 0===i&&(i=new c);var n=this.matrix.matrix,r=n[0],s=n[1],a=n[2],o=n[3],h=n[4],l=n[5],u=r*o-s*a;if(!u)return i.x=t,i.y=e,i;var d=o*(u=1/u),f=-s*u,p=-a*u,g=r*u,m=(a*l-o*h)*u,y=(s*h-r*l)*u,v=Math.cos(this.rotation),_=Math.sin(this.rotation),x=this.zoom,w=this.resolution,b=this.scrollX,T=this.scrollY,E=t+(b*v-T*_)*x,A=e+(b*_+T*v)*x;return i.x=(E*d+A*p)*w+m,i.y=(E*f+A*g)*w+y,i},ignore:function(t){var e=this.id;Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var n=t[i];Array.isArray(n)?this.ignore(n):n.isParent?this.ignore(n.getChildren()):n.cameraFilter|=e}return this},preRender:function(t){var e=this.width,i=this.height,n=.5*e,r=.5*i,s=this.zoom*t,a=this.matrix,o=e*this.originX,h=i*this.originY,l=this.scrollX,u=this.scrollY;this.useBounds&&(l=this.clampX(l),u=this.clampY(u)),this.roundPixels&&(o=Math.round(o),h=Math.round(h));var c=(this.scrollX=l)+n,d=(this.scrollY=u)+r;this.midPoint.set(c,d);var f=e/s,p=i/s;this.worldView.setTo(c-f/2,d-p/2,f,p),a.applyITRS(this.x+o,this.y+h,this.rotation,s,s),a.translate(-o,-h)},clampX:function(t){var e=this._bounds,i=this.displayWidth,n=e.x+(i-this.width)/2,r=Math.max(n,n+e.width-i);return t<n?t=n:r<t&&(t=r),t},clampY:function(t){var e=this._bounds,i=this.displayHeight,n=e.y+(i-this.height)/2,r=Math.max(n,n+e.height-i);return t<n?t=n:r<t&&(t=r),t},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(t){return void 0===t&&(t=0),this.rotation=s(t),this},setBackgroundColor:function(t){return void 0===t&&(t="rgba(0,0,0,0)"),this.backgroundColor=u(t),this.transparent=0===this.backgroundColor.alpha,this},setBounds:function(t,e,i,n,r){return void 0===r&&(r=!1),this._bounds.setTo(t,e,i,n),this.dirty=!0,this.useBounds=!0,r?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(t){void 0===t&&(t=new h);var e=this._bounds;return t.setTo(e.x,e.y,e.width,e.height),t},setName:function(t){return void 0===t&&(t=""),this.name=t,this},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setRotation:function(t){return void 0===t&&(t=0),this.rotation=t,this},setRoundPixels:function(t){return this.roundPixels=t,this},setScene:function(t){this.scene&&this._customViewport&&this.sceneManager.customViewports--;var e=(this.scene=t).sys;this.sceneManager=e.game.scene,this.scaleManager=e.scale,this.cameraManager=e.cameras;var i=this.scaleManager.resolution;return this.resolution=i,this._cx=this._x*i,this._cy=this._y*i,this._cw=this._width*i,this._ch=this._height*i,this.updateSystem(),this},setScroll:function(t,e){return void 0===e&&(e=t),this.scrollX=t,this.scrollY=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},setViewport:function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},setZoom:function(t){return void 0===t&&(t=1),0===t&&(t=.001),this.zoom=t,this},setMask:function(t,e){return void 0===e&&(e=!0),this.mask=t,this._maskCamera=e?this.cameraManager.default:this,this},clearMask:function(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var t={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(t.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),t},update:function(){},updateSystem:function(){var t,e;this.scaleManager&&(t=0!==this._x||0!==this._y||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,e=this.sceneManager,t&&!this._customViewport?e.customViewports++:!t&&this._customViewport&&e.customViewports--,this.dirty=!0,this._customViewport=t)},destroy:function(){this.emit(o.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(t){this._x=t,this._cx=t*this.resolution,this.updateSystem()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._cy=t*this.resolution,this.updateSystem()}},width:{get:function(){return this._width},set:function(t){this._width=t,this._cw=t*this.resolution,this.updateSystem()}},height:{get:function(){return this._height},set:function(t){this._height=t,this._ch=t*this.resolution,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(t){this._scrollX=t,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(t){this._scrollY=t,this.dirty=!0}},zoom:{get:function(){return this._zoom},set:function(t){this._zoom=t,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=t,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoom}},displayHeight:{get:function(){return this.height/this.zoom}}});t.exports=d},function(t,e,i){t.exports={ENTER_FULLSCREEN:i(703),FULLSCREEN_FAILED:i(704),FULLSCREEN_UNSUPPORTED:i(705),LEAVE_FULLSCREEN:i(706),ORIENTATION_CHANGE:i(707),RESIZE:i(708)}},function(t,e){t.exports=function(t,e,i,n){return void 0===i&&(i=0),0===e?t:(t-=i,t=e*Math.floor(t/e),n?(i+t)/e:i+t)}},function(t,e,i){var n=i(0),r=i(19),s=i(18),a=new n({initialize:function(t,e,i,n,r,s,a){this.texture=t,this.name=e,this.source=t.source[i],this.sourceIndex=i,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(s,a,n,r)},setSize:function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this.cutX=i,this.cutY=n,this.cutWidth=t,this.cutHeight=e,this.width=t,this.height=e,this.halfWidth=Math.floor(.5*t),this.halfHeight=Math.floor(.5*e),this.centerX=Math.floor(t/2),this.centerY=Math.floor(e/2);var r=this.data,s=r.cut;s.x=i,s.y=n,s.w=t,s.h=e,s.r=i+t,s.b=n+e,r.sourceSize.w=t,r.sourceSize.h=e,r.spriteSourceSize.w=t,r.spriteSourceSize.h=e,r.radius=.5*Math.sqrt(t*t+e*e);var a=r.drawImage;return a.x=i,a.y=n,a.width=t,a.height=e,this.updateUVs()},setTrim:function(t,e,i,n,r,s){var a=this.data,o=a.spriteSourceSize;return a.trim=!0,a.sourceSize.w=t,a.sourceSize.h=e,o.x=i,o.y=n,o.w=r,o.h=s,o.r=i+r,o.b=n+s,this.x=i,this.y=n,this.width=r,this.height=s,this.halfWidth=.5*r,this.halfHeight=.5*s,this.centerX=Math.floor(r/2),this.centerY=Math.floor(s/2),this.updateUVs()},setCropUVs:function(t,e,i,n,s,a,o){var h,l,u,c,d,f,p,g=this.cutX,m=this.cutY,y=this.cutWidth,v=this.cutHeight,_=this.realWidth,x=this.realHeight,w=g+(e=r(e,0,_)),b=m+(i=r(i,0,x)),T=n=r(n,0,_-e),E=s=r(s,0,x-i),A=this.data;A.trim?(h=A.spriteSourceSize,l=e+(n=r(n,0,y-e)),u=i+(s=r(s,0,v-i)),h.r<e||h.b<i||h.x>l||h.y>u?E=T=b=w=0:(c=Math.max(h.x,e),d=Math.max(h.y,i),T=f=Math.min(h.r,l)-c,E=p=Math.min(h.b,u)-d,w=a?g+(y-(c-h.x)-f):g+(c-h.x),b=o?m+(v-(d-h.y)-p):m+(d-h.y),e=c,i=d,n=f,s=p)):(a&&(w=g+(y-e-n)),o&&(b=m+(v-i-s)));var S=this.source.width,C=this.source.height;return t.u0=Math.max(0,w/S),t.v0=Math.max(0,b/C),t.u1=Math.min(1,(w+T)/S),t.v1=Math.min(1,(b+E)/C),t.x=e,t.y=i,t.cx=w,t.cy=b,t.cw=T,t.ch=E,t.width=n,t.height=s,t.flipX=a,t.flipY=o,t},updateCropUVs:function(t,e,i){return this.setCropUVs(t,t.x,t.y,t.width,t.height,e,i)},updateUVs:function(){var t=this.cutX,e=this.cutY,i=this.cutWidth,n=this.cutHeight,r=this.data.drawImage;r.width=i,r.height=n;var s=this.source.width,a=this.source.height;return this.u0=t/s,this.v0=e/a,this.u1=(t+i)/s,this.v1=(e+n)/a,this},updateUVsInverted:function(){var t=this.source.width,e=this.source.height;return this.u0=(this.cutX+this.cutHeight)/t,this.v0=this.cutY/e,this.u1=this.cutX/t,this.v1=(this.cutY+this.cutWidth)/e,this},clone:function(){var t=new a(this.texture,this.name,this.sourceIndex);return t.cutX=this.cutX,t.cutY=this.cutY,t.cutWidth=this.cutWidth,t.cutHeight=this.cutHeight,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t.halfWidth=this.halfWidth,t.halfHeight=this.halfHeight,t.centerX=this.centerX,t.centerY=this.centerY,t.rotated=this.rotated,t.data=s(!0,t.data,this.data),t.updateUVs(),t},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});t.exports=a},function(t,e,i){var n=i(0),r=i(96),s=i(398),a=i(399),o=i(47),h=i(157),l=new n({initialize:function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.type=o.ELLIPSE,this.x=t,this.y=e,this.width=i,this.height=n},contains:function(t,e){return r(this,t,e)},getPoint:function(t,e){return s(this,t,e)},getPoints:function(t,e,i){return a(this,t,e,i)},getRandomPoint:function(t){return h(this,t)},setTo:function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(t){this.x=t+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(t){this.y=t+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});t.exports=l},function(t,e){t.exports=function(t,e,i){if(t.width<=0||t.height<=0)return!1;var n=(e-t.x)/t.width,r=(i-t.y)/t.height;return(n*=n)+(r*=r)<.25}},function(t,e,i){var n=i(241),r=i(0),s=i(90),a=i(2),o=i(6),h=i(7),l=i(392),u=i(133),c=i(75),d=new r({initialize:function(t,e,i){i?e&&!Array.isArray(e)&&(e=[e]):Array.isArray(e)?h(e[0])&&(i=e,e=null):h(e)&&(i=e,e=null),this.scene=t,this.children=new u,this.isParent=!0,this.type="Group",this.classType=a(i,"classType",c),this.name=a(i,"name",""),this.active=a(i,"active",!0),this.maxSize=a(i,"maxSize",-1),this.defaultKey=a(i,"defaultKey",null),this.defaultFrame=a(i,"defaultFrame",null),this.runChildUpdate=a(i,"runChildUpdate",!1),this.createCallback=a(i,"createCallback",null),this.removeCallback=a(i,"removeCallback",null),this.createMultipleCallback=a(i,"createMultipleCallback",null),this.internalCreateCallback=a(i,"internalCreateCallback",null),this.internalRemoveCallback=a(i,"internalRemoveCallback",null),e&&this.addMultiple(e),i&&this.createMultiple(i)},create:function(t,e,i,n,r,s){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.defaultKey),void 0===n&&(n=this.defaultFrame),void 0===r&&(r=!0),void 0===s&&(s=!0),this.isFull())return null;var a=new this.classType(this.scene,t,e,i,n);return this.scene.sys.displayList.add(a),a.preUpdate&&this.scene.sys.updateList.add(a),a.visible=r,a.setActive(s),this.add(a),a},createMultiple:function(t){if(this.isFull())return[];Array.isArray(t)||(t=[t]);var e=[];if(t[0].key)for(var i=0;i<t.length;i++){var n=this.createFromConfig(t[i]);e=e.concat(n)}return e},createFromConfig:function(t){if(this.isFull())return[];this.classType=a(t,"classType",this.classType);var e=a(t,"key",void 0),i=a(t,"frame",null),r=a(t,"visible",!0),s=a(t,"active",!0),h=[];if(void 0===e)return h;Array.isArray(e)||(e=[e]),Array.isArray(i)||(i=[i]);var u=a(t,"repeat",0),c=a(t,"randomKey",!1),d=a(t,"randomFrame",!1),f=a(t,"yoyo",!1),p=a(t,"quantity",!1),g=a(t,"frameQuantity",1),m=a(t,"max",0),y=l(e,i,{max:m,qty:p||g,random:c,randomB:d,repeat:u,yoyo:f});t.createCallback&&(this.createCallback=t.createCallback),t.removeCallback&&(this.removeCallback=t.removeCallback);for(var v=0;v<y.length;v++){var _=this.create(0,0,y[v].a,y[v].b,r,s);if(!_)break;h.push(_)}var x=o(t,"setXY.x",0),w=o(t,"setXY.y",0),b=o(t,"setXY.stepX",0),T=o(t,"setXY.stepY",0);n.SetXY(h,x,w,b,T);var E=o(t,"setRotation.value",0),A=o(t,"setRotation.step",0);n.SetRotation(h,E,A);var S=o(t,"setScale.x",1),C=o(t,"setScale.y",S),O=o(t,"setScale.stepX",0),P=o(t,"setScale.stepY",0);n.SetScale(h,S,C,O,P);var R=o(t,"setAlpha.value",1),M=o(t,"setAlpha.step",0);n.SetAlpha(h,R,M);var L=o(t,"setDepth.value",0),I=o(t,"setDepth.step",0);n.SetDepth(h,L,I);var k=o(t,"setScrollFactor.x",1),D=o(t,"setScrollFactor.y",k),F=o(t,"setScrollFactor.stepX",0),B=o(t,"setScrollFactor.stepY",0);n.SetScrollFactor(h,k,D,F,B);var N=a(t,"hitArea",null),G=a(t,"hitAreaCallback",null);N&&n.SetHitArea(h,N,G);var Y=a(t,"gridAlign",!1);return Y&&n.GridAlign(h,Y),this.createMultipleCallback&&this.createMultipleCallback.call(this,h),h},preUpdate:function(t,e){if(this.runChildUpdate&&0!==this.children.size)for(var i=this.children.entries.slice(),n=0;n<i.length;n++){var r=i[n];r.active&&r.update(t,e)}},add:function(t,e){return void 0===e&&(e=!1),this.isFull()||(this.children.set(t),this.internalCreateCallback&&this.internalCreateCallback.call(this,t),this.createCallback&&this.createCallback.call(this,t),e&&(this.scene.sys.displayList.add(t),t.preUpdate&&this.scene.sys.updateList.add(t)),t.on(s.DESTROY,this.remove,this)),this},addMultiple:function(t,e){if(void 0===e&&(e=!1),Array.isArray(t))for(var i=0;i<t.length;i++)this.add(t[i],e);return this},remove:function(t,e,i){return void 0===e&&(e=!1),void 0===i&&(i=!1),this.children.contains(t)&&(this.children.delete(t),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,t),this.removeCallback&&this.removeCallback.call(this,t),t.off(s.DESTROY,this.remove,this),i?t.destroy():e&&(t.scene.sys.displayList.remove(t),t.preUpdate&&t.scene.sys.updateList.remove(t))),this},clear:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);for(var i=this.children,n=0;n<i.size;n++){var r=i.entries[n];r.off(s.DESTROY,this.remove,this),e?r.destroy():t&&(r.scene.sys.displayList.remove(r),r.preUpdate&&r.scene.sys.updateList.remove(r))}return this.children.clear(),this},contains:function(t){return this.children.contains(t)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getFirst:function(t,e,i,n,r,s,a){return this.getHandler(!0,1,t,e,i,n,r,s,a)},getFirstNth:function(t,e,i,n,r,s,a,o){return this.getHandler(!0,t,e,i,n,r,s,a,o)},getLast:function(t,e,i,n,r,s,a){return this.getHandler(!1,1,t,e,i,n,r,s,a)},getLastNth:function(t,e,i,n,r,s,a,o){return this.getHandler(!1,t,e,i,n,r,s,a,o)},getHandler:function(t,e,i,n,r,s,a,o,h){var l,u;void 0===i&&(i=!1),void 0===n&&(n=!1);var c=0,d=this.children.entries;if(t)for(u=0;u<d.length;u++)if((l=d[u]).active===i){if(++c===e)break}else l=null;else for(u=d.length-1;0<=u;u--)if((l=d[u]).active===i){if(++c===e)break}else l=null;return l?("number"==typeof r&&(l.x=r),"number"==typeof s&&(l.y=s),l):n?this.create(r,s,a,o,h):null},get:function(t,e,i,n,r){return this.getFirst(!1,!0,t,e,i,n,r)},getFirstAlive:function(t,e,i,n,r,s){return this.getFirst(!0,t,e,i,n,r,s)},getFirstDead:function(t,e,i,n,r,s){return this.getFirst(!1,t,e,i,n,r,s)},playAnimation:function(t,e){return n.PlayAnimation(this.children.entries,t,e),this},isFull:function(){return-1!==this.maxSize&&this.children.size>=this.maxSize},countActive:function(t){void 0===t&&(t=!0);for(var e=0,i=0;i<this.children.size;i++)this.children.entries[i].active===t&&e++;return e},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var t=this.getTotalUsed();return(-1===this.maxSize?999999999999:this.maxSize)-t},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},propertyValueSet:function(t,e,i,r,s){return n.PropertyValueSet(this.children.entries,t,e,i,r,s),this},propertyValueInc:function(t,e,i,r,s){return n.PropertyValueInc(this.children.entries,t,e,i,r,s),this},setX:function(t,e){return n.SetX(this.children.entries,t,e),this},setY:function(t,e){return n.SetY(this.children.entries,t,e),this},setXY:function(t,e,i,r){return n.SetXY(this.children.entries,t,e,i,r),this},incX:function(t,e){return n.IncX(this.children.entries,t,e),this},incY:function(t,e){return n.IncY(this.children.entries,t,e),this},incXY:function(t,e,i,r){return n.IncXY(this.children.entries,t,e,i,r),this},shiftPosition:function(t,e,i){return n.ShiftPosition(this.children.entries,t,e,i),this},angle:function(t,e){return n.Angle(this.children.entries,t,e),this},rotate:function(t,e){return n.Rotate(this.children.entries,t,e),this},rotateAround:function(t,e){return n.RotateAround(this.children.entries,t,e),this},rotateAroundDistance:function(t,e,i){return n.RotateAroundDistance(this.children.entries,t,e,i),this},setAlpha:function(t,e){return n.SetAlpha(this.children.entries,t,e),this},setTint:function(t,e,i,r){return n.SetTint(this.children.entries,t,e,i,r),this},setOrigin:function(t,e,i,r){return n.SetOrigin(this.children.entries,t,e,i,r),this},scaleX:function(t,e){return n.ScaleX(this.children.entries,t,e),this},scaleY:function(t,e){return n.ScaleY(this.children.entries,t,e),this},scaleXY:function(t,e,i,r){return n.ScaleXY(this.children.entries,t,e,i,r),this},setDepth:function(t,e){return n.SetDepth(this.children.entries,t,e),this},setBlendMode:function(t){return n.SetBlendMode(this.children.entries,t),this},setHitArea:function(t,e){return n.SetHitArea(this.children.entries,t,e),this},shuffle:function(){return n.Shuffle(this.children.entries),this},kill:function(t){this.children.contains(t)&&t.setActive(!1)},killAndHide:function(t){this.children.contains(t)&&(t.setActive(!1),t.setVisible(!1))},setVisible:function(t,e,i){return n.SetVisible(this.children.entries,t,e,i),this},toggleVisible:function(){return n.ToggleVisible(this.children.entries),this},destroy:function(t){void 0===t&&(t=!1),this.scene&&!this.ignoreDestroy&&(this.clear(!1,t),this.scene=void 0,this.children=void 0)}});t.exports=d},function(t,e,i){var n=i(9);t.exports=function(t,e,i,r,s,a){for(var o=n.getTintAppendFloatAlphaAndSwap(i.fillColor,i.fillAlpha*r),h=i.pathData,l=i.pathIndexes,u=0;u<l.length;u+=3){var c=2*l[u],d=2*l[u+1],f=2*l[u+2],p=h[0+c]-s,g=h[1+c]-a,m=h[0+d]-s,y=h[1+d]-a,v=h[0+f]-s,_=h[1+f]-a,x=e.getX(p,g),w=e.getY(p,g),b=e.getX(m,y),T=e.getY(m,y),E=e.getX(v,_),A=e.getY(v,_);t.setTexture2D(),t.batchTri(x,w,b,T,E,A,0,0,1,1,o,o,o,t.tintEffect)}}},,,function(t,e){t.exports=function(t,e,i){return 0<=t&&t<i.width&&0<=e&&e<i.height}},function(t,e,i){var n=i(0),r=i(2),s=new n({initialize:function(t){void 0===t&&(t={}),this.name=r(t,"name","layer"),this.x=r(t,"x",0),this.y=r(t,"y",0),this.width=r(t,"width",0),this.height=r(t,"height",0),this.tileWidth=r(t,"tileWidth",0),this.tileHeight=r(t,"tileHeight",0),this.baseTileWidth=r(t,"baseTileWidth",this.tileWidth),this.baseTileHeight=r(t,"baseTileHeight",this.tileHeight),this.widthInPixels=r(t,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=r(t,"heightInPixels",this.height*this.baseTileHeight),this.alpha=r(t,"alpha",1),this.visible=r(t,"visible",!0),this.properties=r(t,"properties",[]),this.indexes=r(t,"indexes",[]),this.collideIndexes=r(t,"collideIndexes",[]),this.callbacks=r(t,"callbacks",[]),this.bodies=r(t,"bodies",[]),this.data=r(t,"data",[]),this.tilemapLayer=r(t,"tilemapLayer",null)}});t.exports=s},function(t,e,i){var n=i(0),r=i(2),s=new n({initialize:function(t){void 0===t&&(t={}),this.name=r(t,"name","map"),this.width=r(t,"width",0),this.height=r(t,"height",0),this.infinite=r(t,"infinite",!1),this.tileWidth=r(t,"tileWidth",0),this.tileHeight=r(t,"tileHeight",0),this.widthInPixels=r(t,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=r(t,"heightInPixels",this.height*this.tileHeight),this.format=r(t,"format",null),this.orientation=r(t,"orientation","orthogonal"),this.renderOrder=r(t,"renderOrder","right-down"),this.version=r(t,"version","1"),this.properties=r(t,"properties",{}),this.layers=r(t,"layers",[]),this.images=r(t,"images",[]),this.objects=r(t,"objects",{}),this.collision=r(t,"collision",{}),this.tilesets=r(t,"tilesets",[]),this.imageCollections=r(t,"imageCollections",[]),this.tiles=r(t,"tiles",[])}});t.exports=s},function(t,e,i){var n=new(i(0))({initialize:function(t,e,i,n,r,s,a,o){(void 0===i||i<=0)&&(i=32),(void 0===n||n<=0)&&(n=32),void 0===r&&(r=0),void 0===s&&(s=0),void 0===a&&(a={}),void 0===o&&(o={}),this.name=t,this.firstgid=e,this.tileWidth=i,this.tileHeight=n,this.tileMargin=r,this.tileSpacing=s,this.tileProperties=a,this.tileData=o,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(t){return this.containsTileIndex(t)?this.tileProperties[t-this.firstgid]:null},getTileData:function(t){return this.containsTileIndex(t)?this.tileData[t-this.firstgid]:null},getTileCollisionGroup:function(t){var e=this.getTileData(t);return e&&e.objectgroup?e.objectgroup:null},containsTileIndex:function(t){return t>=this.firstgid&&t<this.firstgid+this.total},getTileTextureCoordinates:function(t){return this.containsTileIndex(t)?this.texCoordinates[t-this.firstgid]:null},setImage:function(t){return this.image=t,this.glTexture=t.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(t,e){return void 0!==t&&(this.tileWidth=t),void 0!==e&&(this.tileHeight=e),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(t,e){return void 0!==t&&(this.tileMargin=t),void 0!==e&&(this.tileSpacing=e),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(t,e){var i=(e-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),n=(t-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);i%1==0&&n%1==0||console.warn("Image tile area not tile size multiple in: "+this.name),i=Math.floor(i),n=Math.floor(n),this.rows=i,this.columns=n,this.total=i*n,this.texCoordinates.length=0;for(var r=this.tileMargin,s=this.tileMargin,a=0;a<this.rows;a++){for(var o=0;o<this.columns;o++)this.texCoordinates.push({x:r,y:s}),r+=this.tileWidth+this.tileSpacing;r=this.tileMargin,s+=this.tileHeight+this.tileSpacing}return this}});t.exports=n},function(t,e){t.exports={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12}},function(t,e){t.exports=function(t,e,i){return void 0===i&&(i=1e-4),Math.abs(t-e)<i}},function(t,e,i){var n=i(0),r=i(12),s=i(14),a=i(970),o=new n({Extends:s,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Size,r.TextureCrop,r.Tint,r.Transform,r.Visible,a],initialize:function(t,e,i,n,r){s.call(this,t,"Image"),this._crop=this.resetCropObject(),this.setTexture(n,r),this.setPosition(e,i),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});t.exports=o},function(t,e){t.exports=function(t,e){return t.hasOwnProperty(e)}},,function(t,e,i){var n=i(52),r=i(65),s=i(55),a=i(0),o=i(12),h=i(14),l=i(11),u=i(48),c=new a({Extends:h,Mixins:[o.Depth,o.GetBounds,o.Origin,o.Transform,o.ScrollFactor,o.Visible],initialize:function(t,e,i,r,s){void 0===r&&(r=1),void 0===s&&(s=r),h.call(this,t,"Zone"),this.setPosition(e,i),this.width=r,this.height=s,this.blendMode=n.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,e,i){void 0===i&&(i=!0),this.width=t,this.height=e,this.updateDisplayOrigin();var n=this.input;return i&&n&&!n.customHitArea&&(n.hitArea.width=t,n.hitArea.height=e),this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this},setCircleDropZone:function(t){return this.setDropZone(new r(0,0,t),s)},setRectangleDropZone:function(t,e){return this.setDropZone(new l(0,0,t,e),u)},setDropZone:function(t,e){return void 0===t?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(t,e,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(){},renderWebGL:function(){}});t.exports=c},function(t,e,i){t.exports={ADD_ANIMATION:i(534),ANIMATION_COMPLETE:i(535),ANIMATION_REPEAT:i(536),ANIMATION_RESTART:i(537),ANIMATION_START:i(538),PAUSE_ALL:i(539),REMOVE_ANIMATION:i(540),RESUME_ALL:i(541),SPRITE_ANIMATION_COMPLETE:i(542),SPRITE_ANIMATION_KEY_COMPLETE:i(543),SPRITE_ANIMATION_KEY_REPEAT:i(544),SPRITE_ANIMATION_KEY_RESTART:i(545),SPRITE_ANIMATION_KEY_START:i(546),SPRITE_ANIMATION_KEY_UPDATE:i(547),SPRITE_ANIMATION_REPEAT:i(548),SPRITE_ANIMATION_RESTART:i(549),SPRITE_ANIMATION_START:i(550),SPRITE_ANIMATION_UPDATE:i(551)}},function(t,e){t.exports=function(t){return 2*(t.width+t.height)}},function(t,e,i){var n=i(0),r=i(284),s=new n({initialize:function(t,e){this.parent=t,(this.events=e)||(this.events=t.events?t.events:t),this.list={},this.values={},this._frozen=!1,!t.hasOwnProperty("sys")&&this.events&&this.events.once("destroy",this.destroy,this)},get:function(t){var e=this.list;if(Array.isArray(t)){for(var i=[],n=0;n<t.length;n++)i.push(e[t[n]]);return i}return e[t]},getAll:function(){var t={};for(var e in this.list)this.list.hasOwnProperty(e)&&(t[e]=this.list[e]);return t},query:function(t){var e={};for(var i in this.list)this.list.hasOwnProperty(i)&&i.match(t)&&(e[i]=this.list[i]);return e},set:function(t,e){if(this._frozen)return this;if("string"==typeof t)return this.setValue(t,e);for(var i in t)this.setValue(i,t[i]);return this},inc:function(t,e){if(this._frozen)return this;void 0===e&&(e=1);var i=this.get(t);return void 0===i&&(i=0),this.set(t,i+e),this},toggle:function(t){return this._frozen||this.set(t,!this.get(t)),this},setValue:function(t,e){return this._frozen||(this.has(t)?this.values[t]=e:(n=(i=this).list,s=this.events,a=this.parent,Object.defineProperty(this.values,t,{enumerable:!0,configurable:!0,get:function(){return n[t]},set:function(e){var o;i._frozen||(o=n[t],n[t]=e,s.emit(r.CHANGE_DATA,a,t,e,o),s.emit(r.CHANGE_DATA_KEY+t,a,e,o))}}),n[t]=e,s.emit(r.SET_DATA,a,t,e))),this;var i,n,s,a},each:function(t,e){for(var i=[this.parent,null,void 0],n=1;n<arguments.length;n++)i.push(arguments[n]);for(var r in this.list)i[1]=r,i[2]=this.list[r],t.apply(e,i);return this},merge:function(t,e){for(var i in void 0===e&&(e=!0),t)t.hasOwnProperty(i)&&(e||!e&&!this.has(i))&&this.setValue(i,t[i]);return this},remove:function(t){if(this._frozen)return this;if(!Array.isArray(t))return this.removeValue(t);for(var e=0;e<t.length;e++)this.removeValue(t[e]);return this},removeValue:function(t){var e;return this.has(t)&&(e=this.list[t],delete this.list[t],delete this.values[t],this.events.emit(r.REMOVE_DATA,this.parent,t,e)),this},pop:function(t){var e=void 0;return!this._frozen&&this.has(t)&&(e=this.list[t],delete this.list[t],delete this.values[t],this.events.emit(r.REMOVE_DATA,this.parent,t,e)),e},has:function(t){return this.list.hasOwnProperty(t)},setFreeze:function(t){return this._frozen=t,this},reset:function(){for(var t in this.list)delete this.list[t],delete this.values[t];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(r.CHANGE_DATA),this.events.off(r.SET_DATA),this.events.off(r.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(t){this._frozen=!!t}},count:{get:function(){var t=0;for(var e in this.list)void 0!==this.list[e]&&t++;return t}}});t.exports=s},function(t,e){t.exports=function(t){for(var e=t.length-1;0<e;e--){var i=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[i],t[i]=n}return t}},function(t,e,i){var n=i(302),r=i(303),s=i(304),a=i(305),o=i(306),h=i(307),l=i(308),u=i(309),c=i(310),d=i(311),f=i(312),p=i(313);t.exports={Power0:l,Power1:u.Out,Power2:a.Out,Power3:c.Out,Power4:d.Out,Linear:l,Quad:u.Out,Cubic:a.Out,Quart:c.Out,Quint:d.Out,Sine:f.Out,Expo:h.Out,Circ:s.Out,Elastic:o.Out,Back:n.Out,Bounce:r.Out,Stepped:p,"Quad.easeIn":u.In,"Cubic.easeIn":a.In,"Quart.easeIn":c.In,"Quint.easeIn":d.In,"Sine.easeIn":f.In,"Expo.easeIn":h.In,"Circ.easeIn":s.In,"Elastic.easeIn":o.In,"Back.easeIn":n.In,"Bounce.easeIn":r.In,"Quad.easeOut":u.Out,"Cubic.easeOut":a.Out,"Quart.easeOut":c.Out,"Quint.easeOut":d.Out,"Sine.easeOut":f.Out,"Expo.easeOut":h.Out,"Circ.easeOut":s.Out,"Elastic.easeOut":o.Out,"Back.easeOut":n.Out,"Bounce.easeOut":r.Out,"Quad.easeInOut":u.InOut,"Cubic.easeInOut":a.InOut,"Quart.easeInOut":c.InOut,"Quint.easeInOut":d.InOut,"Sine.easeInOut":f.InOut,"Expo.easeInOut":h.InOut,"Circ.easeInOut":s.InOut,"Elastic.easeInOut":o.InOut,"Back.easeInOut":n.InOut,"Bounce.easeInOut":r.InOut}},function(t,e){t.exports=function(t,e,i){return(e-t)*i+t}},function(t,e,i){(function(e){var i={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};t.exports=function(){var t=navigator.userAgent;/Windows/.test(t)?i.windows=!0:/Mac OS/.test(t)&&!/like Mac OS/.test(t)?i.macOS=!0:/Android/.test(t)?i.android=!0:/Linux/.test(t)?i.linux=!0:/iP[ao]d|iPhone/i.test(t)?(i.iOS=!0,navigator.appVersion.match(/OS (\d+)/),i.iOSVersion=parseInt(RegExp.$1,10),i.iPhone=-1!==t.toLowerCase().indexOf("iphone"),i.iPad=-1!==t.toLowerCase().indexOf("ipad")):/Kindle/.test(t)||/\bKF[A-Z][A-Z]+/.test(t)||/Silk.*Mobile Safari/.test(t)?i.kindle=!0:/CrOS/.test(t)&&(i.chromeOS=!0),(/Windows Phone/i.test(t)||/IEMobile/i.test(t))&&(i.android=!1,i.iOS=!1,i.macOS=!1,i.windows=!0,i.windowsPhone=!0);var n=/Silk/.test(t);return(i.windows||i.macOS||i.linux&&!n||i.chromeOS)&&(i.desktop=!0),(i.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t))&&(i.desktop=!1),navigator.standalone&&(i.webApp=!0),void 0!==window.cordova&&(i.cordova=!0),void 0!==e&&e.versions&&e.versions.node&&(i.node=!0),i.node&&"object"==typeof e.versions&&(i.nodeWebkit=!!e.versions["node-webkit"],i.electron=!!e.versions.electron),void 0!==window.ejecta&&(i.ejecta=!0),/Crosswalk/.test(t)&&(i.crosswalk=!0),i.pixelRatio=window.devicePixelRatio||1,i}()}).call(this,i(729))},function(t,e,i){var n,r=i(117),s={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};t.exports=(n=navigator.userAgent,/Edge\/\d+/.test(n)?s.edge=!0:/Chrome\/(\d+)/.test(n)&&!r.windowsPhone?(s.chrome=!0,s.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(n)?(s.firefox=!0,s.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(n)&&r.iOS?s.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(n)?(s.ie=!0,s.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(n)?s.opera=!0:/Safari/.test(n)&&!r.windowsPhone?s.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(n)&&(s.ie=!0,s.trident=!0,s.tridentVersion=parseInt(RegExp.$1,10),s.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(n)&&(s.silk=!0),s)},function(t,e){t.exports=function(t,e){return Math.random()*(e-t)+t}},function(t,e){t.exports=function(t,e){return 0<t&&0==(t&t-1)&&0<e&&0==(e&e-1)}},function(t,e,i){t.exports={ADD:i(781),ERROR:i(782),LOAD:i(783),READY:i(784),REMOVE:i(785)}},function(t,e){t.exports=function(t,e){var i;if(e)"string"==typeof e?i=document.getElementById(e):"object"==typeof e&&1===e.nodeType&&(i=e);else if(t.parentElement||null===e)return t;return(i=i||document.body).appendChild(t),t}},function(t,e,i){var n=i(80);t.exports=function(t,e,i,r){if(void 0===r&&(r=t),!Array.isArray(e))return-1!==(a=t.indexOf(e))?(n(t,a),i&&i.call(r,e),e):null;for(var s=e.length-1;0<=s;){var a,o=e[s];-1!==(a=t.indexOf(o))?(n(t,a),i&&i.call(r,o)):e.pop(),s--}return e}},function(t,e){t.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175}},function(t,e){t.exports={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9}},function(t,e,i){var n=i(67);t.exports=function(t,e){var i=n(t);for(var r in e)i.hasOwnProperty(r)||(i[r]=e[r]);return i}},function(t,e,i){var n=i(0),r=i(67),s=i(10),a=i(59),o=i(20),h=i(1),l=i(382),u=i(383),c=new n({Extends:s,initialize:function(t){s.call(this),this.game=t,this.jsonCache=t.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,t.events.on(o.BLUR,this.onGameBlur,this),t.events.on(o.FOCUS,this.onGameFocus,this),t.events.on(o.PRE_STEP,this.update,this),t.events.once(o.DESTROY,this.destroy,this)},add:h,addAudioSprite:function(t,e){void 0===e&&(e={});var i,n,s=this.add(t,e);for(var a in s.spritemap=this.jsonCache.get(t).spritemap,s.spritemap)s.spritemap.hasOwnProperty(a)&&(i=r(e),n=s.spritemap[a],i.loop=!!n.hasOwnProperty("loop")&&n.loop,s.addMarker({name:a,start:n.start,duration:n.end-n.start,config:i}));return s},get:function(t){return u(this.sounds,"key",t)},getAll:function(t){return l(this.sounds,"key",t)},play:function(t,e){var i=this.add(t);return i.once(a.COMPLETE,i.destroy,i),e?e.name?(i.addMarker(e),i.play(e.name)):i.play(e):i.play()},playAudioSprite:function(t,e,i){var n=this.addAudioSprite(t);return n.once(a.COMPLETE,n.destroy,n),n.play(e,i)},remove:function(t){var e=this.sounds.indexOf(t);return-1!==e&&(t.destroy(),this.sounds.splice(e,1),!0)},removeAll:function(){this.sounds.forEach((function(t){t.destroy()})),this.sounds.length=0},removeByKey:function(t){for(var e=0,i=this.sounds.length-1;0<=i;i--){var n=this.sounds[i];n.key===t&&(n.destroy(),this.sounds.splice(i,1),e++)}return e},pauseAll:function(){this.forEachActiveSound((function(t){t.pause()})),this.emit(a.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound((function(t){t.resume()})),this.emit(a.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound((function(t){t.stop()})),this.emit(a.STOP_ALL,this)},stopByKey:function(t){var e=0;return this.getAll(t).forEach((function(t){t.stop()&&e++})),e},unlock:h,onBlur:h,onFocus:h,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(t,e){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(a.UNLOCKED,this));for(var i=this.sounds.length-1;0<=i;i--)this.sounds[i].pendingRemove&&this.sounds.splice(i,1);this.sounds.forEach((function(i){i.update(t,e)}))},destroy:function(){this.game.events.off(o.BLUR,this.onGameBlur,this),this.game.events.off(o.FOCUS,this.onGameFocus,this),this.game.events.off(o.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(t,e){var i=this;this.sounds.forEach((function(n,r){n&&!n.pendingRemove&&t.call(e||i,n,r,i.sounds)}))},setRate:function(t){return this.rate=t,this},rate:{get:function(){return this._rate},set:function(t){this._rate=t,this.forEachActiveSound((function(t){t.calculateRate()})),this.emit(a.GLOBAL_RATE,this,t)}},setDetune:function(t){return this.detune=t,this},detune:{get:function(){return this._detune},set:function(t){this._detune=t,this.forEachActiveSound((function(t){t.calculateRate()})),this.emit(a.GLOBAL_DETUNE,this,t)}}});t.exports=c},function(t,e,i){var n=i(0),r=i(10),s=i(59),a=i(18),o=i(1),h=new n({Extends:r,initialize:function(t,e,i){r.call(this),this.manager=t,this.key=e,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0},this.currentConfig=this.config,this.config=a(this.config,i),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(t){return!(!t||!t.name||"string"!=typeof t.name||(this.markers[t.name]?(console.error("addMarker "+t.name+" already exists in Sound"),1):(t=a(!0,{name:"",start:0,duration:this.totalDuration-(t.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0}},t),this.markers[t.name]=t,0)))},updateMarker:function(t){return!(!t||!t.name||"string"!=typeof t.name||(this.markers[t.name]?(this.markers[t.name]=a(!0,this.markers[t.name],t),0):(console.warn("Audio Marker: "+t.name+" missing in Sound: "+this.key),1)))},removeMarker:function(t){var e=this.markers[t];return e?(this.markers[t]=null,e):null},play:function(t,e){if(void 0===t&&(t=""),"object"==typeof t&&(e=t,t=""),"string"!=typeof t)return!1;if(t){if(!this.markers[t])return console.warn("Marker: "+t+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[t],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}else this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;return this.resetConfig(),this.currentConfig=a(this.currentConfig,e),this.isPlaying=!0,!(this.isPaused=!1)},pause:function(){return!(this.isPaused||!this.isPlaying)&&(this.isPlaying=!1,this.isPaused=!0)},resume:function(){return!(!this.isPaused||this.isPlaying||(this.isPlaying=!0,this.isPaused=!1))},stop:function(){return!(!this.isPaused&&!this.isPlaying||(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),0))},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:o,calculateRate:function(){var t=this.currentConfig.detune+this.manager.detune,e=Math.pow(1.0005777895065548,t);this.totalRate=this.currentConfig.rate*this.manager.rate*e},destroy:function(){this.pendingRemove||(this.emit(s.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});t.exports=h},function(t,e,i){var n=i(183),r=i(0),s=i(1),a=i(131),o=new r({initialize:function(t){this.parent=t,this.list=[],this.position=0,this.addCallback=s,this.removeCallback=s,this._sortKey=""},add:function(t,e){return e?n.Add(this.list,t):n.Add(this.list,t,0,this.addCallback,this)},addAt:function(t,e,i){return i?n.AddAt(this.list,t,e):n.AddAt(this.list,t,e,0,this.addCallback,this)},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t,e){return t&&(void 0===e&&(e=function(e,i){return e[t]-i[t]}),a.inplace(this.list,e)),this},getByName:function(t){return n.GetFirst(this.list,"name",t)},getRandom:function(t,e){return n.GetRandom(this.list,t,e)},getFirst:function(t,e,i,r){return n.GetFirst(this.list,t,e,i,r)},getAll:function(t,e,i,r){return n.GetAll(this.list,t,e,i,r)},count:function(t,e){return n.CountAllMatching(this.list,t,e)},swap:function(t,e){n.Swap(this.list,t,e)},moveTo:function(t,e){return n.MoveTo(this.list,t,e)},remove:function(t,e){return e?n.Remove(this.list,t):n.Remove(this.list,t,this.removeCallback,this)},removeAt:function(t,e){return e?n.RemoveAt(this.list,t):n.RemoveAt(this.list,t,this.removeCallback,this)},removeBetween:function(t,e,i){return i?n.RemoveBetween(this.list,t,e):n.RemoveBetween(this.list,t,e,this.removeCallback,this)},removeAll:function(t){for(var e=this.list.length;e--;)this.remove(this.list[e],t);return this},bringToTop:function(t){return n.BringToTop(this.list,t)},sendToBack:function(t){return n.SendToBack(this.list,t)},moveUp:function(t){return n.MoveUp(this.list,t),t},moveDown:function(t){return n.MoveDown(this.list,t),t},reverse:function(){return this.list.reverse(),this},shuffle:function(){return n.Shuffle(this.list),this},replace:function(t,e){return n.Replace(this.list,t,e)},exists:function(t){return-1<this.list.indexOf(t)},setAll:function(t,e,i,r){return n.SetAll(this.list,t,e,i,r),this},each:function(t,e){for(var i=[null],n=2;n<arguments.length;n++)i.push(arguments[n]);for(n=0;n<this.list.length;n++)i[0]=this.list[n],t.apply(e,i)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return(this.position=0)<this.list.length?this.list[0]:null}},last:{get:function(){return 0<this.list.length?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return 0<this.position?(this.position--,this.list[this.position]):null}}});t.exports=o},function(t,e,i){var n=i(184),r=i(390);t.exports=function(t,e){if(void 0===e&&(e=90),!n(t))return null;if("string"!=typeof e&&(e=(e%360+360)%360),90===e||-270===e||"rotateLeft"===e)(t=r(t)).reverse();else if(-90===e||270===e||"rotateRight"===e)t.reverse(),t=r(t);else if(180===Math.abs(e)||"rotate180"===e){for(var i=0;i<t.length;i++)t[i].reverse();t.reverse()}return t}},function(t,e,i){!function(){function e(t,e){return i(t.slice(),e)}function i(t,e){"function"!=typeof e&&(e=function(t,e){return String(t).localeCompare(e)});var i=t.length;if(i<=1)return t;for(var r=new Array(i),s=1;s<i;s*=2){n(t,e,s,r);var a=t;t=r,r=a}return t}e.inplace=function(t,e){var r=i(t,e);return r!==t&&n(r,null,t.length,t),t};var n=function(t,e,i,n){for(var r,s,a,o,h=t.length,l=0,u=2*i,c=0;c<h;c+=u)for(s=(r=c+i)+i,h<r&&(r=h),h<s&&(s=h),a=c,o=r;;)if(a<r&&o<s)e(t[a],t[o])<=0?n[l++]=t[a++]:n[l++]=t[o++];else if(a<r)n[l++]=t[a++];else{if(!(o<s))break;n[l++]=t[o++]}};t.exports=e}()},function(t,e,i){var n=i(0),r=i(12),s=i(14),a=i(945),o=i(946),h=i(187),l=i(947),u=new n({Extends:s,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Texture,r.Tint,r.Transform,r.Visible,l],initialize:function(t,e,i,n,r,o,h){void 0===r&&(r=""),void 0===h&&(h=0),s.call(this,t,"BitmapText"),this.font=n;var l=this.scene.sys.cache.bitmapFont.get(n);this.fontData=l.data,this._text="",this._fontSize=o||this.fontData.size,this._letterSpacing=0,this._align=h,this._bounds=a(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.setTexture(l.texture,l.frame),this.setPosition(e,i),this.setOrigin(0,0),this.initPipeline(),this.setText(r)},setLeftAlign:function(){return this._align=u.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=u.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=u.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(t){return this._fontSize=t,this._dirty=!0,this},setLetterSpacing:function(t){return void 0===t&&(t=0),this._letterSpacing=t,this._dirty=!0,this},setText:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this.text&&(this._text=t.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},getTextBounds:function(t){var e=this._bounds;return!this._dirty&&this.scaleX===e.scaleX&&this.scaleY===e.scaleY||(a(this,t,e),this._dirty=!1,this.updateDisplayOrigin()),e},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this._dirty=!0,this},setFont:function(t,e,i){var n;return void 0===e&&(e=this._fontSize),void 0===i&&(i=this._align),t===this.font||(n=this.scene.sys.cache.bitmapFont.get(t))&&(this.font=t,this.fontData=n.data,this._fontSize=e,this._align=i,this.setTexture(n.texture,n.frame),a(this,!1,this._bounds)),this},setMaxWidth:function(t,e){return this._maxWidth=t,this._dirty=!0,void 0!==e&&(this.wordWrapCharCode=e),this},align:{set:function(t){this._align=t,this._dirty=!0},get:function(){return this._align}},text:{set:function(t){this.setText(t)},get:function(){return this._text}},fontSize:{set:function(t){this._fontSize=t,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(t){this._letterSpacing=t,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(t){this._maxWidth=t,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var t=r.ToJSON(this),e={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return t.data=e,t}});u.ALIGN_LEFT=0,u.ALIGN_CENTER=1,u.ALIGN_RIGHT=2,u.ParseFromAtlas=o,u.ParseXMLBitmapFont=h,t.exports=u},function(t,e,i){var n=new(i(0))({initialize:function(t){if(this.entries=[],Array.isArray(t))for(var e=0;e<t.length;e++)this.set(t[e])},set:function(t){return-1===this.entries.indexOf(t)&&this.entries.push(t),this},get:function(t,e){for(var i=0;i<this.entries.length;i++){var n=this.entries[i];if(n[t]===e)return n}},getArray:function(){return this.entries.slice(0)},delete:function(t){var e=this.entries.indexOf(t);return-1<e&&this.entries.splice(e,1),this},dump:function(){console.group("Set");for(var t=0;t<this.entries.length;t++){var e=this.entries[t];console.log(e)}console.groupEnd()},each:function(t,e){var i,n=this.entries.slice(),r=n.length;if(e)for(i=0;i<r&&!1!==t.call(e,n[i],i);i++);else for(i=0;i<r&&!1!==t(n[i],i);i++);return this},iterate:function(t,e){var i,n=this.entries.length;if(e)for(i=0;i<n&&!1!==t.call(e,this.entries[i],i);i++);else for(i=0;i<n&&!1!==t(this.entries[i],i);i++);return this},iterateLocal:function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var n=this.entries.length;for(i=0;i<n;i++){var r=this.entries[i];r[t].apply(r,e)}return this},clear:function(){return this.entries.length=0,this},contains:function(t){return-1<this.entries.indexOf(t)},union:function(t){var e=new n;return t.entries.forEach((function(t){e.set(t)})),this.entries.forEach((function(t){e.set(t)})),e},intersect:function(t){var e=new n;return this.entries.forEach((function(i){t.contains(i)&&e.set(i)})),e},difference:function(t){var e=new n;return this.entries.forEach((function(i){t.contains(i)||e.set(i)})),e},size:{get:function(){return this.entries.length},set:function(t){return t<this.entries.length?this.entries.length=t:this.entries.length}}});t.exports=n},function(t,e,i){var n=i(0),r=i(12),s=i(14),a=i(1077),o=i(1),h=new n({Extends:s,Mixins:[r.BlendMode,r.Depth,r.Mask,r.Pipeline,r.Size,r.Texture,r.Transform,r.Visible,r.ScrollFactor,a],initialize:function(t,e,i,n,r,a,o,h,l){if(s.call(this,t,"Mesh"),n.length!==r.length)throw new Error("Mesh Vertex count must match UV count");var u,c=n.length/2|0;if(0<a.length&&a.length<c)throw new Error("Mesh Color count must match Vertex count");if(0<o.length&&o.length<c)throw new Error("Mesh Alpha count must match Vertex count");if(0===a.length)for(u=0;u<c;++u)a[u]=16777215;if(0===o.length)for(u=0;u<c;++u)o[u]=1;this.vertices=new Float32Array(n),this.uv=new Float32Array(r),this.colors=new Uint32Array(a),this.alphas=new Float32Array(o),this.tintFill=!1,this.setTexture(h,l),this.setPosition(e,i),this.setSizeToFrame(),this.initPipeline()},setAlpha:o});t.exports=h},function(t,e){t.exports=function(t,e){return!(t.width<=0||t.height<=0||e.width<=0||e.height<=0||t.right<e.x||t.bottom<e.y||t.x>e.right||t.y>e.bottom)}},function(t,e,i){var n=i(6),r={},s={register:function(t,e,i,n,s){r[t]={plugin:e,mapping:i,settingsKey:n,configKey:s}},getPlugin:function(t){return r[t]},install:function(t){var e=t.scene.sys,i=e.settings.input,s=e.game.config;for(var a in r){var o=r[a].plugin,h=r[a].mapping,l=r[a].settingsKey,u=r[a].configKey;n(i,l,s[u])&&(t[h]=new o(t))}},remove:function(t){r.hasOwnProperty(t)&&delete r[t]}};t.exports=s},function(t,e,i){t.exports={ANY_KEY_DOWN:i(1217),ANY_KEY_UP:i(1218),COMBO_MATCH:i(1219),DOWN:i(1220),KEY_DOWN:i(1221),KEY_UP:i(1222),UP:i(1223)}},function(t,e){t.exports=function(t,e){return!!t.url&&(t.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?t.url:e+t.url)}},function(t,e){t.exports=function(t,e,i,n,r,s){return void 0===t&&(t=""),void 0===e&&(e=!0),void 0===i&&(i=""),void 0===n&&(n=""),void 0===r&&(r=0),void 0===s&&(s=!1),{responseType:t,async:e,user:i,password:n,timeout:r,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:s}}},function(t,e,i){var n=i(0),r=i(217),s=i(75),a=new n({Extends:s,Mixins:[r.Acceleration,r.Angular,r.Bounce,r.Debug,r.Drag,r.Enable,r.Friction,r.Gravity,r.Immovable,r.Mass,r.Size,r.Velocity],initialize:function(t,e,i,n,r){s.call(this,t,e,i,n,r),this.body=null}});t.exports=a},function(t,e,i){t.exports={CalculateFacesAt:i(220),CalculateFacesWithin:i(51),Copy:i(1313),CreateFromTiles:i(1314),CullTiles:i(1315),Fill:i(1316),FilterTiles:i(1317),FindByIndex:i(1318),FindTile:i(1319),ForEachTile:i(1320),GetTileAt:i(142),GetTileAtWorldXY:i(1321),GetTilesWithin:i(24),GetTilesWithinShape:i(1322),GetTilesWithinWorldXY:i(1323),HasTileAt:i(476),HasTileAtWorldXY:i(1324),IsInLayerBounds:i(101),PutTileAt:i(221),PutTileAtWorldXY:i(1325),PutTilesAt:i(1326),Randomize:i(1327),RemoveTileAt:i(477),RemoveTileAtWorldXY:i(1328),RenderDebug:i(1329),ReplaceByIndex:i(475),SetCollision:i(1330),SetCollisionBetween:i(1331),SetCollisionByExclusion:i(1332),SetCollisionByProperty:i(1333),SetCollisionFromCollisionGroup:i(1334),SetTileIndexCallback:i(1335),SetTileLocationCallback:i(1336),Shuffle:i(1337),SwapByIndex:i(1338),TileToWorldX:i(143),TileToWorldXY:i(1339),TileToWorldY:i(144),WeightedRandomize:i(1340),WorldToTileX:i(63),WorldToTileXY:i(1341),WorldToTileY:i(64)}},function(t,e,i){var n=i(101);t.exports=function(t,e,i,r){if(void 0===i&&(i=!1),n(t,e,r)){var s=r.data[e][t]||null;return null===s||-1===s.index&&!i?null:s}return null}},function(t,e){t.exports=function(t,e,i){var n=i.baseTileWidth,r=i.tilemapLayer,s=0;return r&&(void 0===e&&(e=r.scene.cameras.main),s=r.x+e.scrollX*(1-r.scrollFactorX),n*=r.scaleX),s+t*n}},function(t,e){t.exports=function(t,e,i){var n=i.baseTileHeight,r=i.tilemapLayer,s=0;return r&&(void 0===e&&(e=r.scene.cameras.main),s=r.y+e.scrollY*(1-r.scrollFactorY),n*=r.scaleY),s+t*n}},function(t,e){t.exports=function(t,e,i){return t.hasOwnProperty(e)?"function"==typeof t[e]?function(i,n,r,s,a,o){return t[e](i,n,r,s,a,o)}:function(){return t[e]}:"function"==typeof i?i:function(){return i}}},function(t,e,i){var n=i(230),r=i(15),s=i(88),a=i(69),o=i(145),h=i(498),l=i(228),u=i(6),c=i(229),d=i(231),f=i(233);t.exports=function(t,e,i){void 0===i&&(i=n);for(var p=i.targets?i.targets:l(e),g=h(e),m=o(e,"delay",i.delay),y=o(e,"duration",i.duration),v=u(e,"easeParams",i.easeParams),_=a(u(e,"ease",i.ease),v),x=o(e,"hold",i.hold),w=o(e,"repeat",i.repeat),b=o(e,"repeatDelay",i.repeatDelay),T=s(e,"yoyo",i.yoyo),E=s(e,"flipX",i.flipX),A=s(e,"flipY",i.flipY),S=[],C=0;C<g.length;C++)for(var O=g[C].key,P=g[C].value,R=0;R<p.length;R++){var M=c(O,P),L=f(p[R],R,O,M.getEnd,M.getStart,M.getActive,a(u(P,"ease",_),v),o(P,"delay",m),o(P,"duration",y),s(P,"yoyo",T),o(P,"hold",x),o(P,"repeat",w),o(P,"repeatDelay",b),s(P,"flipX",E),s(P,"flipY",A));S.push(L)}var I=new d(t,S,p);I.offset=r(e,"offset",null),I.completeDelay=r(e,"completeDelay",0),I.loop=Math.round(r(e,"loop",0)),I.loopDelay=Math.round(r(e,"loopDelay",0)),I.paused=s(e,"paused",!1),I.useFrames=s(e,"useFrames",!1);for(var k=u(e,"callbackScope",I),D=[I,null],F=d.TYPES,B=0;B<F.length;B++){var N,G,Y=F[B],z=u(e,Y,!1);z&&(N=u(e,Y+"Scope",k),G=u(e,Y+"Params",[]),I.setCallback(Y,z,D.concat(G),N))}return I}},function(t,e,i){var n=i(0),r=i(9),s=new n({initialize:function(t){this.name="WebGLPipeline",this.game=t.game,this.view=t.game.canvas,this.resolution=1,this.width=0,this.height=0,this.gl=t.gl,this.vertexCount=0,this.vertexCapacity=t.vertexCapacity,this.renderer=t.renderer,this.vertexData=t.vertices?t.vertices:new ArrayBuffer(t.vertexCapacity*t.vertexSize),this.vertexBuffer=this.renderer.createVertexBuffer(t.vertices?t.vertices:this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=this.renderer.createProgram(t.vertShader,t.fragShader),this.attributes=t.attributes,this.vertexSize=t.vertexSize,this.topology=t.topology,this.bytes=new Uint8Array(this.vertexData),this.vertexComponentCount=r.getComponentCount(t.attributes,this.gl),this.flushLocked=!1,this.active=!1},boot:function(){},addAttribute:function(t,e,i,n,s){return this.attributes.push({name:t,size:e,type:this.renderer.glFormats[i],normalized:n,offset:s}),this.vertexComponentCount=r.getComponentCount(this.attributes,this.gl),this},shouldFlush:function(){return this.vertexCount>=this.vertexCapacity},resize:function(t,e,i){return this.width=t*i,this.height=e*i,this.resolution=i,this},bind:function(){var t=this.gl,e=this.vertexBuffer,i=this.attributes,n=this.program,r=this.renderer,s=this.vertexSize;r.setProgram(n),r.setVertexBuffer(e);for(var a=0;a<i.length;++a){var o=i[a],h=t.getAttribLocation(n,o.name);0<=h?(t.enableVertexAttribArray(h),t.vertexAttribPointer(h,o.size,o.type,o.normalized,s,o.offset)):-1!==h&&t.disableVertexAttribArray(h)}return this},onBind:function(){return this},onPreRender:function(){return this},onRender:function(){return this},onPostRender:function(){return this},flush:function(){if(this.flushLocked)return this;this.flushLocked=!0;var t=this.gl,e=this.vertexCount,i=this.topology,n=this.vertexSize;if(0!==e)return t.bufferSubData(t.ARRAY_BUFFER,0,this.bytes.subarray(0,e*n)),t.drawArrays(i,0,e),this.vertexCount=0,this.flushLocked=!1,this;this.flushLocked=!1},destroy:function(){var t=this.gl;return t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),delete this.program,delete this.vertexBuffer,delete this.gl,this},setFloat1:function(t,e){return this.renderer.setFloat1(this.program,t,e),this},setFloat2:function(t,e,i){return this.renderer.setFloat2(this.program,t,e,i),this},setFloat3:function(t,e,i,n){return this.renderer.setFloat3(this.program,t,e,i,n),this},setFloat4:function(t,e,i,n,r){return this.renderer.setFloat4(this.program,t,e,i,n,r),this},setFloat1v:function(t,e){return this.renderer.setFloat1v(this.program,t,e),this},setFloat2v:function(t,e){return this.renderer.setFloat2v(this.program,t,e),this},setFloat3v:function(t,e){return this.renderer.setFloat3v(this.program,t,e),this},setFloat4v:function(t,e){return this.renderer.setFloat4v(this.program,t,e),this},setInt1:function(t,e){return this.renderer.setInt1(this.program,t,e),this},setInt2:function(t,e,i){return this.renderer.setInt2(this.program,t,e,i),this},setInt3:function(t,e,i,n){return this.renderer.setInt3(this.program,t,e,i,n),this},setInt4:function(t,e,i,n,r){return this.renderer.setInt4(this.program,t,e,i,n,r),this},setMatrix2:function(t,e,i){return this.renderer.setMatrix2(this.program,t,e,i),this},setMatrix3:function(t,e,i){return this.renderer.setMatrix3(this.program,t,e,i),this},setMatrix4:function(t,e,i){return this.renderer.setMatrix4(this.program,t,e,i),this}});t.exports=s},,function(t,e,i){var n=i(4);t.exports=function(t,e,i){return void 0===i&&(i=new n),i.x=t.x+t.radius*Math.cos(e),i.y=t.y+t.radius*Math.sin(e),i}},function(t,e,i){var n=i(4);t.exports=function(t,e){void 0===e&&(e=new n);var i=2*Math.PI*Math.random(),r=Math.random()+Math.random(),s=1<r?2-r:r,a=s*Math.cos(i),o=s*Math.sin(i);return e.x=t.x+a*t.radius,e.y=t.y+o*t.radius,e}},function(t,e,i){var n=i(19),r=i(0),s=i(10),a=i(111),o=i(270),h=i(271),l=i(6),u=new r({Extends:s,initialize:function(t,e,i){s.call(this),this.manager=t,this.key=e,this.type="frame",this.frames=this.getFrames(t.textureManager,l(i,"frames",[]),l(i,"defaultTextureKey",null)),this.frameRate=l(i,"frameRate",null),this.duration=l(i,"duration",null),null===this.duration&&null===this.frameRate?(this.frameRate=24,this.duration=this.frameRate/this.frames.length*1e3):this.duration&&null===this.frameRate?this.frameRate=this.frames.length/(this.duration/1e3):this.duration=this.frames.length/this.frameRate*1e3,this.msPerFrame=1e3/this.frameRate,this.skipMissedFrames=l(i,"skipMissedFrames",!0),this.delay=l(i,"delay",0),this.repeat=l(i,"repeat",0),this.repeatDelay=l(i,"repeatDelay",0),this.yoyo=l(i,"yoyo",!1),this.showOnStart=l(i,"showOnStart",!1),this.hideOnComplete=l(i,"hideOnComplete",!1),this.paused=!1,this.manager.on(a.PAUSE_ALL,this.pause,this),this.manager.on(a.RESUME_ALL,this.resume,this)},addFrame:function(t){return this.addFrameAt(this.frames.length,t)},addFrameAt:function(t,e){var i,n,r=this.getFrames(this.manager.textureManager,e);return 0<r.length&&(0===t?this.frames=r.concat(this.frames):t===this.frames.length?this.frames=this.frames.concat(r):(i=this.frames.slice(0,t),n=this.frames.slice(t),this.frames=i.concat(r,n)),this.updateFrameSequence()),this},checkFrame:function(t){return 0<=t&&t<this.frames.length},completeAnimation:function(t){this.hideOnComplete&&(t.parent.visible=!1),t.stop()},getFirstTick:function(t,e){void 0===e&&(e=!0),t.accumulator=0,t.nextTick=t.msPerFrame+t.currentFrame.duration,e&&(t.nextTick+=t._delay)},getFrameAt:function(t){return this.frames[t]},getFrames:function(t,e,i){var n,r,s,a=[],o=1;if("string"==typeof e&&(r=e,s=t.get(r).getFrameNames(),e=[],s.forEach((function(t,i){e.push({key:r,frame:i})}))),!Array.isArray(e)||0===e.length)return a;for(m=0;m<e.length;m++){var u,c,d,f=e[m],p=l(f,"key",i);p&&(u=l(f,"frame",0),c=t.getFrame(p,u),(d=new h(p,u,o,c)).duration=l(f,"duration",0),d.isFirst=!n,n&&((n.nextFrame=d).prevFrame=n),a.push(d),n=d,o++)}if(0<a.length){d.isLast=!0,d.nextFrame=a[0],a[0].prevFrame=d;for(var g=1/(a.length-1),m=0;m<a.length;m++)a[m].progress=m*g}return a},getNextTick:function(t){t.accumulator-=t.nextTick,t.nextTick=t.msPerFrame+t.currentFrame.duration},load:function(t,e){e>=this.frames.length&&(e=0),t.currentAnim!==this&&(t.currentAnim=this,t.frameRate=this.frameRate,t.duration=this.duration,t.msPerFrame=this.msPerFrame,t.skipMissedFrames=this.skipMissedFrames,t._delay=this.delay,t._repeat=this.repeat,t._repeatDelay=this.repeatDelay,t._yoyo=this.yoyo);var i=this.frames[e];0!==e||t.forward||(i=this.getLastFrame()),t.updateFrame(i)},getFrameByProgress:function(t){return t=n(t,0,1),o(t,this.frames,"progress")},nextFrame:function(t){var e=t.currentFrame;e.isLast?t._yoyo?this.handleYoyoFrame(t,!1):0<t.repeatCounter?t._reverse&&t.forward?t.forward=!1:this.repeatAnimation(t):this.completeAnimation(t):this.updateAndGetNextTick(t,e.nextFrame)},handleYoyoFrame:function(t,e){if(e=e||!1,t._reverse===!e&&0<t.repeatCounter)return t._repeatDelay&&!t.pendingRepeat||(t.forward=e),void this.repeatAnimation(t);var i;t._reverse===e||0!==t.repeatCounter?(i=(t.forward=e)?t.currentFrame.nextFrame:t.currentFrame.prevFrame,this.updateAndGetNextTick(t,i)):this.completeAnimation(t)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(t){var e=t.currentFrame;e.isFirst?t._yoyo?this.handleYoyoFrame(t,!0):0<t.repeatCounter?(t._reverse&&!t.forward?t.currentFrame=this.getLastFrame():t.forward=!0,this.repeatAnimation(t)):this.completeAnimation(t):this.updateAndGetNextTick(t,e.prevFrame)},updateAndGetNextTick:function(t,e){t.updateFrame(e),this.getNextTick(t)},removeFrame:function(t){var e=this.frames.indexOf(t);return-1!==e&&this.removeFrameAt(e),this},removeFrameAt:function(t){return this.frames.splice(t,1),this.updateFrameSequence(),this},repeatAnimation:function(t){if(2===t._pendingStop)return this.completeAnimation(t);var e,i;0<t._repeatDelay&&!1===t.pendingRepeat?(t.pendingRepeat=!0,t.accumulator-=t.nextTick,t.nextTick+=t._repeatDelay):(t.repeatCounter--,t.updateFrame(t.currentFrame[t.forward?"nextFrame":"prevFrame"]),t.isPlaying&&(this.getNextTick(t),t.pendingRepeat=!1,e=t.currentFrame,i=t.parent,this.emit(a.ANIMATION_REPEAT,this,e),i.emit(a.SPRITE_ANIMATION_KEY_REPEAT+this.key,this,e,t.repeatCounter,i),i.emit(a.SPRITE_ANIMATION_REPEAT,this,e,t.repeatCounter,i)))},setFrame:function(t){t.forward?this.nextFrame(t):this.previousFrame(t)},toJSON:function(){var t={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach((function(e){t.frames.push(e.toJSON())})),t},updateFrameSequence:function(){for(var t,e=this.frames.length,i=1/(e-1),n=0;n<e;n++)(t=this.frames[n]).index=n+1,t.isFirst=!1,t.isLast=!1,t.progress=n*i,0===n?(t.isFirst=!0,1===e?(t.isLast=!0,(t.nextFrame=t).prevFrame=t):(t.isLast=!1,t.prevFrame=this.frames[e-1],t.nextFrame=this.frames[n+1])):n===e-1&&1<e?(t.isLast=!0,t.prevFrame=this.frames[e-2],t.nextFrame=this.frames[0]):1<e&&(t.prevFrame=this.frames[n-1],t.nextFrame=this.frames[n+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.removeAllListeners(),this.manager.off(a.PAUSE_ALL,this.pause,this),this.manager.off(a.RESUME_ALL,this.resume,this),this.manager.remove(this.key);for(var t=0;t<this.frames.length;t++)this.frames[t].destroy();this.frames=[],this.manager=null}});t.exports=u},function(t,e,i){var n=i(112),r=i(4);t.exports=function(t,e,i){if(void 0===i&&(i=new r),e<=0||1<=e)return i.x=t.x,i.y=t.y,i;var s=n(t)*e;return.5<e?(s-=t.width+t.height)<=t.width?(i.x=t.right-s,i.y=t.bottom):(i.x=t.x,i.y=t.bottom-(s-t.width)):s<=t.width?(i.x=t.x+s,i.y=t.y):(i.x=t.right,i.y=t.y+(s-t.width)),i}},function(t,e,i){var n=i(57),r=i(4);t.exports=function(t,e,i,s){void 0===s&&(s=[]),!e&&0<i&&(e=n(t)/i);for(var a=t.x1,o=t.y1,h=t.x2,l=t.y2,u=0;u<e;u++){var c=u/e,d=a+(h-a)*c,f=o+(l-o)*c;s.push(new r(d,f))}return s}},function(t,e,i){var n=i(4);t.exports=function(t,e){void 0===e&&(e=new n);var i=Math.random();return e.x=t.x1+i*(t.x2-t.x1),e.y=t.y1+i*(t.y2-t.y1),e}},function(t,e,i){var n=i(4);t.exports=function(t,e){return void 0===e&&(e=new n),e.x=t.x+Math.random()*t.width,e.y=t.y+Math.random()*t.height,e}},function(t,e){t.exports={defaultPipeline:null,pipeline:null,initPipeline:function(t){void 0===t&&(t="TextureTintPipeline");var e=this.scene.sys.game.renderer;return!!(e&&e.gl&&e.hasPipeline(t))&&(this.defaultPipeline=e.getPipeline(t),this.pipeline=this.defaultPipeline,!0)},setPipeline:function(t){var e=this.scene.sys.game.renderer;return e&&e.gl&&e.hasPipeline(t)&&(this.pipeline=e.getPipeline(t)),this},resetPipeline:function(){return this.pipeline=this.defaultPipeline,null!==this.pipeline},getPipelineName:function(){return this.pipeline.name}}},function(t,e,i){var n=i(4);t.exports=function(t,e){void 0===e&&(e=new n);var i=Math.random()*Math.PI*2,r=Math.sqrt(Math.random());return e.x=t.x+r*Math.cos(i)*t.width/2,e.y=t.y+r*Math.sin(i)*t.height/2,e}},function(t,e,i){var n=i(4);t.exports=function(t,e){void 0===e&&(e=new n);var i=t.x2-t.x1,r=t.y2-t.y1,s=t.x3-t.x1,a=t.y3-t.y1,o=Math.random(),h=Math.random();return 1<=o+h&&(o=1-o,h=1-h),e.x=t.x1+(i*o+s*h),e.y=t.y1+(r*o+a*h),e}},function(t,e){t.exports=function(t,e,i,n,r){var s=n+Math.atan2(t.y-i,t.x-e);return t.x=e+r*Math.cos(s),t.y=i+r*Math.sin(s),t}},function(t,e){t.exports=function(t,e,i){return(t=Math.max(0,Math.min(1,(t-e)/(i-e))))*t*t*(t*(6*t-15)+10)}},function(t,e){t.exports=function(t,e,i){return t<=e?0:i<=t?1:(t=(t-e)/(i-e))*t*(3-2*t)}},function(t,e,i){var n=new(i(0))({initialize:function(t){if(this.entries={},this.size=0,Array.isArray(t))for(var e=0;e<t.length;e++)this.set(t[e][0],t[e][1])},set:function(t,e){return this.has(t)||this.size++,this.entries[t]=e,this},get:function(t){if(this.has(t))return this.entries[t]},getArray:function(){var t=[],e=this.entries;for(var i in e)t.push(e[i]);return t},has:function(t){return this.entries.hasOwnProperty(t)},delete:function(t){return this.has(t)&&(delete this.entries[t],this.size--),this},clear:function(){return Object.keys(this.entries).forEach((function(t){delete this.entries[t]}),this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var t=[],e=this.entries;for(var i in e)t.push(e[i]);return t},dump:function(){var t=this.entries;for(var e in console.group("Map"),t)console.log(e,t[e]);console.groupEnd()},each:function(t){var e=this.entries;for(var i in e)if(!1===t(i,e[i]))break;return this},contains:function(t){var e=this.entries;for(var i in e)if(e[i]===t)return!0;return!1},merge:function(t,e){void 0===e&&(e=!1);var i=this.entries,n=t.entries;for(var r in n)i.hasOwnProperty(r)&&e?i[r]=n[r]:this.set(r,n[r]);return this}});t.exports=n},function(t,e){t.exports=function(t,e,i,n){var r;if(void 0===e&&(e=0),void 0===i&&(i=" "),void 0===n&&(n=3),e+1>=(t=t.toString()).length)switch(n){case 1:t=new Array(e+1-t.length).join(i)+t;break;case 3:var s=Math.ceil((r=e-t.length)/2);t=new Array(r-s+1).join(i)+t+new Array(s+1).join(i);break;default:t+=new Array(e+1-t.length).join(i)}return t}},function(t,e,i){var n=i(294),r=i(297),s=i(299),a=i(300);t.exports=function(t){switch(typeof t){case"string":return("rgb"===t.substr(0,3).toLowerCase()?a:n)(t);case"number":return r(t);case"object":return s(t)}}},function(t,e){t.exports=function(t,e,i){return t<<16|e<<8|i}},function(t,e,i){var n=i(165);t.exports=function(t,e,i,r){void 0===e&&(e=1),void 0===i&&(i=1);var s=Math.floor(6*t),a=6*t-s,o=Math.floor(i*(1-e)*255),h=Math.floor(i*(1-a*e)*255),l=Math.floor(i*(1-(1-a)*e)*255),u=i=Math.floor(i*=255),c=i,d=i,f=s%6;return 0==f?(c=l,d=o):1==f?(u=h,d=o):2==f?(u=o,d=l):3==f?(u=o,c=h):4==f?(u=l,c=o):5==f&&(c=o,d=h),r?r.setTo?r.setTo(u,c,d,r.alpha,!1):(r.r=u,r.g=c,r.b=d,r.color=n(u,c,d),r):{r:u,g:c,b:d,color:n(u,c,d)}}},function(t,e){var i="";function n(t){for(var e=["i","webkitI","msI","mozI","oI"],i=0;i<e.length;i++){var n=e[i]+"mageSmoothingEnabled";if(n in t)return n}return null}t.exports={disable:function(t){return""===i&&(i=n(t)),i&&(t[i]=!1),t},enable:function(t){return""===i&&(i=n(t)),i&&(t[i]=!0),t},getPrefix:n,isEnabled:function(t){return null!==i?t[i]:null}}},function(t,e){t.exports=function(t,e,i){return t.x=e-t.width/2,t.y=i-t.height/2,t}},function(t,e,i){var n=i(117),r=i(118),s=i(26),a={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};t.exports=function(){a.canvas=!!window.CanvasRenderingContext2D;try{a.localStorage=!!localStorage.getItem}catch(t){a.localStorage=!1}a.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),a.fileSystem=!!window.requestFileSystem;var t,e,i,o=!1;return a.webGL=function(){if(window.WebGLRenderingContext)try{var t=s.createWebGL(this),e=t.getContext("webgl")||t.getContext("experimental-webgl"),i=s.create2D(this),n=i.getContext("2d").createImageData(1,1);return o=n.data instanceof Uint8ClampedArray,s.remove(t),s.remove(i),!!e}catch(t){return!1}return!1}(),a.worker=!!window.Worker,a.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,a.getUserMedia=a.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,r.firefox&&r.firefoxVersion<21&&(a.getUserMedia=!1),!n.iOS&&(r.ie||r.firefox||r.chrome)&&(a.canvasBitBltShift=!0),(r.safari||r.mobileSafari)&&(a.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(a.vibration=!0),"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint32Array&&(a.littleEndian=(t=new ArrayBuffer(4),e=new Uint8Array(t),i=new Uint32Array(t),e[0]=161,e[1]=178,e[2]=195,e[3]=212,3569595041===i[0]||2712847316!==i[0]&&null)),a.support32bit="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof Int32Array&&null!==a.littleEndian&&o,a}()},function(t,e,i){var n=i(13),r=i(18)(!1,r={Angle:i(734),Distance:i(743),Easing:i(748),Fuzzy:i(749),Interpolation:i(752),Pow2:i(757),Snap:i(759),RandomDataGenerator:i(761),Average:i(762),Bernstein:i(324),Between:i(172),CatmullRom:i(171),CeilTo:i(763),Clamp:i(19),DegToRad:i(39),Difference:i(764),Factorial:i(325),FloatBetween:i(119),FloorTo:i(765),FromPercent:i(87),GetSpeed:i(766),IsEven:i(767),IsEvenStrict:i(768),Linear:i(116),MaxAdd:i(769),MinSub:i(770),Percent:i(771),RadToDeg:i(173),RandomXY:i(772),RandomXYZ:i(773),RandomXYZW:i(774),Rotate:i(331),RotateAround:i(276),RotateAroundDistance:i(159),RotateTo:i(775),RoundAwayFromZero:i(332),RoundTo:i(776),SinCosTableGenerator:i(777),SmootherStep:i(160),SmoothStep:i(161),ToXY:i(778),TransformXY:i(333),Within:i(779),Wrap:i(58),Vector2:i(3),Vector3:i(174),Vector4:i(334),Matrix3:i(335),Matrix4:i(336),Quaternion:i(337),RotateVec3:i(780)},n);t.exports=r},function(t,e){t.exports=function(t,e,i,n,r){var s=.5*(n-e),a=.5*(r-i),o=t*t;return(2*i-2*n+s+a)*(t*o)+(-3*i+3*n-2*s-a)*o+s*t+i}},function(t,e){t.exports=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}},function(t,e,i){var n=i(13);t.exports=function(t){return t*n.RAD_TO_DEG}},function(t,e,i){var n=new(i(0))({initialize:function(t,e,i){this.x=0,this.y=0,this.z=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=e||0,this.z=i||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},clone:function(){return new n(this.x,this.y,this.z)},crossVectors:function(t,e){var i=t.x,n=t.y,r=t.z,s=e.x,a=e.y,o=e.z;return this.x=n*o-r*a,this.y=r*s-i*o,this.z=i*a-n*s,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this},set:function(t,e,i){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=e||0,this.z=i||0),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(t){var e=t.x-this.x,i=t.y-this.y,n=t.z-this.z||0;return Math.sqrt(e*e+i*i+n*n)},distanceSq:function(t){var e=t.x-this.x,i=t.y-this.y,n=t.z-this.z||0;return e*e+i*i+n*n},length:function(){var t=this.x,e=this.y,i=this.z;return Math.sqrt(t*t+e*e+i*i)},lengthSq:function(){var t=this.x,e=this.y,i=this.z;return t*t+e*e+i*i},normalize:function(){var t=this.x,e=this.y,i=this.z,n=t*t+e*e+i*i;return 0<n&&(n=1/Math.sqrt(n),this.x=t*n,this.y=e*n,this.z=i*n),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function(t){var e=this.x,i=this.y,n=this.z,r=t.x,s=t.y,a=t.z;return this.x=i*a-n*s,this.y=n*r-e*a,this.z=e*s-i*r,this},lerp:function(t,e){void 0===e&&(e=0);var i=this.x,n=this.y,r=this.z;return this.x=i+e*(t.x-i),this.y=n+e*(t.y-n),this.z=r+e*(t.z-r),this},transformMat3:function(t){var e=this.x,i=this.y,n=this.z,r=t.val;return this.x=e*r[0]+i*r[3]+n*r[6],this.y=e*r[1]+i*r[4]+n*r[7],this.z=e*r[2]+i*r[5]+n*r[8],this},transformMat4:function(t){var e=this.x,i=this.y,n=this.z,r=t.val;return this.x=r[0]*e+r[4]*i+r[8]*n+r[12],this.y=r[1]*e+r[5]*i+r[9]*n+r[13],this.z=r[2]*e+r[6]*i+r[10]*n+r[14],this},transformCoordinates:function(t){var e=this.x,i=this.y,n=this.z,r=t.val,s=e*r[0]+i*r[4]+n*r[8]+r[12],a=e*r[1]+i*r[5]+n*r[9]+r[13],o=e*r[2]+i*r[6]+n*r[10]+r[14],h=e*r[3]+i*r[7]+n*r[11]+r[15];return this.x=s/h,this.y=a/h,this.z=o/h,this},transformQuat:function(t){var e=this.x,i=this.y,n=this.z,r=t.x,s=t.y,a=t.z,o=t.w,h=o*e+s*n-a*i,l=o*i+a*e-r*n,u=o*n+r*i-s*e,c=-r*e-s*i-a*n;return this.x=h*o+c*-r+l*-a-u*-s,this.y=l*o+c*-s+u*-r-h*-a,this.z=u*o+c*-a+h*-s-l*-r,this},project:function(t){var e=this.x,i=this.y,n=this.z,r=t.val,s=r[0],a=r[1],o=r[2],h=r[3],l=r[4],u=r[5],c=r[6],d=r[7],f=r[8],p=r[9],g=r[10],m=r[11],y=r[12],v=r[13],_=r[14],x=1/(e*h+i*d+n*m+r[15]);return this.x=(e*s+i*l+n*f+y)*x,this.y=(e*a+i*u+n*p+v)*x,this.z=(e*o+i*c+n*g+_)*x,this},unproject:function(t,e){var i=t.x,n=t.y,r=t.z,s=t.w,a=this.x-i,o=s-this.y-1-n,h=this.z;return this.x=2*a/r-1,this.y=2*o/s-1,this.z=2*h-1,this.project(e)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});n.ZERO=new n,n.RIGHT=new n(1,0,0),n.LEFT=new n(-1,0,0),n.UP=new n(0,-1,0),n.DOWN=new n(0,1,0),n.FORWARD=new n(0,0,1),n.BACK=new n(0,0,-1),n.ONE=new n(1,1,1),t.exports=n},function(t,e,i){t.exports={Global:["game","anims","cache","plugins","registry","scale","sound","textures"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]}},function(t,e,i){var n=i(11),r=i(13);t.exports=function(t,e){if(void 0===e&&(e=new n),0===t.length)return e;for(var i,s,a,o=Number.MAX_VALUE,h=Number.MAX_VALUE,l=r.MIN_SAFE_INTEGER,u=r.MIN_SAFE_INTEGER,c=0;c<t.length;c++)i=t[c],a=Array.isArray(i)?(s=i[0],i[1]):(s=i.x,i.y),o=Math.min(o,s),h=Math.min(h,a),l=Math.max(l,s),u=Math.max(u,a);return e.x=o,e.y=h,e.width=l-o,e.height=u-h,e}},function(t,e,i){var n={CENTER:i(359),ORIENTATION:i(360),SCALE_MODE:i(361),ZOOM:i(362)};t.exports=n},function(t,e){t.exports=function(t){t.parentNode&&t.parentNode.removeChild(t)}},function(t,e){t.exports={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8}},function(t,e,i){var n=i(0),r=i(125),s=i(175),a=i(22),o=i(880),h=i(881),l=i(1),u=i(375),c=new n({initialize:function(t,e){this.scene=t,this.game,this.renderer,this.config=e,this.settings=u.create(e),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=l},init:function(t){this.settings.status=r.INIT,this.sceneUpdate=l,this.game=t,this.renderer=t.renderer,this.canvas=t.canvas,this.context=t.context;var e=t.plugins;(this.plugins=e).addToScene(this,s.Global,[s.CoreScene,h(this),o(this)]),this.events.emit(a.BOOT,this),this.settings.isBooted=!0},install:function(t){Array.isArray(t)||(t=[t]),this.plugins.installLocal(this,t)},step:function(t,e){this.events.emit(a.PRE_UPDATE,t,e),this.events.emit(a.UPDATE,t,e),this.sceneUpdate.call(this.scene,t,e),this.events.emit(a.POST_UPDATE,t,e)},render:function(t){var e=this.displayList;e.depthSort(),this.cameras.render(t,e),this.events.emit(a.RENDER,t)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(t){return this.settings.active&&(this.settings.status=r.PAUSED,this.settings.active=!1,this.events.emit(a.PAUSE,this,t)),this},resume:function(t){return this.settings.active||(this.settings.status=r.RUNNING,this.settings.active=!0,this.events.emit(a.RESUME,this,t)),this},sleep:function(t){return this.settings.status=r.SLEEPING,this.settings.active=!1,this.settings.visible=!1,this.events.emit(a.SLEEP,this,t),this},wake:function(t){var e=this.settings;return e.status=r.RUNNING,e.active=!0,e.visible=!0,this.events.emit(a.WAKE,this,t),e.isTransition&&this.events.emit(a.TRANSITION_WAKE,e.transitionFrom,e.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===r.SLEEPING},isActive:function(){return this.settings.status===r.RUNNING},isPaused:function(){return this.settings.status===r.PAUSED},isTransitioning:function(){return this.settings.isTransition||null!==this.scenePlugin._target},isTransitionOut:function(){return null!==this.scenePlugin._target&&0<this.scenePlugin._duration},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(t){return this.settings.visible=t,this},setActive:function(t,e){return t?this.resume(e):this.pause(e)},start:function(t){t&&(this.settings.data=t),this.settings.status=r.START,this.settings.active=!0,this.settings.visible=!0,this.events.emit(a.START,this),this.events.emit(a.READY,this,t)},shutdown:function(t){this.events.off(a.TRANSITION_INIT),this.events.off(a.TRANSITION_START),this.events.off(a.TRANSITION_COMPLETE),this.events.off(a.TRANSITION_OUT),this.settings.status=r.SHUTDOWN,this.settings.active=!1,this.settings.visible=!1,this.events.emit(a.SHUTDOWN,this,t)},destroy:function(){this.settings.status=r.DESTROYED,this.settings.active=!1,this.settings.visible=!1,this.events.emit(a.DESTROY,this),this.events.removeAllListeners();for(var t=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],e=0;e<t.length;e++)this[t[e]]=null}});t.exports=c},function(t,e){t.exports=function(t){return t&&t[0].toUpperCase()+t.slice(1)}},function(t,e,i){var n=i(0),r=i(94),s=i(378),a="Texture.frame missing: ",o=new n({initialize:function(t,e,i,n,r){Array.isArray(i)||(i=[i]),this.manager=t,this.key=e,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE";for(var a=this.frameTotal=0;a<i.length;a++)this.source.push(new s(this,i[a],n,r))},add:function(t,e,i,n,s,a){if(this.has(t))return null;var o=new r(this,t,e,i,n,s,a);return this.frames[t]=o,"__BASE"===this.firstFrame&&(this.firstFrame=t),this.frameTotal++,o},remove:function(t){return!!this.has(t)&&(this.get(t).destroy(),delete this.frames[t],!0)},has:function(t){return this.frames[t]},get:function(t){t=t||this.firstFrame;var e=this.frames[t];return e||(console.warn(a+t),e=this.frames[this.firstFrame]),e},getTextureSourceIndex:function(t){for(var e=0;e<this.source.length;e++)if(this.source[e]===t)return e;return-1},getFramesFromTextureSource:function(t,e){void 0===e&&(e=!1);var i,n=[];for(var r in this.frames)"__BASE"===r&&!e||(i=this.frames[r]).sourceIndex===t&&n.push(i);return n},getFrameNames:function(t){void 0===t&&(t=!1);var e,i=Object.keys(this.frames);return t||-1!==(e=i.indexOf("__BASE"))&&i.splice(e,1),i},getSourceImage:function(t){null!=t&&1!==this.frameTotal||(t="__BASE");var e=this.frames[t];return e?e.source.image:(console.warn(a+t),this.frames.__BASE.source.image)},getDataSourceImage:function(t){null!=t&&1!==this.frameTotal||(t="__BASE");var e=this.frames[t],i=e?e.sourceIndex:(console.warn(a+t),this.frames.__BASE.sourceIndex);return this.dataSource[i].image},setDataSource:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=this.source[e];this.dataSource.push(new s(this,t[e],i.width,i.height))}},setFilter:function(t){for(var e=0;e<this.source.length;e++)this.source[e].setFilter(t);for(e=0;e<this.dataSource.length;e++)this.dataSource[e].setFilter(t)},destroy:function(){for(var t=0;t<this.source.length;t++)this.source[t].destroy();for(t=0;t<this.dataSource.length;t++)this.dataSource[t].destroy();for(var e in this.frames)this.frames[e].destroy();this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});t.exports=o},function(t,e,i){t.exports={Matrix:i(916),Add:i(923),AddAt:i(924),BringToTop:i(925),CountAllMatching:i(926),Each:i(927),EachInRange:i(928),FindClosestInSorted:i(270),GetAll:i(382),GetFirst:i(383),GetRandom:i(185),MoveDown:i(929),MoveTo:i(930),MoveUp:i(931),NumberArray:i(932),NumberArrayStep:i(933),QuickSelect:i(391),Range:i(392),Remove:i(123),RemoveAt:i(934),RemoveBetween:i(935),RemoveRandomElement:i(936),Replace:i(937),RotateLeft:i(286),RotateRight:i(287),SafeRange:i(68),SendToBack:i(938),SetAll:i(939),Shuffle:i(114),SpliceOne:i(80),StableSort:i(131),Swap:i(940)}},function(t,e){t.exports=function(t){if(!Array.isArray(t)||t.length<2||!Array.isArray(t[0]))return!1;for(var e=t[0].length,i=1;i<t.length;i++)if(t[i].length!==e)return!1;return!0}},function(t,e){t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=t.length);var n=e+Math.floor(Math.random()*i);return void 0===t[n]?null:t[n]}},function(t,e,i){var n=i(0),r=i(10),s=i(942),a=new n({Extends:r,initialize:function(){r.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0},add:function(t){return this._pending.push(t),this._toProcess++,t},remove:function(t){return this._destroy.push(t),this._toProcess++,t},removeAll:function(){for(var t=this._active,e=this._destroy,i=t.length;i--;)e.push(t[i]),this._toProcess++;return this},update:function(){if(0===this._toProcess)return this._active;for(var t,e=this._destroy,i=this._active,n=0;n<e.length;n++){t=e[n];var r=i.indexOf(t);-1!==r&&(i.splice(r,1),this.emit(s.REMOVE,t))}for(e.length=0,e=this._pending,n=0;n<e.length;n++)t=e[n],this._active.push(t),this.emit(s.ADD,t);return e.length=0,this._toProcess=0,this._active},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});t.exports=a},function(t,e){function i(t,e){return parseInt(t.getAttribute(e),10)}t.exports=function(t,e,n,r){void 0===e&&(e=0),void 0===n&&(n=0);var s={},a=t.getElementsByTagName("info")[0],o=t.getElementsByTagName("common")[0];s.font=a.getAttribute("face"),s.size=i(a,"size"),s.lineHeight=i(o,"lineHeight")+n,s.chars={};var h,l,u=t.getElementsByTagName("char"),c=void 0!==r&&r.trimmed;c&&(h=r.height,l=r.width);for(var d=0;d<u.length;d++){var f=u[d],p=i(f,"id"),g=i(f,"x"),m=i(f,"y"),y=i(f,"width"),v=i(f,"height");c&&(g<l&&(l=g),m<h&&(h=m)),s.chars[p]={x:g,y:m,width:y,height:v,centerX:Math.floor(y/2),centerY:Math.floor(v/2),xOffset:i(f,"xoffset"),yOffset:i(f,"yoffset"),xAdvance:i(f,"xadvance")+e,data:{},kerning:{}}}if(c&&0!==h&&0!==l)for(var _ in s.chars){var x=s.chars[_];x.x-=r.x,x.y-=r.y}var w=t.getElementsByTagName("kerning");for(d=0;d<w.length;d++){var b=w[d],T=i(b,"first"),E=i(b,"second"),A=i(b,"amount");s.chars[E].kerning[T]=A}return s}},function(t,e,i){var n=i(950),r=i(953),s=i(0),a=i(12),o=i(94),h=i(14),l=i(129),u=new s({Extends:h,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Mask,a.Pipeline,a.ScrollFactor,a.Size,a.Texture,a.Transform,a.Visible,n],initialize:function(t,e,i,n,r){h.call(this,t,"Blitter"),this.setTexture(n,r),this.setPosition(e,i),this.initPipeline(),this.children=new l,this.renderList=[],this.dirty=!1},create:function(t,e,i,n,s){void 0===n&&(n=!0),void 0===s&&(s=this.children.length),void 0===i?i=this.frame:i instanceof o||(i=this.texture.get(i));var a=new r(this,t,e,i,n);return this.children.addAt(a,s,!1),this.dirty=!0,a},createFromCallback:function(t,e,i,n){for(var r=this.createMultiple(e,i,n),s=0;s<r.length;s++){var a=r[s];t.call(this,a,s)}return r},createMultiple:function(t,e,i){void 0===e&&(e=this.frame.name),void 0===i&&(i=!0),Array.isArray(e)||(e=[e]);var n=[],r=this;return e.forEach((function(e){for(var s=0;s<t;s++)n.push(r.create(0,0,e,i))})),n},childCanRender:function(t){return t.visible&&0<t.alpha},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});t.exports=u},function(t,e,i){var n=i(183),r=i(52),s=i(0),a=i(12),o=i(90),h=i(14),l=i(11),u=i(954),c=i(394),d=i(3),f=new s({Extends:h,Mixins:[a.AlphaSingle,a.BlendMode,a.ComputedSize,a.Depth,a.Mask,a.Transform,a.Visible,u],initialize:function(t,e,i,n){h.call(this,t,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new a.TransformMatrix,this.tempTransformMatrix=new a.TransformMatrix,this._displayList=t.sys.displayList,this._sortKey="",this._sysEvents=t.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.setPosition(e,i),this.clearAlpha(),this.setBlendMode(r.SKIP_CHECK),n&&this.add(n)},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return.5*this.width}},displayOriginY:{get:function(){return.5*this.height}},setExclusive:function(t){return void 0===t&&(t=!0),this.exclusive=t,this},getBounds:function(t){var e;if(void 0===t&&(t=new l),t.setTo(this.x,this.y,0,0),this.parentContainer&&(e=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y),t.setTo(e.x,e.y,0,0)),0<this.list.length){var i=this.list,n=new l,r=!1;t.setEmpty();for(var s=0;s<i.length;s++){var a=i[s];a.getBounds&&(a.getBounds(n),r?c(n,t,t):(t.setTo(n.x,n.y,n.width,n.height),r=!0))}}return t},addHandler:function(t){t.once(o.DESTROY,this.remove,this),this.exclusive&&(this._displayList.remove(t),t.parentContainer&&t.parentContainer.remove(t),t.parentContainer=this)},removeHandler:function(t){t.off(o.DESTROY,this.remove),this.exclusive&&(t.parentContainer=null)},pointToContainer:function(t,e){void 0===e&&(e=new d),this.parentContainer?this.parentContainer.pointToContainer(t,e):e=new d(t.x,t.y);var i=this.tempTransformMatrix;return i.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),i.invert(),i.transformPoint(t.x,t.y,e),e},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(t){return n.Add(this.list,t,this.maxSize,this.addHandler,this),this},addAt:function(t,e){return n.AddAt(this.list,t,e,this.maxSize,this.addHandler,this),this},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t,e){return t&&(void 0===e&&(e=function(e,i){return e[t]-i[t]}),n.StableSort.inplace(this.list,e)),this},getByName:function(t){return n.GetFirst(this.list,"name",t)},getRandom:function(t,e){return n.GetRandom(this.list,t,e)},getFirst:function(t,e,i,r){return n.GetFirst(this.list,t,e,i,r)},getAll:function(t,e,i,r){return n.GetAll(this.list,t,e,i,r)},count:function(t,e,i,r){return n.CountAllMatching(this.list,t,e,i,r)},swap:function(t,e){return n.Swap(this.list,t,e),this},moveTo:function(t,e){return n.MoveTo(this.list,t,e),this},remove:function(t,e){var i=n.Remove(this.list,t,this.removeHandler,this);if(e&&i){Array.isArray(i)||(i=[i]);for(var r=0;r<i.length;r++)i[r].destroy()}return this},removeAt:function(t,e){var i=n.RemoveAt(this.list,t,this.removeHandler,this);return e&&i&&i.destroy(),this},removeBetween:function(t,e,i){var r=n.RemoveBetween(this.list,t,e,this.removeHandler,this);if(i)for(var s=0;s<r.length;s++)r[s].destroy();return this},removeAll:function(t){var e=n.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(t)for(var i=0;i<e.length;i++)e[i].destroy();return this},bringToTop:function(t){return n.BringToTop(this.list,t),this},sendToBack:function(t){return n.SendToBack(this.list,t),this},moveUp:function(t){return n.MoveUp(this.list,t),this},moveDown:function(t){return n.MoveDown(this.list,t),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return n.Shuffle(this.list),this},replace:function(t,e,i){return n.Replace(this.list,t,e)&&(this.addHandler(e),this.removeHandler(t),i&&t.destroy()),this},exists:function(t){return-1<this.list.indexOf(t)},setAll:function(t,e,i,r){return n.SetAll(this.list,t,e,i,r),this},each:function(t,e){for(var i=[null],n=this.list.slice(),r=n.length,s=2;s<arguments.length;s++)i.push(arguments[s]);for(s=0;s<r;s++)i[0]=n[s],t.apply(e,i);return this},iterate:function(t,e){for(var i=[null],n=2;n<arguments.length;n++)i.push(arguments[n]);for(n=0;n<this.list.length;n++)i[0]=this.list[n],t.apply(e,i);return this},setScrollFactor:function(t,e,i){return void 0===e&&(e=t),void 0===i&&(i=!1),this.scrollFactorX=t,this.scrollFactorY=e,i&&(n.SetAll(this.list,"scrollFactorX",t),n.SetAll(this.list,"scrollFactorY",e)),this},length:{get:function(){return this.list.length}},first:{get:function(){return(this.position=0)<this.list.length?this.list[0]:null}},last:{get:function(){return 0<this.list.length?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return 0<this.position?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[],this._displayList=null}});t.exports=f},function(t,e,i){var n=i(132),r=i(0),s=i(959),a=new r({Extends:n,Mixins:[s],initialize:function(t,e,i,r,s,a,o){n.call(this,t,e,i,r,s,a,o),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(t,e){return this.cropWidth=t,this.cropHeight=e,this},setDisplayCallback:function(t){return this.displayCallback=t,this},setScrollX:function(t){return this.scrollX=t,this},setScrollY:function(t){return this.scrollY=t,this}});t.exports=a},function(t,e,i){var n=i(91),r=i(0),s=i(192),a=i(269),o=i(272),h=i(273),l=i(277),u=i(156),c=i(282),d=i(283),f=i(280),p=i(29),g=i(95),m=i(14),y=i(2),v=i(6),_=i(13),x=i(965),w=new r({Extends:m,Mixins:[a,o,h,l,u,c,d,f,x],initialize:function(t,e){var i=v(e,"x",0),n=v(e,"y",0);m.call(this,t,"Graphics"),this.setPosition(i,n),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this._tempMatrix1=new p,this._tempMatrix2=new p,this._tempMatrix3=new p,this.setDefaultStyles(e)},setDefaultStyles:function(t){return v(t,"lineStyle",null)&&(this.defaultStrokeWidth=v(t,"lineStyle.width",1),this.defaultStrokeColor=v(t,"lineStyle.color",16777215),this.defaultStrokeAlpha=v(t,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),v(t,"fillStyle",null)&&(this.defaultFillColor=v(t,"fillStyle.color",16777215),this.defaultFillAlpha=v(t,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(t,e,i){return void 0===i&&(i=1),this.commandBuffer.push(s.LINE_STYLE,t,e,i),this._lineWidth=t,this},fillStyle:function(t,e){return void 0===e&&(e=1),this.commandBuffer.push(s.FILL_STYLE,t,e),this},fillGradientStyle:function(t,e,i,n,r){return void 0===r&&(r=1),this.commandBuffer.push(s.GRADIENT_FILL_STYLE,r,t,e,i,n),this},lineGradientStyle:function(t,e,i,n,r,a){return void 0===a&&(a=1),this.commandBuffer.push(s.GRADIENT_LINE_STYLE,t,a,e,i,n,r),this},setTexture:function(t,e,i){var n;return void 0===i&&(i=0),void 0===t?this.commandBuffer.push(s.CLEAR_TEXTURE):(n=this.scene.sys.textures.getFrame(t,e))&&(2===i&&(i=3),this.commandBuffer.push(s.SET_TEXTURE,n,i)),this},beginPath:function(){return this.commandBuffer.push(s.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(s.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(s.FILL_PATH),this},fill:function(){return this.commandBuffer.push(s.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(s.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(s.STROKE_PATH),this},fillCircleShape:function(t){return this.fillCircle(t.x,t.y,t.radius)},strokeCircleShape:function(t){return this.strokeCircle(t.x,t.y,t.radius)},fillCircle:function(t,e,i){return this.beginPath(),this.arc(t,e,i,0,_.PI2),this.fillPath(),this},strokeCircle:function(t,e,i){return this.beginPath(),this.arc(t,e,i,0,_.PI2),this.strokePath(),this},fillRectShape:function(t){return this.fillRect(t.x,t.y,t.width,t.height)},strokeRectShape:function(t){return this.strokeRect(t.x,t.y,t.width,t.height)},fillRect:function(t,e,i,n){return this.commandBuffer.push(s.FILL_RECT,t,e,i,n),this},strokeRect:function(t,e,i,n){var r=this._lineWidth/2,s=t-r,a=t+r;return this.beginPath(),this.moveTo(t,e),this.lineTo(t,e+n),this.strokePath(),this.beginPath(),this.moveTo(t+i,e),this.lineTo(t+i,e+n),this.strokePath(),this.beginPath(),this.moveTo(s,e),this.lineTo(a+i,e),this.strokePath(),this.beginPath(),this.moveTo(s,e+n),this.lineTo(a+i,e+n),this.strokePath(),this},fillRoundedRect:function(t,e,i,n,r){void 0===r&&(r=20);var s=r,a=r,o=r,h=r;return"number"!=typeof r&&(s=y(r,"tl",20),a=y(r,"tr",20),o=y(r,"bl",20),h=y(r,"br",20)),this.beginPath(),this.moveTo(t+s,e),this.lineTo(t+i-a,e),this.arc(t+i-a,e+a,a,-_.TAU,0),this.lineTo(t+i,e+n-h),this.arc(t+i-h,e+n-h,h,0,_.TAU),this.lineTo(t+o,e+n),this.arc(t+o,e+n-o,o,_.TAU,Math.PI),this.lineTo(t,e+s),this.arc(t+s,e+s,s,-Math.PI,-_.TAU),this.fillPath(),this},strokeRoundedRect:function(t,e,i,n,r){void 0===r&&(r=20);var s=r,a=r,o=r,h=r;return"number"!=typeof r&&(s=y(r,"tl",20),a=y(r,"tr",20),o=y(r,"bl",20),h=y(r,"br",20)),this.beginPath(),this.moveTo(t+s,e),this.lineTo(t+i-a,e),this.arc(t+i-a,e+a,a,-_.TAU,0),this.lineTo(t+i,e+n-h),this.arc(t+i-h,e+n-h,h,0,_.TAU),this.lineTo(t+o,e+n),this.arc(t+o,e+n-o,o,_.TAU,Math.PI),this.lineTo(t,e+s),this.arc(t+s,e+s,s,-Math.PI,-_.TAU),this.strokePath(),this},fillPointShape:function(t,e){return this.fillPoint(t.x,t.y,e)},fillPoint:function(t,e,i){return!i||i<1?i=1:(t-=i/2,e-=i/2),this.commandBuffer.push(s.FILL_RECT,t,e,i,i),this},fillTriangleShape:function(t){return this.fillTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},strokeTriangleShape:function(t){return this.strokeTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},fillTriangle:function(t,e,i,n,r,a){return this.commandBuffer.push(s.FILL_TRIANGLE,t,e,i,n,r,a),this},strokeTriangle:function(t,e,i,n,r,a){return this.commandBuffer.push(s.STROKE_TRIANGLE,t,e,i,n,r,a),this},strokeLineShape:function(t){return this.lineBetween(t.x1,t.y1,t.x2,t.y2)},lineBetween:function(t,e,i,n){return this.beginPath(),this.moveTo(t,e),this.lineTo(i,n),this.strokePath(),this},lineTo:function(t,e){return this.commandBuffer.push(s.LINE_TO,t,e),this},moveTo:function(t,e){return this.commandBuffer.push(s.MOVE_TO,t,e),this},strokePoints:function(t,e,i,n){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===n&&(n=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var r=1;r<n;r++)this.lineTo(t[r].x,t[r].y);return e&&this.lineTo(t[0].x,t[0].y),i&&this.closePath(),this.strokePath(),this},fillPoints:function(t,e,i,n){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===n&&(n=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var r=1;r<n;r++)this.lineTo(t[r].x,t[r].y);return e&&this.lineTo(t[0].x,t[0].y),i&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(t,e){void 0===e&&(e=32);var i=t.getPoints(e);return this.strokePoints(i,!0)},strokeEllipse:function(t,e,i,n,r){void 0===r&&(r=32);var s=new g(t,e,i,n).getPoints(r);return this.strokePoints(s,!0)},fillEllipseShape:function(t,e){void 0===e&&(e=32);var i=t.getPoints(e);return this.fillPoints(i,!0)},fillEllipse:function(t,e,i,n,r){void 0===r&&(r=32);var s=new g(t,e,i,n).getPoints(r);return this.fillPoints(s,!0)},arc:function(t,e,i,n,r,a,o){return void 0===a&&(a=!1),void 0===o&&(o=0),this.commandBuffer.push(s.ARC,t,e,i,n,r,a,o),this},slice:function(t,e,i,n,r,a,o){return void 0===a&&(a=!1),void 0===o&&(o=0),this.commandBuffer.push(s.BEGIN_PATH),this.commandBuffer.push(s.MOVE_TO,t,e),this.commandBuffer.push(s.ARC,t,e,i,n,r,a,o),this.commandBuffer.push(s.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(s.SAVE),this},restore:function(){return this.commandBuffer.push(s.RESTORE),this},translateCanvas:function(t,e){return this.commandBuffer.push(s.TRANSLATE,t,e),this},scaleCanvas:function(t,e){return this.commandBuffer.push(s.SCALE,t,e),this},rotateCanvas:function(t){return this.commandBuffer.push(s.ROTATE,t),this},clear:function(){return this.commandBuffer.length=0,-1<this.defaultFillColor&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),-1<this.defaultStrokeColor&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(t,e,i){var n,r,s,a=this.scene.sys,o=a.game.renderer;return void 0===e&&(e=a.scale.width),void 0===i&&(i=a.scale.height),w.TargetCamera.setScene(this.scene),w.TargetCamera.setViewport(0,0,e,i),w.TargetCamera.scrollX=this.x,w.TargetCamera.scrollY=this.y,"string"==typeof t?a.textures.exists(t)?(s=(n=a.textures.get(t)).getSourceImage())instanceof HTMLCanvasElement&&(r=s.getContext("2d")):r=(n=a.textures.createCanvas(t,e,i)).getSourceImage().getContext("2d"):t instanceof HTMLCanvasElement&&(r=t.getContext("2d")),r&&(this.renderCanvas(o,this,0,w.TargetCamera,null,r,!1),n&&n.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});w.TargetCamera=new n,t.exports=w},function(t,e){t.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,SET_TEXTURE:19,CLEAR_TEXTURE:20,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(t,e,i){var n=i(4);t.exports=function(t,e,i){void 0===i&&(i=new n);var r=t.width/2,s=t.height/2;return i.x=t.x+r*Math.cos(e),i.y=t.y+s*Math.sin(e),i}},function(t,e,i){var n=i(0),r=i(12),s=i(14),a=i(402),o=i(129),h=i(404),l=i(975),u=new n({Extends:s,Mixins:[r.Depth,r.Mask,r.Pipeline,r.Transform,r.Visible,l],initialize:function(t,e,i,n){if(s.call(this,t,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],null===i||"object"!=typeof i&&!Array.isArray(i)||(n=i,i=null),this.setTexture(e,i),this.initPipeline(),this.emitters=new o(this),this.wells=new o(this),n){Array.isArray(n)||(n=[n]);for(var r=0;r<n.length;r++)this.createEmitter(n[r])}},setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t){this.frame=this.texture.get(t);var e=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),i=[];return e.forEach((function(t){i.push(t.name)})),this.frameNames=i,this.defaultFrame=this.frame,this},setEmitterFrames:function(t,e){Array.isArray(t)||(t=[t]);for(var i=e.frames,n=i.length=0;n<t.length;n++){var r=t[n];-1!==this.frameNames.indexOf(r)&&i.push(this.texture.get(r))}return 0<i.length?e.defaultFrame=i[0]:e.defaultFrame=this.defaultFrame,this},addEmitter:function(t){return this.emitters.add(t)},createEmitter:function(t){return this.addEmitter(new h(this,t))},removeEmitter:function(t){return this.emitters.remove(t,!0)},addGravityWell:function(t){return this.wells.add(t)},createGravityWell:function(t){return this.addGravityWell(new a(t))},emitParticle:function(t,e,i){for(var n=this.emitters.list,r=0;r<n.length;r++){var s=n[r];s.active&&s.emitParticle(t,e,i)}return this},emitParticleAt:function(t,e,i){return this.emitParticle(i,t,e)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(t,e){e*=this.timeScale;for(var i=this.emitters.list,n=0;n<i.length;n++){var r=i[n];r.active&&r.preUpdate(t,e)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});t.exports=u},function(t,e,i){var n=i(52),r=i(91),s=i(26),a=i(0),o=i(12),h=i(33),l=i(94),u=i(14),c=i(1),d=i(979),f=i(9),p=i(196),g=new a({Extends:u,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Crop,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.ScrollFactor,o.Tint,o.Transform,o.Visible,d],initialize:function(t,e,i,n,a,o,l){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=32),void 0===a&&(a=32),u.call(this,t,"RenderTexture"),this.renderer=t.sys.game.renderer,this.textureManager=t.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.framebuffer=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,void 0===o?(this.canvas=s.create2D(this,n,a),this.texture=t.sys.textures.addCanvas(p(),this.canvas),this.frame=this.texture.get()):(this.texture=t.sys.textures.get(o),this.frame=this.texture.get(l),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new r(0,0,n,a),this.gl=null,this.glTexture=null;var d,f=this.renderer;f?f.type===h.WEBGL?(d=f.gl,this.gl=d,this.glTexture=this.frame.source.glTexture,this.drawGameObject=this.batchGameObjectWebGL,this.framebuffer=f.createFramebuffer(n,a,this.glTexture,!1)):f.type===h.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=c,this.camera.setScene(t),this.setPosition(e,i),void 0===o&&this.setSize(n,a),this.setOrigin(0,0),this.initPipeline()},setSize:function(t,e){return this.resize(t,e)},resize:function(t,e){var i,n,r;void 0===e&&(e=t),t!==this.width||e!==this.height?"__BASE"===this.frame.name&&(this.canvas.width=t,this.canvas.height=e,this.texture.width=t,this.texture.height=e,this.gl&&(i=this.gl,this.renderer.deleteTexture(this.frame.source.glTexture),this.renderer.deleteFramebuffer(this.framebuffer),n=this.renderer.createTexture2D(0,i.NEAREST,i.NEAREST,i.CLAMP_TO_EDGE,i.CLAMP_TO_EDGE,i.RGBA,null,t,e,!1),this.framebuffer=this.renderer.createFramebuffer(t,e,n,!1),this.frame.source.isRenderTexture=!0,this.frame.glTexture=n,this.glTexture=n),this.frame.source.width=t,this.frame.source.height=e,this.camera.setSize(t,e),this.frame.setSize(t,e),this.width=t,this.height=e):(r=this.texture.getSourceImage(),this.frame.cutX+t>r.width&&(t=r.width-this.frame.cutX),this.frame.cutY+e>r.height&&(e=r.height-this.frame.cutY),this.frame.setSize(t,e,this.frame.cutX,this.frame.cutY)),this.updateDisplayOrigin();var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=t,s.hitArea.height=e),this},setGlobalTint:function(t){return this.globalTint=t,this},setGlobalAlpha:function(t){return this.globalAlpha=t,this},saveTexture:function(t){return this.textureManager.renameTexture(this.texture.key,t),this._saved=!0,this.texture},fill:function(t,e,i,n,r,s){void 0===e&&(e=1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=this.frame.cutWidth),void 0===s&&(s=this.frame.cutHeight);var a,o,h,l,u,c=255&(t>>16|0),d=255&(t>>8|0),p=255&(0|t),g=this.gl,m=this.frame;return this.camera.preRender(1,1),g?(a=this.camera._cx,o=this.camera._cy,h=this.camera._cw,l=this.camera._ch,this.renderer.setFramebuffer(this.framebuffer,!1),this.renderer.pushScissor(a,o,h,l,l),(u=this.pipeline).projOrtho(0,this.texture.width,0,this.texture.height,-1e3,1e3),u.drawFillRect(i,n,r,s,f.getTintFromFloats(c/255,d/255,p/255,1),e),this.renderer.setFramebuffer(null,!1),this.renderer.popScissor(),u.projOrtho(0,u.width,u.height,0,-1e3,1e3)):(this.renderer.setContext(this.context),this.context.fillStyle="rgba("+c+","+d+","+p+","+e+")",this.context.fillRect(i+m.cutX,n+m.cutY,r,s),this.renderer.setContext()),this.dirty=!0,this},clear:function(){var t,e,i;return this.dirty&&((t=this.gl)?((e=this.renderer).setFramebuffer(this.framebuffer,!0),this.frame.cutWidth===this.canvas.width&&this.frame.cutHeight===this.canvas.height||t.scissor(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),e.setFramebuffer(null,!0)):((i=this.context).save(),i.setTransform(1,0,0,1,0,0),i.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),i.restore()),this.dirty=!1),this},erase:function(t,e,i){this._eraseMode=!0;var r=this.renderer.currentBlendMode;return this.renderer.setBlendMode(n.ERASE),this.draw(t,e,i,1,16777215),this.renderer.setBlendMode(r),this._eraseMode=!1,this},draw:function(t,e,i,n,r){void 0===n&&(n=this.globalAlpha),r=void 0===r?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(r>>16)+(65280&r)+((255&r)<<16),Array.isArray(t)||(t=[t]);var s,a,o,h,l,u=this.gl;return this.camera.preRender(1,1),u?(s=this.camera._cx,a=this.camera._cy,o=this.camera._cw,h=this.camera._ch,this.renderer.setFramebuffer(this.framebuffer,!1),this.renderer.pushScissor(s,a,o,h,h),(l=this.pipeline).projOrtho(0,this.texture.width,0,this.texture.height,-1e3,1e3),this.batchList(t,e,i,n,r),l.flush(),this.renderer.setFramebuffer(null,!1),this.renderer.popScissor(),l.projOrtho(0,l.width,l.height,0,-1e3,1e3)):(this.renderer.setContext(this.context),this.batchList(t,e,i,n,r),this.renderer.setContext()),this.dirty=!0,this},drawFrame:function(t,e,i,n,r,s){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=this.globalAlpha),s=void 0===s?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(s>>16)+(65280&s)+((255&s)<<16);var a,o,h,l,u,c=this.gl,d=this.textureManager.getFrame(t,e);return d&&(this.camera.preRender(1,1),c?(a=this.camera._cx,o=this.camera._cy,h=this.camera._cw,l=this.camera._ch,this.renderer.setFramebuffer(this.framebuffer,!1),this.renderer.pushScissor(a,o,h,l,l),(u=this.pipeline).projOrtho(0,this.texture.width,0,this.texture.height,-1e3,1e3),u.batchTextureFrame(d,i+this.frame.cutX,n+this.frame.cutY,s,r,this.camera.matrix,null),u.flush(),this.renderer.setFramebuffer(null,!1),this.renderer.popScissor(),u.projOrtho(0,u.width,u.height,0,-1e3,1e3)):this.batchTextureFrame(d,i+this.frame.cutX,n+this.frame.cutY,r,s),this.dirty=!0),this},batchList:function(t,e,i,n,r){for(var s=0;s<t.length;s++){var a=t[s];a&&a!==this&&(a.renderWebGL||a.renderCanvas?this.drawGameObject(a,e,i):a.isParent||a.list?this.batchGroup(a.getChildren(),e,i):"string"==typeof a?this.batchTextureFrameKey(a,null,e,i,n,r):a instanceof l?this.batchTextureFrame(a,e,i,n,r):Array.isArray(a)&&this.batchList(a,e,i,n,r))}},batchGroup:function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),e+=this.frame.cutX,i+=this.frame.cutY;for(var n=0;n<t.length;n++){var r,s,a=t[n];a.willRender()&&(r=a.x+e,s=a.y+i,this.drawGameObject(a,r,s))}},batchGameObjectWebGL:function(t,e,i){void 0===e&&(e=t.x),void 0===i&&(i=t.y);var n=t.x,r=t.y;this._eraseMode||this.renderer.setBlendMode(t.blendMode),t.setPosition(e+this.frame.cutX,i+this.frame.cutY),t.renderWebGL(this.renderer,t,0,this.camera,null),t.setPosition(n,r)},batchGameObjectCanvas:function(t,e,i){void 0===e&&(e=t.x),void 0===i&&(i=t.y);var r,s=t.x,a=t.y;this._eraseMode&&(r=t.blendMode,t.blendMode=n.ERASE),t.setPosition(e+this.frame.cutX,i+this.frame.cutY),t.renderCanvas(this.renderer,t,0,this.camera,null),t.setPosition(s,a),this._eraseMode&&(t.blendMode=r)},batchTextureFrameKey:function(t,e,i,n,r,s){var a=this.textureManager.getFrame(t,e);a&&this.batchTextureFrame(a,i,n,r,s)},batchTextureFrame:function(t,e,i,n,r){var s,a,o,h;void 0===e&&(e=0),void 0===i&&(i=0),e+=this.frame.cutX,i+=this.frame.cutY,this.gl?this.pipeline.batchTextureFrame(t,e,i,r,n,this.camera.matrix,null):(s=this.context,a=t.canvasData,o=t.source.image,h=this.camera.matrix,s.globalAlpha=this.globalAlpha,s.setTransform(h[0],h[1],h[2],h[3],h[4],h[5]),s.drawImage(o,a.x,a.y,a.width,a.height,e,i,a.width,a.height))},snapshotArea:function(t,e,i,n,r,s,a){return this.gl?this.renderer.snapshotFramebuffer(this.framebuffer,this.width,this.height,r,!1,t,e,i,n,s,a):this.renderer.snapshotCanvas(this.canvas,r,!1,t,e,i,n,s,a),this},snapshot:function(t,e,i){return this.gl?this.renderer.snapshotFramebuffer(this.framebuffer,this.width,this.height,t,!1,0,0,this.width,this.height,e,i):this.renderer.snapshotCanvas(this.canvas,t,!1,0,0,this.width,this.height,e,i),this},snapshotPixel:function(t,e,i){return this.gl?this.renderer.snapshotFramebuffer(this.framebuffer,this.width,this.height,i,!0,t,e):this.renderer.snapshotCanvas(this.canvas,i,!0,t,e),this},preDestroy:function(){this._saved||(s.remove(this.canvas),this.gl&&this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.framebuffer=null,this.texture=null,this.glTexture=null)}});t.exports=g},function(t,e){t.exports=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}},function(t,e,i){var n=i(0),r=i(12),s=i(14),a=i(985),o=i(3),h=new n({Extends:s,Mixins:[r.AlphaSingle,r.BlendMode,r.Depth,r.Flip,r.Mask,r.Pipeline,r.Size,r.Texture,r.Transform,r.Visible,r.ScrollFactor,a],initialize:function(t,e,i,n,a,h,l,u,c){void 0===n&&(n="__DEFAULT"),void 0===h&&(h=2),void 0===l&&(l=!0),s.call(this,t,"Rope"),this.anims=new r.Animation(this),this.points=h,this.vertices,this.uv,this.colors,this.alphas,this.tintFill="__DEFAULT"===n?2:0,this.dirty=!1,this.horizontal=l,this._flipX=!1,this._flipY=!1,this._perp=new o,this.debugCallback=null,this.debugGraphic=null,this.setTexture(n,a),this.setPosition(e,i),this.setSizeToFrame(),this.initPipeline("TextureTintStripPipeline"),Array.isArray(h)&&this.resizeArrays(h.length),this.setPoints(h,u,c),this.updateVertices()},preUpdate:function(t,e){var i=this.anims.currentFrame;this.anims.update(t,e),this.anims.currentFrame!==i&&(this.updateUVs(),this.updateVertices())},play:function(t,e,i){return this.anims.play(t,e,i),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(t,e,i){return void 0===t&&(t=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(t,e,i))},setVertical:function(t,e,i){return void 0===t&&(t=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(t,e,i)):this},setTintFill:function(t){return void 0===t&&(t=0),this.tintFill=t,this},setAlphas:function(t,e){var i=this.points.length;if(i<1)return this;var n=this.alphas;void 0===t?t=[1]:Array.isArray(t)||void 0!==e||(t=[t]);var r=0;if(void 0!==e)for(a=0;a<i;a++)n[r=2*a]=t,n[r+1]=e;else if(t.length===i)for(a=0;a<i;a++)n[r=2*a]=t[a],n[r+1]=t[a];else for(var s=t[0],a=0;a<i;a++)r=2*a,t.length>r&&(s=t[r]),n[r]=s,t.length>r+1&&(s=t[r+1]),n[r+1]=s;return this},setColors:function(t){var e=this.points.length;if(e<1)return this;var i=this.colors;void 0===t?t=[16777215]:Array.isArray(t)||(t=[t]);var n=0;if(t.length===e)for(s=0;s<e;s++)i[n=2*s]=t[s],i[n+1]=t[s];else for(var r=t[0],s=0;s<e;s++)n=2*s,t.length>n&&(r=t[n]),i[n]=r,t.length>n+1&&(r=t[n+1]),i[n+1]=r;return this},setPoints:function(t,e,i){if(void 0===t&&(t=2),"number"==typeof t){var n,r,s,a=t;if(a<2&&(a=2),t=[],this.horizontal)for(s=-this.frame.halfWidth,r=this.frame.width/(a-1),n=0;n<a;n++)t.push({x:s+n*r,y:0});else for(s=-this.frame.halfHeight,r=this.frame.height/(a-1),n=0;n<a;n++)t.push({x:0,y:s+n*r})}var o=t.length,h=this.points.length;return o<1?console.warn("Rope: Not enough points given"):(1===o&&(t.unshift({x:0,y:0}),o++),h!==o&&this.resizeArrays(o),this.points=t,this.updateUVs(),null!=e&&this.setColors(e),null!=i&&this.setAlphas(i)),this},updateUVs:function(){for(var t=this.uv,e=this.points.length,i=this.frame.u0,n=this.frame.v0,r=this.frame.u1,s=this.frame.v1,a=(r-i)/(e-1),o=(s-n)/(e-1),h=0;h<e;h++){var l,u,c,d=4*h,f=this.horizontal?(c=l=this._flipX?r-h*a:i+h*a,this._flipY?(u=s,n):(u=n,s)):(c=this._flipX?(l=i,r):(l=r,i),u=this._flipY?s-h*o:n+h*o);t[0+d]=l,t[1+d]=u,t[2+d]=c,t[3+d]=f}return this},resizeArrays:function(t){var e=this.colors,i=this.alphas;this.vertices=new Float32Array(4*t),this.uv=new Float32Array(4*t),e=new Uint32Array(2*t),i=new Float32Array(2*t);for(var n=0;n<2*t;n++)e[n]=16777215,i[n]=1;return this.colors=e,this.alphas=i,this.dirty=!0,this},updateVertices:function(){var t=this._perp,e=this.points,i=this.vertices,n=e.length;if(this.dirty=!1,!(n<1)){for(var r=e[0],s=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,a=0;a<n;a++){var o=e[a],h=4*a,l=a<n-1?e[a+1]:o;t.x=l.y-r.y,t.y=-(l.x-r.x);var u=t.length();t.x/=u,t.y/=u,t.x*=s,t.y*=s,i[h]=o.x+t.x,i[1+h]=o.y+t.y,i[2+h]=o.x-t.x,i[3+h]=o.y-t.y,r=o}return this}},setDebug:function(t,e){return this.debugGraphic=t,this.debugCallback=t||e?e||this.renderDebugVerts:null,this},renderDebugVerts:function(t,e,i){var n=t.debugGraphic,r=i[0],s=i[1],a=i[2],o=i[3];n.lineBetween(r,s,a,o);for(var h=4;h<e;h+=4){var l=i[h+0],u=i[h+1],c=i[h+2],d=i[h+3];n.lineBetween(r,s,l,u),n.lineBetween(a,o,c,d),n.lineBetween(a,o,l,u),n.lineBetween(l,u,c,d),r=l,s=u,a=c,o=d}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(t){return this._flipX=t,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(t){return this._flipY=t,this.updateUVs()}}});t.exports=h},function(t,e,i){var n=i(122),r=i(26),s=i(0),a=i(12),o=i(20),h=i(14),l=i(988),u=i(6),c=i(178),d=i(989),f=i(992),p=new s({Extends:h,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Crop,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Tint,a.Transform,a.Visible,d],initialize:function(t,e,i,n,s){void 0===e&&(e=0),void 0===i&&(i=0),h.call(this,t,"Text"),this.renderer=t.sys.game.renderer,this.setPosition(e,i),this.setOrigin(0,0),this.initPipeline(),this.canvas=r.create(this),this.context=this.canvas.getContext("2d"),this.style=new f(this,s),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,0===this.style.resolution&&(this.style.resolution=t.sys.game.config.resolution),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(n),s&&s.padding&&this.setPadding(s.padding),s&&s.lineSpacing&&this.setLineSpacing(s.lineSpacing),t.sys.game.events.on(o.CONTEXT_RESTORED,(function(){this.dirty=!0}),this)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",n(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(t){var e=this.style;if(e.wordWrapCallback){var i=e.wordWrapCallback.call(e.wordWrapCallbackScope,t,this);return Array.isArray(i)&&(i=i.join("\n")),i}return e.wordWrapWidth?e.wordWrapUseAdvanced?this.advancedWordWrap(t,this.context,this.style.wordWrapWidth):this.basicWordWrap(t,this.context,this.style.wordWrapWidth):t},advancedWordWrap:function(t,e,i){for(var n="",r=t.replace(/ +/gi," ").split(this.splitRegExp),s=r.length,a=0;a<s;a++){var o="",h=(h=r[a]).replace(/^ *|\s*$/gi,"");if(e.measureText(h).width<i)n+=h+"\n";else{for(var l=i,u=h.split(" "),c=0;c<u.length;c++){var d=u[c],f=d+" ",p=e.measureText(f).width;if(l<p){if(0===c){for(var g=f;g.length&&(g=g.slice(0,-1),!((p=e.measureText(g).width)<=l)););if(!g.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var m=d.substr(g.length);u[c]=m,o+=g}var y=u[c].length?c:c+1,v=u.slice(y).join(" ").replace(/[ \n]*$/gi,"");r[a+1]=v+" "+(r[a+1]||""),s=r.length;break}o+=f,l-=p}n+=o.replace(/[ \n]*$/gi,"")+"\n"}}return n.replace(/[\s|\n]*$/gi,"")},basicWordWrap:function(t,e,i){for(var n="",r=t.split(this.splitRegExp),s=r.length-1,a=e.measureText(" ").width,o=0;o<=s;o++){for(var h=i,l=r[o].split(" "),u=l.length-1,c=0;c<=u;c++){var d=l[c],f=e.measureText(d).width,p=f+a;h<p&&0<c&&(n+="\n",h=i),n+=d,c<u?(n+=" ",h-=p):h-=f}o<s&&(n+="\n")}return n},getWrappedText:function(t){return void 0===t&&(t=this._text),this.style.syncFont(this.canvas,this.context),this.runWordWrap(t).split(this.splitRegExp)},setText:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this._text&&(this._text=t.toString(),this.updateText()),this},setStyle:function(t){return this.style.setStyle(t)},setFont:function(t){return this.style.setFont(t)},setFontFamily:function(t){return this.style.setFontFamily(t)},setFontSize:function(t){return this.style.setFontSize(t)},setFontStyle:function(t){return this.style.setFontStyle(t)},setFixedSize:function(t,e){return this.style.setFixedSize(t,e)},setBackgroundColor:function(t){return this.style.setBackgroundColor(t)},setFill:function(t){return this.style.setFill(t)},setColor:function(t){return this.style.setColor(t)},setStroke:function(t,e){return this.style.setStroke(t,e)},setShadow:function(t,e,i,n,r,s){return this.style.setShadow(t,e,i,n,r,s)},setShadowOffset:function(t,e){return this.style.setShadowOffset(t,e)},setShadowColor:function(t){return this.style.setShadowColor(t)},setShadowBlur:function(t){return this.style.setShadowBlur(t)},setShadowStroke:function(t){return this.style.setShadowStroke(t)},setShadowFill:function(t){return this.style.setShadowFill(t)},setWordWrapWidth:function(t,e){return this.style.setWordWrapWidth(t,e)},setWordWrapCallback:function(t,e){return this.style.setWordWrapCallback(t,e)},setAlign:function(t){return this.style.setAlign(t)},setResolution:function(t){return this.style.setResolution(t)},setLineSpacing:function(t){return this.lineSpacing=t,this.updateText()},setPadding:function(t,e,i,n){var r,s,a;return"object"==typeof t?(i=null!==(s=u(r=t,"x",null))?t=s:(t=u(r,"left",0),u(r,"right",t)),n=null!==(a=u(r,"y",null))?e=a:(e=u(r,"top",0),u(r,"bottom",e))):(void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=t),void 0===n&&(n=e)),this.padding.left=t,this.padding.top=e,this.padding.right=i,this.padding.bottom=n,this.updateText()},setMaxLines:function(t){return this.style.setMaxLines(t)},updateText:function(){var t=this.canvas,e=this.context,i=this.style,n=i.resolution,r=i.metrics;i.syncFont(t,e);var s=this._text;(i.wordWrapWidth||i.wordWrapCallback)&&(s=this.runWordWrap(this._text));var a,o=s.split(this.splitRegExp),h=l(this,r,o),u=this.padding;0===i.fixedWidth?(this.width=h.width+u.left+u.right,a=h.width):(this.width=i.fixedWidth,(a=this.width-u.left-u.right)<h.width&&(a=h.width)),0===i.fixedHeight?this.height=h.height+u.top+u.bottom:this.height=i.fixedHeight;var c,d,f=this.width,p=this.height;this.updateDisplayOrigin(),f*=n,p*=n,f=Math.max(f,1),p=Math.max(p,1),t.width!==f||t.height!==p?(t.width=f,t.height=p,this.frame.setSize(f,p),i.syncFont(t,e)):e.clearRect(0,0,f,p),e.save(),e.scale(n,n),i.backgroundColor&&(e.fillStyle=i.backgroundColor,e.fillRect(0,0,f,p)),i.syncStyle(t,e),e.textBaseline="alphabetic",e.translate(u.left,u.top);for(var g=0;g<h.lines;g++){if(c=i.strokeThickness/2,d=i.strokeThickness/2+g*h.lineHeight+r.ascent,0<g&&(d+=h.lineSpacing*g),i.rtl)c=f-c;else if("right"===i.align)c+=a-h.lineWidths[g];else if("center"===i.align)c+=(a-h.lineWidths[g])/2;else if("justify"===i.align&&.85<=h.lineWidths[g]/h.width){var m=h.width-h.lineWidths[g],y=e.measureText(" ").width,v=o[g].trim(),_=v.split(" ");m+=(o[g].length-v.length)*y;for(var x=Math.floor(m/y),w=0;0<x;)_[w]+=" ",w=(w+1)%(_.length-1||1),--x;o[g]=_.join(" ")}this.autoRound&&(c=Math.round(c),d=Math.round(d)),i.strokeThickness&&(this.style.syncShadow(e,i.shadowStroke),e.strokeText(o[g],c,d)),i.color&&(this.style.syncShadow(e,i.shadowFill),e.fillText(o[g],c,d))}e.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(t,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var b=this.input;return b&&!b.customHitArea&&(b.hitArea.width=this.width,b.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(t){this.setText(t)}},toJSON:function(){var t=a.ToJSON(this),e={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=e,t},preDestroy:function(){this.style.rtl&&c(this.canvas),r.remove(this.canvas),this.texture.destroy()}});t.exports=p},function(t,e,i){var n=i(26),r=i(0),s=i(12),a=i(20),o=i(14),h=i(329),l=i(167),u=i(994),c=i(3),d=new r({Extends:o,Mixins:[s.Alpha,s.BlendMode,s.ComputedSize,s.Crop,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Tint,s.Transform,s.Visible,u],initialize:function(t,e,i,r,s,l,u){var d=t.sys.game.renderer;o.call(this,t,"TileSprite");var f=t.sys.textures.get(l),p=f.get(u);s=r&&s?(r=Math.floor(r),Math.floor(s)):(r=p.width,p.height),this._tilePosition=new c,this._tileScale=new c(1,1),this.dirty=!1,this.renderer=d,this.canvas=n.create(this,r,s),this.context=this.canvas.getContext("2d"),this.displayTexture=f,this.displayFrame=p,this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=h(p.width),this.potHeight=h(p.height),this.fillCanvas=n.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(e,i),this.setSize(r,s),this.setFrame(u),this.setOriginFromFrame(),this.initPipeline(),t.sys.game.events.on(a.CONTEXT_RESTORED,(function(t){var e=t.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=t.createTexture2D(0,e.LINEAR,e.LINEAR,e.REPEAT,e.REPEAT,e.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}),this)},setTexture:function(t,e){return this.displayTexture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t){var e=this.displayTexture.get(t);return this.potWidth=h(e.width),this.potHeight=h(e.height),this.canvas.width=0,e.cutWidth&&e.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this.displayFrame=e,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(t,e){return void 0!==t&&(this.tilePositionX=t),void 0!==e&&(this.tilePositionY=e),this},setTileScale:function(t,e){return void 0===t&&(t=this.tileScaleX),void 0===e&&(e=t),this.tileScaleX=t,this.tileScaleY=e,this},updateTileTexture:function(){if(this.dirty&&this.renderer){var t=this.displayFrame;if(t.source.isRenderTexture||t.source.isGLTexture)return console.warn("TileSprites can only use Image or Canvas based textures"),void(this.dirty=!1);var e=this.fillContext,i=this.fillCanvas,n=this.potWidth,r=this.potHeight;this.renderer.gl||(n=t.cutWidth,r=t.cutHeight),e.clearRect(0,0,n,r),i.width=n,i.height=r,e.drawImage(t.source.image,t.cutX,t.cutY,t.cutWidth,t.cutHeight,0,0,n,r),this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(i,this.fillPattern):this.fillPattern=e.createPattern(i,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var t,e,i,n,r,s=this.canvas;s.width===this.width&&s.height===this.height||(s.width=this.width,s.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl||(t=this.context,this.scene.sys.game.config.antialias||l.disable(t),e=this._tileScale.x,i=this._tileScale.y,n=this._tilePosition.x,r=this._tilePosition.y,t.clearRect(0,0,this.width,this.height),t.save(),t.scale(e,i),t.translate(-n,-r),t.fillStyle=this.fillPattern,t.fillRect(n,r,this.width/e,this.height/i),t.restore()),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),n.remove(this.canvas),n.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(t){this._tilePosition.x=t,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(t){this._tilePosition.y=t,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(t){this._tileScale.x=t,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(t){this._tileScale.y=t,this.dirty=!0}}});t.exports=d},function(t,e,i){var n=i(0),r=i(19),s=i(12),a=i(90),o=i(20),h=i(14),l=i(59),u=i(196),c=i(997),d=i(13),f=new n({Extends:h,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Size,s.TextureCrop,s.Tint,s.Transform,s.Visible,c],initialize:function(t,e,i,n){h.call(this,t,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=u(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=d.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(e,i),this.initPipeline(),n&&this.changeSource(n,!1);var r=t.sys.game.events;r.on(o.PAUSE,this.globalPause,this),r.on(o.RESUME,this.globalResume,this);var s=t.sys.sound;s&&s.on(l.GLOBAL_MUTE,this.globalMute,this)},play:function(t,e,i){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var n=this.video;if(!n)return console.warn("Video not loaded"),this;void 0===t&&(t=n.loop);var r=this.scene.sys.sound;r&&r.mute&&this.setMute(!0),isNaN(e)||(this._markerIn=e),!isNaN(i)&&e<i&&(this._markerOut=i),n.loop=t;var s=this._callbacks,a=n.play();return void 0!==a?a.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(n.addEventListener("playing",s.play,!0),n.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),n.addEventListener("ended",s.end,!0),n.addEventListener("timeupdate",s.time,!0),n.addEventListener("seeking",s.seeking,!0),n.addEventListener("seeked",s.seeked,!0),this},changeSource:function(t,e,i,n,r){void 0===e&&(e=!0),this.video&&this.stop();var s=this.scene.sys.cache.video.get(t);return s?(this.video=s,this._cacheKey=t,this._codePaused=s.paused,this._codeMuted=s.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,s,s.videoWidth,s.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,s.videoWidth,s.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(a.VIDEO_CREATED,this,s.videoWidth,s.videoHeight)):this.updateTexture(),s.currentTime=0,this._lastUpdate=0,e&&this.play(i,n,r)):this.video=null,this},addMarker:function(t,e,i){return!isNaN(e)&&0<=e&&!isNaN(i)&&(this.markers[t]=[e,i]),this},playMarker:function(t,e){var i=this.markers[t];return i&&this.play(e,i[0],i[1]),this},removeMarker:function(t){return delete this.markers[t],this},snapshot:function(t,e){return void 0===t&&(t=this.width),void 0===e&&(e=this.height),this.snapshotArea(0,0,this.width,this.height,t,e)},snapshotArea:function(t,e,i,n,r,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.width),void 0===n&&(n=this.height),void 0===r&&(r=i),void 0===s&&(s=n);var a=this.video,o=this.snapshotTexture;return o?o.setSize(r,s):(o=this.scene.sys.textures.createCanvas(u(),r,s),this.snapshotTexture=o),a&&o.context.drawImage(a,t,e,i,n,0,0,r,s),o.update()},saveSnapshotTexture:function(t){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,t):this.snapshotTexture=this.scene.sys.textures.createCanvas(t,this.width,this.height),this.snapshotTexture},loadURL:function(t,e,i){void 0===e&&(e="loadeddata"),void 0===i&&(i=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var n=document.createElement("video");return n.controls=!1,i&&(n.muted=!0,n.defaultMuted=!0,n.setAttribute("autoplay","autoplay")),n.setAttribute("playsinline","playsinline"),n.setAttribute("preload","auto"),n.addEventListener("error",this._callbacks.error,!0),n.src=t,n.load(),this.video=n,this},playPromiseSuccessHandler:function(){this.touchLocked=!1,this.emit(a.VIDEO_PLAY,this),-1<this._markerIn&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(t){this.scene.sys.input.once("pointerdown",this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(a.VIDEO_ERROR,this,t)},playHandler:function(){this.touchLocked=!1,this.emit(a.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(t){this.stop(),this.emit(a.VIDEO_ERROR,this,t)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(a.VIDEO_UNLOCKED,this),-1<this._markerIn&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(a.VIDEO_PLAY,this)},completeHandler:function(){this.emit(a.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(a.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var t,e=this.video;!e||(t=e.currentTime)!==this._lastUpdate&&(this._lastUpdate=t,this.updateTexture(),t>=this._markerOut&&(e.loop?(e.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=t,this.emit(a.VIDEO_LOOP,this)):(this.emit(a.VIDEO_COMPLETE,this),this.stop())))},checkVideoProgress:function(){2<=this.video.readyState?this.updateTexture():(this.retry--,0<this.retry?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(a.VIDEO_TIMEOUT,this))},updateTexture:function(){var t,e=this.video,i=e.videoWidth,n=e.videoHeight;this.videoTexture?((t=this.videoTextureSource).source!==e&&(t.source=e,t.width=i,t.height=n),t.update()):(this.videoTexture=this.scene.sys.textures.create(this._key,e,i,n),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,i,n),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(a.VIDEO_CREATED,this,i,n))},getVideoKey:function(){return this._cacheKey},seekTo:function(t){var e,i,n=this.video;return n&&((e=n.duration)===1/0||isNaN(e)||(i=e*t,this.setCurrentTime(i))),this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(t){var e,i,n=this.video;return n&&("string"==typeof t&&(e=t[0],i=parseFloat(t.substr(1)),"+"===e?t=n.currentTime+i:"-"===e&&(t=n.currentTime-i)),n.currentTime=t,this._lastUpdate=t),this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(a.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(a.VIDEO_SEEKED,this),this.video&&this.updateTexture()},getProgress:function(){var t=this.video;if(t){var e=t.currentTime,i=t.duration;if(i!==1/0&&!isNaN(i))return e/i}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(t){void 0===t&&(t=!0),this._codeMuted=t;var e=this.video;return e&&(e.muted=!!this._systemMuted||t),this},isMuted:function(){return this._codeMuted},globalMute:function(t,e){this._systemMuted=e;var i=this.video;i&&(i.muted=!!this._codeMuted||e)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(t){void 0===t&&(t=!0);var e=this.video;return this._codePaused=t,e&&(t?e.paused||e.pause():t||e.paused&&!this._systemPaused&&e.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(t){return void 0===t&&(t=1),this.video&&(this.video.volume=r(t,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(t){return this.video&&(this.video.playbackRate=t),this},getLoop:function(){return!!this.video&&this.video.loop},setLoop:function(t){return void 0===t&&(t=!0),this.video&&(this.video.loop=t),this},isPlaying:function(){return!!this.video&&!(this.video.paused||this.video.ended)},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(t,e){return void 0===e&&(e=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,t),this._key=t,this.flipY=e,this.videoTextureSource&&this.videoTextureSource.setFlipY(e),this.videoTexture},stop:function(){var t=this.video;if(t){var e=this._callbacks;for(var i in e)t.removeEventListener(i,e[i],!0);t.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(a.VIDEO_STOP,this),this},removeVideoElement:function(){var t=this.video;if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("autoplay"),t.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var t=this.scene.sys.game.events;t.off(o.PAUSE,this.globalPause,this),t.off(o.RESUME,this.globalResume,this);var e=this.scene.sys.sound;e&&e.off(l.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});t.exports=f},function(t,e,i){var n=i(0),r=i(202),s=i(419),a=i(47),o=new n({initialize:function(t){this.type=a.POLYGON,this.area=0,this.points=[],t&&this.setTo(t)},contains:function(t,e){return r(this,t,e)},setTo:function(t){if(this.area=0,this.points=[],"string"==typeof t&&(t=t.split(" ")),!Array.isArray(t))return this;for(var e,i=Number.MAX_VALUE,n=0;n<t.length;n++)e={x:0,y:0},"number"==typeof t[n]||"string"==typeof t[n]?(e.x=parseFloat(t[n]),e.y=parseFloat(t[n+1]),n++):Array.isArray(t[n])?(e.x=t[n][0],e.y=t[n][1]):(e.x=t[n].x,e.y=t[n].y),this.points.push(e),e.y<i&&(i=e.y);return this.calculateArea(i),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var t,e,i=0,n=0;n<this.points.length-1;n++)t=this.points[n],i+=((e=this.points[n+1]).x-t.x)*(t.y+e.y);return t=this.points[0],e=this.points[this.points.length-1],i+=(t.x-e.x)*(e.y+t.y),this.area=.5*-i,this.area},getPoints:function(t,e,i){return s(this,t,e,i)}});t.exports=o},function(t,e){t.exports=function(t,e,i){for(var n=!1,r=-1,s=t.points.length-1;++r<t.points.length;s=r){var a=t.points[r].x,o=t.points[r].y,h=t.points[s].x,l=t.points[s].y;(o<=i&&i<l||l<=i&&i<o)&&e<(h-a)*(i-o)/(l-o)+a&&(n=!n)}return n}},function(t,e,i){var n=i(0),r=i(134),s=new n({Extends:r,initialize:function(t,e,i,n,s){r.call(this,t,e,i,[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,1,1,0,0,1,1,1,0],[16777215,16777215,16777215,16777215,16777215,16777215],[1,1,1,1,1,1],n,s),this.resetPosition()},setFrame:function(t){return this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,t=this.frame,this.uv[0]=t.u0,this.uv[1]=t.v0,this.uv[2]=t.u0,this.uv[3]=t.v1,this.uv[4]=t.u1,this.uv[5]=t.v1,this.uv[6]=t.u0,this.uv[7]=t.v0,this.uv[8]=t.u1,this.uv[9]=t.v1,this.uv[10]=t.u1,this.uv[11]=t.v0,this},topLeftX:{get:function(){return this.x+this.vertices[0]},set:function(t){this.vertices[0]=t-this.x,this.vertices[6]=t-this.x}},topLeftY:{get:function(){return this.y+this.vertices[1]},set:function(t){this.vertices[1]=t-this.y,this.vertices[7]=t-this.y}},topRightX:{get:function(){return this.x+this.vertices[10]},set:function(t){this.vertices[10]=t-this.x}},topRightY:{get:function(){return this.y+this.vertices[11]},set:function(t){this.vertices[11]=t-this.y}},bottomLeftX:{get:function(){return this.x+this.vertices[2]},set:function(t){this.vertices[2]=t-this.x}},bottomLeftY:{get:function(){return this.y+this.vertices[3]},set:function(t){this.vertices[3]=t-this.y}},bottomRightX:{get:function(){return this.x+this.vertices[4]},set:function(t){this.vertices[4]=t-this.x,this.vertices[8]=t-this.x}},bottomRightY:{get:function(){return this.y+this.vertices[5]},set:function(t){this.vertices[5]=t-this.y,this.vertices[9]=t-this.y}},topLeftAlpha:{get:function(){return this.alphas[0]},set:function(t){this.alphas[0]=t,this.alphas[3]=t}},topRightAlpha:{get:function(){return this.alphas[5]},set:function(t){this.alphas[5]=t}},bottomLeftAlpha:{get:function(){return this.alphas[1]},set:function(t){this.alphas[1]=t}},bottomRightAlpha:{get:function(){return this.alphas[2]},set:function(t){this.alphas[2]=t,this.alphas[4]=t}},topLeftColor:{get:function(){return this.colors[0]},set:function(t){this.colors[0]=t,this.colors[3]=t}},topRightColor:{get:function(){return this.colors[5]},set:function(t){this.colors[5]=t}},bottomLeftColor:{get:function(){return this.colors[1]},set:function(t){this.colors[1]=t}},bottomRightColor:{get:function(){return this.colors[2]},set:function(t){this.colors[2]=t,this.colors[4]=t}},setTopLeft:function(t,e){return this.topLeftX=t,this.topLeftY=e,this},setTopRight:function(t,e){return this.topRightX=t,this.topRightY=e,this},setBottomLeft:function(t,e){return this.bottomLeftX=t,this.bottomLeftY=e,this},setBottomRight:function(t,e){return this.bottomRightX=t,this.bottomRightY=e,this},resetPosition:function(){var t=this.x,e=this.y,i=Math.floor(this.width/2),n=Math.floor(this.height/2);return this.setTopLeft(t-i,e-n),this.setTopRight(t+i,e-n),this.setBottomLeft(t-i,e+n),this.setBottomRight(t+i,e+n),this},resetAlpha:function(){var t=this.alphas;return t[0]=1,t[1]=1,t[2]=1,t[3]=1,t[4]=1,t[5]=1,this},resetColors:function(){var t=this.colors;return t[0]=16777215,t[1]=16777215,t[2]=16777215,t[3]=16777215,t[4]=16777215,t[5]=16777215,this},reset:function(){return this.resetPosition(),this.resetAlpha(),this.resetColors()}});t.exports=s},function(t,e,i){var n=i(0),r=i(12),s=i(14),a=i(2),o=i(18),h=i(427),l=i(1080),u=i(29),c=new n({Extends:s,Mixins:[r.ComputedSize,r.Depth,r.GetBounds,r.Mask,r.Origin,r.ScrollFactor,r.Transform,r.Visible,l],initialize:function(t,e,i,n,r,a,o,h){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=128),void 0===a&&(a=128),s.call(this,t,"Shader"),this.blendMode=-1,this.shader;var l=t.sys.renderer;this.renderer=l,this.gl=l.gl,this.vertexData=new ArrayBuffer(2*Float32Array.BYTES_PER_ELEMENT*6),this.vertexBuffer=l.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new u,this._tempMatrix2=new u,this._tempMatrix3=new u,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=l.width,this._rendererHeight=l.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(i,n),this.setSize(r,a),this.setOrigin(.5,.5),this.setShader(e,o,h)},willRender:function(t){return!!this.renderToTexture||!(s.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},setRenderToTexture:function(t,e){var i,n,r,s;return void 0===e&&(e=!1),this.renderToTexture||(i=this.width,n=this.height,r=this.renderer,this.glTexture=r.createTextureFromSource(null,i,n,0),this.glTexture.flipY=e,this.framebuffer=r.createFramebuffer(i,n,this.glTexture,!1),this._rendererWidth=i,this._rendererHeight=n,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),t&&(this.texture=this.scene.sys.textures.addGLTexture(t,this.glTexture,i,n))),this.shader&&(s=r.currentPipeline,r.clearPipeline(),this.load(),this.flush(),r.rebindPipeline(s)),this},setShader:function(t,e,i){if(void 0===e&&(e=[]),"string"==typeof t){var n=this.scene.sys.cache.shader;if(!n.has(t))return console.warn("Shader missing: "+t),this;this.shader=n.get(t)}else this.shader=t;var r=this.gl,s=this.renderer;this.program&&r.deleteProgram(this.program);var a=s.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);s.setMatrix4(a,"uViewMatrix",!1,this.viewMatrix),s.setMatrix4(a,"uProjectionMatrix",!1,this.projectionMatrix),s.setFloat2(a,"uResolution",this.width,this.height),this.program=a;var h=new Date,l={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[h.getFullYear(),h.getMonth(),h.getDate(),60*h.getHours()*60+60*h.getMinutes()+h.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=o(!0,{},this.shader.uniforms,l):this.uniforms=l;for(var u=0;u<4;u++)e[u]&&this.setSampler2D("iChannel"+u,e[u],u,i);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(t){return this.pointer=t,this},projOrtho:function(t,e,i,n){var r=1/(t-e),s=1/(i-n),a=this.projectionMatrix;a[0]=-2*r,a[5]=-2*s,a[10]=-.001,a[12]=(t+e)*r,a[13]=(n+i)*s,a[14]=-0;var o=this.program;this.renderer.setMatrix4(o,"uProjectionMatrix",!1,this.projectionMatrix),this._rendererWidth=e,this._rendererHeight=i},initUniforms:function(){var t=this.gl,e=this.renderer.glFuncMap,i=this.program;for(var n in this._textureCount=0,this.uniforms){var r=this.uniforms[n],s=r.type,a=e[s];r.uniformLocation=t.getUniformLocation(i,n),"sampler2D"!==s&&(r.glMatrix=a.matrix,r.glValueLength=a.length,r.glFunc=a.func)}},setSampler2DBuffer:function(t,e,i,n,r,s){void 0===r&&(r=0),void 0===s&&(s={});var a=this.uniforms[t];return a.value=e,s.width=i,s.height=n,a.textureData=s,this._textureCount=r,this.initSampler2D(a),this},setSampler2D:function(t,e,i,n){void 0===i&&(i=0);var r,s,a,o=this.scene.sys.textures;return o.exists(e)&&(r=o.getFrame(e),s=this.uniforms[t],a=r.source,s.textureKey=e,s.source=a.image,s.value=r.glTexture,a.isGLTexture&&((n=n||{}).width=a.width,n.height=a.height),n&&(s.textureData=n),this._textureCount=i,this.initSampler2D(s)),this},setUniform:function(t,e){return h(this.uniforms,t,e),this},getUniform:function(t){return a(this.uniforms,t,null)},setChannel0:function(t,e){return this.setSampler2D("iChannel0",t,0,e)},setChannel1:function(t,e){return this.setSampler2D("iChannel1",t,1,e)},setChannel2:function(t,e){return this.setSampler2D("iChannel2",t,2,e)},setChannel3:function(t,e){return this.setSampler2D("iChannel3",t,3,e)},initSampler2D:function(t){var e,i,n,r,s,o,h,l,u,c;t.value&&((e=this.gl).activeTexture(e.TEXTURE0+this._textureCount),e.bindTexture(e.TEXTURE_2D,t.value),(i=t.textureData)&&(n=e[a(i,"magFilter","linear").toUpperCase()],r=e[a(i,"minFilter","linear").toUpperCase()],s=e[a(i,"wrapS","repeat").toUpperCase()],o=e[a(i,"wrapT","repeat").toUpperCase()],h=e[a(i,"format","rgba").toUpperCase()],i.repeat&&(s=e.REPEAT,o=e.REPEAT),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!!i.flipY),i.width?(l=a(i,"width",512),u=a(i,"height",2),c=a(i,"border",0),e.texImage2D(e.TEXTURE_2D,0,h,l,u,c,h,e.UNSIGNED_BYTE,null)):e.texImage2D(e.TEXTURE_2D,0,h,e.RGBA,e.UNSIGNED_BYTE,t.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,s),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,o)),this.renderer.setProgram(this.program),e.uniform1i(t.uniformLocation,this._textureCount),this._textureCount++)},syncUniforms:function(){var t,e,i,n,r,s=this.gl,a=this.uniforms,o=0;for(var h in a)i=(t=a[h]).glFunc,e=t.glValueLength,n=t.uniformLocation,null!==(r=t.value)&&(1===e?t.glMatrix?i.call(s,n,t.transpose,r):i.call(s,n,r):2===e?i.call(s,n,r.x,r.y):3===e?i.call(s,n,r.x,r.y,r.z):4===e?i.call(s,n,r.x,r.y,r.z,r.w):"sampler2D"===t.type&&(s.activeTexture(s["TEXTURE"+o]),s.bindTexture(s.TEXTURE_2D,r),s.uniform1i(n,o),o++))},load:function(t){var e,i,n=this.gl,r=this.width,s=this.height,a=this.renderer,o=this.program,h=this.viewMatrix;this.renderToTexture||(e=-this._displayOriginX,i=-this._displayOriginY,h[0]=t[0],h[1]=t[1],h[4]=t[2],h[5]=t[3],h[8]=t[4],h[9]=t[5],h[12]=h[0]*e+h[4]*i,h[13]=h[1]*e+h[5]*i),n.useProgram(o),n.uniformMatrix4fv(n.getUniformLocation(o,"uViewMatrix"),!1,h),n.uniform2f(n.getUniformLocation(o,"uResolution"),this.width,this.height);var l=this.uniforms,u=l.resolution;u.value.x=r,u.value.y=s,l.time.value=a.game.loop.getDuration();var c,d,f,p=this.pointer;p&&(c=l.mouse,d=p.x/r,f=1-p.y/s,c.value.x=d.toFixed(2),c.value.y=f.toFixed(2)),this.syncUniforms()},flush:function(){var t=this.width,e=this.height,i=this.program,n=this.gl,r=this.vertexBuffer,s=this.renderer,a=2*Float32Array.BYTES_PER_ELEMENT;this.renderToTexture&&(s.setFramebuffer(this.framebuffer),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT)),n.bindBuffer(n.ARRAY_BUFFER,r);var o=n.getAttribLocation(i,"inPosition");-1!==o&&(n.enableVertexAttribArray(o),n.vertexAttribPointer(o,2,n.FLOAT,!1,a,0));var h=this.vertexViewF32;h[3]=e,h[4]=t,h[5]=e,h[8]=t,h[9]=e,h[10]=t,n.bufferSubData(n.ARRAY_BUFFER,0,this.bytes.subarray(0,6*a)),n.drawArrays(n.TRIANGLES,0,6),this.renderToTexture&&s.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var t=this.gl;t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});t.exports=c},function(t,e,i){var n=i(53);t.exports=function(t,e){return n(t.x,t.y,e.x,e.y)<=t.radius+e.radius}},function(t,e){t.exports=function(t,e){var i=e.width/2,n=e.height/2,r=Math.abs(t.x-e.x-i),s=Math.abs(t.y-e.y-n),a=i+t.radius,o=n+t.radius;if(a<r||o<s)return!1;if(r<=i||s<=n)return!0;var h=r-i,l=s-n;return h*h+l*l<=t.radius*t.radius}},function(t,e,i){var n=i(4),r=i(208);t.exports=function(t,e,i){var s,a,o,h,l,u,c,d,f,p,g,m,y,v,_,x,w;return void 0===i&&(i=[]),r(t,e)&&(s=t.x1,a=t.y1,o=t.x2,h=t.y2,0==(m=(g=2*((u=o-s)*(d=s-e.x)+(c=h-a)*(f=a-e.y)))*g-4*(p=u*u+c*c)*(d*d+f*f-(l=e.radius)*l))?(v=s+(y=-g/(2*p))*u,_=a+y*c,0<=y&&y<=1&&i.push(new n(v,_))):0<m&&(v=s+(x=(-g-Math.sqrt(m))/(2*p))*u,_=a+x*c,0<=x&&x<=1&&i.push(new n(v,_)),v=s+(w=(-g+Math.sqrt(m))/(2*p))*u,_=a+w*c,0<=w&&w<=1&&i.push(new n(v,_)))),i}},function(t,e,i){var n=i(55),r=new(i(4));t.exports=function(t,e,i){if(void 0===i&&(i=r),n(e,t.x1,t.y1))return i.x=t.x1,i.y=t.y1,!0;if(n(e,t.x2,t.y2))return i.x=t.x2,i.y=t.y2,!0;var s,a=t.x2-t.x1,o=t.y2-t.y1,h=e.x-t.x1,l=e.y-t.y1,u=a*a+o*o,c=a,d=o;return 0<u&&(c*=s=(h*a+l*o)/u,d*=s),i.x=t.x1+c,i.y=t.y1+d,c*c+d*d<=u&&0<=c*a+d*o&&n(e,i.x,i.y)}},function(t,e,i){var n=i(4),r=i(84),s=i(432);t.exports=function(t,e,i){if(void 0===i&&(i=[]),s(t,e))for(var a=e.getLineA(),o=e.getLineB(),h=e.getLineC(),l=e.getLineD(),u=[new n,new n,new n,new n],c=[r(a,t,u[0]),r(o,t,u[1]),r(h,t,u[2]),r(l,t,u[3])],d=0;d<4;d++)c[d]&&i.push(u[d]);return i}},function(t,e){t.exports=function(t,e,i,n){void 0===i&&(i=!1),void 0===n&&(n=[]);for(var r,s,a,o,h,l,u=t.x3-t.x1,c=t.y3-t.y1,d=t.x2-t.x1,f=t.y2-t.y1,p=u*u+c*c,g=u*d+c*f,m=d*d+f*f,y=p*m-g*g,v=0==y?0:1/y,_=t.x1,x=t.y1,w=0;w<e.length&&(s=(p*(l=d*(a=e[w].x-_)+f*(o=e[w].y-x))-g*(h=u*a+c*o))*v,!(0<=(r=(m*h-g*l)*v)&&0<=s&&r+s<1&&(n.push({x:e[w].x,y:e[w].y}),i)));w++);return n}},function(t,e){t.exports=function(t,e,i,n){var r=Math.cos(n),s=Math.sin(n),a=t.x1-e,o=t.y1-i;return t.x1=a*r-o*s+e,t.y1=a*s+o*r+i,a=t.x2-e,o=t.y2-i,t.x2=a*r-o*s+e,t.y2=a*s+o*r+i,t}},function(t,e){t.exports=function(t){return 0===t.height?NaN:t.width/t.height}},function(t,e){t.exports=function(t,e,i,n){var r=Math.cos(n),s=Math.sin(n),a=t.x1-e,o=t.y1-i;return t.x1=a*r-o*s+e,t.y1=a*s+o*r+i,a=t.x2-e,o=t.y2-i,t.x2=a*r-o*s+e,t.y2=a*s+o*r+i,a=t.x3-e,o=t.y3-i,t.x3=a*r-o*s+e,t.y3=a*s+o*r+i,t}},function(t,e,i){t.exports={BUTTON_DOWN:i(1203),BUTTON_UP:i(1204),CONNECTED:i(1205),DISCONNECTED:i(1206),GAMEPAD_BUTTON_DOWN:i(1207),GAMEPAD_BUTTON_UP:i(1208)}},function(t,e,i){var n=i(18),r=i(139);t.exports=function(t,e){var i=void 0===t?r():n({},t);if(e)for(var s in e)void 0!==e[s]&&(i[s]=e[s]);return i}},function(t,e,i){var n=i(0),r=i(17),s=i(21),a=i(8),o=i(2),h=i(7),l=i(364),u=new n({Extends:s,initialize:function(t,e,i,n){var r,a="xml";h(e)&&(e=o(r=e,"key"),i=o(r,"url"),n=o(r,"xhrSettings"),a=o(r,"extension",a));var l={type:"xml",cache:t.cacheManager.xml,extension:a,responseType:"text",key:e,url:i,xhrSettings:n};s.call(this,t,l)},onProcess:function(){this.state=r.FILE_PROCESSING,this.data=l(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});a.register("xml",(function(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new u(this,t[n]));else this.addFile(new u(this,t,e,i));return this})),t.exports=u},function(t,e,i){t.exports={Acceleration:i(1263),Angular:i(1264),Bounce:i(1265),Debug:i(1266),Drag:i(1267),Enable:i(1268),Friction:i(1269),Gravity:i(1270),Immovable:i(1271),Mass:i(1272),Size:i(1273),Velocity:i(1274)}},function(t,e,i){t.exports={COLLIDE:i(1276),OVERLAP:i(1277),PAUSE:i(1278),RESUME:i(1279),TILE_COLLIDE:i(1280),TILE_OVERLAP:i(1281),WORLD_BOUNDS:i(1282),WORLD_STEP:i(1283)}},,function(t,e,i){var n=i(142);t.exports=function(t,e,i){var r=n(t,e,!0,i),s=n(t,e-1,!0,i),a=n(t,e+1,!0,i),o=n(t-1,e,!0,i),h=n(t+1,e,!0,i),l=r&&r.collides;return l&&(r.faceTop=!0,r.faceBottom=!0,r.faceLeft=!0,r.faceRight=!0),s&&s.collides&&(l&&(r.faceTop=!1),s.faceBottom=!l),a&&a.collides&&(l&&(r.faceBottom=!1),a.faceTop=!l),o&&o.collides&&(l&&(r.faceLeft=!1),o.faceRight=!l),h&&h.collides&&(l&&(r.faceRight=!1),h.faceLeft=!l),r&&!r.collides&&r.resetFaces(),r}},function(t,e,i){var n=i(74),r=i(101),s=i(220),a=i(73);t.exports=function(t,e,i,o,h){if(!r(e,i,h))return null;void 0===o&&(o=!0);var l,u=h.data[i][e],c=u&&u.collides;t instanceof n?(null===h.data[i][e]&&(h.data[i][e]=new n(h,t.index,e,i,t.width,t.height)),h.data[i][e].copy(t)):(l=t,null===h.data[i][e]?h.data[i][e]=new n(h,l,e,i,h.tileWidth,h.tileHeight):h.data[i][e].index=l);var d=h.data[i][e],f=-1!==h.collideIndexes.indexOf(d.index);return a(d,f),o&&c!==d.collides&&s(e,i,h),d}},function(t,e){t.exports=function(t,e,i){var n=i.collideIndexes.indexOf(t);e&&-1===n?i.collideIndexes.push(t):e||-1===n||i.collideIndexes.splice(n,1)}},function(t,e,i){var n=i(32),r=i(102),s=i(103),a=i(74);t.exports=function(t,e,i,o,h){for(var l=new r({tileWidth:i,tileHeight:o}),u=new s({name:t,tileWidth:i,tileHeight:o,format:n.ARRAY_2D,layers:[l]}),c=[],d=e.length,f=0,p=0;p<e.length;p++){c[p]=[];for(var g=e[p],m=0;m<g.length;m++){var y=parseInt(g[m],10);isNaN(y)||-1===y?c[p][m]=h?null:new a(l,-1,m,p,i,o):c[p][m]=new a(l,y,m,p,i,o)}0===f&&(f=g.length)}return u.width=l.width=f,u.height=l.height=d,u.widthInPixels=l.widthInPixels=f*i,u.heightInPixels=l.heightInPixels=d*o,l.data=c,u}},function(t,e){t.exports=function(t){var e=Boolean(2147483648&t),i=Boolean(1073741824&t),n=Boolean(536870912&t);t&=536870911;var r=0,s=!1;return e&&i&&n?(r=Math.PI/2,s=!0):e&&i&&!n?(r=Math.PI,s=!1):e&&!i&&n?(r=Math.PI/2,s=!1):!e||i||n?!e&&i&&n?(r=3*Math.PI/2,s=!1):e||!i||n?e||i||!n?e||i||n||(r=0,s=!1):(r=3*Math.PI/2,s=!0):(r=Math.PI,s=!0):s=!(r=0),{gid:t,flippedHorizontal:e,flippedVertical:i,flippedAntiDiagonal:n,rotation:r,flipped:s}}},function(t,e,i){var n=i(2);t.exports=function(t,e,i){if(!e)return{i:0,layers:t.layers,name:"",opacity:1,visible:!0,x:0,y:0};var r=e.x+n(e,"startx",0)*t.tilewidth+n(e,"offsetx",0),s=e.y+n(e,"starty",0)*t.tileheight+n(e,"offsety",0);return{i:0,layers:e.layers,name:i.name+e.name+"/",opacity:i.opacity*e.opacity,visible:i.visible&&e.visible,x:i.x+r,y:i.y+s}}},function(t,e,i){function n(t){return{x:t.x,y:t.y}}var r=i(486),s=i(224),a=["id","name","type","rotation","properties","visible","x","y","width","height"];t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var o,h=r(t,a);return h.x+=e,h.y+=i,t.gid?(o=s(t.gid),h.gid=o.gid,h.flippedHorizontal=o.flippedHorizontal,h.flippedVertical=o.flippedVertical,h.flippedAntiDiagonal=o.flippedAntiDiagonal):t.polyline?h.polyline=t.polyline.map(n):t.polygon?h.polygon=t.polygon.map(n):t.ellipse?h.ellipse=t.ellipse:t.text?h.text=t.text:t.point?h.point=!0:h.rectangle=!0,h}},function(t,e,i){var n=i(32),r=i(103),s=i(478),a=i(494);t.exports=function(t,e,i,o,h,l,u,c){void 0===i&&(i=32),void 0===o&&(o=32),void 0===h&&(h=10),void 0===l&&(l=10),void 0===c&&(c=!1);var d,f=null;return Array.isArray(u)?f=s(void 0!==e?e:"map",n.ARRAY_2D,u,i,o,c):void 0!==e&&((d=t.cache.tilemap.get(e))?f=s(e,d.format,d.data,i,o,c):console.warn("No map data found for key "+e)),null===f&&(f=new r({tileWidth:i,tileHeight:o,width:h,height:l})),new a(t,f)}},function(t,e,i){var n=i(6);t.exports=function(t){var e=n(t,"targets",null);return null===e||("function"==typeof e&&(e=e.call()),Array.isArray(e)||(e=[e])),e}},function(t,e){function i(t){return!!t.getActive&&"function"==typeof t.getActive}function n(t){return!!t.getStart&&"function"==typeof t.getStart}function r(t){return!!t.getEnd&&"function"==typeof t.getEnd}var s=function(t,e){var a,o,h,l,u,c,d,f=function(t,e,i){return i},p=function(t,e,i){return i},g=null,m=typeof e;if("number"==m)f=function(){return e};else if("string"==m){var y=e[0],v=parseFloat(e.substr(2));switch(y){case"+":f=function(t,e,i){return i+v};break;case"-":f=function(t,e,i){return i-v};break;case"*":f=function(t,e,i){return i*v};break;case"/":f=function(t,e,i){return i/v};break;default:f=function(){return parseFloat(e)}}}else"function"==m?f=e:"object"==m&&(n(d=e)||r(d)||i(d)?(i(e)&&(g=e.getActive),r(e)&&(f=e.getEnd),n(e)&&(p=e.getStart)):e.hasOwnProperty("value")?c=s(t,e.value):(a=e.hasOwnProperty("to"),o=e.hasOwnProperty("from"),h=e.hasOwnProperty("start"),a&&(o||h)&&(c=s(t,e.to),h&&(l=s(t,e.start),c.getActive=l.getEnd),o&&(u=s(t,e.from),c.getStart=u.getEnd))));return c||{getActive:g,getEnd:f,getStart:p}};t.exports=s},function(t,e){t.exports={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1}},function(t,e,i){var n=i(0),r=i(10),s=i(232),a=i(16),o=i(5),h=i(89),l=i(13),u=new n({Extends:r,initialize:function(t,e,i){r.call(this),this.parent=t,this.parentIsTimeline=t.hasOwnProperty("isTimeline"),this.data=e,this.totalData=e.length,this.targets=i,this.totalTargets=i.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=h.PENDING_ADD,this._pausedState=h.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(t){return void 0===t&&(t=0),this.data[t].current},setTimeScale:function(t){return this.timeScale=t,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===h.ACTIVE},isPaused:function(){return this.state===h.PAUSED},hasTarget:function(t){return-1!==this.targets.indexOf(t)},updateTo:function(t,e,i){void 0===i&&(i=!1);for(var n=0;n<this.totalData;n++){var r=this.data[n];r.key===t&&(r.end=e,i&&(r.start=r.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===h.ACTIVE?this.seek(0):this.state===h.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===h.PENDING_ADD?this:this.play()},calcDuration:function(){for(var t=0,e=l.MAX_SAFE_INTEGER,i=this.data,n=0;n<this.totalData;n++){var r=i[n];r.t1=r.duration+r.hold,r.yoyo&&(r.t1+=r.duration),r.t2=r.t1+r.repeatDelay,r.totalDuration=r.delay+r.t1,-1===r.repeat?r.totalDuration+=999999999999*r.t2:0<r.repeat&&(r.totalDuration+=r.t2*r.repeat),r.totalDuration>t&&(t=r.totalDuration),r.delay<e&&(e=r.delay)}this.duration=Math.max(t,.001),this.loopCounter=-1===this.loop?999999999999:this.loop,0<this.loopCounter?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=e},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=h.PENDING_ADD,this._pausedState=h.INIT,!1;for(var t=this.data,e=this.totalTargets,i=0;i<this.totalData;i++){var n=t[i],r=n.target,s=n.gen,a=n.key,o=n.index;n.delay=s.delay(r,a,0,o,e,this),n.duration=Math.max(s.duration(r,a,0,o,e,this),.001),n.hold=s.hold(r,a,0,o,e,this),n.repeat=s.repeat(r,a,0,o,e,this),n.repeatDelay=s.repeatDelay(r,a,0,o,e,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=h.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(s.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){0<this.loopCounter?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),0<this.loopDelay?(this.countdown=this.loopDelay,this.state=h.LOOP_DELAY):(this.state=h.ACTIVE,this.dispatchTweenEvent(s.TWEEN_LOOP,this.callbacks.onLoop))):0<this.completeDelay?(this.state=h.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=h.PENDING_REMOVE,this.dispatchTweenEvent(s.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===h.PAUSED||(this.paused=!0,this._pausedState=this.state,this.state=h.PAUSED),this},play:function(t){void 0===t&&(t=!1);var e=this.state;return e!==h.INIT||this.parentIsTimeline?e===h.ACTIVE||e===h.PENDING_ADD&&this._pausedState===h.PENDING_ADD||(this.parentIsTimeline||e!==h.PENDING_REMOVE&&e!==h.REMOVED?this.parentIsTimeline?(this.resetTweenData(t),0===this.calculatedOffset?this.state=h.ACTIVE:(this.countdown=this.calculatedOffset,this.state=h.OFFSET_DELAY)):(this.paused?this.paused=!1:(this.resetTweenData(t),this.state=h.ACTIVE),this.makeActive()):(this.seek(0),this.parent.makeActive(this))):(this.resetTweenData(!1),this.state=h.ACTIVE),this},resetTweenData:function(t){for(var e=this.data,i=this.totalData,n=this.totalTargets,r=0;r<i;r++){var s=e[r],a=s.target,o=s.key,l=s.index;s.progress=0,s.elapsed=0,s.repeatCounter=-1===s.repeat?999999999999:s.repeat,t?(s.start=s.getStartValue(a,o,s.start,l,n,this),s.end=s.getEndValue(a,o,s.end,l,n,this),s.current=s.start,s.state=h.PLAYING_FORWARD):s.state=h.PENDING_RENDER,0<s.delay&&(s.elapsed=s.delay,s.state=h.DELAY),s.getActiveValue&&(a[o]=s.getActiveValue(s.target,s.key,s.start))}},resume:function(){return this.state===h.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(t,e){if(void 0===e&&(e=16.6),36e5<=this.totalDuration)return console.warn("Tween.seek duration too long"),this;this.state===h.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var i=this.data,n=this.totalTargets,r=0;r<this.totalData;r++){var s=i[r],a=s.target,o=s.gen,l=s.key,u=s.index;s.progress=0,s.elapsed=0,s.repeatCounter=-1===s.repeat?999999999999:s.repeat,s.delay=o.delay(a,l,0,u,n,this),s.duration=Math.max(o.duration(a,l,0,u,n,this),.001),s.hold=o.hold(a,l,0,u,n,this),s.repeat=o.repeat(a,l,0,u,n,this),s.repeatDelay=o.repeatDelay(a,l,0,u,n,this),s.current=s.start,s.state=h.PLAYING_FORWARD,this.updateTweenData(this,s,0,u,n),0<s.delay&&(s.elapsed=s.delay,s.state=h.DELAY)}this.calcDuration();var c=!1;for(this.state===h.PAUSED&&(c=!0,this.state=h.ACTIVE),this.isSeeking=!0;this.update(0,e),this.totalProgress<t;);return this.isSeeking=!1,c&&(this.state=h.PAUSED),this},setCallback:function(t,e,i,n){return this.callbacks[t]={func:e,scope:n,params:i},this},complete:function(t){return void 0===t&&(t=0),t?(this.state=h.COMPLETE_DELAY,this.countdown=t):(this.state=h.PENDING_REMOVE,this.dispatchTweenEvent(s.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(t){return this.state===h.ACTIVE&&void 0!==t&&this.seek(t),this.state!==h.REMOVED&&(this.state!==h.PAUSED&&this.state!==h.PENDING_ADD||(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(s.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=h.PENDING_REMOVE),this},update:function(t,e){if(this.state===h.PAUSED)return!1;switch(this.useFrames&&(e=+this.parent.timeScale),e*=this.timeScale,this.elapsed+=e,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=e,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case h.ACTIVE:this.hasStarted||this.isSeeking||(this.startDelay-=e,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(s.TWEEN_START,this.callbacks.onStart)));for(var i=!1,n=0;n<this.totalData;n++){var r=this.data[n];this.updateTweenData(this,r,e)&&(i=!0)}i||this.nextState();break;case h.LOOP_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=h.ACTIVE,this.dispatchTweenEvent(s.TWEEN_LOOP,this.callbacks.onLoop));break;case h.OFFSET_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=h.ACTIVE);break;case h.COMPLETE_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=h.PENDING_REMOVE,this.dispatchTweenEvent(s.TWEEN_COMPLETE,this.callbacks.onComplete))}return this.state===h.PENDING_REMOVE},dispatchTweenDataEvent:function(t,e,i){this.isSeeking||(this.emit(t,this,i.key,i.target,i.current,i.previous),e&&(e.params[1]=i.target,e.func.apply(e.scope,e.params)))},dispatchTweenEvent:function(t,e){this.isSeeking||(this.emit(t,this,this.targets),e&&(e.params[1]=this.targets,e.func.apply(e.scope,e.params)))},setStateFromEnd:function(t,e,i){return e.yoyo?(e.elapsed=i,e.progress=i/e.duration,e.flipX&&e.target.toggleFlipX(),e.flipY&&e.target.toggleFlipY(),this.dispatchTweenDataEvent(s.TWEEN_YOYO,t.callbacks.onYoyo,e),e.start=e.getStartValue(e.target,e.key,e.start,e.index,t.totalTargets,t),h.PLAYING_BACKWARD):0<e.repeatCounter?(e.repeatCounter--,e.elapsed=i,e.progress=i/e.duration,e.flipX&&e.target.toggleFlipX(),e.flipY&&e.target.toggleFlipY(),e.start=e.getStartValue(e.target,e.key,e.start,e.index,t.totalTargets,t),e.end=e.getEndValue(e.target,e.key,e.start,e.index,t.totalTargets,t),0<e.repeatDelay?(e.elapsed=e.repeatDelay-i,e.current=e.start,e.target[e.key]=e.current,h.REPEAT_DELAY):(this.dispatchTweenDataEvent(s.TWEEN_REPEAT,t.callbacks.onRepeat,e),h.PLAYING_FORWARD)):h.COMPLETE},setStateFromStart:function(t,e,i){return 0<e.repeatCounter?(e.repeatCounter--,e.elapsed=i,e.progress=i/e.duration,e.flipX&&e.target.toggleFlipX(),e.flipY&&e.target.toggleFlipY(),e.end=e.getEndValue(e.target,e.key,e.start,e.index,t.totalTargets,t),0<e.repeatDelay?(e.elapsed=e.repeatDelay-i,e.current=e.start,e.target[e.key]=e.current,h.REPEAT_DELAY):(this.dispatchTweenDataEvent(s.TWEEN_REPEAT,t.callbacks.onRepeat,e),h.PLAYING_FORWARD)):h.COMPLETE},updateTweenData:function(t,e,i){var n=e.target;switch(e.state){case h.PLAYING_FORWARD:case h.PLAYING_BACKWARD:if(!n){e.state=h.COMPLETE;break}var r=e.elapsed,a=e.duration,o=0;a<(r+=i)&&(o=r-a,r=a);var l,u=e.state===h.PLAYING_FORWARD,c=r/a;e.elapsed=r,e.progress=c,e.previous=e.current,1==c?u?(e.current=e.end,n[e.key]=e.end,0<e.hold?(e.elapsed=e.hold-o,e.state=h.HOLD_DELAY):e.state=this.setStateFromEnd(t,e,o)):(e.current=e.start,n[e.key]=e.start,e.state=this.setStateFromStart(t,e,o)):(l=u?e.ease(c):e.ease(1-c),e.current=e.start+(e.end-e.start)*l,n[e.key]=e.current),this.dispatchTweenDataEvent(s.TWEEN_UPDATE,t.callbacks.onUpdate,e);break;case h.DELAY:e.elapsed-=i,e.elapsed<=0&&(e.elapsed=Math.abs(e.elapsed),e.state=h.PENDING_RENDER);break;case h.REPEAT_DELAY:e.elapsed-=i,e.elapsed<=0&&(e.elapsed=Math.abs(e.elapsed),e.state=h.PLAYING_FORWARD,this.dispatchTweenDataEvent(s.TWEEN_REPEAT,t.callbacks.onRepeat,e));break;case h.HOLD_DELAY:e.elapsed-=i,e.elapsed<=0&&(e.state=this.setStateFromEnd(t,e,Math.abs(e.elapsed)));break;case h.PENDING_RENDER:n?(e.start=e.getStartValue(n,e.key,n[e.key],e.index,t.totalTargets,t),e.end=e.getEndValue(n,e.key,e.start,e.index,t.totalTargets,t),e.current=e.start,n[e.key]=e.start,e.state=h.PLAYING_FORWARD):e.state=h.COMPLETE}return e.state!==h.COMPLETE}});u.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],o.register("tween",(function(t){return this.scene.sys.tweens.add(t)})),a.register("tween",(function(t){return this.scene.sys.tweens.create(t)})),t.exports=u},function(t,e,i){t.exports={TIMELINE_COMPLETE:i(1358),TIMELINE_LOOP:i(1359),TIMELINE_PAUSE:i(1360),TIMELINE_RESUME:i(1361),TIMELINE_START:i(1362),TIMELINE_UPDATE:i(1363),TWEEN_ACTIVE:i(1364),TWEEN_COMPLETE:i(1365),TWEEN_LOOP:i(1366),TWEEN_REPEAT:i(1367),TWEEN_START:i(1368),TWEEN_STOP:i(1369),TWEEN_UPDATE:i(1370),TWEEN_YOYO:i(1371)}},function(t,e){t.exports=function(t,e,i,n,r,s,a,o,h,l,u,c,d,f,p){return{target:t,index:e,key:i,getActiveValue:s,getEndValue:n,getStartValue:r,ease:a,duration:0,totalDuration:0,delay:0,yoyo:l,hold:0,repeat:0,repeatDelay:0,flipX:f,flipY:p,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:o,duration:h,hold:u,repeat:c,repeatDelay:d},state:0}}},function(t,e){t.exports={DEFAULT:0,LINEAR:0,NEAREST:1}},function(t,e,i){var n=i(58);t.exports=function(t){return n(t,-Math.PI,Math.PI)}},function(t,e,i){var n=i(58);t.exports=function(t){return n(t,-180,180)}},function(t,e,i){var n=i(0),r=i(66),s=i(2),a=i(238),o=i(340),h=i(341),l=i(29),u=i(9),c=i(147),d=new n({Extends:c,Mixins:[a],initialize:function(t){var e=t.renderer.config;c.call(this,{game:t.game,renderer:t.renderer,gl:t.renderer.gl,topology:s(t,"topology",t.renderer.gl.TRIANGLES),vertShader:s(t,"vertShader",h),fragShader:s(t,"fragShader",o),vertexCapacity:s(t,"vertexCapacity",6*e.batchSize),vertexSize:s(t,"vertexSize",5*Float32Array.BYTES_PER_ELEMENT+4*Uint8Array.BYTES_PER_ELEMENT),attributes:[{name:"inPosition",size:2,type:t.renderer.gl.FLOAT,normalized:!1,offset:0},{name:"inTexCoord",size:2,type:t.renderer.gl.FLOAT,normalized:!1,offset:2*Float32Array.BYTES_PER_ELEMENT},{name:"inTintEffect",size:1,type:t.renderer.gl.FLOAT,normalized:!1,offset:4*Float32Array.BYTES_PER_ELEMENT},{name:"inTint",size:4,type:t.renderer.gl.UNSIGNED_BYTE,normalized:!0,offset:5*Float32Array.BYTES_PER_ELEMENT}]}),this.vertexViewF32=new Float32Array(this.vertexData),this.vertexViewU32=new Uint32Array(this.vertexData),this.maxQuads=e.batchSize,this.batches=[],this._tempMatrix1=new l,this._tempMatrix2=new l,this._tempMatrix3=new l,this._tempMatrix4=new l,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.tintEffect=2,this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[],this.mvpInit()},onBind:function(){return c.prototype.onBind.call(this),this.mvpUpdate(),this},resize:function(t,e,i){return c.prototype.resize.call(this,t,e,i),this.projOrtho(0,this.width,this.height,0,-1e3,1e3),this},setTexture2D:function(t,e){return void 0===t&&(t=this.renderer.blankTexture.glTexture),void 0===e&&(e=0),this.requireTextureBatch(t,e)&&this.pushBatch(t,e),this},requireTextureBatch:function(t,e){var i=this.batches,n=i.length;return!(0<n&&(0<e?i[n-1].textures[e-1]:i[n-1].texture)===t)},pushBatch:function(t,e){var i;0===e?this.batches.push({first:this.vertexCount,texture:t,textures:[]}):((i=[])[e-1]=t,this.batches.push({first:this.vertexCount,texture:null,textures:i}))},flush:function(){if(this.flushLocked)return this;this.flushLocked=!0;var t,e,i,n=this.gl,r=this.vertexCount,s=this.topology,a=this.vertexSize,o=this.renderer,h=this.batches,l=h.length,u=0,c=null;if(0===l||0===r)return this.flushLocked=!1,this;n.bufferSubData(n.ARRAY_BUFFER,0,this.bytes.subarray(0,r*a));for(var d=0;d<l-1;d++){if(c=h[d],t=h[d+1],0<c.textures.length){for(e=0;e<c.textures.length;++e)(i=c.textures[e])&&o.setTexture2D(i,1+e,!1);n.activeTexture(n.TEXTURE0)}u=t.first-c.first,null===c.texture||u<=0||(o.setTexture2D(c.texture,0,!1),n.drawArrays(s,c.first,u))}if(0<(c=h[l-1]).textures.length){for(e=0;e<c.textures.length;++e)(i=c.textures[e])&&o.setTexture2D(i,1+e,!1);n.activeTexture(n.TEXTURE0)}return u=r-c.first,c.texture&&0<u&&(o.setTexture2D(c.texture,0,!1),n.drawArrays(s,c.first,u)),this.vertexCount=0,h.length=0,this.flushLocked=!1,this},batchSprite:function(t,e,i){this.renderer.setPipeline(this);var n,r=this._tempMatrix1,s=this._tempMatrix2,a=this._tempMatrix3,o=t.frame,h=o.glTexture,l=o.u0,c=o.v0,d=o.u1,f=o.v1,p=o.x,g=o.y,m=o.cutWidth,y=o.cutHeight,v=o.customPivot,_=t.displayOriginX,x=t.displayOriginY,w=-_+p,b=-x+g;t.isCropped&&((n=t._crop).flipX===t.flipX&&n.flipY===t.flipY||o.updateCropUVs(n,t.flipX,t.flipY),l=n.u0,c=n.v0,d=n.u1,f=n.v1,m=n.width,y=n.height,w=-_+n.x,b=-x+n.y);var T=1,E=1;t.flipX&&(v||(w+=-o.realWidth+2*_),T=-1),(t.flipY||o.source.isGLTexture&&!h.flipY)&&(v||(b+=-o.realHeight+2*x),E=-1),s.applyITRS(t.x,t.y,t.rotation,t.scaleX*T,t.scaleY*E),r.copyFrom(e.matrix),i?(r.multiplyWithOffset(i,-e.scrollX*t.scrollFactorX,-e.scrollY*t.scrollFactorY),s.e=t.x,s.f=t.y):(s.e-=e.scrollX*t.scrollFactorX,s.f-=e.scrollY*t.scrollFactorY),r.multiply(s,a);var A=w+m,S=b+y,C=a.getX(w,b),O=a.getY(w,b),P=a.getX(w,S),R=a.getY(w,S),M=a.getX(A,S),L=a.getY(A,S),I=a.getX(A,b),k=a.getY(A,b),D=u.getTintAppendFloatAlpha(t._tintTL,e.alpha*t._alphaTL),F=u.getTintAppendFloatAlpha(t._tintTR,e.alpha*t._alphaTR),B=u.getTintAppendFloatAlpha(t._tintBL,e.alpha*t._alphaBL),N=u.getTintAppendFloatAlpha(t._tintBR,e.alpha*t._alphaBR);e.roundPixels&&(C=Math.round(C),O=Math.round(O),P=Math.round(P),R=Math.round(R),M=Math.round(M),L=Math.round(L),I=Math.round(I),k=Math.round(k)),this.setTexture2D(h,0);var G=t._isTinted&&t.tintFill;this.batchQuad(C,O,P,R,M,L,I,k,l,c,d,f,D,F,B,N,G,h,0)},batchQuad:function(t,e,i,n,r,s,a,o,h,l,u,c,d,f,p,g,m,y,v){var _=!1;this.vertexCount+6>this.vertexCapacity&&(this.flush(),_=!0,this.setTexture2D(y,v));var x=this.vertexViewF32,w=this.vertexViewU32,b=this.vertexCount*this.vertexComponentCount-1;return x[++b]=t,x[++b]=e,x[++b]=h,x[++b]=l,x[++b]=m,w[++b]=d,x[++b]=i,x[++b]=n,x[++b]=h,x[++b]=c,x[++b]=m,w[++b]=p,x[++b]=r,x[++b]=s,x[++b]=u,x[++b]=c,x[++b]=m,w[++b]=g,x[++b]=t,x[++b]=e,x[++b]=h,x[++b]=l,x[++b]=m,w[++b]=d,x[++b]=r,x[++b]=s,x[++b]=u,x[++b]=c,x[++b]=m,w[++b]=g,x[++b]=a,x[++b]=o,x[++b]=u,x[++b]=l,x[++b]=m,w[++b]=f,this.vertexCount+=6,_},batchTri:function(t,e,i,n,r,s,a,o,h,l,u,c,d,f,p,g){var m=!1;this.vertexCount+3>this.vertexCapacity&&(this.flush(),this.setTexture2D(p,g),m=!0);var y=this.vertexViewF32,v=this.vertexViewU32,_=this.vertexCount*this.vertexComponentCount-1;return y[++_]=t,y[++_]=e,y[++_]=a,y[++_]=o,y[++_]=f,v[++_]=u,y[++_]=i,y[++_]=n,y[++_]=a,y[++_]=l,y[++_]=f,v[++_]=c,y[++_]=r,y[++_]=s,y[++_]=h,y[++_]=l,y[++_]=f,v[++_]=d,this.vertexCount+=3,m},batchTexture:function(t,e,i,n,r,s,a,o,h,l,u,c,d,f,p,g,m,y,v,_,x,w,b,T,E,A,S,C,O,P,R){this.renderer.setPipeline(this,t);var M,L,I,k=this._tempMatrix1,D=this._tempMatrix2,F=this._tempMatrix3,B=y/i+S,N=v/n+C,G=(y+_)/i+S,Y=(v+x)/n+C,z=a,U=o,X=-g,V=-m;t.isCropped&&(z=(M=t._crop).width,U=M.height,a=M.width,o=M.height,L=y=M.x,I=v=M.y,c&&(L=_-M.x-M.width),d&&!e.isRenderTexture&&(I=x-M.y-M.height),B=L/i+S,N=I/n+C,G=(L+M.width)/i+S,Y=(I+M.height)/n+C,X=-g+y,V=-m+v),c&&(z*=-1,X+=a),(d^=!R&&e.isRenderTexture?1:0)&&(U*=-1,V+=o);var H=X+z,j=V+U;D.applyITRS(r,s,u,h,l),k.copyFrom(O.matrix),P?(k.multiplyWithOffset(P,-O.scrollX*f,-O.scrollY*p),D.e=r,D.f=s):(D.e-=O.scrollX*f,D.f-=O.scrollY*p),k.multiply(D,F);var W=F.getX(X,V),K=F.getY(X,V),q=F.getX(X,j),$=F.getY(X,j),J=F.getX(H,j),Z=F.getY(H,j),Q=F.getX(H,V),tt=F.getY(H,V);O.roundPixels&&(W=Math.round(W),K=Math.round(K),q=Math.round(q),$=Math.round($),J=Math.round(J),Z=Math.round(Z),Q=Math.round(Q),tt=Math.round(tt)),this.setTexture2D(e,0),this.batchQuad(W,K,q,$,J,Z,Q,tt,B,N,G,Y,w,b,T,E,A,e,0)},batchTextureFrame:function(t,e,i,n,r,s,a){this.renderer.setPipeline(this);var o=this._tempMatrix1.copyFrom(s),h=this._tempMatrix2,l=e+t.width,c=i+t.height;a?o.multiply(a,h):h=o;var d=h.getX(e,i),f=h.getY(e,i),p=h.getX(e,c),g=h.getY(e,c),m=h.getX(l,c),y=h.getY(l,c),v=h.getX(l,i),_=h.getY(l,i);this.setTexture2D(t.glTexture,0),n=u.getTintAppendFloatAlpha(n,r),this.batchQuad(d,f,p,g,m,y,v,_,t.u0,t.v0,t.u1,t.v1,n,n,n,n,0,t.glTexture,0)},drawFillRect:function(t,e,i,n,r,s){var a=t+i,o=e+n;this.setTexture2D();var h=u.getTintAppendFloatAlphaAndSwap(r,s);this.batchQuad(t,e,t,o,a,o,a,e,0,0,1,1,h,h,h,h,2)},batchFillRect:function(t,e,i,n,r,s){this.renderer.setPipeline(this);var a=this._tempMatrix3;s&&s.multiply(r,a);var o=t+i,h=e+n,l=a.getX(t,e),u=a.getY(t,e),c=a.getX(t,h),d=a.getY(t,h),f=a.getX(o,h),p=a.getY(o,h),g=a.getX(o,e),m=a.getY(o,e),y=this.currentFrame,v=y.u0,_=y.v0,x=y.u1,w=y.v1;this.batchQuad(l,u,c,d,f,p,g,m,v,_,x,w,this.fillTint.TL,this.fillTint.TR,this.fillTint.BL,this.fillTint.BR,this.tintEffect)},batchFillTriangle:function(t,e,i,n,r,s,a,o){this.renderer.setPipeline(this);var h=this._tempMatrix3;o&&o.multiply(a,h);var l=h.getX(t,e),u=h.getY(t,e),c=h.getX(i,n),d=h.getY(i,n),f=h.getX(r,s),p=h.getY(r,s),g=this.currentFrame,m=g.u0,y=g.v0,v=g.u1,_=g.v1;this.batchTri(l,u,c,d,f,p,m,y,v,_,this.fillTint.TL,this.fillTint.TR,this.fillTint.BL,this.tintEffect)},batchStrokeTriangle:function(t,e,i,n,r,s,a,o,h){var l=this.tempTriangle;l[0].x=t,l[0].y=e,l[0].width=a,l[1].x=i,l[1].y=n,l[1].width=a,l[2].x=r,l[2].y=s,l[2].width=a,l[3].x=t,l[3].y=e,l[3].width=a,this.batchStrokePath(l,a,!1,o,h)},batchFillPath:function(t,e,i){this.renderer.setPipeline(this);var n=this._tempMatrix3;i&&i.multiply(e,n);for(var s,a,o=t.length,h=this.polygonCache,l=this.fillTint.TL,u=this.fillTint.TR,c=this.fillTint.BL,d=this.tintEffect,f=0;f<o;++f)a=t[f],h.push(a.x,a.y);o=(s=r(h)).length;for(var p=this.currentFrame,g=0;g<o;g+=3){var m=2*s[g+0],y=2*s[g+1],v=2*s[g+2],_=h[0+m],x=h[1+m],w=h[0+y],b=h[1+y],T=h[0+v],E=h[1+v],A=n.getX(_,x),S=n.getY(_,x),C=n.getX(w,b),O=n.getY(w,b),P=n.getX(T,E),R=n.getY(T,E),M=p.u0,L=p.v0,I=p.u1,k=p.v1;this.batchTri(A,S,C,O,P,R,M,L,I,k,l,u,c,d)}h.length=0},batchStrokePath:function(t,e,i,n,r){this.renderer.setPipeline(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var s=t.length-1,a=0;a<s;a++){var o=t[a],h=t[a+1];this.batchLine(o.x,o.y,h.x,h.y,o.width/2,h.width/2,e,a,!i&&a===s-1,n,r)}},batchLine:function(t,e,i,n,r,s,a,o,h,l,u){this.renderer.setPipeline(this);var c=this._tempMatrix3;u&&u.multiply(l,c);var d,f,p=i-t,g=n-e,m=Math.sqrt(p*p+g*g),y=r*(n-e)/m,v=r*(t-i)/m,_=s*(n-e)/m,x=s*(t-i)/m,w=i-_,b=n-x,T=t-y,E=e-v,A=i+_,S=n+x,C=t+y,O=e+v,P=c.getX(w,b),R=c.getY(w,b),M=c.getX(T,E),L=c.getY(T,E),I=c.getX(A,S),k=c.getY(A,S),D=c.getX(C,O),F=c.getY(C,O),B=this.strokeTint,N=this.tintEffect,G=B.TL,Y=B.TR,z=B.BL,U=B.BR,X=this.currentFrame,V=X.u0,H=X.v0,j=X.u1,W=X.v1;this.batchQuad(D,F,M,L,P,R,I,k,V,H,j,W,G,Y,z,U,N),a<=2||(d=this.prevQuad,f=this.firstQuad,0<o&&d[4]?this.batchQuad(D,F,M,L,d[0],d[1],d[2],d[3],V,H,j,W,G,Y,z,U,N):(f[0]=D,f[1]=F,f[2]=M,f[3]=L,f[4]=1),h&&f[4]?this.batchQuad(P,R,I,k,f[0],f[1],f[2],f[3],V,H,j,W,G,Y,z,U,N):(d[0]=P,d[1]=R,d[2]=I,d[3]=k,d[4]=1))}});t.exports=d},function(t,e){var i={modelMatrixDirty:!1,viewMatrixDirty:!1,projectionMatrixDirty:!1,modelMatrix:null,viewMatrix:null,projectionMatrix:null,mvpInit:function(){return this.modelMatrixDirty=!0,this.viewMatrixDirty=!0,this.projectionMatrixDirty=!0,this.modelMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},mvpUpdate:function(){var t=this.program;return this.modelMatrixDirty&&(this.renderer.setMatrix4(t,"uModelMatrix",!1,this.modelMatrix),this.modelMatrixDirty=!1),this.viewMatrixDirty&&(this.renderer.setMatrix4(t,"uViewMatrix",!1,this.viewMatrix),this.viewMatrixDirty=!1),this.projectionMatrixDirty&&(this.renderer.setMatrix4(t,"uProjectionMatrix",!1,this.projectionMatrix),this.projectionMatrixDirty=!1),this},modelIdentity:function(){var t=this.modelMatrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this.modelMatrixDirty=!0,this},modelScale:function(t,e,i){var n=this.modelMatrix;return n[0]=n[0]*t,n[1]=n[1]*t,n[2]=n[2]*t,n[3]=n[3]*t,n[4]=n[4]*e,n[5]=n[5]*e,n[6]=n[6]*e,n[7]=n[7]*e,n[8]=n[8]*i,n[9]=n[9]*i,n[10]=n[10]*i,n[11]=n[11]*i,this.modelMatrixDirty=!0,this},modelTranslate:function(t,e,i){var n=this.modelMatrix;return n[12]=n[0]*t+n[4]*e+n[8]*i+n[12],n[13]=n[1]*t+n[5]*e+n[9]*i+n[13],n[14]=n[2]*t+n[6]*e+n[10]*i+n[14],n[15]=n[3]*t+n[7]*e+n[11]*i+n[15],this.modelMatrixDirty=!0,this},modelRotateX:function(t){var e=this.modelMatrix,i=Math.sin(t),n=Math.cos(t),r=e[4],s=e[5],a=e[6],o=e[7],h=e[8],l=e[9],u=e[10],c=e[11];return e[4]=r*n+h*i,e[5]=s*n+l*i,e[6]=a*n+u*i,e[7]=o*n+c*i,e[8]=h*n-r*i,e[9]=l*n-s*i,e[10]=u*n-a*i,e[11]=c*n-o*i,this.modelMatrixDirty=!0,this},modelRotateY:function(t){var e=this.modelMatrix,i=Math.sin(t),n=Math.cos(t),r=e[0],s=e[1],a=e[2],o=e[3],h=e[8],l=e[9],u=e[10],c=e[11];return e[0]=r*n-h*i,e[1]=s*n-l*i,e[2]=a*n-u*i,e[3]=o*n-c*i,e[8]=r*i+h*n,e[9]=s*i+l*n,e[10]=a*i+u*n,e[11]=o*i+c*n,this.modelMatrixDirty=!0,this},modelRotateZ:function(t){var e=this.modelMatrix,i=Math.sin(t),n=Math.cos(t),r=e[0],s=e[1],a=e[2],o=e[3],h=e[4],l=e[5],u=e[6],c=e[7];return e[0]=r*n+h*i,e[1]=s*n+l*i,e[2]=a*n+u*i,e[3]=o*n+c*i,e[4]=h*n-r*i,e[5]=l*n-s*i,e[6]=u*n-a*i,e[7]=c*n-o*i,this.modelMatrixDirty=!0,this},viewIdentity:function(){var t=this.viewMatrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this.viewMatrixDirty=!0,this},viewScale:function(t,e,i){var n=this.viewMatrix;return n[0]=n[0]*t,n[1]=n[1]*t,n[2]=n[2]*t,n[3]=n[3]*t,n[4]=n[4]*e,n[5]=n[5]*e,n[6]=n[6]*e,n[7]=n[7]*e,n[8]=n[8]*i,n[9]=n[9]*i,n[10]=n[10]*i,n[11]=n[11]*i,this.viewMatrixDirty=!0,this},viewTranslate:function(t,e,i){var n=this.viewMatrix;return n[12]=n[0]*t+n[4]*e+n[8]*i+n[12],n[13]=n[1]*t+n[5]*e+n[9]*i+n[13],n[14]=n[2]*t+n[6]*e+n[10]*i+n[14],n[15]=n[3]*t+n[7]*e+n[11]*i+n[15],this.viewMatrixDirty=!0,this},viewRotateX:function(t){var e=this.viewMatrix,i=Math.sin(t),n=Math.cos(t),r=e[4],s=e[5],a=e[6],o=e[7],h=e[8],l=e[9],u=e[10],c=e[11];return e[4]=r*n+h*i,e[5]=s*n+l*i,e[6]=a*n+u*i,e[7]=o*n+c*i,e[8]=h*n-r*i,e[9]=l*n-s*i,e[10]=u*n-a*i,e[11]=c*n-o*i,this.viewMatrixDirty=!0,this},viewRotateY:function(t){var e=this.viewMatrix,i=Math.sin(t),n=Math.cos(t),r=e[0],s=e[1],a=e[2],o=e[3],h=e[8],l=e[9],u=e[10],c=e[11];return e[0]=r*n-h*i,e[1]=s*n-l*i,e[2]=a*n-u*i,e[3]=o*n-c*i,e[8]=r*i+h*n,e[9]=s*i+l*n,e[10]=a*i+u*n,e[11]=o*i+c*n,this.viewMatrixDirty=!0,this},viewRotateZ:function(t){var e=this.viewMatrix,i=Math.sin(t),n=Math.cos(t),r=e[0],s=e[1],a=e[2],o=e[3],h=e[4],l=e[5],u=e[6],c=e[7];return e[0]=r*n+h*i,e[1]=s*n+l*i,e[2]=a*n+u*i,e[3]=o*n+c*i,e[4]=h*n-r*i,e[5]=l*n-s*i,e[6]=u*n-a*i,e[7]=c*n-o*i,this.viewMatrixDirty=!0,this},viewLoad2D:function(t){var e=this.viewMatrix;return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=0,e[4]=t[2],e[5]=t[3],e[6]=0,e[7]=0,e[8]=t[4],e[9]=t[5],e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this.viewMatrixDirty=!0,this},viewLoad:function(t){var e=this.viewMatrix;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],this.viewMatrixDirty=!0,this},projIdentity:function(){var t=this.projectionMatrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this.projectionMatrixDirty=!0,this},projOrtho:function(t,e,i,n,r,s){var a=this.projectionMatrix,o=1/(t-e),h=1/(i-n),l=1/(r-s);return a[0]=-2*o,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*h,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*l,a[11]=0,a[12]=(t+e)*o,a[13]=(n+i)*h,a[14]=(s+r)*l,a[15]=1,this.projectionMatrixDirty=!0,this},projPersp:function(t,e,i,n){var r=this.projectionMatrix,s=1/Math.tan(t/2),a=1/(i-n);return r[0]=s/e,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=s,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=(n+i)*a,r[11]=-1,r[12]=0,r[13]=0,r[14]=2*n*i*a,r[15]=0,this.projectionMatrixDirty=!0,this}};t.exports=i},,,function(t,e,i){t.exports={AlignTo:i(527),Angle:i(528),Call:i(529),GetFirst:i(530),GetLast:i(531),GridAlign:i(532),IncAlpha:i(593),IncX:i(594),IncXY:i(595),IncY:i(596),PlaceOnCircle:i(597),PlaceOnEllipse:i(598),PlaceOnLine:i(599),PlaceOnRectangle:i(600),PlaceOnTriangle:i(601),PlayAnimation:i(602),PropertyValueInc:i(38),PropertyValueSet:i(25),RandomCircle:i(603),RandomEllipse:i(604),RandomLine:i(605),RandomRectangle:i(606),RandomTriangle:i(607),Rotate:i(608),RotateAround:i(609),RotateAroundDistance:i(610),ScaleX:i(611),ScaleXY:i(612),ScaleY:i(613),SetAlpha:i(614),SetBlendMode:i(615),SetDepth:i(616),SetHitArea:i(617),SetOrigin:i(618),SetRotation:i(619),SetScale:i(620),SetScaleX:i(621),SetScaleY:i(622),SetScrollFactor:i(623),SetScrollFactorX:i(624),SetScrollFactorY:i(625),SetTint:i(626),SetVisible:i(627),SetX:i(628),SetXY:i(629),SetY:i(630),ShiftPosition:i(631),Shuffle:i(632),SmootherStep:i(633),SmoothStep:i(634),Spread:i(635),ToggleVisible:i(636),WrapInRectangle:i(637)}},function(t,e,i){var n=i(105),r=[];r[n.BOTTOM_CENTER]=i(243),r[n.BOTTOM_LEFT]=i(244),r[n.BOTTOM_RIGHT]=i(245),r[n.LEFT_BOTTOM]=i(246),r[n.LEFT_CENTER]=i(247),r[n.LEFT_TOP]=i(248),r[n.RIGHT_BOTTOM]=i(249),r[n.RIGHT_CENTER]=i(250),r[n.RIGHT_TOP]=i(251),r[n.TOP_CENTER]=i(252),r[n.TOP_LEFT]=i(253),r[n.TOP_RIGHT]=i(254),t.exports=function(t,e,i,n,s){return r[i](t,e,n,s)}},function(t,e,i){var n=i(34),r=i(76),s=i(77),a=i(43);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),s(t,r(e)+i),a(t,n(e)+o),t}},function(t,e,i){var n=i(34),r=i(35),s=i(44),a=i(43);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),s(t,r(e)-i),a(t,n(e)+o),t}},function(t,e,i){var n=i(34),r=i(36),s=i(45),a=i(43);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),s(t,r(e)+i),a(t,n(e)+o),t}},function(t,e,i){var n=i(34),r=i(35),s=i(46),a=i(45);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,r(e)-i),s(t,n(e)+o),t}},function(t,e,i){var n=i(78),r=i(35),s=i(79),a=i(45);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,r(e)-i),s(t,n(e)+o),t}},function(t,e,i){var n=i(35),r=i(37),s=i(45),a=i(43);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),s(t,n(e)-i),a(t,r(e)-o),t}},function(t,e,i){var n=i(34),r=i(36),s=i(46),a=i(44);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,r(e)+i),s(t,n(e)+o),t}},function(t,e,i){var n=i(78),r=i(36),s=i(79),a=i(44);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,r(e)+i),s(t,n(e)+o),t}},function(t,e,i){var n=i(36),r=i(37),s=i(44),a=i(43);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),s(t,n(e)+i),a(t,r(e)-o),t}},function(t,e,i){var n=i(76),r=i(37),s=i(46),a=i(77);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,n(e)+i),s(t,r(e)-o),t}},function(t,e,i){var n=i(35),r=i(37),s=i(46),a=i(44);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,n(e)-i),s(t,r(e)-o),t}},function(t,e,i){var n=i(36),r=i(37),s=i(46),a=i(45);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,n(e)+i),s(t,r(e)-o),t}},function(t,e,i){var n=i(105),r=[];r[n.BOTTOM_CENTER]=i(256),r[n.BOTTOM_LEFT]=i(257),r[n.BOTTOM_RIGHT]=i(258),r[n.CENTER]=i(259),r[n.LEFT_CENTER]=i(261),r[n.RIGHT_CENTER]=i(262),r[n.TOP_CENTER]=i(263),r[n.TOP_LEFT]=i(264),r[n.TOP_RIGHT]=i(265),r[n.LEFT_BOTTOM]=r[n.BOTTOM_LEFT],r[n.LEFT_TOP]=r[n.TOP_LEFT],r[n.RIGHT_BOTTOM]=r[n.BOTTOM_RIGHT],r[n.RIGHT_TOP]=r[n.TOP_RIGHT],t.exports=function(t,e,i,n,s){return r[i](t,e,n,s)}},function(t,e,i){var n=i(34),r=i(76),s=i(46),a=i(77);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,r(e)+i),s(t,n(e)+o),t}},function(t,e,i){var n=i(34),r=i(35),s=i(46),a=i(44);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,r(e)-i),s(t,n(e)+o),t}},function(t,e,i){var n=i(34),r=i(36),s=i(46),a=i(45);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,r(e)+i),s(t,n(e)+o),t}},function(t,e,i){var n=i(260),r=i(76),s=i(78);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),n(t,r(e)+i,s(e)+a),t}},function(t,e,i){var n=i(77),r=i(79);t.exports=function(t,e,i){return n(t,e),r(t,i)}},function(t,e,i){var n=i(78),r=i(35),s=i(79),a=i(44);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,r(e)-i),s(t,n(e)+o),t}},function(t,e,i){var n=i(78),r=i(36),s=i(79),a=i(45);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,r(e)+i),s(t,n(e)+o),t}},function(t,e,i){var n=i(76),r=i(37),s=i(77),a=i(43);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),s(t,n(e)+i),a(t,r(e)-o),t}},function(t,e,i){var n=i(35),r=i(37),s=i(44),a=i(43);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),s(t,n(e)-i),a(t,r(e)-o),t}},function(t,e,i){var n=i(36),r=i(37),s=i(45),a=i(43);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),s(t,n(e)+i),a(t,r(e)-o),t}},function(t,e,i){var n=i(149),r=i(87),s=i(13),a=i(4);t.exports=function(t,e,i){void 0===i&&(i=new a);var o=r(e,0,s.PI2);return n(t,o,i)}},function(t,e,i){var n=i(268),r=i(149),s=i(87),a=i(13);t.exports=function(t,e,i,o){void 0===o&&(o=[]),!e&&0<i&&(e=n(t)/i);for(var h=0;h<e;h++){var l=s(h/e,0,a.PI2);o.push(r(t,l))}return o}},function(t,e){t.exports=function(t){return Math.PI*t.radius*2}},function(t,e,i){var n=i(19),r={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t){return void 0===t&&(t=1),this.alpha=t,this},alpha:{get:function(){return this._alpha},set:function(t){var e=n(t,0,1);0===(this._alpha=e)?this.renderFlags&=-3:this.renderFlags|=2}}};t.exports=r},function(t,e){t.exports=function(t,e,i){if(!e.length)return NaN;if(1===e.length)return e[0];var n,r,s=1;if(i){if(t<e[0][i])return e[0];for(;e[s][i]<t;)s++}else for(;e[s]<t;)s++;return s>e.length&&(s=e.length),i?(n=e[s-1][i],(r=e[s][i])-t<=t-n?e[s]:e[s-1]):(n=e[s-1],(r=e[s])-t<=t-n?r:n)}},function(t,e,i){var n=new(i(0))({initialize:function(t,e,i,n){this.textureKey=t,this.textureFrame=e,this.index=i,this.frame=n,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration}},destroy:function(){this.frame=void 0}});t.exports=n},function(t,e,i){var n=i(52),r={_blendMode:n.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(t){"string"==typeof t&&(t=n[t]),-1<=(t|=0)&&(this._blendMode=t)}},setBlendMode:function(t){return this.blendMode=t,this}};t.exports=r},function(t,e){t.exports={_depth:0,depth:{get:function(){return this._depth},set:function(t){this.scene.sys.queueDepthSort(),this._depth=t}},setDepth:function(t){return void 0===t&&(t=0),this.depth=t,this}}},function(t,e,i){var n=i(152),r=i(112);t.exports=function(t,e,i,s){void 0===s&&(s=[]),!e&&0<i&&(e=r(t)/i);for(var a=0;a<e;a++){var o=a/e;s.push(n(t,o))}return s}},function(t,e,i){var n=i(4);t.exports=function(t,e,i){return void 0===i&&(i=new n),i.x=t.x1+(t.x2-t.x1)*e,i.y=t.y1+(t.y2-t.y1)*e,i}},function(t,e){t.exports=function(t,e,i,n){var r=Math.cos(n),s=Math.sin(n),a=t.x-e,o=t.y-i;return t.x=a*r-o*s+e,t.y=a*s+o*r+i,t}},function(t,e,i){var n=i(278),r=i(279),s={mask:null,setMask:function(t){return this.mask=t,this},clearMask:function(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(t){return void 0===t&&(this.texture||this.shader)&&(t=this),new n(this.scene,t)},createGeometryMask:function(t){return void 0===t&&"Graphics"===this.type&&(t=this),new r(this.scene,t)}};t.exports=s},function(t,e,i){var n=i(0),r=i(20),s=new n({initialize:function(t,e){var i,n,s,a,o,h,l=t.sys.game.renderer;this.renderer=l,this.bitmapMask=e,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.prevFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,l&&l.gl&&(i=l.width,n=l.height,s=0==(i&i-1)&&0==(n&n-1),a=l.gl,o=s?a.REPEAT:a.CLAMP_TO_EDGE,h=a.LINEAR,this.mainTexture=l.createTexture2D(0,h,h,o,o,a.RGBA,null,i,n),this.maskTexture=l.createTexture2D(0,h,h,o,o,a.RGBA,null,i,n),this.mainFramebuffer=l.createFramebuffer(i,n,this.mainTexture,!0),this.maskFramebuffer=l.createFramebuffer(i,n,this.maskTexture,!0),t.sys.game.events.on(r.CONTEXT_RESTORED,(function(t){var e=t.width,i=t.height,n=0==(e&e-1)&&0==(i&i-1),r=t.gl,s=n?r.REPEAT:r.CLAMP_TO_EDGE,a=r.LINEAR;this.mainTexture=t.createTexture2D(0,a,a,s,s,r.RGBA,null,e,i),this.maskTexture=t.createTexture2D(0,a,a,s,s,r.RGBA,null,e,i),this.mainFramebuffer=t.createFramebuffer(e,i,this.mainTexture,!0),this.maskFramebuffer=t.createFramebuffer(e,i,this.maskTexture,!0)}),this))},setBitmap:function(t){this.bitmapMask=t},preRenderWebGL:function(t,e,i){t.pipelines.BitmapMaskPipeline.beginMask(this,e,i)},postRenderWebGL:function(t,e){t.pipelines.BitmapMaskPipeline.endMask(this,e)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null;var t=this.renderer;t&&t.gl&&(t.deleteTexture(this.mainTexture),t.deleteTexture(this.maskTexture),t.deleteFramebuffer(this.mainFramebuffer),t.deleteFramebuffer(this.maskFramebuffer)),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null,this.prevFramebuffer=null,this.renderer=null}});t.exports=s},function(t,e,i){var n=new(i(0))({initialize:function(t,e){this.geometryMask=e,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(t){return this.geometryMask=t,this},setInvertAlpha:function(t){return void 0===t&&(t=!0),this.invertAlpha=t,this},preRenderWebGL:function(t,e,i){var n=t.gl;t.flush(),0===t.maskStack.length&&(n.enable(n.STENCIL_TEST),n.clear(n.STENCIL_BUFFER_BIT),t.maskCount=0),t.currentCameraMask.mask!==this&&(t.currentMask.mask=this),t.maskStack.push({mask:this,camera:i}),this.applyStencil(t,i,!0),t.maskCount++},applyStencil:function(t,e,i){var n=t.gl,r=this.geometryMask,s=t.maskCount;n.colorMask(!1,!1,!1,!1),i?(n.stencilFunc(n.EQUAL,s,255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)):(n.stencilFunc(n.EQUAL,s+1,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),r.renderWebGL(t,r,0,e),t.flush(),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),i?this.invertAlpha?n.stencilFunc(n.NOTEQUAL,s+1,255):n.stencilFunc(n.EQUAL,s+1,255):this.invertAlpha?n.stencilFunc(n.NOTEQUAL,s,255):n.stencilFunc(n.EQUAL,s,255)},postRenderWebGL:function(t){var e,i=t.gl;t.maskStack.pop(),t.maskCount--,0===t.maskStack.length?(t.flush(),t.currentMask.mask=null,i.disable(i.STENCIL_TEST)):(t.flush(),(e=t.maskStack[t.maskStack.length-1]).mask.applyStencil(t,e.camera,!1),t.currentCameraMask.mask!==e.mask?(t.currentMask.mask=e.mask,t.currentMask.camera=e.camera):t.currentMask.mask=null)},preRenderCanvas:function(t,e,i){var n=this.geometryMask;t.currentContext.save(),n.renderCanvas(t,n,0,i,null,null,!0),t.currentContext.clip()},postRenderCanvas:function(t){t.currentContext.restore()},destroy:function(){this.geometryMask=null}});t.exports=n},function(t,e){t.exports={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(t,e){return void 0===e&&(e=t),this.scrollFactorX=t,this.scrollFactorY=e,this}}},function(t,e){t.exports=function(t){var e={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(e.textureKey=t.texture.key,e.frameKey=t.frame.name),e}},function(t,e,i){var n=i(13),r=i(29),s=i(235),a=i(236),o={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(t){this._scaleX=t,0===(this._scaleY=t)?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function(){return this._scaleX},set:function(t){0===(this._scaleX=t)?this.renderFlags&=-5:this.renderFlags|=4}},scaleY:{get:function(){return this._scaleY},set:function(t){0===(this._scaleY=t)?this.renderFlags&=-5:this.renderFlags|=4}},angle:{get:function(){return a(this._rotation*n.RAD_TO_DEG)},set:function(t){this.rotation=a(t)*n.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=s(t)}},setPosition:function(t,e,i,n){return void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=0),void 0===n&&(n=0),this.x=t,this.y=e,this.z=i,this.w=n,this},setRandomPosition:function(t,e,i,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.scene.sys.scale.width),void 0===n&&(n=this.scene.sys.scale.height),this.x=t+Math.random()*i,this.y=e+Math.random()*n,this},setRotation:function(t){return void 0===t&&(t=0),this.rotation=t,this},setAngle:function(t){return void 0===t&&(t=0),this.angle=t,this},setScale:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),this.scaleX=t,this.scaleY=e,this},setX:function(t){return void 0===t&&(t=0),this.x=t,this},setY:function(t){return void 0===t&&(t=0),this.y=t,this},setZ:function(t){return void 0===t&&(t=0),this.z=t,this},setW:function(t){return void 0===t&&(t=0),this.w=t,this},getLocalTransformMatrix:function(t){return void 0===t&&(t=new r),t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(t,e){void 0===t&&(t=new r),void 0===e&&(e=new r);var i=this.parentContainer;if(!i)return this.getLocalTransformMatrix(t);for(t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);i;)e.applyITRS(i.x,i.y,i._rotation,i._scaleX,i._scaleY),e.multiply(t,t),i=i.parentContainer;return t},getParentRotation:function(){for(var t=0,e=this.parentContainer;e;)t+=e.rotation,e=e.parentContainer;return t}};t.exports=o},function(t,e){t.exports={_visible:!0,visible:{get:function(){return this._visible},set:function(t){t?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function(t){return this.visible=t,this}}},function(t,e,i){t.exports={CHANGE_DATA:i(578),CHANGE_DATA_KEY:i(579),REMOVE_DATA:i(580),SET_DATA:i(581)}},function(t,e,i){var n=i(112),r=i(4);t.exports=function(t,e,i,s){if(void 0===s&&(s=[]),!e&&!i)return s;e?i=Math.round(n(t)/e):e=n(t)/i;for(var a=t.x,o=t.y,h=0,l=0;l<i;l++)switch(s.push(new r(a,o)),h){case 0:(a+=e)>=t.right&&(h=1,o+=a-t.right,a=t.right);break;case 1:(o+=e)>=t.bottom&&(h=2,a-=o-t.bottom,o=t.bottom);break;case 2:(a-=e)<=t.left&&(h=3,o-=t.left-a,a=t.left);break;case 3:(o-=e)<=t.top&&(h=0,o=t.top)}return s}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);for(var i=null,n=0;n<e;n++)i=t.shift(),t.push(i);return i}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);for(var i=null,n=0;n<e;n++)i=t.pop(),t.unshift(i);return i}},function(t,e){t.exports=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=[]);var n=Math.round(t.x1),r=Math.round(t.y1),s=Math.round(t.x2),a=Math.round(t.y2),o=Math.abs(s-n),h=Math.abs(a-r),l=n<s?1:-1,u=r<a?1:-1,c=o-h;i.push({x:n,y:r});for(var d=1;n!==s||r!==a;){var f=c<<1;-h<f&&(c-=h,n+=l),f<o&&(c+=o,r+=u),d%e==0&&i.push({x:n,y:r}),d++}return i}},function(t,e,i){var n=i(151),r=i(0),s=i(162),a=i(10),o=i(111),h=i(20),l=i(6),u=i(163),c=new r({Extends:a,initialize:function(t){a.call(this),this.game=t,this.textureManager=null,this.globalTimeScale=1,this.anims=new s,this.paused=!1,this.name="AnimationManager",t.events.once(h.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(h.DESTROY,this.destroy,this)},add:function(t,e){return this.anims.has(t)?console.warn("Animation key exists: "+t):(e.key=t,this.anims.set(t,e),this.emit(o.ADD_ANIMATION,t,e)),this},exists:function(t){return this.anims.has(t)},create:function(t){var e=t.key,i=!1;return e&&((i=this.get(e))||(i=new n(this,e,t),this.anims.set(e,i),this.emit(o.ADD_ANIMATION,e,i))),i},fromJSON:function(t,e){void 0===e&&(e=!1),e&&this.anims.clear(),"string"==typeof t&&(t=JSON.parse(t));var i=[];if(t.hasOwnProperty("anims")&&Array.isArray(t.anims)){for(var n=0;n<t.anims.length;n++)i.push(this.create(t.anims[n]));t.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=t.globalTimeScale)}else t.hasOwnProperty("key")&&"frame"===t.type&&i.push(this.create(t));return i},generateFrameNames:function(t,e){var i=l(e,"prefix",""),n=l(e,"start",0),r=l(e,"end",0),s=l(e,"suffix",""),a=l(e,"zeroPad",0),o=l(e,"outputArray",[]),h=l(e,"frames",!1),c=this.textureManager.get(t);if(!c)return o;var d,f,p=n<r?1:-1;if(r+=p,e)if(Array.isArray(h))for(d=0;d<h.length;d++)f=i+u(h[d],a,"0",1)+s,c.has(f)&&o.push({key:t,frame:f});else for(d=n;d!==r;d+=p)f=i+u(d,a,"0",1)+s,c.has(f)&&o.push({key:t,frame:f});else for(h=c.getFrameNames(),d=0;d<h.length;d++)o.push({key:t,frame:h[d]});return o},generateFrameNumbers:function(t,e){var i,n=l(e,"start",0),r=l(e,"end",-1),s=l(e,"first",!1),a=l(e,"outputArray",[]),o=l(e,"frames",!1),h=this.textureManager.get(t);if(!h)return a;if(s&&h.has(s)&&a.push({key:t,frame:s}),Array.isArray(o))for(i=0;i<o.length;i++)h.has(o[i])&&a.push({key:t,frame:o[i]});else{-1===r&&(r=h.frameTotal);var u=n<r?1:-1;for(r+=u,i=n;i!==r;i+=u)h.has(i)&&a.push({key:t,frame:i})}return a},get:function(t){return this.anims.get(t)},load:function(t,e,i){var n=this.get(e);return n?n.load(t,i):console.warn("Missing animation: "+e),t},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(o.PAUSE_ALL)),this},play:function(t,e){if(Array.isArray(e)||(e=[e]),!this.get(t))return this;for(var i=0;i<e.length;i++)e[i].anims.play(t);return this},remove:function(t){var e=this.get(t);return e&&(this.emit(o.REMOVE_ANIMATION,t,e),this.anims.delete(t)),e},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(o.RESUME_ALL)),this},staggerPlay:function(t,e,i){if(void 0===i&&(i=0),Array.isArray(e)||(e=[e]),!this.get(t))return this;for(var n=0;n<e.length;n++)e[n].anims.delayedPlay(i*n,t);return this},toJSON:function(t){var e={anims:[],globalTimeScale:this.globalTimeScale};return void 0!==t&&""!==t?e.anims.push(this.anims.get(t).toJSON()):this.anims.each((function(t,i){e.anims.push(i.toJSON())})),e},destroy:function(){this.anims.clear(),this.textureManager=null,this.game=null}});t.exports=c},function(t,e,i){var n=i(0),r=i(162),s=i(10),a=i(291),o=new n({initialize:function(){this.entries=new r,this.events=new s},add:function(t,e){return this.entries.set(t,e),this.events.emit(a.ADD,this,t,e),this},has:function(t){return this.entries.has(t)},exists:function(t){return this.entries.has(t)},get:function(t){return this.entries.get(t)},remove:function(t){var e=this.get(t);return e&&(this.entries.delete(t),this.events.emit(a.REMOVE,this,t,e.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});t.exports=o},function(t,e,i){t.exports={ADD:i(640),REMOVE:i(641)}},function(t,e,i){var n=i(290),r=i(0),s=i(20),a=new r({initialize:function(t){this.game=t,this.binary=new n,this.bitmapFont=new n,this.json=new n,this.physics=new n,this.shader=new n,this.audio=new n,this.video=new n,this.text=new n,this.html=new n,this.obj=new n,this.tilemap=new n,this.xml=new n,this.custom={},this.game.events.once(s.DESTROY,this.destroy,this)},addCustom:function(t){return this.custom.hasOwnProperty(t)||(this.custom[t]=new n),this.custom[t]},destroy:function(){for(var t=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],e=0;e<t.length;e++)this[t[e]].destroy(),this[t[e]]=null;for(var i in this.custom)this.custom[i].destroy();this.custom=null,this.game=null}});t.exports=a},function(t,e,i){var n=i(91),r=i(26),s=i(168),a=i(19),o=i(0),h=i(12),l=i(301),u=i(116),c=i(11),d=i(3),f=new o({Extends:n,Mixins:[h.Flip,h.Tint],initialize:function(t,e,i,r){n.call(this,t,e,i,r),this.inputEnabled=!0,this.fadeEffect=new l.Fade(this),this.flashEffect=new l.Flash(this),this.shakeEffect=new l.Shake(this),this.panEffect=new l.Pan(this),this.rotateToEffect=new l.RotateTo(this),this.zoomEffect=new l.Zoom(this),this.lerp=new d(1,1),this.followOffset=new d,this.deadzone=null,this._follow=null,this.renderToTexture=!1,this.renderToGame=!0,this.canvas=null,this.context=null,this.glTexture=null,this.framebuffer=null,this.pipeline=null},setRenderToTexture:function(t,e){void 0===e&&(e=!0);var i=this.scene.sys.game.renderer;return i.gl?(this.glTexture=i.createTextureFromSource(null,this.width,this.height,0),this.framebuffer=i.createFramebuffer(this.width,this.height,this.glTexture,!1)):(this.canvas=r.create2D(this,this.width,this.height),this.context=this.canvas.getContext("2d")),this.renderToTexture=!0,this.renderToGame=e,t&&this.setPipeline(t),this},setPipeline:function(t){var e;return"string"==typeof t?(e=this.scene.sys.game.renderer).gl&&e.hasPipeline(t)&&(this.pipeline=e.getPipeline(t)):this.pipeline=t,this},clearRenderToTexture:function(){if(this.scene){var t=this.scene.sys.game.renderer;if(t)return t.gl?(this.framebuffer&&t.deleteFramebuffer(this.framebuffer),this.glTexture&&t.deleteTexture(this.glTexture),this.framebuffer=null,this.glTexture=null,this.pipeline=null):(r.remove(this),this.canvas=null,this.context=null),this.renderToTexture=!1,this}},setDeadzone:function(t,e){var i,n,r,a;return void 0===t?this.deadzone=null:(this.deadzone?(this.deadzone.width=t,this.deadzone.height=e):this.deadzone=new c(0,0,t,e),this._follow&&(i=this.width/2,n=this.height/2,r=this._follow.x-this.followOffset.x,a=this._follow.y-this.followOffset.y,this.midPoint.set(r,a),this.scrollX=r-i,this.scrollY=a-n),s(this.deadzone,this.midPoint.x,this.midPoint.y)),this},fadeIn:function(t,e,i,n,r,s){return this.fadeEffect.start(!1,t,e,i,n,!0,r,s)},fadeOut:function(t,e,i,n,r,s){return this.fadeEffect.start(!0,t,e,i,n,!0,r,s)},fadeFrom:function(t,e,i,n,r,s,a){return this.fadeEffect.start(!1,t,e,i,n,r,s,a)},fade:function(t,e,i,n,r,s,a){return this.fadeEffect.start(!0,t,e,i,n,r,s,a)},flash:function(t,e,i,n,r,s,a){return this.flashEffect.start(t,e,i,n,r,s,a)},shake:function(t,e,i,n,r){return this.shakeEffect.start(t,e,i,n,r)},pan:function(t,e,i,n,r,s,a){return this.panEffect.start(t,e,i,n,r,s,a)},rotateTo:function(t,e,i,n,r,s,a){return this.rotateToEffect.start(t,e,i,n,r,s,a)},zoomTo:function(t,e,i,n,r,s){return this.zoomEffect.start(t,e,i,n,r,s)},preRender:function(t){var e,i,n=this.width,r=this.height,a=.5*n,o=.5*r,h=this.zoom*t,l=this.matrix,c=n*this.originX,d=r*this.originY,f=this._follow,p=this.deadzone,g=this.scrollX,m=this.scrollY;p&&s(p,this.midPoint.x,this.midPoint.y),f&&!this.panEffect.isRunning&&(e=f.x-this.followOffset.x,i=f.y-this.followOffset.y,p?(e<p.x?g=u(g,g-(p.x-e),this.lerp.x):e>p.right&&(g=u(g,g+(e-p.right),this.lerp.x)),i<p.y?m=u(m,m-(p.y-i),this.lerp.y):i>p.bottom&&(m=u(m,m+(i-p.bottom),this.lerp.y))):(g=u(g,e-c,this.lerp.x),m=u(m,i-d,this.lerp.y))),this.useBounds&&(g=this.clampX(g),m=this.clampY(m)),this.roundPixels&&(c=Math.round(c),d=Math.round(d));var y=(this.scrollX=g)+a,v=(this.scrollY=m)+o;this.midPoint.set(y,v);var _=n/h,x=r/h;this.worldView.setTo(y-_/2,v-x/2,_,x),l.applyITRS(this.x+c,this.y+d,this.rotation,h,h),l.translate(-c,-d),this.shakeEffect.preRender()},setLerp:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),this.lerp.set(t,e),this},setFollowOffset:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),this.followOffset.set(t,e),this},startFollow:function(t,e,i,n,r,s){void 0===e&&(e=!1),void 0===i&&(i=1),void 0===n&&(n=i),void 0===r&&(r=0),void 0===s&&(s=r),this._follow=t,this.roundPixels=e,i=a(i,0,1),n=a(n,0,1),this.lerp.set(i,n),this.followOffset.set(r,s);var o=this.width/2,h=this.height/2,l=t.x-r,u=t.y-s;return this.midPoint.set(l,u),this.scrollX=l-o,this.scrollY=u-h,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(t,e){this.visible&&(this.rotateToEffect.update(t,e),this.panEffect.update(t,e),this.zoomEffect.update(t,e),this.shakeEffect.update(t,e),this.flashEffect.update(t,e),this.fadeEffect.update(t,e))},destroy:function(){this.clearRenderToTexture(),this.resetFX(),n.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});t.exports=f},function(t,e,i){var n=i(31);t.exports=function(t){var e=new n;t=t.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,i,n){return e+e+i+i+n+n}));var i,r,s,a=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return a&&(i=parseInt(a[1],16),r=parseInt(a[2],16),s=parseInt(a[3],16),e.setTo(i,r,s)),e}},function(t,e){t.exports=function(t,e,i,n){return n<<24|t<<16|e<<8|i}},function(t,e){t.exports=function(t,e,i,n){void 0===n&&(n={h:0,s:0,v:0}),t/=255,e/=255,i/=255;var r=Math.min(t,e,i),s=Math.max(t,e,i),a=s-r,o=0,h=0===s?0:a/s,l=s;return s!==r&&(s===t?o=(e-i)/a+(e<i?6:0):s===e?o=(i-t)/a+2:s===i&&(o=(t-e)/a+4),o/=6),n.hasOwnProperty("_h")?(n._h=o,n._s=h,n._v=l):(n.h=o,n.s=h,n.v=l),n}},function(t,e,i){var n=i(31),r=i(298);t.exports=function(t){var e=r(t);return new n(e.r,e.g,e.b,e.a)}},function(t,e){t.exports=function(t){return 16777215<t?{a:t>>>24,r:t>>16&255,g:t>>8&255,b:255&t}:{a:255,r:t>>16&255,g:t>>8&255,b:255&t}}},function(t,e,i){var n=i(31);t.exports=function(t){return new n(t.r,t.g,t.b,t.a)}},function(t,e,i){var n=i(31);t.exports=function(t){var e,i,r,s,a=new n,o=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(t.toLowerCase());return o&&(e=parseInt(o[1],10),i=parseInt(o[2],10),r=parseInt(o[3],10),s=void 0!==o[4]?parseFloat(o[4]):1,a.setTo(e,i,r,255*s)),a}},function(t,e,i){t.exports={Fade:i(664),Flash:i(665),Pan:i(666),Shake:i(699),RotateTo:i(700),Zoom:i(701)}},function(t,e,i){t.exports={In:i(667),Out:i(668),InOut:i(669)}},function(t,e,i){t.exports={In:i(670),Out:i(671),InOut:i(672)}},function(t,e,i){t.exports={In:i(673),Out:i(674),InOut:i(675)}},function(t,e,i){t.exports={In:i(676),Out:i(677),InOut:i(678)}},function(t,e,i){t.exports={In:i(679),Out:i(680),InOut:i(681)}},function(t,e,i){t.exports={In:i(682),Out:i(683),InOut:i(684)}},function(t,e,i){t.exports=i(685)},function(t,e,i){t.exports={In:i(686),Out:i(687),InOut:i(688)}},function(t,e,i){t.exports={In:i(689),Out:i(690),InOut:i(691)}},function(t,e,i){t.exports={In:i(692),Out:i(693),InOut:i(694)}},function(t,e,i){t.exports={In:i(695),Out:i(696),InOut:i(697)}},function(t,e,i){t.exports=i(698)},function(t,e,i){var n=i(0),r=i(33),s=i(315),a=i(2),o=i(6),h=i(7),l=i(170),u=i(1),c=i(175),d=i(164),f=new n({initialize:function(t){void 0===t&&(t={}),this.width=o(t,"width",1024),this.height=o(t,"height",768),this.zoom=o(t,"zoom",1),this.resolution=o(t,"resolution",1),this.parent=o(t,"parent",void 0),this.scaleMode=o(t,"scaleMode",0),this.expandParent=o(t,"expandParent",!0),this.autoRound=o(t,"autoRound",!1),this.autoCenter=o(t,"autoCenter",0),this.resizeInterval=o(t,"resizeInterval",500),this.fullscreenTarget=o(t,"fullscreenTarget",null),this.minWidth=o(t,"minWidth",0),this.maxWidth=o(t,"maxWidth",0),this.minHeight=o(t,"minHeight",0),this.maxHeight=o(t,"maxHeight",0);var e=o(t,"scale",null);e&&(this.width=o(e,"width",this.width),this.height=o(e,"height",this.height),this.zoom=o(e,"zoom",this.zoom),this.resolution=o(e,"resolution",this.resolution),this.parent=o(e,"parent",this.parent),this.scaleMode=o(e,"mode",this.scaleMode),this.expandParent=o(e,"expandParent",this.expandParent),this.autoRound=o(e,"autoRound",this.autoRound),this.autoCenter=o(e,"autoCenter",this.autoCenter),this.resizeInterval=o(e,"resizeInterval",this.resizeInterval),this.fullscreenTarget=o(e,"fullscreenTarget",this.fullscreenTarget),this.minWidth=o(e,"min.width",this.minWidth),this.maxWidth=o(e,"max.width",this.maxWidth),this.minHeight=o(e,"min.height",this.minHeight),this.maxHeight=o(e,"max.height",this.maxHeight)),this.renderType=o(t,"type",r.AUTO),this.canvas=o(t,"canvas",null),this.context=o(t,"context",null),this.canvasStyle=o(t,"canvasStyle",null),this.customEnvironment=o(t,"customEnvironment",!1),this.sceneConfig=o(t,"scene",null),this.seed=o(t,"seed",[(Date.now()*Math.random()).toString()]),l.RND=new l.RandomDataGenerator(this.seed),this.gameTitle=o(t,"title",""),this.gameURL=o(t,"url","https://phaser.io"),this.gameVersion=o(t,"version",""),this.autoFocus=o(t,"autoFocus",!0),this.domCreateContainer=o(t,"dom.createContainer",!1),this.domBehindCanvas=o(t,"dom.behindCanvas",!1),this.inputKeyboard=o(t,"input.keyboard",!0),this.inputKeyboardEventTarget=o(t,"input.keyboard.target",window),this.inputKeyboardCapture=o(t,"input.keyboard.capture",[]),this.inputMouse=o(t,"input.mouse",!0),this.inputMouseEventTarget=o(t,"input.mouse.target",null),this.inputMouseCapture=o(t,"input.mouse.capture",!0),this.inputTouch=o(t,"input.touch",s.input.touch),this.inputTouchEventTarget=o(t,"input.touch.target",null),this.inputTouchCapture=o(t,"input.touch.capture",!0),this.inputActivePointers=o(t,"input.activePointers",1),this.inputSmoothFactor=o(t,"input.smoothFactor",0),this.inputWindowEvents=o(t,"input.windowEvents",!0),this.inputGamepad=o(t,"input.gamepad",!1),this.inputGamepadEventTarget=o(t,"input.gamepad.target",window),this.disableContextMenu=o(t,"disableContextMenu",!1),this.audio=o(t,"audio"),this.hideBanner=!1===o(t,"banner",null),this.hidePhaser=o(t,"banner.hidePhaser",!1),this.bannerTextColor=o(t,"banner.text","#ffffff"),this.bannerBackgroundColor=o(t,"banner.background",["#ff0000","#ffff00","#00ff00","#00ffff","#000000"]),""===this.gameTitle&&this.hidePhaser&&(this.hideBanner=!0),this.fps=o(t,"fps",null);var i=o(t,"render",t);this.antialias=o(i,"antialias",!0),this.antialiasGL=o(i,"antialiasGL",!0),this.mipmapFilter=o(i,"mipmapFilter","LINEAR"),this.desynchronized=o(i,"desynchronized",!1),this.roundPixels=o(i,"roundPixels",!1),this.pixelArt=o(i,"pixelArt",1!==this.zoom),this.pixelArt&&(this.antialias=!1,this.roundPixels=!0),this.transparent=o(i,"transparent",!1),this.clearBeforeRender=o(i,"clearBeforeRender",!0),this.premultipliedAlpha=o(i,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=o(i,"failIfMajorPerformanceCaveat",!1),this.powerPreference=o(i,"powerPreference","default"),this.batchSize=o(i,"batchSize",2e3),this.maxLights=o(i,"maxLights",10);var n=o(t,"backgroundColor",0);this.backgroundColor=d(n),0===n&&this.transparent&&(this.backgroundColor.alpha=0),this.preBoot=o(t,"callbacks.preBoot",u),this.postBoot=o(t,"callbacks.postBoot",u),this.physics=o(t,"physics",{}),this.defaultPhysicsSystem=o(this.physics,"default",!1),this.loaderBaseURL=o(t,"loader.baseURL",""),this.loaderPath=o(t,"loader.path",""),this.loaderMaxParallelDownloads=o(t,"loader.maxParallelDownloads",32),this.loaderCrossOrigin=o(t,"loader.crossOrigin",void 0),this.loaderResponseType=o(t,"loader.responseType",""),this.loaderAsync=o(t,"loader.async",!0),this.loaderUser=o(t,"loader.user",""),this.loaderPassword=o(t,"loader.password",""),this.loaderTimeout=o(t,"loader.timeout",0),this.loaderWithCredentials=o(t,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var f=o(t,"plugins",null),p=c.DefaultScene;f&&(Array.isArray(f)?this.defaultPlugins=f:h(f)&&(this.installGlobalPlugins=a(f,"global",[]),this.installScenePlugins=a(f,"scene",[]),Array.isArray(f.default)?p=f.default:Array.isArray(f.defaultMerge)&&(p=p.concat(f.defaultMerge)))),this.defaultPlugins=p;var g="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=o(t,"images.default",g+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=o(t,"images.missing",g+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),window&&(window.FORCE_WEBGL?this.renderType=r.WEBGL:window.FORCE_CANVAS&&(this.renderType=r.CANVAS))}});t.exports=f},function(t,e,i){t.exports={os:i(117),browser:i(118),features:i(169),input:i(730),audio:i(731),video:i(732),fullscreen:i(733),canvasFeatures:i(316)}},function(t,e,i){var n,r,s,a=i(26),o={supportInverseAlpha:!1,supportNewBlendModes:!1};t.exports=(void 0!==document&&(o.supportNewBlendModes=(n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",r="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",(s=new Image).onload=function(){var t=new Image;t.onload=function(){var e=a.create(t,6,1).getContext("2d");if(e.globalCompositeOperation="multiply",e.drawImage(s,0,0),e.drawImage(t,2,0),!e.getImageData(2,0,1,1))return!1;var i=e.getImageData(2,0,1,1).data;a.remove(t),o.supportNewBlendModes=255===i[0]&&0===i[1]&&0===i[2]},t.src=n+"/wCKxvRF"+r},s.src=n+"AP804Oa6"+r,!1),o.supportInverseAlpha=function(){var t=a.create(this,2,1).getContext("2d");t.fillStyle="rgba(10, 20, 30, 0.5)",t.fillRect(0,0,1,1);var e=t.getImageData(0,0,1,1);if(null===e)return!1;t.putImageData(e,1,0);var i=t.getImageData(1,0,1,1);return i.data[0]===e.data[0]&&i.data[1]===e.data[1]&&i.data[2]===e.data[2]&&i.data[3]===e.data[3]}()),o)},function(t,e){t.exports=function(t,e,i,n){return Math.atan2(n-e,i-t)}},function(t,e){t.exports=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}},function(t,e){t.exports=function(t){return 0<=(t%=2*Math.PI)?t:t+2*Math.PI}},function(t,e){t.exports=function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)}},function(t,e){t.exports=function(t,e,i,n){var r=t-i,s=e-n;return r*r+s*s}},function(t,e){t.exports=function(t,e,i){return void 0===i&&(i=1e-4),e-i<t}},function(t,e){t.exports=function(t,e,i){return void 0===i&&(i=1e-4),t<e+i}},function(t,e,i){var n=i(325);t.exports=function(t,e){return n(t)/n(e)/n(t-e)}},function(t,e){t.exports=function(t){if(0===t)return 1;for(var e=t;--t;)e*=t;return e}},function(t,e){t.exports=function(t,e,i,n,r){return(l=1-t)*l*l*e+3*(h=1-(o=t))*h*o*i+3*(1-(a=t))*a*a*n+(s=t)*s*s*r;var s,a,o,h,l}},function(t,e){t.exports=function(t,e,i,n){return(a=1-t)*a*e+2*(1-(s=t))*s*i+(r=t)*r*n;var r,s,a}},function(t,e,i){var n=i(161);t.exports=function(t,e,i){return e+(i-e)*n(t,0,1)}},function(t,e){t.exports=function(t){var e=Math.log(t)/.6931471805599453;return 1<<Math.ceil(e)}},function(t,e){t.exports=function(t,e,i,n){return void 0===i&&(i=0),0===e?t:(t-=i,t=e*Math.ceil(t/e),n?(i+t)/e:i+t)}},function(t,e){t.exports=function(t,e){var i=t.x,n=t.y;return t.x=i*Math.cos(e)-n*Math.sin(e),t.y=i*Math.sin(e)+n*Math.cos(e),t}},function(t,e){t.exports=function(t){return 0<t?Math.ceil(t):Math.floor(t)}},function(t,e,i){var n=i(3);t.exports=function(t,e,i,r,s,a,o,h){void 0===h&&(h=new n);var l=Math.sin(s),u=Math.cos(s),c=u*a,d=l*a,f=-l*o,p=u*o,g=1/(c*p+f*-d);return h.x=p*g*t+-f*g*e+(r*f-i*p)*g,h.y=c*g*e+-d*g*t+(-r*c+i*d)*g,h}},function(t,e,i){var n=new(i(0))({initialize:function(t,e,i,n){this.x=0,this.y=0,this.z=0,this.w=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=e||0,this.z=i||0,this.w=n||0)},clone:function(){return new n(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this.w=t.w||0,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},set:function(t,e,i,n){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=e||0,this.z=i||0,this.w=n||0),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this.w+=t.w||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this.w-=t.w||0,this},scale:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function(){var t=this.x,e=this.y,i=this.z,n=this.w;return Math.sqrt(t*t+e*e+i*i+n*n)},lengthSq:function(){var t=this.x,e=this.y,i=this.z,n=this.w;return t*t+e*e+i*i+n*n},normalize:function(){var t=this.x,e=this.y,i=this.z,n=this.w,r=t*t+e*e+i*i+n*n;return 0<r&&(r=1/Math.sqrt(r),this.x=t*r,this.y=e*r,this.z=i*r,this.w=n*r),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,e){void 0===e&&(e=0);var i=this.x,n=this.y,r=this.z,s=this.w;return this.x=i+e*(t.x-i),this.y=n+e*(t.y-n),this.z=r+e*(t.z-r),this.w=s+e*(t.w-s),this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this.w*=t.w||1,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this.w/=t.w||1,this},distance:function(t){var e=t.x-this.x,i=t.y-this.y,n=t.z-this.z||0,r=t.w-this.w||0;return Math.sqrt(e*e+i*i+n*n+r*r)},distanceSq:function(t){var e=t.x-this.x,i=t.y-this.y,n=t.z-this.z||0,r=t.w-this.w||0;return e*e+i*i+n*n+r*r},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(t){var e=this.x,i=this.y,n=this.z,r=this.w,s=t.val;return this.x=s[0]*e+s[4]*i+s[8]*n+s[12]*r,this.y=s[1]*e+s[5]*i+s[9]*n+s[13]*r,this.z=s[2]*e+s[6]*i+s[10]*n+s[14]*r,this.w=s[3]*e+s[7]*i+s[11]*n+s[15]*r,this},transformQuat:function(t){var e=this.x,i=this.y,n=this.z,r=t.x,s=t.y,a=t.z,o=t.w,h=o*e+s*n-a*i,l=o*i+a*e-r*n,u=o*n+r*i-s*e,c=-r*e-s*i-a*n;return this.x=h*o+c*-r+l*-a-u*-s,this.y=l*o+c*-s+u*-r-h*-a,this.z=u*o+c*-a+h*-s-l*-r,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});n.prototype.sub=n.prototype.subtract,n.prototype.mul=n.prototype.multiply,n.prototype.div=n.prototype.divide,n.prototype.dist=n.prototype.distance,n.prototype.distSq=n.prototype.distanceSq,n.prototype.len=n.prototype.length,n.prototype.lenSq=n.prototype.lengthSq,t.exports=n},function(t,e,i){var n=new(i(0))({initialize:function(t){this.val=new Float32Array(9),t?this.copy(t):this.identity()},clone:function(){return new n(this)},set:function(t){return this.copy(t)},copy:function(t){var e=this.val,i=t.val;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this},fromMat4:function(t){var e=t.val,i=this.val;return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[4],i[4]=e[5],i[5]=e[6],i[6]=e[8],i[7]=e[9],i[8]=e[10],this},fromArray:function(t){var e=this.val;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},identity:function(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this},transpose:function(){var t=this.val,e=t[1],i=t[2],n=t[5];return t[1]=t[3],t[2]=t[6],t[3]=e,t[5]=t[7],t[6]=i,t[7]=n,this},invert:function(){var t=this.val,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],a=t[5],o=t[6],h=t[7],l=t[8],u=l*s-a*h,c=-l*r+a*o,d=h*r-s*o,f=e*u+i*c+n*d;return f?(f=1/f,t[0]=u*f,t[1]=(-l*i+n*h)*f,t[2]=(a*i-n*s)*f,t[3]=c*f,t[4]=(l*e-n*o)*f,t[5]=(-a*e+n*r)*f,t[6]=d*f,t[7]=(-h*e+i*o)*f,t[8]=(s*e-i*r)*f,this):null},adjoint:function(){var t=this.val,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],a=t[5],o=t[6],h=t[7],l=t[8];return t[0]=s*l-a*h,t[1]=n*h-i*l,t[2]=i*a-n*s,t[3]=a*o-r*l,t[4]=e*l-n*o,t[5]=n*r-e*a,t[6]=r*h-s*o,t[7]=i*o-e*h,t[8]=e*s-i*r,this},determinant:function(){var t=this.val,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],a=t[5],o=t[6],h=t[7],l=t[8];return e*(l*s-a*h)+i*(-l*r+a*o)+n*(h*r-s*o)},multiply:function(t){var e=this.val,i=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],h=e[6],l=e[7],u=e[8],c=t.val,d=c[0],f=c[1],p=c[2],g=c[3],m=c[4],y=c[5],v=c[6],_=c[7],x=c[8];return e[0]=d*i+f*s+p*h,e[1]=d*n+f*a+p*l,e[2]=d*r+f*o+p*u,e[3]=g*i+m*s+y*h,e[4]=g*n+m*a+y*l,e[5]=g*r+m*o+y*u,e[6]=v*i+_*s+x*h,e[7]=v*n+_*a+x*l,e[8]=v*r+_*o+x*u,this},translate:function(t){var e=this.val,i=t.x,n=t.y;return e[6]=i*e[0]+n*e[3]+e[6],e[7]=i*e[1]+n*e[4]+e[7],e[8]=i*e[2]+n*e[5]+e[8],this},rotate:function(t){var e=this.val,i=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],h=Math.sin(t),l=Math.cos(t);return e[0]=l*i+h*s,e[1]=l*n+h*a,e[2]=l*r+h*o,e[3]=l*s-h*i,e[4]=l*a-h*n,e[5]=l*o-h*r,this},scale:function(t){var e=this.val,i=t.x,n=t.y;return e[0]=i*e[0],e[1]=i*e[1],e[2]=i*e[2],e[3]=n*e[3],e[4]=n*e[4],e[5]=n*e[5],this},fromQuat:function(t){var e=t.x,i=t.y,n=t.z,r=t.w,s=e+e,a=i+i,o=n+n,h=e*s,l=e*a,u=e*o,c=i*a,d=i*o,f=n*o,p=r*s,g=r*a,m=r*o,y=this.val;return y[0]=1-(c+f),y[3]=l+m,y[6]=u-g,y[1]=l-m,y[4]=1-(h+f),y[7]=d+p,y[2]=u+g,y[5]=d-p,y[8]=1-(h+c),this},normalFromMat4:function(t){var e=t.val,i=this.val,n=e[0],r=e[1],s=e[2],a=e[3],o=e[4],h=e[5],l=e[6],u=e[7],c=e[8],d=e[9],f=e[10],p=e[11],g=e[12],m=e[13],y=e[14],v=e[15],_=n*h-r*o,x=n*l-s*o,w=n*u-a*o,b=r*l-s*h,T=r*u-a*h,E=s*u-a*l,A=c*m-d*g,S=c*y-f*g,C=c*v-p*g,O=d*y-f*m,P=d*v-p*m,R=f*v-p*y,M=_*R-x*P+w*O+b*C-T*S+E*A;return M?(M=1/M,i[0]=(h*R-l*P+u*O)*M,i[1]=(l*C-o*R-u*S)*M,i[2]=(o*P-h*C+u*A)*M,i[3]=(s*P-r*R-a*O)*M,i[4]=(n*R-s*C+a*S)*M,i[5]=(r*C-n*P-a*A)*M,i[6]=(m*E-y*T+v*b)*M,i[7]=(y*w-g*E-v*x)*M,i[8]=(g*T-m*w+v*_)*M,this):null}});t.exports=n},function(t,e,i){var n=new(i(0))({initialize:function(t){this.val=new Float32Array(16),t?this.copy(t):this.identity()},clone:function(){return new n(this)},set:function(t){return this.copy(t)},copy:function(t){var e=this.val,i=t.val;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this},fromArray:function(t){var e=this.val;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],this},zero:function(){var t=this.val;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=0,this},xyz:function(t,e,i){this.identity();var n=this.val;return n[12]=t,n[13]=e,n[14]=i,this},scaling:function(t,e,i){this.zero();var n=this.val;return n[0]=t,n[5]=e,n[10]=i,n[15]=1,this},identity:function(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},transpose:function(){var t=this.val,e=t[1],i=t[2],n=t[3],r=t[6],s=t[7],a=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=e,t[6]=t[9],t[7]=t[13],t[8]=i,t[9]=r,t[11]=t[14],t[12]=n,t[13]=s,t[14]=a,this},invert:function(){var t=this.val,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],a=t[5],o=t[6],h=t[7],l=t[8],u=t[9],c=t[10],d=t[11],f=t[12],p=t[13],g=t[14],m=t[15],y=e*a-i*s,v=e*o-n*s,_=e*h-r*s,x=i*o-n*a,w=i*h-r*a,b=n*h-r*o,T=l*p-u*f,E=l*g-c*f,A=l*m-d*f,S=u*g-c*p,C=u*m-d*p,O=c*m-d*g,P=y*O-v*C+_*S+x*A-w*E+b*T;return P?(P=1/P,t[0]=(a*O-o*C+h*S)*P,t[1]=(n*C-i*O-r*S)*P,t[2]=(p*b-g*w+m*x)*P,t[3]=(c*w-u*b-d*x)*P,t[4]=(o*A-s*O-h*E)*P,t[5]=(e*O-n*A+r*E)*P,t[6]=(g*_-f*b-m*v)*P,t[7]=(l*b-c*_+d*v)*P,t[8]=(s*C-a*A+h*T)*P,t[9]=(i*A-e*C-r*T)*P,t[10]=(f*w-p*_+m*y)*P,t[11]=(u*_-l*w-d*y)*P,t[12]=(a*E-s*S-o*T)*P,t[13]=(e*S-i*E+n*T)*P,t[14]=(p*v-f*x-g*y)*P,t[15]=(l*x-u*v+c*y)*P,this):null},adjoint:function(){var t=this.val,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],a=t[5],o=t[6],h=t[7],l=t[8],u=t[9],c=t[10],d=t[11],f=t[12],p=t[13],g=t[14],m=t[15];return t[0]=a*(c*m-d*g)-u*(o*m-h*g)+p*(o*d-h*c),t[1]=-(i*(c*m-d*g)-u*(n*m-r*g)+p*(n*d-r*c)),t[2]=i*(o*m-h*g)-a*(n*m-r*g)+p*(n*h-r*o),t[3]=-(i*(o*d-h*c)-a*(n*d-r*c)+u*(n*h-r*o)),t[4]=-(s*(c*m-d*g)-l*(o*m-h*g)+f*(o*d-h*c)),t[5]=e*(c*m-d*g)-l*(n*m-r*g)+f*(n*d-r*c),t[6]=-(e*(o*m-h*g)-s*(n*m-r*g)+f*(n*h-r*o)),t[7]=e*(o*d-h*c)-s*(n*d-r*c)+l*(n*h-r*o),t[8]=s*(u*m-d*p)-l*(a*m-h*p)+f*(a*d-h*u),t[9]=-(e*(u*m-d*p)-l*(i*m-r*p)+f*(i*d-r*u)),t[10]=e*(a*m-h*p)-s*(i*m-r*p)+f*(i*h-r*a),t[11]=-(e*(a*d-h*u)-s*(i*d-r*u)+l*(i*h-r*a)),t[12]=-(s*(u*g-c*p)-l*(a*g-o*p)+f*(a*c-o*u)),t[13]=e*(u*g-c*p)-l*(i*g-n*p)+f*(i*c-n*u),t[14]=-(e*(a*g-o*p)-s*(i*g-n*p)+f*(i*o-n*a)),t[15]=e*(a*c-o*u)-s*(i*c-n*u)+l*(i*o-n*a),this},determinant:function(){var t=this.val,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],a=t[5],o=t[6],h=t[7],l=t[8],u=t[9],c=t[10],d=t[11],f=t[12],p=t[13],g=t[14],m=t[15];return(e*a-i*s)*(c*m-d*g)-(e*o-n*s)*(u*m-d*p)+(e*h-r*s)*(u*g-c*p)+(i*o-n*a)*(l*m-d*f)-(i*h-r*a)*(l*g-c*f)+(n*h-r*o)*(l*p-u*f)},multiply:function(t){var e=this.val,i=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],h=e[6],l=e[7],u=e[8],c=e[9],d=e[10],f=e[11],p=e[12],g=e[13],m=e[14],y=e[15],v=t.val,_=v[0],x=v[1],w=v[2],b=v[3];return e[0]=_*i+x*a+w*u+b*p,e[1]=_*n+x*o+w*c+b*g,e[2]=_*r+x*h+w*d+b*m,e[3]=_*s+x*l+w*f+b*y,_=v[4],x=v[5],w=v[6],b=v[7],e[4]=_*i+x*a+w*u+b*p,e[5]=_*n+x*o+w*c+b*g,e[6]=_*r+x*h+w*d+b*m,e[7]=_*s+x*l+w*f+b*y,_=v[8],x=v[9],w=v[10],b=v[11],e[8]=_*i+x*a+w*u+b*p,e[9]=_*n+x*o+w*c+b*g,e[10]=_*r+x*h+w*d+b*m,e[11]=_*s+x*l+w*f+b*y,_=v[12],x=v[13],w=v[14],b=v[15],e[12]=_*i+x*a+w*u+b*p,e[13]=_*n+x*o+w*c+b*g,e[14]=_*r+x*h+w*d+b*m,e[15]=_*s+x*l+w*f+b*y,this},multiplyLocal:function(t){var e=[],i=this.val,n=t.val;return e[0]=i[0]*n[0]+i[1]*n[4]+i[2]*n[8]+i[3]*n[12],e[1]=i[0]*n[1]+i[1]*n[5]+i[2]*n[9]+i[3]*n[13],e[2]=i[0]*n[2]+i[1]*n[6]+i[2]*n[10]+i[3]*n[14],e[3]=i[0]*n[3]+i[1]*n[7]+i[2]*n[11]+i[3]*n[15],e[4]=i[4]*n[0]+i[5]*n[4]+i[6]*n[8]+i[7]*n[12],e[5]=i[4]*n[1]+i[5]*n[5]+i[6]*n[9]+i[7]*n[13],e[6]=i[4]*n[2]+i[5]*n[6]+i[6]*n[10]+i[7]*n[14],e[7]=i[4]*n[3]+i[5]*n[7]+i[6]*n[11]+i[7]*n[15],e[8]=i[8]*n[0]+i[9]*n[4]+i[10]*n[8]+i[11]*n[12],e[9]=i[8]*n[1]+i[9]*n[5]+i[10]*n[9]+i[11]*n[13],e[10]=i[8]*n[2]+i[9]*n[6]+i[10]*n[10]+i[11]*n[14],e[11]=i[8]*n[3]+i[9]*n[7]+i[10]*n[11]+i[11]*n[15],e[12]=i[12]*n[0]+i[13]*n[4]+i[14]*n[8]+i[15]*n[12],e[13]=i[12]*n[1]+i[13]*n[5]+i[14]*n[9]+i[15]*n[13],e[14]=i[12]*n[2]+i[13]*n[6]+i[14]*n[10]+i[15]*n[14],e[15]=i[12]*n[3]+i[13]*n[7]+i[14]*n[11]+i[15]*n[15],this.fromArray(e)},translate:function(t){var e=t.x,i=t.y,n=t.z,r=this.val;return r[12]=r[0]*e+r[4]*i+r[8]*n+r[12],r[13]=r[1]*e+r[5]*i+r[9]*n+r[13],r[14]=r[2]*e+r[6]*i+r[10]*n+r[14],r[15]=r[3]*e+r[7]*i+r[11]*n+r[15],this},translateXYZ:function(t,e,i){var n=this.val;return n[12]=n[0]*t+n[4]*e+n[8]*i+n[12],n[13]=n[1]*t+n[5]*e+n[9]*i+n[13],n[14]=n[2]*t+n[6]*e+n[10]*i+n[14],n[15]=n[3]*t+n[7]*e+n[11]*i+n[15],this},scale:function(t){var e=t.x,i=t.y,n=t.z,r=this.val;return r[0]=r[0]*e,r[1]=r[1]*e,r[2]=r[2]*e,r[3]=r[3]*e,r[4]=r[4]*i,r[5]=r[5]*i,r[6]=r[6]*i,r[7]=r[7]*i,r[8]=r[8]*n,r[9]=r[9]*n,r[10]=r[10]*n,r[11]=r[11]*n,this},scaleXYZ:function(t,e,i){var n=this.val;return n[0]=n[0]*t,n[1]=n[1]*t,n[2]=n[2]*t,n[3]=n[3]*t,n[4]=n[4]*e,n[5]=n[5]*e,n[6]=n[6]*e,n[7]=n[7]*e,n[8]=n[8]*i,n[9]=n[9]*i,n[10]=n[10]*i,n[11]=n[11]*i,this},makeRotationAxis:function(t,e){var i=Math.cos(e),n=Math.sin(e),r=1-i,s=t.x,a=t.y,o=t.z,h=r*s,l=r*a;return this.fromArray([h*s+i,h*a-n*o,h*o+n*a,0,h*a+n*o,l*a+i,l*o-n*s,0,h*o-n*a,l*o+n*s,r*o*o+i,0,0,0,0,1]),this},rotate:function(t,e){var i=this.val,n=e.x,r=e.y,s=e.z,a=Math.sqrt(n*n+r*r+s*s);if(Math.abs(a)<1e-6)return null;n*=a=1/a,r*=a,s*=a;var o=Math.sin(t),h=Math.cos(t),l=1-h,u=i[0],c=i[1],d=i[2],f=i[3],p=i[4],g=i[5],m=i[6],y=i[7],v=i[8],_=i[9],x=i[10],w=i[11],b=n*n*l+h,T=r*n*l+s*o,E=s*n*l-r*o,A=n*r*l-s*o,S=r*r*l+h,C=s*r*l+n*o,O=n*s*l+r*o,P=r*s*l-n*o,R=s*s*l+h;return i[0]=u*b+p*T+v*E,i[1]=c*b+g*T+_*E,i[2]=d*b+m*T+x*E,i[3]=f*b+y*T+w*E,i[4]=u*A+p*S+v*C,i[5]=c*A+g*S+_*C,i[6]=d*A+m*S+x*C,i[7]=f*A+y*S+w*C,i[8]=u*O+p*P+v*R,i[9]=c*O+g*P+_*R,i[10]=d*O+m*P+x*R,i[11]=f*O+y*P+w*R,this},rotateX:function(t){var e=this.val,i=Math.sin(t),n=Math.cos(t),r=e[4],s=e[5],a=e[6],o=e[7],h=e[8],l=e[9],u=e[10],c=e[11];return e[4]=r*n+h*i,e[5]=s*n+l*i,e[6]=a*n+u*i,e[7]=o*n+c*i,e[8]=h*n-r*i,e[9]=l*n-s*i,e[10]=u*n-a*i,e[11]=c*n-o*i,this},rotateY:function(t){var e=this.val,i=Math.sin(t),n=Math.cos(t),r=e[0],s=e[1],a=e[2],o=e[3],h=e[8],l=e[9],u=e[10],c=e[11];return e[0]=r*n-h*i,e[1]=s*n-l*i,e[2]=a*n-u*i,e[3]=o*n-c*i,e[8]=r*i+h*n,e[9]=s*i+l*n,e[10]=a*i+u*n,e[11]=o*i+c*n,this},rotateZ:function(t){var e=this.val,i=Math.sin(t),n=Math.cos(t),r=e[0],s=e[1],a=e[2],o=e[3],h=e[4],l=e[5],u=e[6],c=e[7];return e[0]=r*n+h*i,e[1]=s*n+l*i,e[2]=a*n+u*i,e[3]=o*n+c*i,e[4]=h*n-r*i,e[5]=l*n-s*i,e[6]=u*n-a*i,e[7]=c*n-o*i,this},fromRotationTranslation:function(t,e){var i=this.val,n=t.x,r=t.y,s=t.z,a=t.w,o=n+n,h=r+r,l=s+s,u=n*o,c=n*h,d=n*l,f=r*h,p=r*l,g=s*l,m=a*o,y=a*h,v=a*l;return i[0]=1-(f+g),i[1]=c+v,i[2]=d-y,i[3]=0,i[4]=c-v,i[5]=1-(u+g),i[6]=p+m,i[7]=0,i[8]=d+y,i[9]=p-m,i[10]=1-(u+f),i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this},fromQuat:function(t){var e=this.val,i=t.x,n=t.y,r=t.z,s=t.w,a=i+i,o=n+n,h=r+r,l=i*a,u=i*o,c=i*h,d=n*o,f=n*h,p=r*h,g=s*a,m=s*o,y=s*h;return e[0]=1-(d+p),e[1]=u+y,e[2]=c-m,e[3]=0,e[4]=u-y,e[5]=1-(l+p),e[6]=f+g,e[7]=0,e[8]=c+m,e[9]=f-g,e[10]=1-(l+d),e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},frustum:function(t,e,i,n,r,s){var a=this.val,o=1/(e-t),h=1/(n-i),l=1/(r-s);return a[0]=2*r*o,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*r*h,a[6]=0,a[7]=0,a[8]=(e+t)*o,a[9]=(n+i)*h,a[10]=(s+r)*l,a[11]=-1,a[12]=0,a[13]=0,a[14]=s*r*2*l,a[15]=0,this},perspective:function(t,e,i,n){var r=this.val,s=1/Math.tan(t/2),a=1/(i-n);return r[0]=s/e,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=s,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=(n+i)*a,r[11]=-1,r[12]=0,r[13]=0,r[14]=2*n*i*a,r[15]=0,this},perspectiveLH:function(t,e,i,n){var r=this.val;return r[0]=2*i/t,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=2*i/e,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=-n/(i-n),r[11]=1,r[12]=0,r[13]=0,r[14]=i*n/(i-n),r[15]=0,this},ortho:function(t,e,i,n,r,s){var a=this.val,o=0==(o=t-e)?o:1/o,h=0==(h=i-n)?h:1/h,l=0==(l=r-s)?l:1/l;return a[0]=-2*o,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*h,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*l,a[11]=0,a[12]=(t+e)*o,a[13]=(n+i)*h,a[14]=(s+r)*l,a[15]=1,this},lookAt:function(t,e,i){var n=this.val,r=t.x,s=t.y,a=t.z,o=i.x,h=i.y,l=i.z,u=e.x,c=e.y,d=e.z;if(Math.abs(r-u)<1e-6&&Math.abs(s-c)<1e-6&&Math.abs(a-d)<1e-6)return this.identity();var f=r-u,p=s-c,g=a-d,m=1/Math.sqrt(f*f+p*p+g*g),y=h*(g*=m)-l*(p*=m),v=l*(f*=m)-o*g,_=o*p-h*f;(m=Math.sqrt(y*y+v*v+_*_))?(y*=m=1/m,v*=m,_*=m):_=v=y=0;var x=p*_-g*v,w=g*y-f*_,b=f*v-p*y;return(m=Math.sqrt(x*x+w*w+b*b))?(x*=m=1/m,w*=m,b*=m):b=w=x=0,n[0]=y,n[1]=x,n[2]=f,n[3]=0,n[4]=v,n[5]=w,n[6]=p,n[7]=0,n[8]=_,n[9]=b,n[10]=g,n[11]=0,n[12]=-(y*r+v*s+_*a),n[13]=-(x*r+w*s+b*a),n[14]=-(f*r+p*s+g*a),n[15]=1,this},yawPitchRoll:function(t,e,i){this.zero(),r.zero(),s.zero();var n=this.val,a=r.val,o=s.val,h=Math.sin(i),l=Math.cos(i);return n[10]=1,n[15]=1,n[0]=l,n[1]=h,n[4]=-h,n[5]=l,h=Math.sin(e),l=Math.cos(e),a[0]=1,a[15]=1,a[5]=l,a[10]=l,a[9]=-h,a[6]=h,h=Math.sin(t),l=Math.cos(t),o[5]=1,o[15]=1,o[0]=l,o[2]=-h,o[8]=h,o[10]=l,this.multiplyLocal(r),this.multiplyLocal(s),this},setWorldMatrix:function(t,e,i,n,a){return this.yawPitchRoll(t.y,t.x,t.z),r.scaling(i.x,i.y,i.z),s.xyz(e.x,e.y,e.z),this.multiplyLocal(r),this.multiplyLocal(s),void 0!==n&&this.multiplyLocal(n),void 0!==a&&this.multiplyLocal(a),this}}),r=new n,s=new n;t.exports=n},function(t,e,i){var n=i(0),r=i(174),s=i(335),a=new Int8Array([1,2,0]),o=new Float32Array([0,0,0]),h=new r(1,0,0),l=new r(0,1,0),u=new r,c=new s,d=new n({initialize:function(t,e,i,n){"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=e||0,this.z=i||0,this.w=n||0)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},set:function(t,e,i,n){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=e||0,this.z=i||0,this.w=n||0),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this},scale:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function(){var t=this.x,e=this.y,i=this.z,n=this.w;return Math.sqrt(t*t+e*e+i*i+n*n)},lengthSq:function(){var t=this.x,e=this.y,i=this.z,n=this.w;return t*t+e*e+i*i+n*n},normalize:function(){var t=this.x,e=this.y,i=this.z,n=this.w,r=t*t+e*e+i*i+n*n;return 0<r&&(r=1/Math.sqrt(r),this.x=t*r,this.y=e*r,this.z=i*r,this.w=n*r),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,e){void 0===e&&(e=0);var i=this.x,n=this.y,r=this.z,s=this.w;return this.x=i+e*(t.x-i),this.y=n+e*(t.y-n),this.z=r+e*(t.z-r),this.w=s+e*(t.w-s),this},rotationTo:function(t,e){var i=t.x*e.x+t.y*e.y+t.z*e.z;return i<-.999999?(u.copy(h).cross(t).length()<1e-6&&u.copy(l).cross(t),u.normalize(),this.setAxisAngle(u,Math.PI)):.999999<i?(this.x=0,this.y=0,this.z=0,this.w=1,this):(u.copy(t).cross(e),this.x=u.x,this.y=u.y,this.z=u.z,this.w=1+i,this.normalize())},setAxes:function(t,e,i){var n=c.val;return n[0]=e.x,n[3]=e.y,n[6]=e.z,n[1]=i.x,n[4]=i.y,n[7]=i.z,n[2]=-t.x,n[5]=-t.y,n[8]=-t.z,this.fromMat3(c).normalize()},identity:function(){return this.x=0,this.y=0,this.z=0,this.w=1,this},setAxisAngle:function(t,e){e*=.5;var i=Math.sin(e);return this.x=i*t.x,this.y=i*t.y,this.z=i*t.z,this.w=Math.cos(e),this},multiply:function(t){var e=this.x,i=this.y,n=this.z,r=this.w,s=t.x,a=t.y,o=t.z,h=t.w;return this.x=e*h+r*s+i*o-n*a,this.y=i*h+r*a+n*s-e*o,this.z=n*h+r*o+e*a-i*s,this.w=r*h-e*s-i*a-n*o,this},slerp:function(t,e){var i=this.x,n=this.y,r=this.z,s=this.w,a=t.x,o=t.y,h=t.z,l=t.w,u=i*a+n*o+r*h+s*l;u<0&&(u=-u,a=-a,o=-o,h=-h,l=-l);var c,d,f=1-e,p=e;return 1e-6<1-u&&(c=Math.acos(u),d=Math.sin(c),f=Math.sin((1-e)*c)/d,p=Math.sin(e*c)/d),this.x=f*i+p*a,this.y=f*n+p*o,this.z=f*r+p*h,this.w=f*s+p*l,this},invert:function(){var t=this.x,e=this.y,i=this.z,n=this.w,r=t*t+e*e+i*i+n*n,s=r?1/r:0;return this.x=-t*s,this.y=-e*s,this.z=-i*s,this.w=n*s,this},conjugate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},rotateX:function(t){t*=.5;var e=this.x,i=this.y,n=this.z,r=this.w,s=Math.sin(t),a=Math.cos(t);return this.x=e*a+r*s,this.y=i*a+n*s,this.z=n*a-i*s,this.w=r*a-e*s,this},rotateY:function(t){t*=.5;var e=this.x,i=this.y,n=this.z,r=this.w,s=Math.sin(t),a=Math.cos(t);return this.x=e*a-n*s,this.y=i*a+r*s,this.z=n*a+e*s,this.w=r*a-i*s,this},rotateZ:function(t){t*=.5;var e=this.x,i=this.y,n=this.z,r=this.w,s=Math.sin(t),a=Math.cos(t);return this.x=e*a+i*s,this.y=i*a-e*s,this.z=n*a+r*s,this.w=r*a-n*s,this},calculateW:function(){var t=this.x,e=this.y,i=this.z;return this.w=-Math.sqrt(1-t*t-e*e-i*i),this},fromMat3:function(t){var e,i,n,r,s=t.val,h=s[0]+s[4]+s[8];return 0<h?(r=Math.sqrt(h+1),this.w=.5*r,r=.5/r,this.x=(s[7]-s[5])*r,this.y=(s[2]-s[6])*r,this.z=(s[3]-s[1])*r):(e=0,s[4]>s[0]&&(e=1),s[8]>s[3*e+e]&&(e=2),i=a[e],n=a[i],r=Math.sqrt(s[3*e+e]-s[3*i+i]-s[3*n+n]+1),o[e]=.5*r,r=.5/r,o[i]=(s[3*i+e]+s[3*e+i])*r,o[n]=(s[3*n+e]+s[3*e+n])*r,this.x=o[0],this.y=o[1],this.z=o[2],this.w=(s[3*n+i]-s[3*i+n])*r),this}});t.exports=d},function(t,e,i){var n=i(339),r=i(26),s=i(33),a=i(169);t.exports=function(t){var e=t.config;if((e.customEnvironment||e.canvas)&&e.renderType===s.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!e.customEnvironment&&!e.canvas&&e.renderType!==s.HEADLESS)if(e.renderType===s.CANVAS||e.renderType!==s.CANVAS&&!a.webGL){if(!a.canvas)throw new Error("Cannot create Canvas or WebGL context, aborting.");e.renderType=s.CANVAS}else e.renderType=s.WEBGL;e.antialias||r.disableSmoothing();var o,h,l=t.scale.baseSize,u=l.width,c=l.height;e.canvas?(t.canvas=e.canvas,t.canvas.width=u,t.canvas.height=c):t.canvas=r.create(t,u,c,e.renderType),e.canvasStyle&&(t.canvas.style=e.canvasStyle),e.antialias||n.setCrisp(t.canvas),e.renderType!==s.HEADLESS&&(o=i(505),h=i(508),e.renderType===s.WEBGL?t.renderer=new h(t):(t.renderer=new o(t),t.context=t.renderer.gameContext))}},function(t,e){t.exports={setCrisp:function(t){return["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"].forEach((function(e){t.style["image-rendering"]=e})),t.style.msInterpolationMode="nearest-neighbor",t},setBicubic:function(t){return t.style["image-rendering"]="auto",t.style.msInterpolationMode="bicubic",t}}},function(t,e){t.exports=["#define SHADER_NAME PHASER_TEXTURE_TINT_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.rgb * outTint.a, outTint.a);","    vec4 color = texture;","","    if (outTintEffect == 0.0)","    {","        //  Multiply texture tint","        color = texture * texel;","    }","    else if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.rgb * outTint.a, texture.a);","        color.a = texture.a * texel.a;","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_TEXTURE_TINT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform mat4 uModelMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}","",""].join("\n")},function(t,e,i){var n=i(33);t.exports=function(t){var e,i,r,s,a,o,h,l=t.config;l.hideBanner||(e="WebGL",l.renderType===n.CANVAS?e="Canvas":l.renderType===n.HEADLESS&&(e="Headless"),i=l.audio,h=!(r=t.device.audio).webAudio||i&&i.disableWebAudio?i&&i.noAudio||!r.webAudio&&!r.audioData?"No Audio":"HTML5 Audio":"Web Audio",t.device.browser.ie?window.console&&console.log("Phaser v"+n.VERSION+" / https://phaser.io"):(a=[s=""],Array.isArray(l.bannerBackgroundColor)?(l.bannerBackgroundColor.forEach((function(t){s=s.concat("%c "),a.push("background: "+t),o=t})),a[a.length-1]="color: "+l.bannerTextColor+"; background: "+o):(s=s.concat("%c "),a.push("color: "+l.bannerTextColor+"; background: "+l.bannerBackgroundColor)),a.push("background: #fff"),l.gameTitle&&(s=s.concat(l.gameTitle),l.gameVersion&&(s=s.concat(" v"+l.gameVersion)),l.hidePhaser||(s=s.concat(" / "))),l.hidePhaser||(s=s.concat("Phaser v"+n.VERSION+" ("+e+" | "+h+")")),s=s.concat(" %c "+l.gameURL),a[0]=s,console.log.apply(console,a)))}},function(t,e,i){var n=i(0),r=i(6),s=i(1),a=i(344),o=new n({initialize:function(t,e){this.game=t,this.raf=new a,this.started=!1,this.running=!1,this.minFps=r(e,"min",5),this.targetFps=r(e,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=s,this.forceSetTimeOut=r(e,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=r(e,"deltaHistory",10),this.panicMax=r(e,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=r(e,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var t=window.performance.now();this.time=t,this.lastTime=t,this.nextFpsUpdate=t+1e3;for(var e=this.framesThisSecond=0;e<this.deltaSmoothingMax;e++)this.deltaHistory[e]=Math.min(this._target,this.deltaHistory[e]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(t){if(this.started)return this;this.started=!0,this.running=!0;for(var e=0;e<this.deltaSmoothingMax;e++)this.deltaHistory[e]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=t,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var t=window.performance.now(),e=(this.now=t)-this.lastTime;e<0&&(e=0),this.rawDelta=e;var i=this.deltaIndex,n=this.deltaHistory,r=this.deltaSmoothingMax,s=e,a=e;if(this.smoothStep){(0<this._coolDown||!this.inFocus)&&(this._coolDown--,s=Math.min(s,this._target)),s>this._min&&(s=n[i],s=Math.min(s,this._min)),n[i]=s,this.deltaIndex++,this.deltaIndex>r&&(this.deltaIndex=0);for(var o=a=0;o<r;o++)a+=n[o];a/=r}this.delta=a,this.time+=this.rawDelta,t>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0),this.framesThisSecond++;var h=a/this._target;this.callback(t,a,h),this.lastTime=t,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(t){this.running||(t&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=s,this.raf=null,this.game=null}});t.exports=o},function(t,e,i){var n=i(0),r=i(1),s=new n({initialize:function(){this.isRunning=!1,this.callback=r,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var t=this;this.step=function e(){var i=window.performance.now();t.lastTime=t.tick,t.tick=i,t.callback(i),t.timeOutID=window.requestAnimationFrame(e)},this.stepTimeout=function e(){var i=Date.now(),n=Math.min(Math.max(2*t.target+t.tick-i,0),t.target);t.lastTime=t.tick,t.tick=i,t.callback(i),t.timeOutID=window.setTimeout(e,n)}},start:function(t,e,i){this.isRunning||(this.callback=t,this.isSetTimeOut=e,this.target=i,this.isRunning=!0,this.timeOutID=e?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=r}});t.exports=s},function(t,e,i){var n=i(20);t.exports=function(t){var e,i=t.events;void 0!==document.hidden?e="visibilitychange":["webkit","moz","ms"].forEach((function(t){void 0!==document[t+"Hidden"]&&(document.hidden=function(){return document[t+"Hidden"]},e=t+"visibilitychange")})),e&&document.addEventListener(e,(function(t){document.hidden||"pause"===t.type?i.emit(n.HIDDEN):i.emit(n.VISIBLE)}),!1),window.onblur=function(){i.emit(n.BLUR)},window.onfocus=function(){i.emit(n.FOCUS)},window.focus&&t.config.autoFocus&&window.focus()}},function(t,e,i){var n=i(347),r=i(26),s=i(6);t.exports=function(t){var e=s(t,"data",[]),i=s(t,"canvas",null),a=s(t,"palette",n),o=s(t,"pixelWidth",1),h=s(t,"pixelHeight",o),l=s(t,"resizeCanvas",!0),u=s(t,"clearCanvas",!0),c=s(t,"preRender",null),d=s(t,"postRender",null),f=Math.floor(Math.abs(e[0].length*o)),p=Math.floor(Math.abs(e.length*h));i||(i=r.create2D(this,f,p),u=l=!1),l&&(i.width=f,i.height=p);var g=i.getContext("2d");u&&g.clearRect(0,0,f,p),c&&c(i,g);for(var m=0;m<e.length;m++)for(var y=e[m],v=0;v<y.length;v++){var _=y[v];"."!==_&&" "!==_&&(g.fillStyle=a[_],g.fillRect(v*o,m*h,o,h))}return d&&d(i,g),i}},function(t,e){t.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(t,e,i){var n=i(0),r=i(326),s=i(81),a=i(3),o=new n({Extends:s,initialize:function(t,e,i,n){s.call(this,"CubicBezierCurve"),Array.isArray(t)&&(n=new a(t[6],t[7]),i=new a(t[4],t[5]),e=new a(t[2],t[3]),t=new a(t[0],t[1])),this.p0=t,this.p1=e,this.p2=i,this.p3=n},getStartPoint:function(t){return void 0===t&&(t=new a),t.copy(this.p0)},getResolution:function(t){return t},getPoint:function(t,e){void 0===e&&(e=new a);var i=this.p0,n=this.p1,s=this.p2,o=this.p3;return e.set(r(t,i.x,n.x,s.x,o.x),r(t,i.y,n.y,s.y,o.y))},draw:function(t,e){void 0===e&&(e=32);var i=this.getPoints(e);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var n=1;n<i.length;n++)t.lineTo(i[n].x,i[n].y);return t.strokePath(),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});o.fromJSON=function(t){var e=t.points,i=new a(e[0],e[1]),n=new a(e[2],e[3]),r=new a(e[4],e[5]),s=new a(e[6],e[7]);return new o(i,n,r,s)},t.exports=o},function(t,e,i){var n=i(0),r=i(81),s=i(39),a=i(6),o=i(173),h=i(3),l=new n({Extends:r,initialize:function(t,e,i,n,o,l,u,c){var d;"object"==typeof t?(t=a(d=t,"x",0),e=a(d,"y",0),i=a(d,"xRadius",0),n=a(d,"yRadius",i),o=a(d,"startAngle",0),l=a(d,"endAngle",360),u=a(d,"clockwise",!1),c=a(d,"rotation",0)):(void 0===n&&(n=i),void 0===o&&(o=0),void 0===l&&(l=360),void 0===u&&(u=!1),void 0===c&&(c=0)),r.call(this,"EllipseCurve"),this.p0=new h(t,e),this._xRadius=i,this._yRadius=n,this._startAngle=s(o),this._endAngle=s(l),this._clockwise=u,this._rotation=s(c)},getStartPoint:function(t){return void 0===t&&(t=new h),this.getPoint(0,t)},getResolution:function(t){return 2*t},getPoint:function(t,e){void 0===e&&(e=new h);for(var i=2*Math.PI,n=this._endAngle-this._startAngle,r=Math.abs(n)<Number.EPSILON;n<0;)n+=i;for(;i<n;)n-=i;n<Number.EPSILON&&(n=r?0:i),this._clockwise&&!r&&(n===i?n=-i:n-=i);var s,a,o,l,u=this._startAngle+t*n,c=this.p0.x+this._xRadius*Math.cos(u),d=this.p0.y+this._yRadius*Math.sin(u);return 0!==this._rotation&&(s=Math.cos(this._rotation),a=Math.sin(this._rotation),c=(o=c-this.p0.x)*s-(l=d-this.p0.y)*a+this.p0.x,d=o*a+l*s+this.p0.y),e.set(c,d)},setXRadius:function(t){return this.xRadius=t,this},setYRadius:function(t){return this.yRadius=t,this},setWidth:function(t){return this.xRadius=t/2,this},setHeight:function(t){return this.yRadius=t/2,this},setStartAngle:function(t){return this.startAngle=t,this},setEndAngle:function(t){return this.endAngle=t,this},setClockwise:function(t){return this.clockwise=t,this},setRotation:function(t){return this.rotation=t,this},x:{get:function(){return this.p0.x},set:function(t){this.p0.x=t}},y:{get:function(){return this.p0.y},set:function(t){this.p0.y=t}},xRadius:{get:function(){return this._xRadius},set:function(t){this._xRadius=t}},yRadius:{get:function(){return this._yRadius},set:function(t){this._yRadius=t}},startAngle:{get:function(){return o(this._startAngle)},set:function(t){this._startAngle=s(t)}},endAngle:{get:function(){return o(this._endAngle)},set:function(t){this._endAngle=s(t)}},clockwise:{get:function(){return this._clockwise},set:function(t){this._clockwise=t}},angle:{get:function(){return o(this._rotation)},set:function(t){this._rotation=s(t)}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=t}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:o(this._startAngle),endAngle:o(this._endAngle),clockwise:this._clockwise,rotation:o(this._rotation)}}});l.fromJSON=function(t){return new l(t)},t.exports=l},function(t,e,i){var n=i(0),r=i(81),s=i(176),a=i(11),o=i(3),h=new o,l=new n({Extends:r,initialize:function(t,e){r.call(this,"LineCurve"),Array.isArray(t)&&(e=new o(t[2],t[3]),t=new o(t[0],t[1])),this.p0=t,this.p1=e,this.arcLengthDivisions=1},getBounds:function(t){return void 0===t&&(t=new a),s([this.p0,this.p1],t)},getStartPoint:function(t){return void 0===t&&(t=new o),t.copy(this.p0)},getResolution:function(t){return void 0===t&&(t=1),t},getPoint:function(t,e){return void 0===e&&(e=new o),1===t?e.copy(this.p1):(e.copy(this.p1).subtract(this.p0).scale(t).add(this.p0),e)},getPointAt:function(t,e){return this.getPoint(t,e)},getTangent:function(){return h.copy(this.p1).subtract(this.p0).normalize()},getUtoTmapping:function(t,e,i){var n,r;return e?(r=(n=this.getLengths(i))[n.length-1],Math.min(e,r)/r):t},draw:function(t){return t.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});l.fromJSON=function(t){var e=t.points,i=new o(e[0],e[1]),n=new o(e[2],e[3]);return new l(i,n)},t.exports=l},function(t,e,i){var n=i(0),r=i(81),s=i(327),a=i(3),o=new n({Extends:r,initialize:function(t,e,i){r.call(this,"QuadraticBezier"),Array.isArray(t)&&(i=new a(t[4],t[5]),e=new a(t[2],t[3]),t=new a(t[0],t[1])),this.p0=t,this.p1=e,this.p2=i},getStartPoint:function(t){return void 0===t&&(t=new a),t.copy(this.p0)},getResolution:function(t){return t},getPoint:function(t,e){void 0===e&&(e=new a);var i=this.p0,n=this.p1,r=this.p2;return e.set(s(t,i.x,n.x,r.x),s(t,i.y,n.y,r.y))},draw:function(t,e){void 0===e&&(e=32);var i=this.getPoints(e);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var n=1;n<i.length;n++)t.lineTo(i[n].x,i[n].y);return t.strokePath(),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});o.fromJSON=function(t){var e=t.points,i=new a(e[0],e[1]),n=new a(e[2],e[3]),r=new a(e[4],e[5]);return new o(i,n,r)},t.exports=o},function(t,e,i){var n=i(171),r=i(0),s=i(81),a=i(3),o=new r({Extends:s,initialize:function(t){void 0===t&&(t=[]),s.call(this,"SplineCurve"),this.points=[],this.addPoints(t)},addPoints:function(t){for(var e=0;e<t.length;e++){var i=new a;"number"==typeof t[e]?(i.x=t[e],i.y=t[e+1],e++):Array.isArray(t[e])?(i.x=t[e][0],i.y=t[e][1]):(i.x=t[e].x,i.y=t[e].y),this.points.push(i)}return this},addPoint:function(t,e){var i=new a(t,e);return this.points.push(i),i},getStartPoint:function(t){return void 0===t&&(t=new a),t.copy(this.points[0])},getResolution:function(t){return t*this.points.length},getPoint:function(t,e){void 0===e&&(e=new a);var i=this.points,r=(i.length-1)*t,s=Math.floor(r),o=r-s,h=i[0===s?s:s-1],l=i[s],u=i[s>i.length-2?i.length-1:s+1],c=i[s>i.length-3?i.length-1:s+2];return e.set(n(o,h.x,l.x,u.x,c.x),n(o,h.y,l.y,u.y,c.y))},toJSON:function(){for(var t=[],e=0;e<this.points.length;e++)t.push(this.points[e].x),t.push(this.points[e].y);return{type:this.type,points:t}}});o.fromJSON=function(t){return new o(t.points)},t.exports=o},function(t,e,i){var n=new(i(0))({initialize:function(t,e,i,n){e&&""!==e||(e=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join("\n")),i&&""!==i||(i=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","void main () {","gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","}"].join("\n")),void 0===n&&(n=null),this.key=t,this.fragmentSrc=e,this.vertexSrc=i,this.uniforms=n}});t.exports=n},function(t,e,i){var n=i(31);n.ColorToRGBA=i(811),n.ComponentToHex=i(355),n.GetColor=i(165),n.GetColor32=i(295),n.HexStringToColor=i(294),n.HSLToColor=i(812),n.HSVColorWheel=i(813),n.HSVToRGB=i(166),n.HueToComponent=i(356),n.IntegerToColor=i(297),n.IntegerToRGB=i(298),n.Interpolate=i(814),n.ObjectToColor=i(299),n.RandomRGB=i(815),n.RGBStringToColor=i(300),n.RGBToHSV=i(296),n.RGBToString=i(816),n.ValueToColor=i(164),t.exports=n},function(t,e){t.exports=function(t){var e=t.toString(16);return 1===e.length?"0"+e:e}},function(t,e){t.exports=function(t,e,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}},function(t,e,i){var n=i(117);t.exports=function(t){var e;"complete"!==document.readyState&&"interactive"!==document.readyState?(e=function(){document.removeEventListener("deviceready",e,!0),document.removeEventListener("DOMContentLoaded",e,!0),window.removeEventListener("load",e,!0),t()},document.body?n.cordova?document.addEventListener("deviceready",e,!1):(document.addEventListener("DOMContentLoaded",e,!0),window.addEventListener("load",e,!0)):window.setTimeout(e,20)):t()}},function(t,e,i){var n=i(177);t.exports=function(t,e){var i=window.screen,r=!!i&&(i.orientation||i.mozOrientation||i.msOrientation);if(r&&"string"==typeof r.type)return r.type;if("string"==typeof r)return r;if(i)return i.height>i.width?n.ORIENTATION.PORTRAIT:n.ORIENTATION.LANDSCAPE;if("number"==typeof window.orientation)return 0===window.orientation||180===window.orientation?n.ORIENTATION.PORTRAIT:n.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return n.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return n.ORIENTATION.LANDSCAPE}return t<e?n.ORIENTATION.PORTRAIT:n.ORIENTATION.LANDSCAPE}},function(t,e){t.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(t,e){t.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(t,e){t.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(t,e){t.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(t,e){t.exports=function(t){var e;return""!==t&&("string"==typeof t?e=document.getElementById(t):t&&1===t.nodeType&&(e=t)),e||document.body}},function(t,e){t.exports=function(t){var e="";try{window.DOMParser?e=(new DOMParser).parseFromString(t,"text/xml"):(e=new ActiveXObject("Microsoft.XMLDOM")).loadXML(t)}catch(t){e=null}return e&&e.documentElement&&!e.getElementsByTagName("parsererror").length?e:null}},function(t,e,i){var n=i(0),r=i(179),s=i(10),a=i(54),o=i(20),h=i(366),l=i(367),u=i(368),c=i(369),d=i(29),f=i(333),p=new n({initialize:function(t,e){this.game=t,this.scaleManager,this.canvas,this.config=e,this.enabled=!0,this.events=new s,this.isOver=!0,this.defaultCursor="",this.keyboard=e.inputKeyboard?new h(this):null,this.mouse=e.inputMouse?new l(this):null,this.touch=e.inputTouch?new c(this):null,this.pointers=[],this.pointersTotal=e.inputActivePointers,e.inputTouch&&1===this.pointersTotal&&(this.pointersTotal=2);for(var i=0;i<=this.pointersTotal;i++){var n=new u(this,i);n.smoothFactor=e.inputSmoothFactor,this.pointers.push(n)}this.mousePointer=e.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new d,this._tempMatrix2=new d,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],t.events.once(o.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(a.MANAGER_BOOT),this.game.events.on(o.PRE_RENDER,this.preRender,this),this.game.events.once(o.DESTROY,this.destroy,this)},setCanvasOver:function(t){this.isOver=!0,this.events.emit(a.GAME_OVER,t)},setCanvasOut:function(t){this.isOver=!1,this.events.emit(a.GAME_OUT,t)},preRender:function(){var t=this.game.loop.now,e=this.game.loop.delta,i=this.game.scene.getScenes(!0,!0);this.time=t,this.events.emit(a.MANAGER_UPDATE);for(var n=0;n<i.length;n++){var r=i[n];if(r.sys.input&&r.sys.input.updatePoll(t,e)&&this.globalTopOnly)return}},setDefaultCursor:function(t){this.defaultCursor=t,this.canvas.style.cursor!==t&&(this.canvas.style.cursor=t)},setCursor:function(t){t.cursor&&(this.canvas.style.cursor=t.cursor)},resetCursor:function(t){t.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(t){void 0===t&&(t=1);var e=[];10<this.pointersTotal+t&&(t=10-this.pointersTotal);for(var i=0;i<t;i++){var n=this.pointers.length,r=new u(this,n);r.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(r),this.pointersTotal++,e.push(r)}return e},updateInputPlugins:function(t,e){var i=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var n=0;n<i.length;n++){var r=i[n];if(r.sys.input&&(r.sys.input.update(t,e)&&this.globalTopOnly||this._tempSkip))return}},onTouchStart:function(t){for(var e=this.pointers,i=[],n=0;n<t.changedTouches.length;n++)for(var s=t.changedTouches[n],a=1;a<this.pointersTotal;a++){var o=e[a];if(!o.active){o.touchstart(s,t),this.activePointer=o,i.push(o);break}}this.updateInputPlugins(r.TOUCH_START,i)},onTouchMove:function(t){for(var e=this.pointers,i=[],n=0;n<t.changedTouches.length;n++)for(var s=t.changedTouches[n],a=1;a<this.pointersTotal;a++){var o=e[a];if(o.active&&o.identifier===s.identifier){o.touchmove(s,t),this.activePointer=o,i.push(o);break}}this.updateInputPlugins(r.TOUCH_MOVE,i)},onTouchEnd:function(t){for(var e=this.pointers,i=[],n=0;n<t.changedTouches.length;n++)for(var s=t.changedTouches[n],a=1;a<this.pointersTotal;a++){var o=e[a];if(o.active&&o.identifier===s.identifier){o.touchend(s,t),i.push(o);break}}this.updateInputPlugins(r.TOUCH_END,i)},onTouchCancel:function(t){for(var e=this.pointers,i=[],n=0;n<t.changedTouches.length;n++)for(var s=t.changedTouches[n],a=1;a<this.pointersTotal;a++){var o=e[a];if(o.active&&o.identifier===s.identifier){o.touchcancel(s,t),i.push(o);break}}this.updateInputPlugins(r.TOUCH_CANCEL,i)},onMouseDown:function(t){this.mousePointer.down(t),this.mousePointer.updateMotion(),this.updateInputPlugins(r.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(t){this.mousePointer.move(t),this.mousePointer.updateMotion(),this.updateInputPlugins(r.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(t){this.mousePointer.up(t),this.mousePointer.updateMotion(),this.updateInputPlugins(r.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(t){this.mousePointer.wheel(t),this.updateInputPlugins(r.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(t){var e=this.mouse.locked;this.mousePointer.locked=e,this.events.emit(a.POINTERLOCK_CHANGE,t,e)},inputCandidate:function(t,e){var i=t.input;if(!i||!i.enabled||!i.alwaysEnabled&&!t.willRender(e))return!1;var n=!0,r=t.parentContainer;if(r)do{if(!r.willRender(e)){n=!1;break}r=r.parentContainer}while(r);return n},hitTest:function(t,e,i,n){void 0===n&&(n=this._tempHitTest);var r=this._tempPoint,s=i.scrollX,a=i.scrollY;n.length=0;var o=t.x,h=t.y;1!==i.resolution&&(o+=i._x,h+=i._y),i.getWorldPoint(o,h,r),t.worldX=r.x,t.worldY=r.y;for(var l={x:0,y:0},u=this._tempMatrix,c=this._tempMatrix2,d=0;d<e.length;d++){var p,g,m=e[d];this.inputCandidate(m,i)&&(p=r.x+s*m.scrollFactorX-s,g=r.y+a*m.scrollFactorY-a,m.parentContainer?(m.getWorldTransformMatrix(u,c),u.applyInverse(p,g,l)):f(p,g,m.x,m.y,m.rotation,m.scaleX,m.scaleY,l),this.pointWithinHitArea(m,l.x,l.y)&&n.push(m))}return n},pointWithinHitArea:function(t,e,i){e+=t.displayOriginX,i+=t.displayOriginY;var n=t.input;return!(!n||!n.hitAreaCallback(n.hitArea,e,i,t)||(n.localX=e,n.localY=i,0))},pointWithinInteractiveObject:function(t,e,i){return!!t.hitArea&&(e+=t.gameObject.displayOriginX,i+=t.gameObject.displayOriginY,t.localX=e,t.localY=i,t.hitAreaCallback(t.hitArea,e,i,t))},transformPointer:function(t,e,i,n){var r=t.position,s=t.prevPosition;s.x=r.x,s.y=r.y;var a=this.scaleManager.transformX(e),o=this.scaleManager.transformY(i),h=t.smoothFactor;n&&0!==h?(r.x=a*h+s.x*(1-h),r.y=o*h+s.y*(1-h)):(r.x=a,r.y=o)},destroy:function(){this.events.removeAllListeners(),this.game.events.off(o.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var t=0;t<this.pointers.length;t++)this.pointers[t].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});t.exports=p},function(t,e,i){var n=i(123),r=i(0),s=i(20),a=i(54),o=i(124),h=i(1),l=new r({initialize:function(t){this.manager=t,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=h,this.onKeyUp=h,t.events.once(a.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputKeyboard,this.target=t.inputKeyboardEventTarget,this.addCapture(t.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(s.POST_STEP,this.postUpdate,this)},startListeners:function(){var t=this;this.onKeyDown=function(e){var i;!e.defaultPrevented&&t.enabled&&t.manager&&(t.queue.push(e),t.manager.useQueue||t.manager.events.emit(a.MANAGER_PROCESS),i=e.altKey||e.ctrlKey||e.shiftKey||e.metaKey,t.preventDefault&&!i&&-1<t.captures.indexOf(e.keyCode)&&e.preventDefault())},this.onKeyUp=function(e){var i;!e.defaultPrevented&&t.enabled&&t.manager&&(t.queue.push(e),t.manager.useQueue||t.manager.events.emit(a.MANAGER_PROCESS),i=e.altKey||e.ctrlKey||e.shiftKey||e.metaKey,t.preventDefault&&!i&&-1<t.captures.indexOf(e.keyCode)&&e.preventDefault())};var e=this.target;e&&(e.addEventListener("keydown",this.onKeyDown,!1),e.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var t=this.target;t.removeEventListener("keydown",this.onKeyDown,!1),t.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(t){"string"==typeof t&&(t=t.split(",")),Array.isArray(t)||(t=[t]);for(var e=this.captures,i=0;i<t.length;i++){var n=t[i];"string"==typeof n&&(n=o[n.trim().toUpperCase()]),-1===e.indexOf(n)&&e.push(n)}this.preventDefault=0<e.length},removeCapture:function(t){"string"==typeof t&&(t=t.split(",")),Array.isArray(t)||(t=[t]);for(var e=this.captures,i=0;i<t.length;i++){var r=t[i];"string"==typeof r&&(r=o[r.toUpperCase()]),n(e,r)}this.preventDefault=0<e.length},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(s.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});t.exports=l},function(t,e,i){var n=i(0),r=i(169),s=i(54),a=i(1),o=new n({initialize:function(t){this.manager=t,this.capture=!0,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=a,this.onMouseDown=a,this.onMouseUp=a,this.onMouseDownWindow=a,this.onMouseUpWindow=a,this.onMouseOver=a,this.onMouseOut=a,this.onMouseWheel=a,this.pointerLockChange=a,t.events.once(s.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputMouse,this.target=t.inputMouseEventTarget,this.capture=t.inputMouseCapture,this.target?"string"==typeof this.target&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,t.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),this},requestPointerLock:function(){var t;r.pointerLock&&((t=this.target).requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,t.requestPointerLock())},releasePointerLock:function(){r.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var t=this,e=this.manager.canvas,i=window&&window.focus&&this.manager.game.config.autoFocus;this.onMouseMove=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onMouseMove(e),t.capture&&e.preventDefault())},this.onMouseDown=function(n){i&&window.focus(),!n.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onMouseDown(n),t.capture&&n.target===e&&n.preventDefault())},this.onMouseDownWindow=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&i.target!==e&&t.manager.onMouseDown(i)},this.onMouseUp=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onMouseUp(i),t.capture&&i.target===e&&i.preventDefault())},this.onMouseUpWindow=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&i.target!==e&&t.manager.onMouseUp(i)},this.onMouseOver=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.setCanvasOver(e)},this.onMouseOut=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.setCanvasOut(e)},this.onMouseWheel=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.onMouseWheel(e)};var n,s,a=this.target;a&&(s={passive:!(n={passive:!0})},a.addEventListener("mousemove",this.onMouseMove,this.capture?s:n),a.addEventListener("mousedown",this.onMouseDown,this.capture?s:n),a.addEventListener("mouseup",this.onMouseUp,this.capture?s:n),a.addEventListener("mouseover",this.onMouseOver,this.capture?s:n),a.addEventListener("mouseout",this.onMouseOut,this.capture?s:n),a.addEventListener("wheel",this.onMouseWheel,this.capture?s:n),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("mousedown",this.onMouseDownWindow,s),window.addEventListener("mouseup",this.onMouseUpWindow,s)),r.pointerLock&&(this.pointerLockChange=function(e){var i=t.target;t.locked=document.pointerLockElement===i||document.mozPointerLockElement===i||document.webkitPointerLockElement===i,t.manager.onPointerLockChange(e)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0)},stopListeners:function(){var t=this.target;t.removeEventListener("mousemove",this.onMouseMove),t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("mouseover",this.onMouseOver),t.removeEventListener("mouseout",this.onMouseOut),window&&(window.removeEventListener("mousedown",this.onMouseDownWindow),window.removeEventListener("mouseup",this.onMouseUpWindow)),r.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});t.exports=o},function(t,e,i){var n=i(317),r=i(0),s=i(53),a=i(106),o=i(328),h=i(3),l=new r({initialize:function(t,e){this.manager=t,this.id=e,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new h,this.prevPosition=new h,this.midPoint=new h(-1,-1),this.velocity=new h,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=0===e,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(t){var e=this.x,i=this.y;1!==t.resolution&&(e+=t._x,i+=t._y);var n=t.getWorldPoint(e,i);return this.worldX=n.x,this.worldY=n.y,this},positionToCamera:function(t,e){return t.getWorldPoint(this.x,this.y,e)},updateMotion:function(){var t,e,i,r,s=this.position.x,h=this.position.y,l=this.midPoint.x,u=this.midPoint.y;s===l&&h===u||(t=o(this.motionFactor,l,s),e=o(this.motionFactor,u,h),a(t,s,.1)&&(t=s),a(e,h,.1)&&(e=h),this.midPoint.set(t,e),i=s-t,r=h-e,this.velocity.set(i,r),this.angle=n(t,e,s,h),this.distance=Math.sqrt(i*i+r*r))},up:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.button=t.button,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),0===t.button&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=t.timeStamp),this.isDown=!1,this.wasTouch=!1},down:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.button=t.button,this.downElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),0===t.button&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=t.timeStamp),this.isDown=!0,this.wasTouch=!1},move:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.manager.transformPointer(this,t.pageX,t.pageY,!0),this.locked&&(this.movementX=t.movementX||t.mozMovementX||t.webkitMovementX||0,this.movementY=t.movementY||t.mozMovementY||t.webkitMovementY||0),this.moveTime=t.timeStamp,this.wasTouch=!1},wheel:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.deltaX=t.deltaX,this.deltaY=t.deltaY,this.deltaZ=t.deltaZ,this.wasTouch=!1},touchstart:function(t,e){t.pointerId&&(this.pointerId=t.pointerId),this.identifier=t.identifier,this.target=t.target,this.active=!0,this.buttons=1,this.event=e,this.downElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=e.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(t,e){this.event=e,this.manager.transformPointer(this,t.pageX,t.pageY,!0),this.moveTime=e.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(t,e){this.buttons=0,this.event=e,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=e.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(t,e){this.buttons=0,this.event=e,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=e.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return 0===this.buttons},leftButtonDown:function(){return!!(1&this.buttons)},rightButtonDown:function(){return!!(2&this.buttons)},middleButtonDown:function(){return!!(4&this.buttons)},backButtonDown:function(){return!!(8&this.buttons)},forwardButtonDown:function(){return!!(16&this.buttons)},leftButtonReleased:function(){return 0===this.button&&!this.isDown},rightButtonReleased:function(){return 2===this.button&&!this.isDown},middleButtonReleased:function(){return 1===this.button&&!this.isDown},backButtonReleased:function(){return 3===this.button&&!this.isDown},forwardButtonReleased:function(){return 4===this.button&&!this.isDown},getDistance:function(){return this.isDown?s(this.downX,this.downY,this.x,this.y):s(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?n(this.downX,this.downY,this.x,this.y):n(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(t,e){void 0===t&&(t=10),void 0===e&&(e=[]);for(var i=this.prevPosition.x,n=this.prevPosition.y,r=this.position.x,s=this.position.y,a=0;a<t;a++){var h=1/t*a;e[a]={x:o(h,i,r),y:o(h,n,s)}}return e},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},time:{get:function(){return this.event?this.event.timeStamp:0}}});t.exports=l},function(t,e,i){var n=i(0),r=i(54),s=i(1),a=new n({initialize:function(t){this.manager=t,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=s,this.onTouchStartWindow=s,this.onTouchMove=s,this.onTouchEnd=s,this.onTouchEndWindow=s,this.onTouchCancel=s,this.onTouchCancelWindow=s,this.onTouchOver=s,this.onTouchOut=s,t.events.once(r.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputTouch,this.target=t.inputTouchEventTarget,this.capture=t.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),t.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),this},startListeners:function(){var t=this,e=this.manager.canvas,i=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(n){i&&window.focus(),!n.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchStart(n),t.capture&&n.cancelable&&n.target===e&&n.preventDefault())},this.onTouchStartWindow=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&i.target!==e&&t.manager.onTouchStart(i)},this.onTouchMove=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchMove(e),t.capture&&e.cancelable&&e.preventDefault())},this.onTouchEnd=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchEnd(i),t.capture&&i.cancelable&&i.target===e&&i.preventDefault())},this.onTouchEndWindow=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&i.target!==e&&t.manager.onTouchEnd(i)},this.onTouchCancel=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchCancel(e),t.capture&&e.preventDefault())},this.onTouchCancelWindow=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.onTouchCancel(e)},this.onTouchOver=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.setCanvasOver(e)},this.onTouchOut=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.setCanvasOut(e)};var n,r,s=this.target;s&&(r={passive:!(n={passive:!0})},s.addEventListener("touchstart",this.onTouchStart,this.capture?r:n),s.addEventListener("touchmove",this.onTouchMove,this.capture?r:n),s.addEventListener("touchend",this.onTouchEnd,this.capture?r:n),s.addEventListener("touchcancel",this.onTouchCancel,this.capture?r:n),s.addEventListener("touchover",this.onTouchOver,this.capture?r:n),s.addEventListener("touchout",this.onTouchOut,this.capture?r:n),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,r),window.addEventListener("touchend",this.onTouchEndWindow,r),window.addEventListener("touchcancel",this.onTouchCancelWindow,r)),this.enabled=!0)},stopListeners:function(){var t=this.target;t.removeEventListener("touchstart",this.onTouchStart),t.removeEventListener("touchmove",this.onTouchMove),t.removeEventListener("touchend",this.onTouchEnd),t.removeEventListener("touchcancel",this.onTouchCancel),t.removeEventListener("touchover",this.onTouchOver),t.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});t.exports=a},function(t,e,i){var n=i(0),r=i(20),s=i(10),a=i(8),o=i(16),h=i(5),l=i(2),u=i(23),c=i(123),d=new n({Extends:s,initialize:function(t){s.call(this),this.game=t,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],t.isBooted?this.boot():t.events.once(r.BOOT,this.boot,this)},boot:function(){for(var t,e,i,n,s,a,o=this.game.config,h=(h=o.installGlobalPlugins).concat(this._pendingGlobal),u=0;u<h.length;u++)t=h[u],e=l(t,"key",null),i=l(t,"plugin",null),n=l(t,"start",!1),s=l(t,"mapping",null),a=l(t,"data",null),e&&(i?this.install(e,i,n,s,a):console.warn("Missing `plugin` for key: "+e));for(h=(h=o.installScenePlugins).concat(this._pendingScene),u=0;u<h.length;u++)t=h[u],e=l(t,"key",null),i=l(t,"plugin",null),s=l(t,"mapping",null),e&&(i?this.installScenePlugin(e,i,s):console.warn("Missing `plugin` for key: "+e));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(r.DESTROY,this.destroy,this)},addToScene:function(t,e,i){for(var n,r=this.game,s=t.scene,a=t.settings.map,o=t.settings.isBooted,h=0;h<e.length;h++)r[f=e[h]]?(t[f]=r[f],a.hasOwnProperty(f)&&(s[a[f]]=t[f])):"game"===f&&a.hasOwnProperty(f)&&(s[a[f]]=r);for(var l=0;l<i.length;l++)for(n=i[l],h=0;h<n.length;h++){var c,d,f=n[h];u.hasCore(f)&&(d=new((c=u.getCore(f)).plugin)(s,this),t[c.mapping]=d,c.custom?s[c.mapping]=d:a.hasOwnProperty(c.mapping)&&(s[a[c.mapping]]=d),o&&d.boot())}for(n=this.plugins,h=0;h<n.length;h++){var p=n[h];p.mapping&&(s[p.mapping]=p.plugin)}},getDefaultScenePlugins:function(){return this.game.config.defaultPlugins.concat(this.scenePlugins)},installScenePlugin:function(t,e,i,n,r){if(void 0===r&&(r=!1),"function"==typeof e){if(u.hasCore(t)){if(!r&&u.hasCore(t))return void console.warn("Scene Plugin key in use: "+t)}else u.register(t,e,i,!0),this.scenePlugins.push(t);var s;n&&(s=new e(n,this),n.sys[t]=s,i&&""!==i&&(n[i]=s),s.boot())}else console.warn("Invalid Scene Plugin: "+t)},install:function(t,e,i,n,r){if(void 0===i&&(i=!1),void 0===n&&(n=null),void 0===r&&(r=null),"function"!=typeof e)return console.warn("Invalid Plugin: "+t),null;if(u.hasCustom(t))return console.warn("Plugin key in use: "+t),null;if(null!==n&&(i=!0),this.game.isBooted){if(u.registerCustom(t,e,n,r),i)return this.start(t)}else this._pendingGlobal.push({key:t,plugin:e,start:i,mapping:n,data:r});return null},getIndex:function(t){for(var e=this.plugins,i=0;i<e.length;i++)if(e[i].key===t)return i;return-1},getEntry:function(t){var e=this.getIndex(t);if(-1!==e)return this.plugins[e]},isActive:function(t){var e=this.getEntry(t);return e&&e.active},start:function(t,e){void 0===e&&(e=t);var i=this.getEntry(e);return i&&!i.active?(i.active=!0,i.plugin.start()):i=i||this.createEntry(t,e),i?i.plugin:null},createEntry:function(t,e){var i,n=u.getCustom(t);return n&&(n={key:e,plugin:i=new n.plugin(this),active:!0,mapping:n.mapping,data:n.data},this.plugins.push(n),i.init(n.data),i.start()),n},stop:function(t){var e=this.getEntry(t);return e&&e.active&&(e.active=!1,e.plugin.stop()),this},get:function(t,e){void 0===e&&(e=!0);var i=this.getEntry(t);if(i)return i.plugin;var n=this.getClass(t);return n&&e?(i=this.createEntry(t,t))?i.plugin:null:n||null},getClass:function(t){return u.getCustomClass(t)},removeGlobalPlugin:function(t){var e=this.getEntry(t);e&&c(this.plugins,e),u.removeCustom(t)},removeScenePlugin:function(t){c(this.scenePlugins,t),u.remove(t)},registerGameObject:function(t,e,i){return e&&h.register(t,e),i&&o.register(t,i),this},removeGameObject:function(t,e,i){return void 0===e&&(e=!0),void 0===i&&(i=!0),e&&h.remove(t),i&&o.remove(t),this},registerFileType:function(t,e,i){a.register(t,e),i&&i.sys.load&&(i.sys.load[t]=e)},destroy:function(){for(var t=0;t<this.plugins.length;t++)this.plugins[t].plugin.destroy();u.destroyCustomPlugins(),this.game.noReturn&&u.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});t.exports=d},function(t,e,i){var n=i(177),r=i(0),s=i(10),a=i(92),o=i(20),h=i(869),l=i(363),u=i(358),c=i(1),d=i(11),f=i(372),p=i(93),g=i(3),m=new r({Extends:s,initialize:function(t){s.call(this),this.game=t,this.canvas,this.canvasBounds=new d,this.parent=null,this.parentIsWindow=!1,this.parentSize=new f,this.gameSize=new f,this.baseSize=new f,this.displaySize=new f,this.scaleMode=n.SCALE_MODE.NONE,this.resolution=1,this.zoom=1,this._resetZoom=!1,this.displayScale=new g(1,1),this.autoRound=!1,this.autoCenter=n.CENTER.NO_CENTER,this.orientation=n.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:c,windowResize:c,fullScreenChange:c,fullScreenError:c}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once("boot",this.boot,this)},boot:function(){var t=this.game;this.canvas=t.canvas,this.fullscreen=t.device.fullscreen,this.scaleMode!==n.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===n.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),0<this.parentSize.width&&0<this.parentSize.height&&this.displaySize.setParent(this.parentSize),this.refresh()),t.events.on(o.PRE_STEP,this.step,this),t.events.once(o.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(t){this.getParent(t),this.getParentBounds();var e,i,r,s,a=t.width,o=t.height,h=t.scaleMode,l=t.resolution,c=t.zoom,d=t.autoRound;"string"==typeof a&&(0===(e=this.parentSize.width)&&(e=window.innerWidth),i=parseInt(a,10)/100,a=Math.floor(e*i)),"string"==typeof o&&(0===(r=this.parentSize.height)&&(r=window.innerHeight),s=parseInt(o,10)/100,o=Math.floor(r*s)),this.resolution=1,this.scaleMode=h,this.autoRound=d,this.autoCenter=t.autoCenter,this.resizeInterval=t.resizeInterval,d&&(a=Math.floor(a),o=Math.floor(o)),this.gameSize.setSize(a,o),c===n.ZOOM.MAX_ZOOM&&(c=this.getMaxZoom()),1!==(this.zoom=c)&&(this._resetZoom=!0),this.baseSize.setSize(a*l,o*l),d&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),0<t.minWidth&&this.displaySize.setMin(t.minWidth*c,t.minHeight*c),0<t.maxWidth&&this.displaySize.setMax(t.maxWidth*c,t.maxHeight*c),this.displaySize.setSize(a,o),this.orientation=u(a,o)},getParent:function(t){var e,i=t.parent;null!==i&&(this.parent=l(i),this.parentIsWindow=this.parent===document.body,t.expandParent&&t.scaleMode!==n.SCALE_MODE.NONE&&(e=this.parent.getBoundingClientRect(),!this.parentIsWindow&&0!==e.height||(document.documentElement.style.height="100%",document.body.style.height="100%",e=this.parent.getBoundingClientRect(),this.parentIsWindow||0!==e.height||(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))),t.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=l(t.fullscreenTarget)))},getParentBounds:function(){if(!this.parent)return!1;var t=this.parentSize,e=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(e.height=h(!0));var i=this.resolution,n=e.width*i,r=e.height*i;return(t.width!==n||t.height!==r)&&(t.setSize(n,r),!0)},lockOrientation:function(t){var e=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return!!e&&e.call(screen,t)},setParentSize:function(t,e){return this.parentSize.setSize(t,e),this.refresh()},setGameSize:function(t,e){var i=this.autoRound,n=this.resolution;i&&(t=Math.floor(t),e=Math.floor(e));var r=this.width,s=this.height;return this.gameSize.resize(t,e),this.baseSize.resize(t*n,e*n),i&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(t/e),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(r,s)},resize:function(t,e){var i=this.zoom,n=this.resolution,r=this.autoRound;r&&(t=Math.floor(t),e=Math.floor(e));var s=this.width,a=this.height;this.gameSize.resize(t,e),this.baseSize.resize(t*n,e*n),r&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(t*i*n,e*i*n),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var o=this.canvas.style,h=t*i,l=e*i;return r&&(h=Math.floor(h),l=Math.floor(l)),h===t&&l===e||(o.width=h+"px",o.height=l+"px"),this.refresh(s,a)},setZoom:function(t){return this.zoom=t,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(t,e){void 0===t&&(t=this.width),void 0===e&&(e=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var i,n,r=this.game.domContainer;return r&&(this.baseSize.setCSS(r),i=this.canvas.style,(n=r.style).transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",n.marginLeft=i.marginLeft,n.marginTop=i.marginTop),this.emit(a.RESIZE,this.gameSize,this.baseSize,this.displaySize,this.resolution,t,e),this},updateOrientation:function(){var t;this._checkOrientation&&(this._checkOrientation=!1,(t=u(this.width,this.height))!==this.orientation&&(this.orientation=t,this.emit(a.ORIENTATION_CHANGE,t)))},updateScale:function(){var t,e,i=this.canvas.style,r=this.gameSize.width,s=this.gameSize.height,a=this.zoom,o=this.autoRound;this.scaleMode===n.SCALE_MODE.NONE?(this.displaySize.setSize(r*a*1,s*a*1),t=+this.displaySize.width,e=+this.displaySize.height,o&&(t=Math.floor(t),e=Math.floor(e)),this._resetZoom&&(i.width=t+"px",i.height=e+"px",this._resetZoom=!1)):this.scaleMode===n.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(+this.displaySize.width,+this.displaySize.height),t=+this.displaySize.width,e=+this.displaySize.height,o&&(t=Math.floor(t),e=Math.floor(e)),this.canvas.width=t,this.canvas.height=e):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),t=+this.displaySize.width,e=+this.displaySize.height,o&&(t=Math.floor(t),e=Math.floor(e)),i.width=t+"px",i.height=e+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var t=p(this.parentSize.width,this.gameSize.width,0,!0),e=p(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(t,e),1)},updateCenter:function(){var t,e,i,r,s,a,o,h=this.autoCenter;h!==n.CENTER.NO_CENTER&&(e=(t=this.canvas).style,r=(i=t.getBoundingClientRect()).width,s=i.height,a=Math.floor((this.parentSize.width-r)/2),o=Math.floor((this.parentSize.height-s)/2),h===n.CENTER.CENTER_HORIZONTALLY?o=0:h===n.CENTER.CENTER_VERTICALLY&&(a=0),e.marginLeft=a+"px",e.marginTop=o+"px")},updateBounds:function(){var t=this.canvasBounds,e=this.canvas.getBoundingClientRect();t.x=e.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),t.y=e.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),t.width=e.width,t.height=e.height},transformX:function(t){return(t-this.canvasBounds.left)*this.displayScale.x},transformY:function(t){return(t-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(t){void 0===t&&(t={navigationUI:"hide"});var e,i=this.fullscreen;i.available?i.active||(e=this.getFullscreenTarget(),i.keyboard?e[i.request](Element.ALLOW_KEYBOARD_INPUT):e[i.request](t)):this.emit(a.FULLSCREEN_UNSUPPORTED)},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(a.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(t){this.removeFullscreenTarget(),this.emit(a.FULLSCREEN_FAILED,t)},getFullscreenTarget:function(){var t;return this.fullscreenTarget||((t=document.createElement("div")).style.margin="0",t.style.padding="0",t.style.width="100%",t.style.height="100%",this.fullscreenTarget=t,this._createdFullscreenTarget=!0),this._createdFullscreenTarget&&(this.canvas.parentNode.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)),this.fullscreenTarget},removeFullscreenTarget:function(){var t,e;!this._createdFullscreenTarget||(t=this.fullscreenTarget)&&t.parentNode&&((e=t.parentNode).insertBefore(this.canvas,t),e.removeChild(t))},stopFullscreen:function(){var t=this.fullscreen;if(!t.available)return this.emit(a.FULLSCREEN_UNSUPPORTED),!1;t.active&&document[t.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(a.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(t){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(t)},startListeners:function(){var t=this,e=this.listeners;e.orientationChange=function(){t._checkOrientation=!0,t.dirty=!0},e.windowResize=function(){t.dirty=!0},window.addEventListener("orientationchange",e.orientationChange,!1),window.addEventListener("resize",e.windowResize,!1),this.fullscreen.available&&(e.fullScreenChange=function(e){return t.onFullScreenChange(e)},e.fullScreenError=function(e){return t.onFullScreenError(e)},["webkit","moz",""].forEach((function(t){document.addEventListener(t+"fullscreenchange",e.fullScreenChange,!1),document.addEventListener(t+"fullscreenerror",e.fullScreenError,!1)})),document.addEventListener("MSFullscreenChange",e.fullScreenChange,!1),document.addEventListener("MSFullscreenError",e.fullScreenError,!1))},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(t,e){this.parent&&(this._lastCheck+=e,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var t=this.listeners;window.removeEventListener("orientationchange",t.orientationChange,!1),window.removeEventListener("resize",t.windowResize,!1),["webkit","moz",""].forEach((function(e){document.removeEventListener(e+"fullscreenchange",t.fullScreenChange,!1),document.removeEventListener(e+"fullscreenerror",t.fullScreenError,!1)})),document.removeEventListener("MSFullscreenChange",t.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",t.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===n.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===n.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});t.exports=m},function(t,e,i){var n=i(19),r=i(0),s=i(93),a=i(3),o=new r({initialize:function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=0),void 0===n&&(n=null),this._width=t,this._height=e,this._parent=n,this.aspectMode=i,this.aspectRatio=0===e?1:t/e,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new a},setAspectMode:function(t){return void 0===t&&(t=0),this.aspectMode=t,this.setSize(this._width,this._height)},setSnap:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.snapTo.set(t,e),this.setSize(this._width,this._height)},setParent:function(t){return this._parent=t,this.setSize(this._width,this._height)},setMin:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.minWidth=n(t,0,this.maxWidth),this.minHeight=n(e,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(t,e){return void 0===t&&(t=Number.MAX_VALUE),void 0===e&&(e=t),this.maxWidth=n(t,this.minWidth,Number.MAX_VALUE),this.maxHeight=n(e,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(t,e){switch(void 0===t&&(t=0),void 0===e&&(e=t),this.aspectMode){case o.NONE:this._width=this.getNewWidth(s(t,this.snapTo.x)),this._height=this.getNewHeight(s(e,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height;break;case o.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(s(t,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case o.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(s(e,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case o.FIT:this.constrain(t,e,!0);break;case o.ENVELOP:this.constrain(t,e,!1)}return this},setAspectRatio:function(t){return this.aspectRatio=t,this.setSize(this._width,this._height)},resize:function(t,e){return this._width=this.getNewWidth(s(t,this.snapTo.x)),this._height=this.getNewHeight(s(e,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height,this},getNewWidth:function(t,e){return void 0===e&&(e=!0),t=n(t,this.minWidth,this.maxWidth),e&&this._parent&&t>this._parent.width&&(t=Math.max(this.minWidth,this._parent.width)),t},getNewHeight:function(t,e){return void 0===e&&(e=!0),t=n(t,this.minHeight,this.maxHeight),e&&this._parent&&t>this._parent.height&&(t=Math.max(this.minHeight,this._parent.height)),t},constrain:function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=!0),t=this.getNewWidth(t),e=this.getNewHeight(e);var n=this.snapTo,r=0===e?1:t/e;return i&&this.aspectRatio>r||!i&&this.aspectRatio<r?(e=(t=s(t,n.x))/this.aspectRatio,0<n.y&&(t=(e=s(e,n.y))*this.aspectRatio)):(i&&this.aspectRatio<r||!i&&this.aspectRatio>r)&&(t=(e=s(e,n.y))*this.aspectRatio,0<n.x&&(e=(t=s(t,n.x))*(1/this.aspectRatio))),this._width=t,this._height=e,this},fitTo:function(t,e){return this.constrain(t,e,!0)},envelop:function(t,e){return this.constrain(t,e,!1)},setWidth:function(t){return this.setSize(t,this._height)},setHeight:function(t){return this.setSize(this._width,t)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(t){t&&t.style&&(t.style.width=this._width+"px",t.style.height=this._height+"px")},copy:function(t){return t.setAspectMode(this.aspectMode),t.aspectRatio=this.aspectRatio,t.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(t){this.setSize(t,this._height)}},height:{get:function(){return this._height},set:function(t){this.setSize(this._width,t)}}});o.NONE=0,o.WIDTH_CONTROLS_HEIGHT=1,o.HEIGHT_CONTROLS_WIDTH=2,o.FIT=3,o.ENVELOP=4,t.exports=o},function(t,e,i){var n=i(0),r=i(125),s=i(22),a=i(20),o=i(6),h=i(82),l=i(1),u=i(374),c=i(180),d=new n({initialize:function(t,e){if(this.game=t,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++)this._pending.push({key:"default",scene:e[i],autoStart:0===i,data:{}})}t.events.once(a.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){for(var t=0;t<this._pending.length;t++){var e,i,n,r=(i=this._pending[t]).key;(n=i.scene)instanceof u?e=this.createSceneFromInstance(r,n):"object"==typeof n?e=this.createSceneFromObject(r,n):"function"==typeof n&&(e=this.createSceneFromFunction(r,n)),r=e.sys.settings.key,this.keys[r]=e,this.scenes.push(e),this._data[r]&&(e.sys.settings.data=this._data[r].data,this._data[r].autoStart&&(i.autoStart=!0)),(i.autoStart||e.sys.settings.active)&&this._start.push(r)}for(this._pending.length=0,this._data={},this.isBooted=!0,t=0;t<this._start.length;t++)i=this._start[t],this.start(i);this._start.length=0}},processQueue:function(){var t,e,i=this._pending.length,n=this._queue.length;if(0!==i||0!==n){if(i){for(t=0;t<i;t++)e=this._pending[t],this.add(e.key,e.scene,e.autoStart,e.data);for(t=0;t<this._start.length;t++)e=this._start[t],this.start(e);return this._start.length=0,void(this._pending.length=0)}for(t=0;t<this._queue.length;t++)this[(e=this._queue[t]).op](e.keyA,e.keyB);this._queue.length=0}},add:function(t,e,i,n){return void 0===i&&(i=!1),void 0===n&&(n={}),this.isProcessing||!this.isBooted?(this._pending.push({key:t,scene:e,autoStart:i,data:n}),this.isBooted||(this._data[t]={data:n}),null):(t=this.getKey(t,e),e instanceof u?r=this.createSceneFromInstance(t,e):"object"==typeof e?(e.key=t,r=this.createSceneFromObject(t,e)):"function"==typeof e&&(r=this.createSceneFromFunction(t,e)),r.sys.settings.data=n,t=r.sys.settings.key,this.keys[t]=r,this.scenes.push(r),(i||r.sys.settings.active)&&(this._pending.length?this._start.push(t):this.start(t)),r);var r},remove:function(t){if(this.isProcessing)this._queue.push({op:"remove",keyA:t,keyB:null});else{var e=this.getScene(t);if(!e||e.sys.isTransitioning())return this;var i=this.scenes.indexOf(e),n=e.sys.settings.key;-1<i&&(delete this.keys[n],this.scenes.splice(i,1),-1<this._start.indexOf(n)&&(i=this._start.indexOf(n),this._start.splice(i,1)),e.sys.destroy())}return this},bootScene:function(t){var e,i=t.sys,n=i.settings;i.sceneUpdate=l,t.init&&(t.init.call(t,n.data),n.status=r.INIT,n.isTransition&&i.events.emit(s.TRANSITION_INIT,n.transitionFrom,n.transitionDuration)),i.load&&(e=i.load).reset(),e&&t.preload?(t.preload.call(t),0===e.list.size?this.create(t):(n.status=r.LOADING,e.once(h.COMPLETE,this.loadComplete,this),e.start())):this.create(t)},loadComplete:function(t){var e=t.scene;this.game.sound&&this.game.sound.onBlurPausedSounds&&this.game.sound.unlock(),this.create(e)},payloadComplete:function(t){this.bootScene(t.scene)},update:function(t,e){this.processQueue(),this.isProcessing=!0;for(var i=this.scenes.length-1;0<=i;i--){var n=this.scenes[i].sys;n.settings.status>r.START&&n.settings.status<=r.RUNNING&&n.step(t,e)}},render:function(t){for(var e=0;e<this.scenes.length;e++){var i=this.scenes[e].sys;i.settings.visible&&i.settings.status>=r.LOADING&&i.settings.status<r.SLEEPING&&i.render(t)}this.isProcessing=!1},create:function(t){var e=t.sys,i=e.settings;t.create&&(i.status=r.CREATING,t.create.call(t,i.data),i.status===r.DESTROYED)||(i.isTransition&&e.events.emit(s.TRANSITION_START,i.transitionFrom,i.transitionDuration),t.update&&(e.sceneUpdate=t.update),i.status=r.RUNNING,e.events.emit(s.CREATE,t))},createSceneFromFunction:function(t,e){var i=new e;if(i instanceof u){var n=i.sys.settings.key;if(""!==n&&(t=n),this.keys.hasOwnProperty(t))throw new Error("Cannot add a Scene with duplicate key: "+t);return this.createSceneFromInstance(t,i)}return i.sys=new c(i),i.sys.settings.key=t,i.sys.init(this.game),i},createSceneFromInstance:function(t,e){return""===e.sys.settings.key&&(e.sys.settings.key=t),e.sys.init(this.game),e},createSceneFromObject:function(t,e){var i=new u(e),n=i.sys.settings.key;""!==n?t=n:i.sys.settings.key=t,i.sys.init(this.game);for(var r,s=["init","preload","create","update","render"],a=0;a<s.length;a++){var h=o(e,s[a],null);h&&(i[s[a]]=h)}if(e.hasOwnProperty("extend"))for(var l in e.extend)e.extend.hasOwnProperty(l)&&(r=e.extend[l],"data"===l&&i.hasOwnProperty("data")&&"object"==typeof r?i.data.merge(r):"sys"!==l&&(i[l]=r));return i},getKey:function(t,e){if(t=t||"default","function"==typeof e)return t;if(e instanceof u?t=e.sys.settings.key:"object"==typeof e&&e.hasOwnProperty("key")&&(t=e.key),this.keys.hasOwnProperty(t))throw new Error("Cannot add a Scene with duplicate key: "+t);return t},getScenes:function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!1);for(var i=[],n=this.scenes,r=0;r<n.length;r++){var s=n[r];s&&(!t||t&&s.sys.isActive())&&i.push(s)}return e?i.reverse():i},getScene:function(t){if("string"==typeof t){if(this.keys[t])return this.keys[t]}else for(var e=0;e<this.scenes.length;e++)if(t===this.scenes[e])return t;return null},isActive:function(t){var e=this.getScene(t);return e?e.sys.isActive():null},isPaused:function(t){var e=this.getScene(t);return e?e.sys.isPaused():null},isVisible:function(t){var e=this.getScene(t);return e?e.sys.isVisible():null},isSleeping:function(t){var e=this.getScene(t);return e?e.sys.isSleeping():null},pause:function(t,e){var i=this.getScene(t);return i&&i.sys.pause(e),this},resume:function(t,e){var i=this.getScene(t);return i&&i.sys.resume(e),this},sleep:function(t,e){var i=this.getScene(t);return i&&!i.sys.isTransitioning()&&i.sys.sleep(e),this},wake:function(t,e){var i=this.getScene(t);return i&&i.sys.wake(e),this},run:function(t,e){var i=this.getScene(t);if(!i){for(var n=0;n<this._pending.length;n++)if(this._pending[n].key===t){this.queueOp("start",t,e);break}return this}i.sys.isSleeping()?i.sys.wake(e):i.sys.isPaused()?i.sys.resume(e):this.start(t,e)},start:function(t,e){if(!this.isBooted)return this._data[t]={autoStart:!0,data:e},this;var i,n=this.getScene(t);if(n){if(n.sys.isActive()||n.sys.isPaused())n.sys.shutdown(),n.sys.start(e);else if(n.sys.start(e),n.sys.load&&(i=n.sys.load),i&&n.sys.settings.hasOwnProperty("pack")&&(i.reset(),i.addPack({payload:n.sys.settings.pack})))return n.sys.settings.status=r.LOADING,i.once(h.COMPLETE,this.payloadComplete,this),i.start(),this;this.bootScene(n)}return this},stop:function(t,e){var i=this.getScene(t);return i&&!i.sys.isTransitioning()&&i.sys.shutdown(e),this},switch:function(t,e){var i=this.getScene(t),n=this.getScene(e);return i&&n&&i!==n&&(this.sleep(t),this.isSleeping(e)?this.wake(e):this.start(e)),this},getAt:function(t){return this.scenes[t]},getIndex:function(t){var e=this.getScene(t);return this.scenes.indexOf(e)},bringToTop:function(t){var e,i;return this.isProcessing?this._queue.push({op:"bringToTop",keyA:t,keyB:null}):-1!==(e=this.getIndex(t))&&e<this.scenes.length&&(i=this.getScene(t),this.scenes.splice(e,1),this.scenes.push(i)),this},sendToBack:function(t){var e,i;return this.isProcessing?this._queue.push({op:"sendToBack",keyA:t,keyB:null}):-1!==(e=this.getIndex(t))&&0<e&&(i=this.getScene(t),this.scenes.splice(e,1),this.scenes.unshift(i)),this},moveDown:function(t){var e,i,n,r;return this.isProcessing?this._queue.push({op:"moveDown",keyA:t,keyB:null}):0<(e=this.getIndex(t))&&(i=e-1,n=this.getScene(t),r=this.getAt(i),this.scenes[e]=r,this.scenes[i]=n),this},moveUp:function(t){var e,i,n,r;return this.isProcessing?this._queue.push({op:"moveUp",keyA:t,keyB:null}):(e=this.getIndex(t))<this.scenes.length-1&&(i=e+1,n=this.getScene(t),r=this.getAt(i),this.scenes[e]=r,this.scenes[i]=n),this},moveAbove:function(t,e){return t===e||(this.isProcessing?this._queue.push({op:"moveAbove",keyA:t,keyB:e}):(i=this.getIndex(t),n=this.getIndex(e),-1!==i&&-1!==n&&(r=this.getAt(n),this.scenes.splice(n,1),this.scenes.splice(i+1,0,r)))),this;var i,n,r},moveBelow:function(t,e){return t===e||(this.isProcessing?this._queue.push({op:"moveBelow",keyA:t,keyB:e}):(i=this.getIndex(t),n=this.getIndex(e),-1!==i&&-1!==n&&(r=this.getAt(n),this.scenes.splice(n,1),0===i?this.scenes.unshift(r):this.scenes.splice(i,0,r)))),this;var i,n,r},queueOp:function(t,e,i){return this._queue.push({op:t,keyA:e,keyB:i}),this},swapPosition:function(t,e){return t===e||(this.isProcessing?this._queue.push({op:"swapPosition",keyA:t,keyB:e}):(i=this.getIndex(t))!==(n=this.getIndex(e))&&-1!==i&&-1!==n&&(r=this.getAt(i),this.scenes[i]=this.scenes[n],this.scenes[n]=r)),this;var i,n,r},dump:function(){for(var t=[],e=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],i=0;i<this.scenes.length;i++){var n=this.scenes[i].sys,s=!n.settings.visible||n.settings.status!==r.RUNNING&&n.settings.status!==r.PAUSED?"[-] ":"[*] ";s+=n.settings.key+" ("+e[n.settings.status]+")",t.push(s)}console.log(t.join("\n"))},destroy:function(){for(var t=0;t<this.scenes.length;t++)this.scenes[t].sys.destroy();this.update=l,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});t.exports=d},function(t,e,i){var n=i(0),r=i(180),s=new n({initialize:function(t){this.sys=new r(this,t),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins},update:function(){}});t.exports=s},function(t,e,i){var n=i(125),r=i(6),s=i(126),a=i(882),o={create:function(t){return"string"==typeof t?t={key:t}:void 0===t&&(t={}),{status:n.PENDING,key:r(t,"key",""),active:r(t,"active",!1),visible:r(t,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:r(t,"pack",!1),cameras:r(t,"cameras",null),map:r(t,"map",s(a,r(t,"mapAdd",{}))),physics:r(t,"physics",{}),loader:r(t,"loader",{}),plugins:r(t,"plugins",!1),input:r(t,"input",{})}}};t.exports=o},function(t,e,i){var n=i(26),r=i(377),s=i(0),a=i(31),o=i(33),h=i(10),l=i(121),u=i(20),c=i(346),d=i(6),f=i(379),p=i(182),g=new s({Extends:h,initialize:function(t){h.call(this),this.game=t,this.name="TextureManager",this.list={},this._tempCanvas=n.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,t.events.once(u.BOOT,this.boot,this)},boot:function(){this._pending=2,this.on(l.LOAD,this.updatePending,this),this.on(l.ERROR,this.updatePending,this),this.addBase64("__DEFAULT",this.game.config.defaultImage),this.addBase64("__MISSING",this.game.config.missingImage),this.game.events.once(u.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,0===this._pending&&(this.off(l.LOAD),this.off(l.ERROR),this.emit(l.READY))},checkKey:function(t){return!this.exists(t)||(console.error("Texture key already in use: "+t),!1)},remove:function(t){if("string"==typeof t){if(!this.exists(t))return console.warn("No texture found matching key: "+t),this;t=this.get(t)}return this.list.hasOwnProperty(t.key)&&(t.destroy(),this.emit(l.REMOVE,t.key)),this},removeKey:function(t){return this.list.hasOwnProperty(t)&&delete this.list[t],this},addBase64:function(t,e){var i,n;return this.checkKey(t)&&(i=this,(n=new Image).onerror=function(){i.emit(l.ERROR,t)},n.onload=function(){var e=i.create(t,n);f.Image(e,0),i.emit(l.ADD,t,e),i.emit(l.LOAD,t,e)},n.src=e),this},getBase64:function(t,e,i,r){void 0===i&&(i="image/png"),void 0===r&&(r=.92);var s,a,o="",h=this.getFrame(t,e);return h&&(h.source.isRenderTexture||h.source.isGLTexture)?console.warn("Cannot getBase64 from WebGL Texture"):h&&(s=h.canvasData,(a=n.create2D(this,s.width,s.height)).getContext("2d").drawImage(h.source.image,s.x,s.y,s.width,s.height,0,0,s.width,s.height),o=a.toDataURL(i,r),n.remove(a)),o},addImage:function(t,e,i){var n=null;return this.checkKey(t)&&(n=this.create(t,e),f.Image(n,0),i&&n.setDataSource(i),this.emit(l.ADD,t,n)),n},addGLTexture:function(t,e,i,n){var r=null;return this.checkKey(t)&&((r=this.create(t,e,i,n)).add("__BASE",0,0,0,i,n),this.emit(l.ADD,t,r)),r},addRenderTexture:function(t,e){var i=null;return this.checkKey(t)&&((i=this.create(t,e)).add("__BASE",0,0,0,e.width,e.height),this.emit(l.ADD,t,i)),i},generate:function(t,e){if(this.checkKey(t)){var i=n.create(this,1,1);return e.canvas=i,c(e),this.addCanvas(t,i)}return null},createCanvas:function(t,e,i){if(void 0===e&&(e=256),void 0===i&&(i=256),this.checkKey(t)){var r=n.create(this,e,i,o.CANVAS,!0);return this.addCanvas(t,r)}return null},addCanvas:function(t,e,i){void 0===i&&(i=!1);var n=null;return i?n=new r(this,t,e,e.width,e.height):this.checkKey(t)&&(n=new r(this,t,e,e.width,e.height),this.list[t]=n,this.emit(l.ADD,t,n)),n},addAtlas:function(t,e,i,n){return Array.isArray(i.textures)||Array.isArray(i.frames)?this.addAtlasJSONArray(t,e,i,n):this.addAtlasJSONHash(t,e,i,n)},addAtlasJSONArray:function(t,e,i,n){var r=null;if(this.checkKey(t)){if(r=this.create(t,e),Array.isArray(i))for(var s=1===i.length,a=0;a<r.source.length;a++){var o=s?i[0]:i[a];f.JSONArray(r,a,o)}else f.JSONArray(r,0,i);n&&r.setDataSource(n),this.emit(l.ADD,t,r)}return r},addAtlasJSONHash:function(t,e,i,n){var r=null;if(this.checkKey(t)){if(r=this.create(t,e),Array.isArray(i))for(var s=0;s<i.length;s++)f.JSONHash(r,s,i[s]);else f.JSONHash(r,0,i);n&&r.setDataSource(n),this.emit(l.ADD,t,r)}return r},addAtlasXML:function(t,e,i,n){var r=null;return this.checkKey(t)&&(r=this.create(t,e),f.AtlasXML(r,0,i),n&&r.setDataSource(n),this.emit(l.ADD,t,r)),r},addUnityAtlas:function(t,e,i,n){var r=null;return this.checkKey(t)&&(r=this.create(t,e),f.UnityYAML(r,0,i),n&&r.setDataSource(n),this.emit(l.ADD,t,r)),r},addSpriteSheet:function(t,e,i){var n,r,s=null;return this.checkKey(t)&&(n=(s=this.create(t,e)).source[0].width,r=s.source[0].height,f.SpriteSheet(s,0,0,0,n,r,i),this.emit(l.ADD,t,s)),s},addSpriteSheetFromAtlas:function(t,e){if(!this.checkKey(t))return null;var i=d(e,"atlas",null),n=d(e,"frame",null);if(i&&n){var r=this.get(i).get(n);if(r){var s=this.create(t,r.source.image);return r.trimmed?f.SpriteSheetFromAtlas(s,r,e):f.SpriteSheet(s,0,r.cutX,r.cutY,r.cutWidth,r.cutHeight,e),this.emit(l.ADD,t,s),s}}},create:function(t,e,i,n){var r=null;return this.checkKey(t)&&(r=new p(this,t,e,i,n),this.list[t]=r),r},exists:function(t){return this.list.hasOwnProperty(t)},get:function(t){return void 0===t&&(t="__DEFAULT"),this.list[t]?this.list[t]:t instanceof p?t:this.list.__MISSING},cloneFrame:function(t,e){if(this.list[t])return this.list[t].get(e).clone()},getFrame:function(t,e){if(this.list[t])return this.list[t].get(e)},getTextureKeys:function(){var t=[];for(var e in this.list)"__DEFAULT"!==e&&"__MISSING"!==e&&t.push(e);return t},getPixel:function(t,e,i,n){var r=this.getFrame(i,n);if(r){t-=r.x,e-=r.y;var s=r.data.cut;if(t+=s.x,e+=s.y,t>=s.x&&t<s.r&&e>=s.y&&e<s.b){var o=this._tempContext;o.clearRect(0,0,1,1),o.drawImage(r.source.image,t,e,1,1,0,0,1,1);var h=o.getImageData(0,0,1,1);return new a(h.data[0],h.data[1],h.data[2],h.data[3])}}return null},getPixelAlpha:function(t,e,i,n){var r=this.getFrame(i,n);if(r){t-=r.x,e-=r.y;var s=r.data.cut;if(t+=s.x,e+=s.y,t>=s.x&&t<s.r&&e>=s.y&&e<s.b){var a=this._tempContext;return a.clearRect(0,0,1,1),a.drawImage(r.source.image,t,e,1,1,0,0,1,1),a.getImageData(0,0,1,1).data[3]}}return null},setTexture:function(t,e,i){return this.list[e]&&(t.texture=this.list[e],t.frame=t.texture.get(i)),t},renameTexture:function(t,e){var i=this.get(t);return!(!i||t===e||(i.key=e,this.list[e]=i,delete this.list[t],0))},each:function(t,e){for(var i=[null],n=1;n<arguments.length;n++)i.push(arguments[n]);for(var r in this.list)i[0]=this.list[r],t.apply(e,i)},destroy:function(){for(var t in this.list)this.list[t].destroy();this.list={},this.game=null,n.remove(this._tempCanvas)}});t.exports=g},function(t,e,i){var n=i(0),r=i(19),s=i(31),a=i(33),o=i(120),h=i(182),l=new n({Extends:h,initialize:function(t,e,i,n,r){h.call(this,t,e,i,n,r),this.add("__BASE",0,0,0,n,r),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=n,this.height=r,this.imageData=this.context.getImageData(0,0,n,r),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===a.WEBGL&&this.refresh(),this},draw:function(t,e,i){return this.context.drawImage(i,t,e),this.update()},drawFrame:function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var r=this.manager.getFrame(t,e);if(r){var s=r.canvasData,a=r.cutWidth,o=r.cutHeight,h=r.source.resolution;return this.context.drawImage(r.source.image,s.x,s.y,a,o,i,n,a/h,o/h),this.update()}return this},setPixel:function(t,e,i,n,r,s){var a;return void 0===s&&(s=255),t=Math.abs(Math.floor(t)),e=Math.abs(Math.floor(e)),-1<this.getIndex(t,e)&&((a=this.context.getImageData(t,e,1,1)).data[0]=i,a.data[1]=n,a.data[2]=r,a.data[3]=s,this.context.putImageData(a,t,e)),this},putData:function(t,e,i,n,r,s,a){return void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=t.width),void 0===a&&(a=t.height),this.context.putImageData(t,e,i,n,r,s,a),this},getData:function(t,e,i,n){return t=r(Math.floor(t),0,this.width-1),e=r(Math.floor(e),0,this.height-1),i=r(i,1,this.width-t),n=r(n,1,this.height-e),this.context.getImageData(t,e,i,n)},getPixel:function(t,e,i){i=i||new s;var n,r,a,o,h,l=this.getIndex(t,e);return-1<l&&(r=(n=this.data)[l+0],a=n[l+1],o=n[l+2],h=n[l+3],i.setTo(r,a,o,h)),i},getPixels:function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.width),void 0===n&&(n=i),t=Math.abs(Math.round(t)),e=Math.abs(Math.round(e));for(var a=r(t,0,this.width),o=r(t+i,0,this.width),h=r(e,0,this.height),l=r(e+n,0,this.height),u=new s,c=[],d=h;d<l;d++){for(var f=[],p=a;p<o;p++)u=this.getPixel(p,d,u),f.push({x:p,y:d,color:u.color,alpha:u.alphaGL});c.push(f)}return c},getIndex:function(t,e){return t=Math.abs(Math.round(t)),e=Math.abs(Math.round(e)),t<this.width&&e<this.height?4*(t+e*this.width):-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(t,e,i,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.width),void 0===n&&(n=this.height),this.context.clearRect(t,e,i,n),this.update()},setSize:function(t,e){return void 0===e&&(e=t),t===this.width&&e===this.height||(this.canvas.width=t,this.canvas.height=e,this._source.width=t,this._source.height=e,this._source.isPowerOf2=o(t,e),this.frames.__BASE.setSize(t,e,0,0),this.width=t,this.height=e,this.refresh()),this},destroy:function(){h.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});t.exports=l},function(t,e,i){var n=i(26),r=i(0),s=i(120),a=i(234),o=new r({initialize:function(t,e,i,n,r){void 0===r&&(r=!1);var o=t.manager.game;this.renderer=o.renderer,this.texture=t,this.source=e,this.image=e,this.compressionAlgorithm=null,this.resolution=1,this.width=i||e.naturalWidth||e.videoWidth||e.width||0,this.height=n||e.naturalHeight||e.videoHeight||e.height||0,this.scaleMode=a.DEFAULT,this.isCanvas=e instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&e instanceof HTMLVideoElement,this.isRenderTexture="RenderTexture"===e.type,this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&e instanceof WebGLTexture,this.isPowerOf2=s(this.width,this.height),this.glTexture=null,this.flipY=r,this.init(o)},init:function(t){this.renderer&&(this.renderer.gl?this.isCanvas?this.glTexture=this.renderer.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=this.renderer.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=this.renderer.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=this.renderer.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),t.config.antialias||this.setFilter(1)},setFilter:function(t){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,t),this.scaleMode=t},setFlipY:function(t){return void 0===t&&(t=!0),this.flipY=t,this},update:function(){var t=this.renderer.gl;t&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):t&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture),this.isCanvas&&n.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});t.exports=o},function(t,e,i){t.exports={AtlasXML:i(883),Canvas:i(884),Image:i(885),JSONArray:i(886),JSONHash:i(887),SpriteSheet:i(888),SpriteSheetFromAtlas:i(889),UnityYAML:i(890)}},function(t,e,i){var n=i(381),r=i(385),s=i(387),a={create:function(t){var e=t.config.audio,i=t.device.audio;return new(e&&e.noAudio||!i.webAudio&&!i.audioData?r:!i.webAudio||e&&e.disableWebAudio?n:s)(t)}};t.exports=a},function(t,e,i){var n=i(127),r=i(0),s=i(59),a=i(384),o=new r({Extends:n,initialize:function(t){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,n.call(this,t)},add:function(t,e){var i=new a(this,t,e);return this.sounds.push(i),i},unlock:function(){this.locked=!1;var t,e,i,n=this;this.game.cache.audio.entries.each((function(t,e){for(var i=0;i<e.length;i++)if("true"===e[i].dataset.locked)return!(n.locked=!0);return!0})),this.locked&&(t=!1,e=function(){t=!0},i=function(){var r,s;t?t=!1:(document.body.removeEventListener("touchmove",e),document.body.removeEventListener("touchend",i),r=[],n.game.cache.audio.entries.each((function(t,e){for(var i=0;i<e.length;i++){var n=e[i];"true"===n.dataset.locked&&r.push(n)}return!0})),0!==r.length&&((s=r[r.length-1]).oncanplaythrough=function(){s.oncanplaythrough=null,r.forEach((function(t){t.dataset.locked="false"})),n.unlocked=!0},r.forEach((function(t){t.load()}))))},this.once(s.UNLOCKED,(function(){for(this.forEachActiveSound((function(t){null===t.currentMarker&&0===t.duration&&(t.duration=t.tags[0].duration),t.totalDuration=t.tags[0].duration}));this.lockedActionsQueue.length;){var t=this.lockedActionsQueue.shift();t.sound[t.prop].apply?t.sound[t.prop].apply(t.sound,t.value||[]):t.sound[t.prop]=t.value}}),this),document.body.addEventListener("touchmove",e,!1),document.body.addEventListener("touchend",i,!1))},onBlur:function(){this.forEachActiveSound((function(t){t.isPlaying&&(this.onBlurPausedSounds.push(t),t.onBlur())}))},onFocus:function(){this.onBlurPausedSounds.forEach((function(t){t.onFocus()})),this.onBlurPausedSounds.length=0},destroy:function(){n.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(t,e,i){return"true"===t.tags[0].dataset.locked&&(this.lockedActionsQueue.push({sound:t,prop:e,value:i}),!0)},setMute:function(t){return this.mute=t,this},mute:{get:function(){return this._mute},set:function(t){this._mute=t,this.forEachActiveSound((function(t){t.updateMute()})),this.emit(s.GLOBAL_MUTE,this,t)}},setVolume:function(t){return this.volume=t,this},volume:{get:function(){return this._volume},set:function(t){this._volume=t,this.forEachActiveSound((function(t){t.updateVolume()})),this.emit(s.GLOBAL_VOLUME,this,t)}}});t.exports=o},function(t,e,i){var n=i(68);t.exports=function(t,e,i,r,s){void 0===r&&(r=0),void 0===s&&(s=t.length);var a=[];if(n(t,r,s))for(var o=r;o<s;o++){var h=t[o];(!e||e&&void 0===i&&h.hasOwnProperty(e)||e&&void 0!==i&&h[e]===i)&&a.push(h)}return a}},function(t,e,i){var n=i(68);t.exports=function(t,e,i,r,s){if(void 0===r&&(r=0),void 0===s&&(s=t.length),n(t,r,s))for(var a=r;a<s;a++){var o=t[a];if(!e||e&&void 0===i&&o.hasOwnProperty(e)||e&&void 0!==i&&o[e]===i)return o}return null}},function(t,e,i){var n=i(128),r=i(0),s=i(59),a=i(19),o=new r({Extends:n,initialize:function(t,e,i){if(void 0===i&&(i={}),this.tags=t.game.cache.audio.get(e),!this.tags)throw new Error('There is no audio asset with key "'+e+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,n.call(this,t,e,i)},play:function(t,e){return!(this.manager.isLocked(this,"play",[t,e])||!n.prototype.play.call(this,t,e)||!this.pickAndPlayAudioTag()||(this.emit(s.PLAY,this),0))},pause:function(){return!(this.manager.isLocked(this,"pause")||0<this.startTime||!n.prototype.pause.call(this)||(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(s.PAUSE,this),0))},resume:function(){return!(this.manager.isLocked(this,"resume")||0<this.startTime||!n.prototype.resume.call(this)||!this.pickAndPlayAudioTag()||(this.emit(s.RESUME,this),0))},stop:function(){return!this.manager.isLocked(this,"stop")&&!!n.prototype.stop.call(this)&&(this.stopAndReleaseAudioTag(),this.emit(s.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var t=this.currentConfig.seek,e=this.currentConfig.delay,i=(this.currentMarker?this.currentMarker.start:0)+t;return this.previousTime=i,this.audio.currentTime=i,this.applyConfig(),0===e?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+1e3*e,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var t=0;t<this.tags.length;t++){var e=this.tags[t];if("false"===e.dataset.used)return e.dataset.used="true",this.audio=e,!0}if(!this.manager.override)return!1;var i=[];this.manager.forEachActiveSound((function(t){t.key===this.key&&t.audio&&i.push(t)}),this),i.sort((function(t,e){return t.loop===e.loop?e.seek/e.duration-t.seek/t.duration:t.loop?1:-1}));var n=i[0];return this.audio=n.audio,n.reset(),n.audio=null,n.startTime=0,!(n.previousTime=0)},playCatchPromise:function(){var t=this.audio.play();t&&t.catch((function(t){console.warn(t)}))},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){n.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(t,e){if(this.isPlaying)if(0<this.startTime)this.startTime<t-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,t-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());else{var i=this.currentMarker?this.currentMarker.start:0,n=i+this.duration,r=this.audio.currentTime;if(this.currentConfig.loop)r>=n-this.manager.loopEndOffset?(this.audio.currentTime=i+Math.max(0,r-n),r=this.audio.currentTime):r<i&&(this.audio.currentTime+=i,r=this.audio.currentTime),r<this.previousTime&&this.emit(s.LOOPED,this);else if(n<=r)return this.reset(),this.stopAndReleaseAudioTag(),void this.emit(s.COMPLETE,this);this.previousTime=r}},destroy:function(){n.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=a(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){n.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(t){this.currentConfig.mute=t,this.manager.isLocked(this,"mute",t)||(this.updateMute(),this.emit(s.MUTE,this,t))}},setMute:function(t){return this.mute=t,this},volume:{get:function(){return this.currentConfig.volume},set:function(t){this.currentConfig.volume=t,this.manager.isLocked(this,"volume",t)||(this.updateVolume(),this.emit(s.VOLUME,this,t))}},setVolume:function(t){return this.volume=t,this},rate:{get:function(){return this.currentConfig.rate},set:function(t){this.currentConfig.rate=t,this.manager.isLocked(this,s.RATE,t)||(this.calculateRate(),this.emit(s.RATE,this,t))}},setRate:function(t){return this.rate=t,this},detune:{get:function(){return this.currentConfig.detune},set:function(t){this.currentConfig.detune=t,this.manager.isLocked(this,s.DETUNE,t)||(this.calculateRate(),this.emit(s.DETUNE,this,t))}},setDetune:function(t){return this.detune=t,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(t){this.manager.isLocked(this,"seek",t)||0<this.startTime||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.isPlaying?(this.previousTime=t,this.audio.currentTime=t):this.isPaused&&(this.currentConfig.seek=t),this.emit(s.SEEK,this,t))}},setSeek:function(t){return this.seek=t,this},loop:{get:function(){return this.currentConfig.loop},set:function(t){this.currentConfig.loop=t,this.manager.isLocked(this,"loop",t)||(this.audio&&(this.audio.loop=t),this.emit(s.LOOP,this,t))}},setLoop:function(t){return this.loop=t,this}});t.exports=o},function(t,e,i){var n=i(127),r=i(0),s=i(10),a=i(386),o=i(1),h=new r({Extends:s,initialize:function(t){s.call(this),this.game=t,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(t,e){var i=new a(this,t,e);return this.sounds.push(i),i},addAudioSprite:function(t,e){var i=this.add(t,e);return i.spritemap={},i},play:function(t,e){return!1},playAudioSprite:function(t,e,i){return!1},remove:function(t){return n.prototype.remove.call(this,t)},removeByKey:function(t){return n.prototype.removeByKey.call(this,t)},pauseAll:o,resumeAll:o,stopAll:o,update:o,setRate:o,setDetune:o,setMute:o,setVolume:o,forEachActiveSound:function(t,e){n.prototype.forEachActiveSound.call(this,t,e)},destroy:function(){n.prototype.destroy.call(this)}});t.exports=h},function(t,e,i){function n(){return!1}function r(){return this}var s=i(128),a=i(0),o=i(10),h=i(18),l=new a({Extends:o,initialize:function(t,e,i){void 0===i&&(i={}),o.call(this),this.manager=t,this.key=e,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=h({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0},i),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:n,updateMarker:n,removeMarker:function(){return null},play:n,pause:n,resume:n,stop:n,destroy:function(){s.prototype.destroy.call(this)},setMute:r,setVolume:r,setRate:r,setDetune:r,setSeek:r,setLoop:r});t.exports=l},function(t,e,i){var n=i(388),r=i(127),s=i(0),a=i(59),o=i(389),h=new s({Extends:r,initialize:function(t){this.context=this.createAudioContext(t),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked="suspended"===this.context.state&&("ontouchstart"in window||"onclick"in window),r.call(this,t),this.locked&&this.unlock()},createAudioContext:function(t){var e=t.config.audio;return e&&e.context?(e.context.resume(),e.context):new AudioContext},setAudioContext:function(t){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=t,this.masterMuteNode=t.createGain(),this.masterVolumeNode=t.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(t.destination),this.destination=this.masterMuteNode,this},add:function(t,e){var i=new o(this,t,e);return this.sounds.push(i),i},decodeAudio:function(t,e){for(var i=Array.isArray(t)?t:[{key:t,data:e}],r=this.game.cache.audio,s=i.length,o=0;o<i.length;o++){var h=i[o],l=h.key,u=h.data;"string"==typeof u&&(u=n(u));var c=function(t,e){r.add(t,e),this.emit(a.DECODED,t),0==--s&&this.emit(a.DECODED_ALL)}.bind(this,l),d=function(t,e){console.error("Error decoding audio: "+t+" - ",e?e.message:""),0==--s&&this.emit(a.DECODED_ALL)}.bind(this,l);this.context.decodeAudioData(u,c,d)}},unlock:function(){function t(){e.context&&e.context.resume().then((function(){i.removeEventListener("touchstart",t),i.removeEventListener("touchend",t),i.removeEventListener("click",t),i.removeEventListener("keydown",t),e.unlocked=!0}),(function(){i.removeEventListener("touchstart",t),i.removeEventListener("touchend",t),i.removeEventListener("click",t),i.removeEventListener("keydown",t)}))}var e=this,i=document.body;i&&(i.addEventListener("touchstart",t,!1),i.addEventListener("touchend",t,!1),i.addEventListener("click",t,!1),i.addEventListener("keydown",t,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){this.locked||this.context.resume()},destroy:function(){var t;this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio&&this.game.config.audio.context?this.context.suspend():(t=this).context.close().then((function(){t.context=null})),r.prototype.destroy.call(this)},setMute:function(t){return this.mute=t,this},mute:{get:function(){return 0===this.masterMuteNode.gain.value},set:function(t){this.masterMuteNode.gain.setValueAtTime(t?0:1,0),this.emit(a.GLOBAL_MUTE,this,t)}},setVolume:function(t){return this.volume=t,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(t){this.masterVolumeNode.gain.setValueAtTime(t,0),this.emit(a.GLOBAL_VOLUME,this,t)}}});t.exports=h},function(t,e){for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),r=0;r<i.length;r++)n[i.charCodeAt(r)]=r;t.exports=function(t){var e,i,r,s,a=(t=t.substr(t.indexOf(",")+1)).length,o=.75*a,h=0;"="===t[a-1]&&(o--,"="===t[a-2]&&o--);for(var l=new ArrayBuffer(o),u=new Uint8Array(l),c=0;c<a;c+=4)e=n[t.charCodeAt(c)],i=n[t.charCodeAt(c+1)],r=n[t.charCodeAt(c+2)],s=n[t.charCodeAt(c+3)],u[h++]=e<<2|i>>4,u[h++]=(15&i)<<4|r>>2,u[h++]=(3&r)<<6|63&s;return l}},function(t,e,i){var n=i(128),r=i(0),s=i(59),a=new r({Extends:n,initialize:function(t,e,i){if(void 0===i&&(i={}),this.audioBuffer=t.game.cache.audio.get(e),!this.audioBuffer)throw new Error('There is no audio asset with key "'+e+'" in the audio cache');this.source=null,this.loopSource=null,this.muteNode=t.context.createGain(),this.volumeNode=t.context.createGain(),this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),this.volumeNode.connect(t.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,n.call(this,t,e,i)},play:function(t,e){return!!n.prototype.play.call(this,t,e)&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(s.PLAY,this),!0)},pause:function(){return!(this.manager.context.currentTime<this.startTime||!n.prototype.pause.call(this)||(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(s.PAUSE,this),0))},resume:function(){return!(this.manager.context.currentTime<this.startTime||!n.prototype.resume.call(this)||(this.createAndStartBufferSource(),this.emit(s.RESUME,this),0))},stop:function(){return!!n.prototype.stop.call(this)&&(this.stopAndRemoveBufferSource(),this.emit(s.STOP,this),!0)},createAndStartBufferSource:function(){var t=this.currentConfig.seek,e=this.currentConfig.delay,i=this.manager.context.currentTime+e,n=(this.currentMarker?this.currentMarker.start:0)+t,r=this.duration-t;this.playTime=i-t,this.startTime=i,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,i),Math.max(0,n),Math.max(0,r)),this.resetConfig()},createAndStartLoopBufferSource:function(){var t=this.getLoopTime(),e=this.currentMarker?this.currentMarker.start:0,i=this.duration;this.loopTime=t,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,t),Math.max(0,e),Math.max(0,i))},createBufferSource:function(){var t=this,e=this.manager.context.createBufferSource();return e.buffer=this.audioBuffer,e.connect(this.muteNode),e.onended=function(e){e.target===t.source&&(t.currentConfig.loop?t.hasLooped=!0:t.hasEnded=!0)},e},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),n.prototype.applyConfig.call(this)},update:function(t,e){this.hasEnded?(this.hasEnded=!1,n.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(s.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(s.LOOPED,this))},destroy:function(){n.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){n.prototype.calculateRate.call(this);var t=this.manager.context.currentTime;this.source&&"number"==typeof this.totalRate&&this.source.playbackRate.setValueAtTime(this.totalRate,t),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,t)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var t=0,e=0;e<this.rateUpdates.length;e++)t+=((e<this.rateUpdates.length-1?this.rateUpdates[e+1].time:this.manager.context.currentTime-this.playTime)-this.rateUpdates[e].time)*this.rateUpdates[e].rate;return t},getLoopTime:function(){for(var t=0,e=0;e<this.rateUpdates.length-1;e++)t+=(this.rateUpdates[e+1].time-this.rateUpdates[e].time)*this.rateUpdates[e].rate;var i=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+i.time+(this.duration-t)/i.rate},rate:{get:function(){return this.currentConfig.rate},set:function(t){this.currentConfig.rate=t,this.calculateRate(),this.emit(s.RATE,this,t)}},setRate:function(t){return this.rate=t,this},detune:{get:function(){return this.currentConfig.detune},set:function(t){this.currentConfig.detune=t,this.calculateRate(),this.emit(s.DETUNE,this,t)}},setDetune:function(t){return this.detune=t,this},mute:{get:function(){return 0===this.muteNode.gain.value},set:function(t){this.currentConfig.mute=t,this.muteNode.gain.setValueAtTime(t?0:1,0),this.emit(s.MUTE,this,t)}},setMute:function(t){return this.mute=t,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(t){this.currentConfig.volume=t,this.volumeNode.gain.setValueAtTime(t,0),this.emit(s.VOLUME,this,t)}},setVolume:function(t){return this.volume=t,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(t){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.currentConfig.seek=t,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(s.SEEK,this,t))}},setSeek:function(t){return this.seek=t,this},loop:{get:function(){return this.currentConfig.loop},set:function(t){this.currentConfig.loop=t,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),t&&this.createAndStartLoopBufferSource()),this.emit(s.LOOP,this,t)}},setLoop:function(t){return this.loop=t,this}});t.exports=a},function(t,e){t.exports=function(t){for(var e=t.length,i=t[0].length,n=new Array(i),r=0;r<i;r++){n[r]=new Array(e);for(var s=e-1;-1<s;s--)n[r][s]=t[s][r]}return n}},function(t,e){function i(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function n(t,e){return t<e?-1:e<t?1:0}var r=function(t,e,s,a,o){for(void 0===s&&(s=0),void 0===a&&(a=t.length-1),void 0===o&&(o=n);s<a;){var h,l,u,c,d,f,p;600<a-s&&(h=a-s+1,l=e-s+1,u=Math.log(h),c=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*c*(h-c)/h)*(l-h/2<0?-1:1),f=Math.max(s,Math.floor(e-l*c/h+d)),p=Math.min(a,Math.floor(e+(h-l)*c/h+d)),r(t,e,f,p,o));var g=t[e],m=s,y=a;for(i(t,s,e),0<o(t[a],g)&&i(t,s,a);m<y;){for(i(t,m,y),m++,y--;o(t[m],g)<0;)m++;for(;0<o(t[y],g);)y--}0===o(t[s],g)?i(t,s,y):i(t,++y,a),y<=e&&(s=y+1),e<=y&&(a=y-1)}};t.exports=r},function(t,e,i){var n=i(6),r=i(114);t.exports=function(t,e,i){var s,a=n(i,"max",0),o=n(i,"qty",1),h=n(i,"random",!1),l=n(i,"randomB",!1),u=n(i,"repeat",0),c=n(i,"yoyo",!1),d=[];l&&r(e),-1===u&&(u=0===a?0:(s=t.length*e.length*o,c&&(s*=2),Math.ceil(a/s)));for(var f=0;f<=u;f++){var p=function(t,e,i){for(var n=[],r=0;r<t.length;r++)for(var s=0;s<e.length;s++)for(var a=0;a<i;a++)n.push({a:t[r],b:e[s]});return n}(t,e,o);h&&r(p),d=d.concat(p),c&&(p.reverse(),d=d.concat(p))}return a&&d.splice(a),d}},function(t,e,i){var n=i(15);t.exports=function(t,e){var i,r,s,a,o,h,l,u,c,d=n(e,"anims",null);return null===d||("string"==typeof d?t.anims.play(d):"object"==typeof d&&(i=t.anims,r=n(d,"key",void 0),s=n(d,"startFrame",void 0),a=n(d,"delay",0),o=n(d,"repeat",0),h=n(d,"repeatDelay",0),l=n(d,"yoyo",!1),u=n(d,"play",!1),c=n(d,"delayedPlay",0),i.setDelay(a),i.setRepeat(o),i.setRepeatDelay(h),i.setYoyo(l),u?i.play(r,s):0<c?i.delayedPlay(c,r,s):i.load(r))),t}},function(t,e,i){var n=i(11);t.exports=function(t,e,i){void 0===i&&(i=new n);var r=Math.min(t.x,e.x),s=Math.min(t.y,e.y),a=Math.max(t.right,e.right)-r,o=Math.max(t.bottom,e.bottom)-s;return i.setTo(r,s,a,o)}},function(t,e,i){var n=i(0),r=i(12),s=i(957),a=i(14),o=i(7),h=i(178),l=i(22),u=i(334),c=new n({Extends:a,Mixins:[r.AlphaSingle,r.BlendMode,r.Depth,r.Origin,r.ScrollFactor,r.Transform,r.Visible,s],initialize:function(t,e,i,n,r,s){a.call(this,t,"DOMElement"),this.parent=t.sys.game.domContainer,this.cache=t.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new u,this.rotate3dAngle="deg",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(e,i),"string"==typeof n?"#"===n[0]?this.setElement(n.substr(1),r,s):this.createElement(n,r,s):n&&this.setElement(n,r,s),t.sys.events.on(l.SLEEP,this.handleSceneEvent,this),t.sys.events.on(l.WAKE,this.handleSceneEvent,this)},handleSceneEvent:function(t){var e=this.node,i=e.style;e&&(i.display=t.settings.visible?"block":"none")},setSkew:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.skewX=t,this.skewY=e,this},setPerspective:function(t){return this.parent.style.perspective=t+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(t){this.parent.style.perspective=t+"px"}},addListener:function(t){if(this.node){t=t.split(" ");for(var e=0;e<t.length;e++)this.node.addEventListener(t[e],this.handler,!1)}return this},removeListener:function(t){if(this.node){t=t.split(" ");for(var e=0;e<t.length;e++)this.node.removeEventListener(t[e],this.handler)}return this},dispatchNativeEvent:function(t){this.emit(t.type,t)},createElement:function(t,e,i){return this.setElement(document.createElement(t),e,i)},setElement:function(t,e,i){var n;if(this.removeElement(),"string"==typeof t?("#"===t[0]&&(t=t.substr(1)),n=document.getElementById(t)):"object"==typeof t&&1===t.nodeType&&(n=t),!n)return this;if(this.node=n,e&&o(e))for(var r in e)n.style[r]=e[r];else"string"==typeof e&&(n.style=e);return n.style.zIndex="0",n.style.display="inline",n.style.position="absolute",(n.phaser=this).parent&&this.parent.appendChild(n),i&&(n.innerText=i),this.updateSize()},createFromCache:function(t,e){var i=this.cache.get(t);return i&&this.createFromHTML(i,e),this},createFromHTML:function(t,e){void 0===e&&(e="div"),this.removeElement();var i=document.createElement(e);return(this.node=i).style.zIndex="0",i.style.display="inline",i.style.position="absolute",(i.phaser=this).parent&&this.parent.appendChild(i),i.innerHTML=t,this.updateSize()},removeElement:function(){return this.node&&(h(this.node),this.node=null),this},updateSize:function(){var t=this.node,e=t.getBoundingClientRect();return this.width=t.clientWidth,this.height=t.clientHeight,this.displayWidth=e.width||0,this.displayHeight=e.height||0,this},getChildByProperty:function(t,e){if(this.node)for(var i=this.node.querySelectorAll("*"),n=0;n<i.length;n++)if(i[n][t]===e)return i[n];return null},getChildByID:function(t){return this.getChildByProperty("id",t)},getChildByName:function(t){return this.getChildByProperty("name",t)},setClassName:function(t){return this.node&&(this.node.className=t,this.updateSize()),this},setText:function(t){return this.node&&(this.node.innerText=t,this.updateSize()),this},setHTML:function(t){return this.node&&(this.node.innerHTML=t,this.updateSize()),this},preUpdate:function(){var t=this.parentContainer,e=this.node;e&&t&&!t.willRender()&&(e.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(l.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(l.WAKE,this.handleSceneEvent,this)}});t.exports=c},function(t,e,i){var n=i(958),r=i(14);t.exports=function(t,e,i,s,a){var o,h,l,u,c,d,f,p,g,m=e.node,y=m.style,v=e.scene.sys.settings;!(m&&y&&v.visible&&r.RENDER_MASK===e.renderFlags)||0!==e.cameraFilter&&e.cameraFilter&s.id||e.parentContainer&&!e.parentContainer.willRender()?m&&(y.display="none"):(o=e.parentContainer,h=s.alpha*e.alpha,o&&(h*=o.alpha),l=t._tempMatrix1,u=t._tempMatrix2,c=t._tempMatrix3,f=d=0,g=p="0%",a?(d=e.width*e.scaleX*e.originX,f=e.height*e.scaleY*e.originY,u.applyITRS(e.x-d,e.y-f,e.rotation,e.scaleX,e.scaleY),l.copyFrom(s.matrix),l.multiplyWithOffset(a,-s.scrollX*e.scrollFactorX,-s.scrollY*e.scrollFactorY),u.e=e.x-d,u.f=e.y-f):(d=e.width*e.originX,f=e.height*e.originY,u.applyITRS(e.x-d,e.y-f,e.rotation,e.scaleX,e.scaleY),l.copyFrom(s.matrix),p=100*e.originX+"%",g=100*e.originY+"%",u.e-=s.scrollX*e.scrollFactorX,u.f-=s.scrollY*e.scrollFactorY),l.multiply(u,c),e.transformOnly||(y.display="block",y.opacity=h,y.zIndex=e._depth,y.pointerEvents="auto",y.mixBlendMode=n[e._blendMode]),y.transform=c.getCSSMatrix()+" skew("+e.skewX+"rad, "+e.skewY+"rad) rotate3d("+e.rotate3d.x+","+e.rotate3d.y+","+e.rotate3d.z+","+e.rotate3d.w+e.rotate3dAngle+")",y.transformOrigin=p+" "+g)}},function(t,e,i){var n=i(0),r=i(12),s=i(14),a=i(962),o=new n({Extends:s,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Flip,r.Origin,r.ScrollFactor,r.Size,r.Texture,r.Tint,r.Transform,r.Visible,a],initialize:function(t){s.call(this,t,"Extern")},preUpdate:function(){},render:function(){}});t.exports=o},function(t,e,i){var n=i(193),r=i(87),s=i(13),a=i(4);t.exports=function(t,e,i){void 0===i&&(i=new a);var o=r(e,0,s.PI2);return n(t,o,i)}},function(t,e,i){var n=i(400),r=i(193),s=i(87),a=i(13);t.exports=function(t,e,i,o){void 0===o&&(o=[]),!e&&0<i&&(e=n(t)/i);for(var h=0;h<e;h++){var l=s(h/e,0,a.PI2);o.push(r(t,l))}return o}},function(t,e){t.exports=function(t){var e=t.width/2,i=t.height/2,n=Math.pow(e-i,2)/Math.pow(e+i,2);return Math.PI*(e+i)*(1+3*n/(10+Math.sqrt(4-3*n)))}},function(t,e,i){var n=i(192),r=i(28);t.exports=function(t,e,i,s,a,o,h){var l=e.commandBuffer,u=l.length,c=o||t.currentContext;if(0!==u&&r(t,c,e,s,a)){var d,f,p,g,m,y=0,v=0,_=0;c.beginPath();for(var x=0;x<u;++x)switch(l[x]){case n.ARC:c.arc(l[x+1],l[x+2],l[x+3],l[x+4],l[x+5],l[x+6]),x+=7;break;case n.LINE_STYLE:m=l[x+1],p=l[x+2],d=l[x+3],y=(16711680&p)>>>16,v=(65280&p)>>>8,_=255&p,c.strokeStyle="rgba("+y+","+v+","+_+","+d+")",c.lineWidth=m,x+=3;break;case n.FILL_STYLE:g=l[x+1],f=l[x+2],y=(16711680&g)>>>16,v=(65280&g)>>>8,_=255&g,c.fillStyle="rgba("+y+","+v+","+_+","+f+")",x+=2;break;case n.BEGIN_PATH:c.beginPath();break;case n.CLOSE_PATH:c.closePath();break;case n.FILL_PATH:h||c.fill();break;case n.STROKE_PATH:h||c.stroke();break;case n.FILL_RECT:h?c.rect(l[x+1],l[x+2],l[x+3],l[x+4]):c.fillRect(l[x+1],l[x+2],l[x+3],l[x+4]),x+=4;break;case n.FILL_TRIANGLE:c.beginPath(),c.moveTo(l[x+1],l[x+2]),c.lineTo(l[x+3],l[x+4]),c.lineTo(l[x+5],l[x+6]),c.closePath(),h||c.fill(),x+=6;break;case n.STROKE_TRIANGLE:c.beginPath(),c.moveTo(l[x+1],l[x+2]),c.lineTo(l[x+3],l[x+4]),c.lineTo(l[x+5],l[x+6]),c.closePath(),h||c.stroke(),x+=6;break;case n.LINE_TO:c.lineTo(l[x+1],l[x+2]),x+=2;break;case n.MOVE_TO:c.moveTo(l[x+1],l[x+2]),x+=2;break;case n.LINE_FX_TO:c.lineTo(l[x+1],l[x+2]),x+=5;break;case n.MOVE_FX_TO:c.moveTo(l[x+1],l[x+2]),x+=5;break;case n.SAVE:c.save();break;case n.RESTORE:c.restore();break;case n.TRANSLATE:c.translate(l[x+1],l[x+2]),x+=2;break;case n.SCALE:c.scale(l[x+1],l[x+2]),x+=2;break;case n.ROTATE:c.rotate(l[x+1]),x+=1;break;case n.GRADIENT_FILL_STYLE:x+=5;break;case n.GRADIENT_LINE_STYLE:x+=6;break;case n.SET_TEXTURE:x+=2}c.restore()}}},function(t,e,i){var n=i(0),r=i(2),s=new n({initialize:function(t,e,i,n,s){var a;"object"==typeof t?(t=r(a=t,"x",0),e=r(a,"y",0),i=r(a,"power",0),n=r(a,"epsilon",100),s=r(a,"gravity",50)):(void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=100),void 0===s&&(s=50)),this.x=t,this.y=e,this.active=!0,this._gravity=s,this._power=0,this._epsilon=0,this.power=i,this.epsilon=n},update:function(t,e){var i,n,r=this.x-t.x,s=this.y-t.y,a=r*r+s*s;0!==a&&(i=Math.sqrt(a),a<this._epsilon&&(a=this._epsilon),n=this._power*e/(a*i)*100,t.velocityX+=r*n,t.velocityY+=s*n)},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(t){this._epsilon=t*t}},power:{get:function(){return this._power/this._gravity},set:function(t){this._power=t*this._gravity}},gravity:{get:function(){return this._gravity},set:function(t){var e=this.power;this._gravity=t,this.power=e}}});t.exports=s},function(t,e,i){var n=i(0),r=i(39),s=i(53),a=new n({initialize:function(t){this.emitter=t,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return 0<this.lifeCurrent},resetPosition:function(){this.x=0,this.y=0},fire:function(t,e){var i=this.emitter;this.frame=i.getFrame(),i.emitZone&&i.emitZone.getPoint(this),void 0===t?(i.follow&&(this.x+=i.follow.x+i.followOffset.x),this.x+=i.x.onEmit(this,"x")):this.x+=t,void 0===e?(i.follow&&(this.y+=i.follow.y+i.followOffset.y),this.y+=i.y.onEmit(this,"y")):this.y+=e,this.life=i.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var n,a,o,h,l,u=i.speedX.onEmit(this,"speedX"),c=i.speedY?i.speedY.onEmit(this,"speedY"):u;i.radial?(n=r(i.angle.onEmit(this,"angle")),this.velocityX=Math.cos(n)*Math.abs(u),this.velocityY=Math.sin(n)*Math.abs(c)):i.moveTo?(a=i.moveToX.onEmit(this,"moveToX"),o=i.moveToY?i.moveToY.onEmit(this,"moveToY"):a,h=Math.atan2(o-this.y,a-this.x),l=s(this.x,this.y,a,o)/(this.life/1e3),this.velocityX=Math.cos(h)*l,this.velocityY=Math.sin(h)*l):(this.velocityX=u,this.velocityY=c),i.acceleration&&(this.accelerationX=i.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=i.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=i.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=i.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=i.delay.onEmit(this,"delay"),this.scaleX=i.scaleX.onEmit(this,"scaleX"),this.scaleY=i.scaleY?i.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=i.rotate.onEmit(this,"rotate"),this.rotation=r(this.angle),this.bounce=i.bounce.onEmit(this,"bounce"),this.alpha=i.alpha.onEmit(this,"alpha"),this.tint=i.tint.onEmit(this,"tint")},computeVelocity:function(t,e,i,n){var r=this.velocityX,s=this.velocityY,a=this.accelerationX,o=this.accelerationY,h=this.maxVelocityX,l=this.maxVelocityY;r+=t.gravityX*i,s+=t.gravityY*i,a&&(r+=a*i),o&&(s+=o*i),h<r?r=h:r<-h&&(r=-h),l<s?s=l:s<-l&&(s=-l),this.velocityX=r,this.velocityY=s;for(var u=0;u<n.length;u++)n[u].update(this,e,i)},checkBounds:function(t){var e=t.bounds,i=-this.bounce;this.x<e.x&&t.collideLeft?(this.x=e.x,this.velocityX*=i):this.x>e.right&&t.collideRight&&(this.x=e.right,this.velocityX*=i),this.y<e.y&&t.collideTop?(this.y=e.y,this.velocityY*=i):this.y>e.bottom&&t.collideBottom&&(this.y=e.bottom,this.velocityY*=i)},update:function(t,e,i){if(0<this.delayCurrent)return this.delayCurrent-=t,!1;var n=this.emitter,s=1-this.lifeCurrent/this.life;return this.lifeT=s,this.computeVelocity(n,t,e,i),this.x+=this.velocityX*e,this.y+=this.velocityY*e,n.bounds&&this.checkBounds(n),n.deathZone&&n.deathZone.willKill(this)?!(this.lifeCurrent=0):(this.scaleX=n.scaleX.onUpdate(this,"scaleX",s,this.scaleX),n.scaleY?this.scaleY=n.scaleY.onUpdate(this,"scaleY",s,this.scaleY):this.scaleY=this.scaleX,this.angle=n.rotate.onUpdate(this,"rotate",s,this.angle),this.rotation=r(this.angle),this.alpha=n.alpha.onUpdate(this,"alpha",s,this.alpha),this.tint=n.tint.onUpdate(this,"tint",s,this.tint),this.lifeCurrent-=t,this.lifeCurrent<=0)}});t.exports=a},function(t,e,i){var n=i(52),r=i(0),s=i(12),a=i(405),o=i(406),h=i(974),l=i(2),u=i(185),c=i(407),d=i(108),f=i(403),p=i(408),g=i(11),m=i(131),y=i(3),v=i(58),_=new r({Mixins:[s.BlendMode,s.Mask,s.ScrollFactor,s.Visible],initialize:function(t,e){this.manager=t,this.texture=t.texture,this.frames=[t.defaultFrame],this.defaultFrame=t.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=f,this.x=new h(e,"x",0,!0),this.y=new h(e,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new h(e,"accelerationX",0,!0),this.accelerationY=new h(e,"accelerationY",0,!0),this.maxVelocityX=new h(e,"maxVelocityX",1e4,!0),this.maxVelocityY=new h(e,"maxVelocityY",1e4,!0),this.speedX=new h(e,"speedX",0,!0),this.speedY=new h(e,"speedY",0,!0),this.moveTo=!1,this.moveToX=new h(e,"moveToX",0,!0),this.moveToY=new h(e,"moveToY",0,!0),this.bounce=new h(e,"bounce",0,!0),this.scaleX=new h(e,"scaleX",1),this.scaleY=new h(e,"scaleY",1),this.tint=new h(e,"tint",4294967295),this.alpha=new h(e,"alpha",1),this.lifespan=new h(e,"lifespan",1e3,!0),this.angle=new h(e,"angle",{min:0,max:360},!0),this.rotate=new h(e,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new h(e,"quantity",1,!0),this.delay=new h(e,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=n.NORMAL,this.follow=null,this.followOffset=new y,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,e&&this.fromJSON(e)},fromJSON:function(t){if(!t)return this;var e,i=0,n="";for(i=0;i<this.configFastMap.length;i++)n=this.configFastMap[i],d(t,n)&&(this[n]=l(t,n));for(i=0;i<this.configOpMap.length;i++)n=this.configOpMap[i],d(t,n)&&this[n].loadConfig(t);return this.acceleration=0!==this.accelerationX.propertyValue||0!==this.accelerationY.propertyValue,this.moveTo=0!==this.moveToX.propertyValue||0!==this.moveToY.propertyValue,d(t,"speed")&&(this.speedX.loadConfig(t,"speed"),this.speedY=null),(c(t,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),d(t,"scale")&&(this.scaleX.loadConfig(t,"scale"),this.scaleY=null),d(t,"callbackScope")&&(e=l(t,"callbackScope",null),this.emitCallbackScope=e,this.deathCallbackScope=e),d(t,"emitZone")&&this.setEmitZone(t.emitZone),d(t,"deathZone")&&this.setDeathZone(t.deathZone),d(t,"bounds")&&this.setBounds(t.bounds),d(t,"followOffset")&&this.followOffset.setFromObject(l(t,"followOffset",0)),d(t,"frame")&&this.setFrame(t.frame),this},toJSON:function(t){void 0===t&&(t={});var e=0,i="";for(e=0;e<this.configFastMap.length;e++)t[i=this.configFastMap[e]]=this[i];for(e=0;e<this.configOpMap.length;e++)this[i=this.configOpMap[e]]&&(t[i]=this[i].toJSON());return this.speedY||(delete t.speedX,t.speed=this.speedX.toJSON()),this.scaleY||(delete t.scaleX,t.scale=this.scaleX.toJSON()),t},startFollow:function(t,e,i,n){return void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=!1),this.follow=t,this.followOffset.set(e,i),this.trackVisible=n,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(1===this.frames.length)return this.defaultFrame;if(this.randomFrame)return u(this.frames);var t=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=v(this.currentFrame+1,0,this._frameLength)),t},setFrame:function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=1),this.randomFrame=e,this.frameQuantity=i,this.currentFrame=0,this._frameCounter=0;var n,r,s=typeof t;return Array.isArray(t)||"string"==s||"number"==s?this.manager.setEmitterFrames(t,this):"object"==s&&((t=l(n=t,"frames",null))&&this.manager.setEmitterFrames(t,this),r=l(n,"cycle",!1),this.randomFrame=!r,this.frameQuantity=l(n,"quantity",i)),this._frameLength=this.frames.length,1===this._frameLength&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(t){return void 0===t&&(t=!0),this.radial=t,this},setPosition:function(t,e){return this.x.onChange(t),this.y.onChange(e),this},setBounds:function(t,e,i,n){var r;return"object"==typeof t&&(t=(r=t).x,e=r.y,i=d(r,"w")?r.w:r.width,n=d(r,"h")?r.h:r.height),this.bounds?this.bounds.setTo(t,e,i,n):this.bounds=new g(t,e,i,n),this},setSpeedX:function(t){return this.speedX.onChange(t),this.radial=!1,this},setSpeedY:function(t){return this.speedY&&(this.speedY.onChange(t),this.radial=!1),this},setSpeed:function(t){return this.speedX.onChange(t),this.speedY=null,this.radial=!0,this},setScaleX:function(t){return this.scaleX.onChange(t),this},setScaleY:function(t){return this.scaleY.onChange(t),this},setScale:function(t){return this.scaleX.onChange(t),this.scaleY=null,this},setGravityX:function(t){return this.gravityX=t,this},setGravityY:function(t){return this.gravityY=t,this},setGravity:function(t,e){return this.gravityX=t,this.gravityY=e,this},setAlpha:function(t){return this.alpha.onChange(t),this},setTint:function(t){return this.tint.onChange(t),this},setEmitterAngle:function(t){return this.angle.onChange(t),this},setAngle:function(t){return this.angle.onChange(t),this},setLifespan:function(t){return this.lifespan.onChange(t),this},setQuantity:function(t){return this.quantity.onChange(t),this},setFrequency:function(t,e){return this.frequency=t,this._counter=0,e&&this.quantity.onChange(e),this},setEmitZone:function(t){if(void 0===t)this.emitZone=null;else{var e=l(t,"type","random"),i=l(t,"source",null);switch(e){case"random":this.emitZone=new p(i);break;case"edge":var n=l(t,"quantity",1),r=l(t,"stepRate",0),s=l(t,"yoyo",!1),a=l(t,"seamless",!0);this.emitZone=new o(i,n,r,s,a)}}return this},setDeathZone:function(t){var e,i,n;return void 0===t?this.deathZone=null:(e=l(t,"type","onEnter"),(i=l(t,"source",null))&&"function"==typeof i.contains&&(n="onEnter"===e,this.deathZone=new a(i,n))),this},reserve:function(t){for(var e=this.dead,i=0;i<t;i++)e.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return 0<this.maxParticles&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(t,e){return void 0===t?(this.emitCallback=null,this.emitCallbackScope=null):"function"==typeof t&&(this.emitCallback=t,e&&(this.emitCallbackScope=e)),this},onParticleDeath:function(t,e){return void 0===t?(this.deathCallback=null,this.deathCallbackScope=null):"function"==typeof t&&(this.deathCallback=t,e&&(this.deathCallbackScope=e)),this},killAll:function(){for(var t=this.dead,e=this.alive;0<e.length;)t.push(e.pop());return this},forEachAlive:function(t,e){for(var i=this.alive,n=i.length,r=0;r<n;++r)t.call(e,i[r],this);return this},forEachDead:function(t,e){for(var i=this.dead,n=i.length,r=0;r<n;++r)t.call(e,i[r],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return m.inplace(this.alive,this.depthSortCallback),this},flow:function(t,e){return void 0===e&&(e=1),this.frequency=t,this.quantity.onChange(e),this.start()},explode:function(t,e,i){return this.frequency=-1,this.emitParticle(t,e,i)},emitParticleAt:function(t,e,i){return this.emitParticle(i,t,e)},emitParticle:function(t,e,i){if(!this.atLimit()){void 0===t&&(t=this.quantity.onEmit());for(var n=this.dead,r=0;r<t;r++){var s=n.pop();if((s=s||new this.particleClass(this)).fire(e,i),this.particleBringToTop?this.alive.push(s):this.alive.unshift(s),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,s,this),this.atLimit())break}return s}},preUpdate:function(t,e){var i=(e*=this.timeScale)/1e3;this.trackVisible&&(this.visible=this.follow.visible);var n=this.manager.getProcessors(),r=this.alive,s=this.dead,a=0,o=[],h=r.length;for(a=0;a<h;a++){var l=r[a];l.update(e,i,n)&&o.push({index:a,particle:l})}if(0<(h=o.length)){var u=this.deathCallback,c=this.deathCallbackScope;for(a=h-1;0<=a;a--){var d=o[a];r.splice(d.index,1),s.push(d.particle),u&&u.call(c,d.particle),d.particle.resetPosition()}}this.on&&(0===this.frequency?this.emitParticle():0<this.frequency&&(this._counter-=e,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(t,e){return t.y-e.y}});t.exports=_},function(t,e,i){var n=new(i(0))({initialize:function(t,e){this.source=t,this.killOnEnter=e},willKill:function(t){var e=this.source.contains(t.x,t.y);return e&&this.killOnEnter||!e&&!this.killOnEnter}});t.exports=n},function(t,e,i){var n=new(i(0))({initialize:function(t,e,i,n,r){void 0===n&&(n=!1),void 0===r&&(r=!0),this.source=t,this.points=[],this.quantity=e,this.stepRate=i,this.yoyo=n,this.counter=-1,this.seamless=r,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){var t,e;this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless&&(t=this.points[0],e=this.points[this.points.length-1],t.x===e.x&&t.y===e.y&&this.points.pop());var i=this._length;return this._length=this.points.length,this._length<i&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(t){return this.source=t,this.updateSource()},getPoint:function(t){0===this._direction?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,-1===this.counter&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var e=this.points[this.counter];e&&(t.x=e.x,t.y=e.y)}});t.exports=n},function(t,e){t.exports=function(t,e){for(var i=0;i<e.length;i++)if(t.hasOwnProperty(e[i]))return!0;return!1}},function(t,e,i){var n=i(0),r=i(3),s=new n({initialize:function(t){this.source=t,this._tempVec=new r},getPoint:function(t){var e=this._tempVec;this.source.getRandomPoint(e),t.x=e.x,t.y=e.y}});t.exports=s},function(t,e,i){var n=i(0),r=i(12),s=i(75),a=new n({Extends:s,Mixins:[r.PathFollower],initialize:function(t,e,i,n,r,a){s.call(this,t,i,n,r,a),this.path=e},preUpdate:function(t,e){this.anims.update(t,e),this.pathUpdate(t)}});t.exports=a},function(t,e,i){var n=i(1e3),r=i(0),s=i(39),a=i(66),o=i(65),h=i(13),l=i(30),u=new r({Extends:l,Mixins:[n],initialize:function(t,e,i,n,r,s,a,h,u){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=128),void 0===r&&(r=0),void 0===s&&(s=360),void 0===a&&(a=!1),l.call(this,t,"Arc",new o(0,0,n)),this._startAngle=r,this._endAngle=s,this._anticlockwise=a,this._iterations=.01,this.setPosition(e,i);var c=2*this.geom.radius;this.setSize(c,c),void 0!==h&&this.setFillStyle(h,u),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(t){this._iterations=t,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(t){var e=2*(this.geom.radius=t);this.setSize(e,e),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(t){this._startAngle=t,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(t){this._endAngle=t,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(t){this._anticlockwise=t,this.updateData()}},setRadius:function(t){return this.radius=t,this},setIterations:function(t){return void 0===t&&(t=.01),this.iterations=t,this},setStartAngle:function(t,e){return this._startAngle=t,void 0!==e&&(this._anticlockwise=e),this.updateData()},setEndAngle:function(t,e){return this._endAngle=t,void 0!==e&&(this._anticlockwise=e),this.updateData()},updateData:function(){var t=this._iterations,e=t,i=this.geom.radius,n=s(this._startAngle),r=s(this._endAngle),o=i,l=i;r-=n,this._anticlockwise?r<-h.PI2?r=-h.PI2:0<r&&(r=-h.PI2+r%h.PI2):r>h.PI2?r=h.PI2:r<0&&(r=h.PI2+r%h.PI2);for(var u,c=[o+Math.cos(n)*i,l+Math.sin(n)*i];e<1;)u=r*e+n,c.push(o+Math.cos(u)*i,l+Math.sin(u)*i),e+=t;return u=r+n,c.push(o+Math.cos(u)*i,l+Math.sin(u)*i),c.push(o+Math.cos(n)*i,l+Math.sin(n)*i),this.pathIndexes=a(c),this.pathData=c,this}});t.exports=u},function(t,e,i){var n=i(0),r=i(1003),s=i(66),a=i(11),o=i(30),h=new n({Extends:o,Mixins:[r],initialize:function(t,e,i,n,r,s){void 0===e&&(e=0),void 0===i&&(i=0),o.call(this,t,"Curve",n),this._smoothness=32,this._curveBounds=new a,this.closePath=!1,this.setPosition(e,i),void 0!==r&&this.setFillStyle(r,s),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(t){this._smoothness=t,this.updateData()}},setSmoothness:function(t){return this._smoothness=t,this.updateData()},updateData:function(){var t=this._curveBounds,e=this._smoothness;this.geom.getBounds(t,e),this.setSize(t.width,t.height),this.updateDisplayOrigin();for(var i=[],n=this.geom.getPoints(e),r=0;r<n.length;r++)i.push(n[r].x,n[r].y);return i.push(n[0].x,n[0].y),this.pathIndexes=s(i),this.pathData=i,this}});t.exports=h},function(t,e,i){var n=i(0),r=i(66),s=i(1006),a=i(95),o=i(30),h=new n({Extends:o,Mixins:[s],initialize:function(t,e,i,n,r,s,h){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=128),void 0===r&&(r=128),o.call(this,t,"Ellipse",new a(n/2,r/2,n,r)),this._smoothness=64,this.setPosition(e,i),this.width=n,this.height=r,void 0!==s&&this.setFillStyle(s,h),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(t){this._smoothness=t,this.updateData()}},setSize:function(t,e){return this.geom.setSize(t,e),this.updateData()},setSmoothness:function(t){return this._smoothness=t,this.updateData()},updateData:function(){for(var t=[],e=this.geom.getPoints(this._smoothness),i=0;i<e.length;i++)t.push(e[i].x,e[i].y);return t.push(e[0].x,e[0].y),this.pathIndexes=r(t),this.pathData=t,this}});t.exports=h},function(t,e,i){var n=i(0),r=i(30),s=i(1009),a=new n({Extends:r,Mixins:[s],initialize:function(t,e,i,n,s,a,o,h,l,u,c){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=128),void 0===s&&(s=128),void 0===a&&(a=32),void 0===o&&(o=32),r.call(this,t,"Grid",null),this.cellWidth=a,this.cellHeight=o,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(e,i),this.setSize(n,s),void 0!==h&&this.setFillStyle(h,l),void 0!==u&&this.setOutlineStyle(u,c),this.updateDisplayOrigin()},setFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.showCells=!1:(this.fillColor=t,this.fillAlpha=e,this.showCells=!0),this},setAltFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.showAltCells=!1:(this.altFillColor=t,this.altFillAlpha=e,this.showAltCells=!0),this},setOutlineStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.showOutline=!1:(this.outlineFillColor=t,this.outlineFillAlpha=e,this.showOutline=!0),this}});t.exports=a},function(t,e,i){var n=i(1012),r=i(0),s=i(30),a=new r({Extends:s,Mixins:[n],initialize:function(t,e,i,n,r,a,o,h){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=48),void 0===r&&(r=32),void 0===a&&(a=15658734),void 0===o&&(o=10066329),void 0===h&&(h=13421772),s.call(this,t,"IsoBox",null),this.projection=4,this.fillTop=a,this.fillLeft=o,this.fillRight=h,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(e,i),this.setSize(n,r),this.updateDisplayOrigin()},setProjection:function(t){return this.projection=t,this},setFaces:function(t,e,i){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),this.showTop=t,this.showLeft=e,this.showRight=i,this},setFillStyle:function(t,e,i){return this.fillTop=t,this.fillLeft=e,this.fillRight=i,this.isFilled=!0,this}});t.exports=a},function(t,e,i){var n=i(0),r=i(1015),s=i(30),a=new n({Extends:s,Mixins:[r],initialize:function(t,e,i,n,r,a,o,h,l){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=48),void 0===r&&(r=32),void 0===a&&(a=!1),void 0===o&&(o=15658734),void 0===h&&(h=10066329),void 0===l&&(l=13421772),s.call(this,t,"IsoTriangle",null),this.projection=4,this.fillTop=o,this.fillLeft=h,this.fillRight=l,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=a,this.isFilled=!0,this.setPosition(e,i),this.setSize(n,r),this.updateDisplayOrigin()},setProjection:function(t){return this.projection=t,this},setReversed:function(t){return this.isReversed=t,this},setFaces:function(t,e,i){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),this.showTop=t,this.showLeft=e,this.showRight=i,this},setFillStyle:function(t,e,i){return this.fillTop=t,this.fillLeft=e,this.fillRight=i,this.isFilled=!0,this}});t.exports=a},function(t,e,i){var n=i(0),r=i(30),s=i(56),a=i(1018),o=new n({Extends:r,Mixins:[a],initialize:function(t,e,i,n,a,o,h,l,u){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===a&&(a=0),void 0===o&&(o=128),void 0===h&&(h=0),r.call(this,t,"Line",new s(n,a,o,h));var c=this.geom.right-this.geom.left,d=this.geom.bottom-this.geom.top;this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(e,i),this.setSize(c,d),void 0!==l&&this.setStrokeStyle(1,l,u),this.updateDisplayOrigin()},setLineWidth:function(t,e){return void 0===e&&(e=t),this._startWidth=t,this._endWidth=e,this.lineWidth=t,this},setTo:function(t,e,i,n){return this.geom.setTo(t,e,i,n),this}});t.exports=o},function(t,e,i){var n=i(1021),r=i(0),s=i(66),a=i(418),o=i(201),h=i(30),l=i(421),u=new r({Extends:h,Mixins:[n],initialize:function(t,e,i,n,r,s){void 0===e&&(e=0),void 0===i&&(i=0),h.call(this,t,"Polygon",new o(n));var l=a(this.geom);this.setPosition(e,i),this.setSize(l.width,l.height),void 0!==r&&this.setFillStyle(r,s),this.updateDisplayOrigin(),this.updateData()},smooth:function(t){void 0===t&&(t=1);for(var e=0;e<t;e++)l(this.geom);return this.updateData()},updateData:function(){for(var t=[],e=this.geom.points,i=0;i<e.length;i++)t.push(e[i].x,e[i].y);return t.push(e[0].x,e[0].y),this.pathIndexes=s(t),this.pathData=t,this}});t.exports=u},function(t,e,i){var n=i(11);t.exports=function(t,e){void 0===e&&(e=new n);for(var i,r=1/0,s=1/0,a=-r,o=-s,h=0;h<t.points.length;h++)i=t.points[h],r=Math.min(r,i.x),s=Math.min(s,i.y),a=Math.max(a,i.x),o=Math.max(o,i.y);return e.x=r,e.y=s,e.width=a-r,e.height=o-s,e}},function(t,e,i){var n=i(57),r=i(56),s=i(420);t.exports=function(t,e,i,a){void 0===a&&(a=[]);var o=t.points,h=s(t);!e&&0<i&&(e=h/i);for(var l=0;l<e;l++)for(var u=h*(l/e),c=0,d=0;d<o.length;d++){var f=o[d],p=o[(d+1)%o.length],g=new r(f.x,f.y,p.x,p.y),m=n(g);if(!(u<c||c+m<u)){var y=g.getPoint((u-c)/m);a.push(y);break}c+=m}return a}},function(t,e,i){var n=i(57),r=i(56);t.exports=function(t){for(var e=t.points,i=0,s=0;s<e.length;s++){var a=e[s],o=e[(s+1)%e.length],h=new r(a.x,a.y,o.x,o.y);i+=n(h)}return i}},function(t,e){function i(t,e){return t[0]=e[0],t[1]=e[1],t}t.exports=function(t){for(var e=[],n=t.points,r=0;r<n.length;r++)e.push([n[r].x,n[r].y]);var s=[];for(0<e.length&&s.push(i([0,0],e[0])),r=0;r<e.length-1;r++){var a=e[r],o=e[r+1],h=a[0],l=a[1],u=o[0],c=o[1];s.push([.85*h+.15*u,.85*l+.15*c]),s.push([.15*h+.85*u,.15*l+.85*c])}return 1<e.length&&s.push(i([0,0],e[e.length-1])),t.setTo(s)}},function(t,e,i){var n=i(0),r=i(11),s=i(30),a=i(1024),o=new n({Extends:s,Mixins:[a],initialize:function(t,e,i,n,a,o,h){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=128),void 0===a&&(a=128),s.call(this,t,"Rectangle",new r(0,0,n,a)),this.setPosition(e,i),this.setSize(n,a),void 0!==o&&this.setFillStyle(o,h),this.updateDisplayOrigin(),this.updateData()},updateData:function(){var t=[],e=this.geom,i=this._tempLine;return e.getLineA(i),t.push(i.x1,i.y1,i.x2,i.y2),e.getLineB(i),t.push(i.x2,i.y2),e.getLineC(i),t.push(i.x2,i.y2),e.getLineD(i),t.push(i.x2,i.y2),this.pathData=t,this}});t.exports=o},function(t,e,i){var n=i(1027),r=i(0),s=i(66),a=i(30),o=new r({Extends:a,Mixins:[n],initialize:function(t,e,i,n,r,s,o,h){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=5),void 0===r&&(r=32),void 0===s&&(s=64),a.call(this,t,"Star",null),this._points=n,this._innerRadius=r,this._outerRadius=s,this.setPosition(e,i),this.setSize(2*s,2*s),void 0!==o&&this.setFillStyle(o,h),this.updateDisplayOrigin(),this.updateData()},setPoints:function(t){return this._points=t,this.updateData()},setInnerRadius:function(t){return this._innerRadius=t,this.updateData()},setOuterRadius:function(t){return this._outerRadius=t,this.updateData()},points:{get:function(){return this._points},set:function(t){this._points=t,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(t){this._innerRadius=t,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(t){this._outerRadius=t,this.updateData()}},updateData:function(){var t=[],e=this._points,i=this._innerRadius,n=this._outerRadius,r=Math.PI/2*3,a=Math.PI/e,o=n,h=n;t.push(o,h+-n);for(var l=0;l<e;l++)t.push(o+Math.cos(r)*n,h+Math.sin(r)*n),r+=a,t.push(o+Math.cos(r)*i,h+Math.sin(r)*i),r+=a;return t.push(o,h+-n),this.pathIndexes=s(t),this.pathData=t,this}});t.exports=o},function(t,e,i){var n=i(0),r=i(30),s=i(71),a=i(1030),o=new n({Extends:r,Mixins:[a],initialize:function(t,e,i,n,a,o,h,l,u,c,d){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===a&&(a=128),void 0===o&&(o=64),void 0===h&&(h=0),void 0===l&&(l=128),void 0===u&&(u=128),r.call(this,t,"Triangle",new s(n,a,o,h,l,u));var f=this.geom.right-this.geom.left,p=this.geom.bottom-this.geom.top;this.setPosition(e,i),this.setSize(f,p),void 0!==c&&this.setFillStyle(c,d),this.updateDisplayOrigin(),this.updateData()},setTo:function(t,e,i,n,r,s){return this.geom.setTo(t,e,i,n,r,s),this.updateData()},updateData:function(){var t=[],e=this.geom,i=this._tempLine;return e.getLineA(i),t.push(i.x1,i.y1,i.x2,i.y2),e.getLineB(i),t.push(i.x2,i.y2),e.getLineC(i),t.push(i.x2,i.y2),this.pathData=t,this}});t.exports=o},function(t,e,i){var n=i(4),r=i(57);t.exports=function(t,e,i){void 0===i&&(i=new n);var s=t.getLineA(),a=t.getLineB(),o=t.getLineC();if(e<=0||1<=e)return i.x=s.x1,i.y=s.y1,i;var h=r(s),l=r(a),u=r(o),c=(h+l+u)*e,d=0;return c<h?(d=c/h,i.x=s.x1+(s.x2-s.x1)*d,i.y=s.y1+(s.y2-s.y1)*d):h+l<c?(d=(c-=h+l)/u,i.x=o.x1+(o.x2-o.x1)*d,i.y=o.y1+(o.y2-o.y1)*d):(d=(c-=h)/l,i.x=a.x1+(a.x2-a.x1)*d,i.y=a.y1+(a.y2-a.y1)*d),i}},function(t,e,i){var n=i(57),r=i(4);t.exports=function(t,e,i,s){void 0===s&&(s=[]);var a=t.getLineA(),o=t.getLineB(),h=t.getLineC(),l=n(a),u=n(o),c=n(h),d=l+u+c;!e&&0<i&&(e=d/i);for(var f=0;f<e;f++){var p=d*(f/e),g=0,m=new r;p<l?(g=p/l,m.x=a.x1+(a.x2-a.x1)*g,m.y=a.y1+(a.y2-a.y1)*g):l+u<p?(g=(p-=l+u)/c,m.x=h.x1+(h.x2-h.x1)*g,m.y=h.y1+(h.y2-h.y1)*g):(g=(p-=l)/u,m.x=o.x1+(o.x2-o.x1)*g,m.y=o.y1+(o.y2-o.y1)*g),s.push(m)}return s}},function(t,e){t.exports=function(t,e,i){if(!t||"number"==typeof t)return!1;if(t.hasOwnProperty(e))return t[e]=i,!0;if(-1===e.indexOf("."))return!1;for(var n=e.split("."),r=t,s=t,a=0;a<n.length;a++){if(!r.hasOwnProperty(n[a]))return!1;r=(s=r)[n[a]]}return s[n[n.length-1]]=i,!0}},function(t,e,i){var n=i(0),r=i(9),s=new n({initialize:function(t,e,i,n,r,s,a){this.x=t,this.y=e,this.radius=i,this.r=n,this.g=r,this.b=s,this.intensity=a,this.scrollFactorX=1,this.scrollFactorY=1},set:function(t,e,i,n,r,s,a){return this.x=t,this.y=e,this.radius=i,this.r=n,this.g=r,this.b=s,this.intensity=a,this.scrollFactorX=1,this.scrollFactorY=1,this},setScrollFactor:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),this.scrollFactorX=t,this.scrollFactorY=e,this},setColor:function(t){var e=r.getFloatsFromUintRGB(t);return this.r=e[0],this.g=e[1],this.b=e[2],this},setIntensity:function(t){return this.intensity=t,this},setPosition:function(t,e){return this.x=t,this.y=e,this},setRadius:function(t){return this.radius=t,this}});t.exports=s},function(t,e,i){var n=i(0),r=i(428),s=i(9),a=new n({initialize:function(){this.lightPool=[],this.lights=[],this.culledLights=[],this.ambientColor={r:.1,g:.1,b:.1},this.active=!1,this.maxLights=-1},enable:function(){return-1===this.maxLights&&(this.maxLights=this.scene.sys.game.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},cull:function(t){for(var e=this.lights,i=this.culledLights,n=e.length,r=t.x+t.width/2,s=t.y+t.height/2,a=(t.width+t.height)/2,o={x:0,y:0},h=t.matrix,l=this.systems.game.config.height,u=i.length=0;u<n&&i.length<this.maxLights;u++){var c=e[u];h.transformPoint(c.x,c.y,o);var d=r-(o.x-t.scrollX*c.scrollFactorX*t.zoom),f=s-(l-(o.y-t.scrollY*c.scrollFactorY*t.zoom));Math.sqrt(d*d+f*f)<c.radius+a&&i.push(e[u])}return i},forEachLight:function(t){if(t){for(var e=this.lights,i=e.length,n=0;n<i;++n)t(e[n]);return this}},setAmbientColor:function(t){var e=s.getFloatsFromUintRGB(t);return this.ambientColor.r=e[0],this.ambientColor.g=e[1],this.ambientColor.b=e[2],this},getMaxVisibleLights:function(){return 10},getLightCount:function(){return this.lights.length},addLight:function(t,e,i,n,a){var o,h=null;return t=void 0===t?0:t,e=void 0===e?0:e,n=void 0===n?16777215:n,i=void 0===i?100:i,a=void 0===a?1:a,o=s.getFloatsFromUintRGB(n),h=null,0<this.lightPool.length?(h=this.lightPool.pop()).set(t,e,i,o[0],o[1],o[2],a):h=new r(t,e,i,o[0],o[1],o[2],a),this.lights.push(h),h},removeLight:function(t){var e=this.lights.indexOf(t);return 0<=e&&(this.lightPool.push(t),this.lights.splice(e,1)),this},shutdown:function(){for(;0<this.lights.length;)this.lightPool.push(this.lights.pop());this.ambientColor={r:.1,g:.1,b:.1},this.culledLights.length=0,this.lights.length=0},destroy:function(){this.shutdown()}});t.exports=a},function(t,e,i){var n=i(47),r=i(18)(!1,r={Circle:i(1090),Ellipse:i(1100),Intersects:i(431),Line:i(1119),Point:i(1141),Polygon:i(1155),Rectangle:i(444),Triangle:i(1186)},n);t.exports=r},function(t,e,i){t.exports={CircleToCircle:i(205),CircleToRectangle:i(206),GetCircleToCircle:i(1110),GetCircleToRectangle:i(1111),GetLineToCircle:i(207),GetLineToRectangle:i(209),GetRectangleIntersection:i(1112),GetRectangleToRectangle:i(1113),GetRectangleToTriangle:i(1114),GetTriangleToCircle:i(1115),GetTriangleToLine:i(436),GetTriangleToTriangle:i(1116),LineToCircle:i(208),LineToLine:i(84),LineToRectangle:i(432),PointToLine:i(440),PointToLineSegment:i(1117),RectangleToRectangle:i(135),RectangleToTriangle:i(433),RectangleToValues:i(1118),TriangleToCircle:i(435),TriangleToLine:i(437),TriangleToTriangle:i(438)}},function(t,e){t.exports=function(t,e){var i=t.x1,n=t.y1,r=t.x2,s=t.y2,a=e.x,o=e.y,h=e.right,l=e.bottom,u=0;if(a<=i&&i<=h&&o<=n&&n<=l||a<=r&&r<=h&&o<=s&&s<=l)return!0;if(i<a&&a<=r){if(o<(u=n+(s-n)*(a-i)/(r-i))&&u<=l)return!0}else if(h<i&&r<=h&&o<=(u=n+(s-n)*(h-i)/(r-i))&&u<=l)return!0;if(n<o&&o<=s){if(a<=(u=i+(r-i)*(o-n)/(s-n))&&u<=h)return!0}else if(l<n&&s<=l&&a<=(u=i+(r-i)*(l-n)/(s-n))&&u<=h)return!0;return!1}},function(t,e,i){var n=i(84),r=i(48),s=i(210),a=i(434);t.exports=function(t,e){if(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)return!1;var i=e.getLineA(),o=e.getLineB(),h=e.getLineC();if(r(t,i.x1,i.y1)||r(t,i.x2,i.y2))return!0;if(r(t,o.x1,o.y1)||r(t,o.x2,o.y2))return!0;if(r(t,h.x1,h.y1)||r(t,h.x2,h.y2))return!0;var l=t.getLineA(),u=t.getLineB(),c=t.getLineC(),d=t.getLineD();if(n(i,l)||n(i,u)||n(i,c)||n(i,d))return!0;if(n(o,l)||n(o,u)||n(o,c)||n(o,d))return!0;if(n(h,l)||n(h,u)||n(h,c)||n(h,d))return!0;var f=a(t);return 0<s(e,f,!0).length}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=[]),e.push({x:t.x,y:t.y}),e.push({x:t.right,y:t.y}),e.push({x:t.right,y:t.bottom}),e.push({x:t.x,y:t.bottom}),e}},function(t,e,i){var n=i(208),r=i(83);t.exports=function(t,e){return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top||!r(t,e.x,e.y)&&!n(t.getLineA(),e)&&!n(t.getLineB(),e)&&!n(t.getLineC(),e))}},function(t,e,i){var n=i(4),r=i(437),s=i(84);t.exports=function(t,e,i){if(void 0===i&&(i=[]),r(t,e))for(var a=t.getLineA(),o=t.getLineB(),h=t.getLineC(),l=[new n,new n,new n],u=[s(a,e,l[0]),s(o,e,l[1]),s(h,e,l[2])],c=0;c<3;c++)u[c]&&i.push(l[c]);return i}},function(t,e,i){var n=i(83),r=i(84);t.exports=function(t,e){return!!(n(t,e.getPointA())||n(t,e.getPointB())||r(t.getLineA(),e)||r(t.getLineB(),e)||r(t.getLineC(),e))}},function(t,e,i){var n=i(210),r=i(439),s=i(84);t.exports=function(t,e){if(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)return!1;var i=t.getLineA(),a=t.getLineB(),o=t.getLineC(),h=e.getLineA(),l=e.getLineB(),u=e.getLineC();if(s(i,h)||s(i,l)||s(i,u))return!0;if(s(a,h)||s(a,l)||s(a,u))return!0;if(s(o,h)||s(o,l)||s(o,u))return!0;var c=r(t);return 0<n(e,c,!0).length||(c=r(e),0<n(t,c,!0).length)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=[]),e.push({x:t.x1,y:t.y1}),e.push({x:t.x2,y:t.y2}),e.push({x:t.x3,y:t.y3}),e}},function(t,e){t.exports=function(t,e,i){void 0===i&&(i=1);var n=e.x1,r=e.y1,s=e.x2,a=e.y2,o=t.x,h=t.y,l=(s-n)*(s-n)+(a-r)*(a-r);if(0==l)return!1;var u=((o-n)*(s-n)+(h-r)*(a-r))/l;if(u<0)return Math.sqrt((n-o)*(n-o)+(r-h)*(r-h))<=i;if(0<=u&&u<=1){var c=((r-h)*(s-n)-(n-o)*(a-r))/l;return Math.abs(c)*Math.sqrt(l)<=i}return Math.sqrt((s-o)*(s-o)+(a-h)*(a-h))<=i}},function(t,e,i){var n=i(13),r=i(58),s=i(85);t.exports=function(t){var e=s(t)-n.TAU;return r(e,-Math.PI,Math.PI)}},function(t,e){t.exports=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)}},function(t,e){t.exports=function(t){return t.x*t.x+t.y*t.y}},function(t,e,i){var n=i(11);n.Area=i(1160),n.Ceil=i(1161),n.CeilAll=i(1162),n.CenterOn=i(168),n.Clone=i(1163),n.Contains=i(48),n.ContainsPoint=i(1164),n.ContainsRect=i(445),n.CopyFrom=i(1165),n.Decompose=i(434),n.Equals=i(1166),n.FitInside=i(1167),n.FitOutside=i(1168),n.Floor=i(1169),n.FloorAll=i(1170),n.FromPoints=i(176),n.FromXY=i(1171),n.GetAspectRatio=i(212),n.GetCenter=i(1172),n.GetPoint=i(152),n.GetPoints=i(274),n.GetSize=i(1173),n.Inflate=i(1174),n.Intersection=i(1175),n.MarchingAnts=i(285),n.MergePoints=i(1176),n.MergeRect=i(1177),n.MergeXY=i(1178),n.Offset=i(1179),n.OffsetPoint=i(1180),n.Overlaps=i(1181),n.Perimeter=i(112),n.PerimeterPoint=i(1182),n.Random=i(155),n.RandomOutside=i(1183),n.SameDimensions=i(1184),n.Scale=i(1185),n.Union=i(394),t.exports=n},function(t,e){t.exports=function(t,e){return!(e.width*e.height>t.width*t.height)&&e.x>t.x&&e.x<t.right&&e.right>t.x&&e.right<t.right&&e.y>t.y&&e.y<t.bottom&&e.bottom>t.y&&e.bottom<t.bottom}},function(t,e,i){var n=i(4);t.exports=function(t,e){return void 0===e&&(e=new n),e.x=(t.x1+t.x2+t.x3)/3,e.y=(t.y1+t.y2+t.y3)/3,e}},function(t,e){t.exports=function(t,e,i){return t.x1+=e,t.y1+=i,t.x2+=e,t.y2+=i,t.x3+=e,t.y3+=i,t}},function(t,e,i){var n=i(4);function r(t,e,i,n){var r=t-i,s=e-n,a=r*r+s*s;return Math.sqrt(a)}t.exports=function(t,e){void 0===e&&(e=new n);var i=t.x1,s=t.y1,a=t.x2,o=t.y2,h=t.x3,l=t.y3,u=r(h,l,a,o),c=r(i,s,h,l),d=r(a,o,i,s),f=u+c+d;return e.x=(i*u+a*c+h*d)/f,e.y=(s*u+o*c+l*d)/f,e}},function(t,e){t.exports=function(t,e,i){return{gameObject:t,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:e,hitAreaCallback:i,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}}},function(t,e,i){var n=new(i(0))({initialize:function(t,e){this.pad=t,this.events=t.events,this.index=e,this.value=0,this.threshold=.1},update:function(t){this.value=t},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});t.exports=n},function(t,e,i){var n=i(0),r=i(214),s=new n({initialize:function(t,e){this.pad=t,this.events=t.manager,this.index=e,this.value=0,this.threshold=1,this.pressed=!1},update:function(t){this.value=t;var e=this.pad,i=this.index;t>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(r.BUTTON_DOWN,e,this,t),this.pad.emit(r.GAMEPAD_BUTTON_DOWN,i,t,this)):this.pressed&&(this.pressed=!1,this.events.emit(r.BUTTON_UP,e,this,t),this.pad.emit(r.GAMEPAD_BUTTON_UP,i,t,this))},destroy:function(){this.pad=null,this.events=null}});t.exports=s},function(t,e,i){var n=i(450),r=i(451),s=i(0),a=i(10),o=i(3),h=new s({Extends:a,initialize:function(t,e){a.call(this),this.manager=t,this.pad=e,this.id=e.id,this.index=e.index;for(var i=[],s=0;s<e.buttons.length;s++)i.push(new r(this,s));this.buttons=i;var h=[];for(s=0;s<e.axes.length;s++)h.push(new n(this,s));this.axes=h,this.vibration=e.vibrationActuator;var l={value:0,pressed:!1};this._LCLeft=i[14]?i[14]:l,this._LCRight=i[15]?i[15]:l,this._LCTop=i[12]?i[12]:l,this._LCBottom=i[13]?i[13]:l,this._RCLeft=i[2]?i[2]:l,this._RCRight=i[1]?i[1]:l,this._RCTop=i[3]?i[3]:l,this._RCBottom=i[0]?i[0]:l,this._FBLeftTop=i[4]?i[4]:l,this._FBLeftBottom=i[6]?i[6]:l,this._FBRightTop=i[5]?i[5]:l,this._FBRightBottom=i[7]?i[7]:l;var u={value:0};this._HAxisLeft=h[0]?h[0]:u,this._VAxisLeft=h[1]?h[1]:u,this._HAxisRight=h[2]?h[2]:u,this._VAxisRight=h[3]?h[3]:u,this.leftStick=new o,this.rightStick=new o},getAxisTotal:function(){return this.axes.length},getAxisValue:function(t){return this.axes[t].getValue()},setAxisThreshold:function(t){for(var e=0;e<this.axes.length;e++)this.axes[e].threshold=t},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(t){return this.buttons[t].value},isButtonDown:function(t){return this.buttons[t].pressed},update:function(t){for(var e=this.buttons,i=t.buttons,n=e.length,r=0;r<n;r++)e[r].update(i[r].value);var s=this.axes,a=t.axes;for(n=s.length,r=0;r<n;r++)s[r].update(a[r]);2<=n&&(this.leftStick.set(s[0].getValue(),s[1].getValue()),4<=n&&this.rightStick.set(s[2].getValue(),s[3].getValue()))},destroy:function(){var t;for(this.removeAllListeners(),this.manager=null,this.pad=null,t=0;t<this.buttons.length;t++)this.buttons[t].destroy();for(t=0;t<this.axes.length;t++)this.axes[t].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});t.exports=h},function(t,e,i){var n=i(0),r=i(10),s=i(137),a=new n({Extends:r,initialize:function(t,e){r.call(this),this.plugin=t,this.keyCode=e,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(t){return this.emitOnRepeat=t,this},onDown:function(t){this.originalEvent=t,this.enabled&&(this.altKey=t.altKey,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.location=t.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(s.DOWN,this,t):(this.isDown=!0,this.isUp=!1,this.timeDown=t.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(s.DOWN,this,t)))},onUp:function(t){this.originalEvent=t,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=t.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(s.UP,this,t))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});t.exports=a},function(t,e,i){var n=i(0),r=i(137),s=i(2),a=i(1225),o=i(1227),h=new n({initialize:function(t,e,i){if(void 0===i&&(i={}),e.length<2)return!1;this.manager=t,this.enabled=!0,this.keyCodes=[];for(var n=0;n<e.length;n++){var h=e[n];"string"==typeof h?this.keyCodes.push(h.toUpperCase().charCodeAt(0)):"number"==typeof h?this.keyCodes.push(h):h.hasOwnProperty("keyCode")&&this.keyCodes.push(h.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=s(i,"resetOnWrongKey",!0),this.maxKeyDelay=s(i,"maxKeyDelay",0),this.resetOnMatch=s(i,"resetOnMatch",!1),this.deleteOnMatch=s(i,"deleteOnMatch",!1);var l=this;this.onKeyDown=function(t){!l.matched&&l.enabled&&a(t,l)&&(l.manager.emit(r.COMBO_MATCH,l,t),l.resetOnMatch?o(l):l.deleteOnMatch&&l.destroy())},this.manager.on(r.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(r.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});t.exports=h},function(t,e,i){var n=i(215);t.exports=function(t,e){var i=n(e,t.xhrSettings),r=new XMLHttpRequest;if(r.open("GET",t.src,i.async,i.user,i.password),r.responseType=t.xhrSettings.responseType,r.timeout=i.timeout,i.headers)for(var s in i.headers)r.setRequestHeader(s,i.headers[s]);return i.header&&i.headerValue&&r.setRequestHeader(i.header,i.headerValue),i.requestedWith&&r.setRequestHeader("X-Requested-With",i.requestedWith),i.overrideMimeType&&r.overrideMimeType(i.overrideMimeType),i.withCredentials&&(r.withCredentials=!0),r.onload=t.onLoad.bind(t,r),r.onerror=t.onError.bind(t,r),r.onprogress=t.onProgress.bind(t),r.send(),r}},function(t,e,i){var n=i(0),r=i(17),s=i(21),a=i(8),o=i(2),h=i(457),l=i(7),u=new n({Extends:s,initialize:function(t,e,i,n,r){var a;l(e)&&(e=o(a=e,"key"),n=o(a,"xhrSettings"),r=o(a,"context",r));var h={type:"audio",cache:t.cacheManager.audio,extension:i.type,responseType:"arraybuffer",key:e,url:i.url,xhrSettings:n,config:{context:r}};s.call(this,t,h)},onProcess:function(){this.state=r.FILE_PROCESSING;var t=this;this.config.context.decodeAudioData(this.xhrLoader.response,(function(e){t.data=e,t.onProcessComplete()}),(function(e){console.error("Error decoding audio: "+t.key+" - ",e?e.message:null),t.onProcessError()})),this.config.context=null}});u.create=function(t,e,i,n,r){var s=t.systems.game,a=s.config.audio,c=s.device.audio;l(e)&&(i=o(e,"url",[]),n=o(e,"config",{}));var d=u.getAudioURL(s,i);return d?!c.webAudio||a&&a.disableWebAudio?new h(t,e,d,n):new u(t,e,d,r,s.sound.context):null},u.getAudioURL=function(t,e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var n=o(e[i],"url",e[i]);if(0===n.indexOf("blob:")||0===n.indexOf("data:"))return{url:n,type:""};var r=n.match(/\.([a-zA-Z0-9]+)($|\?)/);if(r=o(e[i],"type",r?r[1]:"").toLowerCase(),t.device.audio[r])return{url:n,type:r}}return null},a.register("audio",(function(t,e,i,n){var r,s=this.systems.game,a=s.config.audio,o=s.device.audio;if(a&&a.noAudio||!o.webAudio&&!o.audioData)return this;if(Array.isArray(t))for(var h=0;h<t.length;h++)(r=u.create(this,t[h]))&&this.addFile(r);else(r=u.create(this,t,e,i,n))&&this.addFile(r);return this})),t.exports=u},function(t,e,i){var n=i(0),r=i(82),s=i(21),a=i(2),o=i(138),h=i(7),l=new n({Extends:s,initialize:function(t,e,i,n){var r;h(e)&&(e=a(r=e,"key"),n=a(r,"config",n));var o={type:"audio",cache:t.cacheManager.audio,extension:i.type,key:e,url:i.url,config:n};s.call(this,t,o),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var t=0;t<this.data.length;t++){var e=this.data[t];e.oncanplaythrough=null,e.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(t){var e=t.target;e.oncanplaythrough=null,e.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(r.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var t=this.config&&this.config.instances||1;this.filesTotal=t,this.filesLoaded=0;for(var e=this.percentComplete=0;e<t;e++){var i=new Audio;i.dataset||(i.dataset={}),i.dataset.name=this.key+("0"+e).slice(-2),i.dataset.used="false",this.locked?i.dataset.locked="true":(i.dataset.locked="false",i.preload="auto",i.oncanplaythrough=this.onProgress.bind(this),i.onerror=this.onError.bind(this)),this.data.push(i)}for(e=0;e<this.data.length;e++)(i=this.data[e]).src=o(this,this.loader.baseURL),this.locked||i.load();this.locked&&setTimeout(this.onLoad.bind(this))}});t.exports=l},function(t,e,i){var n=i(0),r=i(17),s=i(21),a=i(8),o=i(2),h=i(7),l=new n({Extends:s,initialize:function(t,e,i,n){var r,a="js";h(e)&&(e=o(r=e,"key"),i=o(r,"url"),n=o(r,"xhrSettings"),a=o(r,"extension",a));var l={type:"script",cache:!1,extension:a,responseType:"text",key:e,url:i,xhrSettings:n};s.call(this,t,l)},onProcess:function(){this.state=r.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});a.register("script",(function(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new l(this,t[n]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},function(t,e,i){var n=i(0),r=i(17),s=i(21),a=i(8),o=i(2),h=i(7),l=new n({Extends:s,initialize:function(t,e,i,n){var r,a="txt";h(e)&&(e=o(r=e,"key"),i=o(r,"url"),n=o(r,"xhrSettings"),a=o(r,"extension",a));var l={type:"text",cache:t.cacheManager.text,extension:a,responseType:"text",key:e,url:i,xhrSettings:n};s.call(this,t,l)},onProcess:function(){this.state=r.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});a.register("text",(function(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new l(this,t[n]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},function(t,e,i){var n=i(461),r=i(140),s=i(0),a=i(50),o=i(462),h=i(463),l=new s({initialize:function(t){this.world=t,this.scene=t.scene,this.sys=t.scene.sys},collider:function(t,e,i,n,r){return this.world.addCollider(t,e,i,n,r)},overlap:function(t,e,i,n,r){return this.world.addOverlap(t,e,i,n,r)},existing:function(t,e){var i=e?a.STATIC_BODY:a.DYNAMIC_BODY;return this.world.enableBody(t,i),t},staticImage:function(t,e,i,r){var s=new n(this.scene,t,e,i,r);return this.sys.displayList.add(s),this.world.enableBody(s,a.STATIC_BODY),s},image:function(t,e,i,r){var s=new n(this.scene,t,e,i,r);return this.sys.displayList.add(s),this.world.enableBody(s,a.DYNAMIC_BODY),s},staticSprite:function(t,e,i,n){var s=new r(this.scene,t,e,i,n);return this.sys.displayList.add(s),this.sys.updateList.add(s),this.world.enableBody(s,a.STATIC_BODY),s},sprite:function(t,e,i,n){var s=new r(this.scene,t,e,i,n);return this.sys.displayList.add(s),this.sys.updateList.add(s),this.world.enableBody(s,a.DYNAMIC_BODY),s},staticGroup:function(t,e){return this.sys.updateList.add(new h(this.world,this.world.scene,t,e))},group:function(t,e){return this.sys.updateList.add(new o(this.world,this.world.scene,t,e))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});t.exports=l},function(t,e,i){var n=i(0),r=i(217),s=i(107),a=new n({Extends:s,Mixins:[r.Acceleration,r.Angular,r.Bounce,r.Debug,r.Drag,r.Enable,r.Friction,r.Gravity,r.Immovable,r.Mass,r.Size,r.Velocity],initialize:function(t,e,i,n,r){s.call(this,t,e,i,n,r),this.body=null}});t.exports=a},function(t,e,i){var n=i(140),r=i(0),s=i(50),a=i(2),o=i(97),h=i(7),l=new r({Extends:o,initialize:function(t,e,i,r){var l;i||r?h(i)?(r=i,i=null,r.internalCreateCallback=this.createCallbackHandler,r.internalRemoveCallback=this.removeCallbackHandler):Array.isArray(i)&&h(i[0])?(r=i[0],l=this,i.forEach((function(t){t.internalCreateCallback=l.createCallbackHandler,t.internalRemoveCallback=l.removeCallbackHandler})),i=null):r={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler}:r={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=t,r.classType=a(r,"classType",n),this.physicsType=s.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:a(r,"collideWorldBounds",!1),setBoundsRectangle:a(r,"customBoundsRectangle",null),setAccelerationX:a(r,"accelerationX",0),setAccelerationY:a(r,"accelerationY",0),setAllowDrag:a(r,"allowDrag",!0),setAllowGravity:a(r,"allowGravity",!0),setAllowRotation:a(r,"allowRotation",!0),setBounceX:a(r,"bounceX",0),setBounceY:a(r,"bounceY",0),setDragX:a(r,"dragX",0),setDragY:a(r,"dragY",0),setEnable:a(r,"enable",!0),setGravityX:a(r,"gravityX",0),setGravityY:a(r,"gravityY",0),setFrictionX:a(r,"frictionX",0),setFrictionY:a(r,"frictionY",0),setVelocityX:a(r,"velocityX",0),setVelocityY:a(r,"velocityY",0),setAngularVelocity:a(r,"angularVelocity",0),setAngularAcceleration:a(r,"angularAcceleration",0),setAngularDrag:a(r,"angularDrag",0),setMass:a(r,"mass",1),setImmovable:a(r,"immovable",!1)},o.call(this,e,i,r),this.type="PhysicsGroup"},createCallbackHandler:function(t){t.body||this.world.enableBody(t,s.DYNAMIC_BODY);var e=t.body;for(var i in this.defaults)e[i](this.defaults[i])},removeCallbackHandler:function(t){t.body&&this.world.disableBody(t)},setVelocity:function(t,e,i){void 0===i&&(i=0);for(var n=this.getChildren(),r=0;r<n.length;r++)n[r].body.velocity.set(t+r*i,e+r*i);return this},setVelocityX:function(t,e){void 0===e&&(e=0);for(var i=this.getChildren(),n=0;n<i.length;n++)i[n].body.velocity.x=t+n*e;return this},setVelocityY:function(t,e){void 0===e&&(e=0);for(var i=this.getChildren(),n=0;n<i.length;n++)i[n].body.velocity.y=t+n*e;return this}});t.exports=l},function(t,e,i){var n=i(140),r=i(0),s=i(50),a=i(2),o=i(97),h=i(7),l=new r({Extends:o,initialize:function(t,e,i,r){i||r?h(i)?(r=i,i=null,r.internalCreateCallback=this.createCallbackHandler,r.internalRemoveCallback=this.removeCallbackHandler,r.createMultipleCallback=this.createMultipleCallbackHandler,r.classType=a(r,"classType",n)):Array.isArray(i)&&h(i[0])?(r=i,i=null,r.forEach((function(t){t.internalCreateCallback=this.createCallbackHandler,t.internalRemoveCallback=this.removeCallbackHandler,t.createMultipleCallback=this.createMultipleCallbackHandler,t.classType=a(t,"classType",n)}))):r={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler}:r={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:n},this.world=t,this.physicsType=s.STATIC_BODY,o.call(this,e,i,r),this.type="StaticPhysicsGroup"},createCallbackHandler:function(t){t.body||this.world.enableBody(t,s.STATIC_BODY)},removeCallbackHandler:function(t){t.body&&this.world.disableBody(t)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var t=this.children.entries,e=0;e<t.length;e++)t[e].body.reset();return this}});t.exports=l},function(t,e){t.exports=function(t,e,i,n,r,s,a){void 0===s&&(s=!0),void 0===a&&(a=!1);var o,h,l,u=[],c=[],d=t.treeMinMax;return d.minX=e,d.minY=i,d.maxX=e+n,d.maxY=i+r,a&&(c=t.staticTree.search(d)),s&&t.useTree?u=t.tree.search(d):s&&(o=t.bodies,h={position:{x:e,y:i},left:e,top:i,right:e+n,bottom:i+r,isCircle:!1},l=t.intersects,o.iterate((function(t){l(t,h)&&u.push(t)}))),c.concat(u)}},function(t,e,i){var n=i(318),r=i(466),s=i(19),a=i(0),o=i(467),h=i(50),l=i(53),u=i(10),c=i(218),d=i(106),f=i(322),p=i(323),g=i(468),m=i(469),y=i(6),v=i(13),_=i(186),x=i(1284),w=i(11),b=i(470),T=i(1285),E=i(1290),A=i(1291),S=i(133),C=i(472),O=i(471),P=i(29),R=i(3),M=i(58),L=new a({Extends:u,initialize:function(t,e){u.call(this),this.scene=t,this.bodies=new S,this.staticBodies=new S,this.pendingDestroy=new S,this.colliders=new _,this.gravity=new R(y(e,"gravity.x",0),y(e,"gravity.y",0)),this.bounds=new w(y(e,"x",0),y(e,"y",0),y(e,"width",t.sys.scale.width),y(e,"height",t.sys.scale.height)),this.checkCollision={up:y(e,"checkCollision.up",!0),down:y(e,"checkCollision.down",!0),left:y(e,"checkCollision.left",!0),right:y(e,"checkCollision.right",!0)},this.fps=y(e,"fps",60),this.fixedStep=!0,this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=y(e,"timeScale",1),this.OVERLAP_BIAS=y(e,"overlapBias",4),this.TILE_BIAS=y(e,"tileBias",16),this.forceX=y(e,"forceX",!1),this.isPaused=y(e,"isPaused",!1),this._total=0,this.drawDebug=y(e,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:y(e,"debugShowBody",!0),debugShowStaticBody:y(e,"debugShowStaticBody",!0),debugShowVelocity:y(e,"debugShowVelocity",!0),bodyDebugColor:y(e,"debugBodyColor",16711935),staticBodyDebugColor:y(e,"debugStaticBodyColor",255),velocityDebugColor:y(e,"debugVelocityColor",65280)},this.maxEntries=y(e,"maxEntries",16),this.useTree=y(e,"useTree",!0),this.tree=new b(this.maxEntries),this.staticTree=new b(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new P,this._tempMatrix2=new P,this.drawDebug&&this.createDebugGraphic()},enable:function(t,e){void 0===e&&(e=h.DYNAMIC_BODY),Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var n=t[i];if(n.isParent)for(var r=n.getChildren(),s=0;s<r.length;s++){var a=r[s];a.isParent?this.enable(a,e):this.enableBody(a,e)}else this.enableBody(n,e)}},enableBody:function(t,e){return void 0===e&&(e=h.DYNAMIC_BODY),t.body||(e===h.DYNAMIC_BODY?t.body=new r(this,t):e===h.STATIC_BODY&&(t.body=new C(this,t))),this.add(t.body),t},add:function(t){return t.physicsType===h.DYNAMIC_BODY?this.bodies.set(t):t.physicsType===h.STATIC_BODY&&(this.staticBodies.set(t),this.staticTree.insert(t)),t.enable=!0,t},disable:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=t[e];if(i.isParent)for(var n=i.getChildren(),r=0;r<n.length;r++){var s=n[r];s.isParent?this.disable(s):this.disableBody(s.body)}else this.disableBody(i.body)}},disableBody:function(t){this.remove(t),t.enable=!1},remove:function(t){t.physicsType===h.DYNAMIC_BODY?(this.tree.remove(t),this.bodies.delete(t)):t.physicsType===h.STATIC_BODY&&(this.staticBodies.delete(t),this.staticTree.remove(t))},createDebugGraphic:function(){var t=this.scene.sys.add.graphics({x:0,y:0});return t.setDepth(Number.MAX_VALUE),this.debugGraphic=t,this.drawDebug=!0,t},setBounds:function(t,e,i,n,r,s,a,o){return this.bounds.setTo(t,e,i,n),void 0!==r&&this.setBoundsCollision(r,s,a,o),this},setBoundsCollision:function(t,e,i,n){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===n&&(n=!0),this.checkCollision.left=t,this.checkCollision.right=e,this.checkCollision.up=i,this.checkCollision.down=n,this},pause:function(){return this.isPaused=!0,this.emit(c.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(c.RESUME),this},addCollider:function(t,e,i,n,r){void 0===i&&(i=null),void 0===n&&(n=null),void 0===r&&(r=i);var s=new o(this,!1,t,e,i,n,r);return this.colliders.add(s),s},addOverlap:function(t,e,i,n,r){void 0===i&&(i=null),void 0===n&&(n=null),void 0===r&&(r=i);var s=new o(this,!0,t,e,i,n,r);return this.colliders.add(s),s},removeCollider:function(t){return this.colliders.remove(t),this},setFPS:function(t){return this.fps=t,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(t,e){if(!this.isPaused&&0!==this.bodies.size){var i,n=this._frameTime,r=this._frameTimeMS*this.timeScale;this._elapsed+=e;var s=this.bodies.entries,a=this._elapsed>=r;for(this.fixedStep||(n=.001*e,a=!0,this._elapsed=0),h=0;h<s.length;h++)(i=s[h]).enable&&i.preUpdate(a,n);if(a){this._elapsed-=r,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(s));for(var o=this.colliders.update(),h=0;h<o.length;h++){var l=o[h];l.active&&l.update()}this.emit(c.WORLD_STEP)}for(;this._elapsed>=r;)this._elapsed-=r,this.step(n)}},step:function(t){for(var e,i=this.bodies.entries,n=i.length,r=0;r<n;r++)(e=i[r]).enable&&e.update(t);this.useTree&&(this.tree.clear(),this.tree.load(i));var s=this.colliders.update();for(r=0;r<s.length;r++){var a=s[r];a.active&&a.update()}this.emit(c.WORLD_STEP),this.stepsLastFrame++},postUpdate:function(){var t,e=(a=this.bodies.entries).length,i=this.bodies,n=this.staticBodies;if(this.stepsLastFrame)for(u=this.stepsLastFrame=0;u<e;u++)(t=a[u]).enable&&t.postUpdate();if(this.drawDebug){var r=this.debugGraphic;for(r.clear(),u=0;u<e;u++)(t=a[u]).willDrawDebug()&&t.drawDebug(r);for(e=(a=n.entries).length,u=0;u<e;u++)(t=a[u]).willDrawDebug()&&t.drawDebug(r)}var s=this.pendingDestroy;if(0<s.size){for(var a,o=this.tree,l=this.staticTree,u=(e=(a=s.entries).length,0);u<e;u++)(t=a[u]).physicsType===h.DYNAMIC_BODY?(o.remove(t),i.delete(t)):t.physicsType===h.STATIC_BODY&&(l.remove(t),n.delete(t)),t.world=void 0,t.gameObject=void 0;s.clear()}},updateMotion:function(t,e){t.allowRotation&&this.computeAngularVelocity(t,e),this.computeVelocity(t,e)},computeAngularVelocity:function(t,e){var i=t.angularVelocity,n=t.angularAcceleration,r=t.angularDrag,a=t.maxAngular;n?i+=n*e:t.allowDrag&&r&&(f(i-(r*=e),0,.1)?i-=r:p(i+r,0,.1)?i+=r:i=0);var o=(i=s(i,-a,a))-t.angularVelocity;t.angularVelocity+=o,t.rotation+=t.angularVelocity*e},computeVelocity:function(t,e){var i=t.velocity.x,n=t.acceleration.x,r=t.drag.x,a=t.maxVelocity.x,o=t.velocity.y,h=t.acceleration.y,l=t.drag.y,u=t.maxVelocity.y,c=t.speed,g=t.maxSpeed,m=t.allowDrag,y=t.useDamping;t.allowGravity&&(i+=(this.gravity.x+t.gravity.x)*e,o+=(this.gravity.y+t.gravity.y)*e),n?i+=n*e:m&&r&&(y?(i*=r,c=Math.sqrt(i*i+o*o),d(c,0,.001)&&(i=0)):f(i-(r*=e),0,.01)?i-=r:p(i+r,0,.01)?i+=r:i=0),h?o+=h*e:m&&l&&(y?(o*=l,c=Math.sqrt(i*i+o*o),d(c,0,.001)&&(o=0)):f(o-(l*=e),0,.01)?o-=l:p(o+l,0,.01)?o+=l:o=0),i=s(i,-a,a),o=s(o,-u,u),t.velocity.set(i,o),-1<g&&g<c&&(t.velocity.normalize().scale(g),c=g),t.speed=c},separate:function(t,e,i,n,r,s){if(!s&&!t.enable||!e.enable||t.checkCollision.none||e.checkCollision.none||!this.intersects(t,e))return!1;if(i&&!1===i.call(n,t.gameObject,e.gameObject))return!1;if(t.isCircle&&e.isCircle)return this.separateCircle(t,e,r);if(t.isCircle!==e.isCircle){var a=t.isCircle?e:t,o=t.isCircle?t:e,h=a.x,l=a.y,u=a.right,d=a.bottom,f=o.center;if((f.y<l||f.y>d)&&(f.x<h||f.x>u))return this.separateCircle(t,e,r)}var p=!1,g=!1;r?(p=E(t,e,r,this.OVERLAP_BIAS),g=A(t,e,r,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+t.gravity.y)<Math.abs(this.gravity.x+t.gravity.x)?(p=E(t,e,r,this.OVERLAP_BIAS),this.intersects(t,e)&&(g=A(t,e,r,this.OVERLAP_BIAS))):(g=A(t,e,r,this.OVERLAP_BIAS),this.intersects(t,e)&&(p=E(t,e,r,this.OVERLAP_BIAS)));var m=p||g;return m&&(r?(t.onOverlap||e.onOverlap)&&this.emit(c.OVERLAP,t.gameObject,e.gameObject,t,e):(t.onCollide||e.onCollide)&&this.emit(c.COLLIDE,t.gameObject,e.gameObject,t,e)),m},separateCircle:function(t,e,i,r){t.updateCenter(),e.updateCenter(),g(t,e,!1,r),m(t,e,!1,r);var s,a,o=0;if(t.isCircle!==e.isCircle?(s={x:e.isCircle?t.position.x:e.position.x,y:e.isCircle?t.position.y:e.position.y,right:e.isCircle?t.right:e.right,bottom:e.isCircle?t.bottom:e.bottom},(a={x:t.isCircle?t.center.x:e.center.x,y:t.isCircle?t.center.y:e.center.y,radius:t.isCircle?t.halfWidth:e.halfWidth}).y<s.y?a.x<s.x?o=l(a.x,a.y,s.x,s.y)-a.radius:s.right<a.x&&(o=l(a.x,a.y,s.right,s.y)-a.radius):s.bottom<a.y&&(a.x<s.x?o=l(a.x,a.y,s.x,s.bottom)-a.radius:s.right<a.x&&(o=l(a.x,a.y,s.right,s.bottom)-a.radius)),o*=-1):o=t.halfWidth+e.halfWidth-l(t.center.x,t.center.y,e.center.x,e.center.y),i||0===o||t.immovable&&e.immovable||t.customSeparateX||e.customSeparateX)return 0!==o&&(t.onOverlap||e.onOverlap)&&this.emit(c.OVERLAP,t.gameObject,e.gameObject,t,e),0!==o;var h=t.center.x-e.center.x,u=t.center.y-e.center.y,d=Math.sqrt(Math.pow(h,2)+Math.pow(u,2)),f=(e.center.x-t.center.x)/d||0,p=(e.center.y-t.center.y)/d||0,y=2*(t.velocity.x*f+t.velocity.y*p-e.velocity.x*f-e.velocity.y*p)/(t.mass+e.mass);(t.immovable||e.immovable)&&(y*=2),t.immovable||(t.velocity.x=t.velocity.x-y/t.mass*f,t.velocity.y=t.velocity.y-y/t.mass*p),e.immovable||(e.velocity.x=e.velocity.x+y/e.mass*f,e.velocity.y=e.velocity.y+y/e.mass*p),t.immovable||e.immovable||(o/=2);var _=n(t.center,e.center),x=(o+v.EPSILON)*Math.cos(_),w=(o+v.EPSILON)*Math.sin(_);return t.immovable||(t.x-=x,t.y-=w,t.updateCenter()),e.immovable||(e.x+=x,e.y+=w,e.updateCenter()),t.velocity.x*=t.bounce.x,t.velocity.y*=t.bounce.y,e.velocity.x*=e.bounce.x,e.velocity.y*=e.bounce.y,(t.onCollide||e.onCollide)&&this.emit(c.COLLIDE,t.gameObject,e.gameObject,t,e),!0},intersects:function(t,e){return t!==e&&(t.isCircle||e.isCircle?t.isCircle?e.isCircle?l(t.center.x,t.center.y,e.center.x,e.center.y)<=t.halfWidth+e.halfWidth:this.circleBodyIntersects(t,e):this.circleBodyIntersects(e,t):!(t.right<=e.position.x||t.bottom<=e.position.y||t.position.x>=e.right||t.position.y>=e.bottom))},circleBodyIntersects:function(t,e){var i=s(t.center.x,e.left,e.right),n=s(t.center.y,e.top,e.bottom);return(t.center.x-i)*(t.center.x-i)+(t.center.y-n)*(t.center.y-n)<=t.halfWidth*t.halfWidth},overlap:function(t,e,i,n,r){return void 0===i&&(i=null),void 0===n&&(n=null),void 0===r&&(r=i),this.collideObjects(t,e,i,n,r,!0)},collide:function(t,e,i,n,r){return void 0===i&&(i=null),void 0===n&&(n=null),void 0===r&&(r=i),this.collideObjects(t,e,i,n,r,!1)},collideObjects:function(t,e,i,n,r,s){var a;t.isParent&&void 0===t.physicsType&&(t=t.children.entries),e&&e.isParent&&void 0===e.physicsType&&(e=e.children.entries);var o=Array.isArray(t),h=Array.isArray(e);if(this._total=0,o||h)if(!o&&h)for(a=0;a<e.length;a++)this.collideHandler(t,e[a],i,n,r,s);else if(o&&!h)if(e)for(a=0;a<t.length;a++)this.collideHandler(t[a],e,i,n,r,s);else for(a=0;a<t.length;a++)for(var l=t[a],u=a+1;u<t.length;u++)a!==u&&this.collideHandler(l,t[u],i,n,r,s);else for(a=0;a<t.length;a++)for(u=0;u<e.length;u++)this.collideHandler(t[a],e[u],i,n,r,s);else this.collideHandler(t,e,i,n,r,s);return 0<this._total},collideHandler:function(t,e,i,n,r,s){if(void 0===e&&t.isParent)return this.collideGroupVsGroup(t,t,i,n,r,s);if(!t||!e)return!1;if(t.body){if(e.body)return this.collideSpriteVsSprite(t,e,i,n,r,s);if(e.isParent)return this.collideSpriteVsGroup(t,e,i,n,r,s);if(e.isTilemap)return this.collideSpriteVsTilemapLayer(t,e,i,n,r,s)}else if(t.isParent){if(e.body)return this.collideSpriteVsGroup(e,t,i,n,r,s);if(e.isParent)return this.collideGroupVsGroup(t,e,i,n,r,s);if(e.isTilemap)return this.collideGroupVsTilemapLayer(t,e,i,n,r,s)}else if(t.isTilemap){if(e.body)return this.collideSpriteVsTilemapLayer(e,t,i,n,r,s);if(e.isParent)return this.collideGroupVsTilemapLayer(e,t,i,n,r,s)}},collideSpriteVsSprite:function(t,e,i,n,r,s){return!(!t.body||!e.body||(this.separate(t.body,e.body,n,r,s)&&(i&&i.call(r,t,e),this._total++),0))},collideSpriteVsGroup:function(t,e,i,n,r,s){var a,o=t.body;if(0!==e.length&&o&&o.enable&&!o.checkCollision.none)if(this.useTree||e.physicsType===h.STATIC_BODY){var l=this.treeMinMax;l.minX=o.left,l.minY=o.top,l.maxX=o.right,l.maxY=o.bottom;for(var u=e.physicsType===h.DYNAMIC_BODY?this.tree.search(l):this.staticTree.search(l),c=u.length,d=0;d<c;d++)o!==(a=u[d])&&a.enable&&!a.checkCollision.none&&e.contains(a.gameObject)&&this.separate(o,a,n,r,s,!0)&&(i&&i.call(r,o.gameObject,a.gameObject),this._total++)}else{var f=e.getChildren(),p=e.children.entries.indexOf(t);for(c=f.length,d=0;d<c;d++)(a=f[d].body)&&d!==p&&a.enable&&this.separate(o,a,n,r,s)&&(i&&i.call(r,o.gameObject,a.gameObject),this._total++)}},collideGroupVsTilemapLayer:function(t,e,i,n,r,s){var a=t.getChildren();if(0===a.length)return!1;for(var o=!1,h=0;h<a.length;h++)a[h].body&&this.collideSpriteVsTilemapLayer(a[h],e,i,n,r,s)&&(o=!0);return o},collideTiles:function(t,e,i,n,r){return!(!t.body.enable||0===e.length)&&this.collideSpriteVsTilesHandler(t,e,i,n,r,!1,!1)},overlapTiles:function(t,e,i,n,r){return!(!t.body.enable||0===e.length)&&this.collideSpriteVsTilesHandler(t,e,i,n,r,!0,!1)},collideSpriteVsTilemapLayer:function(t,e,i,n,r,s){var a=t.body;if(!a.enable||a.checkCollision.none)return!1;var o,h=a.position.x,l=a.position.y,u=a.width,c=a.height,d=e.layer;d.tileWidth>d.baseTileWidth&&(h-=o=(d.tileWidth-d.baseTileWidth)*e.scaleX,u+=o),d.tileHeight>d.baseTileHeight&&(c+=(d.tileHeight-d.baseTileHeight)*e.scaleY);var f=e.getTilesWithinWorldXY(h,l,u,c);return 0!==f.length&&this.collideSpriteVsTilesHandler(t,f,i,n,r,s,!0)},collideSpriteVsTilesHandler:function(t,e,i,n,r,s,a){for(var o,h,l=t.body,u={left:0,right:0,top:0,bottom:0},d=!1,f=0;f<e.length;f++)h=(o=e[f]).tilemapLayer,u.left=h.tileToWorldX(o.x),u.top=h.tileToWorldY(o.y),o.baseHeight!==o.height&&(u.top-=(o.height-o.baseHeight)*h.scaleY),u.right=u.left+o.width*h.scaleX,u.bottom=u.top+o.height*h.scaleY,O(u,l)&&(!n||n.call(r,t,o))&&x(o,t)&&(s||T(f,l,o,u,h,this.TILE_BIAS,a))&&(this._total++,d=!0,i&&i.call(r,t,o),s&&l.onOverlap?this.emit(c.TILE_OVERLAP,t,o,l):l.onCollide&&this.emit(c.TILE_COLLIDE,t,o,l));return d},collideGroupVsGroup:function(t,e,i,n,r,s){if(0!==t.length&&0!==e.length)for(var a=t.getChildren(),o=0;o<a.length;o++)this.collideSpriteVsGroup(a[o],e,i,n,r,s)},wrap:function(t,e){t.body?this.wrapObject(t,e):t.getChildren?this.wrapArray(t.getChildren(),e):Array.isArray(t)?this.wrapArray(t,e):this.wrapObject(t,e)},wrapArray:function(t,e){for(var i=0;i<t.length;i++)this.wrapObject(t[i],e)},wrapObject:function(t,e){void 0===e&&(e=0),t.x=M(t.x,this.bounds.left-e,this.bounds.right+e),t.y=M(t.y,this.bounds.top-e,this.bounds.bottom+e)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});t.exports=L},function(t,e,i){var n=i(0),r=i(50),s=i(218),a=i(173),o=i(11),h=i(48),l=i(3),u=new n({initialize:function(t,e){var i=e.displayWidth?e.displayWidth:64,n=e.displayHeight?e.displayHeight:64;this.world=t,this.gameObject=e,this.transform={x:e.x,y:e.y,rotation:e.angle,scaleX:e.scaleX,scaleY:e.scaleY,displayOriginX:e.displayOriginX,displayOriginY:e.displayOriginY},this.debugShowBody=t.defaults.debugShowBody,this.debugShowVelocity=t.defaults.debugShowVelocity,this.debugBodyColor=t.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new l,this.position=new l(e.x-e.scaleX*e.displayOriginX,e.y-e.scaleY*e.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=e.angle,this.preRotation=e.angle,this.width=i,this.height=n,this.sourceWidth=i,this.sourceHeight=n,e.frame&&(this.sourceWidth=e.frame.realWidth,this.sourceHeight=e.frame.realHeight),this.halfWidth=Math.abs(i/2),this.halfHeight=Math.abs(n/2),this.center=new l(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new l,this.newVelocity=new l,this.deltaMax=new l,this.acceleration=new l,this.allowDrag=!0,this.drag=new l,this.allowGravity=!0,this.gravity=new l,this.bounce=new l,this.worldBounce=null,this.customBoundsRectangle=t.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new l(1e4,1e4),this.maxSpeed=-1,this.friction=new l(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=r.FACING_NONE,this.immovable=!1,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=r.DYNAMIC_BODY,this._sx=e.scaleX,this._sy=e.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new o},updateBounds:function(){var t,e=this.gameObject,i=this.transform;e.parentContainer?(t=e.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2),i.x=t.tx,i.y=t.ty,i.rotation=a(t.rotation),i.scaleX=t.scaleX,i.scaleY=t.scaleY):(i.x=e.x,i.y=e.y,i.rotation=e.angle,i.scaleX=e.scaleX,i.scaleY=e.scaleY),i.displayOriginX=e.displayOriginX,i.displayOriginY=e.displayOriginY;var n,r,s,o=!1;this.syncBounds?(n=e.getBounds(this._bounds),this.width=n.width,this.height=n.height,o=!0):(r=Math.abs(i.scaleX),s=Math.abs(i.scaleY),this._sx===r&&this._sy===s||(this.width=this.sourceWidth*r,this.height=this.sourceHeight*s,this._sx=r,this._sy=s,o=!0)),o&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var t=this.transform;this.position.x=t.x+t.scaleX*(this.offset.x-t.displayOriginX),this.position.y=t.y+t.scaleY*(this.offset.y-t.displayOriginY),this.updateCenter()},resetFlags:function(){var t=this.wasTouching,e=this.touching,i=this.blocked;t.none=e.none,t.up=e.up,t.down=e.down,t.left=e.left,t.right=e.right,e.none=!0,e.up=!1,e.down=!1,e.left=!1,e.right=!1,i.none=!0,i.up=!1,i.down=!1,i.left=!1,i.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(t,e){t&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),t&&this.update(e)},update:function(t){var e,i;this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves&&(this.world.updateMotion(this,t),e=this.velocity.x,i=this.velocity.y,this.newVelocity.set(e*t,i*t),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(i,e),this.speed=Math.sqrt(e*e+i*i),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(s.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)),this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var t,e,i=this.position.x-this.prevFrame.x,n=this.position.y-this.prevFrame.y;this.moves&&(0!==(t=this.deltaMax.x)&&0!==i&&(i<0&&i<-t?i=-t:0<i&&t<i&&(i=t)),0!==(e=this.deltaMax.y)&&0!==n&&(n<0&&n<-e?n=-e:0<n&&e<n&&(n=e)),this.gameObject.x+=i,this.gameObject.y+=n),i<0?this.facing=r.FACING_LEFT:0<i&&(this.facing=r.FACING_RIGHT),n<0?this.facing=r.FACING_UP:0<n&&(this.facing=r.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=i,this._ty=n},setBoundsRectangle:function(t){return this.customBoundsRectangle=t||this.world.bounds,this},checkWorldBounds:function(){var t=this.position,e=this.customBoundsRectangle,i=this.world.checkCollision,n=this.worldBounce?-this.worldBounce.x:-this.bounce.x,r=this.worldBounce?-this.worldBounce.y:-this.bounce.y,s=!1;return t.x<e.x&&i.left?(t.x=e.x,this.velocity.x*=n,s=this.blocked.left=!0):this.right>e.right&&i.right&&(t.x=e.right-this.width,this.velocity.x*=n,s=this.blocked.right=!0),t.y<e.y&&i.up?(t.y=e.y,this.velocity.y*=r,s=this.blocked.up=!0):this.bottom>e.bottom&&i.down&&(t.y=e.bottom-this.height,this.velocity.y*=r,s=this.blocked.down=!0),s&&(this.blocked.none=!1),s},setOffset:function(t,e){return void 0===e&&(e=t),this.offset.set(t,e),this.updateCenter(),this},setSize:function(t,e,i){void 0===i&&(i=!0);var n,r,s=this.gameObject;return!t&&s.frame&&(t=s.frame.realWidth),!e&&s.frame&&(e=s.frame.realHeight),this.sourceWidth=t,this.sourceHeight=e,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),i&&s.getCenter&&(n=(s.width-t)/2,r=(s.height-e)/2,this.offset.set(n,r)),this.isCircle=!1,this.radius=0,this},setCircle:function(t,e,i){return void 0===e&&(e=this.offset.x),void 0===i&&(i=this.offset.y),0<t?(this.isCircle=!0,this.radius=t,this.sourceWidth=2*t,this.sourceHeight=2*t,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(e,i),this.updateCenter()):this.isCircle=!1,this},reset:function(t,e){this.stop();var i=this.gameObject;i.setPosition(t,e),i.getTopLeft?i.getTopLeft(this.position):this.position.set(t,e),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=i.angle,this.preRotation=i.angle,this.updateBounds(),this.updateCenter()},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function(t,e){return this.isCircle?0<this.radius&&t>=this.left&&t<=this.right&&e>=this.top&&e<=this.bottom&&(this.center.x-t)*(this.center.x-t)+(this.center.y-e)*(this.center.y-e)<=this.radius*this.radius:h(this,t,e)},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return 0<this._dx?this._dx:-this._dx},deltaAbsY:function(){return 0<this._dy?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(t){var e=this.position,i=e.x+this.halfWidth,n=e.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(t.defaultStrokeWidth,this.debugBodyColor),this.isCircle?t.strokeCircle(i,n,this.width/2):(this.checkCollision.up&&t.lineBetween(e.x,e.y,e.x+this.width,e.y),this.checkCollision.right&&t.lineBetween(e.x+this.width,e.y,e.x+this.width,e.y+this.height),this.checkCollision.down&&t.lineBetween(e.x,e.y+this.height,e.x+this.width,e.y+this.height),this.checkCollision.left&&t.lineBetween(e.x,e.y,e.x,e.y+this.height))),this.debugShowVelocity&&(t.lineStyle(t.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),t.lineBetween(i,n,i+this.velocity.x/2,n+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(t,e,i){void 0===t&&(t=!0),this.collideWorldBounds=t;var n=void 0!==e,r=void 0!==i;return(n||r)&&(this.worldBounce||(this.worldBounce=new l),n&&(this.worldBounce.x=e),r&&(this.worldBounce.y=i)),this},setVelocity:function(t,e){return this.velocity.set(t,e),t=this.velocity.x,e=this.velocity.y,this.speed=Math.sqrt(t*t+e*e),this},setVelocityX:function(t){this.velocity.x=t;var e=this.velocity.y;return this.speed=Math.sqrt(t*t+e*e),this},setVelocityY:function(t){this.velocity.y=t;var e=this.velocity.x;return this.speed=Math.sqrt(e*e+t*t),this},setMaxVelocity:function(t,e){return this.maxVelocity.set(t,e),this},setMaxSpeed:function(t){return this.maxSpeed=t,this},setBounce:function(t,e){return this.bounce.set(t,e),this},setBounceX:function(t){return this.bounce.x=t,this},setBounceY:function(t){return this.bounce.y=t,this},setAcceleration:function(t,e){return this.acceleration.set(t,e),this},setAccelerationX:function(t){return this.acceleration.x=t,this},setAccelerationY:function(t){return this.acceleration.y=t,this},setAllowDrag:function(t){return void 0===t&&(t=!0),this.allowDrag=t,this},setAllowGravity:function(t){return void 0===t&&(t=!0),this.allowGravity=t,this},setAllowRotation:function(t){return void 0===t&&(t=!0),this.allowRotation=t,this},setDrag:function(t,e){return this.drag.set(t,e),this},setDragX:function(t){return this.drag.x=t,this},setDragY:function(t){return this.drag.y=t,this},setGravity:function(t,e){return this.gravity.set(t,e),this},setGravityX:function(t){return this.gravity.x=t,this},setGravityY:function(t){return this.gravity.y=t,this},setFriction:function(t,e){return this.friction.set(t,e),this},setFrictionX:function(t){return this.friction.x=t,this},setFrictionY:function(t){return this.friction.y=t,this},setAngularVelocity:function(t){return this.angularVelocity=t,this},setAngularAcceleration:function(t){return this.angularAcceleration=t,this},setAngularDrag:function(t){return this.angularDrag=t,this},setMass:function(t){return this.mass=t,this},setImmovable:function(t){return void 0===t&&(t=!0),this.immovable=t,this},setEnable:function(t){return void 0===t&&(t=!0),this.enable=t,this},x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});t.exports=u},function(t,e,i){var n=new(i(0))({initialize:function(t,e,i,n,r,s,a){this.world=t,this.name="",this.active=!0,this.overlapOnly=e,this.object1=i,this.object2=n,this.collideCallback=r,this.processCallback=s,this.callbackContext=a},setName:function(t){return this.name=t,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});t.exports=n},function(t,e,i){var n=i(50);t.exports=function(t,e,i,r){var s=0,a=t.deltaAbsX()+e.deltaAbsX()+r;return 0===t._dx&&0===e._dx?(t.embedded=!0,e.embedded=!0):t._dx>e._dx?a<(s=t.right-e.x)&&!i||!1===t.checkCollision.right||!1===e.checkCollision.left?s=0:(t.touching.none=!1,t.touching.right=!0,e.touching.none=!1,e.touching.left=!0,e.physicsType===n.STATIC_BODY&&(t.blocked.none=!1,t.blocked.right=!0),t.physicsType===n.STATIC_BODY&&(e.blocked.none=!1,e.blocked.left=!0)):t._dx<e._dx&&(a<-(s=t.x-e.width-e.x)&&!i||!1===t.checkCollision.left||!1===e.checkCollision.right?s=0:(t.touching.none=!1,t.touching.left=!0,e.touching.none=!1,e.touching.right=!0,e.physicsType===n.STATIC_BODY&&(t.blocked.none=!1,t.blocked.left=!0),t.physicsType===n.STATIC_BODY&&(e.blocked.none=!1,e.blocked.right=!0))),t.overlapX=s,e.overlapX=s}},function(t,e,i){var n=i(50);t.exports=function(t,e,i,r){var s=0,a=t.deltaAbsY()+e.deltaAbsY()+r;return 0===t._dy&&0===e._dy?(t.embedded=!0,e.embedded=!0):t._dy>e._dy?a<(s=t.bottom-e.y)&&!i||!1===t.checkCollision.down||!1===e.checkCollision.up?s=0:(t.touching.none=!1,t.touching.down=!0,e.touching.none=!1,e.touching.up=!0,e.physicsType===n.STATIC_BODY&&(t.blocked.none=!1,t.blocked.down=!0),t.physicsType===n.STATIC_BODY&&(e.blocked.none=!1,e.blocked.up=!0)):t._dy<e._dy&&(a<-(s=t.y-e.bottom)&&!i||!1===t.checkCollision.up||!1===e.checkCollision.down?s=0:(t.touching.none=!1,t.touching.up=!0,e.touching.none=!1,e.touching.down=!0,e.physicsType===n.STATIC_BODY&&(t.blocked.none=!1,t.blocked.up=!0),t.physicsType===n.STATIC_BODY&&(e.blocked.none=!1,e.blocked.down=!0))),t.overlapY=s,e.overlapY=s}},function(t,e,i){var n=i(391);function r(t){if(!(this instanceof r))return new r(t);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}function s(t,e){a(t,0,t.children.length,e,t)}function a(t,e,i,n,r){(r=r||p(null)).minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var s,a=e;a<i;a++)s=t.children[a],o(r,t.leaf?n(s):s);return r}function o(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function h(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function u(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function c(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(t,e,i,r,s){for(var a,o=[e,i];o.length;)(i=o.pop())-(e=o.pop())<=r||(a=e+Math.ceil((i-e)/r/2)*r,n(t,a,e,i,s),o.push(e,a,a,i))}r.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],n=this.toBBox;if(!f(t,e))return i;for(var r,s,a,o,h=[];e;){for(r=0,s=e.children.length;r<s;r++)a=e.children[r],f(t,o=e.leaf?n(a):a)&&(e.leaf?i.push(a):d(t,o)?this._all(a,i):h.push(a));e=h.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!f(t,e))return!1;for(var n,r,s,a,o=[];e;){for(n=0,r=e.children.length;n<r;n++)if(s=e.children[n],f(t,a=e.leaf?i(s):s)){if(e.leaf||d(t,a))return!0;o.push(s)}e=o.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var n,r=this._build(t.slice(),0,t.length-1,0);return this.data.children.length?this.data.height===r.height?this._splitRoot(this.data,r):(this.data.height<r.height&&(n=this.data,this.data=r,r=n),this._insert(r,this.data.height-r.height-1,!0)):this.data=r,this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=p([]),this},remove:function(t,e){if(!t)return this;for(var i,n,r,s,a=this.data,o=this.toBBox(t),h=[],l=[];a||h.length;){if(a||(a=h.pop(),n=h[h.length-1],i=l.pop(),s=!0),a.leaf&&-1!==(r=function(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}(t,a.children,e)))return a.children.splice(r,1),h.push(a),this._condense(h),this;s||a.leaf||!d(a,o)?n?(i++,a=n.children[i],s=!1):a=null:(h.push(a),l.push(i),i=0,a=(n=a).children[0])}return this},toBBox:function(t){return{minX:t.left,minY:t.top,maxX:t.right,maxY:t.bottom}},compareMinX:function(t,e){return t.left-e.left},compareMinY:function(t,e){return t.top-e.top},toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,n){var r,a=i-e+1,o=this._maxEntries;if(a<=o)return s(r=p(t.slice(e,i+1)),this.toBBox),r;n||(n=Math.ceil(Math.log(a)/Math.log(o)),o=Math.ceil(a/Math.pow(o,n-1))),(r=p([])).leaf=!1,r.height=n;var h,l,u,c,d=Math.ceil(a/o),f=d*Math.ceil(Math.sqrt(o));for(g(t,e,i,f,this.compareMinX),h=e;h<=i;h+=f)for(g(t,h,u=Math.min(h+f-1,i),d,this.compareMinY),l=h;l<=u;l+=d)c=Math.min(l+d-1,u),r.children.push(this._build(t,l,c,n-1));return s(r,this.toBBox),r},_chooseSubtree:function(t,e,i,n){for(var r,s,a,o,h,l,c,d,f,p;n.push(e),!e.leaf&&n.length-1!==i;){for(c=d=1/0,r=0,s=e.children.length;r<s;r++)h=u(a=e.children[r]),f=t,p=a,(l=(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-h)<d?(d=l,c=h<c?h:c,o=a):l===d&&h<c&&(c=h,o=a);e=o||e.children[0]}return e},_insert:function(t,e,i){var n=this.toBBox,r=i?t:n(t),s=[],a=this._chooseSubtree(r,this.data,e,s);for(a.children.push(t),o(a,r);0<=e&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(r,s,e)},_split:function(t,e){var i=t[e],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);var a=this._chooseSplitIndex(i,r,n),o=p(i.children.splice(a,i.children.length-a));o.height=i.height,o.leaf=i.leaf,s(i,this.toBBox),s(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(t,e){this.data=p([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){for(var n,r,s,o,h,l,c,d,f,p,g,m,y=h=1/0,v=e;v<=i-e;v++)c=n=a(t,0,v,this.toBBox),d=r=a(t,v,i,this.toBBox),f=Math.max(c.minX,d.minX),p=Math.max(c.minY,d.minY),g=Math.min(c.maxX,d.maxX),m=Math.min(c.maxY,d.maxY),s=Math.max(0,g-f)*Math.max(0,m-p),o=u(n)+u(r),s<y?(y=s,l=v,h=o<h?o:h):s===y&&o<h&&(h=o,l=v);return l},_chooseSplitAxis:function(t,e,i){var n=t.leaf?this.compareMinX:h,r=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,r)&&t.children.sort(n)},_allDistMargin:function(t,e,i,n){t.children.sort(n);for(var r,s=this.toBBox,h=a(t,0,e,s),l=a(t,i-e,i,s),u=c(h)+c(l),d=e;d<i-e;d++)r=t.children[d],o(h,t.leaf?s(r):r),u+=c(h);for(d=i-e-1;e<=d;d--)r=t.children[d],o(l,t.leaf?s(r):r),u+=c(l);return u},_adjustParentBBoxes:function(t,e,i){for(var n=i;0<=n;n--)o(e[n],t)},_condense:function(t){for(var e,i=t.length-1;0<=i;i--)0===t[i].children.length?0<i?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():s(t[i],this.toBBox)}},t.exports=r},function(t,e){t.exports=function(t,e){return!(e.right<=t.left||e.bottom<=t.top||e.position.x>=t.right||e.position.y>=t.bottom)}},function(t,e,i){var n=i(55),r=i(0),s=i(50),a=i(48),o=i(3),h=new r({initialize:function(t,e){var i=e.displayWidth?e.displayWidth:64,n=e.displayHeight?e.displayHeight:64;this.world=t,this.gameObject=e,this.debugShowBody=t.defaults.debugShowStaticBody,this.debugBodyColor=t.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new o,this.position=new o(e.x-i*e.originX,e.y-n*e.originY),this.width=i,this.height=n,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new o(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=o.ZERO,this.allowGravity=!1,this.gravity=o.ZERO,this.bounce=o.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=s.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(t,e){return t&&t!==this.gameObject&&(this.gameObject.body=null,(t.body=this).gameObject=t),e&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var t=this.gameObject;return t.getTopLeft(this.position),this.width=t.displayWidth,this.height=t.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(t,e){return void 0===e&&(e=t),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(t,e),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(t,e,i){void 0===i&&(i=!0);var n,r,s=this.gameObject;return!t&&s.frame&&(t=s.frame.realWidth),!e&&s.frame&&(e=s.frame.realHeight),this.world.staticTree.remove(this),this.width=t,this.height=e,this.halfWidth=Math.floor(t/2),this.halfHeight=Math.floor(e/2),i&&s.getCenter&&(n=s.displayWidth/2,r=s.displayHeight/2,this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(n-this.halfWidth,r-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y),this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(t,e,i){return void 0===e&&(e=this.offset.x),void 0===i&&(i=this.offset.y),0<t?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=t,this.width=2*t,this.height=2*t,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(e,i),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(t,e){var i=this.gameObject;void 0===t&&(t=i.x),void 0===e&&(e=i.y),this.world.staticTree.remove(this),i.setPosition(t,e),i.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function(t,e){return(this.isCircle?n:a)(this,t,e)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(t){var e=this.position,i=e.x+this.halfWidth,n=e.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(t.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?t.strokeCircle(i,n,this.width/2):t.strokeRect(e.x,e.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(t){return t<=0&&(t=.1),this.mass=t,this},x:{get:function(){return this.position.x},set:function(t){this.world.staticTree.remove(this),this.position.x=t,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(t){this.world.staticTree.remove(this),this.position.y=t,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});t.exports=h},,function(t,e,i){var n=new(i(0))({initialize:function(t){this.pluginManager=t,this.game=t.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=n},function(t,e,i){var n=i(24);t.exports=function(t,e,i,r,s,a,o){for(var h=n(i,r,s,a,null,o),l=0;l<h.length;l++)h[l]&&h[l].index===t&&(h[l].index=e)}},function(t,e,i){var n=i(101);t.exports=function(t,e,i){if(n(t,e,i)){var r=i.data[e][t];return null!==r&&-1<r.index}return!1}},function(t,e,i){var n=i(74),r=i(101),s=i(220);t.exports=function(t,e,i,a,o){if(void 0===i&&(i=!1),void 0===a&&(a=!0),!r(t,e,o))return null;var h=o.data[e][t];return h?(o.data[e][t]=i?null:new n(o,-1,t,e,h.width,h.height),a&&h&&h.collides&&s(t,e,o),h):null}},function(t,e,i){var n=i(32),r=i(223),s=i(479),a=i(480),o=i(491);t.exports=function(t,e,i,h,l,u){var c;switch(e){case n.ARRAY_2D:c=r(t,i,h,l,u);break;case n.CSV:c=s(t,i,h,l,u);break;case n.TILED_JSON:c=a(t,i,u);break;case n.WELTMEISTER:c=o(t,i,u);break;default:console.warn("Unrecognized tilemap data format: "+e),c=null}return c}},function(t,e,i){var n=i(32),r=i(223);t.exports=function(t,e,i,s,a){var o=e.trim().split("\n").map((function(t){return t.split(",")})),h=r(t,o,i,s,a);return h.format=n.CSV,h}},function(t,e,i){var n=i(32),r=i(103),s=i(481),a=i(483),o=i(484),h=i(487),l=i(489),u=i(490);t.exports=function(t,e,i){if("orthogonal"!==e.orientation)return console.warn("Only orthogonal map types are supported in this version of Phaser"),null;var c=new r({width:e.width,height:e.height,name:t,tileWidth:e.tilewidth,tileHeight:e.tileheight,orientation:e.orientation,format:n.TILED_JSON,version:e.version,properties:e.properties,renderOrder:e.renderorder,infinite:e.infinite});c.layers=s(e,i),c.images=a(e);var d=o(e);return c.tilesets=d.tilesets,c.imageCollections=d.imageCollections,c.objects=h(e),c.tiles=l(c),u(c),c}},function(t,e,i){var n=i(482),r=i(2),s=i(102),a=i(224),o=i(74),h=i(225);t.exports=function(t,e){for(var i=r(t,"infinite",!1),l=[],u=[],c=h(t);c.i<c.layers.length||0<u.length;)if(c.i>=c.layers.length){if(u.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}c=u.pop()}else{var d,f=c.layers[c.i];if(c.i++,"tilelayer"===f.type)if(f.compression)console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+f.name+"'");else{if(f.encoding&&"base64"===f.encoding){if(f.chunks)for(var p=0;p<f.chunks.length;p++)f.chunks[p].data=n(f.chunks[p].data);f.data&&(f.data=n(f.data)),delete f.encoding}var g,m,y=[],v=0;if(i){for(var _=r(f,"startx",0)+f.x,x=r(f,"starty",0)+f.y,w=new s({name:c.name+f.name,x:c.x+r(f,"offsetx",0)+_*t.tilewidth,y:c.y+r(f,"offsety",0)+x*t.tileheight,width:f.width,height:f.height,tileWidth:t.tilewidth,tileHeight:t.tileheight,alpha:c.opacity*f.opacity,visible:c.visible&&f.visible,properties:r(f,"properties",[])}),b=0;b<f.height;b++){y.push([null]);for(var T=0;T<f.width;T++)y[b][T]=null}for(b=0,D=f.chunks.length;b<D;b++)for(var E=f.chunks[b],A=E.x-_,S=E.y-x,C=0,O=0,P=E.data.length;O<P;O++){var R,M=v+A,L=C+S;0<(R=a(E.data[O])).gid?((g=new o(w,R.gid,M,L,t.tilewidth,t.tileheight)).rotation=R.rotation,g.flipX=R.flipped,y[L][M]=g):(m=e?null:new o(w,-1,M,L,t.tilewidth,t.tileheight),y[L][M]=m),++v===E.width&&(C++,v=0)}}else{w=new s({name:c.name+f.name,x:c.x+r(f,"offsetx",0)+f.x,y:c.y+r(f,"offsety",0)+f.y,width:f.width,height:f.height,tileWidth:t.tilewidth,tileHeight:t.tileheight,alpha:c.opacity*f.opacity,visible:c.visible&&f.visible,properties:r(f,"properties",[])});for(var I=[],k=0,D=f.data.length;k<D;k++)0<(R=a(f.data[k])).gid?((g=new o(w,R.gid,v,y.length,t.tilewidth,t.tileheight)).rotation=R.rotation,g.flipX=R.flipped,I.push(g)):(m=e?null:new o(w,-1,v,y.length,t.tilewidth,t.tileheight),I.push(m)),++v===f.width&&(y.push(I),v=0,I=[])}w.data=y,l.push(w)}else"group"===f.type&&(d=h(t,f,c),u.push(c),c=d)}return l}},function(t,e){t.exports=function(t){for(var e=window.atob(t),i=e.length,n=new Array(i/4),r=0;r<i;r+=4)n[r/4]=(e.charCodeAt(r)|e.charCodeAt(r+1)<<8|e.charCodeAt(r+2)<<16|e.charCodeAt(r+3)<<24)>>>0;return n}},function(t,e,i){var n=i(2),r=i(225);t.exports=function(t){for(var e=[],i=[],s=r(t);s.i<s.layers.length||0<i.length;)if(s.i>=s.layers.length){if(i.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}s=i.pop()}else{var a,o,h,l=s.layers[s.i];s.i++,"imagelayer"===l.type?(a=n(l,"offsetx",0)+n(l,"startx",0),o=n(l,"offsety",0)+n(l,"starty",0),e.push({name:s.name+l.name,image:l.image,x:s.x+a+l.x,y:s.y+o+l.y,alpha:s.opacity*l.opacity,visible:s.visible&&l.visible,properties:n(l,"properties",{})})):"group"===l.type&&(h=r(t,l,s),i.push(s),s=h)}return e}},function(t,e,i){var n=i(104),r=i(485),s=i(226);t.exports=function(t){for(var e,i=[],a=[],o=null,h=0;h<t.tilesets.length;h++){var l=t.tilesets[h];if(l.source)console.warn("Phaser can't load external tilesets. Use the Embed Tileset button and then export the map again.");else if(l.image){var u=new n(l.name,l.firstgid,l.tilewidth,l.tileheight,l.margin,l.spacing);if(1<t.version){if(Array.isArray(l.tiles)){for(var c={},d={},f=0;f<l.tiles.length;f++){var p,g,m=l.tiles[f];m.properties&&(p={},m.properties.forEach((function(t){p[t.name]=t.value})),d[m.id]=p),m.objectgroup&&(c[m.id]={objectgroup:m.objectgroup},m.objectgroup.objects&&(g=m.objectgroup.objects.map((function(t){return s(t)})),c[m.id].objectgroup.objects=g)),m.animation&&(c.hasOwnProperty(m.id)?c[m.id].animation=m.animation:c[m.id]={animation:m.animation})}u.tileData=c,u.tileProperties=d}}else if(l.tileproperties&&(u.tileProperties=l.tileproperties),l.tiles)for(e in u.tileData=l.tiles,u.tileData){var y,v=u.tileData[e].objectgroup;v&&v.objects&&(y=v.objects.map((function(t){return s(t)})),u.tileData[e].objectgroup.objects=y)}u.updateTileData(l.imagewidth,l.imageheight),i.push(u)}else{var _=new r(l.name,l.firstgid,l.tilewidth,l.tileheight,l.margin,l.spacing,l.properties);for(e in l.tiles){var x=l.tiles[e].image,w=l.firstgid+parseInt(e,10);_.addImage(w,x)}a.push(_)}o&&(o.lastgid=l.firstgid-1),o=l}return{tilesets:i,imageCollections:a}}},function(t,e,i){var n=new(i(0))({initialize:function(t,e,i,n,r,s,a){(void 0===i||i<=0)&&(i=32),(void 0===n||n<=0)&&(n=32),void 0===r&&(r=0),void 0===s&&(s=0),this.name=t,this.firstgid=0|e,this.imageWidth=0|i,this.imageHeight=0|n,this.imageMargin=0|r,this.imageSpacing=0|s,this.properties=a||{},this.images=[],this.total=0},containsImageIndex:function(t){return t>=this.firstgid&&t<this.firstgid+this.total},addImage:function(t,e){return this.images.push({gid:t,image:e}),this.total++,this}});t.exports=n},function(t,e,i){var n=i(108);t.exports=function(t,e){for(var i={},r=0;r<e.length;r++){var s=e[r];n(t,s)&&(i[s]=t[s])}return i}},function(t,e,i){var n=i(2),r=i(226),s=i(488),a=i(225);t.exports=function(t){for(var e=[],i=[],o=a(t);o.i<o.layers.length||0<i.length;)if(o.i>=o.layers.length){if(i.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}o=i.pop()}else{var h,l=o.layers[o.i];if(o.i++,l.opacity*=o.opacity,l.visible=o.visible&&l.visible,"objectgroup"===l.type){l.name=o.name+l.name;for(var u=o.x+n(l,"startx",0)+n(l,"offsetx",0),c=o.y+n(l,"starty",0)+n(l,"offsety",0),d=[],f=0;f<l.objects.length;f++){var p=r(l.objects[f],u,c);d.push(p)}var g=new s(l);g.objects=d,e.push(g)}else"group"===l.type&&(h=a(t,l,o),i.push(o),o=h)}return e}},function(t,e,i){var n=i(0),r=i(2),s=new n({initialize:function(t){void 0===t&&(t={}),this.name=r(t,"name","object layer"),this.opacity=r(t,"opacity",1),this.properties=r(t,"properties",{}),this.propertyTypes=r(t,"propertytypes",{}),this.type=r(t,"type","objectgroup"),this.visible=r(t,"visible",!0),this.objects=r(t,"objects",[])}});t.exports=s},function(t,e,i){var n=i(104);t.exports=function(t){for(var e=[],i=0;i<t.imageCollections.length;i++)for(var r=t.imageCollections[i],s=r.images,a=0;a<s.length;a++){var o,h=s[a];(o=new n(h.image,h.gid,r.imageWidth,r.imageHeight,0,0)).updateTileData(r.imageWidth,r.imageHeight),t.tilesets.push(o)}for(i=0;i<t.tilesets.length;i++)for(var l=(o=t.tilesets[i]).tileMargin,u=o.tileMargin,c=0,d=0,f=0,p=o.firstgid;p<o.firstgid+o.total&&(e[p]=[l,u,i],l+=o.tileWidth+o.tileSpacing,++c!==o.total)&&(++d!==o.columns||(l=o.tileMargin,u+=o.tileHeight+o.tileSpacing,d=0,++f!==o.rows));p++);return e}},function(t,e,i){var n=i(18);t.exports=function(t){for(var e,i,r,s,a,o=0;o<t.layers.length;o++){e=t.layers[o];for(var h=0;h<e.data.length;h++){a=e.data[h];for(var l=0;l<a.length;l++)null===(i=a[l])||i.index<0||(r=t.tiles[i.index][2],s=t.tilesets[r],i.width=s.tileWidth,i.height=s.tileHeight,s.tileProperties&&s.tileProperties[i.index-s.firstgid]&&(i.properties=n(i.properties,s.tileProperties[i.index-s.firstgid])))}}}},function(t,e,i){var n=i(32),r=i(103),s=i(492),a=i(493);t.exports=function(t,e,i){if(0===e.layer.length)return console.warn("No layers found in the Weltmeister map: "+t),null;for(var o=0,h=0,l=0;l<e.layer.length;l++)e.layer[l].width>o&&(o=e.layer[l].width),e.layer[l].height>h&&(h=e.layer[l].height);var u=new r({width:o,height:h,name:t,tileWidth:e.layer[0].tilesize,tileHeight:e.layer[0].tilesize,format:n.WELTMEISTER});return u.layers=s(e,i),u.tilesets=a(e),u}},function(t,e,i){var n=i(102),r=i(74);t.exports=function(t,e){for(var i=[],s=0;s<t.layer.length;s++){for(var a=t.layer[s],o=new n({name:a.name,width:a.width,height:a.height,tileWidth:a.tilesize,tileHeight:a.tilesize,visible:1===a.visible}),h=[],l=[],u=0;u<a.data.length;u++){for(var c=0;c<a.data[u].length;c++){var d=a.data[u][c]-1,f=-1<d?new r(o,d,c,u,a.tilesize,a.tilesize):e?null:new r(o,-1,c,u,a.tilesize,a.tilesize);h.push(f)}l.push(h),h=[]}o.data=l,i.push(o)}return i}},function(t,e,i){var n=i(104);t.exports=function(t){for(var e=[],i=[],r=0;r<t.layer.length;r++){var s=t.layer[r],a=s.tilesetName;""!==a&&-1===i.indexOf(a)&&(i.push(a),e.push(new n(a,0,s.tilesize,s.tilesize,0,0)))}return e}},function(t,e,i){var n=i(0),r=i(39),s=i(495),a=i(18),o=i(32),h=i(102),l=i(331),u=i(80),c=i(496),d=i(74),f=i(141),p=i(104),g=new n({initialize:function(t,e){this.scene=t,this.tileWidth=e.tileWidth,this.tileHeight=e.tileHeight,this.width=e.width,this.height=e.height,this.orientation=e.orientation,this.renderOrder=e.renderOrder,this.format=e.format,this.version=e.version,this.properties=e.properties,this.widthInPixels=e.widthInPixels,this.heightInPixels=e.heightInPixels,this.imageCollections=e.imageCollections,this.images=e.images,this.layers=e.layers,this.tilesets=e.tilesets,this.objects=e.objects,this.currentLayerIndex=0},setRenderOrder:function(t){var e=["right-down","left-down","right-up","left-up"];return"number"==typeof t&&(t=e[t]),-1<e.indexOf(t)&&(this.renderOrder=t),this},addTilesetImage:function(t,e,i,n,r,s,a){if(void 0===t)return null;if(null==e&&(e=t),!this.scene.sys.textures.exists(e))return console.warn("Invalid Tileset Image: "+e),null;var h=this.scene.sys.textures.get(e),l=this.getTilesetIndex(t);if(null===l&&this.format===o.TILED_JSON)return console.warn("No data found for Tileset: "+t),null;var u=this.tilesets[l];return u?(u.setTileSize(i,n),u.setSpacing(r,s),u.setImage(h)):(void 0===i&&(i=this.tileWidth),void 0===n&&(n=this.tileHeight),void 0===r&&(r=0),void 0===s&&(s=0),void 0===a&&(a=0),(u=new p(t,a,i,n,r,s)).setImage(h),this.tilesets.push(u)),u},convertLayerToStatic:function(t){if(null===(t=this.getLayer(t)))return null;var e=t.tilemapLayer;if(!(e&&e instanceof s))return null;var i=new c(e.scene,e.tilemap,e.layerIndex,e.tileset,e.x,e.y);return this.scene.sys.displayList.add(i),e.destroy(),i},copy:function(t,e,i,n,r,s,a,o){return o=this.getLayer(o),this._isStaticCall(o,"copy")?this:null!==o?(f.Copy(t,e,i,n,r,s,a,o),this):null},createBlankDynamicLayer:function(t,e,i,n,r,a,o,l){if(void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=this.width),void 0===a&&(a=this.height),void 0===o&&(o=this.tileWidth),void 0===l&&(l=this.tileHeight),null!==this.getLayerIndex(t))return console.warn("Invalid Tilemap Layer ID: "+t),null;for(var u,c=new h({name:t,tileWidth:o,tileHeight:l,width:r,height:a}),f=0;f<a;f++){u=[];for(var p=0;p<r;p++)u.push(new d(c,-1,p,f,o,l,this.tileWidth,this.tileHeight));c.data.push(u)}this.layers.push(c),this.currentLayerIndex=this.layers.length-1;var g=new s(this.scene,this,this.currentLayerIndex,e,i,n);return g.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(g),g},createDynamicLayer:function(t,e,i,n){var r=this.getLayerIndex(t);if(null===r)return console.warn("Invalid Tilemap Layer ID: "+t),"string"==typeof t&&console.warn("Valid tilelayer names:\n\t"+this.getTileLayerNames().join(",\n\t")),null;var a=this.layers[r];if(a.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+t),null;this.currentLayerIndex=r,void 0===i&&(i=a.x),void 0===n&&(n=a.y);var o=new s(this.scene,this,r,e,i,n);return o.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(o),o},createFromObjects:function(t,e,i,n){void 0===i&&(i={}),void 0===n&&(n=this.scene);var s=this.getObjectLayer(t);if(!s)return console.warn("Cannot create from object. Invalid objectgroup name given: "+t),"string"==typeof layerID&&console.warn("Valid objectgroup names:\n\t"+this.getObjectLayerNames().join(",\n\t")),null;for(var o=s.objects,h=[],u=0;u<o.length;u++){var c=!1,d=o[u];if((void 0!==d.gid&&"number"==typeof e&&d.gid===e||void 0!==d.id&&"number"==typeof e&&d.id===e||void 0!==d.name&&"string"==typeof e&&d.name===e)&&(c=!0),c){var f=a({},i,d.properties);f.x=d.x,f.y=d.y;var p=n.make.sprite(f);p.name=d.name,d.width&&(p.displayWidth=d.width),d.height&&(p.displayHeight=d.height);var g,m={x:p.originX*d.width,y:(p.originY-1)*d.height};for(var y in d.rotation&&(g=r(d.rotation),l(m,g),p.rotation=g),p.x+=m.x,p.y+=m.y,void 0===d.flippedHorizontal&&void 0===d.flippedVertical||p.setFlip(d.flippedHorizontal,d.flippedVertical),d.visible||(p.visible=!1),d.properties)p.hasOwnProperty(y)||p.setData(y,d.properties[y]);h.push(p)}}return h},createFromTiles:function(t,e,i,n,r,s){return null===(s=this.getLayer(s))?null:f.CreateFromTiles(t,e,i,n,r,s)},createStaticLayer:function(t,e,i,n){var r=this.getLayerIndex(t);if(null===r)return console.warn("Invalid Tilemap Layer ID: "+t),"string"==typeof t&&console.warn("Valid tilelayer names:\n\t"+this.getTileLayerNames().join(",\n\t")),null;if(this.layers[r].tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+t),null;this.currentLayerIndex=r,void 0===i&&this.layers[r].x&&(i=this.layers[r].x),void 0===n&&this.layers[r].y&&(n=this.layers[r].y);var s=new c(this.scene,this,r,e,i,n);return s.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(s),s},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=void 0},fill:function(t,e,i,n,r,s,a){return null===(a=this.getLayer(a))?null:(this._isStaticCall(a,"fill")||f.Fill(t,e,i,n,r,s,a),this)},filterObjects:function(t,e,i){if("string"==typeof t){var n=t;if(!(t=this.getObjectLayer(t)))return console.warn("No object layer found with the name: "+n),null}return t.objects.filter(e,i)},filterTiles:function(t,e,i,n,r,s,a,o){return null===(o=this.getLayer(o))?null:f.FilterTiles(t,e,i,n,r,s,a,o)},findByIndex:function(t,e,i,n){return null===(n=this.getLayer(n))?null:f.FindByIndex(t,e,i,n)},findObject:function(t,e,i){if("string"==typeof t){var n=t;if(!(t=this.getObjectLayer(t)))return console.warn("No object layer found with the name: "+n),null}return t.objects.find(e,i)||null},findTile:function(t,e,i,n,r,s,a,o){return null===(o=this.getLayer(o))?null:f.FindTile(t,e,i,n,r,s,a,o)},forEachTile:function(t,e,i,n,r,s,a,o){return null===(o=this.getLayer(o))?null:(f.ForEachTile(t,e,i,n,r,s,a,o),this)},getImageIndex:function(t){return this.getIndex(this.images,t)},getImageLayerNames:function(){return this.images&&Array.isArray(this.images)?this.images.map((function(t){return t.name})):[]},getIndex:function(t,e){for(var i=0;i<t.length;i++)if(t[i].name===e)return i;return null},getLayer:function(t){var e=this.getLayerIndex(t);return null!==e?this.layers[e]:null},getObjectLayer:function(t){var e=this.getIndex(this.objects,t);return null!==e?this.objects[e]:null},getObjectLayerNames:function(){return this.objects&&Array.isArray(this.objects)?this.objects.map((function(t){return t.name})):[]},getLayerIndex:function(t){return void 0===t?this.currentLayerIndex:"string"==typeof t?this.getLayerIndexByName(t):"number"==typeof t&&t<this.layers.length?t:t instanceof c||t instanceof s?t.layerIndex:null},getLayerIndexByName:function(t){return this.getIndex(this.layers,t)},getTileAt:function(t,e,i,n){return null===(n=this.getLayer(n))?null:f.GetTileAt(t,e,i,n)},getTileAtWorldXY:function(t,e,i,n,r){return null===(r=this.getLayer(r))?null:f.GetTileAtWorldXY(t,e,i,n,r)},getTileLayerNames:function(){return this.layers&&Array.isArray(this.layers)?this.layers.map((function(t){return t.name})):[]},getTilesWithin:function(t,e,i,n,r,s){return null===(s=this.getLayer(s))?null:f.GetTilesWithin(t,e,i,n,r,s)},getTilesWithinShape:function(t,e,i,n){return null===(n=this.getLayer(n))?null:f.GetTilesWithinShape(t,e,i,n)},getTilesWithinWorldXY:function(t,e,i,n,r,s,a){return null===(a=this.getLayer(a))?null:f.GetTilesWithinWorldXY(t,e,i,n,r,s,a)},getTileset:function(t){var e=this.getIndex(this.tilesets,t);return null!==e?this.tilesets[e]:null},getTilesetIndex:function(t){return this.getIndex(this.tilesets,t)},hasTileAt:function(t,e,i){return null===(i=this.getLayer(i))?null:f.HasTileAt(t,e,i)},hasTileAtWorldXY:function(t,e,i,n){return null===(n=this.getLayer(n))?null:f.HasTileAtWorldXY(t,e,i,n)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(t){this.setLayer(t)}},putTileAt:function(t,e,i,n,r){return r=this.getLayer(r),this._isStaticCall(r,"putTileAt")||null===r?null:f.PutTileAt(t,e,i,n,r)},putTileAtWorldXY:function(t,e,i,n,r,s){return s=this.getLayer(s),this._isStaticCall(s,"putTileAtWorldXY")||null===s?null:f.PutTileAtWorldXY(t,e,i,n,r,s)},putTilesAt:function(t,e,i,n,r){return r=this.getLayer(r),this._isStaticCall(r,"putTilesAt")?this:null===r?null:(f.PutTilesAt(t,e,i,n,r),this)},randomize:function(t,e,i,n,r,s){return s=this.getLayer(s),this._isStaticCall(s,"randomize")?this:null===s?null:(f.Randomize(t,e,i,n,r,s),this)},calculateFacesAt:function(t,e,i){return null===(i=this.getLayer(i))?null:(f.CalculateFacesAt(t,e,i),this)},calculateFacesWithin:function(t,e,i,n,r){return null===(r=this.getLayer(r))?null:(f.CalculateFacesWithin(t,e,i,n,r),this)},removeLayer:function(t){var e=this.getLayerIndex(t);if(null===e)return null;u(this.layers,e);for(var i=e;i<this.layers.length;i++)this.layers[i].tilemapLayer&&this.layers[i].tilemapLayer.layerIndex--;return this.currentLayerIndex===e&&(this.currentLayerIndex=0),this},destroyLayer:function(t){var e=this.getLayerIndex(t);return null!==e?((t=this.layers[e]).destroy(),u(this.layers,e),this.currentLayerIndex===e&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var t=this.layers,e=0;e<t.length;e++)t[e].tilemapLayer&&t[e].tilemapLayer.destroy(!1);return t.length=0,this.currentLayerIndex=0,this},removeTile:function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=!0);var n=[];Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var s=t[r];n.push(this.removeTileAt(s.x,s.y,!0,i,s.tilemapLayer)),-1<e&&this.putTileAt(e,s.x,s.y,i,s.tilemapLayer)}return n},removeTileAt:function(t,e,i,n,r){return r=this.getLayer(r),this._isStaticCall(r,"removeTileAt")||null===r?null:f.RemoveTileAt(t,e,i,n,r)},removeTileAtWorldXY:function(t,e,i,n,r,s){return s=this.getLayer(s),this._isStaticCall(s,"removeTileAtWorldXY")||null===s?null:f.RemoveTileAtWorldXY(t,e,i,n,r,s)},renderDebug:function(t,e,i){return null===(i=this.getLayer(i))?null:(f.RenderDebug(t,e,i),this)},renderDebugFull:function(t,e){for(var i=this.layers,n=0;n<i.length;n++)f.RenderDebug(t,e,i[n]);return this},replaceByIndex:function(t,e,i,n,r,s,a){return a=this.getLayer(a),this._isStaticCall(a,"replaceByIndex")?this:null===a?null:(f.ReplaceByIndex(t,e,i,n,r,s,a),this)},setCollision:function(t,e,i,n,r){return null===(n=this.getLayer(n))?null:(f.SetCollision(t,e,i,n,r),this)},setCollisionBetween:function(t,e,i,n,r){return null===(r=this.getLayer(r))?null:(f.SetCollisionBetween(t,e,i,n,r),this)},setCollisionByProperty:function(t,e,i,n){return null===(n=this.getLayer(n))?null:(f.SetCollisionByProperty(t,e,i,n),this)},setCollisionByExclusion:function(t,e,i,n){return null===(n=this.getLayer(n))?null:(f.SetCollisionByExclusion(t,e,i,n),this)},setCollisionFromCollisionGroup:function(t,e,i){return null===(i=this.getLayer(i))?null:(f.SetCollisionFromCollisionGroup(t,e,i),this)},setTileIndexCallback:function(t,e,i,n){return null===(n=this.getLayer(n))?null:(f.SetTileIndexCallback(t,e,i,n),this)},setTileLocationCallback:function(t,e,i,n,r,s,a){return null===(a=this.getLayer(a))?null:(f.SetTileLocationCallback(t,e,i,n,r,s,a),this)},setLayer:function(t){var e=this.getLayerIndex(t);return null!==e&&(this.currentLayerIndex=e),this},setBaseTileSize:function(t,e){this.tileWidth=t,this.tileHeight=e,this.widthInPixels=this.width*t,this.heightInPixels=this.height*e;for(var i=0;i<this.layers.length;i++){this.layers[i].baseTileWidth=t,this.layers[i].baseTileHeight=e;for(var n=this.layers[i].data,r=this.layers[i].width,s=this.layers[i].height,a=0;a<s;a++)for(var o=0;o<r;o++){var h=n[a][o];null!==h&&h.setSize(void 0,void 0,t,e)}}return this},setLayerTileSize:function(t,e,i){if(null===(i=this.getLayer(i)))return this;i.tileWidth=t,i.tileHeight=e;for(var n=i.data,r=i.width,s=i.height,a=0;a<s;a++)for(var o=0;o<r;o++){var h=n[a][o];null!==h&&h.setSize(t,e)}return this},shuffle:function(t,e,i,n,r){return r=this.getLayer(r),this._isStaticCall(r,"shuffle")?this:null===r?null:(f.Shuffle(t,e,i,n,r),this)},swapByIndex:function(t,e,i,n,r,s,a){return a=this.getLayer(a),this._isStaticCall(a,"swapByIndex")?this:null===a?null:(f.SwapByIndex(t,e,i,n,r,s,a),this)},tileToWorldX:function(t,e,i){return null===(i=this.getLayer(i))?null:f.TileToWorldX(t,e,i)},tileToWorldY:function(t,e,i){return null===(i=this.getLayer(i))?null:f.TileToWorldY(t,e,i)},tileToWorldXY:function(t,e,i,n,r){return null===(r=this.getLayer(r))?null:f.TileToWorldXY(t,e,i,n,r)},weightedRandomize:function(t,e,i,n,r,s){return s=this.getLayer(s),this._isStaticCall(s,"weightedRandomize")?this:null===s?null:(f.WeightedRandomize(t,e,i,n,r,s),this)},worldToTileX:function(t,e,i,n){return null===(n=this.getLayer(n))?null:f.WorldToTileX(t,e,i,n)},worldToTileY:function(t,e,i,n){return null===(n=this.getLayer(n))?null:f.WorldToTileY(t,e,i,n)},worldToTileXY:function(t,e,i,n,r,s){return null===(s=this.getLayer(s))?null:f.WorldToTileXY(t,e,i,n,r,s)},_isStaticCall:function(t,e){return t.tilemapLayer instanceof c&&(console.warn(e+": You cannot change the tiles in a static tilemap layer"),!0)}});t.exports=g},function(t,e,i){var n=i(0),r=i(12),s=i(1345),a=i(14),o=i(141),h=new n({Extends:a,Mixins:[r.Alpha,r.BlendMode,r.ComputedSize,r.Depth,r.Flip,r.GetBounds,r.Origin,r.Pipeline,r.Transform,r.Visible,r.ScrollFactor,s],initialize:function(t,e,i,n,r,s){a.call(this,t,"DynamicTilemapLayer"),this.isTilemap=!0,this.tilemap=e,this.layerIndex=i,this.layer=e.layers[i],(this.layer.tilemapLayer=this).tileset=[],this.culledTiles=[],this.skipCull=!1,this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=o.CullTiles,this._renderOrder=0,this.gidMap=[],this.setTilesets(n),this.setAlpha(this.layer.alpha),this.setPosition(r,s),this.setOrigin(),this.setSize(e.tileWidth*this.layer.width,e.tileHeight*this.layer.height),this.initPipeline("TextureTintPipeline")},setTilesets:function(t){var e=[],i=[],n=this.tilemap;Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var s=t[r];if("string"==typeof s&&(s=n.getTileset(s)),s){i.push(s);for(var a=s.firstgid,o=0;o<s.total;o++)e[a+o]=s}}this.gidMap=e,this.tileset=i},setRenderOrder:function(t){return"string"==typeof t&&(t=["right-down","left-down","right-up","left-up"].indexOf(t)),0<=t&&t<4&&(this._renderOrder=t),this},calculateFacesAt:function(t,e){return o.CalculateFacesAt(t,e,this.layer),this},calculateFacesWithin:function(t,e,i,n){return o.CalculateFacesWithin(t,e,i,n,this.layer),this},createFromTiles:function(t,e,i,n,r){return o.CreateFromTiles(t,e,i,n,r,this.layer)},cull:function(t){return this.cullCallback(this.layer,t,this.culledTiles,this._renderOrder)},copy:function(t,e,i,n,r,s,a){return o.Copy(t,e,i,n,r,s,a,this.layer),this},destroy:function(t){void 0===t&&(t=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),t&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],a.prototype.destroy.call(this))},fill:function(t,e,i,n,r,s){return o.Fill(t,e,i,n,r,s,this.layer),this},filterTiles:function(t,e,i,n,r,s,a){return o.FilterTiles(t,e,i,n,r,s,a,this.layer)},findByIndex:function(t,e,i){return o.FindByIndex(t,e,i,this.layer)},findTile:function(t,e,i,n,r,s,a){return o.FindTile(t,e,i,n,r,s,a,this.layer)},forEachTile:function(t,e,i,n,r,s,a){return o.ForEachTile(t,e,i,n,r,s,a,this.layer),this},getTileAt:function(t,e,i){return o.GetTileAt(t,e,i,this.layer)},getTileAtWorldXY:function(t,e,i,n){return o.GetTileAtWorldXY(t,e,i,n,this.layer)},getTilesWithin:function(t,e,i,n,r){return o.GetTilesWithin(t,e,i,n,r,this.layer)},getTilesWithinShape:function(t,e,i){return o.GetTilesWithinShape(t,e,i,this.layer)},getTilesWithinWorldXY:function(t,e,i,n,r,s){return o.GetTilesWithinWorldXY(t,e,i,n,r,s,this.layer)},hasTileAt:function(t,e){return o.HasTileAt(t,e,this.layer)},hasTileAtWorldXY:function(t,e,i){return o.HasTileAtWorldXY(t,e,i,this.layer)},putTileAt:function(t,e,i,n){return o.PutTileAt(t,e,i,n,this.layer)},putTileAtWorldXY:function(t,e,i,n,r){return o.PutTileAtWorldXY(t,e,i,n,r,this.layer)},putTilesAt:function(t,e,i,n){return o.PutTilesAt(t,e,i,n,this.layer),this},randomize:function(t,e,i,n,r){return o.Randomize(t,e,i,n,r,this.layer),this},removeTileAt:function(t,e,i,n){return o.RemoveTileAt(t,e,i,n,this.layer)},removeTileAtWorldXY:function(t,e,i,n,r){return o.RemoveTileAtWorldXY(t,e,i,n,r,this.layer)},renderDebug:function(t,e){return o.RenderDebug(t,e,this.layer),this},replaceByIndex:function(t,e,i,n,r,s){return o.ReplaceByIndex(t,e,i,n,r,s,this.layer),this},setSkipCull:function(t){return void 0===t&&(t=!0),this.skipCull=t,this},setCullPadding:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=1),this.cullPaddingX=t,this.cullPaddingY=e,this},setCollision:function(t,e,i,n){return o.SetCollision(t,e,i,this.layer,n),this},setCollisionBetween:function(t,e,i,n){return o.SetCollisionBetween(t,e,i,n,this.layer),this},setCollisionByProperty:function(t,e,i){return o.SetCollisionByProperty(t,e,i,this.layer),this},setCollisionByExclusion:function(t,e,i){return o.SetCollisionByExclusion(t,e,i,this.layer),this},setCollisionFromCollisionGroup:function(t,e){return o.SetCollisionFromCollisionGroup(t,e,this.layer),this},setTileIndexCallback:function(t,e,i){return o.SetTileIndexCallback(t,e,i,this.layer),this},setTileLocationCallback:function(t,e,i,n,r,s){return o.SetTileLocationCallback(t,e,i,n,r,s,this.layer),this},shuffle:function(t,e,i,n){return o.Shuffle(t,e,i,n,this.layer),this},swapByIndex:function(t,e,i,n,r,s){return o.SwapByIndex(t,e,i,n,r,s,this.layer),this},tileToWorldX:function(t,e){return o.TileToWorldX(t,e,this.layer)},tileToWorldY:function(t,e){return o.TileToWorldY(t,e,this.layer)},tileToWorldXY:function(t,e,i,n){return o.TileToWorldXY(t,e,i,n,this.layer)},weightedRandomize:function(t,e,i,n,r){return o.WeightedRandomize(t,e,i,n,r,this.layer),this},worldToTileX:function(t,e,i){return o.WorldToTileX(t,e,i,this.layer)},worldToTileY:function(t,e,i){return o.WorldToTileY(t,e,i,this.layer)},worldToTileXY:function(t,e,i,n,r){return o.WorldToTileXY(t,e,i,n,r,this.layer)}});t.exports=h},function(t,e,i){var n=i(0),r=i(12),s=i(20),a=i(14),o=i(1348),h=i(141),l=i(29),u=i(9),c=new n({Extends:a,Mixins:[r.Alpha,r.BlendMode,r.ComputedSize,r.Depth,r.Flip,r.GetBounds,r.Origin,r.Pipeline,r.Transform,r.Visible,r.ScrollFactor,o],initialize:function(t,e,i,n,r,o){a.call(this,t,"StaticTilemapLayer"),this.isTilemap=!0,this.tilemap=e,this.layerIndex=i,this.layer=e.layers[i],(this.layer.tilemapLayer=this).tileset=[],this.culledTiles=[],this.skipCull=!1,this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=h.CullTiles,this.renderer=t.sys.game.renderer,this.vertexBuffer=[],this.bufferData=[],this.vertexViewF32=[],this.vertexViewU32=[],this.dirty=[],this.vertexCount=[],this._renderOrder=0,this._tempMatrix=new l,this.gidMap=[],this.setTilesets(n),this.setAlpha(this.layer.alpha),this.setPosition(r,o),this.setOrigin(),this.setSize(e.tileWidth*this.layer.width,e.tileHeight*this.layer.height),this.updateVBOData(),this.initPipeline("TextureTintPipeline"),t.sys.game.events.on(s.CONTEXT_RESTORED,(function(){this.updateVBOData()}),this)},setTilesets:function(t){var e=[],i=[],n=this.tilemap;Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var s=t[r];if("string"==typeof s&&(s=n.getTileset(s)),s){i.push(s);for(var a=s.firstgid,o=0;o<s.total;o++)e[a+o]=s}}this.gidMap=e,this.tileset=i},updateVBOData:function(){for(var t=0;t<this.tileset.length;t++)this.dirty[t]=!0,this.vertexCount[t]=0,this.vertexBuffer[t]=null,this.bufferData[t]=null,this.vertexViewF32[t]=null,this.vertexViewU32[t]=null;return this},upload:function(t,e){var i=this.renderer,n=i.gl,r=i.pipelines.TextureTintPipeline;if(this.dirty[e]){var s,a,o,h=this.tileset[e],l=this.layer.width,u=this.layer.height,c=h.image.source[0].width,d=h.image.source[0].height,f=this.layer.data,p=this._renderOrder,g=h.firstgid,m=h.firstgid+h.total,y=this.vertexBuffer[e],v=this.bufferData[e],_=-1,x=l*u*r.vertexSize*6;if(this.vertexCount[e]=0,null===v&&(v=new ArrayBuffer(x),this.bufferData[e]=v,this.vertexViewF32[e]=new Float32Array(v),this.vertexViewU32[e]=new Uint32Array(v)),0===p)for(a=0;a<u;a++)for(o=0;o<l;o++)!(s=f[a][o])||s.index<g||s.index>m||!s.visible||(_=this.batchTile(_,s,h,c,d,t,e));else if(1===p)for(a=0;a<u;a++)for(o=l-1;0<=o;o--)!(s=f[a][o])||s.index<g||s.index>m||!s.visible||(_=this.batchTile(_,s,h,c,d,t,e));else if(2===p)for(a=u-1;0<=a;a--)for(o=0;o<l;o++)!(s=f[a][o])||s.index<g||s.index>m||!s.visible||(_=this.batchTile(_,s,h,c,d,t,e));else if(3===p)for(a=u-1;0<=a;a--)for(o=l-1;0<=o;o--)!(s=f[a][o])||s.index<g||s.index>m||!s.visible||(_=this.batchTile(_,s,h,c,d,t,e));this.dirty[e]=!1,null===y?(y=i.createVertexBuffer(v,n.STATIC_DRAW),this.vertexBuffer[e]=y):(i.setVertexBuffer(y),n.bufferSubData(n.ARRAY_BUFFER,0,v))}return this},batchTile:function(t,e,i,n,r,s,a){var o=i.getTileTextureCoordinates(e.index);if(!o)return t;var h=i.tileWidth,l=i.tileHeight,c=h/2,d=l/2,f=o.x/n,p=o.y/r,g=(o.x+h)/n,m=(o.y+l)/r,y=this._tempMatrix,v=-c,_=-d;e.flipX&&(h*=-1,v+=i.tileWidth),e.flipY&&(l*=-1,_+=i.tileHeight);var x=v+h,w=_+l;y.applyITRS(c+e.pixelX,d+e.pixelY,e.rotation,1,1);var b=u.getTintAppendFloatAlpha(16777215,s.alpha*this.alpha*e.alpha),T=y.getX(v,_),E=y.getY(v,_),A=y.getX(v,w),S=y.getY(v,w),C=y.getX(x,w),O=y.getY(x,w),P=y.getX(x,_),R=y.getY(x,_);s.roundPixels&&(T=Math.round(T),E=Math.round(E),A=Math.round(A),S=Math.round(S),C=Math.round(C),O=Math.round(O),P=Math.round(P),R=Math.round(R));var M=this.vertexViewF32[a],L=this.vertexViewU32[a];return M[++t]=T,M[++t]=E,M[++t]=f,M[++t]=p,M[++t]=0,L[++t]=b,M[++t]=A,M[++t]=S,M[++t]=f,M[++t]=m,M[++t]=0,L[++t]=b,M[++t]=C,M[++t]=O,M[++t]=g,M[++t]=m,M[++t]=0,L[++t]=b,M[++t]=T,M[++t]=E,M[++t]=f,M[++t]=p,M[++t]=0,L[++t]=b,M[++t]=C,M[++t]=O,M[++t]=g,M[++t]=m,M[++t]=0,L[++t]=b,M[++t]=P,M[++t]=R,M[++t]=g,M[++t]=p,M[++t]=0,L[++t]=b,this.vertexCount[a]+=6,t},setRenderOrder:function(t){if("string"==typeof t&&(t=["right-down","left-down","right-up","left-up"].indexOf(t)),0<=t&&t<4){this._renderOrder=t;for(var e=0;e<this.tileset.length;e++)this.dirty[e]=!0}return this},calculateFacesAt:function(t,e){return h.CalculateFacesAt(t,e,this.layer),this},calculateFacesWithin:function(t,e,i,n){return h.CalculateFacesWithin(t,e,i,n,this.layer),this},createFromTiles:function(t,e,i,n,r){return h.CreateFromTiles(t,e,i,n,r,this.layer)},cull:function(t){return this.cullCallback(this.layer,t,this.culledTiles)},setSkipCull:function(t){return void 0===t&&(t=!0),this.skipCull=t,this},setCullPadding:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=1),this.cullPaddingX=t,this.cullPaddingY=e,this},findByIndex:function(t,e,i){return h.FindByIndex(t,e,i,this.layer)},findTile:function(t,e,i,n,r,s,a){return h.FindTile(t,e,i,n,r,s,a,this.layer)},filterTiles:function(t,e,i,n,r,s,a){return h.FilterTiles(t,e,i,n,r,s,a,this.layer)},forEachTile:function(t,e,i,n,r,s,a){return h.ForEachTile(t,e,i,n,r,s,a,this.layer),this},getTileAt:function(t,e,i){return h.GetTileAt(t,e,i,this.layer)},getTileAtWorldXY:function(t,e,i,n){return h.GetTileAtWorldXY(t,e,i,n,this.layer)},getTilesWithin:function(t,e,i,n,r){return h.GetTilesWithin(t,e,i,n,r,this.layer)},getTilesWithinWorldXY:function(t,e,i,n,r,s){return h.GetTilesWithinWorldXY(t,e,i,n,r,s,this.layer)},getTilesWithinShape:function(t,e,i){return h.GetTilesWithinShape(t,e,i,this.layer)},hasTileAt:function(t,e){return h.HasTileAt(t,e,this.layer)},hasTileAtWorldXY:function(t,e,i){return h.HasTileAtWorldXY(t,e,i,this.layer)},renderDebug:function(t,e){return h.RenderDebug(t,e,this.layer),this},setCollision:function(t,e,i,n){return h.SetCollision(t,e,i,this.layer,n),this},setCollisionBetween:function(t,e,i,n){return h.SetCollisionBetween(t,e,i,n,this.layer),this},setCollisionByProperty:function(t,e,i){return h.SetCollisionByProperty(t,e,i,this.layer),this},setCollisionByExclusion:function(t,e,i){return h.SetCollisionByExclusion(t,e,i,this.layer),this},setTileIndexCallback:function(t,e,i){return h.SetTileIndexCallback(t,e,i,this.layer),this},setCollisionFromCollisionGroup:function(t,e){return h.SetCollisionFromCollisionGroup(t,e,this.layer),this},setTileLocationCallback:function(t,e,i,n,r,s){return h.SetTileLocationCallback(t,e,i,n,r,s,this.layer),this},tileToWorldX:function(t,e){return h.TileToWorldX(t,e,this.layer)},tileToWorldY:function(t,e){return h.TileToWorldY(t,e,this.layer)},tileToWorldXY:function(t,e,i,n){return h.TileToWorldXY(t,e,i,n,this.layer)},worldToTileX:function(t,e,i){return h.WorldToTileX(t,e,i,this.layer)},worldToTileY:function(t,e,i){return h.WorldToTileY(t,e,i,this.layer)},worldToTileXY:function(t,e,i,n,r){return h.WorldToTileXY(t,e,i,n,r,this.layer)},destroy:function(t){if(void 0===t&&(t=!0),this.tilemap){this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),t&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null;for(var e=0;e<this.tileset.length;e++)this.dirty[e]=!0,this.vertexCount[e]=0,this.vertexBuffer[e]=null,this.bufferData[e]=null,this.vertexViewF32[e]=null,this.vertexViewU32[e]=null;this.gidMap=[],this.tileset=[],a.prototype.destroy.call(this)}}});t.exports=c},function(t,e,i){var n=i(0),r=i(2),s=new n({initialize:function(t){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(t)},reset:function(t){return this.delay=r(t,"delay",0),this.repeat=r(t,"repeat",0),this.loop=r(t,"loop",!1),this.callback=r(t,"callback",void 0),this.callbackScope=r(t,"callbackScope",this.callback),this.args=r(t,"args",[]),this.timeScale=r(t,"timeScale",1),this.startAt=r(t,"startAt",0),this.paused=r(t,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=-1===this.repeat||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(0<this.repeat){var t=this.delay+this.delay*this.repeat;return(this.elapsed+this.delay*(this.repeat-this.repeatCount))/t}return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return.001*this.elapsed},remove:function(t){void 0===t&&(t=!1),this.elapsed=this.delay,this.hasDispatched=!t,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});t.exports=s},function(t,e,i){var n=i(1357);t.exports=function(t){var e,i=[];if(t.hasOwnProperty("props"))for(e in t.props)"_"!==e.substr(0,1)&&i.push({key:e,value:t.props[e]});else for(e in t)-1===n.indexOf(e)&&"_"!==e.substr(0,1)&&i.push({key:e,value:t[e]});return i}},function(t,e,i){var n=i(6);t.exports=function(t){var e=n(t,"tweens",null);return null===e?[]:("function"==typeof e&&(e=e.call()),Array.isArray(e)||(e=[e]),e)}},function(t,e,i){var n=i(230),r=i(15),s=i(88),a=i(69),o=i(145),h=i(6),l=i(229),u=i(231),c=i(233);t.exports=function(t,e,i){void 0===i&&(i=n);var d=h(e,"from",0),f=h(e,"to",1),p=[{value:d}],g=o(e,"delay",i.delay),m=o(e,"duration",i.duration),y=h(e,"easeParams",i.easeParams),v=a(h(e,"ease",i.ease),y),_=o(e,"hold",i.hold),x=o(e,"repeat",i.repeat),w=o(e,"repeatDelay",i.repeatDelay),b=s(e,"yoyo",i.yoyo),T=[],E=l("value",f),A=c(p[0],0,"value",E.getEnd,E.getStart,E.getActive,v,g,m,b,_,x,w,!1,!1);A.start=d,A.current=d,A.to=f,T.push(A);var S=new u(t,T,p);S.offset=r(e,"offset",null),S.completeDelay=r(e,"completeDelay",0),S.loop=Math.round(r(e,"loop",0)),S.loopDelay=Math.round(r(e,"loopDelay",0)),S.paused=s(e,"paused",!1),S.useFrames=s(e,"useFrames",!1);for(var C=h(e,"callbackScope",S),O=[S,null],P=u.TYPES,R=0;R<P.length;R++){var M,L,I=P[R],k=h(e,I,!1);k&&(M=h(e,I+"Scope",C),L=h(e,I+"Params",[]),S.setCallback(I,k,O.concat(L),M))}return S}},function(t,e,i){var n=i(69),r=i(6),s=i(13);t.exports=function(t,e){void 0===e&&(e={});var i=r(e,"start",0),a=r(e,"ease",null),o=r(e,"grid",null),h=r(e,"from",0),l="first"===h,u="center"===h,c="last"===h,d="number"==typeof h,f=Array.isArray(t),p=f?parseFloat(t[0]):parseFloat(t),g=f?parseFloat(t[1]):0,m=Math.max(p,g);if(f&&(i+=p),o){var y,v,_=o[0],x=o[1],w=0,b=0,T=[];c?(w=_-1,b=x-1):d?(w=h%_,b=Math.floor(h/_)):u&&(w=(_-1)/2,b=(x-1)/2);for(var E=s.MIN_SAFE_INTEGER,A=0;A<x;A++){T[A]=[];for(var S=0;S<_;S++){y=w-S,v=b-A;var C=Math.sqrt(y*y+v*v);E<C&&(E=C),T[A][S]=C}}}var O=a?n(a):null;return o?function(t,e,n,r){var s,a=0,o=r%_,h=Math.floor(r/_);return 0<=o&&o<_&&0<=h&&h<x&&(a=T[h][o]),(f?(s=g-p,O?a/E*s*O(a/E):a/E*s):O?a*p*O(a/E):a*p)+i}:function(t,e,n,r,s){var a,o;return s--,l?a=r:u?a=Math.abs(s/2-r):c?a=s-r:d&&(a=Math.abs(h-r)),(f?(o=u?(g-p)/s*(2*a):(g-p)/s*a,O?o*O(a/s):o):O?s*m*O(a/s):a*p)+i}}},function(t,e,i){var n=i(67),r=i(230),s=i(15),a=i(88),o=i(69),h=i(145),l=i(228),u=i(499),c=i(6),d=i(503),f=i(146);t.exports=function(t,e){var i=new d(t);i.completeDelay=s(e,"completeDelay",0),i.loop=Math.round(s(e,"loop",0)),i.loopDelay=Math.round(s(e,"loopDelay",0)),i.paused=a(e,"paused",!1),i.useFrames=a(e,"useFrames",!1);var p,g,m=c(e,"callbackScope",i),y=[i],v=c(e,"onStart",!1);v&&(p=c(e,"onStartScope",m),g=c(e,"onStartParams",[]),i.setCallback("onStart",v,y.concat(g),p));var _,x,w=c(e,"onUpdate",!1);w&&(_=c(e,"onUpdateScope",m),x=c(e,"onUpdateParams",[]),i.setCallback("onUpdate",w,y.concat(x),_));var b,T,E=c(e,"onLoop",!1);E&&(b=c(e,"onLoopScope",m),T=c(e,"onLoopParams",[]),i.setCallback("onLoop",E,y.concat(T),b));var A,S,C=c(e,"onYoyo",!1);C&&(A=c(e,"onYoyoScope",m),S=c(e,"onYoyoParams",[]),i.setCallback("onYoyo",C,y.concat(null,S),A));var O,P,R=c(e,"onComplete",!1);R&&(O=c(e,"onCompleteScope",m),P=c(e,"onCompleteParams",[]),i.setCallback("onComplete",R,y.concat(P),O));var M=u(e);if(0===M.length)return i.paused=!0,i;var L=n(r);L.targets=l(e);var I=s(e,"totalDuration",0);L.duration=0<I?Math.floor(I/M.length):h(e,"duration",L.duration),L.delay=h(e,"delay",L.delay),L.easeParams=c(e,"easeParams",L.easeParams),L.ease=o(c(e,"ease",L.ease),L.easeParams),L.hold=h(e,"hold",L.hold),L.repeat=h(e,"repeat",L.repeat),L.repeatDelay=h(e,"repeatDelay",L.repeatDelay),L.yoyo=a(e,"yoyo",L.yoyo),L.flipX=a(e,"flipX",L.flipX),L.flipY=a(e,"flipY",L.flipY);for(var k=0;k<M.length;k++)i.queue(f(i,M[k],L));return i}},function(t,e,i){var n=i(0),r=i(10),s=i(232),a=i(146),o=i(89),h=new n({Extends:r,initialize:function(t){r.call(this),this.manager=t,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=o.PENDING_ADD,this._pausedState=o.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(t,e){this.emit(t,this),e&&e.func.apply(e.scope,e.params)},setTimeScale:function(t){return this.timeScale=t,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===o.ACTIVE},add:function(t){return this.queue(a(this,t))},queue:function(t){return this.isPlaying()||(t.parent=this,t.parentIsTimeline=!0,this.data.push(t),this.totalData=this.data.length),this},hasOffset:function(t){return null!==t.offset},isOffsetAbsolute:function(t){return"number"==typeof t},isOffsetRelative:function(t){if("string"==typeof t){var e=t[0];if("-"===e||"+"===e)return!0}return!1},getRelativeOffset:function(t,e){var i=t[0],n=parseFloat(t.substr(2)),r=e;switch(i){case"+":r+=n;break;case"-":r-=n}return Math.max(0,r)},calcDuration:function(){for(var t=0,e=0,i=0,n=0;n<this.totalData;n++){var r=this.data[n];r.init(),this.hasOffset(r)?this.isOffsetAbsolute(r.offset)?(r.calculatedOffset=r.offset,0===r.offset&&(i=0)):this.isOffsetRelative(r.offset)&&(r.calculatedOffset=this.getRelativeOffset(r.offset,t)):r.calculatedOffset=i,t=r.totalDuration+r.calculatedOffset,e+=r.totalDuration,i+=r.totalDuration}this.duration=e,this.loopCounter=-1===this.loop?999999999999:this.loop,0<this.loopCounter?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,!this.paused||(this.state=o.PAUSED,!1)},resetTweens:function(t){for(var e=0;e<this.totalData;e++)this.data[e].play(t)},setCallback:function(t,e,i,n){return-1!==h.TYPES.indexOf(t)&&(this.callbacks[t]={func:e,scope:n,params:i}),this},makeActive:function(t){return this.manager.makeActive(t)},play:function(){if(this.state!==o.ACTIVE){if(this.paused)return this.paused=!1,void this.manager.makeActive(this);this.resetTweens(!1),this.state=o.ACTIVE,this.dispatchTimelineEvent(s.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){0<this.loopCounter?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),0<this.loopDelay?(this.countdown=this.loopDelay,this.state=o.LOOP_DELAY):(this.state=o.ACTIVE,this.dispatchTimelineEvent(s.TIMELINE_LOOP,this.callbacks.onLoop))):0<this.completeDelay?(this.state=o.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=o.PENDING_REMOVE,this.dispatchTimelineEvent(s.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(t,e){if(this.state!==o.PAUSED){switch(this.useFrames&&(e=+this.manager.timeScale),e*=this.timeScale,this.elapsed+=e,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=e,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case o.ACTIVE:for(var i=this.totalData,n=0;n<this.totalData;n++)this.data[n].update(t,e)&&i--;this.dispatchTimelineEvent(s.TIMELINE_UPDATE,this.callbacks.onUpdate),0===i&&this.nextState();break;case o.LOOP_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=o.ACTIVE,this.dispatchTimelineEvent(s.TIMELINE_LOOP,this.callbacks.onLoop));break;case o.COMPLETE_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=o.PENDING_REMOVE,this.dispatchTimelineEvent(s.TIMELINE_COMPLETE,this.callbacks.onComplete))}return this.state===o.PENDING_REMOVE}},stop:function(){this.state=o.PENDING_REMOVE},pause:function(){if(this.state!==o.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=o.PAUSED,this.emit(s.TIMELINE_PAUSE,this),this},resume:function(){return this.state===o.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(s.TIMELINE_RESUME,this)),this},hasTarget:function(t){for(var e=0;e<this.data.length;e++)if(this.data[e].hasTarget(t))return!0;return!1},destroy:function(){for(var t=0;t<this.data.length;t++)this.data[t].stop()}});h.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],t.exports=h},function(t,e,i){var n=i(151),r=i(0),s=i(111),a=new r({initialize:function(t){this.parent=t,this.animationManager=t.scene.sys.anims,this.animationManager.once(s.REMOVE_ANIMATION,this.remove,this),this.isPlaying=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this._timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this._delay=0,this._repeat=0,this._repeatDelay=0,this._yoyo=!1,this.forward=!0,this._reverse=!1,this.accumulator=0,this.nextTick=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(t){return t instanceof n&&(t=t.key),null===this.nextAnim?this.nextAnim=t:this.nextAnimsQueue.push(t),this.parent},setDelay:function(t){return void 0===t&&(t=0),this._delay=t,this.parent},getDelay:function(){return this._delay},delayedPlay:function(t,e,i){return this.play(e,!0,i),this.nextTick+=t,this.parent},getCurrentKey:function(){if(this.currentAnim)return this.currentAnim.key},load:function(t,e){return void 0===e&&(e=0),this.isPlaying&&this.stop(),this.animationManager.load(this,t,e),this.parent},pause:function(t){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),void 0!==t&&this.updateFrame(t),this.parent},resume:function(t){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),void 0!==t&&this.updateFrame(t),this.parent},isPaused:{get:function(){return this._paused}},play:function(t,e,i){return void 0===e&&(e=!1),void 0===i&&(i=0),t instanceof n&&(t=t.key),e&&this.isPlaying&&this.currentAnim.key===t?this.parent:(this.forward=!0,this._reverse=!1,this._paused=!1,this._wasPlaying=!0,this._startAnimation(t,i))},playReverse:function(t,e,i){return void 0===e&&(e=!1),void 0===i&&(i=0),t instanceof n&&(t=t.key),e&&this.isPlaying&&this.currentAnim.key===t?this.parent:(this.forward=!1,this._reverse=!0,this._startAnimation(t,i))},_startAnimation:function(t,e){this.load(t,e);var i=this.currentAnim,n=this.parent;if(!i)return n;this.repeatCounter=-1===this._repeat?Number.MAX_VALUE:this._repeat,i.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,i.showOnStart&&(n.visible=!0);var r=this.currentFrame;return i.emit(s.ANIMATION_START,i,r,n),n.emit(s.SPRITE_ANIMATION_KEY_START+t,i,r,n),n.emit(s.SPRITE_ANIMATION_START,i,r,n),n},reverse:function(){return this.isPlaying&&(this._reverse=!this._reverse,this.forward=!this.forward),this.parent},getProgress:function(){var t=this.currentFrame.progress;return this.forward||(t=1-t),t},setProgress:function(t){return this.forward||(t=1-t),this.setCurrentFrame(this.currentAnim.getFrameByProgress(t)),this.parent},remove:function(t,e){void 0===e&&(e=this.currentAnim),this.isPlaying&&e.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},getRepeat:function(){return this._repeat},setRepeat:function(t){return this._repeat=t,this.repeatCounter=-1===t?Number.MAX_VALUE:t,this.parent},getRepeatDelay:function(){return this._repeatDelay},setRepeatDelay:function(t){return this._repeatDelay=t,this.parent},restart:function(t){void 0===t&&(t=!1);var e=this.currentAnim;e.getFirstTick(this,t),this.forward=!0,this.isPlaying=!0,this.pendingRepeat=!1,this._paused=!1,this.updateFrame(e.frames[0]);var i=this.parent,n=this.currentFrame;return e.emit(s.ANIMATION_RESTART,e,n,i),i.emit(s.SPRITE_ANIMATION_KEY_RESTART+e.key,e,n,i),i.emit(s.SPRITE_ANIMATION_RESTART,e,n,i),this.parent},stop:function(){this._pendingStop=0,this.isPlaying=!1;var t,e=this.parent,i=this.currentAnim,n=this.currentFrame;return i&&(i.emit(s.ANIMATION_COMPLETE,i,n,e),e.emit(s.SPRITE_ANIMATION_KEY_COMPLETE+i.key,i,n,e),e.emit(s.SPRITE_ANIMATION_COMPLETE,i,n,e)),this.nextAnim&&(t=this.nextAnim,this.nextAnim=0<this.nextAnimsQueue.length?this.nextAnimsQueue.shift():null,this.play(t)),e},stopAfterDelay:function(t){return this._pendingStop=1,this._pendingStopValue=t,this.parent},stopOnRepeat:function(){return this._pendingStop=2,this.parent},stopOnFrame:function(t){return this._pendingStop=3,this._pendingStopValue=t,this.parent},setTimeScale:function(t){return void 0===t&&(t=1),this._timeScale=t,this.parent},getTimeScale:function(){return this._timeScale},getTotalFrames:function(){return this.currentAnim.frames.length},update:function(t,e){if(this.currentAnim&&this.isPlaying&&!this.currentAnim.paused){if(this.accumulator+=e*this._timeScale,1===this._pendingStop&&(this._pendingStopValue-=e,this._pendingStopValue<=0))return this.currentAnim.completeAnimation(this);this.accumulator>=this.nextTick&&this.currentAnim.setFrame(this)}},setCurrentFrame:function(t){var e=this.parent;return this.currentFrame=t,e.texture=t.frame.texture,e.frame=t.frame,e.isCropped&&e.frame.updateCropUVs(e._crop,e.flipX,e.flipY),e.setSizeToFrame(),e._originComponent&&(t.frame.customPivot?e.setOrigin(t.frame.pivotX,t.frame.pivotY):e.updateDisplayOrigin()),e},updateFrame:function(t){var e,i=this.setCurrentFrame(t);this.isPlaying&&(t.setAlpha&&(i.alpha=t.alpha),e=this.currentAnim,i.emit(s.SPRITE_ANIMATION_KEY_UPDATE+e.key,e,t,i),i.emit(s.SPRITE_ANIMATION_UPDATE,e,t,i),3===this._pendingStop&&this._pendingStopValue===t&&this.currentAnim.completeAnimation(this))},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},setYoyo:function(t){return void 0===t&&(t=!1),this._yoyo=t,this.parent},getYoyo:function(){return this._yoyo},destroy:function(){this.animationManager.off(s.REMOVE_ANIMATION,this.remove,this),this.animationManager=null,this.parent=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null}});t.exports=a},function(t,e,i){var n=i(506),r=i(40),s=i(0),a=i(33),o=i(507),h=i(92),l=i(29),u=new s({initialize:function(t){this.game=t,this.type=a.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.config={clearBeforeRender:t.config.clearBeforeRender,backgroundColor:t.config.backgroundColor,resolution:t.config.resolution,antialias:t.config.antialias,roundPixels:t.config.roundPixels},this.gameCanvas=t.canvas;var e={alpha:t.config.transparent,desynchronized:t.config.desynchronized};this.gameContext=this.game.config.context?this.game.config.context:this.gameCanvas.getContext("2d",e),this.currentContext=this.gameContext,this.antialias=t.config.antialias,this.blendModes=o(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new l,this._tempMatrix2=new l,this._tempMatrix3=new l,this._tempMatrix4=new l,this.init()},init:function(){this.game.scale.on(h.RESIZE,this.onResize,this);var t=this.game.scale.baseSize;this.resize(t.width,t.height)},onResize:function(t,e){e.width===this.width&&e.height===this.height||this.resize(e.width,e.height)},resize:function(t,e){this.width=t,this.height=e},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(t){return this.currentContext.globalCompositeOperation=t,this},setContext:function(t){return this.currentContext=t||this.gameContext,this},setAlpha:function(t){return this.currentContext.globalAlpha=t,this},preRender:function(){var t=this.gameContext,e=this.config,i=this.width,n=this.height;t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),e.clearBeforeRender&&t.clearRect(0,0,i,n),e.transparent||(t.fillStyle=e.backgroundColor.rgba,t.fillRect(0,0,i,n)),t.save(),this.drawCount=0},render:function(t,e,i,n){var s=e.list,a=s.length,o=n._cx,h=n._cy,l=n._cw,u=n._ch,c=n.renderToTexture?n.context:t.sys.context;c.save(),this.game.scene.customViewports&&(c.beginPath(),c.rect(o,h,l,u),c.clip()),this.currentContext=c;var d=n.mask;d&&d.preRenderCanvas(this,null,n._maskCamera),n.transparent||(c.fillStyle=n.backgroundColor.rgba,c.fillRect(o,h,l,u)),c.globalAlpha=n.alpha,c.globalCompositeOperation="source-over",this.drawCount+=s.length,n.renderToTexture&&n.emit(r.PRE_RENDER,n),n.matrix.copyToContext(c);for(var f=0;f<a;f++){var p=s[f];p.willRender(n)&&(p.mask&&p.mask.preRenderCanvas(this,p,n),p.renderCanvas(this,p,i,n),p.mask&&p.mask.postRenderCanvas(this,p,n))}c.setTransform(1,0,0,1,0,0),c.globalCompositeOperation="source-over",c.globalAlpha=1,n.flashEffect.postRenderCanvas(c),n.fadeEffect.postRenderCanvas(c),n.dirty=!1,d&&d.postRenderCanvas(this),c.restore(),n.renderToTexture&&(n.emit(r.POST_RENDER,n),n.renderToGame&&t.sys.context.drawImage(n.canvas,o,h))},postRender:function(){this.gameContext.restore();var t=this.snapshotState;t.callback&&(n(this.gameCanvas,t),t.callback=null)},snapshotCanvas:function(t,e,i,r,s,a,o,h,l){void 0===i&&(i=!1),this.snapshotArea(r,s,a,o,e,h,l);var u=this.snapshotState;return u.getPixel=i,n(this.canvas,u),u.callback=null,this},snapshot:function(t,e,i){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,t,e,i)},snapshotArea:function(t,e,i,n,r,s,a){var o=this.snapshotState;return o.callback=r,o.type=s,o.encoder=a,o.getPixel=!1,o.x=t,o.y=e,o.width=Math.min(i,this.gameCanvas.width),o.height=Math.min(n,this.gameCanvas.height),this},snapshotPixel:function(t,e,i){return this.snapshotArea(t,e,1,1,i),this.snapshotState.getPixel=!0,this},batchSprite:function(t,e,i,n){var r,s,a,o,h,l,u,c,d,f,p,g,m,y,v,_,x,w,b=i.alpha*t.alpha;0!=b&&(r=this.currentContext,s=this._tempMatrix1,a=this._tempMatrix2,o=this._tempMatrix3,l=(h=e.canvasData).x,u=h.y,c=e.cutWidth,d=e.cutHeight,f=e.customPivot,p=e.source.resolution,g=t.displayOriginX,m=t.displayOriginY,y=-g+e.x,v=-m+e.y,t.isCropped&&((_=t._crop).flipX===t.flipX&&_.flipY===t.flipY||e.updateCropUVs(_,t.flipX,t.flipY),c=_.cw,d=_.ch,l=_.cx,u=_.cy,y=-g+_.x,v=-m+_.y,t.flipX&&(0<=y?y=-(y+c):y<0&&(y=Math.abs(y)-c)),t.flipY&&(0<=v?v=-(v+d):v<0&&(v=Math.abs(v)-d))),w=x=1,t.flipX&&(f||(y+=-e.realWidth+2*g),x=-1),t.flipY&&(f||(v+=-e.realHeight+2*m),w=-1),a.applyITRS(t.x,t.y,t.rotation,t.scaleX*x,t.scaleY*w),s.copyFrom(i.matrix),n?(s.multiplyWithOffset(n,-i.scrollX*t.scrollFactorX,-i.scrollY*t.scrollFactorY),a.e=t.x,a.f=t.y):(a.e-=i.scrollX*t.scrollFactorX,a.f-=i.scrollY*t.scrollFactorY),s.multiply(a,o),r.save(),o.setToContext(r),r.globalCompositeOperation=this.blendModes[t.blendMode],r.globalAlpha=b,r.imageSmoothingEnabled=!(!this.antialias||e.source.scaleMode),t.mask&&t.mask.preRenderCanvas(this,t,i),r.drawImage(e.source.image,l,u,c,d,y,v,c/p,d/p),t.mask&&t.mask.postRenderCanvas(this,t,i),r.restore())},destroy:function(){this.gameCanvas=null,this.gameContext=null,this.game=null}});t.exports=u},function(t,e,i){var n=i(26),r=i(31),s=i(2);t.exports=function(t,e){var i,a,o,h,l=s(e,"callback"),u=s(e,"type","image/png"),c=s(e,"encoder",.92),d=Math.abs(Math.round(s(e,"x",0))),f=Math.abs(Math.round(s(e,"y",0))),p=s(e,"width",t.width),g=s(e,"height",t.height);s(e,"getPixel",!1)?(i=t.getContext("2d").getImageData(d,f,1,1).data,l.call(null,new r(i[0],i[1],i[2],i[3]/255))):0!==d||0!==f||p!==t.width||g!==t.height?((a=n.createWebGL(this,p,g)).getContext("2d").drawImage(t,d,f,p,g,0,0,p,g),(o=new Image).onerror=function(){l.call(null),n.remove(a)},o.onload=function(){l.call(null,o),n.remove(a)},o.src=a.toDataURL(u,c)):((h=new Image).onerror=function(){l.call(null)},h.onload=function(){l.call(null,h)},h.src=t.toDataURL(u,c))}},function(t,e,i){var n=i(52),r=i(316);t.exports=function(){var t=[],e=r.supportNewBlendModes,i="source-over";return t[n.NORMAL]=i,t[n.ADD]="lighter",t[n.MULTIPLY]=e?"multiply":i,t[n.SCREEN]=e?"screen":i,t[n.OVERLAY]=e?"overlay":i,t[n.DARKEN]=e?"darken":i,t[n.LIGHTEN]=e?"lighten":i,t[n.COLOR_DODGE]=e?"color-dodge":i,t[n.COLOR_BURN]=e?"color-burn":i,t[n.HARD_LIGHT]=e?"hard-light":i,t[n.SOFT_LIGHT]=e?"soft-light":i,t[n.DIFFERENCE]=e?"difference":i,t[n.EXCLUSION]=e?"exclusion":i,t[n.HUE]=e?"hue":i,t[n.SATURATION]=e?"saturation":i,t[n.COLOR]=e?"color":i,t[n.LUMINOSITY]=e?"luminosity":i,t[n.ERASE]="destination-out",t[n.SOURCE_IN]="source-in",t[n.SOURCE_OUT]="source-out",t[n.SOURCE_ATOP]="source-atop",t[n.DESTINATION_OVER]="destination-over",t[n.DESTINATION_IN]="destination-in",t[n.DESTINATION_OUT]="destination-out",t[n.DESTINATION_ATOP]="destination-atop",t[n.LIGHTER]="lighter",t[n.COPY]="copy",t[n.XOR]="xor",t}},function(t,e,i){var n=i(91),r=i(40),s=i(0),a=i(33),o=i(20),h=i(120),l=i(1),u=i(92),c=i(80),d=i(121),f=i(29),p=i(9),g=i(509),m=i(510),y=i(511),v=i(237),_=i(512),x=new s({initialize:function(t){var e=t.config,i={alpha:e.transparent,desynchronized:e.desynchronized,depth:!1,antialias:e.antialiasGL,premultipliedAlpha:e.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:e.failIfMajorPerformanceCaveat,powerPreference:e.powerPreference};this.config={clearBeforeRender:e.clearBeforeRender,antialias:e.antialias,backgroundColor:e.backgroundColor,contextCreation:i,resolution:e.resolution,roundPixels:e.roundPixels,maxTextures:e.maxTextures,maxTextureSize:e.maxTextureSize,batchSize:e.batchSize,maxLights:e.maxLights,mipmapFilter:e.mipmapFilter},this.game=t,this.type=a.WEBGL,this.width=0,this.height=0,this.canvas=t.canvas,this.blendModes=[],this.nativeTextures=[],this.contextLost=!1,this.pipelines=null,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTextureUnit=0,this.currentTextures=new Array(16),this.currentFramebuffer=null,this.currentPipeline=null,this.currentProgram=null,this.currentVertexBuffer=null,this.currentIndexBuffer=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=l,this.contextRestoredHandler=l,this.gl=null,this.supportedExtensions=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.defaultCamera=new n(0,0,0,0),this._tempMatrix1=new f,this._tempMatrix2=new f,this._tempMatrix3=new f,this._tempMatrix4=new f,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.mipmapFilter=null,this.init(this.config)},init:function(t){var e=this.game,i=this.canvas,n=t.backgroundColor,r=e.config.context?e.config.context:i.getContext("webgl",t.contextCreation)||i.getContext("experimental-webgl",t.contextCreation);if(!r||r.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=r;var s=this;this.contextLostHandler=function(t){s.contextLost=!0,s.game.events.emit(o.CONTEXT_LOST,s),t.preventDefault()},this.contextRestoredHandler=function(){s.contextLost=!1,s.init(s.config),s.game.events.emit(o.CONTEXT_RESTORED,s)},i.addEventListener("webglcontextlost",this.contextLostHandler,!1),i.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),e.context=r;for(var h=0;h<=27;h++)this.blendModes.push({func:[r.ONE,r.ONE_MINUS_SRC_ALPHA],equation:r.FUNC_ADD});this.blendModes[1].func=[r.ONE,r.DST_ALPHA],this.blendModes[2].func=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[r.ONE,r.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[r.ZERO,r.ONE_MINUS_SRC_ALPHA],equation:r.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=r.BYTE,this.glFormats[1]=r.SHORT,this.glFormats[2]=r.UNSIGNED_BYTE,this.glFormats[3]=r.UNSIGNED_SHORT,this.glFormats[4]=r.FLOAT,this.glFuncMap={mat2:{func:r.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:r.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:r.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:r.uniform1f,length:1},"1fv":{func:r.uniform1fv,length:1},"1i":{func:r.uniform1i,length:1},"1iv":{func:r.uniform1iv,length:1},"2f":{func:r.uniform2f,length:2},"2fv":{func:r.uniform2fv,length:1},"2i":{func:r.uniform2i,length:2},"2iv":{func:r.uniform2iv,length:1},"3f":{func:r.uniform3f,length:3},"3fv":{func:r.uniform3fv,length:1},"3i":{func:r.uniform3i,length:3},"3iv":{func:r.uniform3iv,length:1},"4f":{func:r.uniform4f,length:4},"4fv":{func:r.uniform4fv,length:1},"4i":{func:r.uniform4i,length:4},"4iv":{func:r.uniform4iv,length:1}};var l=r.getSupportedExtensions();t.maxTextures||(t.maxTextures=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS)),t.maxTextureSize||(t.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE));var u="WEBGL_compressed_texture_",c="WEBKIT_"+u;this.compression.ETC1=r.getExtension(u+"etc1")||r.getExtension(c+"etc1"),this.compression.PVRTC=r.getExtension(u+"pvrtc")||r.getExtension(c+"pvrtc"),this.compression.S3TC=r.getExtension(u+"s3tc")||r.getExtension(c+"s3tc"),this.supportedExtensions=l,r.disable(r.DEPTH_TEST),r.disable(r.CULL_FACE),r.enable(r.BLEND),r.clearColor(n.redGL,n.greenGL,n.blueGL,n.alphaGL),this.mipmapFilter=r[t.mipmapFilter];for(var f=0;f<this.currentTextures.length;++f)this.currentTextures[f]=null;return this.pipelines={},this.addPipeline("TextureTintPipeline",new v({game:e,renderer:this})),this.addPipeline("TextureTintStripPipeline",new _({game:e,renderer:this})),this.addPipeline("BitmapMaskPipeline",new m({game:e,renderer:this})),this.addPipeline("Light2D",new y({game:e,renderer:this,maxLights:t.maxLights})),this.setBlendMode(a.BlendModes.NORMAL),e.textures.once(d.READY,this.boot,this),this},boot:function(){for(var t in this.pipelines)this.pipelines[t].boot();var e=this.game.textures.getFrame("__DEFAULT");this.pipelines.TextureTintPipeline.currentFrame=e,this.blankTexture=e;var i=this.gl;i.bindFramebuffer(i.FRAMEBUFFER,null),i.enable(i.SCISSOR_TEST),this.setPipeline(this.pipelines.TextureTintPipeline),this.game.scale.on(u.RESIZE,this.onResize,this);var n=this.game.scale.baseSize;this.resize(n.width,n.height,this.game.scale.resolution)},onResize:function(t,e,i,n){e.width===this.width&&e.height===this.height&&n===this.resolution||this.resize(e.width,e.height,n)},resize:function(t,e,i){var n=this.gl,r=this.pipelines;for(var s in this.width=t,this.height=e,this.resolution=i,n.viewport(0,0,t,e),r)r[s].resize(t,e,i);return this.drawingBufferHeight=n.drawingBufferHeight,n.scissor(0,n.drawingBufferHeight-e,t,e),this.defaultCamera.setSize(t,e),this},hasExtension:function(t){return!!this.supportedExtensions&&this.supportedExtensions.indexOf(t)},getExtension:function(t){return this.hasExtension(t)?(t in this.extensions||(this.extensions[t]=this.gl.getExtension(t)),this.extensions[t]):null},flush:function(){this.currentPipeline&&this.currentPipeline.flush()},hasPipeline:function(t){return t in this.pipelines},getPipeline:function(t){return this.hasPipeline(t)?this.pipelines[t]:null},removePipeline:function(t){return delete this.pipelines[t],this},addPipeline:function(t,e){return this.hasPipeline(t)?console.warn("Pipeline exists: "+t):this.pipelines[t]=e,e.name=t,this.pipelines[t].resize(this.width,this.height,this.config.resolution),e},pushScissor:function(t,e,i,n,r){void 0===r&&(r=this.drawingBufferHeight);var s=[t,e,i,n];return this.scissorStack.push(s),this.setScissor(t,e,i,n,r),this.currentScissor=s},setScissor:function(t,e,i,n,r){void 0===r&&(r=this.drawingBufferHeight);var s,a,o,h,l=this.gl,u=this.currentScissor,c=0<i&&0<n;u&&c&&(s=u[0],a=u[1],o=u[2],h=u[3],c=s!==t||a!==e||o!==i||h!==n),c&&(this.flush(),l.scissor(t,r-e-n,i,n))},popScissor:function(){var t=this.scissorStack;t.pop();var e=t[t.length-1];e&&this.setScissor(e[0],e[1],e[2],e[3]),this.currentScissor=e},setPipeline:function(t,e){return this.currentPipeline===t&&this.currentPipeline.vertexBuffer===this.currentVertexBuffer&&this.currentPipeline.program===this.currentProgram||(this.flush(),this.currentPipeline=t,this.currentPipeline.bind()),this.currentPipeline.onBind(e),this.currentPipeline},hasActiveStencilMask:function(){var t=this.currentMask.mask,e=this.currentCameraMask.mask;return t&&t.isStencil||e&&e.isStencil},rebindPipeline:function(t){var e=this.gl;e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),this.hasActiveStencilMask()?e.clear(e.DEPTH_BUFFER_BIT):(e.disable(e.STENCIL_TEST),e.clear(e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT)),e.viewport(0,0,this.width,this.height),this.setBlendMode(0,!0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.blankTexture.glTexture),this.currentActiveTextureUnit=0,this.currentTextures[0]=this.blankTexture.glTexture,this.currentPipeline=t,this.currentPipeline.bind(),this.currentPipeline.onBind()},clearPipeline:function(){this.flush(),this.currentPipeline=null,this.currentProgram=null,this.currentVertexBuffer=null,this.currentIndexBuffer=null,this.setBlendMode(0,!0)},setBlendMode:function(t,e){void 0===e&&(e=!1);var i=this.gl,n=this.blendModes[t];return!!(e||t!==a.BlendModes.SKIP_CHECK&&this.currentBlendMode!==t)&&(this.flush(),i.enable(i.BLEND),i.blendEquation(n.equation),2<n.func.length?i.blendFuncSeparate(n.func[0],n.func[1],n.func[2],n.func[3]):i.blendFunc(n.func[0],n.func[1]),this.currentBlendMode=t,!0)},addBlendMode:function(t,e){return this.blendModes.push({func:t,equation:e})-1},updateBlendMode:function(t,e,i){return this.blendModes[t]&&(this.blendModes[t].func=e,i&&(this.blendModes[t].equation=i)),this},removeBlendMode:function(t){return 17<t&&this.blendModes[t]&&this.blendModes.splice(t,1),this},setBlankTexture:function(t){void 0===t&&(t=!1),!t&&0===this.currentActiveTextureUnit&&this.currentTextures[0]||this.setTexture2D(this.blankTexture.glTexture,0)},setTexture2D:function(t,e,i){void 0===i&&(i=!0);var n=this.gl;return t!==this.currentTextures[e]&&(i&&this.flush(),this.currentActiveTextureUnit!==e&&(n.activeTexture(n.TEXTURE0+e),this.currentActiveTextureUnit=e),n.bindTexture(n.TEXTURE_2D,t),this.currentTextures[e]=t),this},setFramebuffer:function(t,e){void 0===e&&(e=!1);var i=this.gl,n=this.width,r=this.height;return t!==this.currentFramebuffer&&(t&&t.renderTexture?(n=t.renderTexture.width,r=t.renderTexture.height):this.flush(),i.bindFramebuffer(i.FRAMEBUFFER,t),i.viewport(0,0,n,r),e&&(t?(this.drawingBufferHeight=r,this.pushScissor(0,0,n,r)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=t),this},setProgram:function(t){var e=this.gl;return t!==this.currentProgram&&(this.flush(),e.useProgram(t),this.currentProgram=t),this},setVertexBuffer:function(t){var e=this.gl;return t!==this.currentVertexBuffer&&(this.flush(),e.bindBuffer(e.ARRAY_BUFFER,t),this.currentVertexBuffer=t),this},setIndexBuffer:function(t){var e=this.gl;return t!==this.currentIndexBuffer&&(this.flush(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.currentIndexBuffer=t),this},createTextureFromSource:function(t,e,i,n){var r=this.gl,s=r.NEAREST,o=r.NEAREST,l=r.CLAMP_TO_EDGE;e=t?t.width:e,i=t?t.height:i;var u=h(e,i);return u&&(l=r.REPEAT),n===a.ScaleModes.LINEAR&&this.config.antialias&&(s=u?this.mipmapFilter:r.LINEAR,o=r.LINEAR),t||"number"!=typeof e||"number"!=typeof i?this.createTexture2D(0,s,o,l,l,r.RGBA,t):this.createTexture2D(0,s,o,l,l,r.RGBA,null,e,i)},createTexture2D:function(t,e,i,n,r,s,a,o,l,u,c,d){u=null==u||u,void 0===c&&(c=!1),void 0===d&&(d=!1);var f=this.gl,p=f.createTexture();return this.setTexture2D(p,0),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,e),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,i),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,r),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,n),f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,d),null==a?f.texImage2D(f.TEXTURE_2D,t,s,o,l,0,s,f.UNSIGNED_BYTE,null):(c||(o=a.width,l=a.height),f.texImage2D(f.TEXTURE_2D,t,s,s,f.UNSIGNED_BYTE,a)),h(o,l)&&f.generateMipmap(f.TEXTURE_2D),this.setTexture2D(null,0),p.isAlphaPremultiplied=u,p.isRenderTexture=!1,p.width=o,p.height=l,this.nativeTextures.push(p),p},createFramebuffer:function(t,e,i,n){var r,s,a=this.gl,o=a.createFramebuffer();if(this.setFramebuffer(o),n&&(s=a.createRenderbuffer(),a.bindRenderbuffer(a.RENDERBUFFER,s),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,t,e),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,s)),i.isRenderTexture=!0,i.isAlphaPremultiplied=!1,a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,i,0),(r=a.checkFramebufferStatus(a.FRAMEBUFFER))===a.FRAMEBUFFER_COMPLETE)return o.renderTexture=i,this.setFramebuffer(null),o;throw new Error("Framebuffer incomplete. Framebuffer status: "+{36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"}[r])},createProgram:function(t,e){var i=this.gl,n=i.createProgram(),r=i.createShader(i.VERTEX_SHADER),s=i.createShader(i.FRAGMENT_SHADER);if(i.shaderSource(r,t),i.shaderSource(s,e),i.compileShader(r),i.compileShader(s),!i.getShaderParameter(r,i.COMPILE_STATUS))throw new Error("Failed to compile Vertex Shader:\n"+i.getShaderInfoLog(r));if(!i.getShaderParameter(s,i.COMPILE_STATUS))throw new Error("Failed to compile Fragment Shader:\n"+i.getShaderInfoLog(s));if(i.attachShader(n,r),i.attachShader(n,s),i.linkProgram(n),!i.getProgramParameter(n,i.LINK_STATUS))throw new Error("Failed to link program:\n"+i.getProgramInfoLog(n));return n},createVertexBuffer:function(t,e){var i=this.gl,n=i.createBuffer();return this.setVertexBuffer(n),i.bufferData(i.ARRAY_BUFFER,t,e),this.setVertexBuffer(null),n},createIndexBuffer:function(t,e){var i=this.gl,n=i.createBuffer();return this.setIndexBuffer(n),i.bufferData(i.ELEMENT_ARRAY_BUFFER,t,e),this.setIndexBuffer(null),n},deleteTexture:function(t){var e=this.nativeTextures.indexOf(t);return-1!==e&&c(this.nativeTextures,e),this.gl.deleteTexture(t),this.currentTextures[0]!==t||this.game.pendingDestroy||this.setBlankTexture(!0),this},deleteFramebuffer:function(t){return this.gl.deleteFramebuffer(t),this},deleteProgram:function(t){return this.gl.deleteProgram(t),this},deleteBuffer:function(t){return this.gl.deleteBuffer(t),this},preRenderCamera:function(t){var e,i=t._cx,n=t._cy,s=t._cw,a=t._ch,o=this.pipelines.TextureTintPipeline,h=t.backgroundColor;t.renderToTexture?(this.flush(),this.pushScissor(i,n,s,-a),this.setFramebuffer(t.framebuffer),(e=this.gl).clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),o.projOrtho(i,s+i,n,a+n,-1e3,1e3),t.mask&&(this.currentCameraMask.mask=t.mask,this.currentCameraMask.camera=t._maskCamera,t.mask.preRenderWebGL(this,t,t._maskCamera)),0<h.alphaGL&&o.drawFillRect(i,n,s+i,a+n,p.getTintFromFloats(h.redGL,h.greenGL,h.blueGL,1),h.alphaGL),t.emit(r.PRE_RENDER,t)):(this.pushScissor(i,n,s,a),t.mask&&(this.currentCameraMask.mask=t.mask,this.currentCameraMask.camera=t._maskCamera,t.mask.preRenderWebGL(this,t,t._maskCamera)),0<h.alphaGL&&o.drawFillRect(i,n,s,a,p.getTintFromFloats(h.redGL,h.greenGL,h.blueGL,1),h.alphaGL))},getCurrentStencilMask:function(){var t=null,e=this.maskStack,i=this.currentCameraMask;return 0<e.length?t=e[e.length-1]:i.mask&&i.mask.isStencil&&(t=i),t},postRenderCamera:function(t){this.setPipeline(this.pipelines.TextureTintPipeline);var e,i=this.pipelines.TextureTintPipeline;t.flashEffect.postRenderWebGL(i,p.getTintFromFloats),t.fadeEffect.postRenderWebGL(i,p.getTintFromFloats),t.dirty=!1,this.popScissor(),t.renderToTexture&&(i.flush(),this.setFramebuffer(null),t.emit(r.POST_RENDER,t),t.renderToGame&&(i.projOrtho(0,i.width,i.height,0,-1e3,1e3),e=p.getTintAppendFloatAlpha,(t.pipeline?t.pipeline:i).batchTexture(t,t.glTexture,t.width,t.height,t.x,t.y,t.width,t.height,t.zoom,t.zoom,t.rotation,t.flipX,!t.flipY,1,1,0,0,0,0,t.width,t.height,e(t._tintTL,t._alphaTL),e(t._tintTR,t._alphaTR),e(t._tintBL,t._alphaBL),e(t._tintBR,t._alphaBR),t._isTinted&&t.tintFill,0,0,this.defaultCamera,null)),this.setBlankTexture(!0)),t.mask&&(this.currentCameraMask.mask=null,t.mask.postRenderWebGL(this,t._maskCamera))},preRender:function(){if(!this.contextLost){var t,e=this.gl,i=this.pipelines;for(var n in e.bindFramebuffer(e.FRAMEBUFFER,null),this.config.clearBeforeRender&&(t=this.config.backgroundColor,e.clearColor(t.redGL,t.greenGL,t.blueGL,t.alphaGL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT)),e.enable(e.SCISSOR_TEST),i)i[n].onPreRender();this.currentScissor=[0,0,this.width,this.height],this.scissorStack=[this.currentScissor],this.game.scene.customViewports&&e.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.setPipeline(this.pipelines.TextureTintPipeline)}},render:function(t,e,i,n){if(!this.contextLost){var r=e.list,s=r.length,o=this.pipelines;for(var h in o)o[h].onRender(t,n);if(this.preRenderCamera(n),0===s)return this.setBlendMode(a.BlendModes.NORMAL),void this.postRenderCamera(n);this.currentType="";for(var l=this.currentMask,u=0;u<s;u++){var c,d,f=r[u];f.willRender(n)&&(f.blendMode!==this.currentBlendMode&&this.setBlendMode(f.blendMode),c=f.mask,(l=this.currentMask).mask&&l.mask!==c&&l.mask.postRenderWebGL(this,l.camera),c&&l.mask!==c&&c.preRenderWebGL(this,f,n),(d=f.type)!==this.currentType&&(this.newType=!0,this.currentType=d),this.nextTypeMatch=u<s-1&&r[u+1].type===this.currentType,f.renderWebGL(this,f,i,n),this.newType=!1)}(l=this.currentMask).mask&&l.mask.postRenderWebGL(this,l.camera),this.setBlendMode(a.BlendModes.NORMAL),this.postRenderCamera(n)}},postRender:function(){if(!this.contextLost){this.flush();var t=this.snapshotState;t.callback&&(g(this.canvas,t),t.callback=null);var e=this.pipelines;for(var i in e)e[i].onPostRender()}},snapshot:function(t,e,i){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,t,e,i)},snapshotArea:function(t,e,i,n,r,s,a){var o=this.snapshotState;return o.callback=r,o.type=s,o.encoder=a,o.getPixel=!1,o.x=t,o.y=e,o.width=Math.min(i,this.gl.drawingBufferWidth),o.height=Math.min(n,this.gl.drawingBufferHeight),this},snapshotPixel:function(t,e,i){return this.snapshotArea(t,e,1,1,i),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(t,e,i,n,r,s,a,o,h,l,u){void 0===r&&(r=!1),void 0===s&&(s=0),void 0===a&&(a=0),void 0===o&&(o=e),void 0===h&&(h=i);var c=this.currentFramebuffer;this.snapshotArea(s,a,o,h,n,l,u);var d=this.snapshotState;return d.getPixel=r,d.isFramebuffer=!0,d.bufferWidth=e,d.bufferHeight=i,this.setFramebuffer(t),g(this.canvas,d),this.setFramebuffer(c),d.callback=null,d.isFramebuffer=!1,this},canvasToTexture:function(t,e,i,n){return void 0===i&&(i=!1),void 0===n&&(n=!1),e?this.updateCanvasTexture(t,e,n):this.createCanvasTexture(t,i,n)},createCanvasTexture:function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var n=this.gl,r=n.NEAREST,s=n.NEAREST,a=t.width,o=t.height,l=n.CLAMP_TO_EDGE,u=h(a,o);return!e&&u&&(l=n.REPEAT),this.config.antialias&&(r=u?this.mipmapFilter:n.LINEAR,s=n.LINEAR),this.createTexture2D(0,r,s,l,l,n.RGBA,t,a,o,!0,!1,i)},updateCanvasTexture:function(t,e,i){void 0===i&&(i=!1);var n=this.gl,r=t.width,s=t.height;return 0<r&&0<s&&(this.setTexture2D(e,0),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,i),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),e.width=r,e.height=s,this.setTexture2D(null,0)),e},createVideoTexture:function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var n=this.gl,r=n.NEAREST,s=n.NEAREST,a=t.videoWidth,o=t.videoHeight,l=n.CLAMP_TO_EDGE,u=h(a,o);return!e&&u&&(l=n.REPEAT),this.config.antialias&&(r=u?this.mipmapFilter:n.LINEAR,s=n.LINEAR),this.createTexture2D(0,r,s,l,l,n.RGBA,t,a,o,!0,!0,i)},updateVideoTexture:function(t,e,i){void 0===i&&(i=!1);var n=this.gl,r=t.videoWidth,s=t.videoHeight;return 0<r&&0<s&&(this.setTexture2D(e,0),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,i),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),e.width=r,e.height=s,this.setTexture2D(null,0)),e},setTextureFilter:function(t,e){var i=this.gl,n=[i.LINEAR,i.NEAREST][e];return this.setTexture2D(t,0),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,n),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,n),this.setTexture2D(null,0),this},setFloat1:function(t,e,i){return this.setProgram(t),this.gl.uniform1f(this.gl.getUniformLocation(t,e),i),this},setFloat2:function(t,e,i,n){return this.setProgram(t),this.gl.uniform2f(this.gl.getUniformLocation(t,e),i,n),this},setFloat3:function(t,e,i,n,r){return this.setProgram(t),this.gl.uniform3f(this.gl.getUniformLocation(t,e),i,n,r),this},setFloat4:function(t,e,i,n,r,s){return this.setProgram(t),this.gl.uniform4f(this.gl.getUniformLocation(t,e),i,n,r,s),this},setFloat1v:function(t,e,i){return this.setProgram(t),this.gl.uniform1fv(this.gl.getUniformLocation(t,e),i),this},setFloat2v:function(t,e,i){return this.setProgram(t),this.gl.uniform2fv(this.gl.getUniformLocation(t,e),i),this},setFloat3v:function(t,e,i){return this.setProgram(t),this.gl.uniform3fv(this.gl.getUniformLocation(t,e),i),this},setFloat4v:function(t,e,i){return this.setProgram(t),this.gl.uniform4fv(this.gl.getUniformLocation(t,e),i),this},setInt1:function(t,e,i){return this.setProgram(t),this.gl.uniform1i(this.gl.getUniformLocation(t,e),i),this},setInt2:function(t,e,i,n){return this.setProgram(t),this.gl.uniform2i(this.gl.getUniformLocation(t,e),i,n),this},setInt3:function(t,e,i,n,r){return this.setProgram(t),this.gl.uniform3i(this.gl.getUniformLocation(t,e),i,n,r),this},setInt4:function(t,e,i,n,r,s){return this.setProgram(t),this.gl.uniform4i(this.gl.getUniformLocation(t,e),i,n,r,s),this},setMatrix2:function(t,e,i,n){return this.setProgram(t),this.gl.uniformMatrix2fv(this.gl.getUniformLocation(t,e),i,n),this},setMatrix3:function(t,e,i,n){return this.setProgram(t),this.gl.uniformMatrix3fv(this.gl.getUniformLocation(t,e),i,n),this},setMatrix4:function(t,e,i,n){return this.setProgram(t),this.gl.uniformMatrix4fv(this.gl.getUniformLocation(t,e),i,n),this},getMaxTextures:function(){return this.config.maxTextures},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){for(var t=0;t<this.nativeTextures.length;t++)this.gl.deleteTexture(this.nativeTextures[t]);for(var e in this.nativeTextures=[],this.pipelines)this.pipelines[e].destroy(),delete this.pipelines[e];this.defaultCamera.destroy(),this.currentMask=null,this.currentCameraMask=null,this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1),this.game=null,this.gl=null,this.canvas=null,this.maskStack=[],this.contextLost=!0,this.extensions={}}});t.exports=x},function(t,e,i){var n=i(26),r=i(31),s=i(2);t.exports=function(t,e){var i=t.getContext("experimental-webgl"),a=s(e,"callback"),o=s(e,"type","image/png"),h=s(e,"encoder",.92),l=s(e,"x",0),u=s(e,"y",0),c=s(e,"getPixel",!1),d=s(e,"isFramebuffer",!1),f=d?s(e,"bufferWidth",1):i.drawingBufferWidth,p=d?s(e,"bufferHeight",1):i.drawingBufferHeight;if(c){var g=new Uint8Array(4),m=d?u:p-u;i.readPixels(l,m,1,1,i.RGBA,i.UNSIGNED_BYTE,g),a.call(null,new r(g[0],g[1],g[2],g[3]/255))}else{var y=s(e,"width",f),v=s(e,"height",p),_=y*v*4,x=new Uint8Array(_);i.readPixels(l,p-u-v,y,v,i.RGBA,i.UNSIGNED_BYTE,x);for(var w=n.createWebGL(this,y,v),b=w.getContext("2d"),T=b.getImageData(0,0,y,v),E=T.data,A=0;A<v;A++)for(var S=0;S<y;S++){var C=4*((v-A)*y+S),O=d?_-4*(A*y+(y-S)):4*(A*y+S);E[0+O]=x[0+C],E[1+O]=x[1+C],E[2+O]=x[2+C],E[3+O]=x[3+C]}b.putImageData(T,0,0);var P=new Image;P.onerror=function(){a.call(null),n.remove(w)},P.onload=function(){a.call(null,P),n.remove(w)},P.src=w.toDataURL(o,h)}}},function(t,e,i){var n=i(0),r=i(786),s=i(787),a=i(147),o=new n({Extends:a,initialize:function(t){a.call(this,{game:t.game,renderer:t.renderer,gl:t.renderer.gl,topology:t.topology?t.topology:t.renderer.gl.TRIANGLES,vertShader:t.vertShader?t.vertShader:s,fragShader:t.fragShader?t.fragShader:r,vertexCapacity:t.vertexCapacity?t.vertexCapacity:3,vertexSize:t.vertexSize?t.vertexSize:2*Float32Array.BYTES_PER_ELEMENT,vertices:new Float32Array([-1,1,-1,-7,7,1]).buffer,attributes:[{name:"inPosition",size:2,type:t.renderer.gl.FLOAT,normalized:!1,offset:0}]}),this.vertexViewF32=new Float32Array(this.vertexData),this.maxQuads=1,this.resolutionDirty=!0},onBind:function(){a.prototype.onBind.call(this);var t=this.renderer,e=this.program;return this.resolutionDirty&&(t.setFloat2(e,"uResolution",this.width,this.height),t.setInt1(e,"uMainSampler",0),t.setInt1(e,"uMaskSampler",1),this.resolutionDirty=!1),this},resize:function(t,e,i){return a.prototype.resize.call(this,t,e,i),this.resolutionDirty=!0,this},beginMask:function(t,e,i){var n=this.renderer,r=this.gl;t.bitmapMask&&r&&(n.flush(),t.prevFramebuffer=n.currentFramebuffer,n.setFramebuffer(t.mainFramebuffer),r.disable(r.STENCIL_TEST),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),n.currentCameraMask.mask!==t&&(n.currentMask.mask=t,n.currentMask.camera=i))},endMask:function(t,e){var i,n=this.gl,r=this.renderer,s=t.bitmapMask;s&&n&&(r.flush(),r.setFramebuffer(t.maskFramebuffer),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),r.setBlendMode(0,!0),s.renderWebGL(r,s,0,e),r.flush(),r.setFramebuffer(t.prevFramebuffer),(i=r.getCurrentStencilMask())?(n.enable(n.STENCIL_TEST),i.mask.applyStencil(r,i.camera,!0)):r.currentMask.mask=null,r.setPipeline(this),n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,t.maskTexture),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,t.mainTexture),n.uniform1i(n.getUniformLocation(this.program,"uInvertMaskAlpha"),t.invertAlpha),n.drawArrays(this.topology,0,3))}});t.exports=o},function(t,e,i){var n=i(0),r=i(788),s=i(237),a=10,o=new n({Extends:s,initialize:function(t){a=t.maxLights,t.fragShader=r.replace("%LIGHT_COUNT%",a.toString()),s.call(this,t),this.defaultNormalMap,this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1])},boot:function(){this.defaultNormalMap=this.game.textures.getFrame("__DEFAULT")},onBind:function(t){s.prototype.onBind.call(this);var e=this.renderer,i=this.program;return this.mvpUpdate(),e.setInt1(i,"uNormSampler",1),e.setFloat2(i,"uResolution",this.width,this.height),t&&this.setNormalMap(t),this},onRender:function(t,e){this.active=!1;var i=t.sys.lights;if(!i||i.lights.length<=0||!i.active)return this;var n=i.cull(e),r=Math.min(n.length,a);if(0===r)return this;this.active=!0;for(var s=this.renderer,o=this.program,h=e.matrix,l={x:0,y:0},u=s.height,c=0;c<a;++c)s.setFloat1(o,"uLights["+c+"].radius",0);for(s.setFloat4(o,"uCamera",e.x,e.y,e.rotation,e.zoom),s.setFloat3(o,"uAmbientLightColor",i.ambientColor.r,i.ambientColor.g,i.ambientColor.b),c=0;c<r;++c){var d=n[c],f="uLights["+c+"].";h.transformPoint(d.x,d.y,l),s.setFloat2(o,f+"position",l.x-e.scrollX*d.scrollFactorX*e.zoom,u-(l.y-e.scrollY*d.scrollFactorY*e.zoom)),s.setFloat3(o,f+"color",d.r,d.g,d.b),s.setFloat1(o,f+"intensity",d.intensity),s.setFloat1(o,f+"radius",d.radius)}return this.currentNormalMapRotation=null,this},batchTexture:function(t,e,i,n,r,s,a,o,h,l,u,c,d,f,p,g,m,y,v,_,x,w,b,T,E,A,S,C,O,P){var R,M,L,I,k,D,F,B,N,G,Y,z,U,X,V,H,j,W,K,q,$,J,Z,Q,tt;this.active&&(this.renderer.setPipeline(this),t.displayTexture?R=t.displayTexture.dataSource[t.displayFrame.sourceIndex]:t.texture?R=t.texture.dataSource[t.frame.sourceIndex]:t.tileset&&(R=Array.isArray(t.tileset)?t.tileset[0].image.dataSource[0]:t.tileset.image.dataSource[0]),R?(this.setTexture2D(R.glTexture,1),this.setNormalMapRotation(u),M=this._tempMatrix1,L=this._tempMatrix2,I=this._tempMatrix3,k=y/i+S,D=v/n+C,F=(y+_)/i+S,B=(v+x)/n+C,z=a,U=o,N=-g,G=-m,t.isCropped&&(z=(Y=t._crop).width,U=Y.height,a=Y.width,o=Y.height,X=y=Y.x,V=v=Y.y,c&&(X=_-Y.x-Y.width),d&&!e.isRenderTexture&&(V=x-Y.y-Y.height),k=X/i+S,D=V/n+C,F=(X+Y.width)/i+S,B=(V+Y.height)/n+C,N=-g+y,G=-m+v),c&&(z*=-1,N+=a),(d^=e.isRenderTexture?1:0)&&(U*=-1,G+=o),H=N+z,j=G+U,L.applyITRS(r,s,u,h,l),M.copyFrom(O.matrix),P?(M.multiplyWithOffset(P,-O.scrollX*f,-O.scrollY*p),L.e=r,L.f=s):(L.e-=O.scrollX*f,L.f-=O.scrollY*p),M.multiply(L,I),W=I.getX(N,G),K=I.getY(N,G),q=I.getX(N,j),$=I.getY(N,j),J=I.getX(H,j),Z=I.getY(H,j),Q=I.getX(H,G),tt=I.getY(H,G),O.roundPixels&&(W=Math.round(W),K=Math.round(K),q=Math.round(q),$=Math.round($),J=Math.round(J),Z=Math.round(Z),Q=Math.round(Q),tt=Math.round(tt)),this.setTexture2D(e,0),this.batchQuad(W,K,q,$,J,Z,Q,tt,k,D,F,B,w,b,T,E,A,e,0)):console.warn("Normal map missing or invalid"))},setNormalMap:function(t){var e;this.active&&t&&(t.texture&&(e=t.texture.dataSource[t.frame.sourceIndex]),e=e||this.defaultNormalMap,this.setTexture2D(e.glTexture,1),this.renderer.setPipeline(t.defaultPipeline))},setNormalMapRotation:function(t){var e,i,n,r;t===this.currentNormalMapRotation&&0!==this.batches.length||(0<this.batches.length&&this.flush(),e=this.inverseRotationMatrix,t?(i=-t,n=Math.cos(i),r=Math.sin(i),e[1]=r,e[3]=-r,e[0]=e[4]=n):(e[0]=e[4]=1,e[1]=e[3]=0),this.renderer.setMatrix3(this.program,"uInverseRotationMatrix",!1,e),this.currentNormalMapRotation=t)},batchSprite:function(t,e,i){var n;!this.active||(n=t.texture.dataSource[t.frame.sourceIndex])&&(this.renderer.setPipeline(this),this.setTexture2D(n.glTexture,1),this.setNormalMapRotation(t.rotation),s.prototype.batchSprite.call(this,t,e,i))}});o.LIGHT_COUNT=a,t.exports=o},function(t,e,i){var n=i(0),r=i(2),s=i(238),a=i(340),o=i(341),h=i(29),l=i(147),u=new n({Extends:l,Mixins:[s],initialize:function(t){var e=t.renderer.config;l.call(this,{game:t.game,renderer:t.renderer,gl:t.renderer.gl,topology:t.renderer.gl.TRIANGLE_STRIP,vertShader:r(t,"vertShader",o),fragShader:r(t,"fragShader",a),vertexCapacity:r(t,"vertexCapacity",6*e.batchSize),vertexSize:r(t,"vertexSize",5*Float32Array.BYTES_PER_ELEMENT+4*Uint8Array.BYTES_PER_ELEMENT),attributes:[{name:"inPosition",size:2,type:t.renderer.gl.FLOAT,normalized:!1,offset:0},{name:"inTexCoord",size:2,type:t.renderer.gl.FLOAT,normalized:!1,offset:2*Float32Array.BYTES_PER_ELEMENT},{name:"inTintEffect",size:1,type:t.renderer.gl.FLOAT,normalized:!1,offset:4*Float32Array.BYTES_PER_ELEMENT},{name:"inTint",size:4,type:t.renderer.gl.UNSIGNED_BYTE,normalized:!0,offset:5*Float32Array.BYTES_PER_ELEMENT}]}),this.vertexViewF32=new Float32Array(this.vertexData),this.vertexViewU32=new Uint32Array(this.vertexData),this.maxQuads=e.batchSize,this.batches=[],this._tempMatrix1=new h,this._tempMatrix2=new h,this._tempMatrix3=new h,this.mvpInit()},onBind:function(){return l.prototype.onBind.call(this),this.mvpUpdate(),this},resize:function(t,e,i){return l.prototype.resize.call(this,t,e,i),this.projOrtho(0,this.width,this.height,0,-1e3,1e3),this},setTexture2D:function(t,e){return void 0===t&&(t=this.renderer.blankTexture.glTexture),void 0===e&&(e=0),this.requireTextureBatch(t,e)&&this.pushBatch(t,e),this},requireTextureBatch:function(t,e){var i=this.batches,n=i.length;return!(0<n&&(0<e?i[n-1].textures[e-1]:i[n-1].texture)===t)},pushBatch:function(t,e){var i;0===e?this.batches.push({first:this.vertexCount,texture:t,textures:[]}):((i=[])[e-1]=t,this.batches.push({first:this.vertexCount,texture:null,textures:i}))},flush:function(){if(this.flushLocked)return this;this.flushLocked=!0;var t,e,i,n=this.gl,r=this.vertexCount,s=this.topology,a=this.vertexSize,o=this.renderer,h=this.batches,l=h.length,u=0,c=null;if(0===l||0===r)return this.flushLocked=!1,this;n.bufferSubData(n.ARRAY_BUFFER,0,this.bytes.subarray(0,r*a));for(var d=0;d<l-1;d++){if(c=h[d],t=h[d+1],0<c.textures.length){for(e=0;e<c.textures.length;++e)(i=c.textures[e])&&o.setTexture2D(i,1+e,!1);n.activeTexture(n.TEXTURE0)}u=t.first-c.first,null===c.texture||u<=0||(o.setTexture2D(c.texture,0,!1),n.drawArrays(s,c.first,u))}if(0<(c=h[l-1]).textures.length){for(e=0;e<c.textures.length;++e)(i=c.textures[e])&&o.setTexture2D(i,1+e,!1);n.activeTexture(n.TEXTURE0)}return u=r-c.first,c.texture&&0<u&&(o.setTexture2D(c.texture,0,!1),n.drawArrays(s,c.first,u)),this.vertexCount=0,h.length=0,this.flushLocked=!1,this}});t.exports=u},,,,,function(t,e){var i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){i(519),i(520),i(521),i(522),i(523),i(524),i(525),i(526)},function(t,e){Array.prototype.forEach||(Array.prototype.forEach=function(t){"use strict";if(null==this)throw new TypeError;var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var n=2<=arguments.length?arguments[1]:void 0,r=0;r<i;r++)r in e&&t.call(n,e[r],r,e)})},function(t,e){Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)})},function(t,e){function i(t){t&&(t.setTargetAtTime||(t.setTargetAtTime=t.setTargetValueAtTime))}window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext,AudioContext.prototype.hasOwnProperty("createGain")||(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),AudioContext.prototype.hasOwnProperty("createDelay")||(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),AudioContext.prototype.hasOwnProperty("createScriptProcessor")||(AudioContext.prototype.createScriptProcessor=AudioContext.prototype.createJavaScriptNode),AudioContext.prototype.hasOwnProperty("createPeriodicWave")||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable),AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain,AudioContext.prototype.createGain=function(){var t=this.internal_createGain();return i(t.gain),t},AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay,AudioContext.prototype.createDelay=function(t){var e=t?this.internal_createDelay(t):this.internal_createDelay();return i(e.delayTime),e},AudioContext.prototype.internal_createBufferSource=AudioContext.prototype.createBufferSource,AudioContext.prototype.createBufferSource=function(){var t=this.internal_createBufferSource();return t.start?(t.internal_start=t.start,t.start=function(e,i,n){void 0!==n?t.internal_start(e||0,i,n):t.internal_start(e||0,i||0)}):t.start=function(t,e,i){e||i?this.noteGrainOn(t||0,e,i):this.noteOn(t||0)},t.stop?(t.internal_stop=t.stop,t.stop=function(e){t.internal_stop(e||0)}):t.stop=function(t){this.noteOff(t||0)},i(t.playbackRate),t},AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor,AudioContext.prototype.createDynamicsCompressor=function(){var t=this.internal_createDynamicsCompressor();return i(t.threshold),i(t.knee),i(t.ratio),i(t.reduction),i(t.attack),i(t.release),t},AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter,AudioContext.prototype.createBiquadFilter=function(){var t=this.internal_createBiquadFilter();return i(t.frequency),i(t.detune),i(t.Q),i(t.gain),t},AudioContext.prototype.hasOwnProperty("createOscillator")&&(AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator,AudioContext.prototype.createOscillator=function(){var t=this.internal_createOscillator();return t.start?(t.internal_start=t.start,t.start=function(e){t.internal_start(e||0)}):t.start=function(t){this.noteOn(t||0)},t.stop?(t.internal_stop=t.stop,t.stop=function(e){t.internal_stop(e||0)}):t.stop=function(t){this.noteOff(t||0)},t.setPeriodicWave||(t.setPeriodicWave=t.setWaveTable),i(t.frequency),i(t.detune),t})),window.hasOwnProperty("webkitOfflineAudioContext")&&!window.hasOwnProperty("OfflineAudioContext")&&(window.OfflineAudioContext=webkitOfflineAudioContext)},function(t,e){window.console||(window.console={},window.console.log=window.console.assert=function(){},window.console.warn=window.console.assert=function(){})},function(t,e){Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)})},function(t,e){var i;"performance"in window==0&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==0&&(i=Date.now(),performance.timing&&performance.timing.navigationStart&&(i=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-i})},function(t,e){for(var i=Date.now(),n=["ms","moz","webkit","o"],r=0;r<n.length&&!window.requestAnimationFrame;r++)window.requestAnimationFrame=window[n[r]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[r]+"CancelAnimationFrame"]||window[n[r]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),n=16+i-e;return n<0&&(n=0),i=e,setTimeout((function(){i=Date.now(),t(performance.now())}),n)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})},function(t,e){var i;"function"!=typeof window.Uint32Array&&"object"!=typeof window.Uint32Array&&((i=function(t){var e=new Array;window[t]=function(t){if("number"==typeof t){Array.call(this,t),this.length=t;for(var e=0;e<this.length;e++)this[e]=0}else for(Array.call(this,t.length),this.length=t.length,e=0;e<this.length;e++)this[e]=t[e]},window[t].prototype=e,window[t].constructor=window[t]})("Float32Array"),i("Uint32Array"),i("Uint16Array"),i("Int16Array"),i("ArrayBuffer"))},function(t,e,i){var n=i(242);t.exports=function(t,e,i,r){for(var s=t[0],a=1;a<t.length;a++){var o=t[a];n(o,s,e,i,r),s=o}return t}},function(t,e,i){var n=i(38);t.exports=function(t,e,i,r,s){return n(t,"angle",e,i,r,s)}},function(t,e){t.exports=function(t,e,i){for(var n=0;n<t.length;n++){var r=t[n];e.call(i,r)}return t}},function(t,e){t.exports=function(t,e,i){void 0===i&&(i=0);for(var n=i;n<t.length;n++){var r=t[n],s=!0;for(var a in e)r[a]!==e[a]&&(s=!1);if(s)return r}return null}},function(t,e){t.exports=function(t,e,i){void 0===i&&(i=0);for(var n=i;n<t.length;n++){var r=t[n],s=!0;for(var a in e)r[a]!==e[a]&&(s=!1);if(s)return r}return null}},function(t,e,i){var n=i(255),r=i(105),s=i(2),a=i(1),o=new(i(110))({sys:{queueDepthSort:a,events:{once:a}}},0,0,1,1);t.exports=function(t,e){void 0===e&&(e={});var i=e.hasOwnProperty("width"),a=e.hasOwnProperty("height"),h=s(e,"width",-1),l=s(e,"height",-1),u=s(e,"cellWidth",1),c=s(e,"cellHeight",u),d=s(e,"position",r.TOP_LEFT),f=s(e,"x",0),p=s(e,"y",0),g=0,m=0,y=h*u,v=l*c;o.setPosition(f,p),o.setSize(u,c);for(var _=0;_<t.length;_++)if(n(t[_],o,d),i&&-1===h)o.x+=u;else if(a&&-1===l)o.y+=c;else if(g+=u,o.x+=u,g===y&&(g=0,m+=c,o.x=f,o.y+=c,m===v))break;return t}},function(t,e,i){var n=i(19),r={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t,e,i,r){return void 0===t&&(t=1),void 0===e?this.alpha=t:(this._alphaTL=n(t,0,1),this._alphaTR=n(e,0,1),this._alphaBL=n(i,0,1),this._alphaBR=n(r,0,1)),this},alpha:{get:function(){return this._alpha},set:function(t){var e=n(t,0,1);this._alpha=e,this._alphaTL=e,this._alphaTR=e,this._alphaBL=e,0===(this._alphaBR=e)?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(t){var e=n(t,0,1);0!==(this._alphaTL=e)&&(this.renderFlags|=2)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(t){var e=n(t,0,1);0!==(this._alphaTR=e)&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(t){var e=n(t,0,1);0!==(this._alphaBL=e)&&(this.renderFlags|=2)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(t){var e=n(t,0,1);0!==(this._alphaBR=e)&&(this.renderFlags|=2)}}};t.exports=r},function(t,e){t.exports="add"},function(t,e){t.exports="complete"},function(t,e){t.exports="repeat"},function(t,e){t.exports="restart"},function(t,e){t.exports="start"},function(t,e){t.exports="pauseall"},function(t,e){t.exports="remove"},function(t,e){t.exports="resumeall"},function(t,e){t.exports="animationcomplete"},function(t,e){t.exports="animationcomplete-"},function(t,e){t.exports="animationrepeat-"},function(t,e){t.exports="animationrestart-"},function(t,e){t.exports="animationstart-"},function(t,e){t.exports="animationupdate-"},function(t,e){t.exports="animationrepeat"},function(t,e){t.exports="animationrestart"},function(t,e){t.exports="animationstart"},function(t,e){t.exports="animationupdate"},function(t,e){t.exports={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this}}},function(t,e){t.exports={texture:null,frame:null,isCropped:!1,setCrop:function(t,e,i,n){return void 0===t?this.isCropped=!1:this.frame&&("number"==typeof t?this.frame.setCropUVs(this._crop,t,e,i,n,this.flipX,this.flipY):this.frame.setCropUVs(this._crop,t.x,t.y,t.width,t.height,this.flipX,this.flipY),this.isCropped=!0),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},function(t,e){t.exports={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,e){return this.flipX=t,this.flipY=e,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}}},function(t,e,i){var n=i(11),r=i(276),s=i(3),a={prepareBoundsOutput:function(t,e){return void 0===e&&(e=!1),0!==this.rotation&&r(t,this.x,this.y,this.rotation),e&&this.parentContainer&&this.parentContainer.getBoundsTransformMatrix().transformPoint(t.x,t.y,t),t},getCenter:function(t){return void 0===t&&(t=new s),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,t},getTopLeft:function(t,e){return(t=t||new s).x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getTopCenter:function(t,e){return(t=t||new s).x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getTopRight:function(t,e){return(t=t||new s).x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getLeftCenter:function(t,e){return(t=t||new s).x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getRightCenter:function(t,e){return(t=t||new s).x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getBottomLeft:function(t,e){return(t=t||new s).x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBottomCenter:function(t,e){return(t=t||new s).x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBottomRight:function(t,e){return(t=t||new s).x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBounds:function(t){var e,i,r,s,a,o,h,l,u;return void 0===t&&(t=new n),this.parentContainer?(u=this.parentContainer.getBoundsTransformMatrix(),this.getTopLeft(t),u.transformPoint(t.x,t.y,t),e=t.x,i=t.y,this.getTopRight(t),u.transformPoint(t.x,t.y,t),r=t.x,s=t.y,this.getBottomLeft(t),u.transformPoint(t.x,t.y,t),a=t.x,o=t.y,this.getBottomRight(t),u.transformPoint(t.x,t.y,t)):(this.getTopLeft(t),e=t.x,i=t.y,this.getTopRight(t),r=t.x,s=t.y,this.getBottomLeft(t),a=t.x,o=t.y,this.getBottomRight(t)),h=t.x,l=t.y,t.x=Math.min(e,r,a,h),t.y=Math.min(i,s,o,l),t.width=Math.max(e,r,a,h)-t.x,t.height=Math.max(i,s,o,l)-t.y,t}};t.exports=a},function(t,e){t.exports="blur"},function(t,e){t.exports="boot"},function(t,e){t.exports="contextlost"},function(t,e){t.exports="contextrestored"},function(t,e){t.exports="destroy"},function(t,e){t.exports="focus"},function(t,e){t.exports="hidden"},function(t,e){t.exports="pause"},function(t,e){t.exports="postrender"},function(t,e){t.exports="poststep"},function(t,e){t.exports="prerender"},function(t,e){t.exports="prestep"},function(t,e){t.exports="ready"},function(t,e){t.exports="resume"},function(t,e){t.exports="step"},function(t,e){t.exports="visible"},function(t,e){t.exports={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(t){this._displayOriginX=t,this.originX=t/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(t){this._displayOriginY=t,this.originY=t/this.height}},setOrigin:function(t,e){return void 0===t&&(t=.5),void 0===e&&(e=t),this.originX=t,this.originY=e,this.updateDisplayOrigin()},setOriginFromFrame:function(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.displayOriginX=t,this.displayOriginY=e,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}}},function(t,e,i){var n=i(39),r=i(88),s=i(6),a=i(89),o=i(3),h={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:a.PLAYING_FORWARD,setPath:function(t,e){void 0===e&&(e=this.pathConfig);var i=this.pathTween;return i&&i.isPlaying()&&i.stop(),this.path=t,e&&this.startFollow(e),this},setRotateToPath:function(t,e){return void 0===e&&(e=0),this.rotateToPath=t,this.pathRotationOffset=e,this},isFollowing:function(){var t=this.pathTween;return t&&t.isPlaying()},startFollow:function(t,e){void 0===t&&(t={}),void 0===e&&(e=0);var i=this.pathTween;i&&i.isPlaying()&&i.stop(),"number"==typeof t&&(t={duration:t}),t.from=s(t,"from",0),t.to=s(t,"to",1);var h=r(t,"positionOnPath",!1);this.rotateToPath=r(t,"rotateToPath",!1),this.pathRotationOffset=s(t,"rotationOffset",0);var l,u=s(t,"startAt",e);return u&&(t.onStart=function(t){var e=t.data[0];e.progress=u,e.elapsed=e.duration*u;var i=e.ease(e.progress);e.current=e.start+(e.end-e.start)*i,e.target[e.key]=e.current}),this.pathOffset||(this.pathOffset=new o(this.x,this.y)),this.pathVector||(this.pathVector=new o),this.pathDelta||(this.pathDelta=new o),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(t),this.path.getStartPoint(this.pathOffset),h&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=a.PLAYING_FORWARD,this.rotateToPath&&(l=this.path.getPoint(.1),this.rotation=Math.atan2(l.y-this.y,l.x-this.x)+n(this.pathRotationOffset)),this.pathConfig=t,this},pauseFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.pause(),this},resumeFollow:function(){var t=this.pathTween;return t&&t.isPaused()&&t.resume(),this},stopFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.stop(),this},pathUpdate:function(){var t=this.pathTween;if(t){var e=t.data[0],i=this.pathDelta,r=this.pathVector;if(i.copy(r).negate(),e.state===a.COMPLETE)return this.path.getPoint(1,r),i.add(r),r.add(this.pathOffset),void this.setPosition(r.x,r.y);if(e.state!==a.PLAYING_FORWARD&&e.state!==a.PLAYING_BACKWARD)return;this.path.getPoint(t.getValue(),r),i.add(r),r.add(this.pathOffset);var s=this.x,o=this.y;this.setPosition(r.x,r.y);var h=this.x-s,l=this.y-o;if(0==h&&0==l)return;if(e.state!==this._prevDirection)return void(this._prevDirection=e.state);this.rotateToPath&&(this.rotation=Math.atan2(l,h)+n(this.pathRotationOffset))}}};t.exports=h},function(t,e){var i={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function(t){return void 0===t&&(t=this.frame),this.width=t.realWidth,this.height=t.realHeight,this},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this}};t.exports=i},function(t,e){t.exports={texture:null,frame:null,isCropped:!1,setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t,e,i){return void 0===e&&(e=!0),void 0===i&&(i=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&e&&this.setSizeToFrame(),this._originComponent&&i&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}}},function(t,e){t.exports={texture:null,frame:null,isCropped:!1,setCrop:function(t,e,i,n){return void 0===t?this.isCropped=!1:this.frame&&("number"==typeof t?this.frame.setCropUVs(this._crop,t,e,i,n,this.flipX,this.flipY):this.frame.setCropUVs(this._crop,t.x,t.y,t.width,t.height,this.flipX,this.flipY),this.isCropped=!0),this},setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t,e,i){return void 0===e&&(e=!0),void 0===i&&(i=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&e&&this.setSizeToFrame(),this._originComponent&&i&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},function(t,e){function i(t){return(t>>16)+(65280&t)+((255&t)<<16)}var n={_tintTL:16777215,_tintTR:16777215,_tintBL:16777215,_tintBR:16777215,_isTinted:!1,tintFill:!1,clearTint:function(){return this.setTint(16777215),this._isTinted=!1,this},setTint:function(t,e,n,r){return void 0===t&&(t=16777215),void 0===e&&(r=n=e=t),this._tintTL=i(t),this._tintTR=i(e),this._tintBL=i(n),this._tintBR=i(r),this._isTinted=!0,this.tintFill=!1,this},setTintFill:function(t,e,i,n){return this.setTint(t,e,i,n),this.tintFill=!0,this},tintTopLeft:{get:function(){return this._tintTL},set:function(t){this._tintTL=i(t),this._isTinted=!0}},tintTopRight:{get:function(){return this._tintTR},set:function(t){this._tintTR=i(t),this._isTinted=!0}},tintBottomLeft:{get:function(){return this._tintBL},set:function(t){this._tintBL=i(t),this._isTinted=!0}},tintBottomRight:{get:function(){return this._tintBR},set:function(t){this._tintBR=i(t),this._isTinted=!0}},tint:{set:function(t){this.setTint(t,t,t,t)}},isTinted:{get:function(){return this._isTinted}}};t.exports=n},function(t,e){t.exports="changedata"},function(t,e){t.exports="changedata-"},function(t,e){t.exports="removedata"},function(t,e){t.exports="setdata"},function(t,e){t.exports="destroy"},function(t,e){t.exports="complete"},function(t,e){t.exports="created"},function(t,e){t.exports="error"},function(t,e){t.exports="loop"},function(t,e){t.exports="play"},function(t,e){t.exports="seeked"},function(t,e){t.exports="seeking"},function(t,e){t.exports="stop"},function(t,e){t.exports="timeout"},function(t,e){t.exports="unlocked"},function(t,e,i){var n=i(38);t.exports=function(t,e,i,r,s){return n(t,"alpha",e,i,r,s)}},function(t,e,i){var n=i(38);t.exports=function(t,e,i,r,s){return n(t,"x",e,i,r,s)}},function(t,e,i){var n=i(38);t.exports=function(t,e,i,r,s,a,o){return null==i&&(i=e),n(t,"x",e,r,a,o),n(t,"y",i,s,a,o)}},function(t,e,i){var n=i(38);t.exports=function(t,e,i,r,s){return n(t,"y",e,i,r,s)}},function(t,e){t.exports=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=6.28);for(var r=i,s=(n-i)/t.length,a=0;a<t.length;a++)t[a].x=e.x+e.radius*Math.cos(r),t[a].y=e.y+e.radius*Math.sin(r),r+=s;return t}},function(t,e){t.exports=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=6.28);for(var r=i,s=(n-i)/t.length,a=e.width/2,o=e.height/2,h=0;h<t.length;h++)t[h].x=e.x+a*Math.cos(r),t[h].y=e.y+o*Math.sin(r),r+=s;return t}},function(t,e,i){var n=i(153);t.exports=function(t,e){for(var i=n(e,t.length),r=0;r<t.length;r++){var s=t[r],a=i[r];s.x=a.x,s.y=a.y}return t}},function(t,e,i){var n=i(285),r=i(286),s=i(287);t.exports=function(t,e,i){void 0===i&&(i=0);var a=n(e,!1,t.length);0<i?r(a,i):i<0&&s(a,Math.abs(i));for(var o=0;o<t.length;o++)t[o].x=a[o].x,t[o].y=a[o].y;return t}},function(t,e,i){var n=i(288);t.exports=function(t,e,i){var r=n({x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2},i),s=n({x1:e.x2,y1:e.y2,x2:e.x3,y2:e.y3},i),a=n({x1:e.x3,y1:e.y3,x2:e.x1,y2:e.y1},i);r.pop(),s.pop(),a.pop();for(var o=(r=r.concat(s,a)).length/t.length,h=0,l=0;l<t.length;l++){var u=t[l],c=r[Math.floor(h)];u.x=c.x,u.y=c.y,h+=o}return t}},function(t,e){t.exports=function(t,e,i){for(var n=0;n<t.length;n++)t[n].anims.play(e,i);return t}},function(t,e,i){var n=i(150);t.exports=function(t,e){for(var i=0;i<t.length;i++)n(e,t[i]);return t}},function(t,e,i){var n=i(157);t.exports=function(t,e){for(var i=0;i<t.length;i++)n(e,t[i]);return t}},function(t,e,i){var n=i(154);t.exports=function(t,e){for(var i=0;i<t.length;i++)n(e,t[i]);return t}},function(t,e,i){var n=i(155);t.exports=function(t,e){for(var i=0;i<t.length;i++)n(e,t[i]);return t}},function(t,e,i){var n=i(158);t.exports=function(t,e){for(var i=0;i<t.length;i++)n(e,t[i]);return t}},function(t,e,i){var n=i(38);t.exports=function(t,e,i,r,s){return n(t,"rotation",e,i,r,s)}},function(t,e,i){var n=i(159),r=i(53);t.exports=function(t,e,i){for(var s=e.x,a=e.y,o=0;o<t.length;o++){var h=t[o];n(h,s,a,i,Math.max(1,r(h.x,h.y,s,a)))}return t}},function(t,e,i){var n=i(159);t.exports=function(t,e,i,r){var s=e.x,a=e.y;if(0===r)return t;for(var o=0;o<t.length;o++)n(t[o],s,a,i,r);return t}},function(t,e,i){var n=i(38);t.exports=function(t,e,i,r,s){return n(t,"scaleX",e,i,r,s)}},function(t,e,i){var n=i(38);t.exports=function(t,e,i,r,s,a,o){return null==i&&(i=e),n(t,"scaleX",e,r,a,o),n(t,"scaleY",i,s,a,o)}},function(t,e,i){var n=i(38);t.exports=function(t,e,i,r,s){return n(t,"scaleY",e,i,r,s)}},function(t,e,i){var n=i(25);t.exports=function(t,e,i,r,s){return n(t,"alpha",e,i,r,s)}},function(t,e,i){var n=i(25);t.exports=function(t,e,i,r){return n(t,"blendMode",e,0,i,r)}},function(t,e,i){var n=i(25);t.exports=function(t,e,i,r,s){return n(t,"depth",e,i,r,s)}},function(t,e){t.exports=function(t,e,i){for(var n=0;n<t.length;n++)t[n].setInteractive(e,i);return t}},function(t,e,i){var n=i(25);t.exports=function(t,e,i,r,s,a,o){return null==i&&(i=e),n(t,"originX",e,r,a,o),n(t,"originY",i,s,a,o)}},function(t,e,i){var n=i(25);t.exports=function(t,e,i,r,s){return n(t,"rotation",e,i,r,s)}},function(t,e,i){var n=i(25);t.exports=function(t,e,i,r,s,a,o){return null==i&&(i=e),n(t,"scaleX",e,r,a,o),n(t,"scaleY",i,s,a,o)}},function(t,e,i){var n=i(25);t.exports=function(t,e,i,r,s){return n(t,"scaleX",e,i,r,s)}},function(t,e,i){var n=i(25);t.exports=function(t,e,i,r,s){return n(t,"scaleY",e,i,r,s)}},function(t,e,i){var n=i(25);t.exports=function(t,e,i,r,s,a,o){return null==i&&(i=e),n(t,"scrollFactorX",e,r,a,o),n(t,"scrollFactorY",i,s,a,o)}},function(t,e,i){var n=i(25);t.exports=function(t,e,i,r,s){return n(t,"scrollFactorX",e,i,r,s)}},function(t,e,i){var n=i(25);t.exports=function(t,e,i,r,s){return n(t,"scrollFactorY",e,i,r,s)}},function(t,e){t.exports=function(t,e,i,n,r){for(var s=0;s<t.length;s++)t[s].setTint(e,i,n,r);return t}},function(t,e,i){var n=i(25);t.exports=function(t,e,i,r){return n(t,"visible",e,0,i,r)}},function(t,e,i){var n=i(25);t.exports=function(t,e,i,r,s){return n(t,"x",e,i,r,s)}},function(t,e,i){var n=i(25);t.exports=function(t,e,i,r,s,a,o){return null==i&&(i=e),n(t,"x",e,r,a,o),n(t,"y",i,s,a,o)}},function(t,e,i){var n=i(25);t.exports=function(t,e,i,r,s){return n(t,"y",e,i,r,s)}},function(t,e,i){var n=i(3);t.exports=function(t,e,i,r,s){var a,o,h;if(void 0===r&&(r=0),void 0===s&&(s=new n),1<t.length)if(0===r){for(var l=t.length-1,u=t[l].x,c=t[l].y,d=l-1;0<=d;d--)a=(h=t[d]).x,o=h.y,h.x=u,h.y=c,u=a,c=o;t[l].x=e,t[l].y=i}else{for(u=t[0].x,c=t[0].y,d=1;d<t.length;d++)a=(h=t[d]).x,o=h.y,h.x=u,h.y=c,u=a,c=o;t[0].x=e,t[0].y=i}else u=t[0].x,c=t[0].y,t[0].x=e,t[0].y=i;return s.x=u,s.y=c,s}},function(t,e,i){var n=i(114);t.exports=function(t){return n(t)}},function(t,e,i){var n=i(160);t.exports=function(t,e,i,r,s){void 0===s&&(s=!1);var a,o=Math.abs(r-i)/t.length;if(s)for(a=0;a<t.length;a++)t[a][e]+=n(a*o,i,r);else for(a=0;a<t.length;a++)t[a][e]=n(a*o,i,r);return t}},function(t,e,i){var n=i(161);t.exports=function(t,e,i,r,s){void 0===s&&(s=!1);var a,o=Math.abs(r-i)/t.length;if(s)for(a=0;a<t.length;a++)t[a][e]+=n(a*o,i,r);else for(a=0;a<t.length;a++)t[a][e]=n(a*o,i,r);return t}},function(t,e){t.exports=function(t,e,i,n,r){void 0===r&&(r=!1);var s,a=Math.abs(n-i)/t.length;if(r)for(s=0;s<t.length;s++)t[s][e]+=s*a+i;else for(s=0;s<t.length;s++)t[s][e]=s*a+i;return t}},function(t,e){t.exports=function(t){for(var e=0;e<t.length;e++)t[e].visible=!t[e].visible;return t}},function(t,e,i){var n=i(58);t.exports=function(t,e,i){void 0===i&&(i=0);for(var r=0;r<t.length;r++){var s=t[r];s.x=n(s.x,e.left-i,e.right+i),s.y=n(s.y,e.top-i,e.bottom+i)}return t}},function(t,e,i){t.exports={Animation:i(151),AnimationFrame:i(271),AnimationManager:i(289),Events:i(111)}},function(t,e,i){t.exports={BaseCache:i(290),CacheManager:i(292),Events:i(291)}},function(t,e){t.exports="add"},function(t,e){t.exports="remove"},function(t,e,i){t.exports={Controls:i(643),Scene2D:i(646)}},function(t,e,i){t.exports={FixedKeyControl:i(644),SmoothedKeyControl:i(645)}},function(t,e,i){var n=i(0),r=i(6),s=new n({initialize:function(t){this.camera=r(t,"camera",null),this.left=r(t,"left",null),this.right=r(t,"right",null),this.up=r(t,"up",null),this.down=r(t,"down",null),this.zoomIn=r(t,"zoomIn",null),this.zoomOut=r(t,"zoomOut",null),this.zoomSpeed=r(t,"zoomSpeed",.01),this.speedX=0,this.speedY=0;var e=r(t,"speed",null);"number"==typeof e?(this.speedX=e,this.speedY=e):(this.speedX=r(t,"speed.x",0),this.speedY=r(t,"speed.y",0)),this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(t){return this.camera=t,this},update:function(t){var e;this.active&&(void 0===t&&(t=1),e=this.camera,this.up&&this.up.isDown?e.scrollY-=this.speedY*t|0:this.down&&this.down.isDown&&(e.scrollY+=this.speedY*t|0),this.left&&this.left.isDown?e.scrollX-=this.speedX*t|0:this.right&&this.right.isDown&&(e.scrollX+=this.speedX*t|0),this.zoomIn&&this.zoomIn.isDown?(e.zoom-=this.zoomSpeed,e.zoom<.1&&(e.zoom=.1)):this.zoomOut&&this.zoomOut.isDown&&(e.zoom+=this.zoomSpeed))},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});t.exports=s},function(t,e,i){var n=i(0),r=i(6),s=new n({initialize:function(t){this.camera=r(t,"camera",null),this.left=r(t,"left",null),this.right=r(t,"right",null),this.up=r(t,"up",null),this.down=r(t,"down",null),this.zoomIn=r(t,"zoomIn",null),this.zoomOut=r(t,"zoomOut",null),this.zoomSpeed=r(t,"zoomSpeed",.01),this.accelX=0,this.accelY=0;var e=r(t,"acceleration",null);"number"==typeof e?(this.accelX=e,this.accelY=e):(this.accelX=r(t,"acceleration.x",0),this.accelY=r(t,"acceleration.y",0)),this.dragX=0,this.dragY=0;var i=r(t,"drag",null);"number"==typeof i?(this.dragX=i,this.dragY=i):(this.dragX=r(t,"drag.x",0),this.dragY=r(t,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var n=r(t,"maxSpeed",null);"number"==typeof n?(this.maxSpeedX=n,this.maxSpeedY=n):(this.maxSpeedX=r(t,"maxSpeed.x",0),this.maxSpeedY=r(t,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(t){return this.camera=t,this},update:function(t){var e;this.active&&(void 0===t&&(t=1),e=this.camera,0<this._speedX?(this._speedX-=this.dragX*t,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*t,0<this._speedX&&(this._speedX=0)),0<this._speedY?(this._speedY-=this.dragY*t,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*t,0<this._speedY&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,0!==this._speedX&&(e.scrollX-=this._speedX*t|0),0!==this._speedY&&(e.scrollY-=this._speedY*t|0),0!==this._zoom&&(e.zoom+=this._zoom,e.zoom<.001&&(e.zoom=.001)))},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});t.exports=s},function(t,e,i){t.exports={Camera:i(293),BaseCamera:i(91),CameraManager:i(702),Effects:i(301),Events:i(40)}},function(t,e){t.exports="cameradestroy"},function(t,e){t.exports="camerafadeincomplete"},function(t,e){t.exports="camerafadeinstart"},function(t,e){t.exports="camerafadeoutcomplete"},function(t,e){t.exports="camerafadeoutstart"},function(t,e){t.exports="cameraflashcomplete"},function(t,e){t.exports="cameraflashstart"},function(t,e){t.exports="camerapancomplete"},function(t,e){t.exports="camerapanstart"},function(t,e){t.exports="postrender"},function(t,e){t.exports="prerender"},function(t,e){t.exports="camerarotatecomplete"},function(t,e){t.exports="camerarotatestart"},function(t,e){t.exports="camerashakecomplete"},function(t,e){t.exports="camerashakestart"},function(t,e){t.exports="camerazoomcomplete"},function(t,e){t.exports="camerazoomstart"},function(t,e,i){var n=i(19),r=i(0),s=i(40),a=new r({initialize:function(t){this.camera=t,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,i,n,r,a,o,h){if(void 0===t&&(t=!0),void 0===e&&(e=1e3),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===a&&(a=!1),void 0===o&&(o=null),void 0===h&&(h=this.camera.scene),!a&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=e,this.direction=t,this.progress=0,this.red=i,this.green=n,this.blue=r,this.alpha=t?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=o,this._onUpdateScope=h;var l=t?s.FADE_OUT_START:s.FADE_IN_START;return this.camera.emit(l,this.camera,this,e,i,n,r),this.camera},update:function(t,e){this.isRunning&&(this._elapsed+=e,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(t){if(!this.isRunning&&!this.isComplete)return!1;var e=this.camera;return t.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",t.fillRect(e._cx,e._cy,e._cw,e._ch),!0},postRenderWebGL:function(t,e){if(!this.isRunning&&!this.isComplete)return!1;var i=this.camera,n=this.red/255,r=this.blue/255,s=this.green/255;return t.drawFillRect(i._cx,i._cy,i._cw,i._ch,e(n,s,r,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var t=this.direction?s.FADE_OUT_COMPLETE:s.FADE_IN_COMPLETE;this.camera.emit(t,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=a},function(t,e,i){var n=i(19),r=i(0),s=i(40),a=new r({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,i,n,r,a,o){return void 0===t&&(t=250),void 0===e&&(e=255),void 0===i&&(i=255),void 0===n&&(n=255),void 0===r&&(r=!1),void 0===a&&(a=null),void 0===o&&(o=this.camera.scene),!r&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,this.red=e,this.green=i,this.blue=n,this.alpha=1,this._elapsed=0,this._onUpdate=a,this._onUpdateScope=o,this.camera.emit(s.FLASH_START,this.camera,this,t,e,i,n)),this.camera},update:function(t,e){this.isRunning&&(this._elapsed+=e,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(t){if(!this.isRunning)return!1;var e=this.camera;return t.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",t.fillRect(e._cx,e._cy,e._cw,e._ch),!0},postRenderWebGL:function(t,e){if(!this.isRunning)return!1;var i=this.camera,n=this.red/255,r=this.blue/255,s=this.green/255;return t.drawFillRect(i._cx,i._cy,i._cw,i._ch,e(n,s,r,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=a},function(t,e,i){var n=i(19),r=i(0),s=i(115),a=i(40),o=i(3),h=new r({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=new o,this.current=new o,this.destination=new o,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,i,n,r,o,h){void 0===i&&(i=1e3),void 0===n&&(n=s.Linear),void 0===r&&(r=!1),void 0===o&&(o=null),void 0===h&&(h=this.camera.scene);var l=this.camera;return!r&&this.isRunning||(this.isRunning=!0,this.duration=i,this.progress=0,this.source.set(l.scrollX,l.scrollY),this.destination.set(t,e),l.getScroll(t,e,this.current),"string"==typeof n&&s.hasOwnProperty(n)?this.ease=s[n]:"function"==typeof n&&(this.ease=n),this._elapsed=0,this._onUpdate=o,this._onUpdateScope=h,this.camera.emit(a.PAN_START,this.camera,this,i,t,e)),l},update:function(t,e){var i,r,s,a,o;this.isRunning&&(this._elapsed+=e,i=n(this._elapsed/this.duration,0,1),this.progress=i,r=this.camera,this._elapsed<this.duration?(s=this.ease(i),r.getScroll(this.destination.x,this.destination.y,this.current),a=this.source.x+(this.current.x-this.source.x)*s,o=this.source.y+(this.current.y-this.source.y)*s,r.setScroll(a,o),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,r,i,a,o)):(r.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,r,i,r.scrollX,r.scrollY),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});t.exports=h},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1.70158),t*t*((e+1)*t-e)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1.70158),--t*t*((e+1)*t+e)+1}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1.70158);var i=1.525*e;return(t*=2)<1?t*t*((1+i)*t-i)*.5:.5*((t-=2)*t*((1+i)*t+i)+2)}},function(t,e){t.exports=function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}},function(t,e){t.exports=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},function(t,e){t.exports=function(t){var e=!1;return t<.5?(t=1-2*t,e=!0):t=2*t-1,t<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5}},function(t,e){t.exports=function(t){return 1-Math.sqrt(1-t*t)}},function(t,e){t.exports=function(t){return Math.sqrt(1- --t*t)}},function(t,e){t.exports=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},function(t,e){t.exports=function(t){return t*t*t}},function(t,e){t.exports=function(t){return--t*t*t+1}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},function(t,e){t.exports=function(t,e,i){if(void 0===e&&(e=.1),void 0===i&&(i=.1),0===t)return 0;if(1===t)return 1;var n=i/4;return e<1?e=1:n=i*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*--t)*Math.sin((t-n)*(2*Math.PI)/i)}},function(t,e){t.exports=function(t,e,i){if(void 0===e&&(e=.1),void 0===i&&(i=.1),0===t)return 0;if(1===t)return 1;var n=i/4;return e<1?e=1:n=i*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-n)*(2*Math.PI)/i)+1}},function(t,e){t.exports=function(t,e,i){if(void 0===e&&(e=.1),void 0===i&&(i=.1),0===t)return 0;if(1===t)return 1;var n=i/4;return e<1?e=1:n=i*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*--t)*Math.sin((t-n)*(2*Math.PI)/i)*-.5:e*Math.pow(2,-10*--t)*Math.sin((t-n)*(2*Math.PI)/i)*.5+1}},function(t,e){t.exports=function(t){return Math.pow(2,10*(t-1))-.001}},function(t,e){t.exports=function(t){return 1-Math.pow(2,-10*t)}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}},function(t,e){t.exports=function(t){return t}},function(t,e){t.exports=function(t){return t*t}},function(t,e){t.exports=function(t){return t*(2-t)}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},function(t,e){t.exports=function(t){return t*t*t*t}},function(t,e){t.exports=function(t){return 1- --t*t*t*t}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},function(t,e){t.exports=function(t){return t*t*t*t*t}},function(t,e){t.exports=function(t){return--t*t*t*t*t+1}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},function(t,e){t.exports=function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)}},function(t,e){t.exports=function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)}},function(t,e){t.exports=function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1),t<=0?0:1<=t?1:1/e*(1+(e*t|0))}},function(t,e,i){var n=i(19),r=i(0),s=i(40),a=i(3),o=new r({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.intensity=new a,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(t,e,i,n,r){return void 0===t&&(t=100),void 0===e&&(e=.05),void 0===i&&(i=!1),void 0===n&&(n=null),void 0===r&&(r=this.camera.scene),!i&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,"number"==typeof e?this.intensity.set(e):this.intensity.set(e.x,e.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=n,this._onUpdateScope=r,this.camera.emit(s.SHAKE_START,this.camera,this,t,e)),this.camera},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(t,e){var i,r,s,a;this.isRunning&&(this._elapsed+=e,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?(i=this.intensity,r=this.camera._cw,s=this.camera._ch,a=this.camera.zoom,this._offsetX=(Math.random()*i.x*r*2-i.x*r)*a,this._offsetY=(Math.random()*i.y*s*2-i.y*s)*a,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))):this.effectComplete())},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});t.exports=o},function(t,e,i){var n=i(19),r=i(0),s=i(40),a=i(115),o=new r({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(t,e,i,n,r,o,h){void 0===i&&(i=1e3),void 0===n&&(n=a.Linear),void 0===r&&(r=!1),void 0===o&&(o=null),void 0===h&&(h=this.camera.scene),void 0===e&&(e=!1),this.shortestPath=e;var l=t;t<0?(l=-1*t,this.clockwise=!1):this.clockwise=!0;var u=360*Math.PI/180;l-=Math.floor(l/u)*u;var c,d,f=this.camera;return!r&&this.isRunning||(this.isRunning=!0,this.duration=i,this.progress=0,this.source=f.rotation,this.destination=l,"string"==typeof n&&a.hasOwnProperty(n)?this.ease=a[n]:"function"==typeof n&&(this.ease=n),this._elapsed=0,this._onUpdate=o,this._onUpdateScope=h,this.shortestPath&&((c=this.destination>this.source?Math.abs(this.destination-this.source):Math.abs(this.destination+u)-this.source)<(d=this.source>this.destination?Math.abs(this.source-this.destination):Math.abs(this.source+u)-this.destination)?this.clockwise=!0:d<c&&(this.clockwise=!1)),this.camera.emit(s.ROTATE_START,this.camera,this,i,l)),f},update:function(t,e){var i,r,s,a,o,h,l,u;this.isRunning&&(this._elapsed+=e,i=n(this._elapsed/this.duration,0,1),this.progress=i,r=this.camera,this._elapsed<this.duration?(s=this.ease(i),this.current=r.rotation,o=360*Math.PI/180,h=this.destination,l=this.current,!1===this.clockwise&&(h=this.current,l=this.destination),a=l<=h?Math.abs(h-l):Math.abs(h+o)-l,u=this.clockwise?r.rotation+a*s:r.rotation-a*s,r.rotation=u,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,r,i,u)):(r.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,r,i,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});t.exports=o},function(t,e,i){var n=i(19),r=i(0),s=i(115),a=i(40),o=new r({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,i,n,r,o){void 0===e&&(e=1e3),void 0===i&&(i=s.Linear),void 0===n&&(n=!1),void 0===r&&(r=null),void 0===o&&(o=this.camera.scene);var h=this.camera;return!n&&this.isRunning||(this.isRunning=!0,this.duration=e,this.progress=0,this.source=h.zoom,this.destination=t,"string"==typeof i&&s.hasOwnProperty(i)?this.ease=s[i]:"function"==typeof i&&(this.ease=i),this._elapsed=0,this._onUpdate=r,this._onUpdateScope=o,this.camera.emit(a.ZOOM_START,this.camera,this,e,t)),h},update:function(t,e){this.isRunning&&(this._elapsed+=e,this.progress=n(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=o},function(t,e,i){var n=i(293),r=i(0),s=i(2),a=i(23),o=i(48),h=i(92),l=i(22),u=new r({initialize:function(t){this.scene=t,this.systems=t.sys,this.roundPixels=t.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,t.sys.events.once(l.BOOT,this.boot,this),t.sys.events.on(l.START,this.start,this)},boot:function(){var t=this.systems;t.settings.cameras?this.fromJSON(t.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new n(0,0,t.scale.width,t.scale.height).setScene(this.scene),t.game.scale.on(h.RESIZE,this.onResize,this),this.systems.events.once(l.DESTROY,this.destroy,this)},start:function(){var t;this.main||((t=this.systems).settings.cameras?this.fromJSON(t.settings.cameras):this.add(),this.main=this.cameras[0]);var e=this.systems.events;e.on(l.UPDATE,this.update,this),e.once(l.SHUTDOWN,this.shutdown,this)},add:function(t,e,i,r,s,a){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.scene.sys.scale.width),void 0===r&&(r=this.scene.sys.scale.height),void 0===s&&(s=!1),void 0===a&&(a="");var o=new n(t,e,i,r);return o.setName(a),o.setScene(this.scene),o.setRoundPixels(this.roundPixels),o.id=this.getNextID(),this.cameras.push(o),s&&(this.main=o),o},addExisting:function(t,e){return void 0===e&&(e=!1),-1===this.cameras.indexOf(t)?(t.id=this.getNextID(),t.setRoundPixels(this.roundPixels),this.cameras.push(t),e&&(this.main=t),t):null},getNextID:function(){for(var t=this.cameras,e=1,i=0;i<32;i++){for(var n=!1,r=0;r<t.length;r++){var s=t[r];s&&s.id===e&&(n=!0)}if(!n)return e;e<<=1}return 0},getTotal:function(t){void 0===t&&(t=!1);for(var e=0,i=this.cameras,n=0;n<i.length;n++){var r=i[n];(!t||t&&r.visible)&&e++}return e},fromJSON:function(t){Array.isArray(t)||(t=[t]);for(var e=this.scene.sys.scale.width,i=this.scene.sys.scale.height,n=0;n<t.length;n++){var r=t[n],a=s(r,"x",0),o=s(r,"y",0),h=s(r,"width",e),l=s(r,"height",i),u=this.add(a,o,h,l);u.name=s(r,"name",""),u.zoom=s(r,"zoom",1),u.rotation=s(r,"rotation",0),u.scrollX=s(r,"scrollX",0),u.scrollY=s(r,"scrollY",0),u.roundPixels=s(r,"roundPixels",!1),u.visible=s(r,"visible",!0);var c=s(r,"backgroundColor",!1);c&&u.setBackgroundColor(c);var d,f,p,g,m=s(r,"bounds",null);m&&(d=s(m,"x",0),f=s(m,"y",0),p=s(m,"width",e),g=s(m,"height",i),u.setBounds(d,f,p,g))}return this},getCamera:function(t){for(var e=this.cameras,i=0;i<e.length;i++)if(e[i].name===t)return e[i];return null},getCamerasBelowPointer:function(t){for(var e=this.cameras,i=t.x,n=t.y,r=[],s=0;s<e.length;s++){var a=e[s];a.visible&&a.inputEnabled&&o(a,i,n)&&r.unshift(a)}return r},remove:function(t,e){void 0===e&&(e=!0),Array.isArray(t)||(t=[t]);for(var i=0,n=this.cameras,r=0;r<t.length;r++){var s=n.indexOf(t[r]);-1!==s&&(e&&n[s].destroy(),n.splice(s,1),i++)}return!this.main&&n[0]&&(this.main=n[0]),i},render:function(t,e,i){for(var n=this.scene,r=this.cameras,s=0;s<this.cameras.length;s++){var a=r[s];a.visible&&0<a.alpha&&(a.preRender(1),t.render(n,e,i,a))}},resetAll:function(){for(var t=0;t<this.cameras.length;t++)this.cameras[t].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(t,e){for(var i=0;i<this.cameras.length;i++)this.cameras[i].update(t,e)},onResize:function(t,e,i,n,r,s){for(var a=0;a<this.cameras.length;a++){var o=this.cameras[a];0===o._x&&0===o._y&&o._width===r&&o._height===s&&o.setSize(e.width,e.height)}},resize:function(t,e){for(var i=0;i<this.cameras.length;i++)this.cameras[i].setSize(t,e)},shutdown:function(){this.main=void 0;for(var t=0;t<this.cameras.length;t++)this.cameras[t].destroy();this.cameras=[];var e=this.systems.events;e.off(l.UPDATE,this.update,this),e.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(l.START,this.start,this),this.scene=null,this.systems=null}});a.register("CameraManager",u,"cameras"),t.exports=u},function(t,e){t.exports="enterfullscreen"},function(t,e){t.exports="fullscreenfailed"},function(t,e){t.exports="fullscreenunsupported"},function(t,e){t.exports="leavefullscreen"},function(t,e){t.exports="orientationchange"},function(t,e){t.exports="resize"},function(t,e){t.exports="boot"},function(t,e){t.exports="create"},function(t,e){t.exports="destroy"},function(t,e){t.exports="pause"},function(t,e){t.exports="postupdate"},function(t,e){t.exports="preupdate"},function(t,e){t.exports="ready"},function(t,e){t.exports="render"},function(t,e){t.exports="resume"},function(t,e){t.exports="shutdown"},function(t,e){t.exports="sleep"},function(t,e){t.exports="start"},function(t,e){t.exports="transitioncomplete"},function(t,e){t.exports="transitioninit"},function(t,e){t.exports="transitionout"},function(t,e){t.exports="transitionstart"},function(t,e){t.exports="transitionwake"},function(t,e){t.exports="update"},function(t,e){t.exports="wake"},function(t,e,i){t.exports={Config:i(314),CreateRenderer:i(338),DebugHeader:i(342),Events:i(20),TimeStep:i(343),VisibilityHandler:i(345)}},function(t,e){var i,n,r=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(t){if(i===setTimeout)return setTimeout(t,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:s}catch(t){i=s}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var h,l=[],u=!1,c=-1;function d(){u&&h&&(u=!1,h.length?l=h.concat(l):c=-1,l.length&&f())}function f(){if(!u){var t=o(d);u=!0;for(var e=l.length;e;){for(h=l,l=[];++c<e;)h&&h[c].run();c=-1,e=l.length}h=null,u=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new p(t,e)),1!==l.length||u||o(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,i){var n=i(118),r={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};t.exports=(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&1<=navigator.maxTouchPoints)&&(r.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(r.mspointer=!0),navigator.getGamepads&&(r.gamepads=!0),"onwheel"in window||n.ie&&"WheelEvent"in window?r.wheelEvent="wheel":"onmousewheel"in window?r.wheelEvent="mousewheel":n.firefox&&"MouseScrollEvent"in window&&(r.wheelEvent="DOMMouseScroll"),r)},function(t,e,i){var n=i(118),r={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};t.exports=function(){r.audioData=!!window.Audio,r.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var t,e,i=document.createElement("audio"),s=!!i.canPlayType;try{s&&(i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(r.ogg=!0),(i.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||i.canPlayType("audio/opus;").replace(/^no$/,""))&&(r.opus=!0),i.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(r.mp3=!0),i.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(r.wav=!0),(i.canPlayType("audio/x-m4a;")||i.canPlayType("audio/aac;").replace(/^no$/,""))&&(r.m4a=!0),i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(r.webm=!0),""!==i.canPlayType('audio/mp4;codecs="ec-3"')&&(n.edge?r.dolby=!0:n.safari&&9<=n.safariVersion&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)&&(t=parseInt(RegExp.$1,10),e=parseInt(RegExp.$2,10),(10===t&&11<=e||10<t)&&(r.dolby=!0))))}catch(t){}return r}()},function(t,e){var i={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};t.exports=function(){var t=document.createElement("video"),e=!!t.canPlayType;try{e&&(t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(i.ogg=!0),t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(i.h264=!0,i.mp4=!0),t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(i.webm=!0),t.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(i.vp9=!0),t.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(i.hls=!0))}catch(t){}return i}()},function(t,e){var i={available:!1,cancel:"",keyboard:!1,request:""};t.exports=function(){for(var t="Fullscreen",e="FullScreen",n=["request"+t,"request"+e,"webkitRequest"+t,"webkitRequest"+e,"msRequest"+t,"msRequest"+e,"mozRequest"+e,"mozRequest"+t],r=0;r<n.length;r++)if(document.documentElement[n[r]]){i.available=!0,i.request=n[r];break}var s=["cancel"+e,"exit"+t,"webkitCancel"+e,"webkitExit"+t,"msCancel"+e,"msExit"+t,"mozCancel"+e,"mozExit"+t];if(i.available)for(r=0;r<s.length;r++)if(document[s[r]]){i.cancel=s[r];break}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(i.keyboard=!0),Object.defineProperty(i,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),i}()},function(t,e,i){t.exports={Between:i(317),BetweenPoints:i(318),BetweenPointsY:i(735),BetweenY:i(736),CounterClockwise:i(737),Normalize:i(319),Random:i(738),RandomDegrees:i(739),Reverse:i(740),RotateTo:i(741),ShortestBetween:i(742),Wrap:i(235),WrapDegrees:i(236)}},function(t,e){t.exports=function(t,e){return Math.atan2(e.x-t.x,e.y-t.y)}},function(t,e){t.exports=function(t,e,i,n){return Math.atan2(i-t,n-e)}},function(t,e,i){var n=i(13);t.exports=function(t){return t>Math.PI&&(t-=n.PI2),Math.abs(((t+n.TAU)%n.PI2-n.PI2)%n.PI2)}},function(t,e,i){var n=i(119);t.exports=function(){return n(-Math.PI,Math.PI)}},function(t,e,i){var n=i(119);t.exports=function(){return n(-180,180)}},function(t,e,i){var n=i(319);t.exports=function(t){return n(t+Math.PI)}},function(t,e,i){var n=i(13);t.exports=function(t,e,i){return void 0===i&&(i=.05),t===e||(Math.abs(e-t)<=i||Math.abs(e-t)>=n.PI2-i?t=e:(Math.abs(e-t)>Math.PI&&(e<t?e+=n.PI2:e-=n.PI2),t<e?t+=i:e<t&&(t-=i))),t}},function(t,e){t.exports=function(t,e){var i=e-t;return 0==i?0:i-360*Math.floor((i+180)/360)}},function(t,e,i){t.exports={Between:i(53),BetweenPoints:i(320),BetweenPointsSquared:i(744),Chebyshev:i(745),Power:i(746),Snake:i(747),Squared:i(321)}},function(t,e){t.exports=function(t,e){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n}},function(t,e){t.exports=function(t,e,i,n){return Math.max(Math.abs(t-i),Math.abs(e-n))}},function(t,e){t.exports=function(t,e,i,n,r){return void 0===r&&(r=2),Math.sqrt(Math.pow(i-t,r)+Math.pow(n-e,r))}},function(t,e){t.exports=function(t,e,i,n){return Math.abs(t-i)+Math.abs(e-n)}},function(t,e,i){t.exports={Back:i(302),Bounce:i(303),Circular:i(304),Cubic:i(305),Elastic:i(306),Expo:i(307),Linear:i(308),Quadratic:i(309),Quartic:i(310),Quintic:i(311),Sine:i(312),Stepped:i(313)}},function(t,e,i){t.exports={Ceil:i(750),Equal:i(106),Floor:i(751),GreaterThan:i(322),LessThan:i(323)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1e-4),Math.ceil(t-e)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1e-4),Math.floor(t+e)}},function(t,e,i){t.exports={Bezier:i(753),CatmullRom:i(754),CubicBezier:i(326),Linear:i(755),QuadraticBezier:i(327),SmoothStep:i(328),SmootherStep:i(756)}},function(t,e,i){var n=i(324);t.exports=function(t,e){for(var i=0,r=t.length-1,s=0;s<=r;s++)i+=Math.pow(1-e,r-s)*Math.pow(e,s)*t[s]*n(r,s);return i}},function(t,e,i){var n=i(171);t.exports=function(t,e){var i=t.length-1,r=i*e,s=Math.floor(r);return t[0]===t[i]?(e<0&&(s=Math.floor(r=i*(1+e))),n(r-s,t[(s-1+i)%i],t[s],t[(s+1)%i],t[(s+2)%i])):e<0?t[0]-(n(-r,t[0],t[0],t[1],t[1])-t[0]):1<e?t[i]-(n(r-i,t[i],t[i],t[i-1],t[i-1])-t[i]):n(r-s,t[s?s-1:0],t[s],t[i<s+1?i:s+1],t[i<s+2?i:s+2])}},function(t,e,i){var n=i(116);t.exports=function(t,e){var i=t.length-1,r=i*e,s=Math.floor(r);return e<0?n(t[0],t[1],r):1<e?n(t[i],t[i-1],i-r):n(t[s],t[i<s+1?i:s+1],r-s)}},function(t,e,i){var n=i(160);t.exports=function(t,e,i){return e+(i-e)*n(t,0,1)}},function(t,e,i){t.exports={GetNext:i(329),IsSize:i(120),IsValue:i(758)}},function(t,e){t.exports=function(t){return 0<t&&0==(t&t-1)}},function(t,e,i){t.exports={Ceil:i(330),Floor:i(93),To:i(760)}},function(t,e){t.exports=function(t,e,i,n){return void 0===i&&(i=0),0===e?t:(t-=i,t=e*Math.round(t/e),n?(i+t)/e:i+t)}},function(t,e,i){var n=new(i(0))({initialize:function(t){void 0===t&&(t=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],t&&this.init(t)},rnd:function(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},hash:function(t){var e,i=this.n;t=t.toString();for(var n=0;n<t.length;n++)e=.02519603282416938*(i+=t.charCodeAt(n)),e-=i=e>>>0,i=(e*=i)>>>0,i+=4294967296*(e-=i);return 2.3283064365386963e-10*((this.n=i)>>>0)},init:function(t){"string"==typeof t?this.state(t):this.sow(t)},sow:function(t){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,t)for(var e=0;e<t.length&&null!=t[e];e++){var i=t[e];this.s0-=this.hash(i),this.s0+=~~(this.s0<0),this.s1-=this.hash(i),this.s1+=~~(this.s1<0),this.s2-=this.hash(i),this.s2+=~~(this.s2<0)}},integer:function(){return 4294967296*this.rnd()},frac:function(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(t,e){return Math.floor(this.realInRange(0,e-t+1)+t)},between:function(t,e){return Math.floor(this.realInRange(0,e-t+1)+t)},realInRange:function(t,e){return this.frac()*(e-t)+t},normal:function(){return 1-2*this.frac()},uuid:function(){var t="",e="";for(e=t="";t++<36;e+=~t%5|3*t&4?(15^t?8^this.frac()*(20^t?16:4):4).toString(16):"-");return e},pick:function(t){return t[this.integerInRange(0,t.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(t){return t[~~(Math.pow(this.frac(),2)*(t.length-1)+.5)]},timestamp:function(t,e){return this.realInRange(t||9466848e5,e||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(t){return"string"==typeof t&&t.match(/^!rnd/)&&(t=t.split(","),this.c=parseFloat(t[1]),this.s0=parseFloat(t[2]),this.s1=parseFloat(t[3]),this.s2=parseFloat(t[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(t){for(var e=t.length-1;0<e;e--){var i=Math.floor(this.frac()*(e+1)),n=t[i];t[i]=t[e],t[e]=n}return t}});t.exports=n},function(t,e){t.exports=function(t){for(var e=0,i=0;i<t.length;i++)e+=+t[i];return e/t.length}},function(t,e){t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=10);var n=Math.pow(i,-e);return Math.ceil(t*n)/n}},function(t,e){t.exports=function(t,e){return Math.abs(t-e)}},function(t,e){t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=10);var n=Math.pow(i,-e);return Math.floor(t*n)/n}},function(t,e){t.exports=function(t,e){return t/e/1e3}},function(t,e){t.exports=function(t){return t==parseFloat(t)?!(t%2):void 0}},function(t,e){t.exports=function(t){return t===parseFloat(t)?!(t%2):void 0}},function(t,e){t.exports=function(t,e,i){return Math.min(t+e,i)}},function(t,e){t.exports=function(t,e,i){return Math.max(t-e,i)}},function(t,e){t.exports=function(t,e,i,n){void 0===i&&(i=e+1);var r=(t-e)/(i-e);return 1<r?void 0!==n?(r=(n-t)/(n-i))<0&&(r=0):r=1:r<0&&(r=0),r}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);var i=2*Math.random()*Math.PI;return t.x=Math.cos(i)*e,t.y=Math.sin(i)*e,t}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);var i=2*Math.random()*Math.PI,n=2*Math.random()-1,r=Math.sqrt(1-n*n)*e;return t.x=Math.cos(i)*r,t.y=Math.sin(i)*r,t.z=n*e,t}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1),t.x=(2*Math.random()-1)*e,t.y=(2*Math.random()-1)*e,t.z=(2*Math.random()-1)*e,t.w=(2*Math.random()-1)*e,t}},function(t,e){t.exports=function(t,e,i,n,r){return t.x=e+r*Math.cos(n),t.y=i+r*Math.sin(n),t}},function(t,e){t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=10);var n=Math.pow(i,-e);return Math.round(t*n)/n}},function(t,e){t.exports=function(t,e,i,n){void 0===e&&(e=1),void 0===i&&(i=1),void 0===n&&(n=1),n*=Math.PI/t;for(var r=[],s=[],a=0;a<t;a++)e+=(i-=e*n)*n,r[a]=i,s[a]=e;return{sin:s,cos:r,length:t}}},function(t,e,i){var n=i(3);t.exports=function(t,e,i,r){void 0===r&&(r=new n);var s=0,a=0;return 0<t&&t<=e*i&&(s=e-1<t?t-(a=Math.floor(t/e))*e:t,r.set(s,a)),r}},function(t,e){t.exports=function(t,e,i){return Math.abs(t-e)<=i}},function(t,e,i){var n=i(174),r=i(336),s=i(337),a=new r,o=new s,h=new n;t.exports=function(t,e,i){return o.setAxisAngle(e,i),a.fromRotationTranslation(o,h.set(0,0,0)),t.transformMat4(a)}},function(t,e){t.exports="addtexture"},function(t,e){t.exports="onerror"},function(t,e){t.exports="onload"},function(t,e){t.exports="ready"},function(t,e){t.exports="removetexture"},function(t,e){t.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_FORWARD_DIFFUSE_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.rgb * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","","}",""].join("\n")},function(t,e,i){t.exports={GenerateTexture:i(346),Palettes:i(790)}},function(t,e,i){t.exports={ARNE16:i(347),C64:i(791),CGA:i(792),JMP:i(793),MSX:i(794)}},function(t,e){t.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(t,e){t.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(t,e){t.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(t,e){t.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(t,e,i){t.exports={Path:i(796),CubicBezier:i(348),Curve:i(81),Ellipse:i(349),Line:i(350),QuadraticBezier:i(351),Spline:i(352)}},function(t,e,i){var n=i(0),r=i(348),s=i(349),a=i(5),o=i(350),h=i(797),l=i(351),u=i(11),c=i(352),d=i(3),f=i(13),p=new n({initialize:function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new d,this._tmpVec2A=new d,this._tmpVec2B=new d,"object"==typeof t?this.fromJSON(t):this.startPoint.set(t,e)},add:function(t){return this.curves.push(t),this},circleTo:function(t,e,i){return void 0===e&&(e=!1),this.ellipseTo(t,t,0,360,e,i)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);return t.equals(e)||this.curves.push(new o(e,t)),this},cubicBezierTo:function(t,e,i,n,s,a){var o,h,l=this.getEndPoint(),u=t instanceof d?(o=t,h=e,i):(o=new d(i,n),h=new d(s,a),new d(t,e));return this.add(new r(l,o,h,u))},quadraticBezierTo:function(t,e,i,n){var r,s=this.getEndPoint(),a=t instanceof d?(r=t,e):(r=new d(i,n),new d(t,e));return this.add(new l(s,r,a))},draw:function(t,e){for(var i=0;i<this.curves.length;i++){var n=this.curves[i];n.active&&n.draw(t,e)}return t},ellipseTo:function(t,e,i,n,r,a){var o=new s(0,0,t,e,i,n,r,a),h=this.getEndPoint(this._tmpVec2A),l=o.getStartPoint(this._tmpVec2B);return h.subtract(l),o.x=h.x,o.y=h.y,this.add(o)},fromJSON:function(t){this.curves=[],this.cacheLengths=[],this.startPoint.set(t.x,t.y),this.autoClose=t.autoClose;for(var e=0;e<t.curves.length;e++){var i=t.curves[e];switch(i.type){case"LineCurve":this.add(o.fromJSON(i));break;case"EllipseCurve":this.add(s.fromJSON(i));break;case"SplineCurve":this.add(c.fromJSON(i));break;case"CubicBezierCurve":this.add(r.fromJSON(i));break;case"QuadraticBezierCurve":this.add(l.fromJSON(i))}}return this},getBounds:function(t,e){void 0===t&&(t=new u),void 0===e&&(e=16),t.x=Number.MAX_VALUE,t.y=Number.MAX_VALUE;for(var i=new u,n=f.MIN_SAFE_INTEGER,r=f.MIN_SAFE_INTEGER,s=0;s<this.curves.length;s++){var a=this.curves[s];a.active&&(a.getBounds(i,e),t.x=Math.min(t.x,i.x),t.y=Math.min(t.y,i.y),n=Math.max(n,i.right),r=Math.max(r,i.bottom))}return t.right=n,t.bottom=r,t},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,i=0;i<this.curves.length;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t},getEndPoint:function(t){return void 0===t&&(t=new d),0<this.curves.length?this.curves[this.curves.length-1].getPoint(1,t):t.copy(this.startPoint),t},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},getPoint:function(t,e){void 0===e&&(e=new d);for(var i=t*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=i){var s=n[r]-i,a=this.curves[r],o=a.getLength(),h=0===o?0:1-s/o;return a.getPointAt(h,e)}r++}return null},getPoints:function(t){void 0===t&&(t=12);for(var e,i=[],n=0;n<this.curves.length;n++){var r=this.curves[n];if(r.active)for(var s=r.getResolution(t),a=r.getPoints(s),o=0;o<a.length;o++){var h=a[o];e&&e.equals(h)||(i.push(h),e=h)}}return this.autoClose&&1<i.length&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},getRandomPoint:function(t){return void 0===t&&(t=new d),this.getPoint(Math.random(),t)},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e},getStartPoint:function(t){return void 0===t&&(t=new d),t.copy(this.startPoint)},getTangent:function(t,e){void 0===e&&(e=new d);for(var i=t*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=i){var s=n[r]-i,a=this.curves[r],o=a.getLength(),h=0===o?0:1-s/o;return a.getTangentAt(h,e)}r++}return null},lineTo:function(t,e){t instanceof d?this._tmpVec2B.copy(t):this._tmpVec2B.set(t,e);var i=this.getEndPoint(this._tmpVec2A);return this.add(new o([i.x,i.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(t){return t.unshift(this.getEndPoint()),this.add(new c(t))},moveTo:function(t,e){return t instanceof d?this.add(new h(t.x,t.y)):this.add(new h(t,e))},toJSON:function(){for(var t=[],e=0;e<this.curves.length;e++)t.push(this.curves[e].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:t}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});a.register("path",(function(t,e){return new p(t,e)})),t.exports=p},function(t,e,i){var n=i(0),r=i(3),s=new n({initialize:function(t,e){this.active=!1,this.p0=new r(t,e)},getPoint:function(t,e){return void 0===e&&(e=new r),e.copy(this.p0)},getPointAt:function(t,e){return this.getPoint(t,e)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});t.exports=s},function(t,e,i){t.exports={DataManager:i(113),DataManagerPlugin:i(799),Events:i(284)}},function(t,e,i){var n=i(0),r=i(113),s=i(23),a=i(22),o=new n({Extends:r,initialize:function(t){r.call(this,t,t.sys.events),this.scene=t,this.systems=t.sys,t.sys.events.once(a.BOOT,this.boot,this),t.sys.events.on(a.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(a.DESTROY,this.destroy,this)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){r.prototype.destroy.call(this),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});s.register("DataManagerPlugin",o,"data"),t.exports=o},function(t,e,i){t.exports={Align:i(801),BaseShader:i(353),Bounds:i(804),Canvas:i(808),Color:i(354),Masks:i(817)}},function(t,e,i){var n=i(105),r=i(18)(!1,r={In:i(802),To:i(803)},n);t.exports=r},function(t,e,i){t.exports={BottomCenter:i(256),BottomLeft:i(257),BottomRight:i(258),Center:i(259),LeftCenter:i(261),QuickSet:i(255),RightCenter:i(262),TopCenter:i(263),TopLeft:i(264),TopRight:i(265)}},function(t,e,i){t.exports={BottomCenter:i(243),BottomLeft:i(244),BottomRight:i(245),LeftBottom:i(246),LeftCenter:i(247),LeftTop:i(248),QuickSet:i(242),RightBottom:i(249),RightCenter:i(250),RightTop:i(251),TopCenter:i(252),TopLeft:i(253),TopRight:i(254)}},function(t,e,i){t.exports={CenterOn:i(260),GetBottom:i(34),GetBounds:i(805),GetCenterX:i(76),GetCenterY:i(78),GetLeft:i(35),GetOffsetX:i(806),GetOffsetY:i(807),GetRight:i(36),GetTop:i(37),SetBottom:i(46),SetCenterX:i(77),SetCenterY:i(79),SetLeft:i(44),SetRight:i(45),SetTop:i(43)}},function(t,e,i){var n=i(34),r=i(35),s=i(36),a=i(37);t.exports=function(t,e){void 0===e&&(e={});var i=r(t),o=a(t);return e.x=i,e.y=o,e.width=s(t)-i,e.height=n(t)-o,e}},function(t,e){t.exports=function(t){return t.width*t.originX}},function(t,e){t.exports=function(t){return t.height*t.originY}},function(t,e,i){t.exports={CanvasInterpolation:i(339),CanvasPool:i(26),Smoothing:i(167),TouchAction:i(809),UserSelect:i(810)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e="none"),t.style.msTouchAction=e,t.style["ms-touch-action"]=e,t.style["touch-action"]=e,t}},function(t,e){t.exports=function(t,e){return void 0===e&&(e="none"),["-webkit-","-khtml-","-moz-","-ms-",""].forEach((function(i){t.style[i+"user-select"]=e})),t.style["-webkit-touch-callout"]=e,t.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",t}},function(t,e){t.exports=function(t){var e={r:t>>16&255,g:t>>8&255,b:255&t,a:255};return 16777215<t&&(e.a=t>>>24),e}},function(t,e,i){var n=i(31),r=i(356);t.exports=function(t,e,i){var s,a,o=i,h=i,l=i;return 0!==e&&(o=r(a=2*i-(s=i<.5?i*(1+e):i+e-i*e),s,t+1/3),h=r(a,s,t),l=r(a,s,t-1/3)),(new n).setGLTo(o,h,l,1)}},function(t,e,i){var n=i(166);t.exports=function(t,e){void 0===t&&(t=1),void 0===e&&(e=1);for(var i=[],r=0;r<=359;r++)i.push(n(r/359,t,e));return i}},function(t,e,i){function n(t,e,i,n,s,a,o,h){void 0===o&&(o=100),void 0===h&&(h=0);var l=h/o;return{r:r(t,n,l),g:r(e,s,l),b:r(i,a,l)}}var r=i(116);t.exports={RGBWithRGB:n,ColorWithRGB:function(t,e,i,r,s,a){return void 0===s&&(s=100),void 0===a&&(a=0),n(t.r,t.g,t.b,e,i,r,s,a)},ColorWithColor:function(t,e,i,r){return void 0===i&&(i=100),void 0===r&&(r=0),n(t.r,t.g,t.b,e.r,e.g,e.b,i,r)}}},function(t,e,i){var n=i(172),r=i(31);t.exports=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=255),new r(n(t,e),n(t,e),n(t,e))}},function(t,e,i){var n=i(355);t.exports=function(t,e,i,r,s){return void 0===r&&(r=255),void 0===s&&(s="#"),"#"===s?"#"+((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1):"0x"+n(r)+n(t)+n(e)+n(i)}},function(t,e,i){t.exports={BitmapMask:i(278),GeometryMask:i(279)}},function(t,e,i){var n={AddToDOM:i(122),DOMContentLoaded:i(357),GetScreenOrientation:i(358),GetTarget:i(363),ParseXML:i(364),RemoveFromDOM:i(178),RequestAnimationFrame:i(344)};t.exports=n},function(t,e,i){t.exports={EventEmitter:i(820)}},function(t,e,i){var n=i(0),r=i(10),s=i(23),a=new n({Extends:r,initialize:function(){r.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});s.register("EventEmitter",a,"events"),t.exports=a},function(t,e,i){var n=i(122),r=i(289),s=i(292),a=i(26),o=i(0),h=i(314),l=i(822),u=i(338),c=i(113),d=i(342),f=i(315),p=i(357),g=i(10),m=i(20),y=i(365),v=i(23),_=i(370),x=i(371),w=i(373),b=i(121),T=i(376),E=i(343),A=i(345),S=i(380),C=new o({initialize:function(t){this.config=new h(t),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new g,this.anims=new r(this),this.textures=new T(this),this.cache=new s(this),this.registry=new c(this),this.input=new y(this,this.config),this.scene=new w(this,this.config.sceneConfig),this.device=f,this.scale=new x(this,this.config),this.sound=null,this.sound=S.create(this),this.loop=new E(this,this.config.fps),this.plugins=new _(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,p(this.boot.bind(this))},boot:function(){v.hasCore("EventEmitter")?(this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),u(this),l(this),d(this),n(this.canvas,this.config.parent),this.textures.once(b.READY,this.texturesReady,this),this.events.emit(m.BOOT)):console.warn("Aborting. Core Plugins missing.")},texturesReady:function(){this.events.emit(m.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),A(this);var t=this.events;t.on(m.HIDDEN,this.onHidden,this),t.on(m.VISIBLE,this.onVisible,this),t.on(m.BLUR,this.onBlur,this),t.on(m.FOCUS,this.onFocus,this)},step:function(t,e){if(this.pendingDestroy)return this.runDestroy();var i=this.events;i.emit(m.PRE_STEP,t,e),i.emit(m.STEP,t,e),this.scene.update(t,e),i.emit(m.POST_STEP,t,e);var n=this.renderer;n.preRender(),i.emit(m.PRE_RENDER,n,t,e),this.scene.render(n),n.postRender(),i.emit(m.POST_RENDER,n,t,e)},headlessStep:function(t,e){if(this.pendingDestroy)return this.runDestroy();var i=this.events;i.emit(m.PRE_STEP,t,e),i.emit(m.STEP,t,e),this.scene.update(t,e),i.emit(m.POST_STEP,t,e),i.emit(m.PRE_RENDER),i.emit(m.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(m.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(m.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(t,e){void 0===e&&(e=!1),this.pendingDestroy=!0,this.removeCanvas=t,this.noReturn=e},runDestroy:function(){this.scene.destroy(),this.events.emit(m.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(a.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});t.exports=C},function(t,e,i){var n=i(122);t.exports=function(t){var e,i=t.config;i.parent&&i.domCreateContainer&&((e=document.createElement("div")).style.cssText=["display: block;","width: "+t.scale.width+"px;","height: "+t.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: none;","transform: scale(1);","transform-origin: left top;"].join(" "),t.domContainer=e,n(e,i.parent))}},function(t,e){t.exports="boot"},function(t,e){t.exports="destroy"},function(t,e){t.exports="dragend"},function(t,e){t.exports="dragenter"},function(t,e){t.exports="drag"},function(t,e){t.exports="dragleave"},function(t,e){t.exports="dragover"},function(t,e){t.exports="dragstart"},function(t,e){t.exports="drop"},function(t,e){t.exports="gameout"},function(t,e){t.exports="gameover"},function(t,e){t.exports="gameobjectdown"},function(t,e){t.exports="dragend"},function(t,e){t.exports="dragenter"},function(t,e){t.exports="drag"},function(t,e){t.exports="dragleave"},function(t,e){t.exports="dragover"},function(t,e){t.exports="dragstart"},function(t,e){t.exports="drop"},function(t,e){t.exports="gameobjectmove"},function(t,e){t.exports="gameobjectout"},function(t,e){t.exports="gameobjectover"},function(t,e){t.exports="pointerdown"},function(t,e){t.exports="pointermove"},function(t,e){t.exports="pointerout"},function(t,e){t.exports="pointerover"},function(t,e){t.exports="pointerup"},function(t,e){t.exports="wheel"},function(t,e){t.exports="gameobjectup"},function(t,e){t.exports="gameobjectwheel"},function(t,e){t.exports="boot"},function(t,e){t.exports="process"},function(t,e){t.exports="update"},function(t,e){t.exports="pointerdown"},function(t,e){t.exports="pointerdownoutside"},function(t,e){t.exports="pointermove"},function(t,e){t.exports="pointerout"},function(t,e){t.exports="pointerover"},function(t,e){t.exports="pointerup"},function(t,e){t.exports="pointerupoutside"},function(t,e){t.exports="wheel"},function(t,e){t.exports="pointerlockchange"},function(t,e){t.exports="preupdate"},function(t,e){t.exports="shutdown"},function(t,e){t.exports="start"},function(t,e){t.exports="update"},function(t,e){t.exports=function(t){if(!t)return window.innerHeight;var e=Math.abs(window.orientation),i={w:0,h:0},n=document.createElement("div");return n.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(n),i.w=90===e?n.offsetHeight:window.innerWidth,i.h=90===e?window.innerWidth:n.offsetHeight,document.documentElement.removeChild(n),n=null,90!==Math.abs(window.orientation)?i.h:i.w}},function(t,e){t.exports="addfile"},function(t,e){t.exports="complete"},function(t,e){t.exports="filecomplete"},function(t,e){t.exports="filecomplete-"},function(t,e){t.exports="loaderror"},function(t,e){t.exports="load"},function(t,e){t.exports="fileprogress"},function(t,e){t.exports="postprocess"},function(t,e){t.exports="progress"},function(t,e){t.exports="start"},function(t,e,i){var n=i(2),r=i(181);t.exports=function(t){var e=t.game.config.defaultPhysicsSystem,i=n(t.settings,"physics",!1);if(e||i){var s=[];if(e&&s.push(r(e+"Physics")),i)for(var a in i)a=r(a.concat("Physics")),-1===s.indexOf(a)&&s.push(a);return s}}},function(t,e,i){var n=i(2);t.exports=function(t){var e=t.plugins.getDefaultScenePlugins(),i=n(t.settings,"plugins",!1);return Array.isArray(i)?i:e||[]}},function(t,e,i){t.exports={game:"game",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"}},function(t,e){t.exports=function(t,e,i){if(i.getElementsByTagName("TextureAtlas")){var n=t.source[e];t.add("__BASE",e,0,0,n.width,n.height);for(var r=i.getElementsByTagName("SubTexture"),s=0;s<r.length;s++){var a,o,h,l,u=r[s].attributes,c=u.name.value,d=parseInt(u.x.value,10),f=parseInt(u.y.value,10),p=parseInt(u.width.value,10),g=parseInt(u.height.value,10),m=t.add(c,e,d,f,p,g);u.frameX&&(a=Math.abs(parseInt(u.frameX.value,10)),o=Math.abs(parseInt(u.frameY.value,10)),h=parseInt(u.frameWidth.value,10),l=parseInt(u.frameHeight.value,10),m.setTrim(p,g,a,o,h,l))}return t}console.warn("Invalid Texture Atlas XML given")}},function(t,e){t.exports=function(t,e){var i=t.source[e];return t.add("__BASE",e,0,0,i.width,i.height),t}},function(t,e){t.exports=function(t,e){var i=t.source[e];return t.add("__BASE",e,0,0,i.width,i.height),t}},function(t,e,i){var n=i(67);t.exports=function(t,e,i){if(i.frames||i.textures){var r=t.source[e];t.add("__BASE",e,0,0,r.width,r.height);for(var s=Array.isArray(i.textures)?i.textures[e].frames:i.frames,a=0;a<s.length;a++){var o=s[a],h=t.add(o.filename,e,o.frame.x,o.frame.y,o.frame.w,o.frame.h);o.trimmed&&h.setTrim(o.sourceSize.w,o.sourceSize.h,o.spriteSourceSize.x,o.spriteSourceSize.y,o.spriteSourceSize.w,o.spriteSourceSize.h),o.rotated&&(h.rotated=!0,h.updateUVsInverted());var l=o.anchor||o.pivot;l&&(h.customPivot=!0,h.pivotX=l.x,h.pivotY=l.y),h.customData=n(o)}for(var u in i)"frames"!==u&&(Array.isArray(i[u])?t.customData[u]=i[u].slice(0):t.customData[u]=i[u]);return t}console.warn("Invalid Texture Atlas JSON Array")}},function(t,e,i){var n=i(67);t.exports=function(t,e,i){if(i.frames){var r=t.source[e];t.add("__BASE",e,0,0,r.width,r.height);var s=i.frames;for(var a in s){var o=s[a],h=t.add(a,e,o.frame.x,o.frame.y,o.frame.w,o.frame.h);o.trimmed&&h.setTrim(o.sourceSize.w,o.sourceSize.h,o.spriteSourceSize.x,o.spriteSourceSize.y,o.spriteSourceSize.w,o.spriteSourceSize.h),o.rotated&&(h.rotated=!0,h.updateUVsInverted());var l=o.anchor||o.pivot;l&&(h.customPivot=!0,h.pivotX=l.x,h.pivotY=l.y),h.customData=n(o)}for(var u in i)"frames"!==u&&(Array.isArray(i[u])?t.customData[u]=i[u].slice(0):t.customData[u]=i[u]);return t}console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object")}},function(t,e,i){var n=i(2);t.exports=function(t,e,i,r,s,a,o){var h=n(o,"frameWidth",null),l=n(o,"frameHeight",h);if(null===h)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var u=t.source[e];t.add("__BASE",e,0,0,u.width,u.height);var c=n(o,"startFrame",0),d=n(o,"endFrame",-1),f=n(o,"margin",0),p=n(o,"spacing",0),g=Math.floor((s-f+p)/(h+p))*Math.floor((a-f+p)/(l+p));0===g&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",t.key),(g<c||c<-g)&&(c=0),c<0&&(c=g+c),-1!==d&&(g=c+(d+1));for(var m=f,y=f,v=0,_=0,x=0;x<g;x++){_=v=0;var w=m+h,b=y+l;s<w&&(v=w-s),a<b&&(_=b-a),t.add(x,e,i+m,r+y,h-v,l-_),s<(m+=h+p)+h&&(m=f,y+=l+p)}return t}},function(t,e,i){var n=i(2);t.exports=function(t,e,i){var r=n(i,"frameWidth",null),s=n(i,"frameHeight",r);if(!r)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var a=t.source[0];t.add("__BASE",0,0,0,a.width,a.height);var o=n(i,"startFrame",0),h=n(i,"endFrame",-1),l=n(i,"margin",0),u=n(i,"spacing",0),c=e.cutX,d=e.cutY,f=e.cutWidth,p=e.cutHeight,g=e.realWidth,m=e.realHeight,y=Math.floor((g-l+u)/(r+u)),v=Math.floor((m-l+u)/(s+u)),_=y*v,x=e.x,w=r-x,b=r-(g-f-x),T=e.y,E=s-T,A=s-(m-p-T);(_<o||o<-_)&&(o=0),o<0&&(o=_+o),-1!==h&&(_=o+(h+1));for(var S=l,C=l,O=0,P=e.sourceIndex,R=0;R<v;R++){for(var M=0===R,L=R===v-1,I=0;I<y;I++){var k,D,F,B,N,G,Y=0===I,z=I===y-1,U=t.add(O,P,c+S,d+C,r,s);(Y||M||z||L)&&(k=Y?x:0,D=M?T:0,B=F=0,Y&&(F+=r-w),z&&(F+=r-b),M&&(B+=s-E),L&&(B+=s-A),N=r-F,G=s-B,U.cutWidth=N,U.cutHeight=G,U.setTrim(r,s,k,D,N,G)),S+=u,S+=Y?w:z?b:r,O++}S=l,C+=u,C+=M?E:L?A:s}return t}},function(t,e){function i(t,e,i,r){var s=n-r.y-r.height;t.add(i,e,r.x,s,r.width,r.height)}var n=0;t.exports=function(t,e,r){var s=t.source[e];t.add("__BASE",e,0,0,s.width,s.height),n=s.height;for(var a=r.split("\n"),o=/^[ ]*(- )*(\w+)+[: ]+(.*)/,h="",l="",u={x:0,y:0,width:0,height:0},c=0;c<a.length;c++){var d=a[c].match(o);if(d){var f="- "===d[1],p=d[2],g=d[3];if(f&&(l!==h&&(i(t,e,l,u),h=l),u={x:0,y:0,width:0,height:0}),"name"!==p)switch(p){case"x":case"y":case"width":case"height":u[p]=parseInt(g,10)}else l=g}}return l!==h&&i(t,e,l,u),t}},function(t,e){t.exports="complete"},function(t,e){t.exports="decoded"},function(t,e){t.exports="decodedall"},function(t,e){t.exports="destroy"},function(t,e){t.exports="detune"},function(t,e){t.exports="detune"},function(t,e){t.exports="mute"},function(t,e){t.exports="rate"},function(t,e){t.exports="volume"},function(t,e){t.exports="loop"},function(t,e){t.exports="looped"},function(t,e){t.exports="mute"},function(t,e){t.exports="pauseall"},function(t,e){t.exports="pause"},function(t,e){t.exports="play"},function(t,e){t.exports="rate"},function(t,e){t.exports="resumeall"},function(t,e){t.exports="resume"},function(t,e){t.exports="seek"},function(t,e){t.exports="stopall"},function(t,e){t.exports="stop"},function(t,e){t.exports="unlocked"},function(t,e){t.exports="volume"},function(t,e,i){var n={Events:i(90),DisplayList:i(915),GameObjectCreator:i(16),GameObjectFactory:i(5),UpdateList:i(941),Components:i(12),BuildGameObject:i(27),BuildGameObjectAnimation:i(393),GameObject:i(14),BitmapText:i(132),Blitter:i(188),Container:i(189),DOMElement:i(395),DynamicBitmapText:i(190),Extern:i(397),Graphics:i(191),Group:i(97),Image:i(107),Particles:i(973),PathFollower:i(409),RenderTexture:i(195),RetroFont:i(982),Rope:i(197),Sprite:i(75),Text:i(198),TileSprite:i(199),Zone:i(110),Video:i(200),Shape:i(30),Arc:i(410),Curve:i(411),Ellipse:i(412),Grid:i(413),IsoBox:i(414),IsoTriangle:i(415),Line:i(416),Polygon:i(417),Rectangle:i(422),Star:i(423),Triangle:i(424),Factories:{Blitter:i(1033),Container:i(1034),DOMElement:i(1035),DynamicBitmapText:i(1036),Extern:i(1037),Graphics:i(1038),Group:i(1039),Image:i(1040),Particles:i(1041),PathFollower:i(1042),RenderTexture:i(1043),Rope:i(1044),Sprite:i(1045),StaticBitmapText:i(1046),Text:i(1047),TileSprite:i(1048),Zone:i(1049),Video:i(1050),Arc:i(1051),Curve:i(1052),Ellipse:i(1053),Grid:i(1054),IsoBox:i(1055),IsoTriangle:i(1056),Line:i(1057),Polygon:i(1058),Rectangle:i(1059),Star:i(1060),Triangle:i(1061)},Creators:{Blitter:i(1062),Container:i(1063),DynamicBitmapText:i(1064),Graphics:i(1065),Group:i(1066),Image:i(1067),Particles:i(1068),RenderTexture:i(1069),Rope:i(1070),Sprite:i(1071),StaticBitmapText:i(1072),Text:i(1073),TileSprite:i(1074),Zone:i(1075),Video:i(1076)}};n.Mesh=i(134),n.Quad=i(203),n.Shader=i(204),n.Factories.Mesh=i(1083),n.Factories.Quad=i(1084),n.Factories.Shader=i(1085),n.Creators.Mesh=i(1086),n.Creators.Quad=i(1087),n.Creators.Shader=i(1088),n.Light=i(428),i(429),i(1089),t.exports=n},function(t,e,i){var n=i(0),r=i(129),s=i(23),a=i(22),o=i(131),h=new n({Extends:r,initialize:function(t){r.call(this,t),this.sortChildrenFlag=!1,this.scene=t,this.systems=t.sys,t.sys.events.once(a.BOOT,this.boot,this),t.sys.events.on(a.START,this.start,this)},boot:function(){this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){this.systems.events.once(a.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(o.inplace(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(t,e){return t._depth-e._depth},getChildren:function(){return this.list},shutdown:function(){for(var t=this.list.length;t--;)this.list[t].destroy(!0);this.list.length=0,this.systems.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});s.register("DisplayList",h,"displayList"),t.exports=h},function(t,e,i){t.exports={CheckMatrix:i(184),MatrixToString:i(917),ReverseColumns:i(918),ReverseRows:i(919),Rotate180:i(920),RotateLeft:i(921),RotateMatrix:i(130),RotateRight:i(922),TransposeMatrix:i(390)}},function(t,e,i){var n=i(163),r=i(184);t.exports=function(t){var e="";if(!r(t))return e;for(var i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++){var a=t[i][s].toString();e+="undefined"!==a?n(a,2):"?",s<t[i].length-1&&(e+=" |")}if(i<t.length-1){e+="\n";for(var o=0;o<t[i].length;o++)e+="---",o<t[i].length-1&&(e+="+");e+="\n"}}return e}},function(t,e){t.exports=function(t){return t.reverse()}},function(t,e){t.exports=function(t){for(var e=0;e<t.length;e++)t[e].reverse();return t}},function(t,e,i){var n=i(130);t.exports=function(t){return n(t,180)}},function(t,e,i){var n=i(130);t.exports=function(t){return n(t,90)}},function(t,e,i){var n=i(130);t.exports=function(t){return n(t,-90)}},function(t,e){t.exports=function(t,e,i,n,r){if(void 0===r&&(r=t),0<i){var s=i-t.length;if(s<=0)return null}if(!Array.isArray(e))return-1===t.indexOf(e)?(t.push(e),n&&n.call(r,e),e):null;for(var a=e.length-1;0<=a;)-1!==t.indexOf(e[a])&&e.splice(a,1),a--;if(0===(a=e.length))return null;0<i&&s<a&&(e.splice(s),a=s);for(var o=0;o<a;o++){var h=e[o];t.push(h),n&&n.call(r,h)}return e}},function(t,e){t.exports=function(t,e,i,n,r,s){if(void 0===i&&(i=0),void 0===s&&(s=t),0<n){var a=n-t.length;if(a<=0)return null}if(!Array.isArray(e))return-1===t.indexOf(e)?(t.splice(i,0,e),r&&r.call(s,e),e):null;for(var o=e.length-1;0<=o;)-1!==t.indexOf(e[o])&&e.pop(),o--;if(0===(o=e.length))return null;0<n&&a<o&&(e.splice(a),o=a);for(var h=o-1;0<=h;h--){var l=e[h];t.splice(i,0,l),r&&r.call(s,l)}return e}},function(t,e){t.exports=function(t,e){var i=t.indexOf(e);return-1!==i&&i<t.length&&(t.splice(i,1),t.push(e)),e}},function(t,e,i){var n=i(68);t.exports=function(t,e,i,r,s){void 0===r&&(r=0),void 0===s&&(s=t.length);var a=0;if(n(t,r,s))for(var o=r;o<s;o++)t[o][e]===i&&a++;return a}},function(t,e){t.exports=function(t,e,i){for(var n=[null],r=3;r<arguments.length;r++)n.push(arguments[r]);for(r=0;r<t.length;r++)n[0]=t[r],e.apply(i,n);return t}},function(t,e,i){var n=i(68);t.exports=function(t,e,i,r,s){if(void 0===r&&(r=0),void 0===s&&(s=t.length),n(t,r,s)){for(var a=[null],o=5;o<arguments.length;o++)a.push(arguments[o]);for(o=r;o<s;o++)a[0]=t[o],e.apply(i,a)}return t}},function(t,e){t.exports=function(t,e){var i,n,r=t.indexOf(e);return 0<r&&(i=t[r-1],n=t.indexOf(i),t[r]=i,t[n]=e),t}},function(t,e){t.exports=function(t,e,i){var n=t.indexOf(e);if(-1===n||i<0||i>=t.length)throw new Error("Supplied index out of bounds");return n!==i&&(t.splice(n,1),t.splice(i,0,e)),e}},function(t,e){t.exports=function(t,e){var i,n,r=t.indexOf(e);return-1!==r&&r<t.length-1&&(i=t[r+1],n=t.indexOf(i),t[r]=i,t[n]=e),t}},function(t,e){t.exports=function(t,e,i,n){for(var r,s=[],a=t;a<=e;a++)i||n?(r=i?i+a.toString():a.toString(),n&&(r=r.concat(n)),s.push(r)):s.push(a);return s}},function(t,e,i){var n=i(332);t.exports=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=null),void 0===i&&(i=1),null===e&&(e=t,t=0);for(var r=[],s=Math.max(n((e-t)/(i||1)),0),a=0;a<s;a++)r.push(t),t+=i;return r}},function(t,e,i){var n=i(80);t.exports=function(t,e,i,r){if(void 0===r&&(r=t),e<0||e>t.length-1)throw new Error("Index out of bounds");var s=n(t,e);return i&&i.call(r,s),s}},function(t,e,i){var n=i(68);t.exports=function(t,e,i,r,s){if(void 0===e&&(e=0),void 0===i&&(i=t.length),void 0===s&&(s=t),n(t,e,i)){var a=i-e,o=t.splice(e,a);if(r)for(var h=0;h<o.length;h++){var l=o[h];r.call(s,l)}return o}return[]}},function(t,e,i){var n=i(80);t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=t.length);var r=e+Math.floor(Math.random()*i);return n(t,r)}},function(t,e){t.exports=function(t,e,i){var n=t.indexOf(e),r=t.indexOf(i);return-1!==n&&-1===r&&(t[n]=i,!0)}},function(t,e){t.exports=function(t,e){var i=t.indexOf(e);return-1!==i&&0<i&&(t.splice(i,1),t.unshift(e)),e}},function(t,e,i){var n=i(68);t.exports=function(t,e,i,r,s){if(void 0===r&&(r=0),void 0===s&&(s=t.length),n(t,r,s))for(var a=r;a<s;a++){var o=t[a];o.hasOwnProperty(e)&&(o[e]=i)}return t}},function(t,e){t.exports=function(t,e,i){if(e!==i){var n=t.indexOf(e),r=t.indexOf(i);if(n<0||r<0)throw new Error("Supplied items must be elements of the same array");return t[n]=i,t[r]=e,t}}},function(t,e,i){var n=i(0),r=i(186),s=i(23),a=i(22),o=new n({Extends:r,initialize:function(t){r.call(this),this.scene=t,this.systems=t.sys,t.sys.events.once(a.BOOT,this.boot,this),t.sys.events.on(a.START,this.start,this)},boot:function(){this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(a.PRE_UPDATE,this.update,this),t.on(a.UPDATE,this.sceneUpdate,this),t.once(a.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(t,e){for(var i=this._active,n=i.length,r=0;r<n;r++){var s=i[r];s.active&&s.preUpdate.call(s,t,e)}},shutdown:function(){for(var t=this._active.length;t--;)this._active[t].destroy(!0);for(t=this._pending.length;t--;)this._pending[t].destroy(!0);for(t=this._destroy.length;t--;)this._destroy[t].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var e=this.systems.events;e.off(a.PRE_UPDATE,this.preUpdate,this),e.off(a.UPDATE,this.sceneUpdate,this),e.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});s.register("UpdateList",o,"updateList"),t.exports=o},function(t,e,i){t.exports={PROCESS_QUEUE_ADD:i(943),PROCESS_QUEUE_REMOVE:i(944)}},function(t,e){t.exports="add"},function(t,e){t.exports="remove"},function(t,e){t.exports=function(t,e,i){if(void 0===i)return{local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],scaleX:0,scaleY:0};var n,r,s,a,o,h,l=t.text,u=l.length,c=t.maxWidth,d=t.wordWrapCharCode,f=Number.MAX_VALUE,p=Number.MAX_VALUE,g=0,m=0,y=t.fontData.chars,v=t.fontData.lineHeight,_=t.letterSpacing,x=0,w=0,b=0,T=null,E=0,A=t.fontSize/t.fontData.size,S=A*t.scaleX,C=A*t.scaleY,O=null,P=0,R=[],M=Number.MAX_VALUE,L=0,I=0,k=0,D=[],F=null;if(0<c){for(G=0;G<u;G++)10!==(b=l.charCodeAt(G))?(T=y[b])&&(null!==O&&(n=T.kerning[P]),b===d?null!==F&&(D.push({word:F.word,i:F.i,x:F.x*S,y:F.y*C,w:F.w*S,h:F.h*C,cr:!1}),F=null):(null===F&&(F={word:"",i:G,x:x,y:w,w:0,h:v,cr:!1}),F.word=F.word.concat(l[G]),F.w+=T.xOffset+T.xAdvance+(void 0!==n?n:0)),x+=T.xAdvance+_,O=T,P=b):(null!==F&&(D.push({word:F.word,i:F.i,x:F.x*S,y:F.y*C,w:F.w*S,h:F.h*C,cr:!0}),F=null),x=0,w+=v,O=null);null!==F&&D.push({word:F.word,i:F.i,x:F.x*S,y:F.y*C,w:F.w*S,h:F.h*C,cr:!1}),O=null;for(var B=P=w=x=0,N=[],G=0;G<D.length;G++){var Y,z=D[G],U=z.x,X=z.x+z.w;Y&&(B=U-(U-(Y.x+Y.w)+Y.w),Y=null),c<U-B||c<X-B?(N.push(z.i-1),Y=z.cr?(N.push(z.i+z.word.length),B=0,null):z):z.cr&&(N.push(z.i+z.word.length),B=0,Y=null)}for(G=N.length-1;0<=G;G--)r=l,s=N[G],l=r.substr(0,s)+"\n"+r.substr(s+1);u=(i.wrappedText=l).length,D=[],F=null}for(G=0;G<u;G++)10!==(b=l.charCodeAt(G))?(T=y[b])&&(E=x,null!==O&&(E+=void 0!==(a=T.kerning[P])?a:0),E<f&&(f=E),w<p&&(p=w),g<(o=E+T.xAdvance)&&(g=o),m<(h=w+v)&&(m=h),b===d?null!==F&&(D.push({word:F.word,i:F.i,x:F.x*S,y:F.y*C,w:F.w*S,h:F.h*C}),F=null):(null===F&&(F={word:"",i:G,x:x,y:w,w:0,h:v}),F.word=F.word.concat(l[G]),F.w+=T.xOffset+T.xAdvance+(void 0!==a?a:0)),x+=T.xAdvance+_,O=T,P=b,k=o*A):(null!==F&&(D.push({word:F.word,i:F.i,x:F.x*S,y:F.y*C,w:F.w*S,h:F.h*C}),F=null),x=0,w+=v,O=null,L<(R[I]=k)&&(L=k),k<M&&(M=k),I++,k=0);null!==F&&D.push({word:F.word,i:F.i,x:F.x*S,y:F.y*C,w:F.w*S,h:F.h*C}),L<(R[I]=k)&&(L=k),k<M&&(M=k);var V=i.local,H=i.global,j=i.lines;return V.x=f*A,V.y=p*A,V.width=g*A,V.height=m*A,H.x=t.x-t.displayOriginX+f*S,H.y=t.y-t.displayOriginY+p*C,H.width=g*S,H.height=m*C,j.shortest=M,j.longest=L,j.lengths=R,e&&(V.x=Math.round(V.x),V.y=Math.round(V.y),V.width=Math.round(V.width),V.height=Math.round(V.height),H.x=Math.round(H.x),H.y=Math.round(H.y),H.width=Math.round(H.width),H.height=Math.round(H.height),j.shortest=Math.round(M),j.longest=Math.round(L)),i.words=D,i.lines.height=v,i.scaleX=t.scaleX,i.scaleY=t.scaleY,i}},function(t,e,i){var n=i(187);t.exports=function(t,e,i,r,s,a,o){var h=t.sys.textures.getFrame(i,r),l=t.sys.cache.xml.get(s);if(h&&l){var u=n(l,a,o,h);return t.sys.cache.bitmapFont.add(e,{data:u,texture:i,frame:r}),!0}return!1}},function(t,e,i){var n=i(1),r=i(1);n=i(948),r=i(949),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e,i){var n=i(9);t.exports=function(t,e,i,r,s){var a=e._text,o=a.length;if(0!==o){var h=this.pipeline;t.setPipeline(h,e);var l=h._tempMatrix1,u=h._tempMatrix2,c=h._tempMatrix3;u.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),l.copyFrom(r.matrix),s?(l.multiplyWithOffset(s,-r.scrollX*e.scrollFactorX,-r.scrollY*e.scrollFactorY),u.e=e.x,u.f=e.y):(u.e-=r.scrollX*e.scrollFactorX,u.f-=r.scrollY*e.scrollFactorY),l.multiply(u,c);var d=e.frame,f=d.glTexture,p=d.cutX,g=d.cutY,m=f.width,y=f.height,v=e._isTinted&&e.tintFill,_=n.getTintAppendFloatAlpha(e._tintTL,r.alpha*e._alphaTL),x=n.getTintAppendFloatAlpha(e._tintTR,r.alpha*e._alphaTR),w=n.getTintAppendFloatAlpha(e._tintBL,r.alpha*e._alphaBL),b=n.getTintAppendFloatAlpha(e._tintBR,r.alpha*e._alphaBR);h.setTexture2D(f,0);var T,E,A,S,C,O,P=0,R=0,M=0,L=e._letterSpacing,I=e.fontData,k=I.chars,D=I.lineHeight,F=e._fontSize/I.size,B=e._align,N=0,G=0,Y=e.getTextBounds(!1);0<e.maxWidth&&(o=(a=Y.wrappedText).length);var z=e._bounds.lines;1===B?G=(z.longest-z.lengths[0])/2:2===B&&(G=z.longest-z.lengths[0]);for(var U,X,V,H,j,W,K,q,$,J,Z,Q,tt,et,it,nt,rt,st,at=r.roundPixels,ot=0;ot<o;ot++)10!==(T=a.charCodeAt(ot))?(st=k[T])&&(E=p+st.x,A=g+st.y,S=st.width,C=st.height,U=st.xOffset+P,X=st.yOffset+R,null!==O&&(U+=void 0!==(V=st.kerning[M])?V:0),P+=st.xAdvance+L,O=st,M=T,0!==S&&0!==C&&32!==T&&(U*=F,X*=F,U-=e.displayOriginX,H=E/m,j=A/y,W=(E+S)/m,K=(A+C)/y,q=(U+=G)+S*F,$=(X-=e.displayOriginY)+C*F,J=c.getX(U,X),Z=c.getY(U,X),Q=c.getX(U,$),tt=c.getY(U,$),et=c.getX(q,$),it=c.getY(q,$),nt=c.getX(q,X),rt=c.getY(q,X),at&&(J=Math.round(J),Z=Math.round(Z),Q=Math.round(Q),tt=Math.round(tt),et=Math.round(et),it=Math.round(it),nt=Math.round(nt),rt=Math.round(rt)),h.batchQuad(J,Z,Q,tt,et,it,nt,rt,H,j,W,K,_,x,w,b,v,f,0))):(N++,1===B?G=(z.longest-z.lengths[N])/2:2===B&&(G=z.longest-z.lengths[N]),P=0,R+=D,O=null)}}},function(t,e,i){var n=i(28);t.exports=function(t,e,i,r,s){var a=e._text,o=a.length,h=t.currentContext;if(0!==o&&n(t,h,e,r,s)){var l,u=e.frame,c=e.fontData.chars,d=e.fontData.lineHeight,f=e._letterSpacing,p=0,g=0,m=null,y=0,v=0,_=0,x=0,w=0,b=0,T=null,E=0,A=e.frame.source.image,S=u.cutX,C=u.cutY,O=e._fontSize/e.fontData.size,P=e._align,R=0,M=0,L=e.getTextBounds(!1);0<e.maxWidth&&(o=(a=L.wrappedText).length);var I=e._bounds.lines;1===P?M=(I.longest-I.lengths[0])/2:2===P&&(M=I.longest-I.lengths[0]),h.translate(-e.displayOriginX,-e.displayOriginY);for(var k,D=r.roundPixels,F=0;F<o;F++)10!==(l=a.charCodeAt(F))?(m=c[l])&&(y=S+m.x,v=C+m.y,_=m.width,x=m.height,w=m.xOffset+p,b=m.yOffset+g,null!==T&&(w+=void 0!==(k=m.kerning[E])?k:0),w*=O,b*=O,w+=M,p+=m.xAdvance+f,T=m,E=l,0!==_&&0!==x&&32!==l&&(D&&(w=Math.round(w),b=Math.round(b)),h.save(),h.translate(w,b),h.scale(O,O),h.drawImage(A,y,v,_,x,0,0,_,x),h.restore())):(R++,1===P?M=(I.longest-I.lengths[R])/2:2===P&&(M=I.longest-I.lengths[R]),p=0,g+=d,T=null);h.restore()}}},function(t,e,i){var n=i(1),r=i(1);n=i(951),r=i(952),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e,i){var n=i(9);t.exports=function(t,e,i,r,s){var a=e.getRenderList();if(0!==a.length){var o=this.pipeline;t.setPipeline(o,e);var h=r.scrollX*e.scrollFactorX,l=r.scrollY*e.scrollFactorY,u=o._tempMatrix1;u.copyFrom(r.matrix),s&&(u.multiplyWithOffset(s,-h,-l),l=h=0);for(var c=e.x-h,d=e.y-l,f=-1,p=r.alpha*e.alpha,g=r.roundPixels,m=0;m<a.length;m++){var y,v,_,x,w,b,T,E,A,S,C,O=a[m],P=O.frame,R=O.alpha*p;0!=R&&(y=P.width,v=P.height,_=c+O.x+P.x,x=d+O.y+P.y,O.flipX&&(y*=-1,_+=P.width),O.flipY&&(v*=-1,x+=P.height),w=_+y,b=x+v,T=u.getX(_,x),E=u.getY(_,x),A=u.getX(w,b),S=u.getY(w,b),C=n.getTintAppendFloatAlpha(O.tint,R),P.sourceIndex!==f&&(o.setTexture2D(P.glTexture,0),f=P.sourceIndex),g&&(T=Math.round(T),E=Math.round(E),A=Math.round(A),S=Math.round(S)),o.batchQuad(T,E,T,S,A,S,A,E,P.u0,P.v0,P.u1,P.v1,C,C,C,C,!1,P.glTexture,0)&&(f=-1))}}}},function(t,e){t.exports=function(t,e,i,n,r){var s=e.getRenderList();if(0!==s.length){var a=t.currentContext,o=n.alpha*e.alpha;if(0!=o){a.globalCompositeOperation=t.blendModes[e.blendMode],a.imageSmoothingEnabled=!(!t.antialias||e.frame.source.scaleMode);var h=e.x-n.scrollX*e.scrollFactorX,l=e.y-n.scrollY*e.scrollFactorY;a.save(),r&&r.copyToContext(a);for(var u=n.roundPixels,c=0;c<s.length;c++){var d=s[c],f=d.flipX||d.flipY,p=d.frame,g=p.canvasData,m=p.x,y=p.y,v=1,_=1,x=d.alpha*o;0!=x&&(a.globalAlpha=x,f?(d.flipX&&(v=-1,m-=g.width),d.flipY&&(_=-1,y-=g.height),a.save(),a.translate(d.x+h,d.y+l),a.scale(v,_),a.drawImage(p.source.image,g.x,g.y,g.width,g.height,m,y,g.width,g.height),a.restore()):(u&&(m=Math.round(m),y=Math.round(y)),a.drawImage(p.source.image,g.x,g.y,g.width,g.height,m+d.x+h,y+d.y+l,g.width,g.height)))}a.restore()}}}},function(t,e,i){var n=i(0),r=i(94),s=new n({initialize:function(t,e,i,n,r){this.parent=t,this.x=e,this.y=i,this.frame=n,this.data={},this.tint=16777215,this._visible=r,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(t){return void 0===t?this.frame=this.parent.frame:t instanceof r&&t.texture===this.parent.texture?this.frame=t:this.frame=this.parent.texture.get(t),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(t,e,i){return this.x=t,this.y=e,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,i&&this.setFrame(i),this},setPosition:function(t,e){return this.x=t,this.y=e,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,e){return this.flipX=t,this.flipY=e,this},setVisible:function(t){return this.visible=t,this},setAlpha:function(t){return this.alpha=t,this},setTint:function(t){return this.tint=t,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(t){this.parent.dirty|=this._visible!==t,this._visible=t}},alpha:{get:function(){return this._alpha},set:function(t){this.parent.dirty|=0<this._alpha!=0<t,this._alpha=t}}});t.exports=s},function(t,e,i){var n=i(1),r=i(1);n=i(955),r=i(956),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e){t.exports=function(t,e,i,n,r){var s=e.list;if(0!==s.length){var a=e.localTransform;r?(a.loadIdentity(),a.multiply(r),a.translate(e.x,e.y),a.rotate(e.rotation),a.scale(e.scaleX,e.scaleY)):a.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);var o=-1!==e.blendMode;o||t.setBlendMode(0);for(var h=e.alpha,l=e.scrollFactorX,u=e.scrollFactorY,c=s,d=s.length,f=0;f<d;f++){var p,g,m,y,v,_,x,w,b=s[f];b.willRender(n)&&(y=void 0!==b.alphaTopLeft?(p=b.alphaTopLeft,g=b.alphaTopRight,m=b.alphaBottomLeft,b.alphaBottomRight):m=g=p=b.alpha,v=b.scrollFactorX,_=b.scrollFactorY,o||b.blendMode===t.currentBlendMode||t.setBlendMode(b.blendMode),(x=b.mask)&&x.preRenderWebGL(t,b,n),(w=b.type)!==t.currentType&&(t.newType=!0,t.currentType=w),t.nextTypeMatch=f<d-1&&c[f+1].type===t.currentType,b.setScrollFactor(v*l,_*u),b.setAlpha(p*h,g*h,m*h,y*h),b.renderWebGL(t,b,i,n,a),b.setAlpha(p,g,m,y),b.setScrollFactor(v,_),x&&x.postRenderWebGL(t,n),t.newType=!1)}}}},function(t,e){t.exports=function(t,e,i,n,r){var s=e.list;if(0!==s.length){var a=e.localTransform;r?(a.loadIdentity(),a.multiply(r),a.translate(e.x,e.y),a.rotate(e.rotation),a.scale(e.scaleX,e.scaleY)):a.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);var o=-1!==e.blendMode;o||t.setBlendMode(0);var h=e._alpha,l=e.scrollFactorX,u=e.scrollFactorY;e.mask&&e.mask.preRenderCanvas(t,null,n);for(var c=0;c<s.length;c++){var d,f,p,g=s[c];g.willRender(n)&&(d=g.alpha,f=g.scrollFactorX,p=g.scrollFactorY,o||g.blendMode===t.currentBlendMode||t.setBlendMode(g.blendMode),g.setScrollFactor(f*l,p*u),g.setAlpha(d*h),g.renderCanvas(t,g,i,n,a),g.setAlpha(d),g.setScrollFactor(f,p))}e.mask&&e.mask.postRenderCanvas(t)}}},function(t,e,i){var n=i(1),r=i(1);n=i(396),r=i(396),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e){t.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(t,e,i){var n=i(1),r=i(1);n=i(960),r=i(961),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e,i){var n=i(9);t.exports=function(t,e,i,r,s){var a=e.text,o=a.length;if(0!==o){var h=this.pipeline;t.setPipeline(h,e);var l=0<e.cropWidth||0<e.cropHeight;l&&(h.flush(),t.pushScissor(e.x,e.y,e.cropWidth*e.scaleX,e.cropHeight*e.scaleY));var u=h._tempMatrix1,c=h._tempMatrix2,d=h._tempMatrix3,f=h._tempMatrix4;c.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),u.copyFrom(r.matrix),s?(u.multiplyWithOffset(s,-r.scrollX*e.scrollFactorX,-r.scrollY*e.scrollFactorY),c.e=e.x,c.f=e.y):(c.e-=r.scrollX*e.scrollFactorX,c.f-=r.scrollY*e.scrollFactorY),u.multiply(c,d);var p=e.frame,g=p.glTexture,m=p.cutX,y=p.cutY,v=g.width,_=g.height,x=e._isTinted&&e.tintFill,w=n.getTintAppendFloatAlpha(e._tintTL,r.alpha*e._alphaTL),b=n.getTintAppendFloatAlpha(e._tintTR,r.alpha*e._alphaTR),T=n.getTintAppendFloatAlpha(e._tintBL,r.alpha*e._alphaBL),E=n.getTintAppendFloatAlpha(e._tintBR,r.alpha*e._alphaBR);h.setTexture2D(g,0);var A,S,C,O,P,R,M=0,L=0,I=0,k=e.letterSpacing,D=e.scrollX,F=e.scrollY,B=e.fontData,N=B.chars,G=B.lineHeight,Y=e.fontSize/B.size,z=0,U=e._align,X=0,V=0;e.getTextBounds(!1);var H=e._bounds.lines;1===U?V=(H.longest-H.lengths[0])/2:2===U&&(V=H.longest-H.lengths[0]);for(var j,W,K,q,$,J,Z,Q,tt,et,it,nt,rt,st,at,ot,ht,lt=r.roundPixels,ut=e.displayCallback,ct=e.callbackData,dt=0;dt<o;dt++)10!==(A=a.charCodeAt(dt))?(ht=N[A])&&(S=m+ht.x,C=y+ht.y,O=ht.width,P=ht.height,K=ht.xOffset+M-D,q=ht.yOffset+L-F,null!==R&&(K+=void 0!==(j=ht.kerning[I])?j:0),M+=ht.xAdvance+k,R=ht,I=A,0!==O&&0!==P&&32!==A&&(Y=e.fontSize/e.fontData.size,z=0,ut&&(ct.color=0,ct.tint.topLeft=w,ct.tint.topRight=b,ct.tint.bottomLeft=T,ct.tint.bottomRight=E,ct.index=dt,ct.charCode=A,ct.x=K,ct.y=q,ct.scale=Y,ct.rotation=z,ct.data=ht.data,K=(W=ut(ct)).x,q=W.y,Y=W.scale,z=W.rotation,E=W.color?(w=W.color,b=W.color,T=W.color,W.color):(w=W.tint.topLeft,b=W.tint.topRight,T=W.tint.bottomLeft,W.tint.bottomRight),w=n.getTintAppendFloatAlpha(w,r.alpha*e._alphaTL),b=n.getTintAppendFloatAlpha(b,r.alpha*e._alphaTR),T=n.getTintAppendFloatAlpha(T,r.alpha*e._alphaBL),E=n.getTintAppendFloatAlpha(E,r.alpha*e._alphaBR)),K*=Y,q*=Y,K-=e.displayOriginX,q-=e.displayOriginY,K+=V,f.applyITRS(K,q,z,Y,Y),d.multiply(f,c),$=S/v,J=C/_,Z=(S+O)/v,Q=(C+P)/_,tt=c.e,et=c.f,it=P*c.c+c.e,nt=P*c.d+c.f,rt=O*c.a+P*c.c+c.e,st=O*c.b+P*c.d+c.f,at=O*c.a+c.e,ot=O*c.b+c.f,lt&&(tt=Math.round(tt),et=Math.round(et),it=Math.round(it),nt=Math.round(nt),rt=Math.round(rt),st=Math.round(st),at=Math.round(at),ot=Math.round(ot)),h.batchQuad(tt,et,it,nt,rt,st,at,ot,$,J,Z,Q,w,b,T,E,x,g,0))):(X++,1===U?V=(H.longest-H.lengths[X])/2:2===U&&(V=H.longest-H.lengths[X]),M=0,L+=G,R=null);l&&(h.flush(),t.popScissor())}}},function(t,e,i){var n=i(28);t.exports=function(t,e,i,r,s){var a=e._text,o=a.length,h=t.currentContext;if(0!==o&&n(t,h,e,r,s)){var l,u=e.frame,c=e.displayCallback,d=e.callbackData,f=e.fontData.chars,p=e.fontData.lineHeight,g=e._letterSpacing,m=0,y=0,v=null,_=0,x=0,w=0,b=0,T=0,E=0,A=null,S=0,C=e.frame.source.image,O=u.cutX,P=u.cutY,R=0,M=0,L=e._fontSize/e.fontData.size,I=e._align,k=0,D=0;e.getTextBounds(!1);var F=e._bounds.lines;1===I?D=(F.longest-F.lengths[0])/2:2===I&&(D=F.longest-F.lengths[0]),h.translate(-e.displayOriginX,-e.displayOriginY);var B=r.roundPixels;0<e.cropWidth&&0<e.cropHeight&&(h.beginPath(),h.rect(0,0,e.cropWidth,e.cropHeight),h.clip());for(var N,G,Y=0;Y<o;Y++)M=L,R=0,10!==(l=a.charCodeAt(Y))?(v=f[l])&&(_=O+v.x,x=P+v.y,w=v.width,b=v.height,T=v.xOffset+m-e.scrollX,E=v.yOffset+y-e.scrollY,null!==A&&(T+=void 0!==(N=v.kerning[S])?N:0),c&&(d.index=Y,d.charCode=l,d.x=T,d.y=E,d.scale=M,d.rotation=R,d.data=v.data,T=(G=c(d)).x,E=G.y,M=G.scale,R=G.rotation),T*=M,E*=M,T+=D,m+=v.xAdvance+g,A=v,S=l,0!==w&&0!==b&&32!==l&&(B&&(T=Math.round(T),E=Math.round(E)),h.save(),h.translate(T,E),h.rotate(R),h.scale(M,M),h.drawImage(C,_,x,w,b,0,0,w,b),h.restore())):(k++,1===I?D=(F.longest-F.lengths[k])/2:2===I&&(D=F.longest-F.lengths[k]),m=0,y+=p,A=null);h.restore()}}},function(t,e,i){var n=i(1),r=i(1);n=i(963),r=i(964),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e){t.exports=function(t,e,i,n,r){var s=t.currentPipeline;t.clearPipeline();var a=t._tempMatrix1,o=t._tempMatrix2,h=t._tempMatrix3;o.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),a.copyFrom(n.matrix),r?(a.multiplyWithOffset(r,-n.scrollX*e.scrollFactorX,-n.scrollY*e.scrollFactorY),o.e=e.x,o.f=e.y):(o.e-=n.scrollX*e.scrollFactorX,o.f-=n.scrollY*e.scrollFactorY),a.multiply(o,h),e.render.call(e,t,n,h),t.rebindPipeline(s)}},function(t,e){},function(t,e,i){var n=i(1),r=i(1);n=i(966),i(401),r=i(401),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e,i){function n(t,e,i){this.x=t,this.y=e,this.width=i}function r(t,e,i){this.points=[],this.pointsLength=1,this.points[0]=new n(t,e,i)}var s=i(192),a=i(9),o=[];t.exports=function(t,e,i,h,l){if(0!==e.commandBuffer.length){var u=this.pipeline;t.setPipeline(u,e);var c=e._tempMatrix1,d=e._tempMatrix2,f=e._tempMatrix3;f.loadIdentity(),d.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),c.copyFrom(h.matrix),l?(c.multiplyWithOffset(l,-h.scrollX*e.scrollFactorX,-h.scrollY*e.scrollFactorY),d.e=e.x,d.f=e.y):(d.e-=h.scrollX*e.scrollFactorX,d.f-=h.scrollY*e.scrollFactorY),c.multiply(d);for(var p=e.commandBuffer,g=h.alpha*e.alpha,m=1,y=u.fillTint,v=u.strokeTint,_=0,x=0,w=0,b=2*Math.PI,T=[],E=0,A=!1,S=null,C=a.getTintAppendFloatAlphaAndSwap,O=t.blankTexture.glTexture,P=0;P<p.length;P++)switch(p[P]){case s.BEGIN_PATH:T.length=0,A=!(S=null);break;case s.CLOSE_PATH:A=!1,S&&S.points.length&&S.points.push(S.points[0]);break;case s.FILL_PATH:for(E=0;E<T.length;E++)u.setTexture2D(O),u.batchFillPath(T[E].points,f,c);break;case s.STROKE_PATH:for(E=0;E<T.length;E++)u.setTexture2D(O),u.batchStrokePath(T[E].points,m,A,f,c);break;case s.LINE_STYLE:m=p[++P];var R=C(p[++P],p[++P]*g);v.TL=R,v.TR=R,v.BL=R,v.BR=R;break;case s.FILL_STYLE:var M=C(p[++P],p[++P]*g);y.TL=M,y.TR=M,y.BL=M,y.BR=M;break;case s.GRADIENT_FILL_STYLE:var L=p[++P]*g;y.TL=C(p[++P],L),y.TR=C(p[++P],L),y.BL=C(p[++P],L),y.BR=C(p[++P],L);break;case s.GRADIENT_LINE_STYLE:m=p[++P];var I=p[++P]*g;v.TL=C(p[++P],I),v.TR=C(p[++P],I),v.BL=C(p[++P],I),v.BR=C(p[++P],I);break;case s.ARC:var k=0,D=p[++P],F=p[++P],B=p[++P],N=p[++P],G=p[++P],Y=p[++P],z=p[++P];for(G-=N,Y?G<-b?G=-b:0<G&&(G=G%b-b):b<G?G=b:G<0&&(G=b+G%b),null===S&&(S=new r(D+Math.cos(N)*B,F+Math.sin(N)*B,m),T.push(S),k+=.01);k<1+z;)w=G*k+N,_=D+Math.cos(w)*B,x=F+Math.sin(w)*B,S.points.push(new n(_,x,m)),k+=.01;w=G+N,_=D+Math.cos(w)*B,x=F+Math.sin(w)*B,S.points.push(new n(_,x,m));break;case s.FILL_RECT:u.setTexture2D(O),u.batchFillRect(p[++P],p[++P],p[++P],p[++P],f,c);break;case s.FILL_TRIANGLE:u.setTexture2D(O),u.batchFillTriangle(p[++P],p[++P],p[++P],p[++P],p[++P],p[++P],f,c);break;case s.STROKE_TRIANGLE:u.setTexture2D(O),u.batchStrokeTriangle(p[++P],p[++P],p[++P],p[++P],p[++P],p[++P],m,f,c);break;case s.LINE_TO:null!==S?S.points.push(new n(p[++P],p[++P],m)):(S=new r(p[++P],p[++P],m),T.push(S));break;case s.MOVE_TO:S=new r(p[++P],p[++P],m),T.push(S);break;case s.SAVE:o.push(f.copyToArray());break;case s.RESTORE:f.copyFromArray(o.pop());break;case s.TRANSLATE:D=p[++P],F=p[++P],f.translate(D,F);break;case s.SCALE:D=p[++P],F=p[++P],f.scale(D,F);break;case s.ROTATE:f.rotate(p[++P]);break;case s.SET_TEXTURE:var U=p[++P],X=p[++P];u.currentFrame=U,u.setTexture2D(U.glTexture,0),u.tintEffect=X,O=U.glTexture;break;case s.CLEAR_TEXTURE:u.currentFrame=t.blankTexture,u.tintEffect=2,O=t.blankTexture.glTexture}}}},function(t,e,i){var n=i(1),r=i(1);n=i(968),r=i(969),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e){t.exports=function(t,e,i,n,r){this.pipeline.batchSprite(e,n,r)}},function(t,e){t.exports=function(t,e,i,n,r){t.batchSprite(e,e.frame,n,r)}},function(t,e,i){var n=i(1),r=i(1);n=i(971),r=i(972),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e){t.exports=function(t,e,i,n,r){this.pipeline.batchSprite(e,n,r)}},function(t,e){t.exports=function(t,e,i,n,r){t.batchSprite(e,e.frame,n,r)}},function(t,e,i){t.exports={GravityWell:i(402),Particle:i(403),ParticleEmitter:i(404),ParticleEmitterManager:i(194),Zones:i(978)}},function(t,e,i){var n=i(0),r=i(119),s=i(69),a=i(2),o=i(58),h=new n({initialize:function(t,e,i,n){void 0===n&&(n=!1),this.propertyKey=e,this.propertyValue=i,this.defaultValue=i,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=n,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(t)},loadConfig:function(t,e){void 0===t&&(t={}),e&&(this.propertyKey=e),this.propertyValue=a(t,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(t){return this.propertyValue=t,this.setMethods()},setMethods:function(){var t,e,i,n=this.propertyValue,r=typeof n;return"number"==r?(this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate):Array.isArray(n)?this.onEmit=this.randomStaticValueEmit:"function"==r?this.emitOnly?this.onEmit=n:this.onUpdate=n:"object"==r&&(this.has(n,"random")||this.hasBoth(n,"start","end")||this.hasBoth(n,"min","max"))?(this.start=this.has(n,"start")?n.start:n.min,this.end=this.has(n,"end")?n.end:n.max,(t=this.hasBoth(n,"min","max")||!!n.random)&&(e=n.random,Array.isArray(e)&&(this.start=e[0],this.end=e[1]),this.onEmit=this.randomRangedValueEmit),this.has(n,"steps")?(this.steps=n.steps,this.counter=this.start,this.onEmit=this.steppedEmit):(i=this.has(n,"ease")?n.ease:"Linear",this.ease=s(i),t||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate)):"object"==r&&this.hasEither(n,"onEmit","onUpdate")&&(this.has(n,"onEmit")&&(this.onEmit=n.onEmit),this.has(n,"onUpdate")&&(this.onUpdate=n.onUpdate)),this},has:function(t,e){return t.hasOwnProperty(e)},hasBoth:function(t,e,i){return t.hasOwnProperty(e)&&t.hasOwnProperty(i)},hasEither:function(t,e,i){return t.hasOwnProperty(e)||t.hasOwnProperty(i)},defaultEmit:function(t,e,i){return i},defaultUpdate:function(t,e,i,n){return n},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var t=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[t]},randomRangedValueEmit:function(t,e){var i=r(this.start,this.end);return t&&t.data[e]&&(t.data[e].min=i),i},steppedEmit:function(){var t=this.counter,e=this.counter+(this.end-this.start)/this.steps;return this.counter=o(e,this.start,this.end),t},easedValueEmit:function(t,e){var i;return t&&t.data[e]&&((i=t.data[e]).min=this.start,i.max=this.end),this.start},easeValueUpdate:function(t,e,i){var n=t.data[e];return(n.max-n.min)*this.ease(i)+n.min}});t.exports=h},function(t,e,i){var n=i(1),r=i(1);n=i(976),r=i(977),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e,i){var n=i(9);t.exports=function(t,e,i,r,s){var a=e.emitters.list,o=a.length;if(0!==o){var h=this.pipeline,l=h._tempMatrix1.copyFrom(r.matrix),u=h._tempMatrix2,c=h._tempMatrix3,d=h._tempMatrix4.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);l.multiply(d),t.setPipeline(h);var f=r.roundPixels,p=e.defaultFrame.glTexture,g=n.getTintAppendFloatAlphaAndSwap;h.setTexture2D(p,0);for(var m=0;m<o;m++){var y=a[m],v=y.alive,_=v.length;if(y.visible&&0!==_){var x=r.scrollX*y.scrollFactorX,w=r.scrollY*y.scrollFactorY;s&&(l.multiplyWithOffset(s,-x,-w),w=x=0),t.setBlendMode(y.blendMode)&&h.setTexture2D(p,0),y.mask&&(y.mask.preRenderWebGL(t,y,r),h.setTexture2D(p,0));for(var b=0;b<_;b++){var T,E,A,S,C,O,P,R,M,L,I,k,D,F,B=v[b],N=B.alpha*r.alpha;N<=0||(E=-(T=B.frame).halfWidth,A=-T.halfHeight,S=E+T.width,C=A+T.height,c.applyITRS(0,0,B.rotation,B.scaleX,B.scaleY),c.e=B.x-x,c.f=B.y-w,l.multiply(c,u),O=u.getX(E,A),P=u.getY(E,A),R=u.getX(E,C),M=u.getY(E,C),L=u.getX(S,C),I=u.getY(S,C),k=u.getX(S,A),D=u.getY(S,A),f&&(O=Math.round(O),P=Math.round(P),R=Math.round(R),M=Math.round(M),L=Math.round(L),I=Math.round(I),k=Math.round(k),D=Math.round(D)),F=g(B.tint,N),h.batchQuad(O,P,R,M,L,I,k,D,T.u0,T.v0,T.u1,T.v1,F,F,F,F,0,p,0))}y.mask&&(y.mask.postRenderWebGL(t,r),h.setTexture2D(p,0))}}}}},function(t,e){t.exports=function(t,e,i,n,r){var s=e.emitters.list,a=s.length;if(0!==a){var o=t._tempMatrix1.copyFrom(n.matrix),h=t._tempMatrix2,l=t._tempMatrix3,u=t._tempMatrix4.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);o.multiply(u);var c=n.roundPixels,d=t.currentContext;d.save();for(var f=0;f<a;f++){var p=s[f],g=p.alive,m=g.length;if(p.visible&&0!==m){var y=n.scrollX*p.scrollFactorX,v=n.scrollY*p.scrollFactorY;r&&(o.multiplyWithOffset(r,-y,-v),v=y=0),d.globalCompositeOperation=t.blendModes[p.blendMode];for(var _=0;_<m;_++){var x,w,b,T,E=g[_],A=E.alpha*n.alpha;A<=0||(w=(x=E.frame).canvasData,b=-x.halfWidth,T=-x.halfHeight,l.applyITRS(0,0,E.rotation,E.scaleX,E.scaleY),l.e=E.x-y,l.f=E.y-v,o.multiply(l,h),d.globalAlpha=A,d.save(),h.copyToContext(d),c&&(b=Math.round(b),T=Math.round(T)),d.imageSmoothingEnabled=!(!t.antialias||x.source.scaleMode),d.drawImage(x.source.image,w.x,w.y,w.width,w.height,b,T,w.width,w.height),d.restore())}}}d.restore()}}},function(t,e,i){t.exports={DeathZone:i(405),EdgeZone:i(406),RandomZone:i(408)}},function(t,e,i){var n=i(1),r=i(1);n=i(980),r=i(981),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e,i){var n=i(9);t.exports=function(t,e,i,r,s){var a=e.frame,o=a.width,h=a.height,l=n.getTintAppendFloatAlpha;this.pipeline.batchTexture(e,a.glTexture,o,h,e.x,e.y,o,h,e.scaleX,e.scaleY,e.rotation,e.flipX,!e.flipY,e.scrollFactorX,e.scrollFactorY,e.displayOriginX,e.displayOriginY,0,0,o,h,l(e._tintTL,r.alpha*e._alphaTL),l(e._tintTR,r.alpha*e._alphaTR),l(e._tintBL,r.alpha*e._alphaBL),l(e._tintBR,r.alpha*e._alphaBR),e._isTinted&&e.tintFill,0,0,r,s),t.setBlankTexture(!0)}},function(t,e){t.exports=function(t,e,i,n,r){t.batchSprite(e,e.frame,n,r)}},function(t,e,i){var n=i(983),r=i(18)(!1,r={Parse:i(984)},n);t.exports=r},function(t,e){t.exports={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:"ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",TEXT_SET7:"AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:"ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789"}},function(t,e,i){var n=i(6);t.exports=function(t,e){var i=e.width,r=e.height,s=Math.floor(i/2),a=Math.floor(r/2),o=n(e,"chars","");if(""!==o){var h=n(e,"image",""),l=n(e,"offset.x",0),u=n(e,"offset.y",0),c=n(e,"spacing.x",0),d=n(e,"spacing.y",0),f=n(e,"lineSpacing",0),p=n(e,"charsPerRow",null);null===p&&(p=t.sys.textures.getFrame(h).width/i)>o.length&&(p=o.length);for(var g=l,m=u,y={retroFont:!0,font:h,size:i,lineHeight:r+f,chars:{}},v=0,_=0;_<o.length;_++){var x=o.charCodeAt(_);y.chars[x]={x:g,y:m,width:i,height:r,centerX:s,centerY:a,xOffset:0,yOffset:0,xAdvance:i,data:{},kerning:{}},++v===p?(v=0,g=l,m+=r+d):g+=i+c}return{data:y,frame:null,texture:h}}}},function(t,e,i){var n=i(1),r=i(1);n=i(986),r=i(987),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e,i){var n=i(9);t.exports=function(t,e,i,r,s){var a=e.pipeline;t.setPipeline(a,e);var o=a._tempMatrix1,h=a._tempMatrix2,l=a._tempMatrix3;h.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),o.copyFrom(r.matrix),s?(o.multiplyWithOffset(s,-r.scrollX*e.scrollFactorX,-r.scrollY*e.scrollFactorY),h.e=e.x,h.f=e.y):(h.e-=r.scrollX*e.scrollFactorX,h.f-=r.scrollY*e.scrollFactorY),o.multiply(h,l);var u=e.frame.glTexture,c=e.vertices,d=e.uv,f=e.colors,p=e.alphas,g=e.alpha,m=n.getTintAppendFloatAlphaAndSwap,y=r.roundPixels,v=c.length,_=Math.floor(.5*v);a.flush(),a.setTexture2D(u,0);var x=a.vertexViewF32,w=a.vertexViewU32,b=a.vertexCount*a.vertexComponentCount-1,T=0,E=e.tintFill;e.dirty&&e.updateVertices();for(var A=e.debugCallback,S=[],C=0;C<v;C+=2){var O=c[C+0],P=c[C+1],R=O*l.a+P*l.c+l.e,M=O*l.b+P*l.d+l.f;y&&(R=Math.round(R),M=Math.round(M)),x[++b]=R,x[++b]=M,x[++b]=d[C+0],x[++b]=d[C+1],x[++b]=E,w[++b]=m(f[T],r.alpha*(p[T]*g)),T++,A&&(S[C+0]=R,S[C+1]=M)}A&&A.call(e,e,v,S),a.vertexCount+=_}},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e,i){var n=t.canvas,r=t.context,s=t.style,a=[],o=0,h=i.length;0<s.maxLines&&s.maxLines<i.length&&(h=s.maxLines),s.syncFont(n,r);for(var l=0;l<h;l++){var u=s.strokeThickness;u+=r.measureText(i[l]).width,s.wordWrap&&(u-=r.measureText(" ").width),a[l]=Math.ceil(u),o=Math.max(o,a[l])}var c=e.fontSize+s.strokeThickness,d=c*h,f=t.lineSpacing;return 1<h&&(d+=f*(h-1)),{width:o,height:d,lines:h,lineWidths:a,lineSpacing:f,lineHeight:c}}},function(t,e,i){var n=i(1),r=i(1);n=i(990),r=i(991),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e,i){var n=i(9);t.exports=function(t,e,i,r,s){var a,o,h,l;0!==e.width&&0!==e.height&&(o=(a=e.frame).width,h=a.height,l=n.getTintAppendFloatAlpha,this.pipeline.batchTexture(e,a.glTexture,o,h,e.x,e.y,o/e.style.resolution,h/e.style.resolution,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.displayOriginX,e.displayOriginY,0,0,o,h,l(e._tintTL,r.alpha*e._alphaTL),l(e._tintTR,r.alpha*e._alphaTR),l(e._tintBL,r.alpha*e._alphaBL),l(e._tintBR,r.alpha*e._alphaBR),e._isTinted&&e.tintFill,0,0,r,s))}},function(t,e){t.exports=function(t,e,i,n,r){0!==e.width&&0!==e.height&&t.batchSprite(e,e.frame,n,r)}},function(t,e,i){var n=i(0),r=i(15),s=i(6),a=i(993),o={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|Mqgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},h=new n({initialize:function(t,e){this.parent=t,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(e,!1,!0);var i=s(e,"metrics",!1);this.metrics=i?{ascent:s(i,"ascent",0),descent:s(i,"descent",0),fontSize:s(i,"fontSize",0)}:a(this)},setStyle:function(t,e,i){for(var n in void 0===e&&(e=!0),void 0===i&&(i=!1),t&&t.hasOwnProperty("fontSize")&&"number"==typeof t.fontSize&&(t.fontSize=t.fontSize.toString()+"px"),o){var a=i?o[n][1]:this[n];this[n]=("wordWrapCallback"===n||"wordWrapCallbackScope"===n?s:r)(t,o[n][0],a)}var h=s(t,"font",null);null!==h&&this.setFont(h,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var l=s(t,"fill",null);return null!==l&&(this.color=l),e?this.update(!0):this.parent},syncFont:function(t,e){e.font=this._font},syncStyle:function(t,e){e.textBaseline="alphabetic",e.fillStyle=this.color,e.strokeStyle=this.stroke,e.lineWidth=this.strokeThickness,e.lineCap="round",e.lineJoin="round"},syncShadow:function(t,e){e?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)},update:function(t){return t&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=a(this)),this.parent.updateText()},setFont:function(t,e){void 0===e&&(e=!0);var i,n,r=t,a="",o="";return"string"!=typeof t?(r=s(t,"fontFamily","Courier"),a=s(t,"fontSize","16px"),o=s(t,"fontStyle","")):(n=0,o=2<(i=t.split(" ")).length?i[n++]:"",a=i[n++]||"16px",r=i[n++]||"Courier"),r===this.fontFamily&&a===this.fontSize&&o===this.fontStyle||(this.fontFamily=r,this.fontSize=a,this.fontStyle=o,e&&this.update(!0)),this.parent},setFontFamily:function(t){return this.fontFamily!==t&&(this.fontFamily=t,this.update(!0)),this.parent},setFontStyle:function(t){return this.fontStyle!==t&&(this.fontStyle=t,this.update(!0)),this.parent},setFontSize:function(t){return"number"==typeof t&&(t=t.toString()+"px"),this.fontSize!==t&&(this.fontSize=t,this.update(!0)),this.parent},setTestString:function(t){return this.testString=t,this.update(!0)},setFixedSize:function(t,e){return this.fixedWidth=t,this.fixedHeight=e,t&&(this.parent.width=t),e&&(this.parent.height=e),this.update(!1)},setBackgroundColor:function(t){return this.backgroundColor=t,this.update(!1)},setFill:function(t){return this.color=t,this.update(!1)},setColor:function(t){return this.color=t,this.update(!1)},setResolution:function(t){return this.resolution=t,this.update(!1)},setStroke:function(t,e){return void 0===e&&(e=this.strokeThickness),void 0===t&&0!==this.strokeThickness?(this.strokeThickness=0,this.update(!0)):this.stroke===t&&this.strokeThickness===e||(this.stroke=t,this.strokeThickness=e,this.update(!0)),this.parent},setShadow:function(t,e,i,n,r,s){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i="#000"),void 0===n&&(n=0),void 0===r&&(r=!1),void 0===s&&(s=!0),this.shadowOffsetX=t,this.shadowOffsetY=e,this.shadowColor=i,this.shadowBlur=n,this.shadowStroke=r,this.shadowFill=s,this.update(!1)},setShadowOffset:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.shadowOffsetX=t,this.shadowOffsetY=e,this.update(!1)},setShadowColor:function(t){return void 0===t&&(t="#000"),this.shadowColor=t,this.update(!1)},setShadowBlur:function(t){return void 0===t&&(t=0),this.shadowBlur=t,this.update(!1)},setShadowStroke:function(t){return this.shadowStroke=t,this.update(!1)},setShadowFill:function(t){return this.shadowFill=t,this.update(!1)},setWordWrapWidth:function(t,e){return void 0===e&&(e=!1),this.wordWrapWidth=t,this.wordWrapUseAdvanced=e,this.update(!1)},setWordWrapCallback:function(t,e){return void 0===e&&(e=null),this.wordWrapCallback=t,this.wordWrapCallbackScope=e,this.update(!1)},setAlign:function(t){return void 0===t&&(t="left"),this.align=t,this.update(!1)},setMaxLines:function(t){return void 0===t&&(t=0),this.maxLines=t,this.update(!1)},getTextMetrics:function(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}},toJSON:function(){var t={};for(var e in o)t[e]=this[e];return t.metrics=this.getTextMetrics(),t},destroy:function(){this.parent=void 0}});t.exports=h},function(t,e,i){var n=i(26);t.exports=function(t){var e=n.create(this),i=e.getContext("2d");t.syncFont(e,i);var r=Math.ceil(i.measureText(t.testString).width*t.baselineX),s=2*(a=r),a=a*t.baselineY|0;e.width=r,e.height=s,i.fillStyle="#f00",i.fillRect(0,0,r,s),i.font=t._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(t.testString,0,a);var o={ascent:0,descent:0,fontSize:0};if(!i.getImageData(0,0,r,s))return o.ascent=a,o.descent=6+a,o.fontSize=o.ascent+o.descent,n.remove(e),o;for(var h,l=i.getImageData(0,0,r,s).data,u=l.length,c=4*r,d=0,f=!1,p=0;p<a;p++){for(h=0;h<c;h+=4)if(255!==l[d+h]){f=!0;break}if(f)break;d+=c}for(o.ascent=a-p,d=u-c,f=!1,p=s;a<p;p--){for(h=0;h<c;h+=4)if(255!==l[d+h]){f=!0;break}if(f)break;d-=c}return o.descent=p-a,o.fontSize=o.ascent+o.descent,n.remove(e),o}},function(t,e,i){var n=i(1),r=i(1);n=i(995),r=i(996),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e,i){var n=i(9);t.exports=function(t,e,i,r,s){e.updateCanvas();var a=n.getTintAppendFloatAlpha;this.pipeline.batchTexture(e,e.fillPattern,e.displayFrame.width*e.tileScaleX,e.displayFrame.height*e.tileScaleY,e.x,e.y,e.width,e.height,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.originX*e.width,e.originY*e.height,0,0,e.width,e.height,a(e._tintTL,r.alpha*e._alphaTL),a(e._tintTR,r.alpha*e._alphaTR),a(e._tintBL,r.alpha*e._alphaBL),a(e._tintBR,r.alpha*e._alphaBR),e._isTinted&&e.tintFill,e.tilePositionX%e.displayFrame.width/e.displayFrame.width,e.tilePositionY%e.displayFrame.height/e.displayFrame.height,r,s)}},function(t,e){t.exports=function(t,e,i,n,r){e.updateCanvas(),t.batchSprite(e,e.frame,n,r)}},function(t,e,i){var n=i(1),r=i(1);n=i(998),r=i(999),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e){t.exports=function(t,e,i,n,r){e.videoTexture&&this.pipeline.batchSprite(e,n,r)}},function(t,e){t.exports=function(t,e,i,n,r){e.videoTexture&&t.batchSprite(e,e.frame,n,r)}},function(t,e,i){var n=i(1),r=i(1);n=i(1001),r=i(1002),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e,i){var n=i(98),r=i(70);t.exports=function(t,e,i,s,a){var o=this.pipeline,h=o._tempMatrix1,l=o._tempMatrix2,u=o._tempMatrix3;t.setPipeline(o),l.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),h.copyFrom(s.matrix),a?(h.multiplyWithOffset(a,-s.scrollX*e.scrollFactorX,-s.scrollY*e.scrollFactorY),l.e=e.x,l.f=e.y):(l.e-=s.scrollX*e.scrollFactorX,l.f-=s.scrollY*e.scrollFactorY),h.multiply(l,u);var c=e._displayOriginX,d=e._displayOriginY,f=s.alpha*e.alpha;e.isFilled&&n(o,u,e,f,c,d),e.isStroked&&r(o,e,f,c,d)}},function(t,e,i){var n=i(39),r=i(41),s=i(49),a=i(28);t.exports=function(t,e,i,o,h){var l,u=t.currentContext;a(t,u,e,o,h)&&(l=e.radius,u.beginPath(),u.arc(l-e.originX*(2*l),l-e.originY*(2*l),l,n(e._startAngle),n(e._endAngle),e.anticlockwise),e.closePath&&u.closePath(),e.isFilled&&(r(u,e),u.fill()),e.isStroked&&(s(u,e),u.stroke()),u.restore())}},function(t,e,i){var n=i(1),r=i(1);n=i(1004),r=i(1005),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e,i){var n=i(98),r=i(70);t.exports=function(t,e,i,s,a){var o=this.pipeline,h=o._tempMatrix1,l=o._tempMatrix2,u=o._tempMatrix3;t.setPipeline(o),l.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),h.copyFrom(s.matrix),a?(h.multiplyWithOffset(a,-s.scrollX*e.scrollFactorX,-s.scrollY*e.scrollFactorY),l.e=e.x,l.f=e.y):(l.e-=s.scrollX*e.scrollFactorX,l.f-=s.scrollY*e.scrollFactorY),h.multiply(l,u);var c=e._displayOriginX+e._curveBounds.x,d=e._displayOriginY+e._curveBounds.y,f=s.alpha*e.alpha;e.isFilled&&n(o,u,e,f,c,d),e.isStroked&&r(o,e,f,c,d)}},function(t,e,i){var n=i(41),r=i(49),s=i(28);t.exports=function(t,e,i,a,o){var h=t.currentContext;if(s(t,h,e,a,o)){var l=e._displayOriginX+e._curveBounds.x,u=e._displayOriginY+e._curveBounds.y,c=e.pathData,d=c.length-1,f=c[0]-l,p=c[1]-u;h.beginPath(),h.moveTo(f,p),e.closePath||(d-=2);for(var g=2;g<d;g+=2){var m=c[g]-l,y=c[g+1]-u;h.lineTo(m,y)}e.closePath&&h.closePath(),e.isFilled&&(n(h,e),h.fill()),e.isStroked&&(r(h,e),h.stroke()),h.restore()}}},function(t,e,i){var n=i(1),r=i(1);n=i(1007),r=i(1008),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e,i){var n=i(98),r=i(70);t.exports=function(t,e,i,s,a){var o=this.pipeline,h=o._tempMatrix1,l=o._tempMatrix2,u=o._tempMatrix3;t.setPipeline(o),l.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),h.copyFrom(s.matrix),a?(h.multiplyWithOffset(a,-s.scrollX*e.scrollFactorX,-s.scrollY*e.scrollFactorY),l.e=e.x,l.f=e.y):(l.e-=s.scrollX*e.scrollFactorX,l.f-=s.scrollY*e.scrollFactorY),h.multiply(l,u);var c=e._displayOriginX,d=e._displayOriginY,f=s.alpha*e.alpha;e.isFilled&&n(o,u,e,f,c,d),e.isStroked&&r(o,e,f,c,d)}},function(t,e,i){var n=i(41),r=i(49),s=i(28);t.exports=function(t,e,i,a,o){var h=t.currentContext;if(s(t,h,e,a,o)){var l=e._displayOriginX,u=e._displayOriginY,c=e.pathData,d=c.length-1,f=c[0]-l,p=c[1]-u;h.beginPath(),h.moveTo(f,p),e.closePath||(d-=2);for(var g=2;g<d;g+=2){var m=c[g]-l,y=c[g+1]-u;h.lineTo(m,y)}h.closePath(),e.isFilled&&(n(h,e),h.fill()),e.isStroked&&(r(h,e),h.stroke()),h.restore()}}},function(t,e,i){var n=i(1),r=i(1);n=i(1010),r=i(1011),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e,i){var n=i(9);t.exports=function(t,e,i,r,s){var a=this.pipeline,o=a._tempMatrix1,h=a._tempMatrix2,l=a._tempMatrix3;t.setPipeline(a),h.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),o.copyFrom(r.matrix),s?(o.multiplyWithOffset(s,-r.scrollX*e.scrollFactorX,-r.scrollY*e.scrollFactorY),h.e=e.x,h.f=e.y):(h.e-=r.scrollX*e.scrollFactorX,h.f-=r.scrollY*e.scrollFactorY),o.multiply(h,l),l.translate(-e._displayOriginX,-e._displayOriginY);var u,c,d=r.alpha*e.alpha,f=e.width,p=e.height,g=e.cellWidth,m=e.cellHeight,y=Math.ceil(f/g),v=Math.ceil(p/m),_=g,x=m,w=g-(y*g-f),b=m-(v*m-p),T=e.showCells,E=e.showAltCells,A=e.showOutline,S=0,C=0,O=0,P=0,R=0;if(A&&(_--,x--,w===g&&w--,b===m&&b--),T&&0<e.fillAlpha)for(u=a.fillTint,c=n.getTintAppendFloatAlphaAndSwap(e.fillColor,e.fillAlpha*d),u.TL=c,u.TR=c,u.BL=c,u.BR=c,C=0;C<v;C++)for(E&&(O=C%2),S=0;S<y;S++)E&&O?O=0:(O++,P=S<y-1?_:w,R=C<v-1?x:b,a.setTexture2D(),a.batchFillRect(S*g,C*m,P,R));if(E&&0<e.altFillAlpha)for(u=a.fillTint,c=n.getTintAppendFloatAlphaAndSwap(e.altFillColor,e.altFillAlpha*d),u.TL=c,u.TR=c,u.BL=c,u.BR=c,C=0;C<v;C++)for(E&&(O=C%2),S=0;S<y;S++)!E||O?(O=0,P=S<y-1?_:w,R=C<v-1?x:b,a.setTexture2D(),a.batchFillRect(S*g,C*m,P,R)):O=1;if(A&&0<e.outlineFillAlpha){var M=a.strokeTint,L=n.getTintAppendFloatAlphaAndSwap(e.outlineFillColor,e.outlineFillAlpha*d);for(M.TL=L,M.TR=L,M.BL=L,M.BR=L,S=1;S<y;S++){var I=S*g;a.setTexture2D(),a.batchLine(I,0,I,p,1,1,1,0,!1)}for(C=1;C<v;C++){var k=C*m;a.setTexture2D(),a.batchLine(0,k,f,k,1,1,1,0,!1)}}}},function(t,e,i){var n=i(41),r=i(49),s=i(28);t.exports=function(t,e,i,a,o){var h=t.currentContext;if(s(t,h,e,a,o)){var l=-e._displayOriginX,u=-e._displayOriginY,c=a.alpha*e.alpha,d=e.width,f=e.height,p=e.cellWidth,g=e.cellHeight,m=Math.ceil(d/p),y=Math.ceil(f/g),v=p,_=g,x=p-(m*p-d),w=g-(y*g-f),b=e.showCells,T=e.showAltCells,E=e.showOutline,A=0,S=0,C=0,O=0,P=0;if(E&&(v--,_--,x===p&&x--,w===g&&w--),b&&0<e.fillAlpha)for(n(h,e),S=0;S<y;S++)for(T&&(C=S%2),A=0;A<m;A++)T&&C?C=0:(C++,O=A<m-1?v:x,P=S<y-1?_:w,h.fillRect(l+A*p,u+S*g,O,P));if(T&&0<e.altFillAlpha)for(n(h,e,e.altFillColor,e.altFillAlpha*c),S=0;S<y;S++)for(T&&(C=S%2),A=0;A<m;A++)!T||C?(C=0,O=A<m-1?v:x,P=S<y-1?_:w,h.fillRect(l+A*p,u+S*g,O,P)):C=1;if(E&&0<e.outlineFillAlpha){for(r(h,e,e.outlineFillColor,e.outlineFillAlpha*c),A=1;A<m;A++){var R=A*p;h.beginPath(),h.moveTo(R+l,u),h.lineTo(R+l,f+u),h.stroke()}for(S=1;S<y;S++){var M=S*g;h.beginPath(),h.moveTo(l,M+u),h.lineTo(l+d,M+u),h.stroke()}}h.restore()}}},function(t,e,i){var n=i(1),r=i(1);n=i(1013),r=i(1014),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e,i){var n=i(9);t.exports=function(t,e,i,r,s){var a=this.pipeline,o=a._tempMatrix1,h=a._tempMatrix2,l=a._tempMatrix3;t.setPipeline(a),h.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),o.copyFrom(r.matrix),s?(o.multiplyWithOffset(s,-r.scrollX*e.scrollFactorX,-r.scrollY*e.scrollFactorY),h.e=e.x,h.f=e.y):(h.e-=r.scrollX*e.scrollFactorX,h.f-=r.scrollY*e.scrollFactorY),o.multiply(h,l);var u,c,d,f,p,g,m,y,v,_=e.width,x=e.height,w=_/2,b=_/e.projection,T=r.alpha*e.alpha;e.isFilled&&(e.showTop&&(u=n.getTintAppendFloatAlphaAndSwap(e.fillTop,T),c=l.getX(-w,-x),d=l.getY(-w,-x),f=l.getX(0,-b-x),p=l.getY(0,-b-x),g=l.getX(w,-x),m=l.getY(w,-x),y=l.getX(0,b-x),v=l.getY(0,b-x),a.setTexture2D(),a.batchQuad(c,d,f,p,g,m,y,v,0,0,1,1,u,u,u,u,2)),e.showLeft&&(u=n.getTintAppendFloatAlphaAndSwap(e.fillLeft,T),c=l.getX(-w,0),d=l.getY(-w,0),f=l.getX(0,b),p=l.getY(0,b),g=l.getX(0,b-x),m=l.getY(0,b-x),y=l.getX(-w,-x),v=l.getY(-w,-x),a.setTexture2D(),a.batchQuad(c,d,f,p,g,m,y,v,0,0,1,1,u,u,u,u,2)),e.showRight&&(u=n.getTintAppendFloatAlphaAndSwap(e.fillRight,T),c=l.getX(w,0),d=l.getY(w,0),f=l.getX(0,b),p=l.getY(0,b),g=l.getX(0,b-x),m=l.getY(0,b-x),y=l.getX(w,-x),v=l.getY(w,-x),a.setTexture2D(),a.batchQuad(c,d,f,p,g,m,y,v,0,0,1,1,u,u,u,u,2)))}},function(t,e,i){var n=i(41),r=i(28);t.exports=function(t,e,i,s,a){var o,h,l,u,c=t.currentContext;r(t,c,e,s,a)&&e.isFilled&&(o=e.width,h=e.height,l=o/2,u=o/e.projection,e.showTop&&(n(c,e,e.fillTop),c.beginPath(),c.moveTo(-l,-h),c.lineTo(0,-u-h),c.lineTo(l,-h),c.lineTo(l,-1),c.lineTo(0,u-1),c.lineTo(-l,-1),c.lineTo(-l,-h),c.fill()),e.showLeft&&(n(c,e,e.fillLeft),c.beginPath(),c.moveTo(-l,0),c.lineTo(0,u),c.lineTo(0,u-h),c.lineTo(-l,-h),c.lineTo(-l,0),c.fill()),e.showRight&&(n(c,e,e.fillRight),c.beginPath(),c.moveTo(l,0),c.lineTo(0,u),c.lineTo(0,u-h),c.lineTo(l,-h),c.lineTo(l,0),c.fill()),c.restore())}},function(t,e,i){var n=i(1),r=i(1);n=i(1016),r=i(1017),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e,i){var n=i(9);t.exports=function(t,e,i,r,s){var a=this.pipeline,o=a._tempMatrix1,h=a._tempMatrix2,l=a._tempMatrix3;t.setPipeline(a),h.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),o.copyFrom(r.matrix),s?(o.multiplyWithOffset(s,-r.scrollX*e.scrollFactorX,-r.scrollY*e.scrollFactorY),h.e=e.x,h.f=e.y):(h.e-=r.scrollX*e.scrollFactorX,h.f-=r.scrollY*e.scrollFactorY),o.multiply(h,l);var u,c,d,f,p,g,m,y,v,_=e.width,x=e.height,w=_/2,b=_/e.projection,T=e.isReversed,E=r.alpha*e.alpha;e.isFilled&&(e.showTop&&T&&(u=n.getTintAppendFloatAlphaAndSwap(e.fillTop,E),c=l.getX(-w,-x),d=l.getY(-w,-x),f=l.getX(0,-b-x),p=l.getY(0,-b-x),g=l.getX(w,-x),m=l.getY(w,-x),y=l.getX(0,b-x),v=l.getY(0,b-x),a.setTexture2D(),a.batchQuad(c,d,f,p,g,m,y,v,0,0,1,1,u,u,u,u,2)),e.showLeft&&(u=n.getTintAppendFloatAlphaAndSwap(e.fillLeft,E),d=T?(c=l.getX(-w,-x),l.getY(-w,-x)):(c=l.getX(-w,0),l.getY(-w,0)),f=l.getX(0,b),p=l.getY(0,b),g=l.getX(0,b-x),m=l.getY(0,b-x),a.setTexture2D(),a.batchTri(c,d,f,p,g,m,0,0,1,1,u,u,u,2)),e.showRight&&(u=n.getTintAppendFloatAlphaAndSwap(e.fillRight,E),d=T?(c=l.getX(w,-x),l.getY(w,-x)):(c=l.getX(w,0),l.getY(w,0)),f=l.getX(0,b),p=l.getY(0,b),g=l.getX(0,b-x),m=l.getY(0,b-x),a.setTexture2D(),a.batchTri(c,d,f,p,g,m,0,0,1,1,u,u,u,2)))}},function(t,e,i){var n=i(41),r=i(28);t.exports=function(t,e,i,s,a){var o,h,l,u,c,d=t.currentContext;r(t,d,e,s,a)&&e.isFilled&&(o=e.width,h=e.height,l=o/2,u=o/e.projection,c=e.isReversed,e.showTop&&c&&(n(d,e,e.fillTop),d.beginPath(),d.moveTo(-l,-h),d.lineTo(0,-u-h),d.lineTo(l,-h),d.lineTo(0,u-h),d.fill()),e.showLeft&&(n(d,e,e.fillLeft),d.beginPath(),c?d.moveTo(-l,-h):d.moveTo(-l,0),d.lineTo(0,u),d.lineTo(0,u-h),d.fill()),e.showRight&&(n(d,e,e.fillRight),d.beginPath(),c?d.moveTo(l,-h):d.moveTo(l,0),d.lineTo(0,u),d.lineTo(0,u-h),d.fill()),d.restore())}},function(t,e,i){var n=i(1),r=i(1);n=i(1019),r=i(1020),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e,i){var n=i(9);t.exports=function(t,e,i,r,s){var a=this.pipeline,o=a._tempMatrix1,h=a._tempMatrix2;t.setPipeline(a),h.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),o.copyFrom(r.matrix),s?(o.multiplyWithOffset(s,-r.scrollX*e.scrollFactorX,-r.scrollY*e.scrollFactorY),h.e=e.x,h.f=e.y):(h.e-=r.scrollX*e.scrollFactorX,h.f-=r.scrollY*e.scrollFactorY);var l,u,c,d,f=e._displayOriginX,p=e._displayOriginY,g=r.alpha*e.alpha;e.isStroked&&(l=a.strokeTint,u=n.getTintAppendFloatAlphaAndSwap(e.strokeColor,e.strokeAlpha*g),l.TL=u,l.TR=u,l.BL=u,l.BR=u,c=e._startWidth,d=e._endWidth,a.setTexture2D(),a.batchLine(e.geom.x1-f,e.geom.y1-p,e.geom.x2-f,e.geom.y2-p,c,d,1,0,!1,h,o))}},function(t,e,i){var n=i(49),r=i(28);t.exports=function(t,e,i,s,a){var o,h,l=t.currentContext;r(t,l,e,s,a)&&(o=e._displayOriginX,h=e._displayOriginY,e.isStroked&&(n(l,e),l.beginPath(),l.moveTo(e.geom.x1-o,e.geom.y1-h),l.lineTo(e.geom.x2-o,e.geom.y2-h),l.stroke()),l.restore())}},function(t,e,i){var n=i(1),r=i(1);n=i(1022),r=i(1023),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e,i){var n=i(98),r=i(70);t.exports=function(t,e,i,s,a){var o=this.pipeline,h=o._tempMatrix1,l=o._tempMatrix2,u=o._tempMatrix3;t.setPipeline(o),l.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),h.copyFrom(s.matrix),a?(h.multiplyWithOffset(a,-s.scrollX*e.scrollFactorX,-s.scrollY*e.scrollFactorY),l.e=e.x,l.f=e.y):(l.e-=s.scrollX*e.scrollFactorX,l.f-=s.scrollY*e.scrollFactorY),h.multiply(l,u);var c=e._displayOriginX,d=e._displayOriginY,f=s.alpha*e.alpha;e.isFilled&&n(o,u,e,f,c,d),e.isStroked&&r(o,e,f,c,d)}},function(t,e,i){var n=i(41),r=i(49),s=i(28);t.exports=function(t,e,i,a,o){var h=t.currentContext;if(s(t,h,e,a,o)){var l=e._displayOriginX,u=e._displayOriginY,c=e.pathData,d=c.length-1,f=c[0]-l,p=c[1]-u;h.beginPath(),h.moveTo(f,p),e.closePath||(d-=2);for(var g=2;g<d;g+=2){var m=c[g]-l,y=c[g+1]-u;h.lineTo(m,y)}h.closePath(),e.isFilled&&(n(h,e),h.fill()),e.isStroked&&(r(h,e),h.stroke()),h.restore()}}},function(t,e,i){var n=i(1),r=i(1);n=i(1025),r=i(1026),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e,i){var n=i(70),r=i(9);t.exports=function(t,e,i,s,a){var o=this.pipeline,h=o._tempMatrix1,l=o._tempMatrix2,u=o._tempMatrix3;t.setPipeline(o),l.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),h.copyFrom(s.matrix),a?(h.multiplyWithOffset(a,-s.scrollX*e.scrollFactorX,-s.scrollY*e.scrollFactorY),l.e=e.x,l.f=e.y):(l.e-=s.scrollX*e.scrollFactorX,l.f-=s.scrollY*e.scrollFactorY),h.multiply(l,u);var c,d,f=e._displayOriginX,p=e._displayOriginY,g=s.alpha*e.alpha;e.isFilled&&(c=o.fillTint,d=r.getTintAppendFloatAlphaAndSwap(e.fillColor,e.fillAlpha*g),c.TL=d,c.TR=d,c.BL=d,c.BR=d,o.setTexture2D(),o.batchFillRect(-f,-p,e.width,e.height)),e.isStroked&&n(o,e,g,f,p)}},function(t,e,i){var n=i(41),r=i(49),s=i(28);t.exports=function(t,e,i,a,o){var h,l,u=t.currentContext;s(t,u,e,a,o)&&(h=e._displayOriginX,l=e._displayOriginY,e.isFilled&&(n(u,e),u.fillRect(-h,-l,e.width,e.height)),e.isStroked&&(r(u,e),u.beginPath(),u.rect(-h,-l,e.width,e.height),u.stroke()),u.restore())}},function(t,e,i){var n=i(1),r=i(1);n=i(1028),r=i(1029),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e,i){var n=i(98),r=i(70);t.exports=function(t,e,i,s,a){var o=this.pipeline,h=o._tempMatrix1,l=o._tempMatrix2,u=o._tempMatrix3;t.setPipeline(o),l.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),h.copyFrom(s.matrix),a?(h.multiplyWithOffset(a,-s.scrollX*e.scrollFactorX,-s.scrollY*e.scrollFactorY),l.e=e.x,l.f=e.y):(l.e-=s.scrollX*e.scrollFactorX,l.f-=s.scrollY*e.scrollFactorY),h.multiply(l,u);var c=e._displayOriginX,d=e._displayOriginY,f=s.alpha*e.alpha;e.isFilled&&n(o,u,e,f,c,d),e.isStroked&&r(o,e,f,c,d)}},function(t,e,i){var n=i(41),r=i(49),s=i(28);t.exports=function(t,e,i,a,o){var h=t.currentContext;if(s(t,h,e,a,o)){var l=e._displayOriginX,u=e._displayOriginY,c=e.pathData,d=c.length-1,f=c[0]-l,p=c[1]-u;h.beginPath(),h.moveTo(f,p),e.closePath||(d-=2);for(var g=2;g<d;g+=2){var m=c[g]-l,y=c[g+1]-u;h.lineTo(m,y)}h.closePath(),e.isFilled&&(n(h,e),h.fill()),e.isStroked&&(r(h,e),h.stroke()),h.restore()}}},function(t,e,i){var n=i(1),r=i(1);n=i(1031),r=i(1032),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e,i){var n=i(70),r=i(9);t.exports=function(t,e,i,s,a){var o=this.pipeline,h=o._tempMatrix1,l=o._tempMatrix2,u=o._tempMatrix3;t.setPipeline(o),l.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),h.copyFrom(s.matrix),a?(h.multiplyWithOffset(a,-s.scrollX*e.scrollFactorX,-s.scrollY*e.scrollFactorY),l.e=e.x,l.f=e.y):(l.e-=s.scrollX*e.scrollFactorX,l.f-=s.scrollY*e.scrollFactorY),h.multiply(l,u);var c,d,f,p,g,m,y,v,_=e._displayOriginX,x=e._displayOriginY,w=s.alpha*e.alpha;e.isFilled&&(c=o.fillTint,d=r.getTintAppendFloatAlphaAndSwap(e.fillColor,e.fillAlpha*w),c.TL=d,c.TR=d,c.BL=d,c.BR=d,f=e.geom.x1-_,p=e.geom.y1-x,g=e.geom.x2-_,m=e.geom.y2-x,y=e.geom.x3-_,v=e.geom.y3-x,o.setTexture2D(),o.batchFillTriangle(f,p,g,m,y,v,l,h)),e.isStroked&&n(o,e,w,_,x)}},function(t,e,i){var n=i(41),r=i(49),s=i(28);t.exports=function(t,e,i,a,o){var h,l,u,c,d,f,p,g,m=t.currentContext;s(t,m,e,a,o)&&(h=e._displayOriginX,l=e._displayOriginY,u=e.geom.x1-h,c=e.geom.y1-l,d=e.geom.x2-h,f=e.geom.y2-l,p=e.geom.x3-h,g=e.geom.y3-l,m.beginPath(),m.moveTo(u,c),m.lineTo(d,f),m.lineTo(p,g),m.closePath(),e.isFilled&&(n(m,e),m.fill()),e.isStroked&&(r(m,e),m.stroke()),m.restore())}},function(t,e,i){var n=i(188);i(5).register("blitter",(function(t,e,i,r){return this.displayList.add(new n(this.scene,t,e,i,r))}))},function(t,e,i){var n=i(189);i(5).register("container",(function(t,e,i){return this.displayList.add(new n(this.scene,t,e,i))}))},function(t,e,i){var n=i(395);i(5).register("dom",(function(t,e,i,r,s){var a=new n(this.scene,t,e,i,r,s);return this.displayList.add(a),this.updateList.add(a),a}))},function(t,e,i){var n=i(190);i(5).register("dynamicBitmapText",(function(t,e,i,r,s){return this.displayList.add(new n(this.scene,t,e,i,r,s))}))},function(t,e,i){var n=i(397);i(5).register("extern",(function(){var t=new n(this.scene);return this.displayList.add(t),this.updateList.add(t),t}))},function(t,e,i){var n=i(191);i(5).register("graphics",(function(t){return this.displayList.add(new n(this.scene,t))}))},function(t,e,i){var n=i(97);i(5).register("group",(function(t,e){return this.updateList.add(new n(this.scene,t,e))}))},function(t,e,i){var n=i(107);i(5).register("image",(function(t,e,i,r){return this.displayList.add(new n(this.scene,t,e,i,r))}))},function(t,e,i){var n=i(5),r=i(194);n.register("particles",(function(t,e,i){var n=new r(this.scene,t,e,i);return this.displayList.add(n),this.updateList.add(n),n}))},function(t,e,i){var n=i(5),r=i(409);n.register("follower",(function(t,e,i,n,s){var a=new r(this.scene,t,e,i,n,s);return this.displayList.add(a),this.updateList.add(a),a}))},function(t,e,i){var n=i(5),r=i(195);n.register("renderTexture",(function(t,e,i,n,s,a){return this.displayList.add(new r(this.scene,t,e,i,n,s,a))}))},function(t,e,i){var n=i(197);i(5).register("rope",(function(t,e,i,r,s,a,o,h){var l=new n(this.scene,t,e,i,r,s,a,o,h);return this.displayList.add(l),this.updateList.add(l)}))},function(t,e,i){var n=i(5),r=i(75);n.register("sprite",(function(t,e,i,n){var s=new r(this.scene,t,e,i,n);return this.displayList.add(s),this.updateList.add(s),s}))},function(t,e,i){var n=i(132);i(5).register("bitmapText",(function(t,e,i,r,s,a){return this.displayList.add(new n(this.scene,t,e,i,r,s,a))}))},function(t,e,i){var n=i(198);i(5).register("text",(function(t,e,i,r){return this.displayList.add(new n(this.scene,t,e,i,r))}))},function(t,e,i){var n=i(199);i(5).register("tileSprite",(function(t,e,i,r,s,a){return this.displayList.add(new n(this.scene,t,e,i,r,s,a))}))},function(t,e,i){var n=i(110);i(5).register("zone",(function(t,e,i,r){return this.displayList.add(new n(this.scene,t,e,i,r))}))},function(t,e,i){var n=i(200);i(5).register("video",(function(t,e,i){var r=new n(this.scene,t,e,i);return this.displayList.add(r),this.updateList.add(r),r}))},function(t,e,i){var n=i(410),r=i(5);r.register("arc",(function(t,e,i,r,s,a,o,h){return this.displayList.add(new n(this.scene,t,e,i,r,s,a,o,h))})),r.register("circle",(function(t,e,i,r,s){return this.displayList.add(new n(this.scene,t,e,i,0,360,!1,r,s))}))},function(t,e,i){var n=i(5),r=i(411);n.register("curve",(function(t,e,i,n,s){return this.displayList.add(new r(this.scene,t,e,i,n,s))}))},function(t,e,i){var n=i(412);i(5).register("ellipse",(function(t,e,i,r,s,a){return this.displayList.add(new n(this.scene,t,e,i,r,s,a))}))},function(t,e,i){var n=i(5),r=i(413);n.register("grid",(function(t,e,i,n,s,a,o,h,l,u){return this.displayList.add(new r(this.scene,t,e,i,n,s,a,o,h,l,u))}))},function(t,e,i){var n=i(5),r=i(414);n.register("isobox",(function(t,e,i,n,s,a,o){return this.displayList.add(new r(this.scene,t,e,i,n,s,a,o))}))},function(t,e,i){var n=i(5),r=i(415);n.register("isotriangle",(function(t,e,i,n,s,a,o,h){return this.displayList.add(new r(this.scene,t,e,i,n,s,a,o,h))}))},function(t,e,i){var n=i(5),r=i(416);n.register("line",(function(t,e,i,n,s,a,o,h){return this.displayList.add(new r(this.scene,t,e,i,n,s,a,o,h))}))},function(t,e,i){var n=i(5),r=i(417);n.register("polygon",(function(t,e,i,n,s){return this.displayList.add(new r(this.scene,t,e,i,n,s))}))},function(t,e,i){var n=i(5),r=i(422);n.register("rectangle",(function(t,e,i,n,s,a){return this.displayList.add(new r(this.scene,t,e,i,n,s,a))}))},function(t,e,i){var n=i(423);i(5).register("star",(function(t,e,i,r,s,a,o){return this.displayList.add(new n(this.scene,t,e,i,r,s,a,o))}))},function(t,e,i){var n=i(5),r=i(424);n.register("triangle",(function(t,e,i,n,s,a,o,h,l,u){return this.displayList.add(new r(this.scene,t,e,i,n,s,a,o,h,l,u))}))},function(t,e,i){var n=i(188),r=i(27),s=i(16),a=i(15);s.register("blitter",(function(t,e){void 0===t&&(t={});var i=a(t,"key",null),s=a(t,"frame",null),o=new n(this.scene,0,0,i,s);return void 0!==e&&(t.add=e),r(this.scene,o,t),o}))},function(t,e,i){var n=i(27),r=i(189),s=i(16),a=i(15);s.register("container",(function(t,e){void 0===t&&(t={});var i=a(t,"x",0),s=a(t,"y",0),o=new r(this.scene,i,s);return void 0!==e&&(t.add=e),n(this.scene,o,t),o}))},function(t,e,i){var n=i(190),r=i(27),s=i(16),a=i(15);s.register("dynamicBitmapText",(function(t,e){void 0===t&&(t={});var i=a(t,"font",""),s=a(t,"text",""),o=a(t,"size",!1),h=new n(this.scene,0,0,i,s,o);return void 0!==e&&(t.add=e),r(this.scene,h,t),h}))},function(t,e,i){var n=i(16),r=i(191);n.register("graphics",(function(t,e){void 0===t&&(t={}),void 0!==e&&(t.add=e);var i=new r(this.scene,t);return t.add&&this.scene.sys.displayList.add(i),i}))},function(t,e,i){var n=i(16),r=i(97);n.register("group",(function(t){return new r(this.scene,null,t)}))},function(t,e,i){var n=i(27),r=i(16),s=i(15),a=i(107);r.register("image",(function(t,e){void 0===t&&(t={});var i=s(t,"key",null),r=s(t,"frame",null),o=new a(this.scene,0,0,i,r);return void 0!==e&&(t.add=e),n(this.scene,o,t),o}))},function(t,e,i){var n=i(16),r=i(15),s=i(2),a=i(194);n.register("particles",(function(t,e){void 0===t&&(t={});var i=r(t,"key",null),n=r(t,"frame",null),o=s(t,"emitters",null),h=new a(this.scene,i,n,o);return void 0!==e&&(t.add=e),s(t,"add",!1)&&this.displayList.add(h),this.updateList.add(h),h}))},function(t,e,i){var n=i(27),r=i(16),s=i(15),a=i(195);r.register("renderTexture",(function(t,e){void 0===t&&(t={});var i=s(t,"x",0),r=s(t,"y",0),o=s(t,"width",32),h=s(t,"height",32),l=s(t,"key",void 0),u=s(t,"frame",void 0),c=new a(this.scene,i,r,o,h,l,u);return void 0!==e&&(t.add=e),n(this.scene,c,t),c}))},function(t,e,i){var n=i(27),r=i(16),s=i(15),a=i(6),o=i(197);r.register("rope",(function(t,e){void 0===t&&(t={});var i=s(t,"key",null),r=s(t,"frame",null),h=s(t,"horizontal",!0),l=a(t,"points",void 0),u=a(t,"colors",void 0),c=a(t,"alphas",void 0),d=new o(this.scene,0,0,i,r,l,h,u,c);return void 0!==e&&(t.add=e),n(this.scene,d,t),d}))},function(t,e,i){var n=i(27),r=i(393),s=i(16),a=i(15),o=i(75);s.register("sprite",(function(t,e){void 0===t&&(t={});var i=a(t,"key",null),s=a(t,"frame",null),h=new o(this.scene,0,0,i,s);return void 0!==e&&(t.add=e),n(this.scene,h,t),r(h,t),h}))},function(t,e,i){var n=i(132),r=i(27),s=i(16),a=i(15),o=i(6);s.register("bitmapText",(function(t,e){void 0===t&&(t={});var i=o(t,"font",""),s=a(t,"text",""),h=a(t,"size",!1),l=o(t,"align",0),u=new n(this.scene,0,0,i,s,h,l);return void 0!==e&&(t.add=e),r(this.scene,u,t),u}))},function(t,e,i){var n=i(27),r=i(16),s=i(15),a=i(198);r.register("text",(function(t,e){void 0===t&&(t={});var i=s(t,"text",""),r=s(t,"style",null),o=s(t,"padding",null);null!==o&&(r.padding=o);var h=new a(this.scene,0,0,i,r);return void 0!==e&&(t.add=e),n(this.scene,h,t),h.autoRound=s(t,"autoRound",!0),h.resolution=s(t,"resolution",1),h}))},function(t,e,i){var n=i(27),r=i(16),s=i(15),a=i(199);r.register("tileSprite",(function(t,e){void 0===t&&(t={});var i=s(t,"x",0),r=s(t,"y",0),o=s(t,"width",512),h=s(t,"height",512),l=s(t,"key",""),u=s(t,"frame",""),c=new a(this.scene,i,r,o,h,l,u);return void 0!==e&&(t.add=e),n(this.scene,c,t),c}))},function(t,e,i){var n=i(16),r=i(15),s=i(110);n.register("zone",(function(t){var e=r(t,"x",0),i=r(t,"y",0),n=r(t,"width",1),a=r(t,"height",n);return new s(this.scene,e,i,n,a)}))},function(t,e,i){var n=i(27),r=i(16),s=i(15),a=i(200);r.register("video",(function(t,e){void 0===t&&(t={});var i=s(t,"key",null),r=new a(this.scene,0,0,i);return void 0!==e&&(t.add=e),n(this.scene,r,t),r}))},function(t,e,i){var n=i(1),r=i(1);n=i(1078),r=i(1079),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e,i){var n=i(9);t.exports=function(t,e,i,r,s){var a=this.pipeline;t.setPipeline(a,e);var o=a._tempMatrix1,h=a._tempMatrix2,l=a._tempMatrix3;h.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),o.copyFrom(r.matrix),s?(o.multiplyWithOffset(s,-r.scrollX*e.scrollFactorX,-r.scrollY*e.scrollFactorY),h.e=e.x,h.f=e.y):(h.e-=r.scrollX*e.scrollFactorX,h.f-=r.scrollY*e.scrollFactorY),o.multiply(h,l);var u=e.frame.glTexture,c=e.vertices,d=e.uv,f=e.colors,p=e.alphas,g=c.length,m=Math.floor(.5*g);a.vertexCount+m>a.vertexCapacity&&a.flush(),a.setTexture2D(u,0);for(var y=a.vertexViewF32,v=a.vertexViewU32,_=a.vertexCount*a.vertexComponentCount-1,x=0,w=e.tintFill,b=0;b<g;b+=2){var T=c[b+0],E=c[b+1],A=T*l.a+E*l.c+l.e,S=T*l.b+E*l.d+l.f;r.roundPixels&&(A=Math.round(A),S=Math.round(S)),y[++_]=A,y[++_]=S,y[++_]=d[b+0],y[++_]=d[b+1],y[++_]=w,v[++_]=n.getTintAppendFloatAlpha(f[x],r.alpha*p[x]),x++}a.vertexCount+=m}},function(t,e){t.exports=function(){}},function(t,e,i){var n=i(1),r=i(1);n=i(1081),r=i(1082),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e){t.exports=function(t,e,i,n,r){var s,a,o,h;e.shader&&(s=t.currentPipeline,t.clearPipeline(),e.renderToTexture?e.load():(a=e._tempMatrix1,o=e._tempMatrix2,h=e._tempMatrix3,o.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),a.copyFrom(n.matrix),r?(a.multiplyWithOffset(r,-n.scrollX*e.scrollFactorX,-n.scrollY*e.scrollFactorY),o.e=e.x,o.f=e.y):(o.e-=n.scrollX*e.scrollFactorX,o.f-=n.scrollY*e.scrollFactorY),a.multiply(o,h),t.width===e._rendererWidth&&t.height===e._rendererHeight||e.projOrtho(0,t.width,t.height,0),e.load(h.matrix)),e.flush(),t.rebindPipeline(s))}},function(t,e){t.exports=function(){}},function(t,e,i){var n=i(134);i(5).register("mesh",(function(t,e,i,r,s,a,o,h){return this.displayList.add(new n(this.scene,t,e,i,r,s,a,o,h))}))},function(t,e,i){var n=i(203);i(5).register("quad",(function(t,e,i,r){return this.displayList.add(new n(this.scene,t,e,i,r))}))},function(t,e,i){var n=i(204);i(5).register("shader",(function(t,e,i,r,s,a,o){return this.displayList.add(new n(this.scene,t,e,i,r,s,a,o))}))},function(t,e,i){var n=i(27),r=i(16),s=i(15),a=i(6),o=i(134);r.register("mesh",(function(t,e){void 0===t&&(t={});var i=s(t,"key",null),r=s(t,"frame",null),h=a(t,"vertices",[]),l=a(t,"colors",[]),u=a(t,"alphas",[]),c=a(t,"uv",[]),d=new o(this.scene,0,0,h,c,l,u,i,r);return void 0!==e&&(t.add=e),n(this.scene,d,t),d}))},function(t,e,i){var n=i(27),r=i(16),s=i(15),a=i(203);r.register("quad",(function(t,e){void 0===t&&(t={});var i=s(t,"x",0),r=s(t,"y",0),o=s(t,"key",null),h=s(t,"frame",null),l=new a(this.scene,i,r,o,h);return void 0!==e&&(t.add=e),n(this.scene,l,t),l}))},function(t,e,i){var n=i(27),r=i(16),s=i(15),a=i(204);r.register("shader",(function(t,e){void 0===t&&(t={});var i=s(t,"key",null),r=s(t,"x",0),o=s(t,"y",0),h=s(t,"width",128),l=s(t,"height",128),u=new a(this.scene,i,r,o,h,l);return void 0!==e&&(t.add=e),n(this.scene,u,t),u}))},function(t,e,i){var n=i(0),r=i(429),s=i(23),a=i(22),o=new n({Extends:r,initialize:function(t){this.scene=t,this.systems=t.sys,t.sys.settings.isBooted||t.sys.events.once(a.BOOT,this.boot,this),r.call(this)},boot:function(){var t=this.systems.events;t.on(a.SHUTDOWN,this.shutdown,this),t.on(a.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});s.register("LightsPlugin",o,"lights"),t.exports=o},function(t,e,i){var n=i(65);n.Area=i(1091),n.Circumference=i(268),n.CircumferencePoint=i(149),n.Clone=i(1092),n.Contains=i(55),n.ContainsPoint=i(1093),n.ContainsRect=i(1094),n.CopyFrom=i(1095),n.Equals=i(1096),n.GetBounds=i(1097),n.GetPoint=i(266),n.GetPoints=i(267),n.Offset=i(1098),n.OffsetPoint=i(1099),n.Random=i(150),t.exports=n},function(t,e){t.exports=function(t){return 0<t.radius?Math.PI*t.radius*t.radius:0}},function(t,e,i){var n=i(65);t.exports=function(t){return new n(t.x,t.y,t.radius)}},function(t,e,i){var n=i(55);t.exports=function(t,e){return n(t,e.x,e.y)}},function(t,e,i){var n=i(55);t.exports=function(t,e){return n(t,e.x,e.y)&&n(t,e.right,e.y)&&n(t,e.x,e.bottom)&&n(t,e.right,e.bottom)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x,t.y,t.radius)}},function(t,e){t.exports=function(t,e){return t.x===e.x&&t.y===e.y&&t.radius===e.radius}},function(t,e,i){var n=i(11);t.exports=function(t,e){return void 0===e&&(e=new n),e.x=t.left,e.y=t.top,e.width=t.diameter,e.height=t.diameter,e}},function(t,e){t.exports=function(t,e,i){return t.x+=e,t.y+=i,t}},function(t,e){t.exports=function(t,e){return t.x+=e.x,t.y+=e.y,t}},function(t,e,i){var n=i(95);n.Area=i(1101),n.Circumference=i(400),n.CircumferencePoint=i(193),n.Clone=i(1102),n.Contains=i(96),n.ContainsPoint=i(1103),n.ContainsRect=i(1104),n.CopyFrom=i(1105),n.Equals=i(1106),n.GetBounds=i(1107),n.GetPoint=i(398),n.GetPoints=i(399),n.Offset=i(1108),n.OffsetPoint=i(1109),n.Random=i(157),t.exports=n},function(t,e){t.exports=function(t){return t.isEmpty()?0:t.getMajorRadius()*t.getMinorRadius()*Math.PI}},function(t,e,i){var n=i(95);t.exports=function(t){return new n(t.x,t.y,t.width,t.height)}},function(t,e,i){var n=i(96);t.exports=function(t,e){return n(t,e.x,e.y)}},function(t,e,i){var n=i(96);t.exports=function(t,e){return n(t,e.x,e.y)&&n(t,e.right,e.y)&&n(t,e.x,e.bottom)&&n(t,e.right,e.bottom)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x,t.y,t.width,t.height)}},function(t,e){t.exports=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}},function(t,e,i){var n=i(11);t.exports=function(t,e){return void 0===e&&(e=new n),e.x=t.left,e.y=t.top,e.width=t.width,e.height=t.height,e}},function(t,e){t.exports=function(t,e,i){return t.x+=e,t.y+=i,t}},function(t,e){t.exports=function(t,e){return t.x+=e.x,t.y+=e.y,t}},function(t,e,i){var n=i(4),r=i(205);t.exports=function(t,e,i){var s,a,o,h,l,u,c,d,f,p,g,m;return void 0===i&&(i=[]),r(t,e)&&(s=t.x,a=t.y,o=t.radius,h=e.x,l=e.y,u=e.radius,a===l?0==(m=(g=-2*l)*g-4*(p=1)*(h*h+(c=(u*u-o*o-h*h+s*s)/(2*(s-h)))*c-2*h*c+l*l-u*u))?i.push(new n(c,-g/(2*p))):0<m&&(i.push(new n(c,(-g+Math.sqrt(m))/(2*p))),i.push(new n(c,(-g-Math.sqrt(m))/(2*p)))):0==(m=(g=2*a*(d=(s-h)/(a-l))-2*(f=(u*u-o*o-h*h+s*s-l*l+a*a)/(2*(a-l)))*d-2*s)*g-4*(p=d*d+1)*(s*s+a*a+f*f-o*o-2*a*f))?(c=-g/(2*p),i.push(new n(c,f-c*d))):0<m&&(c=(-g+Math.sqrt(m))/(2*p),i.push(new n(c,f-c*d)),c=(-g-Math.sqrt(m))/(2*p),i.push(new n(c,f-c*d)))),i}},function(t,e,i){var n=i(207),r=i(206);t.exports=function(t,e,i){var s,a,o,h;return void 0===i&&(i=[]),r(t,e)&&(s=e.getLineA(),a=e.getLineB(),o=e.getLineC(),h=e.getLineD(),n(s,t,i),n(a,t,i),n(o,t,i),n(h,t,i)),i}},function(t,e,i){var n=i(11),r=i(135);t.exports=function(t,e,i){return void 0===i&&(i=new n),r(t,e)&&(i.x=Math.max(t.x,e.x),i.y=Math.max(t.y,e.y),i.width=Math.min(t.right,e.right)-i.x,i.height=Math.min(t.bottom,e.bottom)-i.y),i}},function(t,e,i){var n=i(209),r=i(135);t.exports=function(t,e,i){var s,a,o,h;return void 0===i&&(i=[]),r(t,e)&&(s=t.getLineA(),a=t.getLineB(),o=t.getLineC(),h=t.getLineD(),n(s,e,i),n(a,e,i),n(o,e,i),n(h,e,i)),i}},function(t,e,i){var n=i(433),r=i(209);t.exports=function(t,e,i){var s,a,o;return void 0===i&&(i=[]),n(t,e)&&(s=e.getLineA(),a=e.getLineB(),o=e.getLineC(),r(s,t,i),r(a,t,i),r(o,t,i)),i}},function(t,e,i){var n=i(207),r=i(435);t.exports=function(t,e,i){var s,a,o;return void 0===i&&(i=[]),r(t,e)&&(s=t.getLineA(),a=t.getLineB(),o=t.getLineC(),n(s,e,i),n(a,e,i),n(o,e,i)),i}},function(t,e,i){var n=i(438),r=i(436);t.exports=function(t,e,i){var s,a,o;return void 0===i&&(i=[]),n(t,e)&&(s=e.getLineA(),a=e.getLineB(),o=e.getLineC(),r(t,s,i),r(t,a,i),r(t,o,i)),i}},function(t,e,i){var n=i(440);t.exports=function(t,e){if(!n(t,e))return!1;var i=Math.min(e.x1,e.x2),r=Math.max(e.x1,e.x2),s=Math.min(e.y1,e.y2),a=Math.max(e.y1,e.y2);return t.x>=i&&t.x<=r&&t.y>=s&&t.y<=a}},function(t,e){t.exports=function(t,e,i,n,r,s){return void 0===s&&(s=0),!(e>t.right+s||i<t.left-s||n>t.bottom+s||r<t.top-s)}},function(t,e,i){var n=i(56);n.Angle=i(85),n.BresenhamPoints=i(288),n.CenterOn=i(1120),n.Clone=i(1121),n.CopyFrom=i(1122),n.Equals=i(1123),n.Extend=i(1124),n.GetEasedPoints=i(1125),n.GetMidPoint=i(1126),n.GetNearestPoint=i(1127),n.GetNormal=i(1128),n.GetPoint=i(275),n.GetPoints=i(153),n.GetShortestDistance=i(1129),n.Height=i(1130),n.Length=i(57),n.NormalAngle=i(441),n.NormalX=i(1131),n.NormalY=i(1132),n.Offset=i(1133),n.PerpSlope=i(1134),n.Random=i(154),n.ReflectAngle=i(1135),n.Rotate=i(1136),n.RotateAroundPoint=i(1137),n.RotateAroundXY=i(211),n.SetToAngle=i(1138),n.Slope=i(1139),n.Width=i(1140),t.exports=n},function(t,e){t.exports=function(t,e,i){var n=e-(t.x1+t.x2)/2,r=i-(t.y1+t.y2)/2;return t.x1+=n,t.y1+=r,t.x2+=n,t.y2+=r,t}},function(t,e,i){var n=i(56);t.exports=function(t){return new n(t.x1,t.y1,t.x2,t.y2)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x1,t.y1,t.x2,t.y2)}},function(t,e){t.exports=function(t,e){return t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2}},function(t,e,i){var n=i(57);t.exports=function(t,e,i){void 0===i&&(i=e);var r=n(t),s=t.x2-t.x1,a=t.y2-t.y1;return e&&(t.x1=t.x1-s/r*e,t.y1=t.y1-a/r*e),i&&(t.x2=t.x2+s/r*i,t.y2=t.y2+a/r*i),t}},function(t,e,i){var n=i(320),r=i(69),s=i(4);t.exports=function(t,e,i,a,o){void 0===a&&(a=0),void 0===o&&(o=[]);var h,l=[],u=t.x1,c=t.y1,d=t.x2-u,f=t.y2-c,p=r(e,o),g=i-1;for(v=0;v<g;v++)h=p(v/g),l.push(new s(u+d*h,c+f*h));if(h=p(1),l.push(new s(u+d*h,c+f*h)),0<a){for(var m=l[0],y=[m],v=1;v<l.length-1;v++){var _=l[v];n(m,_)>=a&&(y.push(_),m=_)}var x=l[l.length-1];return n(m,x)<a&&y.pop(),y.push(x),y}return l}},function(t,e,i){var n=i(4);t.exports=function(t,e){return void 0===e&&(e=new n),e.x=(t.x1+t.x2)/2,e.y=(t.y1+t.y2)/2,e}},function(t,e,i){var n=i(4);t.exports=function(t,e,i){void 0===i&&(i=new n);var r=t.x1,s=t.y1,a=t.x2,o=t.y2,h=(a-r)*(a-r)+(o-s)*(o-s);if(0==h)return i;var l=((e.x-r)*(a-r)+(e.y-s)*(o-s))/h;return i.x=r+l*(a-r),i.y=s+l*(o-s),i}},function(t,e,i){var n=i(13),r=i(85),s=i(4);t.exports=function(t,e){void 0===e&&(e=new s);var i=r(t)-n.TAU;return e.x=Math.cos(i),e.y=Math.sin(i),e}},function(t,e){t.exports=function(t,e){var i=t.x1,n=t.y1,r=t.x2,s=t.y2,a=(r-i)*(r-i)+(s-n)*(s-n);if(0==a)return!1;var o=((n-e.y)*(r-i)-(i-e.x)*(s-n))/a;return Math.abs(o)*Math.sqrt(a)}},function(t,e){t.exports=function(t){return Math.abs(t.y1-t.y2)}},function(t,e,i){var n=i(13),r=i(85);t.exports=function(t){return Math.cos(r(t)-n.TAU)}},function(t,e,i){var n=i(13),r=i(85);t.exports=function(t){return Math.sin(r(t)-n.TAU)}},function(t,e){t.exports=function(t,e,i){return t.x1+=e,t.y1+=i,t.x2+=e,t.y2+=i,t}},function(t,e){t.exports=function(t){return-(t.x2-t.x1)/(t.y2-t.y1)}},function(t,e,i){var n=i(85),r=i(441);t.exports=function(t,e){return 2*r(e)-Math.PI-n(t)}},function(t,e,i){var n=i(211);t.exports=function(t,e){var i=(t.x1+t.x2)/2,r=(t.y1+t.y2)/2;return n(t,i,r,e)}},function(t,e,i){var n=i(211);t.exports=function(t,e,i){return n(t,e.x,e.y,i)}},function(t,e){t.exports=function(t,e,i,n,r){return t.x1=e,t.y1=i,t.x2=e+Math.cos(n)*r,t.y2=i+Math.sin(n)*r,t}},function(t,e){t.exports=function(t){return(t.y2-t.y1)/(t.x2-t.x1)}},function(t,e){t.exports=function(t){return Math.abs(t.x1-t.x2)}},function(t,e,i){var n=i(4);n.Ceil=i(1142),n.Clone=i(1143),n.CopyFrom=i(1144),n.Equals=i(1145),n.Floor=i(1146),n.GetCentroid=i(1147),n.GetMagnitude=i(442),n.GetMagnitudeSq=i(443),n.GetRectangleFromPoints=i(1148),n.Interpolate=i(1149),n.Invert=i(1150),n.Negative=i(1151),n.Project=i(1152),n.ProjectUnit=i(1153),n.SetMagnitude=i(1154),t.exports=n},function(t,e){t.exports=function(t){return t.setTo(Math.ceil(t.x),Math.ceil(t.y))}},function(t,e,i){var n=i(4);t.exports=function(t){return new n(t.x,t.y)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x,t.y)}},function(t,e){t.exports=function(t,e){return t.x===e.x&&t.y===e.y}},function(t,e){t.exports=function(t){return t.setTo(Math.floor(t.x),Math.floor(t.y))}},function(t,e,i){var n=i(4);t.exports=function(t,e){if(void 0===e&&(e=new n),!Array.isArray(t))throw new Error("GetCentroid points argument must be an array");var i=t.length;if(i<1)throw new Error("GetCentroid points array must not be empty");if(1===i)e.x=t[0].x,e.y=t[0].y;else{for(var r=0;r<i;r++)e.x+=t[r].x,e.y+=t[r].y;e.x/=i,e.y/=i}return e}},function(t,e,i){var n=i(11);t.exports=function(t,e){void 0===e&&(e=new n);for(var i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,o=0;o<t.length;o++){var h=t[o];h.x>i&&(i=h.x),h.x<r&&(r=h.x),h.y>s&&(s=h.y),h.y<a&&(a=h.y)}return e.x=r,e.y=a,e.width=i-r,e.height=s-a,e}},function(t,e,i){var n=i(4);t.exports=function(t,e,i,r){return void 0===i&&(i=0),void 0===r&&(r=new n),r.x=t.x+(e.x-t.x)*i,r.y=t.y+(e.y-t.y)*i,r}},function(t,e){t.exports=function(t){return t.setTo(t.y,t.x)}},function(t,e,i){var n=i(4);t.exports=function(t,e){return void 0===e&&(e=new n),e.setTo(-t.x,-t.y)}},function(t,e,i){var n=i(4),r=i(443);t.exports=function(t,e,i){void 0===i&&(i=new n);var s=(t.x*e.x+t.y*e.y)/r(e);return 0!=s&&(i.x=s*e.x,i.y=s*e.y),i}},function(t,e,i){var n=i(4);t.exports=function(t,e,i){void 0===i&&(i=new n);var r=t.x*e.x+t.y*e.y;return 0!=r&&(i.x=r*e.x,i.y=r*e.y),i}},function(t,e,i){var n=i(442);t.exports=function(t,e){var i;return 0===t.x&&0===t.y||(i=n(t),t.x/=i,t.y/=i),t.x*=e,t.y*=e,t}},function(t,e,i){var n=i(201);n.Clone=i(1156),n.Contains=i(202),n.ContainsPoint=i(1157),n.GetAABB=i(418),n.GetNumberArray=i(1158),n.GetPoints=i(419),n.Perimeter=i(420),n.Reverse=i(1159),n.Smooth=i(421),t.exports=n},function(t,e,i){var n=i(201);t.exports=function(t){return new n(t.points)}},function(t,e,i){var n=i(202);t.exports=function(t,e){return n(t,e.x,e.y)}},function(t,e){t.exports=function(t,e){void 0===e&&(e=[]);for(var i=0;i<t.points.length;i++)e.push(t.points[i].x),e.push(t.points[i].y);return e}},function(t,e){t.exports=function(t){return t.points.reverse(),t}},function(t,e){t.exports=function(t){return t.width*t.height}},function(t,e){t.exports=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t}},function(t,e){t.exports=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),t}},function(t,e,i){var n=i(11);t.exports=function(t){return new n(t.x,t.y,t.width,t.height)}},function(t,e,i){var n=i(48);t.exports=function(t,e){return n(t,e.x,e.y)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x,t.y,t.width,t.height)}},function(t,e){t.exports=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}},function(t,e,i){var n=i(212);t.exports=function(t,e){var i=n(t);return i<n(e)?t.setSize(e.height*i,e.height):t.setSize(e.width,e.width/i),t.setPosition(e.centerX-t.width/2,e.centerY-t.height/2)}},function(t,e,i){var n=i(212);t.exports=function(t,e){var i=n(t);return i>n(e)?t.setSize(e.height*i,e.height):t.setSize(e.width,e.width/i),t.setPosition(e.centerX-t.width/2,e.centerY-t.height/2)}},function(t,e){t.exports=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t}},function(t,e){t.exports=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t.width=Math.floor(t.width),t.height=Math.floor(t.height),t}},function(t,e,i){var n=i(11);t.exports=function(t,e,i,r,s){return void 0===s&&(s=new n),s.setTo(Math.min(t,i),Math.min(e,r),Math.abs(t-i),Math.abs(e-r))}},function(t,e,i){var n=i(4);t.exports=function(t,e){return void 0===e&&(e=new n),e.x=t.centerX,e.y=t.centerY,e}},function(t,e,i){var n=i(4);t.exports=function(t,e){return void 0===e&&(e=new n),e.x=t.width,e.y=t.height,e}},function(t,e,i){var n=i(168);t.exports=function(t,e,i){var r=t.centerX,s=t.centerY;return t.setSize(t.width+2*e,t.height+2*i),n(t,r,s)}},function(t,e,i){var n=i(11),r=i(135);t.exports=function(t,e,i){return void 0===i&&(i=new n),r(t,e)?(i.x=Math.max(t.x,e.x),i.y=Math.max(t.y,e.y),i.width=Math.min(t.right,e.right)-i.x,i.height=Math.min(t.bottom,e.bottom)-i.y):i.setEmpty(),i}},function(t,e){t.exports=function(t,e){for(var i=t.x,n=t.right,r=t.y,s=t.bottom,a=0;a<e.length;a++)i=Math.min(i,e[a].x),n=Math.max(n,e[a].x),r=Math.min(r,e[a].y),s=Math.max(s,e[a].y);return t.x=i,t.y=r,t.width=n-i,t.height=s-r,t}},function(t,e){t.exports=function(t,e){var i=Math.min(t.x,e.x),n=Math.max(t.right,e.right);t.x=i,t.width=n-i;var r=Math.min(t.y,e.y),s=Math.max(t.bottom,e.bottom);return t.y=r,t.height=s-r,t}},function(t,e){t.exports=function(t,e,i){var n=Math.min(t.x,e),r=Math.max(t.right,e);t.x=n,t.width=r-n;var s=Math.min(t.y,i),a=Math.max(t.bottom,i);return t.y=s,t.height=a-s,t}},function(t,e){t.exports=function(t,e,i){return t.x+=e,t.y+=i,t}},function(t,e){t.exports=function(t,e){return t.x+=e.x,t.y+=e.y,t}},function(t,e){t.exports=function(t,e){return t.x<e.right&&t.right>e.x&&t.y<e.bottom&&t.bottom>e.y}},function(t,e,i){var n=i(4),r=i(39);t.exports=function(t,e,i){void 0===i&&(i=new n),e=r(e);var s=Math.sin(e),a=Math.cos(e),o=0<a?t.width/2:t.width/-2,h=0<s?t.height/2:t.height/-2;return Math.abs(o*s)<Math.abs(h*a)?h=o*s/a:o=h*a/s,i.x=o+t.centerX,i.y=h+t.centerY,i}},function(t,e,i){var n=i(172),r=i(445),s=i(4);t.exports=function(t,e,i){if(void 0===i&&(i=new s),r(t,e))switch(n(0,3)){case 0:i.x=t.x+Math.random()*(e.right-t.x),i.y=t.y+Math.random()*(e.top-t.y);break;case 1:i.x=e.x+Math.random()*(t.right-e.x),i.y=e.bottom+Math.random()*(t.bottom-e.bottom);break;case 2:i.x=t.x+Math.random()*(e.x-t.x),i.y=e.y+Math.random()*(t.bottom-e.y);break;case 3:i.x=e.right+Math.random()*(t.right-e.right),i.y=t.y+Math.random()*(e.bottom-t.y)}return i}},function(t,e){t.exports=function(t,e){return t.width===e.width&&t.height===e.height}},function(t,e){t.exports=function(t,e,i){return void 0===i&&(i=e),t.width*=e,t.height*=i,t}},function(t,e,i){var n=i(71);n.Area=i(1187),n.BuildEquilateral=i(1188),n.BuildFromPolygon=i(1189),n.BuildRight=i(1190),n.CenterOn=i(1191),n.Centroid=i(446),n.CircumCenter=i(1192),n.CircumCircle=i(1193),n.Clone=i(1194),n.Contains=i(83),n.ContainsArray=i(210),n.ContainsPoint=i(1195),n.CopyFrom=i(1196),n.Decompose=i(439),n.Equals=i(1197),n.GetPoint=i(425),n.GetPoints=i(426),n.InCenter=i(448),n.Perimeter=i(1198),n.Offset=i(447),n.Random=i(158),n.Rotate=i(1199),n.RotateAroundPoint=i(1200),n.RotateAroundXY=i(213),t.exports=n},function(t,e){t.exports=function(t){var e=t.x1,i=t.y1,n=t.x2,r=t.y2,s=t.x3,a=t.y3;return Math.abs(((s-e)*(r-i)-(n-e)*(a-i))/2)}},function(t,e,i){var n=i(71);t.exports=function(t,e,i){var r=i*(Math.sqrt(3)/2);return new n(t,e,t+i/2,e+r,t-i/2,e+r)}},function(t,e,i){var n=i(66),r=i(71);t.exports=function(t,e,i,s,a){void 0===e&&(e=null),void 0===i&&(i=1),void 0===s&&(s=1),void 0===a&&(a=[]);for(var o,h,l,u,c,d,f,p,g,m=n(t,e),y=0;y<m.length;y+=3)o=m[y],h=m[y+1],l=m[y+2],u=t[2*o]*i,c=t[2*o+1]*s,d=t[2*h]*i,f=t[2*h+1]*s,p=t[2*l]*i,g=t[2*l+1]*s,a.push(new r(u,c,d,f,p,g));return a}},function(t,e,i){var n=i(71);t.exports=function(t,e,i,r){return void 0===r&&(r=i),new n(t,e,t,e-r,t+i,e)}},function(t,e,i){var n=i(446),r=i(447);t.exports=function(t,e,i,s){void 0===s&&(s=n);var a=s(t),o=e-a.x,h=i-a.y;return r(t,o,h)}},function(t,e,i){var n=i(3);t.exports=function(t,e){void 0===e&&(e=new n);var i=t.x3,r=t.y3,s=t.x1-i,a=t.y1-r,o=t.x2-i,h=t.y2-r,l=2*(s*h-a*o),u=a*(o*o+h*h)-(s*s+a*a)*h,c=s*(o*o+h*h)-(s*s+a*a)*o;return e.x=i-u/l,e.y=r+c/l,e}},function(t,e,i){var n=i(65);t.exports=function(t,e){void 0===e&&(e=new n);var i,r,s,a,o=t.x1,h=t.y1,l=t.x2,u=t.y2,c=t.x3,d=t.y3,f=l-o,p=u-h,g=c-o,m=d-h,y=f*(o+l)+p*(h+u),v=g*(o+c)+m*(h+d),_=2*(f*(d-u)-p*(c-l));return Math.abs(_)<1e-6?(i=Math.min(o,l,c),r=Math.min(h,u,d),s=.5*(Math.max(o,l,c)-i),a=.5*(Math.max(h,u,d)-r),e.x=i+s,e.y=r+a):(e.x=(m*y-p*v)/_,e.y=(f*v-g*y)/_,s=e.x-o,a=e.y-h),e.radius=Math.sqrt(s*s+a*a),e}},function(t,e,i){var n=i(71);t.exports=function(t){return new n(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},function(t,e,i){var n=i(83);t.exports=function(t,e){return n(t,e.x,e.y)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},function(t,e){t.exports=function(t,e){return t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2&&t.x3===e.x3&&t.y3===e.y3}},function(t,e,i){var n=i(57);t.exports=function(t){var e=t.getLineA(),i=t.getLineB(),r=t.getLineC();return n(e)+n(i)+n(r)}},function(t,e,i){var n=i(213),r=i(448);t.exports=function(t,e){var i=r(t);return n(t,i.x,i.y,e)}},function(t,e,i){var n=i(213);t.exports=function(t,e,i){return n(t,e.x,e.y,i)}},function(t,e,i){var n=i(179),r=i(18)(!1,r={CreateInteractiveObject:i(449),Events:i(54),Gamepad:i(1202),InputManager:i(365),InputPlugin:i(1214),InputPluginCache:i(136),Keyboard:i(1216),Mouse:i(1233),Pointer:i(368),Touch:i(1234)},n);t.exports=r},function(t,e,i){t.exports={Axis:i(450),Button:i(451),Events:i(214),Gamepad:i(452),GamepadPlugin:i(1209),Configs:i(1210)}},function(t,e){t.exports="down"},function(t,e){t.exports="up"},function(t,e){t.exports="connected"},function(t,e){t.exports="disconnected"},function(t,e){t.exports="down"},function(t,e){t.exports="up"},function(t,e,i){var n=i(0),r=i(10),s=i(214),a=i(452),o=i(6),h=i(136),l=i(54),u=new n({Extends:r,initialize:function(t){r.call(this),this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,t.pluginEvents.once(l.BOOT,this.boot,this),t.pluginEvents.on(l.START,this.start,this)},boot:function(){var t=this.scene.sys.game,e=this.settings.input,i=t.config;this.enabled=o(e,"gamepad",i.inputGamepad)&&t.device.input.gamepads,this.target=o(e,"gamepad.target",i.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(l.DESTROY,this.destroy,this)},start:function(){this.enabled&&this.startListeners(),this.sceneInputPlugin.pluginEvents.once(l.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){function t(t){!t.defaultPrevented&&e.isActive()&&(e.refreshPads(),e.queue.push(t))}var e=this,i=this.target;this.onGamepadHandler=t,i.addEventListener("gamepadconnected",t,!1),i.addEventListener("gamepaddisconnected",t,!1),this.sceneInputPlugin.pluginEvents.on(l.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(l.UPDATE,this.update)},disconnectAll:function(){for(var t=0;t<this.gamepads.length;t++)this.gamepads.connected=!1},refreshPads:function(){var t=navigator.getGamepads();if(t)for(var e=this.gamepads,i=0;i<t.length;i++){var n,r,s,o,h=t[i];h&&(n=h.id,(s=e[r=h.index])?s.id!==n?(s.destroy(),e[r]=new a(this,h)):s.update(h):(o=new a(this,h),e[r]=o,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=o):this._pad3=o:this._pad2=o:this._pad1=o))}else this.disconnectAll()},getAll:function(){for(var t=[],e=this.gamepads,i=0;i<e.length;i++)e[i]&&t.push(e[i]);return t},getPad:function(t){for(var e=this.gamepads,i=0;i<e.length;i++)if(e[i]&&e[i].index===t)return e[i]},update:function(){if(this.enabled){this.refreshPads();var t=this.queue.length;if(0!==t)for(var e=this.queue.splice(0,t),i=0;i<t;i++){var n=e[i],r=this.getPad(n.gamepad.index);"gamepadconnected"===n.type?this.emit(s.CONNECTED,r,n):"gamepaddisconnected"===n.type&&this.emit(s.DISCONNECTED,r,n)}}},shutdown:function(){this.stopListeners(),this.disconnectAll(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var t=0;t<this.gamepads.length;t++)this.gamepads[t]&&this.gamepads[t].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});h.register("GamepadPlugin",u,"gamepad","gamepad","inputGamepad"),t.exports=u},function(t,e,i){t.exports={DUALSHOCK_4:i(1211),SNES_USB:i(1212),XBOX_360:i(1213)}},function(t,e){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(t,e){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(t,e){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(t,e,i){var n=i(65),r=i(55),s=i(0),a=i(179),o=i(449),h=i(1215),l=i(53),u=i(95),c=i(96),d=i(54),f=i(10),p=i(2),g=i(47),m=i(136),y=i(7),v=i(23),_=i(11),x=i(48),w=i(22),b=i(71),T=i(83),E=new s({Extends:f,initialize:function(t){f.call(this),this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.manager=t.sys.game.input,this.pluginEvents=new f,this.enabled=!0,this.displayList,this.cameras,m.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var e={cancelled:!1};this._eventContainer={stopPropagation:function(){e.cancelled=!0}},this._eventData=e,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,t.sys.events.once(w.BOOT,this.boot,this),t.sys.events.on(w.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(w.DESTROY,this.destroy,this),this.pluginEvents.emit(d.BOOT)},start:function(){var t=this.systems.events;t.on(w.TRANSITION_START,this.transitionIn,this),t.on(w.TRANSITION_OUT,this.transitionOut,this),t.on(w.TRANSITION_COMPLETE,this.transitionComplete,this),t.on(w.PRE_UPDATE,this.preUpdate,this),t.once(w.SHUTDOWN,this.shutdown,this),this.manager.events.on(d.GAME_OUT,this.onGameOut,this),this.manager.events.on(d.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(d.START)},onGameOver:function(t){this.isActive()&&this.emit(d.GAME_OVER,t.timeStamp,t)},onGameOut:function(t){this.isActive()&&this.emit(d.GAME_OUT,t.timeStamp,t)},preUpdate:function(){this.pluginEvents.emit(d.PRE_UPDATE);var t=this._pendingRemoval,e=this._pendingInsertion,i=t.length,n=e.length;if(0!==i||0!==n){for(var r=this._list,s=0;s<i;s++){var a=t[s],o=r.indexOf(a);-1<o&&(r.splice(o,1),this.clear(a,!0))}t.length=0,this._pendingRemoval.length=0,this._list=r.concat(e.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(t,e){if(!this.isActive())return!1;if(this.pluginEvents.emit(d.UPDATE,t,e),this._updatedThisFrame)return this._updatedThisFrame=!1;for(var i=this.manager,n=i.pointers,r=i.pointersTotal,s=0;s<r;s++)n[s].updateMotion();if(0===this._list.length)return!1;var a=this.pollRate;if(-1===a)return!1;if(0<a){if(this._pollTimer-=e,!(this._pollTimer<0))return!1;this._pollTimer=this.pollRate}var o=!1;for(s=0;s<r;s++){var h=0,l=n[s];this._tempZones=[],this._temp=this.hitTestPointer(l),this.sortGameObjects(this._temp),this.sortGameObjects(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),h+=this.processOverOutEvents(l),2===this.getDragState(l)&&this.processDragThresholdEvent(l,t),0<h&&(o=!0)}return o},update:function(t,e){if(!this.isActive())return!1;for(var i=e.length,n=!1,r=0;r<i;r++){var s=0,o=e[r];switch(this._tempZones=[],this._temp=this.hitTestPointer(o),this.sortGameObjects(this._temp),this.sortGameObjects(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),t){case a.MOUSE_DOWN:s+=this.processDragDownEvent(o),s+=this.processDownEvents(o),s+=this.processOverOutEvents(o);break;case a.MOUSE_UP:s+=this.processDragUpEvent(o),s+=this.processUpEvents(o),s+=this.processOverOutEvents(o);break;case a.TOUCH_START:s+=this.processDragDownEvent(o),s+=this.processDownEvents(o),s+=this.processOverEvents(o);break;case a.TOUCH_END:case a.TOUCH_CANCEL:s+=this.processDragUpEvent(o),s+=this.processUpEvents(o),s+=this.processOutEvents(o);break;case a.MOUSE_MOVE:case a.TOUCH_MOVE:s+=this.processDragMoveEvent(o),s+=this.processMoveEvents(o),s+=this.processOverOutEvents(o);break;case a.MOUSE_WHEEL:s+=this.processWheelEvent(o)}0<s&&(n=!0)}return this._updatedThisFrame=!0,n},clear:function(t,e){void 0===e&&(e=!1);var i=t.input;if(i){e||this.queueForRemoval(t),i.gameObject=void 0,i.target=void 0,i.hitArea=void 0,i.hitAreaCallback=void 0,i.callbackContext=void 0,this.manager.resetCursor(i),t.input=null;var n=this._draggable.indexOf(t);return-1<n&&this._draggable.splice(n,1),-1<(n=this._drag[0].indexOf(t))&&this._drag[0].splice(n,1),-1<(n=this._over[0].indexOf(t))&&this._over[0].splice(n,1),t}},disable:function(t){t.input.enabled=!1},enable:function(t,e,i,n){return void 0===n&&(n=!1),t.input?t.input.enabled=!0:this.setHitArea(t,e,i),t.input&&n&&!t.input.dropZone&&(t.input.dropZone=n),this},hitTestPointer:function(t){for(var e=this.cameras.getCamerasBelowPointer(t),i=0;i<e.length;i++){for(var n=e[i],r=this.manager.hitTest(t,this._list,n),s=0;s<r.length;s++){var a=r[s];a.input.dropZone&&this._tempZones.push(a)}if(0<r.length)return t.camera=n,r}return t.camera=e[0],[]},processDownEvents:function(t){for(var e=0,i=this._temp,n=this._eventData,r=this._eventContainer,s=n.cancelled=!1,a=0;a<i.length;a++){var o=i[a];if(o.input){if(e++,o.emit(d.GAMEOBJECT_POINTER_DOWN,t,o.input.localX,o.input.localY,r),n.cancelled||!o.input){s=!0;break}if(this.emit(d.GAMEOBJECT_DOWN,t,o,r),n.cancelled||!o.input){s=!0;break}}}return!s&&this.manager&&(t.downElement===this.manager.game.canvas?this.emit(d.POINTER_DOWN,t,i):this.emit(d.POINTER_DOWN_OUTSIDE,t)),e},getDragState:function(t){return this._dragState[t.id]},setDragState:function(t,e){this._dragState[t.id]=e},processDragThresholdEvent:function(t,e){var i=!1,n=this.dragTimeThreshold,r=this.dragDistanceThreshold;if((0<r&&l(t.x,t.y,t.downX,t.downY)>=r||0<n&&e>=t.downTime+n)&&(i=!0),i)return this.setDragState(t,3),this.processDragStartList(t)},processDragStartList:function(t){if(3!==this.getDragState(t))return 0;for(var e=this._drag[t.id],i=0;i<e.length;i++){var n=e[i],r=n.input;r.dragState=2,r.dragStartX=n.x,r.dragStartY=n.y,r.dragStartXGlobal=t.worldX,r.dragStartYGlobal=t.worldY,r.dragX=r.dragStartXGlobal-r.dragStartX,r.dragY=r.dragStartYGlobal-r.dragStartY,n.emit(d.GAMEOBJECT_DRAG_START,t,r.dragX,r.dragY),this.emit(d.DRAG_START,t,n)}return this.setDragState(t,4),e.length},processDragDownEvent:function(t){var e=this._temp;if(0===this._draggable.length||0===e.length||!t.primaryDown||0!==this.getDragState(t))return 0;this.setDragState(t,1);for(var i=[],n=0;n<e.length;n++){var r=e[n];r.input.draggable&&0===r.input.dragState&&i.push(r)}return 0===i.length?(this.setDragState(t,0),0):(1<i.length&&(this.sortGameObjects(i),this.topOnly&&i.splice(1)),this._drag[t.id]=i,0===this.dragDistanceThreshold&&0===this.dragTimeThreshold?(this.setDragState(t,3),this.processDragStartList(t)):(this.setDragState(t,2),0))},processDragMoveEvent:function(t){if(2===this.getDragState(t)&&this.processDragThresholdEvent(t,this.manager.game.loop.now),4!==this.getDragState(t))return 0;for(var e=this._tempZones,i=this._drag[t.id],n=0;n<i.length;n++){var r,s,a,o,h,l,u,c,f=i[n],p=f.input,g=p.target;g?0===(r=e.indexOf(g))?(f.emit(d.GAMEOBJECT_DRAG_OVER,t,g),this.emit(d.DRAG_OVER,t,f,g)):0<r?(f.emit(d.GAMEOBJECT_DRAG_LEAVE,t,g),this.emit(d.DRAG_LEAVE,t,f,g),p.target=e[0],g=p.target,f.emit(d.GAMEOBJECT_DRAG_ENTER,t,g),this.emit(d.DRAG_ENTER,t,f,g)):(f.emit(d.GAMEOBJECT_DRAG_LEAVE,t,g),this.emit(d.DRAG_LEAVE,t,f,g),e[0]?(p.target=e[0],g=p.target,f.emit(d.GAMEOBJECT_DRAG_ENTER,t,g),this.emit(d.DRAG_ENTER,t,f,g)):p.target=null):!g&&e[0]&&(p.target=e[0],g=p.target,f.emit(d.GAMEOBJECT_DRAG_ENTER,t,g),this.emit(d.DRAG_ENTER,t,f,g)),a=f.parentContainer?(o=t.worldX-p.dragStartXGlobal,h=t.worldY-p.dragStartYGlobal,l=f.getParentRotation(),u=o*Math.cos(l)+h*Math.sin(l),c=h*Math.cos(l)-o*Math.sin(l),u*=1/f.parentContainer.scaleX,c*=1/f.parentContainer.scaleY,s=u+p.dragStartX,c+p.dragStartY):(s=t.worldX-p.dragX,t.worldY-p.dragY),f.emit(d.GAMEOBJECT_DRAG,t,s,a),this.emit(d.DRAG,t,f,s,a)}return i.length},processDragUpEvent:function(t){for(var e=this._drag[t.id],i=0;i<e.length;i++){var n,r,s=e[i],a=s.input;a&&2===a.dragState&&(a.dragState=0,a.dragX=a.localX-s.displayOriginX,a.dragY=a.localY-s.displayOriginY,n=!1,(r=a.target)&&(s.emit(d.GAMEOBJECT_DROP,t,r),this.emit(d.DROP,t,s,r),n=!(a.target=null)),s.input&&(s.emit(d.GAMEOBJECT_DRAG_END,t,a.dragX,a.dragY,n),this.emit(d.DRAG_END,t,s,n)))}return this.setDragState(t,0),e.splice(0),0},processMoveEvents:function(t){for(var e=0,i=this._temp,n=this._eventData,r=this._eventContainer,s=n.cancelled=!1,a=0;a<i.length;a++){var o=i[a];if(o.input){if(e++,o.emit(d.GAMEOBJECT_POINTER_MOVE,t,o.input.localX,o.input.localY,r),n.cancelled||!o.input){s=!0;break}if(this.emit(d.GAMEOBJECT_MOVE,t,o,r),n.cancelled||!o.input){s=!0;break}if(this.topOnly)break}}return s||this.emit(d.POINTER_MOVE,t,i),e},processWheelEvent:function(t){for(var e=0,i=this._temp,n=this._eventData,r=this._eventContainer,s=n.cancelled=!1,a=t.deltaX,o=t.deltaY,h=t.deltaZ,l=0;l<i.length;l++){var u=i[l];if(u.input){if(e++,u.emit(d.GAMEOBJECT_POINTER_WHEEL,t,a,o,h,r),n.cancelled||!u.input){s=!0;break}if(this.emit(d.GAMEOBJECT_WHEEL,t,u,a,o,h,r),n.cancelled||!u.input){s=!0;break}}}return s||this.emit(d.POINTER_WHEEL,t,i,a,o,h),e},processOverEvents:function(t){var e=this._temp,i=0,n=e.length,r=[];if(0<n){for(var s=this.manager,a=this._eventData,o=this._eventContainer,h=a.cancelled=!1,l=0;l<n;l++){var u=e[l];if(u.input){if(r.push(u),s.setCursor(u.input),u.emit(d.GAMEOBJECT_POINTER_OVER,t,u.input.localX,u.input.localY,o),i++,a.cancelled||!u.input){h=!0;break}if(this.emit(d.GAMEOBJECT_OVER,t,u,o),a.cancelled||!u.input){h=!0;break}}}h||this.emit(d.POINTER_OVER,t,r)}return this._over[t.id]=r,i},processOutEvents:function(t){var e=this._over[t.id],i=0,n=e.length;if(0<n){var r=this.manager,s=this._eventData,a=this._eventContainer,o=s.cancelled=!1;this.sortGameObjects(e);for(var h=0;h<n;h++){var l=e[h];for(h=0;h<n;h++)if((l=e[h]).input){if(r.resetCursor(l.input),l.emit(d.GAMEOBJECT_POINTER_OUT,t,a),i++,s.cancelled||!l.input){o=!0;break}if(this.emit(d.GAMEOBJECT_OUT,t,l,a),s.cancelled||!l.input){o=!0;break}}o||this.emit(d.POINTER_OUT,t,e)}this._over[t.id]=[]}return i},processOverOutEvents:function(t){for(var e,i=this._temp,n=[],r=[],s=[],a=this._over[t.id],o=this._drag[t.id],h=this.manager,l=0;l<a.length;l++)e=a[l],-1===i.indexOf(e)&&-1===o.indexOf(e)?n.push(e):s.push(e);for(l=0;l<i.length;l++)e=i[l],-1===a.indexOf(e)&&r.push(e);var u=n.length,c=0,f=this._eventData,p=this._eventContainer,g=f.cancelled=!1;if(0<u){for(this.sortGameObjects(n),l=0;l<u;l++)if((e=n[l]).input){if(h.resetCursor(e.input),e.emit(d.GAMEOBJECT_POINTER_OUT,t,p),c++,f.cancelled||!e.input){g=!0;break}if(this.emit(d.GAMEOBJECT_OUT,t,e,p),f.cancelled||!e.input){g=!0;break}}g||this.emit(d.POINTER_OUT,t,n)}if(u=r.length,g=f.cancelled=!1,0<u){for(this.sortGameObjects(r),l=0;l<u;l++)if((e=r[l]).input){if(h.setCursor(e.input),e.emit(d.GAMEOBJECT_POINTER_OVER,t,e.input.localX,e.input.localY,p),c++,f.cancelled||!e.input){g=!0;break}if(this.emit(d.GAMEOBJECT_OVER,t,e,p),f.cancelled||!e.input){g=!0;break}}g||this.emit(d.POINTER_OVER,t,r)}return a=s.concat(r),this._over[t.id]=this.sortGameObjects(a),c},processUpEvents:function(t){for(var e=this._temp,i=this._eventData,n=this._eventContainer,r=i.cancelled=!1,s=0;s<e.length;s++){var a=e[s];if(a.input){if(a.emit(d.GAMEOBJECT_POINTER_UP,t,a.input.localX,a.input.localY,n),i.cancelled||!a.input){r=!0;break}if(this.emit(d.GAMEOBJECT_UP,t,a,n),i.cancelled||!a.input){r=!0;break}}}return!r&&this.manager&&(t.upElement===this.manager.game.canvas?this.emit(d.POINTER_UP,t,e):this.emit(d.POINTER_UP_OUTSIDE,t)),e.length},queueForInsertion:function(t){return-1===this._pendingInsertion.indexOf(t)&&-1===this._list.indexOf(t)&&this._pendingInsertion.push(t),this},queueForRemoval:function(t){return this._pendingRemoval.push(t),this},setDraggable:function(t,e){void 0===e&&(e=!0),Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var n=t[i];n.input.draggable=e;var r=this._draggable.indexOf(n);e&&-1===r?this._draggable.push(n):!e&&-1<r&&this._draggable.splice(r,1)}return this},makePixelPerfect:function(t){void 0===t&&(t=1);var e=this.systems.textures;return h(e,t)},setHitArea:function(t,e,i){if(void 0===e)return this.setHitAreaFromTexture(t);Array.isArray(t)||(t=[t]);var n,r,s=!1,a=!1,h=!1,l=!1,u=!1,c=!0;y(e)?(e=p(n=e,"hitArea",null),i=p(n,"hitAreaCallback",null),s=p(n,"draggable",!1),a=p(n,"dropZone",!1),h=p(n,"cursor",!1),l=p(n,"useHandCursor",!1),u=p(n,"pixelPerfect",!1),r=p(n,"alphaTolerance",1),u&&(e={},i=this.makePixelPerfect(r)),e&&i||(this.setHitAreaFromTexture(t),c=!1)):"function"!=typeof e||i||(i=e,e={});for(var d=0;d<t.length;d++){var f,g=t[d];u&&"Container"===g.type?console.warn("Cannot pixelPerfect test a Container. Use a custom callback."):((f=g.input?g.input:o(g,e,i)).customHitArea=c,f.dropZone=a,f.cursor=l?"pointer":h,g.input=f,s&&this.setDraggable(g),this.queueForInsertion(g))}return this},setHitAreaCircle:function(t,e,i,s,a){void 0===a&&(a=r);var o=new n(e,i,s);return this.setHitArea(t,o,a)},setHitAreaEllipse:function(t,e,i,n,r,s){void 0===s&&(s=c);var a=new u(e,i,n,r);return this.setHitArea(t,a,s)},setHitAreaFromTexture:function(t,e){void 0===e&&(e=x),Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var n=t[i],r=n.frame,s=0,a=0;n.width?(s=n.width,a=n.height):r&&(s=r.realWidth,a=r.realHeight),"Container"!==n.type||0!==s&&0!==a?0!==s&&0!==a&&(n.input=o(n,new _(0,0,s,a),e),this.queueForInsertion(n)):console.warn("Container.setInteractive must specify a Shape or call setSize() first")}return this},setHitAreaRectangle:function(t,e,i,n,r,s){void 0===s&&(s=x);var a=new _(e,i,n,r);return this.setHitArea(t,a,s)},setHitAreaTriangle:function(t,e,i,n,r,s,a,o){void 0===o&&(o=T);var h=new b(e,i,n,r,s,a);return this.setHitArea(t,h,o)},enableDebug:function(t,e){void 0===e&&(e=65280);var i=t.input;if(!i||!i.hitArea)return this;var n=i.hitArea,r=n.type,s=i.hitAreaDebug,a=this.systems.add,o=this.systems.updateList;s&&(o.remove(s),s.destroy(),s=null);var h=0,l=0;switch(r){case g.CIRCLE:s=a.arc(0,0,n.radius),h=n.x-n.radius,l=n.y-n.radius;break;case g.ELLIPSE:s=a.ellipse(0,0,n.width,n.height),h=n.x-n.width/2,l=n.y-n.height/2;break;case g.LINE:s=a.line(0,0,n.x1,n.y1,n.x2,n.y2);break;case g.POLYGON:s=a.polygon(0,0,n.points);break;case g.RECTANGLE:s=a.rectangle(0,0,n.width,n.height),h=n.x,l=n.y;break;case g.TRIANGLE:s=a.triangle(0,0,n.x1,n.y1,n.x2,n.y2,n.x3,n.y3)}return s&&(s.isFilled=!1,s.preUpdate=function(){s.setStrokeStyle(1/t.scale,e),s.setDisplayOrigin(t.displayOriginX,t.displayOriginY);var i,n=t.x,r=t.y,a=t.rotation,o=t.scaleX,u=t.scaleY;t.parentContainer&&(n=(i=t.getWorldTransformMatrix()).tx,r=i.ty,a=i.rotation,o=i.scaleX,u=i.scaleY),s.setRotation(a),s.setScale(o,u),s.setPosition(n+h,r+l),s.setScrollFactor(t.scrollFactorX,t.scrollFactorY),s.setDepth(t.depth)},o.add(s),i.hitAreaDebug=s),this},removeDebug:function(t){var e,i=t.input;return i&&i.hitAreaDebug&&(e=i.hitAreaDebug,this.systems.updateList.remove(e),e.destroy(),i.hitAreaDebug=null),this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(t){return this.pollRate=t,this._pollTimer=0,this},setGlobalTopOnly:function(t){return this.manager.globalTopOnly=t,this},setTopOnly:function(t){return this.topOnly=t,this},sortGameObjects:function(t){return t.length<2?t:(this.scene.sys.depthSort(),t.sort(this.sortHandlerGO.bind(this)))},sortHandlerGO:function(t,e){if(t.parentContainer||e.parentContainer){if(t.parentContainer===e.parentContainer)return e.parentContainer.getIndex(e)-t.parentContainer.getIndex(t);if(t.parentContainer===e)return-1;if(e.parentContainer===t)return 1;for(var i=t.getIndexList(),n=e.getIndexList(),r=Math.min(i.length,n.length),s=0;s<r;s++){var a=i[s],o=n[s];if(a!==o)return o-a}return n.length-i.length}return this.displayList.getIndex(e)-this.displayList.getIndex(t)},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(t){return this.manager.addPointer(t)},setDefaultCursor:function(t){return this.manager.setDefaultCursor(t),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(d.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;for(var t=this._dragState.length=0;t<10;t++)this._drag[t]=[],this._over[t]=[];this.removeAllListeners();var e=this.systems.events;e.off(w.TRANSITION_START,this.transitionIn,this),e.off(w.TRANSITION_OUT,this.transitionOut,this),e.off(w.TRANSITION_COMPLETE,this.transitionComplete,this),e.off(w.PRE_UPDATE,this.preUpdate,this),this.manager.events.off(d.GAME_OUT,this.onGameOut,this),this.manager.events.off(d.GAME_OVER,this.onGameOver,this),e.off(w.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(d.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(w.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});v.register("InputPlugin",E,"input"),t.exports=E},function(t,e){t.exports=function(t,e){return function(i,n,r,s){var a=t.getPixelAlpha(n,r,s.texture.key,s.frame.name);return a&&e<=a}}},function(t,e,i){t.exports={Events:i(137),KeyboardManager:i(366),KeyboardPlugin:i(1224),Key:i(453),KeyCodes:i(124),KeyCombo:i(454),JustDown:i(1229),JustUp:i(1230),DownDuration:i(1231),UpDuration:i(1232)}},function(t,e){t.exports="keydown"},function(t,e){t.exports="keyup"},function(t,e){t.exports="keycombomatch"},function(t,e){t.exports="down"},function(t,e){t.exports="keydown-"},function(t,e){t.exports="keyup-"},function(t,e){t.exports="up"},function(t,e,i){var n=i(0),r=i(10),s=i(137),a=i(20),o=i(6),h=i(54),l=i(136),u=i(453),c=i(124),d=i(454),f=i(1228),p=i(93),g=new n({Extends:r,initialize:function(t){r.call(this),this.game=t.systems.game,this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.manager=t.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],t.pluginEvents.once(h.BOOT,this.boot,this),t.pluginEvents.on(h.START,this.start,this)},boot:function(){var t=this.settings.input;this.enabled=o(t,"keyboard",!0);var e=o(t,"keyboard.capture",null);e&&this.addCaptures(e),this.sceneInputPlugin.pluginEvents.once(h.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.useQueue?this.sceneInputPlugin.pluginEvents.on(h.UPDATE,this.update,this):this.sceneInputPlugin.manager.events.on(h.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(h.SHUTDOWN,this.shutdown,this),this.game.events.on(a.BLUR,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(t){return this.manager.addCapture(t),this},removeCapture:function(t){return this.manager.removeCapture(t),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:c.UP,down:c.DOWN,left:c.LEFT,right:c.RIGHT,space:c.SPACE,shift:c.SHIFT})},addKeys:function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1);var n={};if("string"==typeof t){t=t.split(",");for(var r=0;r<t.length;r++){var s=t[r].trim();s&&(n[s]=this.addKey(s,e,i))}}else for(var a in t)n[a]=this.addKey(t[a],e,i);return n},addKey:function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1);var n=this.keys;if(t instanceof u){var r=n.indexOf(t);return-1<r?n[r]=t:n[t.keyCode]=t,e&&this.addCapture(t.keyCode),t.setEmitOnRepeat(i),t}return"string"==typeof t&&(t=c[t.toUpperCase()]),n[t]||(n[t]=new u(this,t),e&&this.addCapture(t),n[t].setEmitOnRepeat(i)),n[t]},removeKey:function(t,e){void 0===e&&(e=!1);var i,n,r=this.keys;return t instanceof u?-1<(n=r.indexOf(t))&&(i=this.keys[n],this.keys[n]=void 0):"string"==typeof t&&(t=c[t.toUpperCase()]),r[t]&&(i=r[t],r[t]=void 0),i&&(i.plugin=null,e&&i.destroy()),this},removeAllKeys:function(t){for(var e=this.keys,i=0;i<e.length;i++){var n=e[i];n&&(e[i]=void 0,t&&n.destroy())}return this},createCombo:function(t,e){return new d(this,t,e)},checkDown:function(t,e){if(void 0===e&&(e=0),this.enabled&&t.isDown){var i=p(this.time-t.timeDown,e);if(i>t._tick)return t._tick=i,!0}return!1},update:function(){var t=this.manager.queue,e=t.length;if(this.isActive()&&0!==e)for(var i=this.keys,n=0;n<e;n++){var r=t[n],a=r.keyCode,o=i[a],h=!1;void 0===r.cancelled&&(r.cancelled=0,r.stopImmediatePropagation=function(){r.cancelled=1},r.stopPropagation=function(){r.cancelled=-1}),-1!==r.cancelled&&("keydown"===r.type?(o&&(h=o.isDown,o.onDown(r)),r.cancelled||o&&h||(f[a]&&(this.emit(s.KEY_DOWN+f[a],r),this.emit("keydown_"+f[a],r)),r.cancelled||this.emit(s.ANY_KEY_DOWN,r))):(o&&o.onUp(r),r.cancelled||(f[a]&&(this.emit(s.KEY_UP+f[a],r),this.emit("keyup_"+f[a],r)),r.cancelled||this.emit(s.ANY_KEY_UP,r))),1===r.cancelled&&(r.cancelled=0))}},resetKeys:function(){for(var t=this.keys,e=0;e<t.length;e++)t[e]&&t[e].reset();return this},shutdown:function(){this.resetKeys(),this.sceneInputPlugin.manager.useQueue?this.sceneInputPlugin.pluginEvents.off(h.UPDATE,this.update,this):this.sceneInputPlugin.manager.events.off(h.MANAGER_PROCESS,this.update,this),this.game.events.off(a.BLUR,this.resetKeys),this.removeAllListeners(),this.queue=[]},destroy:function(){this.shutdown();for(var t=this.keys,e=0;e<t.length;e++)t[e]&&t[e].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});l.register("KeyboardPlugin",g,"keyboard","keyboard","inputKeyboard"),t.exports=g},function(t,e,i){var n=i(1226);t.exports=function(t,e){if(e.matched)return!0;var i,r=!1,s=!1;return t.keyCode===e.current&&(0<e.index&&0<e.maxKeyDelay?(i=e.timeLastMatched+e.maxKeyDelay,t.timeStamp<=i&&(s=!0,r=n(t,e))):(s=!0,r=n(t,e))),!s&&e.resetOnWrongKey&&(e.index=0,e.current=e.keyCodes[0]),r&&(e.timeLastMatched=t.timeStamp,e.matched=!0,e.timeMatched=t.timeStamp),r}},function(t,e){t.exports=function(t,e){return e.timeLastMatched=t.timeStamp,e.index++,e.index===e.size||(e.current=e.keyCodes[e.index],!1)}},function(t,e){t.exports=function(t){return t.current=t.keyCodes[0],t.index=0,t.timeLastMatched=0,t.matched=!1,t.timeMatched=0,t}},function(t,e,i){var n=i(124),r={};for(var s in n)r[n[s]]=s;t.exports=r},function(t,e){t.exports=function(t){return!!t._justDown&&!(t._justDown=!1)}},function(t,e){t.exports=function(t){return!!t._justUp&&!(t._justUp=!1)}},function(t,e){t.exports=function(t,e){void 0===e&&(e=50);var i=t.plugin.game.loop.time-t.timeDown;return t.isDown&&i<e}},function(t,e){t.exports=function(t,e){void 0===e&&(e=50);var i=t.plugin.game.loop.time-t.timeUp;return t.isUp&&i<e}},function(t,e,i){t.exports={MouseManager:i(367)}},function(t,e,i){t.exports={TouchManager:i(369)}},function(t,e,i){var n=i(17),r=i(18)(!1,r={Events:i(82),FileTypes:i(1236),File:i(21),FileTypesManager:i(8),GetURL:i(138),LoaderPlugin:i(1260),MergeXHRSettings:i(215),MultiFile:i(61),XHRLoader:i(455),XHRSettings:i(139)},n);t.exports=r},function(t,e,i){t.exports={AnimationJSONFile:i(1237),AtlasJSONFile:i(1238),AtlasXMLFile:i(1239),AudioFile:i(456),AudioSpriteFile:i(1240),BinaryFile:i(1241),BitmapFontFile:i(1242),CSSFile:i(1243),GLSLFile:i(1244),HTML5AudioFile:i(457),HTMLFile:i(1245),HTMLTextureFile:i(1246),ImageFile:i(72),JSONFile:i(60),MultiAtlasFile:i(1247),MultiScriptFile:i(1248),PackFile:i(1249),PluginFile:i(1250),SceneFile:i(1251),ScenePluginFile:i(1252),ScriptFile:i(458),SpriteSheetFile:i(1253),SVGFile:i(1254),TextFile:i(459),TilemapCSVFile:i(1255),TilemapImpactFile:i(1256),TilemapJSONFile:i(1257),UnityAtlasFile:i(1258),VideoFile:i(1259),XMLFile:i(216)}},function(t,e,i){var n=i(0),r=i(8),s=i(60),a=i(82),o=new n({Extends:s,initialize:function(t,e,i,n,r){s.call(this,t,e,i,n,r),this.type="animationJSON"},onProcess:function(){this.loader.once(a.POST_PROCESS,this.onLoadComplete,this),s.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});r.register("animation",(function(t,e,i,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new o(this,t[r]));else this.addFile(new o(this,t,e,n,i));return this})),t.exports=o},function(t,e,i){var n=i(0),r=i(8),s=i(2),a=i(72),o=i(7),h=i(60),l=i(61),u=new n({Extends:l,initialize:function(t,e,i,n,r,u){var c,d,f=o(e)?(e=s(d=e,"key"),c=new a(t,{key:e,url:s(d,"textureURL"),extension:s(d,"textureExtension","png"),normalMap:s(d,"normalMap"),xhrSettings:s(d,"textureXhrSettings")}),new h(t,{key:e,url:s(d,"atlasURL"),extension:s(d,"atlasExtension","json"),xhrSettings:s(d,"atlasXhrSettings")})):(c=new a(t,e,i,r),new h(t,e,n,u));c.linkFile?l.call(this,t,"atlasjson",e,[c,f,c.linkFile]):l.call(this,t,"atlasjson",e,[c,f])},addToCache:function(){var t,e,i;this.isReadyToProcess()&&(t=this.files[0],e=this.files[1],i=this.files[2]?this.files[2].data:null,this.loader.textureManager.addAtlas(t.key,t.data,e.data,i),e.addToCache(),this.complete=!0)}});r.register("atlas",(function(t,e,i,n,r){var s;if(Array.isArray(t))for(var a=0;a<t.length;a++)s=new u(this,t[a]),this.addFile(s.files);else s=new u(this,t,e,i,n,r),this.addFile(s.files);return this})),t.exports=u},function(t,e,i){var n=i(0),r=i(8),s=i(2),a=i(72),o=i(7),h=i(61),l=i(216),u=new n({Extends:h,initialize:function(t,e,i,n,r,u){var c,d,f=o(e)?(e=s(d=e,"key"),c=new a(t,{key:e,url:s(d,"textureURL"),extension:s(d,"textureExtension","png"),normalMap:s(d,"normalMap"),xhrSettings:s(d,"textureXhrSettings")}),new l(t,{key:e,url:s(d,"atlasURL"),extension:s(d,"atlasExtension","xml"),xhrSettings:s(d,"atlasXhrSettings")})):(c=new a(t,e,i,r),new l(t,e,n,u));c.linkFile?h.call(this,t,"atlasxml",e,[c,f,c.linkFile]):h.call(this,t,"atlasxml",e,[c,f])},addToCache:function(){var t,e,i;this.isReadyToProcess()&&(t=this.files[0],e=this.files[1],i=this.files[2]?this.files[2].data:null,this.loader.textureManager.addAtlasXML(t.key,t.data,e.data,i),e.addToCache(),this.complete=!0)}});r.register("atlasXML",(function(t,e,i,n,r){var s;if(Array.isArray(t))for(var a=0;a<t.length;a++)s=new u(this,t[a]),this.addFile(s.files);else s=new u(this,t,e,i,n,r),this.addFile(s.files);return this})),t.exports=u},function(t,e,i){var n=i(456),r=i(0),s=i(8),a=i(2),o=i(7),h=i(60),l=i(61),u=new r({Extends:l,initialize:function(t,e,i,r,s,u,c){var d,f,p;o(e)&&(e=a(d=e,"key"),i=a(d,"jsonURL"),r=a(d,"audioURL"),s=a(d,"audioConfig"),u=a(d,"audioXhrSettings"),c=a(d,"jsonXhrSettings")),r?(p=n.create(t,e,r,s,u))&&(f=new h(t,e,i,c),l.call(this,t,"audiosprite",e,[p,f]),this.config.resourceLoad=!1):(f=new h(t,e,i,c),l.call(this,t,"audiosprite",e,[f]),this.config.resourceLoad=!0,this.config.audioConfig=s,this.config.audioXhrSettings=u)},onFileComplete:function(t){var e,i,r,s;-1!==this.files.indexOf(t)&&(this.pending--,this.config.resourceLoad&&"json"===t.type&&t.data.hasOwnProperty("resources")&&(e=t.data.resources,i=a(this.config,"audioConfig"),r=a(this.config,"audioXhrSettings"),(s=n.create(this.loader,t.key,e,i,r))&&(this.addToMultiFile(s),this.loader.addFile(s))))},addToCache:function(){var t,e;this.isReadyToProcess()&&(t=this.files[0],e=this.files[1],t.addToCache(),e.addToCache(),this.complete=!0)}});s.register("audioSprite",(function(t,e,i,n,r,s){var a,o=this.systems.game,h=o.config.audio,l=o.device.audio;if(h&&h.noAudio||!l.webAudio&&!l.audioData)return this;if(Array.isArray(t))for(var c=0;c<t.length;c++)(a=new u(this,t[c])).files&&this.addFile(a.files);else(a=new u(this,t,e,i,n,r,s)).files&&this.addFile(a.files);return this}))},function(t,e,i){var n=i(0),r=i(17),s=i(21),a=i(8),o=i(2),h=i(7),l=new n({Extends:s,initialize:function(t,e,i,n,r){var a,l="bin";h(e)&&(e=o(a=e,"key"),i=o(a,"url"),n=o(a,"xhrSettings"),l=o(a,"extension",l),r=o(a,"dataType",r));var u={type:"binary",cache:t.cacheManager.binary,extension:l,responseType:"arraybuffer",key:e,url:i,xhrSettings:n,config:{dataType:r}};s.call(this,t,u)},onProcess:function(){this.state=r.FILE_PROCESSING;var t=this.config.dataType;this.data=t?new t(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});a.register("binary",(function(t,e,i,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new l(this,t[r]));else this.addFile(new l(this,t,e,n,i));return this})),t.exports=l},function(t,e,i){var n=i(0),r=i(8),s=i(2),a=i(72),o=i(7),h=i(61),l=i(187),u=i(216),c=new n({Extends:h,initialize:function(t,e,i,n,r,l){var c,d,f=o(e)?(e=s(d=e,"key"),c=new a(t,{key:e,url:s(d,"textureURL"),extension:s(d,"textureExtension","png"),normalMap:s(d,"normalMap"),xhrSettings:s(d,"textureXhrSettings")}),new u(t,{key:e,url:s(d,"fontDataURL"),extension:s(d,"fontDataExtension","xml"),xhrSettings:s(d,"fontDataXhrSettings")})):(c=new a(t,e,i,r),new u(t,e,n,l));c.linkFile?h.call(this,t,"bitmapfont",e,[c,f,c.linkFile]):h.call(this,t,"bitmapfont",e,[c,f])},addToCache:function(){var t,e;this.isReadyToProcess()&&(t=this.files[0],e=this.files[1],t.addToCache(),e.addToCache(),this.loader.cacheManager.bitmapFont.add(t.key,{data:l(e.data),texture:t.key,frame:null}),this.complete=!0)}});r.register("bitmapFont",(function(t,e,i,n,r){var s;if(Array.isArray(t))for(var a=0;a<t.length;a++)s=new c(this,t[a]),this.addFile(s.files);else s=new c(this,t,e,i,n,r),this.addFile(s.files);return this})),t.exports=c},function(t,e,i){var n=i(0),r=i(17),s=i(21),a=i(8),o=i(2),h=i(7),l=new n({Extends:s,initialize:function(t,e,i,n){var r,a="css";h(e)&&(e=o(r=e,"key"),i=o(r,"url"),n=o(r,"xhrSettings"),a=o(r,"extension",a));var l={type:"script",cache:!1,extension:a,responseType:"text",key:e,url:i,xhrSettings:n};s.call(this,t,l)},onProcess:function(){this.state=r.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});a.register("css",(function(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new l(this,t[n]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},function(t,e,i){var n=i(0),r=i(17),s=i(21),a=i(8),o=i(2),h=i(7),l=i(353),u=new n({Extends:s,initialize:function(t,e,i,n,r){var a,l="glsl";h(e)?(e=o(a=e,"key"),i=o(a,"url"),n=o(a,"shaderType","fragment"),r=o(a,"xhrSettings"),l=o(a,"extension",l)):void 0===n&&(n="fragment");var u={type:"glsl",cache:t.cacheManager.shader,extension:l,responseType:"text",key:e,url:i,config:{shaderType:n},xhrSettings:r};s.call(this,t,u)},onProcess:function(){this.state=r.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t=this.data.split("\n"),e=this.extractBlock(t,0);if(e)for(;e;){var i,n=this.getShaderName(e.header),r=this.getShaderType(e.header),s=this.getShaderUniforms(e.header),a=e.shader;this.cache.has(n)?(i=this.cache.get(n),"fragment"===r?i.fragmentSrc=a:i.vertexSrc=a,i.uniforms||(i.uniforms=s)):"fragment"===r?this.cache.add(n,new l(n,a,"",s)):this.cache.add(n,new l(n,"",a,s)),e=this.extractBlock(t,e.offset)}else"fragment"===this.config.shaderType?this.cache.add(this.key,new l(this.key,this.data)):this.cache.add(this.key,new l(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(t){for(var e=0;e<t.length;e++){var i=t[e].trim();if("name:"===i.substring(0,5))return i.substring(5).trim()}return this.key},getShaderType:function(t){for(var e=0;e<t.length;e++){var i=t[e].trim();if("type:"===i.substring(0,5))return i.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(t){for(var e={},i=0;i<t.length;i++){var n=t[i].trim();if("uniform."===n.substring(0,8)){var r=n.indexOf(":");if(r){var s=n.substring(8,r);try{e[s]=JSON.parse(n.substring(r+1))}catch(t){console.warn("Invalid uniform JSON: "+s)}}}}return e},extractBlock:function(t,e){for(var i=-1,n=-1,r=-1,s=!1,a=!1,o=[],h=[],l=e;l<t.length;l++){var u=t[l].trim();if("---"===u)if(-1===i)i=l,s=!0;else{if(!s){a=!1;break}n=l,a=!(s=!1)}else s?o.push(u):a&&(h.push(u),r=l)}return s||-1===n?null:{header:o,shader:h.join("\n"),offset:r}}});a.register("glsl",(function(t,e,i,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new u(this,t[r]));else this.addFile(new u(this,t,e,i,n));return this})),t.exports=u},function(t,e,i){var n=i(0),r=i(17),s=i(21),a=i(8),o=i(2),h=i(7),l=new n({Extends:s,initialize:function(t,e,i,n){var r,a="html";h(e)&&(e=o(r=e,"key"),i=o(r,"url"),n=o(r,"xhrSettings"),a=o(r,"extension",a));var l={type:"text",cache:t.cacheManager.html,extension:a,responseType:"text",key:e,url:i,xhrSettings:n};s.call(this,t,l)},onProcess:function(){this.state=r.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});a.register("html",(function(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new l(this,t[n]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},function(t,e,i){var n=i(0),r=i(17),s=i(21),a=i(8),o=i(2),h=i(7),l=new n({Extends:s,initialize:function(t,e,i,n,r,a){void 0===n&&(n=512),void 0===r&&(r=512);var l,u="html";h(e)&&(e=o(l=e,"key"),i=o(l,"url"),a=o(l,"xhrSettings"),u=o(l,"extension",u),n=o(l,"width",n),r=o(l,"height",r));var c={type:"html",cache:t.textureManager,extension:u,responseType:"text",key:e,url:i,xhrSettings:a,config:{width:n,height:r}};s.call(this,t,c)},onProcess:function(){this.state=r.FILE_PROCESSING;var t=this.config.width,e=this.config.height,i=[];i.push('<svg width="'+t+'px" height="'+e+'px" viewBox="0 0 '+t+" "+e+'" xmlns="http://www.w3.org/2000/svg">'),i.push('<foreignObject width="100%" height="100%">'),i.push('<body xmlns="http://www.w3.org/1999/xhtml">'),i.push(this.xhrLoader.responseText),i.push("</body>"),i.push("</foreignObject>"),i.push("</svg>");var n=[i.join("\n")],a=this;try{var o=new window.Blob(n,{type:"image/svg+xml;charset=utf-8"})}catch(t){return a.state=r.FILE_ERRORED,void a.onProcessComplete()}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){s.revokeObjectURL(a.data),a.onProcessComplete()},this.data.onerror=function(){s.revokeObjectURL(a.data),a.onProcessError()},s.createObjectURL(this.data,o,"image/svg+xml")},addToCache:function(){var t=this.cache.addImage(this.key,this.data);this.pendingDestroy(t)}});a.register("htmlTexture",(function(t,e,i,n,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new l(this,t[s]));else this.addFile(new l(this,t,e,i,n,r));return this})),t.exports=l},function(t,e,i){var n=i(0),r=i(8),s=i(2),a=i(72),o=i(7),h=i(60),l=i(61),u=new n({Extends:l,initialize:function(t,e,i,n,r,a,u){var c;o(e)&&(e=s(c=e,"key"),i=s(c,"url",!1)?s(c,"url"):s(c,"atlasURL"),a=s(c,"xhrSettings"),n=s(c,"path"),r=s(c,"baseURL"),u=s(c,"textureXhrSettings"));var d=new h(t,e,i,a);l.call(this,t,"multiatlas",e,[d]),this.config.path=n,this.config.baseURL=r,this.config.textureXhrSettings=u},onFileComplete:function(t){if(-1!==this.files.indexOf(t)&&(this.pending--,"json"===t.type&&t.data.hasOwnProperty("textures"))){var e=t.data.textures,i=this.config,n=this.loader,r=n.baseURL,o=n.path,h=n.prefix,l=s(i,"baseURL",this.baseURL),u=s(i,"path",this.path),c=s(i,"prefix",this.prefix),d=s(i,"textureXhrSettings");n.setBaseURL(l),n.setPath(u),n.setPrefix(c);for(var f=0;f<e.length;f++){var p,g=e[f].image,m="MA"+this.multiKeyIndex+"_"+g,y=new a(n,m,g,d);this.addToMultiFile(y),n.addFile(y),e[f].normalMap&&((p=new a(n,m,e[f].normalMap,d)).type="normalMap",y.setLink(p),this.addToMultiFile(p),n.addFile(p))}n.setBaseURL(r),n.setPath(o),n.setPrefix(h)}},addToCache:function(){if(this.isReadyToProcess()){for(var t=this.files[0],e=[],i=[],n=[],r=1;r<this.files.length;r++){var s=this.files[r];if("normalMap"!==s.type)for(var a=s.key.indexOf("_"),o=s.key.substr(a+1),h=s.data,l=0;l<t.data.textures.length;l++){var u=t.data.textures[l];if(u.image===o){i.push(h),e.push(u),s.linkFile&&n.push(s.linkFile.data);break}}}for(0===n.length&&(n=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,i,e,n),this.complete=!0,r=0;r<this.files.length;r++)this.files[r].pendingDestroy()}}});r.register("multiatlas",(function(t,e,i,n,r){var s;if(Array.isArray(t))for(var a=0;a<t.length;a++)s=new u(this,t[a]),this.addFile(s.files);else s=new u(this,t,e,i,n,r),this.addFile(s.files);return this})),t.exports=u},function(t,e,i){var n=i(0),r=i(8),s=i(2),a=i(7),o=i(61),h=i(458),l=new n({Extends:o,initialize:function(t,e,i,n){var r,l="js",u=[];a(e)&&(e=s(r=e,"key"),i=s(r,"url"),n=s(r,"xhrSettings"),l=s(r,"extension",l)),Array.isArray(i)||(i=[i]);for(var c=0;c<i.length;c++){var d=new h(t,{key:e+"_"+c.toString(),url:i[c],extension:l,xhrSettings:n});d.onProcess=function(){this.onProcessComplete()},u.push(d)}o.call(this,t,"scripts",e,u)},addToCache:function(){if(this.isReadyToProcess()){for(var t=0;t<this.files.length;t++){var e=this.files[t];e.data=document.createElement("script"),e.data.language="javascript",e.data.type="text/javascript",e.data.defer=!1,e.data.text=e.xhrLoader.responseText,document.head.appendChild(e.data)}this.complete=!0}}});r.register("scripts",(function(t,e,i){var n;if(Array.isArray(t))for(var r=0;r<t.length;r++)n=new l(this,t[r]),this.addFile(n.files);else n=new l(this,t,e,i),this.addFile(n.files);return this})),t.exports=l},function(t,e,i){var n=i(0),r=i(17),s=i(8),a=i(60),o=new n({Extends:a,initialize:function(t,e,i,n,r){a.call(this,t,e,i,n,r),this.type="packfile"},onProcess:function(){this.state!==r.FILE_POPULATED&&(this.state=r.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});s.register("pack",(function(t,e,i,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new o(this,t[r]));else this.addFile(new o(this,t,e,n,i));return this})),t.exports=o},function(t,e,i){var n=i(0),r=i(17),s=i(21),a=i(8),o=i(2),h=i(7),l=new n({Extends:s,initialize:function(t,e,i,n,a,l){var u,c="js";h(e)&&(e=o(u=e,"key"),i=o(u,"url"),l=o(u,"xhrSettings"),c=o(u,"extension",c),n=o(u,"start"),a=o(u,"mapping"));var d={type:"plugin",cache:!1,extension:c,responseType:"text",key:e,url:i,xhrSettings:l,config:{start:n,mapping:a}};s.call(this,t,d),"function"==typeof i&&(this.data=i,this.state=r.FILE_POPULATED)},onProcess:function(){var t,e=this.loader.systems.plugins,i=this.config,n=o(i,"start",!1),s=o(i,"mapping",null);this.state===r.FILE_POPULATED?e.install(this.key,this.data,n,s):(this.state=r.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),t=e.install(this.key,window[this.key],n,s),(n||s)&&(this.loader.systems[s]=t,this.loader.scene[s]=t)),this.onProcessComplete()}});a.register("plugin",(function(t,e,i,n,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new l(this,t[s]));else this.addFile(new l(this,t,e,i,n,r));return this})),t.exports=l},function(t,e,i){var n=i(0),r=i(17),s=i(21),a=i(8),o=i(2),h=i(7),l=new n({Extends:s,initialize:function(t,e,i,n){var r,a="js";h(e)&&(e=o(r=e,"key"),i=o(r,"url"),n=o(r,"xhrSettings"),a=o(r,"extension",a));var l={type:"text",cache:t.cacheManager.text,extension:a,responseType:"text",key:e,url:i,xhrSettings:n};s.call(this,t,l)},onProcess:function(){this.state=r.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t=this.data.concat("(function(){\nreturn new "+this.key+"();\n}).call(this);"),e=eval;this.loader.sceneManager.add(this.key,e(t)),this.complete=!0}});a.register("sceneFile",(function(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new l(this,t[n]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},function(t,e,i){var n=i(0),r=i(17),s=i(21),a=i(8),o=i(2),h=i(7),l=new n({Extends:s,initialize:function(t,e,i,n,a,l){var u,c="js";h(e)&&(e=o(u=e,"key"),i=o(u,"url"),l=o(u,"xhrSettings"),c=o(u,"extension",c),n=o(u,"systemKey"),a=o(u,"sceneKey"));var d={type:"scenePlugin",cache:!1,extension:c,responseType:"text",key:e,url:i,xhrSettings:l,config:{systemKey:n,sceneKey:a}};s.call(this,t,d),"function"==typeof i&&(this.data=i,this.state=r.FILE_POPULATED)},onProcess:function(){var t=this.loader.systems.plugins,e=this.config,i=this.key,n=o(e,"systemKey",i),s=o(e,"sceneKey",i);this.state===r.FILE_POPULATED?t.installScenePlugin(n,this.data,s,this.loader.scene,!0):(this.state=r.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),t.installScenePlugin(n,window[this.key],s,this.loader.scene,!0)),this.onProcessComplete()}});a.register("scenePlugin",(function(t,e,i,n,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new l(this,t[s]));else this.addFile(new l(this,t,e,i,n,r));return this})),t.exports=l},function(t,e,i){var n=i(0),r=i(8),s=i(72),a=new n({Extends:s,initialize:function(t,e,i,n,r){s.call(this,t,e,i,r,n),this.type="spritesheet"},addToCache:function(){var t=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(t)}});r.register("spritesheet",(function(t,e,i,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new a(this,t[r]));else this.addFile(new a(this,t,e,i,n));return this})),t.exports=a},function(t,e,i){var n=i(0),r=i(17),s=i(21),a=i(8),o=i(2),h=i(7),l=new n({Extends:s,initialize:function(t,e,i,n,r){var a,l="svg";h(e)&&(e=o(a=e,"key"),i=o(a,"url"),n=o(a,"svgConfig",{}),r=o(a,"xhrSettings"),l=o(a,"extension",l));var u={type:"svg",cache:t.textureManager,extension:l,responseType:"text",key:e,url:i,xhrSettings:r,config:{width:o(n,"width"),height:o(n,"height"),scale:o(n,"scale")}};s.call(this,t,u)},onProcess:function(){this.state=r.FILE_PROCESSING;var t=this.xhrLoader.responseText,e=[t],i=this.config.width,n=this.config.height,a=this.config.scale;t:if(i&&n||a){var o,h=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("svg")[0],l=h.hasAttribute("viewBox"),u=parseFloat(h.getAttribute("width")),c=parseFloat(h.getAttribute("height"));if(!l&&u&&c?h.setAttribute("viewBox","0  0 "+u+" "+c):!l||u||c||(u=(o=h.getAttribute("viewBox").split(/\s+|,/))[2],c=o[3]),a){if(!u||!c)break t;i=u*a,n=c*a}h.setAttribute("width",i.toString()+"px"),h.setAttribute("height",n.toString()+"px"),e=[(new XMLSerializer).serializeToString(h)]}try{var d=new window.Blob(e,{type:"image/svg+xml;charset=utf-8"})}catch(t){return void this.onProcessError()}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var f=this,p=!1;this.data.onload=function(){p||s.revokeObjectURL(f.data),f.onProcessComplete()},this.data.onerror=function(){p?f.onProcessError():(p=!0,s.revokeObjectURL(f.data),f.data.src="data:image/svg+xml,"+encodeURIComponent(e.join("")))},s.createObjectURL(this.data,d,"image/svg+xml")},addToCache:function(){var t=this.cache.addImage(this.key,this.data);this.pendingDestroy(t)}});a.register("svg",(function(t,e,i,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new l(this,t[r]));else this.addFile(new l(this,t,e,i,n));return this})),t.exports=l},function(t,e,i){var n=i(0),r=i(17),s=i(21),a=i(8),o=i(2),h=i(7),l=i(32),u=new n({Extends:s,initialize:function(t,e,i,n){var r,a="csv";h(e)&&(e=o(r=e,"key"),i=o(r,"url"),n=o(r,"xhrSettings"),a=o(r,"extension",a));var u={type:"tilemapCSV",cache:t.cacheManager.tilemap,extension:a,responseType:"text",key:e,url:i,xhrSettings:n};s.call(this,t,u),this.tilemapFormat=l.CSV},onProcess:function(){this.state=r.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});a.register("tilemapCSV",(function(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new u(this,t[n]));else this.addFile(new u(this,t,e,i));return this})),t.exports=u},function(t,e,i){var n=i(0),r=i(8),s=i(60),a=i(32),o=new n({Extends:s,initialize:function(t,e,i,n){s.call(this,t,e,i,n),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function(){var t={format:a.WELTMEISTER,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});r.register("tilemapImpact",(function(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new o(this,t[n]));else this.addFile(new o(this,t,e,i));return this})),t.exports=o},function(t,e,i){var n=i(0),r=i(8),s=i(60),a=i(32),o=new n({Extends:s,initialize:function(t,e,i,n){s.call(this,t,e,i,n),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function(){var t={format:a.TILED_JSON,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});r.register("tilemapTiledJSON",(function(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new o(this,t[n]));else this.addFile(new o(this,t,e,i));return this})),t.exports=o},function(t,e,i){var n=i(0),r=i(8),s=i(2),a=i(72),o=i(7),h=i(61),l=i(459),u=new n({Extends:h,initialize:function(t,e,i,n,r,u){var c,d,f=o(e)?(e=s(d=e,"key"),c=new a(t,{key:e,url:s(d,"textureURL"),extension:s(d,"textureExtension","png"),normalMap:s(d,"normalMap"),xhrSettings:s(d,"textureXhrSettings")}),new l(t,{key:e,url:s(d,"atlasURL"),extension:s(d,"atlasExtension","txt"),xhrSettings:s(d,"atlasXhrSettings")})):(c=new a(t,e,i,r),new l(t,e,n,u));c.linkFile?h.call(this,t,"unityatlas",e,[c,f,c.linkFile]):h.call(this,t,"unityatlas",e,[c,f])},addToCache:function(){var t,e,i;this.isReadyToProcess()&&(t=this.files[0],e=this.files[1],i=this.files[2]?this.files[2].data:null,this.loader.textureManager.addUnityAtlas(t.key,t.data,e.data,i),e.addToCache(),this.complete=!0)}});r.register("unityAtlas",(function(t,e,i,n,r){var s;if(Array.isArray(t))for(var a=0;a<t.length;a++)s=new u(this,t[a]),this.addFile(s.files);else s=new u(this,t,e,i,n,r),this.addFile(s.files);return this})),t.exports=u},function(t,e,i){var n=i(0),r=i(17),s=i(21),a=i(8),o=i(138),h=i(2),l=i(7),u=new n({Extends:s,initialize:function(t,e,i,n,r,a,o){void 0===n&&(n="loadeddata"),void 0===r&&(r=!1),void 0===a&&(a=!1),"loadeddata"!==n&&"canplay"!==n&&"canplaythrough"!==n&&(n="loadeddata");var h={type:"video",cache:t.cacheManager.video,extension:i.type,responseType:"blob",key:e,url:i.url,xhrSettings:o,config:{loadEvent:n,asBlob:r,noAudio:a}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),s.call(this,t,h)},onProcess:function(){var t,e;this.state=r.FILE_PROCESSING,this.config.asBlob?(t=this.createVideoElement(),this.data=t,(e=this).data.onloadeddata=function(){e.onProcessComplete()},this.data.onerror=function(){s.revokeObjectURL(e.data),e.onProcessError()},s.createObjectURL(t,this.xhrLoader.response,""),t.load()):this.onProcessComplete()},createVideoElement:function(){var t=document.createElement("video");return t.controls=!1,t.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(t.muted=!0,t.defaultMuted=!0,t.setAttribute("autoplay","autoplay")),t.setAttribute("playsinline","playsinline"),t.setAttribute("preload","auto"),t},onVideoLoadHandler:function(t){var e=t.target;e.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),e.removeEventListener("error",this.onErrorCallback,!0),this.data=e,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(t){var e=t.target;e&&(e.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),e.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var t,e=this.config.loadEvent;this.config.asBlob?s.prototype.load.call(this):(this.percentComplete=0,(t=this.createVideoElement()).addEventListener(e,this.onLoadCallback,!0),t.addEventListener("error",this.onErrorCallback,!0),t.src=o(this,this.loader.baseURL),t.load())}});u.create=function(t,e,i,n,r,s,a){var o=t.systems.game;l(e)&&(i=h(e,"url",[]),n=h(e,"loadEvent","loadeddata"),r=h(e,"asBlob",!1),s=h(e,"noAudio",!1),a=h(e,"xhrSettings"));var c=u.getVideoURL(o,i);if(c)return new u(t,e,c,n,r,s,a)},u.getVideoURL=function(t,e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var n,r=h(e[i],"url",e[i]);if(0===r.indexOf("blob:"))return{url:r,type:""};if(n=0===r.indexOf("data:")?r.split(",")[0].match(/\/(.*?);/):r.match(/\.([a-zA-Z0-9]+)($|\?)/),n=h(e[i],"type",n?n[1]:"").toLowerCase(),t.device.video[n])return{url:r,type:n}}return null},a.register("video",(function(t,e,i,n,r,s){var a;if(Array.isArray(t))for(var o=0;o<t.length;o++)(a=u.create(this,t[o]))&&this.addFile(a);else(a=u.create(this,t,e,i,n,r,s))&&this.addFile(a);return this})),t.exports=u},function(t,e,i){var n=i(0),r=i(17),s=i(133),a=i(10),o=i(82),h=i(8),l=i(2),u=i(23),c=i(22),d=i(139),f=new n({Extends:a,initialize:function(t){a.call(this);var e=t.sys.game.config,i=t.sys.settings.loader;this.scene=t,this.systems=t.sys,this.cacheManager=t.sys.cache,this.textureManager=t.sys.textures,this.sceneManager=t.sys.game.scene,h.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(l(i,"baseURL",e.loaderBaseURL)),this.setPath(l(i,"path",e.loaderPath)),this.setPrefix(l(i,"prefix",e.loaderPrefix)),this.maxParallelDownloads=l(i,"maxParallelDownloads",e.loaderMaxParallelDownloads),this.xhr=d(l(i,"responseType",e.loaderResponseType),l(i,"async",e.loaderAsync),l(i,"user",e.loaderUser),l(i,"password",e.loaderPassword),l(i,"timeout",e.loaderTimeout),l(i,"withCredentials",e.loaderWithCredentials)),this.crossOrigin=l(i,"crossOrigin",e.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new s,this.inflight=new s,this.queue=new s,this._deleteQueue=new s,this.totalFailed=0,this.totalComplete=0,this.state=r.LOADER_IDLE,this.multiKeyIndex=0,t.sys.events.once(c.BOOT,this.boot,this),t.sys.events.on(c.START,this.pluginStart,this)},boot:function(){this.systems.events.once(c.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(c.SHUTDOWN,this.shutdown,this)},setBaseURL:function(t){return void 0===t&&(t=""),""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.baseURL=t,this},setPath:function(t){return void 0===t&&(t=""),""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.path=t,this},setPrefix:function(t){return void 0===t&&(t=""),this.prefix=t,this},setCORS:function(t){return this.crossOrigin=t,this},addFile:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=t[e];this.keyExists(i)||(this.list.set(i),this.emit(o.ADD,i.key,i.type,this,i),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(t){var e=t.hasCacheConflict();return e||this.list.iterate((function(i){if(i.type===t.type&&i.key===t.key)return!(e=!0)})),!e&&this.isLoading()&&(this.inflight.iterate((function(i){if(i.type===t.type&&i.key===t.key)return!(e=!0)})),this.queue.iterate((function(i){if(i.type===t.type&&i.key===t.key)return!(e=!0)}))),e},addPack:function(t,e){e&&t.hasOwnProperty(e)&&(t={packKey:t[e]});var i=0,n=this.baseURL,r=this.path,s=this.prefix;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var o=t[a],h=l(o,"baseURL",n),u=l(o,"path",r),c=l(o,"prefix",s),d=l(o,"files",null),f=l(o,"defaultType","void");if(Array.isArray(d)){this.setBaseURL(h),this.setPath(u),this.setPrefix(c);for(var p=0;p<d.length;p++){var g=d[p],m=g.hasOwnProperty("type")?g.type:f;this[m]&&(this[m](g),i++)}}}return this.setBaseURL(n),this.setPath(r),this.setPrefix(s),0<i},isLoading:function(){return this.state===r.LOADER_LOADING||this.state===r.LOADER_PROCESSING},isReady:function(){return this.state===r.LOADER_IDLE||this.state===r.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(o.START,this),0===this.list.size?this.loadComplete():(this.state=r.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(c.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(o.PROGRESS,this.progress)},update:function(){this.state===r.LOADER_LOADING&&0<this.list.size&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each((function(t){if((t.state===r.FILE_POPULATED||t.state===r.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(t),this.list.delete(t),t.crossOrigin||(t.crossOrigin=this.crossOrigin),t.load()),this.inflight.size===this.maxParallelDownloads)return!1}),this)},nextFile:function(t,e){this.inflight&&(this.inflight.delete(t),this.updateProgress(),e?(this.totalComplete++,this.queue.set(t),this.emit(o.FILE_LOAD,t),t.onProcess()):(this.totalFailed++,this._deleteQueue.set(t),this.emit(o.FILE_LOAD_ERROR,t),this.fileProcessComplete(t)))},fileProcessComplete:function(t){this.scene&&this.systems&&this.systems.game&&!this.systems.game.pendingDestroy&&(t.state===r.FILE_ERRORED?t.multiFile&&t.multiFile.onFileFailed(t):t.state===r.FILE_COMPLETE&&(t.multiFile?t.multiFile.isReadyToProcess()&&t.multiFile.addToCache():t.addToCache()),this.queue.delete(t),0===this.list.size&&0===this.inflight.size&&0===this.queue.size&&this.loadComplete())},loadComplete:function(){this.emit(o.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=r.LOADER_COMPLETE,this.systems.events.off(c.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(o.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(t){this._deleteQueue.set(t)},saveJSON:function(t,e){return this.save(JSON.stringify(t),e)},save:function(t,e,i){void 0===e&&(e="file.json"),void 0===i&&(i="application/json");var n=new Blob([t],{type:i}),r=URL.createObjectURL(n),s=document.createElement("a");return s.download=e,s.textContent="Download "+e,s.href=r,s.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var t=this.systems.game.config,e=this.systems.settings.loader;this.setBaseURL(l(e,"baseURL",t.loaderBaseURL)),this.setPath(l(e,"path",t.loaderPath)),this.setPrefix(l(e,"prefix",t.loaderPrefix)),this.state=r.LOADER_IDLE},shutdown:function(){this.reset(),this.state=r.LOADER_SHUTDOWN,this.systems.events.off(c.UPDATE,this.update,this),this.systems.events.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=r.LOADER_DESTROYED,this.systems.events.off(c.UPDATE,this.update,this),this.systems.events.off(c.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});u.register("Loader",f,"load"),t.exports=f},function(t,e,i){var n=i(50),r=i(18)(!1,r={ArcadePhysics:i(1262),Body:i(466),Collider:i(467),Components:i(217),Events:i(218),Factory:i(460),Group:i(462),Image:i(461),Sprite:i(140),StaticBody:i(472),StaticGroup:i(463),World:i(465)},n);t.exports=r},function(t,e,i){var n=i(0),r=i(39),s=i(53),a=i(321),o=i(460),h=i(2),l=i(126),u=i(1275),c=i(464),d=i(23),f=i(22),p=i(3),g=i(465),m=new n({initialize:function(t){this.scene=t,this.systems=t.sys,this.config=this.getConfig(),this.world,this.add,t.sys.events.once(f.BOOT,this.boot,this),t.sys.events.on(f.START,this.start,this)},boot:function(){this.world=new g(this.scene,this.config),this.add=new o(this.world),this.systems.events.once(f.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new g(this.scene,this.config),this.add=new o(this.world));var t=this.systems.events;t.on(f.UPDATE,this.world.update,this.world),t.on(f.POST_UPDATE,this.world.postUpdate,this.world),t.once(f.SHUTDOWN,this.shutdown,this)},getConfig:function(){var t=this.systems.game.config.physics,e=this.systems.settings.physics;return l(h(e,"arcade",{}),h(t,"arcade",{}))},overlap:function(t,e,i,n,r){return void 0===i&&(i=null),void 0===n&&(n=null),void 0===r&&(r=i),this.world.collideObjects(t,e,i,n,r,!0)},collide:function(t,e,i,n,r){return void 0===i&&(i=null),void 0===n&&(n=null),void 0===r&&(r=i),this.world.collideObjects(t,e,i,n,r,!1)},collideTiles:function(t,e,i,n,r){return this.world.collideTiles(t,e,i,n,r)},overlapTiles:function(t,e,i,n,r){return this.world.overlapTiles(t,e,i,n,r)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(t,e,i,n,r,s){void 0===n&&(n=60);var a=Math.atan2(i-t.y,e-t.x);return t.body.acceleration.setToPolar(a,n),void 0!==r&&void 0!==s&&t.body.maxVelocity.set(r,s),a},accelerateToObject:function(t,e,i,n,r){return this.accelerateTo(t,e.x,e.y,i,n,r)},closest:function(t,e){e=e||this.world.bodies.entries;for(var i=Number.MAX_VALUE,n=null,r=t.x,s=t.y,o=e.length,h=0;h<o;h++){var l,u=e[h],c=u.body||u;t!==u&&t!==c&&t!==c.gameObject&&t!==c.center&&(l=a(r,s,c.center.x,c.center.y))<i&&(n=u,i=l)}return n},furthest:function(t,e){e=e||this.world.bodies.entries;for(var i=-1,n=null,r=t.x,s=t.y,o=e.length,h=0;h<o;h++){var l,u=e[h],c=u.body||u;t!==u&&t!==c&&t!==c.gameObject&&t!==c.center&&i<(l=a(r,s,c.center.x,c.center.y))&&(n=u,i=l)}return n},moveTo:function(t,e,i,n,r){void 0===n&&(n=60),void 0===r&&(r=0);var a=Math.atan2(i-t.y,e-t.x);return 0<r&&(n=s(t.x,t.y,e,i)/(r/1e3)),t.body.velocity.setToPolar(a,n),a},moveToObject:function(t,e,i,n){return this.moveTo(t,e.x,e.y,i,n)},velocityFromAngle:function(t,e,i){return void 0===e&&(e=60),void 0===i&&(i=new p),i.setToPolar(r(t),e)},velocityFromRotation:function(t,e,i){return void 0===e&&(e=60),void 0===i&&(i=new p),i.setToPolar(t,e)},overlapRect:function(t,e,i,n,r,s){return c(this.world,t,e,i,n,r,s)},overlapCirc:function(t,e,i,n,r){return u(this.world,t,e,i,n,r)},shutdown:function(){var t;this.world&&((t=this.systems.events).off(f.UPDATE,this.world.update,this.world),t.off(f.POST_UPDATE,this.world.postUpdate,this.world),t.off(f.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null)},destroy:function(){this.shutdown(),this.scene.sys.events.off(f.START,this.start,this),this.scene=null,this.systems=null}});d.register("ArcadePhysics",m,"arcadePhysics"),t.exports=m},function(t,e){t.exports={setAcceleration:function(t,e){return this.body.acceleration.set(t,e),this},setAccelerationX:function(t){return this.body.acceleration.x=t,this},setAccelerationY:function(t){return this.body.acceleration.y=t,this}}},function(t,e){t.exports={setAngularVelocity:function(t){return this.body.angularVelocity=t,this},setAngularAcceleration:function(t){return this.body.angularAcceleration=t,this},setAngularDrag:function(t){return this.body.angularDrag=t,this}}},function(t,e){t.exports={setBounce:function(t,e){return this.body.bounce.set(t,e),this},setBounceX:function(t){return this.body.bounce.x=t,this},setBounceY:function(t){return this.body.bounce.y=t,this},setCollideWorldBounds:function(t,e,i){return this.body.setCollideWorldBounds(t,e,i),this}}},function(t,e){t.exports={setDebug:function(t,e,i){return this.debugShowBody=t,this.debugShowVelocity=e,this.debugBodyColor=i,this},setDebugBodyColor:function(t){return this.body.debugBodyColor=t,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(t){this.body.debugShowBody=t}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(t){this.body.debugShowVelocity=t}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(t){this.body.debugBodyColor=t}}}},function(t,e){t.exports={setDrag:function(t,e){return this.body.drag.set(t,e),this},setDragX:function(t){return this.body.drag.x=t,this},setDragY:function(t){return this.body.drag.y=t,this},setDamping:function(t){return this.body.useDamping=t,this}}},function(t,e){t.exports={enableBody:function(t,e,i,n,r){return t&&this.body.reset(e,i),n&&(this.body.gameObject.active=!0),r&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),this.body.stop(),this.body.enable=!1,t&&(this.body.gameObject.active=!1),e&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}}},function(t,e){t.exports={setFriction:function(t,e){return this.body.friction.set(t,e),this},setFrictionX:function(t){return this.body.friction.x=t,this},setFrictionY:function(t){return this.body.friction.y=t,this}}},function(t,e){t.exports={setGravity:function(t,e){return this.body.gravity.set(t,e),this},setGravityX:function(t){return this.body.gravity.x=t,this},setGravityY:function(t){return this.body.gravity.y=t,this}}},function(t,e){t.exports={setImmovable:function(t){return void 0===t&&(t=!0),this.body.immovable=t,this}}},function(t,e){t.exports={setMass:function(t){return this.body.mass=t,this}}},function(t,e){t.exports={setOffset:function(t,e){return this.body.setOffset(t,e),this},setSize:function(t,e,i){return this.body.setSize(t,e,i),this},setBodySize:function(t,e,i){return this.body.setSize(t,e,i),this},setCircle:function(t,e,i){return this.body.setCircle(t,e,i),this}}},function(t,e){t.exports={setVelocity:function(t,e){return this.body.setVelocity(t,e),this},setVelocityX:function(t){return this.body.setVelocityX(t),this},setVelocityY:function(t){return this.body.setVelocityY(t),this},setMaxVelocity:function(t,e){return this.body.maxVelocity.set(t,e),this}}},function(t,e,i){var n=i(464),r=i(65),s=i(205),a=i(206);t.exports=function(t,e,i,o,h,l){var u=n(t,e-o,i-o,2*o,2*o,h,l);if(0===u.length)return u;for(var c=new r(e,i,o),d=new r,f=[],p=0;p<u.length;p++){var g=u[p];g.isCircle?(d.setTo(g.center.x,g.center.y,g.halfWidth),s(c,d)&&f.push(g)):a(c,g)&&f.push(g)}return f}},function(t,e){t.exports="collide"},function(t,e){t.exports="overlap"},function(t,e){t.exports="pause"},function(t,e){t.exports="resume"},function(t,e){t.exports="tilecollide"},function(t,e){t.exports="tileoverlap"},function(t,e){t.exports="worldbounds"},function(t,e){t.exports="worldstep"},function(t,e){t.exports=function(t,e){return t.collisionCallback?!t.collisionCallback.call(t.collisionCallbackContext,e,t):!t.layer.callbacks[t.index]||!t.layer.callbacks[t.index].callback.call(t.layer.callbacks[t.index].callbackContext,e,t)}},function(t,e,i){var n=i(1286),r=i(1288),s=i(471);t.exports=function(t,e,i,a,o,h,l){var u=a.left,c=a.top,d=a.right,f=a.bottom,p=i.faceLeft||i.faceRight,g=i.faceTop||i.faceBottom;if(l||(g=p=!0),!p&&!g)return!1;var m=0,y=0,v=0,_=1;if(e.deltaAbsX()>e.deltaAbsY()?v=-1:e.deltaAbsX()<e.deltaAbsY()&&(_=-1),0!==e.deltaX()&&0!==e.deltaY()&&p&&g&&(v=Math.min(Math.abs(e.position.x-d),Math.abs(e.right-u)),_=Math.min(Math.abs(e.position.y-f),Math.abs(e.bottom-c))),v<_){if(p&&0!==(m=n(e,i,u,d,h,l))&&!s(a,e))return!0;g&&(y=r(e,i,c,f,h,l))}else{if(g&&0!==(y=r(e,i,c,f,h,l))&&!s(a,e))return!0;p&&(m=n(e,i,u,d,h,l))}return 0!==m||0!==y}},function(t,e,i){var n=i(1287);t.exports=function(t,e,i,r,s,a){var o=0,h=e.faceLeft,l=e.faceRight,u=e.collideLeft,c=e.collideRight;return a||(c=u=l=h=!0),t.deltaX()<0&&c&&t.checkCollision.left?l&&t.x<r&&(o=t.x-r)<-s&&(o=0):0<t.deltaX()&&u&&t.checkCollision.right&&h&&t.right>i&&s<(o=t.right-i)&&(o=0),0!==o&&(t.customSeparateX?t.overlapX=o:n(t,o)),o}},function(t,e){t.exports=function(t,e){e<0?(t.blocked.none=!1,t.blocked.left=!0):0<e&&(t.blocked.none=!1,t.blocked.right=!0),t.position.x-=e,0===t.bounce.x?t.velocity.x=0:t.velocity.x=-t.velocity.x*t.bounce.x}},function(t,e,i){var n=i(1289);t.exports=function(t,e,i,r,s,a){var o=0,h=e.faceTop,l=e.faceBottom,u=e.collideUp,c=e.collideDown;return a||(c=u=l=h=!0),t.deltaY()<0&&c&&t.checkCollision.up?l&&t.y<r&&(o=t.y-r)<-s&&(o=0):0<t.deltaY()&&u&&t.checkCollision.down&&h&&t.bottom>i&&s<(o=t.bottom-i)&&(o=0),0!==o&&(t.customSeparateY?t.overlapY=o:n(t,o)),o}},function(t,e){t.exports=function(t,e){e<0?(t.blocked.none=!1,t.blocked.up=!0):0<e&&(t.blocked.none=!1,t.blocked.down=!0),t.position.y-=e,0===t.bounce.y?t.velocity.y=0:t.velocity.y=-t.velocity.y*t.bounce.y}},function(t,e,i){var n=i(468);t.exports=function(t,e,i,r){var s=n(t,e,i,r);if(i||0===s||t.immovable&&e.immovable||t.customSeparateX||e.customSeparateX)return 0!==s||t.embedded&&e.embedded;var a,o,h,l=t.velocity.x,u=e.velocity.x;return t.immovable||e.immovable?t.immovable?(e.x+=s,e.velocity.x=l-u*e.bounce.x,t.moves&&(e.y+=(t.y-t.prev.y)*t.friction.y)):(t.x-=s,t.velocity.x=u-l*t.bounce.x,e.moves&&(t.y+=(e.y-e.prev.y)*e.friction.y)):(s*=.5,t.x-=s,e.x+=s,a=Math.sqrt(u*u*e.mass/t.mass)*(0<u?1:-1),a-=h=.5*(a+(o=Math.sqrt(l*l*t.mass/e.mass)*(0<l?1:-1))),o-=h,t.velocity.x=h+a*t.bounce.x,e.velocity.x=h+o*e.bounce.x),!0}},function(t,e,i){var n=i(469);t.exports=function(t,e,i,r){var s=n(t,e,i,r);if(i||0===s||t.immovable&&e.immovable||t.customSeparateY||e.customSeparateY)return 0!==s||t.embedded&&e.embedded;var a,o,h,l=t.velocity.y,u=e.velocity.y;return t.immovable||e.immovable?t.immovable?(e.y+=s,e.velocity.y=l-u*e.bounce.y,t.moves&&(e.x+=(t.x-t.prev.x)*t.friction.x)):(t.y-=s,t.velocity.y=u-l*t.bounce.y,e.moves&&(t.x+=(e.x-e.prev.x)*e.friction.x)):(s*=.5,t.y-=s,e.y+=s,a=Math.sqrt(u*u*e.mass/t.mass)*(0<u?1:-1),a-=h=.5*(a+(o=Math.sqrt(l*l*t.mass/e.mass)*(0<l?1:-1))),o-=h,t.velocity.y=h+a*t.bounce.y,e.velocity.y=h+o*e.bounce.y),!0}},,,,,,,,,,,,,function(t,e,i){t.exports={BasePlugin:i(474),DefaultPlugins:i(175),PluginCache:i(23),PluginManager:i(370),ScenePlugin:i(1305)}},function(t,e,i){var n=i(474),r=i(0),s=i(22),a=new r({Extends:n,initialize:function(t,e){n.call(this,e),this.scene=t,this.systems=t.sys,t.sys.events.once(s.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=a},function(t,e,i){var n=i(18),r=i(177),s=n(!1,s={Center:i(359),Events:i(92),Orientation:i(360),ScaleManager:i(371),ScaleModes:i(361),Zoom:i(362)},r.CENTER);s=n(!1,s,r.ORIENTATION),s=n(!1,s,r.SCALE_MODE),s=n(!1,s,r.ZOOM),t.exports=s},function(t,e,i){var n=i(125),r=i(18)(!1,r={Events:i(22),SceneManager:i(373),ScenePlugin:i(1308),Settings:i(375),Systems:i(180)},n);t.exports=r},function(t,e,i){var n=i(19),r=i(0),s=i(22),a=i(2),o=i(23),h=new r({initialize:function(t){this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.key=t.sys.settings.key,this.manager=t.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,t.sys.events.once(s.BOOT,this.boot,this),t.sys.events.on(s.START,this.pluginStart,this)},boot:function(){this.systems.events.once(s.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(s.SHUTDOWN,this.shutdown,this)},start:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",t,e),this},restart:function(t){var e=this.key;return this.manager.queueOp("stop",e),this.manager.queueOp("start",e,t),this},transition:function(t){void 0===t&&(t={});var e=a(t,"target",!1),i=this.manager.getScene(e);if(!e||!this.checkValidTransition(i))return!1;var n=a(t,"duration",1e3);this._elapsed=0,this._target=i,this._duration=n,this._willSleep=a(t,"sleep",!1),this._willRemove=a(t,"remove",!1);var r=a(t,"onUpdate",null);r&&(this._onUpdate=r,this._onUpdateScope=a(t,"onUpdateScope",this.scene));var o=a(t,"allowInput",!1);this.settings.transitionAllowInput=o;var h=i.sys.settings;return h.isTransition=!0,h.transitionFrom=this.scene,h.transitionDuration=n,h.transitionAllowInput=o,a(t,"moveAbove",!1)?this.manager.moveAbove(this.key,e):a(t,"moveBelow",!1)&&this.manager.moveBelow(this.key,e),i.sys.isSleeping()?i.sys.wake(a(t,"data")):this.manager.start(e,a(t,"data")),this.systems.events.emit(s.TRANSITION_OUT,i,n),this.systems.events.on(s.UPDATE,this.step,this),!0},checkValidTransition:function(t){return!(!t||t.sys.isActive()||t.sys.isTransitioning()||t===this.scene||this.systems.isTransitioning())},step:function(t,e){this._elapsed+=e,this.transitionProgress=n(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var t=this._target.sys,e=this._target.sys.settings;this.systems.events.off(s.UPDATE,this.step,this),t.events.emit(s.TRANSITION_COMPLETE,this.scene),e.isTransition=!1,e.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(t,e,i,n){return this.manager.add(t,e,i,n)},launch:function(t,e){return t&&t!==this.key&&this.manager.queueOp("start",t,e),this},run:function(t,e){return t&&t!==this.key&&this.manager.queueOp("run",t,e),this},pause:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("pause",t,e),this},resume:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("resume",t,e),this},sleep:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("sleep",t,e),this},wake:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("wake",t,e),this},switch:function(t){return t!==this.key&&this.manager.queueOp("switch",this.key,t),this},stop:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("stop",t,e),this},setActive:function(t,e,i){void 0===e&&(e=this.key);var n=this.manager.getScene(e);return n&&n.sys.setActive(t,i),this},setVisible:function(t,e){void 0===e&&(e=this.key);var i=this.manager.getScene(e);return i&&i.sys.setVisible(t),this},isSleeping:function(t){return void 0===t&&(t=this.key),this.manager.isSleeping(t)},isActive:function(t){return void 0===t&&(t=this.key),this.manager.isActive(t)},isPaused:function(t){return void 0===t&&(t=this.key),this.manager.isPaused(t)},isVisible:function(t){return void 0===t&&(t=this.key),this.manager.isVisible(t)},swapPosition:function(t,e){return void 0===e&&(e=this.key),t!==e&&this.manager.swapPosition(t,e),this},moveAbove:function(t,e){return void 0===e&&(e=this.key),t!==e&&this.manager.moveAbove(t,e),this},moveBelow:function(t,e){return void 0===e&&(e=this.key),t!==e&&this.manager.moveBelow(t,e),this},remove:function(t){return void 0===t&&(t=this.key),this.manager.remove(t),this},moveUp:function(t){return void 0===t&&(t=this.key),this.manager.moveUp(t),this},moveDown:function(t){return void 0===t&&(t=this.key),this.manager.moveDown(t),this},bringToTop:function(t){return void 0===t&&(t=this.key),this.manager.bringToTop(t),this},sendToBack:function(t){return void 0===t&&(t=this.key),this.manager.sendToBack(t),this},get:function(t){return this.manager.getScene(t)},getIndex:function(t){return void 0===t&&(t=this.key),this.manager.getIndex(t)},shutdown:function(){var t=this.systems.events;t.off(s.SHUTDOWN,this.shutdown,this),t.off(s.POST_UPDATE,this.step,this),t.off(s.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(s.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});o.register("ScenePlugin",h,"scenePlugin"),t.exports=h},function(t,e,i){t.exports={List:i(129),Map:i(162),ProcessQueue:i(186),RTree:i(470),Set:i(133),Size:i(372)}},function(t,e,i){var n=i(18),r=i(1311),s=n(!1,s={CanvasTexture:i(377),Events:i(121),FilterMode:r,Frame:i(94),Parsers:i(379),Texture:i(182),TextureManager:i(376),TextureSource:i(378)},r);t.exports=s},function(t,e){t.exports={LINEAR:0,NEAREST:1}},function(t,e,i){t.exports={Components:i(141),Parsers:i(1342),Formats:i(32),ImageCollection:i(485),ParseToTilemap:i(227),Tile:i(74),Tilemap:i(494),TilemapCreator:i(1351),TilemapFactory:i(1352),Tileset:i(104),LayerData:i(102),MapData:i(103),ObjectLayer:i(488),DynamicTilemapLayer:i(495),StaticTilemapLayer:i(496)}},function(t,e,i){var n=i(24),r=i(51);t.exports=function(t,e,i,s,a,o,h,l){t<0&&(t=0),e<0&&(e=0),void 0===h&&(h=!0);for(var u=n(t,e,i,s,null,l),c=a-t,d=o-e,f=0;f<u.length;f++){var p=u[f].x+c,g=u[f].y+d;0<=p&&p<l.width&&0<=g&&g<l.height&&l.data[g][p]&&l.data[g][p].copy(u[f])}h&&r(a-1,o-1,i+2,s+2,l)}},function(t,e,i){var n=i(143),r=i(144),s=i(24),a=i(475);t.exports=function(t,e,i,o,h,l){void 0===i&&(i={}),Array.isArray(t)||(t=[t]);var u=l.tilemapLayer;void 0===o&&(o=u.scene),void 0===h&&(h=o.cameras.main);for(var c=s(0,0,l.width,l.height,null,l),d=[],f=0;f<c.length;f++){var p,g=c[f];-1!==t.indexOf(g.index)&&(i.x=n(g.x,h,l),i.y=r(g.y,h,l),p=o.make.sprite(i),d.push(p))}if("number"==typeof e)for(f=0;f<t.length;f++)a(t[f],e,0,0,l.width,l.height,l);else if(Array.isArray(e))for(f=0;f<t.length;f++)a(t[f],e[f],0,0,l.width,l.height,l);return d}},function(t,e,i){var n=i(93),r=i(330);t.exports=function(t,e,i,s){void 0===i&&(i=[]),void 0===s&&(s=0),i.length=0;var a,o,h,l,u,c,d,f=t.tilemapLayer.tilemap,p=t.tilemapLayer,g=t.data,m=t.width,y=t.height,v=Math.floor(f.tileWidth*p.scaleX),_=Math.floor(f.tileHeight*p.scaleY),x=0,w=m,b=0,T=y;if(p.skipCull||1!==p.scrollFactorX||1!==p.scrollFactorY||(a=n(e.worldView.x-p.x,v,0,!0)-p.cullPaddingX,o=r(e.worldView.right-p.x,v,0,!0)+p.cullPaddingX,h=n(e.worldView.y-p.y,_,0,!0)-p.cullPaddingY,l=r(e.worldView.bottom-p.y,_,0,!0)+p.cullPaddingY,x=Math.max(0,a),w=Math.min(m,o),b=Math.max(0,h),T=Math.min(y,l)),0===s)for(c=b;c<T;c++)for(u=x;g[c]&&u<w;u++)(d=g[c][u])&&-1!==d.index&&d.visible&&0!==d.alpha&&i.push(d);else if(1===s)for(c=b;c<T;c++)for(u=w;g[c]&&x<=u;u--)(d=g[c][u])&&-1!==d.index&&d.visible&&0!==d.alpha&&i.push(d);else if(2===s)for(c=T;b<=c;c--)for(u=x;g[c]&&u<w;u++)(d=g[c][u])&&-1!==d.index&&d.visible&&0!==d.alpha&&i.push(d);else if(3===s)for(c=T;b<=c;c--)for(u=w;g[c]&&x<=u;u--)(d=g[c][u])&&-1!==d.index&&d.visible&&0!==d.alpha&&i.push(d);return p.tilesDrawn=i.length,p.tilesTotal=m*y,i}},function(t,e,i){var n=i(24),r=i(51),s=i(73);t.exports=function(t,e,i,a,o,h,l){for(var u=-1!==l.collideIndexes.indexOf(t),c=n(e,i,a,o,null,l),d=0;d<c.length;d++)c[d].index=t,s(c[d],u);h&&r(e-1,i-1,a+2,o+2,l)}},function(t,e,i){var n=i(24);t.exports=function(t,e,i,r,s,a,o,h){return n(i,r,s,a,o,h).filter(t,e)}},function(t,e){t.exports=function(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=!1);var r,s,a,o=0;if(i){for(s=n.height-1;0<=s;s--)for(r=n.width-1;0<=r;r--)if((a=n.data[s][r])&&a.index===t){if(o===e)return a;o+=1}}else for(s=0;s<n.height;s++)for(r=0;r<n.width;r++)if((a=n.data[s][r])&&a.index===t){if(o===e)return a;o+=1}return null}},function(t,e,i){var n=i(24);t.exports=function(t,e,i,r,s,a,o,h){return n(i,r,s,a,o,h).find(t,e)||null}},function(t,e,i){var n=i(24);t.exports=function(t,e,i,r,s,a,o,h){n(i,r,s,a,o,h).forEach(t,e)}},function(t,e,i){var n=i(142),r=i(63),s=i(64);t.exports=function(t,e,i,a,o){var h=r(t,!0,a,o),l=s(e,!0,a,o);return n(h,l,i,o)}},function(t,e,i){function n(t,e){return a.RectangleToTriangle(e,t)}var r=i(430),s=i(24),a=i(431),o=i(1),h=i(143),l=i(144),u=i(63),c=i(64);t.exports=function(t,e,i,d){if(void 0===t)return[];var f=o;t instanceof r.Circle?f=a.CircleToRectangle:t instanceof r.Rectangle?f=a.RectangleToRectangle:t instanceof r.Triangle?f=n:t instanceof r.Line&&(f=a.LineToRectangle);var p=u(t.left,!0,i,d),g=c(t.top,!0,i,d),m=Math.ceil(u(t.right,!1,i,d)),y=Math.ceil(c(t.bottom,!1,i,d)),v=Math.max(m-p,1),_=Math.max(y-g,1),x=s(p,g,v,_,e,d),w=d.tileWidth,b=d.tileHeight;d.tilemapLayer&&(w*=d.tilemapLayer.scaleX,b*=d.tilemapLayer.scaleY);for(var T=[],E=new r.Rectangle(0,0,w,b),A=0;A<x.length;A++){var S=x[A];E.x=h(S.x,i,d),E.y=l(S.y,i,d),f(t,E)&&T.push(S)}return T}},function(t,e,i){var n=i(24),r=i(63),s=i(64);t.exports=function(t,e,i,a,o,h,l){var u=r(t,!0,h,l),c=s(e,!0,h,l),d=Math.ceil(r(t+i,!1,h,l)),f=Math.ceil(s(e+a,!1,h,l));return n(u,c,d-u,f-c,o,l)}},function(t,e,i){var n=i(476),r=i(63),s=i(64);t.exports=function(t,e,i,a){var o=r(t,!0,i,a),h=s(e,!0,i,a);return n(o,h,a)}},function(t,e,i){var n=i(221),r=i(63),s=i(64);t.exports=function(t,e,i,a,o,h){var l=r(e,!0,o,h),u=s(i,!0,o,h);return n(t,l,u,a,h)}},function(t,e,i){var n=i(51),r=i(221);t.exports=function(t,e,i,s,a){if(!Array.isArray(t))return null;void 0===s&&(s=!0),Array.isArray(t[0])||(t=[t]);for(var o=t.length,h=t[0].length,l=0;l<o;l++)for(var u=0;u<h;u++){var c=t[l][u];r(c,e+u,i+l,!1,a)}s&&n(e-1,i-1,h+2,o+2,a)}},function(t,e,i){var n=i(24),r=i(185);t.exports=function(t,e,i,s,a,o){var h,l=n(t,e,i,s,null,o);if(void 0===a)for(a=[],h=0;h<l.length;h++)-1===a.indexOf(l[h].index)&&a.push(l[h].index);for(h=0;h<l.length;h++)l[h].index=r(a)}},function(t,e,i){var n=i(477),r=i(63),s=i(64);t.exports=function(t,e,i,a,o,h){var l=r(t,!0,o,h),u=s(e,!0,o,h);return n(l,u,i,a,h)}},function(t,e,i){var n=i(24),r=i(354),s=new r(105,210,231,150),a=new r(243,134,48,200),o=new r(40,39,37,150);t.exports=function(t,e,i){void 0===e&&(e={});var r=void 0!==e.tileColor?e.tileColor:s,h=void 0!==e.collidingTileColor?e.collidingTileColor:a,l=void 0!==e.faceColor?e.faceColor:o,u=n(0,0,i.width,i.height,null,i);t.translateCanvas(i.tilemapLayer.x,i.tilemapLayer.y),t.scaleCanvas(i.tilemapLayer.scaleX,i.tilemapLayer.scaleY);for(var c=0;c<u.length;c++){var d=u[c],f=d.width,p=d.height,g=d.pixelX,m=d.pixelY,y=d.collides?h:r;null!==y&&(t.fillStyle(y.color,y.alpha/255),t.fillRect(g,m,f,p)),g+=1,m+=1,f-=2,p-=2,null!==l&&(t.lineStyle(1,l.color,l.alpha/255),d.faceTop&&t.lineBetween(g,m,g+f,m),d.faceRight&&t.lineBetween(g+f,m,g+f,m+p),d.faceBottom&&t.lineBetween(g,m+p,g+f,m+p),d.faceLeft&&t.lineBetween(g,m,g,m+p))}}},function(t,e,i){var n=i(73),r=i(51),s=i(222);t.exports=function(t,e,i,a,o){void 0===e&&(e=!0),void 0===i&&(i=!0),Array.isArray(t)||(t=[t]),void 0===o&&(o=!0);for(var h=0;h<t.length;h++)s(t[h],e,a);if(o)for(var l=0;l<a.height;l++)for(var u=0;u<a.width;u++){var c=a.data[l][u];c&&-1!==t.indexOf(c.index)&&n(c,e)}i&&r(0,0,a.width,a.height,a)}},function(t,e,i){var n=i(73),r=i(51),s=i(222);t.exports=function(t,e,i,a,o,h){if(void 0===i&&(i=!0),void 0===a&&(a=!0),void 0===h&&(h=!0),!(e<t)){for(var l=t;l<=e;l++)s(l,i,o);if(h)for(var u=0;u<o.height;u++)for(var c=0;c<o.width;c++){var d=o.data[u][c];d&&d.index>=t&&d.index<=e&&n(d,i)}a&&r(0,0,o.width,o.height,o)}}},function(t,e,i){var n=i(73),r=i(51),s=i(222);t.exports=function(t,e,i,a){void 0===e&&(e=!0),void 0===i&&(i=!0),Array.isArray(t)||(t=[t]);for(var o=0;o<a.height;o++)for(var h=0;h<a.width;h++){var l=a.data[o][h];l&&-1===t.indexOf(l.index)&&(n(l,e),s(l.index,e,a))}i&&r(0,0,a.width,a.height,a)}},function(t,e,i){var n=i(73),r=i(51),s=i(108);t.exports=function(t,e,i,a){void 0===e&&(e=!0),void 0===i&&(i=!0);for(var o=0;o<a.height;o++)for(var h=0;h<a.width;h++){var l=a.data[o][h];if(l)for(var u in t)if(s(l.properties,u)){var c=t[u];Array.isArray(c)||(c=[c]);for(var d=0;d<c.length;d++)l.properties[u]===c[d]&&n(l,e)}}i&&r(0,0,a.width,a.height,a)}},function(t,e,i){var n=i(73),r=i(51);t.exports=function(t,e,i){void 0===t&&(t=!0),void 0===e&&(e=!0);for(var s=0;s<i.height;s++)for(var a=0;a<i.width;a++){var o,h=i.data[s][a];h&&(o=h.getCollisionGroup())&&o.objects&&0<o.objects.length&&n(h,t)}e&&r(0,0,i.width,i.height,i)}},function(t,e){t.exports=function(t,e,i,n){if("number"==typeof t)n.callbacks[t]=null!==e?{callback:e,callbackContext:i}:void 0;else for(var r=0,s=t.length;r<s;r++)n.callbacks[t[r]]=null!==e?{callback:e,callbackContext:i}:void 0}},function(t,e,i){var n=i(24);t.exports=function(t,e,i,r,s,a,o){for(var h=n(t,e,i,r,null,o),l=0;l<h.length;l++)h[l].setCollisionCallback(s,a)}},function(t,e,i){var n=i(24),r=i(114);t.exports=function(t,e,i,s,a){var o=n(t,e,i,s,null,a),h=o.map((function(t){return t.index}));r(h);for(var l=0;l<o.length;l++)o[l].index=h[l]}},function(t,e,i){var n=i(24);t.exports=function(t,e,i,r,s,a,o){for(var h=n(i,r,s,a,null,o),l=0;l<h.length;l++)h[l]&&(h[l].index===t?h[l].index=e:h[l].index===e&&(h[l].index=t))}},function(t,e,i){var n=i(143),r=i(144),s=i(3);t.exports=function(t,e,i,a,o){return void 0===i&&(i=new s(0,0)),i.x=n(t,a,o),i.y=r(e,a,o),i}},function(t,e,i){var n=i(24);t.exports=function(t,e,i,r,s,a){if(void 0!==s){for(var o=n(t,e,i,r,null,a),h=0,l=0;l<s.length;l++)h+=s[l].weight;if(!(h<=0))for(l=0;l<o.length;l++){for(var u=Math.random()*h,c=0,d=-1,f=0;f<s.length;f++)if(u<=(c+=s[f].weight)){var p=s[f].index;d=Array.isArray(p)?p[Math.floor(Math.random()*p.length)]:p;break}o[l].index=d}}}},function(t,e,i){var n=i(63),r=i(64),s=i(3);t.exports=function(t,e,i,a,o,h){return void 0===a&&(a=new s(0,0)),a.x=n(t,i,o,h),a.y=r(e,i,o,h),a}},function(t,e,i){t.exports={Parse:i(478),Parse2DArray:i(223),ParseCSV:i(479),Impact:i(1343),Tiled:i(1344)}},function(t,e,i){t.exports={ParseTileLayers:i(492),ParseTilesets:i(493),ParseWeltmeister:i(491)}},function(t,e,i){t.exports={AssignTileProperties:i(490),Base64Decode:i(482),BuildTilesetIndex:i(489),ParseGID:i(224),ParseImageLayers:i(483),ParseJSONTiled:i(480),ParseObject:i(226),ParseObjectLayers:i(487),ParseTileLayers:i(481),ParseTilesets:i(484)}},function(t,e,i){var n=i(1),r=i(1);n=i(1346),r=i(1347),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e,i){var n=i(9);t.exports=function(t,e,i,r){e.cull(r);var s=e.culledTiles,a=s.length,o=r.alpha*e.alpha;if(!(0===a||o<=0))for(var h=e.gidMap,l=e.pipeline,u=n.getTintAppendFloatAlphaAndSwap,c=e.scrollFactorX,d=e.scrollFactorY,f=e.x,p=e.y,g=e.scaleX,m=e.scaleY,y=e.tileset,v=0;v<y.length;v++)for(var _=y[v],x=_.glTexture,w=0;w<a;w++){var b,T,E,A,S,C,O,P,R=s[w],M=h[R.index];M===_&&null!==(b=M.getTileTextureCoordinates(R.index))&&(T=R.width,E=R.height,A=b.x,S=b.y,C=.5*R.width,O=.5*R.height,P=u(R.tint,o*R.alpha),l.batchTexture(e,x,x.width,x.height,f+(C+R.pixelX)*g,p+(O+R.pixelY)*m,R.width,R.height,g,m,R.rotation,R.flipX,R.flipY,c,d,C,O,A,S,T,E,P,P,P,P,!1,0,0,r,null,!0))}}},function(t,e){t.exports=function(t,e,i,n,r){e.cull(n);var s=e.culledTiles,a=s.length;if(0!==a){var o=t._tempMatrix1,h=t._tempMatrix2,l=t._tempMatrix3;h.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),o.copyFrom(n.matrix);var u=t.currentContext,c=e.gidMap;u.save(),r?(o.multiplyWithOffset(r,-n.scrollX*e.scrollFactorX,-n.scrollY*e.scrollFactorY),h.e=e.x,h.f=e.y,o.multiply(h,l),l.copyToContext(u)):(h.e-=n.scrollX*e.scrollFactorX,h.f-=n.scrollY*e.scrollFactorY,h.copyToContext(u));var d=n.alpha*e.alpha;(!t.antialias||1<e.scaleX||1<e.scaleY)&&(u.imageSmoothingEnabled=!1);for(var f=0;f<a;f++){var p,g,m,y,v=s[f],_=c[v.index];_&&(p=_.image.getSourceImage(),(g=_.getTileTextureCoordinates(v.index))&&(m=v.width/2,y=v.height/2,u.save(),u.translate(v.pixelX+m,v.pixelY+y),0!==v.rotation&&u.rotate(v.rotation),(v.flipX||v.flipY)&&u.scale(v.flipX?-1:1,v.flipY?-1:1),u.globalAlpha=d*v.alpha,u.drawImage(p,g.x,g.y,v.width,v.height,-m,-y,v.width,v.height),u.restore()))}u.restore()}}},function(t,e,i){var n=i(1),r=i(1);n=i(1349),r=i(1350),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e){t.exports=function(t,e,i,n){var r=e.tileset,s=e.pipeline,a=s.vertexBuffer;t.setPipeline(s),s.modelIdentity(),s.modelTranslate(e.x-n.scrollX*e.scrollFactorX,e.y-n.scrollY*e.scrollFactorY,0),s.modelScale(e.scaleX,e.scaleY,1),s.viewLoad2D(n.matrix.matrix);for(var o=0;o<r.length;o++)e.upload(n,o),0<e.vertexCount[o]&&(t.currentPipeline&&0<t.currentPipeline.vertexCount&&t.flush(),s.vertexBuffer=e.vertexBuffer[o],t.setPipeline(s),t.setTexture2D(r[o].glTexture,0),t.gl.drawArrays(s.topology,0,e.vertexCount[o]));s.vertexBuffer=a,s.viewIdentity(),s.modelIdentity()}},function(t,e){t.exports=function(t,e,i,n,r){e.cull(n);var s=e.culledTiles,a=s.length;if(0!==a){var o=t._tempMatrix1,h=t._tempMatrix2,l=t._tempMatrix3;h.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),o.copyFrom(n.matrix);var u=t.currentContext,c=e.gidMap;u.save(),r?(o.multiplyWithOffset(r,-n.scrollX*e.scrollFactorX,-n.scrollY*e.scrollFactorY),h.e=e.x,h.f=e.y,o.multiply(h,l),l.copyToContext(u)):(h.e-=n.scrollX*e.scrollFactorX,h.f-=n.scrollY*e.scrollFactorY,h.copyToContext(u));var d=n.alpha*e.alpha;(!t.antialias||1<e.scaleX||1<e.scaleY)&&(u.imageSmoothingEnabled=!1);for(var f=0;f<a;f++){var p,g,m,y,v,_,x=s[f],w=c[x.index];w&&(p=w.image.getSourceImage(),(g=w.getTileTextureCoordinates(x.index))&&(v=(m=w.tileWidth)/2,_=(y=w.tileHeight)/2,u.save(),u.translate(x.pixelX+v,x.pixelY+_),0!==x.rotation&&u.rotate(x.rotation),(x.flipX||x.flipY)&&u.scale(x.flipX?-1:1,x.flipY?-1:1),u.globalAlpha=d*x.alpha,u.drawImage(p,g.x,g.y,m,y,-v,-_,m,y),u.restore()))}u.restore()}}},function(t,e,i){var n=i(16),r=i(227);n.register("tilemap",(function(t){var e=void 0!==t?t:{};return r(this.scene,e.key,e.tileWidth,e.tileHeight,e.width,e.height,e.data,e.insertNull)}))},function(t,e,i){var n=i(5),r=i(227);n.register("tilemap",(function(t,e,i,n,s,a,o){return null===t&&(t=void 0),null===e&&(e=void 0),null===i&&(i=void 0),null===n&&(n=void 0),null===s&&(s=void 0),r(this.scene,t,e,i,n,s,a,o)}))},function(t,e,i){t.exports={Clock:i(1354),TimerEvent:i(497)}},function(t,e,i){var n=i(0),r=i(23),s=i(22),a=i(497),o=new n({initialize:function(t){this.scene=t,this.systems=t.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],t.sys.events.once(s.BOOT,this.boot,this),t.sys.events.on(s.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(s.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(s.PRE_UPDATE,this.preUpdate,this),t.on(s.UPDATE,this.update,this),t.once(s.SHUTDOWN,this.shutdown,this)},addEvent:function(t){var e=new a(t);return this._pendingInsertion.push(e),e},delayedCall:function(t,e,i,n){return this.addEvent({delay:t,callback:e,args:i,callbackScope:n})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var t=this._pendingRemoval.length,e=this._pendingInsertion.length;if(0!==t||0!==e){for(var i,n=0;n<t;n++){i=this._pendingRemoval[n];var r=this._active.indexOf(i);-1<r&&this._active.splice(r,1),i.destroy()}for(n=0;n<e;n++)i=this._pendingInsertion[n],this._active.push(i);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(t,e){if(this.now=t,!this.paused){e*=this.timeScale;for(var i=0;i<this._active.length;i++){var n,r=this._active[i];r.paused||(r.elapsed+=e*r.timeScale,r.elapsed>=r.delay&&(n=r.elapsed-r.delay,r.elapsed=r.delay,!r.hasDispatched&&r.callback&&(r.hasDispatched=!0,r.callback.apply(r.callbackScope,r.args)),0<r.repeatCount?(r.repeatCount--,r.elapsed=n,r.hasDispatched=!1):this._pendingRemoval.push(r)))}}},shutdown:function(){for(var t=0;t<this._pendingInsertion.length;t++)this._pendingInsertion[t].destroy();for(t=0;t<this._active.length;t++)this._active[t].destroy();for(t=0;t<this._pendingRemoval.length;t++)this._pendingRemoval[t].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var e=this.systems.events;e.off(s.PRE_UPDATE,this.preUpdate,this),e.off(s.UPDATE,this.update,this),e.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(s.START,this.start,this),this.scene=null,this.systems=null}});r.register("Clock",o,"time"),t.exports=o},function(t,e,i){var n=i(89),r=i(18)(!1,r={Builders:i(1356),Events:i(232),TweenManager:i(1372),Tween:i(231),TweenData:i(233),Timeline:i(503)},n);t.exports=r},function(t,e,i){t.exports={GetBoolean:i(88),GetEaseFunction:i(69),GetNewValue:i(145),GetProps:i(498),GetTargets:i(228),GetTweens:i(499),GetValueOp:i(229),NumberTweenBuilder:i(500),StaggerBuilder:i(501),TimelineBuilder:i(502),TweenBuilder:i(146)}},function(t,e){t.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(t,e){t.exports="complete"},function(t,e){t.exports="loop"},function(t,e){t.exports="pause"},function(t,e){t.exports="resume"},function(t,e){t.exports="start"},function(t,e){t.exports="update"},function(t,e){t.exports="active"},function(t,e){t.exports="complete"},function(t,e){t.exports="loop"},function(t,e){t.exports="repeat"},function(t,e){t.exports="start"},function(t,e){t.exports="stop"},function(t,e){t.exports="update"},function(t,e){t.exports="yoyo"},function(t,e,i){var n=i(123),r=i(0),s=i(500),a=i(23),o=i(22),h=i(501),l=i(502),u=i(89),c=i(146),d=new r({initialize:function(t){this.scene=t,this.systems=t.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,t.sys.events.once(o.BOOT,this.boot,this),t.sys.events.on(o.START,this.start,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(o.PRE_UPDATE,this.preUpdate,this),t.on(o.UPDATE,this.update,this),t.once(o.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(t){return l(this,t)},timeline:function(t){var e=l(this,t);return e.paused||(this._add.push(e),this._toProcess++),e},create:function(t){return c(this,t)},add:function(t){var e=c(this,t);return this._add.push(e),this._toProcess++,e},existing:function(t){return this._add.push(t),this._toProcess++,this},addCounter:function(t){var e=s(this,t);return this._add.push(e),this._toProcess++,e},stagger:function(t,e){return h(t,e)},preUpdate:function(){if(0!==this._toProcess){for(var t,e=this._destroy,i=this._active,n=this._pending,r=0;r<e.length;r++){t=e[r];var s=i.indexOf(t);-1===s?-1<(s=n.indexOf(t))&&(t.state=u.REMOVED,n.splice(s,1)):(t.state=u.REMOVED,i.splice(s,1))}for(e.length=0,e=this._add,r=0;r<e.length;r++)(t=e[r]).state===u.PENDING_ADD&&(t.init()?(t.play(),this._active.push(t)):this._pending.push(t));e.length=0,this._toProcess=0}},update:function(t,e){var i,n=this._active;e*=this.timeScale;for(var r=0;r<n.length;r++)(i=n[r]).update(t,e)&&(this._destroy.push(i),this._toProcess++)},remove:function(t){return n(this._add,t),n(this._pending,t),n(this._active,t),n(this._destroy,t),t.state=u.REMOVED,this},makeActive:function(t){if(-1!==this._add.indexOf(t)||-1!==this._active.indexOf(t))return this;var e=this._pending.indexOf(t);return-1!==e&&this._pending.splice(e,1),this._add.push(t),t.state=u.PENDING_ADD,this._toProcess++,this},each:function(t,e){for(var i=[null],n=1;n<arguments.length;n++)i.push(arguments[n]);for(var r in this.list)i[0]=this.list[r],t.apply(e,i)},getAllTweens:function(){for(var t=this._active,e=[],i=0;i<t.length;i++)e.push(t[i]);return e},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(t){var e,i,n=this._active,r=[];if(Array.isArray(t))for(i=0;i<n.length;i++){e=n[i];for(var s=0;s<t.length;s++)e.hasTarget(t[s])&&r.push(e)}else for(i=0;i<n.length;i++)(e=n[i]).hasTarget(t)&&r.push(e);return r},isTweening:function(t){for(var e,i=this._active,n=0;n<i.length;n++)if((e=i[n]).hasTarget(t)&&e.isPlaying())return!0;return!1},killAll:function(){for(var t=this.getAllTweens(),e=0;e<t.length;e++)t[e].stop();return this},killTweensOf:function(t){for(var e=this.getTweensOf(t),i=0;i<e.length;i++)e[i].stop();return this},pauseAll:function(){for(var t=this._active,e=0;e<t.length;e++)t[e].pause();return this},resumeAll:function(){for(var t=this._active,e=0;e<t.length;e++)t[e].resume();return this},setGlobalTimeScale:function(t){return this.timeScale=t,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var t=this.systems.events;t.off(o.PRE_UPDATE,this.preUpdate,this),t.off(o.UPDATE,this.update,this),t.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});a.register("TweenManager",d,"tweens"),t.exports=d},function(t,e,i){t.exports={Array:i(183),Base64:i(1374),Objects:i(1376),String:i(1380)}},function(t,e,i){t.exports={ArrayBufferToBase64:i(1375),Base64ToArrayBuffer:i(388)}},function(t,e){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";t.exports=function(t,e){for(var n=new Uint8Array(t),r=n.length,s=e?"data:"+e+";base64,":"",a=0;a<r;a+=3)s+=i[n[a]>>2],s+=i[(3&n[a])<<4|n[a+1]>>4],s+=i[(15&n[a+1])<<2|n[a+2]>>6],s+=i[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s}},function(t,e,i){t.exports={Clone:i(67),Extend:i(18),GetAdvancedValue:i(15),GetFastValue:i(2),GetMinMaxValue:i(1377),GetValue:i(6),HasAll:i(1378),HasAny:i(407),HasValue:i(108),IsPlainObject:i(7),Merge:i(126),MergeRight:i(1379),Pick:i(486),SetValue:i(427)}},function(t,e,i){var n=i(6),r=i(19);t.exports=function(t,e,i,s,a){void 0===a&&(a=i);var o=n(t,e,a);return r(o,i,s)}},function(t,e){t.exports=function(t,e){for(var i=0;i<e.length;i++)if(!t.hasOwnProperty(e[i]))return!1;return!0}},function(t,e,i){var n=i(67);t.exports=function(t,e){var i=n(t);for(var r in e)i.hasOwnProperty(r)&&(i[r]=e[r]);return i}},function(t,e,i){t.exports={Format:i(1381),Pad:i(163),Reverse:i(1382),UppercaseFirst:i(181),UUID:i(196)}},function(t,e){t.exports=function(t,e){return t.replace(/%([0-9]+)/g,(function(t,i){return e[Number(i)-1]}))}},function(t,e){t.exports=function(t){return t.split("").reverse().join("")}},function(t,e,i){t.exports={SoundManagerCreator:i(380),Events:i(59),BaseSound:i(128),BaseSoundManager:i(127),WebAudioSound:i(389),WebAudioSoundManager:i(387),HTML5AudioSound:i(384),HTML5AudioSoundManager:i(381),NoAudioSound:i(386),NoAudioSoundManager:i(385)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){(function(e){i(518);var n=i(33),r=i(18),s={Actions:i(241),Animations:i(638),Cache:i(639),Cameras:i(642),Core:i(728),Class:i(0),Create:i(789),Curves:i(795),Data:i(798),Display:i(800),DOM:i(818),Events:i(819),Game:i(821),GameObjects:i(914),Geom:i(430),Input:i(1201),Loader:i(1235),Math:i(170),Physics:{Arcade:i(1261)},Plugins:i(1304),Scale:i(1306),Scene:i(374),Scenes:i(1307),Structs:i(1309),Textures:i(1310),Tilemaps:i(1312),Time:i(1353),Tweens:i(1355),Utils:i(1373)};(s=r(!1,s,n)).Sound=i(1383),t.exports=s,e.Phaser=s}).call(this,i(517))}],t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:n})},t.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var r in e)t.d(n,r,function(t){return e[t]}.bind(null,r));return n},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t.p="",t(t.s=1436);function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var e,i}()},function(t,e,i){(function(i){var n;
/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */!function(){"use strict";var r=function(){this.init()};r.prototype={init:function(){var t=this||s;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var e=this||s;if(t=parseFloat(t),e.ctx||f(),void 0!==t&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,s.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),r=0;r<n.length;r++){var a=e._howls[i]._soundById(n[r]);a&&a._node&&(a._node.volume=a._volume*t)}return e}return e._volume},mute:function(t){var e=this||s;e.ctx||f(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,s.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),r=0;r<n.length;r++){var a=e._howls[i]._soundById(n[r]);a&&a._node&&(a._node.muted=!!t||a._muted)}return e},stop:function(){for(var t=this||s,e=0;e<t._howls.length;e++)t._howls[e].stop();return t},unload:function(){for(var t=this||s,e=t._howls.length-1;e>=0;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,f()),t},codecs:function(t){return(this||s)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||s;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(t){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||s,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!e||"function"!=typeof e.canPlayType)return t;var i=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n=t._navigator?t._navigator.userAgent:"",r=n.match(/OPR\/([0-6].)/g),a=r&&parseInt(r[0].split("/")[1],10)<33,o=-1!==n.indexOf("Safari")&&-1===n.indexOf("Chrome"),h=n.match(/Version\/(.*?) /),l=o&&h&&parseInt(h[1],10)<15;return t._codecs={mp3:!(a||!i&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!i,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(e.canPlayType('audio/wav; codecs="1"')||e.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(e.canPlayType("audio/x-m4b;")||e.canPlayType("audio/m4b;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(l||!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(l||!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||s;if(!t._audioUnlocked&&t.ctx){t._audioUnlocked=!1,t.autoUnlock=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var e=function(i){for(;t._html5AudioPool.length<t.html5PoolSize;)try{var n=new Audio;n._unlocked=!0,t._releaseHtml5Audio(n)}catch(i){t.noAudio=!0;break}for(var r=0;r<t._howls.length;r++)if(!t._howls[r]._webAudio)for(var s=t._howls[r]._getSoundIds(),a=0;a<s.length;a++){var o=t._howls[r]._soundById(s[a]);o&&o._node&&!o._node._unlocked&&(o._node._unlocked=!0,o._node.load())}t._autoResume();var h=t.ctx.createBufferSource();h.buffer=t._scratchBuffer,h.connect(t.ctx.destination),void 0===h.start?h.noteOn(0):h.start(0),"function"==typeof t.ctx.resume&&t.ctx.resume(),h.onended=function(){h.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",e,!0),document.removeEventListener("touchend",e,!0),document.removeEventListener("click",e,!0),document.removeEventListener("keydown",e,!0);for(var i=0;i<t._howls.length;i++)t._howls[i]._emit("unlock")}};return document.addEventListener("touchstart",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("click",e,!0),document.addEventListener("keydown",e,!0),t}},_obtainHtml5Audio:function(){var t=this||s;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var e=(new Audio).play();return e&&"undefined"!=typeof Promise&&(e instanceof Promise||"function"==typeof e.then)&&e.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(t){var e=this||s;return t._unlocked&&e._html5AudioPool.push(t),e},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&s.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var i=0;i<t._howls[e]._sounds.length;i++)if(!t._howls[e]._sounds[i]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout((function(){if(t.autoSuspend){t._suspendTimer=null,t.state="suspending";var e=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())};t.ctx.suspend().then(e,e)}}),3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&s.usingWebAudio)return"running"===t.state&&"interrupted"!==t.ctx.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state||"running"===t.state&&"interrupted"===t.ctx.state?(t.ctx.resume().then((function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")})),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var s=new r,a=function(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")};a.prototype={init:function(t){var e=this;return s.ctx||f(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload&&"metadata"!==t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:!(!t.xhr||!t.xhr.withCredentials)&&t.xhr.withCredentials},e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onunlock=t.onunlock?[{fn:t.onunlock}]:[],e._onresume=[],e._webAudio=s.usingWebAudio&&!e._html5,void 0!==s.ctx&&s.ctx&&s.autoUnlock&&s._unlockAudio(),s._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&"none"!==e._preload&&e.load(),e},load:function(){var t=null;if(s.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var e=0;e<this._src.length;e++){var i,n;if(this._format&&this._format[e])i=this._format[e];else{if("string"!=typeof(n=this._src[e])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(i=/^data:audio\/([^;,]+);/i.exec(n))||(i=/\.([^.]+)$/.exec(n.split("?",1)[0])),i&&(i=i[1].toLowerCase())}if(i||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),i&&s.codecs(i)){t=this._src[e];break}}if(t)return this._src=t,this._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new o(this),this._webAudio&&l(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(t,e){var i=this,n=null;if("number"==typeof t)n=t,t=null;else{if("string"==typeof t&&"loaded"===i._state&&!i._sprite[t])return null;if(void 0===t&&(t="__default",!i._playLock)){for(var r=0,a=0;a<i._sounds.length;a++)i._sounds[a]._paused&&!i._sounds[a]._ended&&(r++,n=i._sounds[a]._id);1===r?t=null:n=null}}var o=n?i._soundById(n):i._inactiveSound();if(!o)return null;if(n&&!t&&(t=o._sprite||"__default"),"loaded"!==i._state){o._sprite=t,o._ended=!1;var h=o._id;return i._queue.push({event:"play",action:function(){i.play(h)}}),h}if(n&&!o._paused)return e||i._loadQueue("play"),o._id;i._webAudio&&s._autoResume();var l=Math.max(0,o._seek>0?o._seek:i._sprite[t][0]/1e3),u=Math.max(0,(i._sprite[t][0]+i._sprite[t][1])/1e3-l),c=1e3*u/Math.abs(o._rate),d=i._sprite[t][0]/1e3,f=(i._sprite[t][0]+i._sprite[t][1])/1e3;o._sprite=t,o._ended=!1;var p=function(){o._paused=!1,o._seek=l,o._start=d,o._stop=f,o._loop=!(!o._loop&&!i._sprite[t][2])};if(!(l>=f)){var g=o._node;if(i._webAudio){var m=function(){i._playLock=!1,p(),i._refreshBuffer(o);var t=o._muted||i._muted?0:o._volume;g.gain.setValueAtTime(t,s.ctx.currentTime),o._playStart=s.ctx.currentTime,void 0===g.bufferSource.start?o._loop?g.bufferSource.noteGrainOn(0,l,86400):g.bufferSource.noteGrainOn(0,l,u):o._loop?g.bufferSource.start(0,l,86400):g.bufferSource.start(0,l,u),c!==1/0&&(i._endTimers[o._id]=setTimeout(i._ended.bind(i,o),c)),e||setTimeout((function(){i._emit("play",o._id),i._loadQueue()}),0)};"running"===s.state&&"interrupted"!==s.ctx.state?m():(i._playLock=!0,i.once("resume",m),i._clearTimer(o._id))}else{var y=function(){g.currentTime=l,g.muted=o._muted||i._muted||s._muted||g.muted,g.volume=o._volume*s.volume(),g.playbackRate=o._rate;try{var n=g.play();if(n&&"undefined"!=typeof Promise&&(n instanceof Promise||"function"==typeof n.then)?(i._playLock=!0,p(),n.then((function(){i._playLock=!1,g._unlocked=!0,e?i._loadQueue():i._emit("play",o._id)})).catch((function(){i._playLock=!1,i._emit("playerror",o._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),o._ended=!0,o._paused=!0}))):e||(i._playLock=!1,p(),i._emit("play",o._id)),g.playbackRate=o._rate,g.paused)return void i._emit("playerror",o._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==t||o._loop?i._endTimers[o._id]=setTimeout(i._ended.bind(i,o),c):(i._endTimers[o._id]=function(){i._ended(o),g.removeEventListener("ended",i._endTimers[o._id],!1)},g.addEventListener("ended",i._endTimers[o._id],!1))}catch(t){i._emit("playerror",o._id,t)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===g.src&&(g.src=i._src,g.load());var v=window&&window.ejecta||!g.readyState&&s._navigator.isCocoonJS;if(g.readyState>=3||v)y();else{i._playLock=!0,i._state="loading";var _=function(){i._state="loaded",y(),g.removeEventListener(s._canPlayEvent,_,!1)};g.addEventListener(s._canPlayEvent,_,!1),i._clearTimer(o._id)}}return o._id}i._ended(o)},pause:function(t){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var i=e._getSoundIds(t),n=0;n<i.length;n++){e._clearTimer(i[n]);var r=e._soundById(i[n]);if(r&&!r._paused&&(r._seek=e.seek(i[n]),r._rateSeek=0,r._paused=!0,e._stopFade(i[n]),r._node))if(e._webAudio){if(!r._node.bufferSource)continue;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),e._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||e._emit("pause",r?r._id:null)}return e},stop:function(t,e){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"stop",action:function(){i.stop(t)}}),i;for(var n=i._getSoundIds(t),r=0;r<n.length;r++){i._clearTimer(n[r]);var s=i._soundById(n[r]);s&&(s._seek=s._start||0,s._rateSeek=0,s._paused=!0,s._ended=!0,i._stopFade(n[r]),s._node&&(i._webAudio?s._node.bufferSource&&(void 0===s._node.bufferSource.stop?s._node.bufferSource.noteOff(0):s._node.bufferSource.stop(0),i._cleanBuffer(s._node)):isNaN(s._node.duration)&&s._node.duration!==1/0||(s._node.currentTime=s._start||0,s._node.pause(),s._node.duration===1/0&&i._clearSound(s._node))),e||i._emit("stop",s._id))}return i},mute:function(t,e){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"mute",action:function(){i.mute(t,e)}}),i;if(void 0===e){if("boolean"!=typeof t)return i._muted;i._muted=t}for(var n=i._getSoundIds(e),r=0;r<n.length;r++){var a=i._soundById(n[r]);a&&(a._muted=t,a._interval&&i._stopFade(a._id),i._webAudio&&a._node?a._node.gain.setValueAtTime(t?0:a._volume,s.ctx.currentTime):a._node&&(a._node.muted=!!s._muted||t),i._emit("mute",a._id))}return i},volume:function(){var t,e,i,n=this,r=arguments;if(0===r.length)return n._volume;if(1===r.length||2===r.length&&void 0===r[1]){var a=n._getSoundIds(),o=a.indexOf(r[0]);o>=0?e=parseInt(r[0],10):t=parseFloat(r[0])}else r.length>=2&&(t=parseFloat(r[0]),e=parseInt(r[1],10));if(!(void 0!==t&&t>=0&&t<=1))return(i=e?n._soundById(e):n._sounds[0])?i._volume:0;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"volume",action:function(){n.volume.apply(n,r)}}),n;void 0===e&&(n._volume=t),e=n._getSoundIds(e);for(var h=0;h<e.length;h++)(i=n._soundById(e[h]))&&(i._volume=t,r[2]||n._stopFade(e[h]),n._webAudio&&i._node&&!i._muted?i._node.gain.setValueAtTime(t,s.ctx.currentTime):i._node&&!i._muted&&(i._node.volume=t*s.volume()),n._emit("volume",i._id));return n},fade:function(t,e,i,n){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"fade",action:function(){r.fade(t,e,i,n)}}),r;t=Math.min(Math.max(0,parseFloat(t)),1),e=Math.min(Math.max(0,parseFloat(e)),1),i=parseFloat(i),r.volume(t,n);for(var a=r._getSoundIds(n),o=0;o<a.length;o++){var h=r._soundById(a[o]);if(h){if(n||r._stopFade(a[o]),r._webAudio&&!h._muted){var l=s.ctx.currentTime,u=l+i/1e3;h._volume=t,h._node.gain.setValueAtTime(t,l),h._node.gain.linearRampToValueAtTime(e,u)}r._startFadeInterval(h,t,e,i,a[o],void 0===n)}}return r},_startFadeInterval:function(t,e,i,n,r,s){var a=this,o=e,h=i-e,l=Math.abs(h/.01),u=Math.max(4,l>0?n/l:n),c=Date.now();t._fadeTo=i,t._interval=setInterval((function(){var r=(Date.now()-c)/n;c=Date.now(),o+=h*r,o=Math.round(100*o)/100,o=h<0?Math.max(i,o):Math.min(i,o),a._webAudio?t._volume=o:a.volume(o,t._id,!0),s&&(a._volume=o),(i<e&&o<=i||i>e&&o>=i)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,a.volume(i,t._id),a._emit("fade",t._id))}),u)},_stopFade:function(t){var e=this._soundById(t);return e&&e._interval&&(this._webAudio&&e._node.gain.cancelScheduledValues(s.ctx.currentTime),clearInterval(e._interval),e._interval=null,this.volume(e._fadeTo,t),e._fadeTo=null,this._emit("fade",t)),this},loop:function(){var t,e,i,n=this,r=arguments;if(0===r.length)return n._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(i=n._soundById(parseInt(r[0],10)))&&i._loop;t=r[0],n._loop=t}else 2===r.length&&(t=r[0],e=parseInt(r[1],10));for(var s=n._getSoundIds(e),a=0;a<s.length;a++)(i=n._soundById(s[a]))&&(i._loop=t,n._webAudio&&i._node&&i._node.bufferSource&&(i._node.bufferSource.loop=t,t&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop,n.playing(s[a])&&(n.pause(s[a],!0),n.play(s[a],!0)))));return n},rate:function(){var t,e,i,n=this,r=arguments;if(0===r.length)e=n._sounds[0]._id;else if(1===r.length){var a=n._getSoundIds(),o=a.indexOf(r[0]);o>=0?e=parseInt(r[0],10):t=parseFloat(r[0])}else 2===r.length&&(t=parseFloat(r[0]),e=parseInt(r[1],10));if("number"!=typeof t)return(i=n._soundById(e))?i._rate:n._rate;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"rate",action:function(){n.rate.apply(n,r)}}),n;void 0===e&&(n._rate=t),e=n._getSoundIds(e);for(var h=0;h<e.length;h++)if(i=n._soundById(e[h])){n.playing(e[h])&&(i._rateSeek=n.seek(e[h]),i._playStart=n._webAudio?s.ctx.currentTime:i._playStart),i._rate=t,n._webAudio&&i._node&&i._node.bufferSource?i._node.bufferSource.playbackRate.setValueAtTime(t,s.ctx.currentTime):i._node&&(i._node.playbackRate=t);var l=n.seek(e[h]),u=(n._sprite[i._sprite][0]+n._sprite[i._sprite][1])/1e3-l,c=1e3*u/Math.abs(i._rate);!n._endTimers[e[h]]&&i._paused||(n._clearTimer(e[h]),n._endTimers[e[h]]=setTimeout(n._ended.bind(n,i),c)),n._emit("rate",i._id)}return n},seek:function(){var t,e,i=this,n=arguments;if(0===n.length)i._sounds.length&&(e=i._sounds[0]._id);else if(1===n.length){var r=i._getSoundIds(),a=r.indexOf(n[0]);a>=0?e=parseInt(n[0],10):i._sounds.length&&(e=i._sounds[0]._id,t=parseFloat(n[0]))}else 2===n.length&&(t=parseFloat(n[0]),e=parseInt(n[1],10));if(void 0===e)return 0;if("number"==typeof t&&("loaded"!==i._state||i._playLock))return i._queue.push({event:"seek",action:function(){i.seek.apply(i,n)}}),i;var o=i._soundById(e);if(o){if(!("number"==typeof t&&t>=0)){if(i._webAudio){var h=i.playing(e)?s.ctx.currentTime-o._playStart:0,l=o._rateSeek?o._rateSeek-o._seek:0;return o._seek+(l+h*Math.abs(o._rate))}return o._node.currentTime}var u=i.playing(e);u&&i.pause(e,!0),o._seek=t,o._ended=!1,i._clearTimer(e),i._webAudio||!o._node||isNaN(o._node.duration)||(o._node.currentTime=t);var c=function(){u&&i.play(e,!0),i._emit("seek",e)};if(u&&!i._webAudio){var d=function(){i._playLock?setTimeout(d,0):c()};setTimeout(d,0)}else c()}return i},playing:function(t){if("number"==typeof t){var e=this._soundById(t);return!!e&&!e._paused}for(var i=0;i<this._sounds.length;i++)if(!this._sounds[i]._paused)return!0;return!1},duration:function(t){var e=this._duration,i=this._soundById(t);return i&&(e=this._sprite[i._sprite][1]/1e3),e},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,i=0;i<e.length;i++)e[i]._paused||t.stop(e[i]._id),t._webAudio||(t._clearSound(e[i]._node),e[i]._node.removeEventListener("error",e[i]._errorFn,!1),e[i]._node.removeEventListener(s._canPlayEvent,e[i]._loadFn,!1),e[i]._node.removeEventListener("ended",e[i]._endFn,!1),s._releaseHtml5Audio(e[i]._node)),delete e[i]._node,t._clearTimer(e[i]._id);var n=s._howls.indexOf(t);n>=0&&s._howls.splice(n,1);var r=!0;for(i=0;i<s._howls.length;i++)if(s._howls[i]._src===t._src||t._src.indexOf(s._howls[i]._src)>=0){r=!1;break}return h&&r&&delete h[t._src],s.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,i,n){var r=this["_on"+t];return"function"==typeof e&&r.push(n?{id:i,fn:e,once:n}:{id:i,fn:e}),this},off:function(t,e,i){var n=this["_on"+t],r=0;if("number"==typeof e&&(i=e,e=null),e||i)for(r=0;r<n.length;r++){var s=i===n[r].id;if(e===n[r].fn&&s||!e&&s){n.splice(r,1);break}}else if(t)this["_on"+t]=[];else{var a=Object.keys(this);for(r=0;r<a.length;r++)0===a[r].indexOf("_on")&&Array.isArray(this[a[r]])&&(this[a[r]]=[])}return this},once:function(t,e,i){return this.on(t,e,i,1),this},_emit:function(t,e,i){for(var n=this["_on"+t],r=n.length-1;r>=0;r--)n[r].id&&n[r].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,i)}.bind(this,n[r].fn),0),n[r].once&&this.off(t,n[r].fn,n[r].id));return this._loadQueue(t),this},_loadQueue:function(t){if(this._queue.length>0){var e=this._queue[0];e.event===t&&(this._queue.shift(),this._loadQueue()),t||e.action()}return this},_ended:function(t){var e=t._sprite;if(!this._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(this._ended.bind(this,t),100),this;var i=!(!t._loop&&!this._sprite[e][2]);if(this._emit("end",t._id),!this._webAudio&&i&&this.stop(t._id,!0).play(t._id),this._webAudio&&i){this._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=s.ctx.currentTime;var n=1e3*(t._stop-t._start)/Math.abs(t._rate);this._endTimers[t._id]=setTimeout(this._ended.bind(this,t),n)}return this._webAudio&&!i&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,this._clearTimer(t._id),this._cleanBuffer(t._node),s._autoSuspend()),this._webAudio||i||this.stop(t._id,!0),this},_clearTimer:function(t){if(this._endTimers[t]){if("function"!=typeof this._endTimers[t])clearTimeout(this._endTimers[t]);else{var e=this._soundById(t);e&&e._node&&e._node.removeEventListener("ended",this._endTimers[t],!1)}delete this._endTimers[t]}return this},_soundById:function(t){for(var e=0;e<this._sounds.length;e++)if(t===this._sounds[e]._id)return this._sounds[e];return null},_inactiveSound:function(){this._drain();for(var t=0;t<this._sounds.length;t++)if(this._sounds[t]._ended)return this._sounds[t].reset();return new o(this)},_drain:function(){var t=this._pool,e=0,i=0;if(!(this._sounds.length<t)){for(i=0;i<this._sounds.length;i++)this._sounds[i]._ended&&e++;for(i=this._sounds.length-1;i>=0;i--){if(e<=t)return;this._sounds[i]._ended&&(this._webAudio&&this._sounds[i]._node&&this._sounds[i]._node.disconnect(0),this._sounds.splice(i,1),e--)}}},_getSoundIds:function(t){if(void 0===t){for(var e=[],i=0;i<this._sounds.length;i++)e.push(this._sounds[i]._id);return e}return[t]},_refreshBuffer:function(t){return t._node.bufferSource=s.ctx.createBufferSource(),t._node.bufferSource.buffer=h[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,s.ctx.currentTime),this},_cleanBuffer:function(t){var e=s._navigator&&s._navigator.vendor.indexOf("Apple")>=0;if(s._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),e))try{t.bufferSource.buffer=s._scratchBuffer}catch(t){}return t.bufferSource=null,this},_clearSound:function(t){/MSIE |Trident\//.test(s._navigator&&s._navigator.userAgent)||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var o=function(t){this._parent=t,this.init()};o.prototype={init:function(){var t=this._parent;return this._muted=t._muted,this._loop=t._loop,this._volume=t._volume,this._rate=t._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++s._counter,t._sounds.push(this),this.create(),this},create:function(){var t=this._parent,e=s._muted||this._muted||this._parent._muted?0:this._volume;return t._webAudio?(this._node=void 0===s.ctx.createGain?s.ctx.createGainNode():s.ctx.createGain(),this._node.gain.setValueAtTime(e,s.ctx.currentTime),this._node.paused=!0,this._node.connect(s.masterGain)):s.noAudio||(this._node=s._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(s._canPlayEvent,this._loadFn,!1),this._endFn=this._endListener.bind(this),this._node.addEventListener("ended",this._endFn,!1),this._node.src=t._src,this._node.preload=!0===t._preload?"auto":t._preload,this._node.volume=e*s.volume(),this._node.load()),this},reset:function(){var t=this._parent;return this._muted=t._muted,this._loop=t._loop,this._volume=t._volume,this._rate=t._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++s._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var t=this._parent;t._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),this._node.removeEventListener(s._canPlayEvent,this._loadFn,!1)},_endListener:function(){var t=this._parent;t._duration===1/0&&(t._duration=Math.ceil(10*this._node.duration)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration),t._ended(this)),this._node.removeEventListener("ended",this._endFn,!1)}};var h={},l=function(t){var e=t._src;if(h[e])return t._duration=h[e].duration,void d(t);if(/^data:[^;]+;base64,/.test(e)){for(var i=atob(e.split(",")[1]),n=new Uint8Array(i.length),r=0;r<i.length;++r)n[r]=i.charCodeAt(r);c(n.buffer,t)}else{var s=new XMLHttpRequest;s.open(t._xhr.method,e,!0),s.withCredentials=t._xhr.withCredentials,s.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach((function(e){s.setRequestHeader(e,t._xhr.headers[e])})),s.onload=function(){var e=(s.status+"")[0];"0"===e||"2"===e||"3"===e?c(s.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+s.status+".")},s.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete h[e],t.load())},u(s)}},u=function(t){try{t.send()}catch(e){t.onerror()}},c=function(t,e){var i=function(){e._emit("loaderror",null,"Decoding audio data failed.")},n=function(t){t&&e._sounds.length>0?(h[e._src]=t,d(e,t)):i()};"undefined"!=typeof Promise&&1===s.ctx.decodeAudioData.length?s.ctx.decodeAudioData(t).then(n).catch(i):s.ctx.decodeAudioData(t,n,i)},d=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},f=function(){if(s.usingWebAudio){try{"undefined"!=typeof AudioContext?s.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?s.ctx=new webkitAudioContext:s.usingWebAudio=!1}catch(t){s.usingWebAudio=!1}s.ctx||(s.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(s._navigator&&s._navigator.platform),e=s._navigator&&s._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i=e?parseInt(e[1],10):null;if(t&&i&&i<9){var n=/safari/.test(s._navigator&&s._navigator.userAgent.toLowerCase());s._navigator&&!n&&(s.usingWebAudio=!1)}s.usingWebAudio&&(s.masterGain=void 0===s.ctx.createGain?s.ctx.createGainNode():s.ctx.createGain(),s.masterGain.gain.setValueAtTime(s._muted?0:s._volume,s.ctx.currentTime),s.masterGain.connect(s.ctx.destination)),s._setup()}};void 0===(n=function(){return{Howler:s,Howl:a}}.apply(e,[]))||(t.exports=n),e.Howler=s,e.Howl=a,void 0!==i?(i.HowlerGlobal=r,i.Howler=s,i.Howl=a,i.Sound=o):"undefined"!=typeof window&&(window.HowlerGlobal=r,window.Howler=s,window.Howl=a,window.Sound=o)}(),
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){"use strict";var t;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){if(!this.ctx||!this.ctx.listener)return this;for(var e=this._howls.length-1;e>=0;e--)this._howls[e].stereo(t);return this},HowlerGlobal.prototype.pos=function(t,e,i){return this.ctx&&this.ctx.listener?(e="number"!=typeof e?this._pos[1]:e,i="number"!=typeof i?this._pos[2]:i,"number"!=typeof t?this._pos:(this._pos=[t,e,i],void 0!==this.ctx.listener.positionX?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this},HowlerGlobal.prototype.orientation=function(t,e,i,n,r,s){if(!this.ctx||!this.ctx.listener)return this;var a=this._orientation;return e="number"!=typeof e?a[1]:e,i="number"!=typeof i?a[2]:i,n="number"!=typeof n?a[3]:n,r="number"!=typeof r?a[4]:r,s="number"!=typeof s?a[5]:s,"number"!=typeof t?a:(this._orientation=[t,e,i,n,r,s],void 0!==this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(n,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(r,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(s,Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(t,e,i,n,r,s),this)},Howl.prototype.init=(t=Howl.prototype.init,function(e){return this._orientation=e.orientation||[1,0,0],this._stereo=e.stereo||null,this._pos=e.pos||null,this._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},this._onstereo=e.onstereo?[{fn:e.onstereo}]:[],this._onpos=e.onpos?[{fn:e.onpos}]:[],this._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}),Howl.prototype.stereo=function(t,i){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"stereo",action:function(){n.stereo(t,i)}}),n;var r=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===i){if("number"!=typeof t)return n._stereo;n._stereo=t,n._pos=[t,0,0]}for(var s=n._getSoundIds(i),a=0;a<s.length;a++){var o=n._soundById(s[a]);if(o){if("number"!=typeof t)return o._stereo;o._stereo=t,o._pos=[t,0,0],o._node&&(o._pannerAttr.panningModel="equalpower",o._panner&&o._panner.pan||e(o,r),"spatial"===r?void 0!==o._panner.positionX?(o._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),o._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),o._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):o._panner.setPosition(t,0,0):o._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),n._emit("stereo",o._id)}}return n},Howl.prototype.pos=function(t,i,n,r){var s=this;if(!s._webAudio)return s;if("loaded"!==s._state)return s._queue.push({event:"pos",action:function(){s.pos(t,i,n,r)}}),s;if(i="number"!=typeof i?0:i,n="number"!=typeof n?-.5:n,void 0===r){if("number"!=typeof t)return s._pos;s._pos=[t,i,n]}for(var a=s._getSoundIds(r),o=0;o<a.length;o++){var h=s._soundById(a[o]);if(h){if("number"!=typeof t)return h._pos;h._pos=[t,i,n],h._node&&(h._panner&&!h._panner.pan||e(h,"spatial"),void 0!==h._panner.positionX?(h._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),h._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):h._panner.setPosition(t,i,n)),s._emit("pos",h._id)}}return s},Howl.prototype.orientation=function(t,i,n,r){var s=this;if(!s._webAudio)return s;if("loaded"!==s._state)return s._queue.push({event:"orientation",action:function(){s.orientation(t,i,n,r)}}),s;if(i="number"!=typeof i?s._orientation[1]:i,n="number"!=typeof n?s._orientation[2]:n,void 0===r){if("number"!=typeof t)return s._orientation;s._orientation=[t,i,n]}for(var a=s._getSoundIds(r),o=0;o<a.length;o++){var h=s._soundById(a[o]);if(h){if("number"!=typeof t)return h._orientation;h._orientation=[t,i,n],h._node&&(h._panner||(h._pos||(h._pos=s._pos||[0,0,-.5]),e(h,"spatial")),void 0!==h._panner.orientationX?(h._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),h._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):h._panner.setOrientation(t,i,n)),s._emit("orientation",h._id)}}return s},Howl.prototype.pannerAttr=function(){var t,i,n,r=this,s=arguments;if(!r._webAudio)return r;if(0===s.length)return r._pannerAttr;if(1===s.length){if("object"!=typeof s[0])return(n=r._soundById(parseInt(s[0],10)))?n._pannerAttr:r._pannerAttr;t=s[0],void 0===i&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),r._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:r._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:r._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:r._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:r._panningModel})}else 2===s.length&&(t=s[0],i=parseInt(s[1],10));for(var a=r._getSoundIds(i),o=0;o<a.length;o++)if(n=r._soundById(a[o])){var h=n._pannerAttr;h={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:h.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:h.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:h.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:h.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:h.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:h.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:h.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:h.panningModel};var l=n._panner;l?(l.coneInnerAngle=h.coneInnerAngle,l.coneOuterAngle=h.coneOuterAngle,l.coneOuterGain=h.coneOuterGain,l.distanceModel=h.distanceModel,l.maxDistance=h.maxDistance,l.refDistance=h.refDistance,l.rolloffFactor=h.rolloffFactor,l.panningModel=h.panningModel):(n._pos||(n._pos=r._pos||[0,0,-.5]),e(n,"spatial"))}return r},Sound.prototype.init=function(t){return function(){var e=this._parent;this._orientation=e._orientation,this._stereo=e._stereo,this._pos=e._pos,this._pannerAttr=e._pannerAttr,t.call(this),this._stereo?e.stereo(this._stereo):this._pos&&e.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this._parent;return this._orientation=e._orientation,this._stereo=e._stereo,this._pos=e._pos,this._pannerAttr=e._pannerAttr,this._stereo?e.stereo(this._stereo):this._pos?e.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,e._refreshBuffer(this)),t.call(this)}}(Sound.prototype.reset);var e=function(t,e){"spatial"===(e=e||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,void 0!==t._panner.positionX?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),void 0!==t._panner.orientationX?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}()}).call(this,i(3))},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(1),o=i(27),h=i(11),l=i(42),u=s(i(5)),c=function(t){function e(e,i,n,r){var s,a=t.call(this,e)||this;return a.id=r||n.id,a.ballObject=n,a.pocketTween=!1,a.ballRotation=[1,0,0,0],a.ballRadius=i,a.pocketVelocity=null,a.pocketed=!1,a.rollingOnTrail=!1,a.f=0,a.startRollingOnTrail_f=0,a.id<=8?(a.ballType=u.BallType.SOLID,s="solid_"):(a.ballType=u.BallType.STRIPED,s="stripes_"),a.ballImage=new Phaser.GameObjects.Image(a.scene,0,0,"texture_atlas_1","solid_0"),a.ballImage.setScale(2*a.ballRadius/a.ballImage.width),a.add(a.ballImage),a.ballType===u.BallType.SOLID?a.ballImage.setFrame(s+a.id.toString()):a.ballImage.setFrame(s+a.id.toString()+"_0"),a.spotHolder=new Phaser.GameObjects.Container(a.scene),a.add(a.spotHolder),a.spot=new Phaser.GameObjects.Image(a.scene,0,0,"texture_atlas_1"),a.spot.setFrame("spot_"+a.id),a.spotHolder.add(a.spot),a.shade=new Phaser.GameObjects.Image(a.scene,0,0,"texture_atlas_1","shade"),a.shade.setScale(2.2*a.ballRadius/a.ballImage.width),a.add(a.shade),a.updateRotation(12*Math.random()-6,12*Math.random()-6),a.shadow=new Phaser.GameObjects.Image(a.scene,0,0,"texture_atlas_1","shadow"),a}return r(e,t),e.prototype.update=function(){this.scene&&(this.pocketTween?this.updateRotation(this.pocketVelocity.x*a.GameConstants.PHYS_SCALE,this.pocketVelocity.y*a.GameConstants.PHYS_SCALE):(this.x=this.ballObject.position.x*a.GameConstants.PHYS_SCALE,this.y=this.ballObject.position.y*a.GameConstants.PHYS_SCALE,this.updateRotation(this.ballObject.velocity.x*a.GameConstants.PHYS_SCALE,this.ballObject.velocity.y*a.GameConstants.PHYS_SCALE)),this.shadow&&this.setShadowPosition())},e.prototype.rollOnTrail=function(){this.y=20,this.setScale(.95),this.pocketVelocity=new u.Vector2D(0,250),this.pocketTween=!0,this.rollingOnTrail=!0,this.shade.setFrame("shade_potted_ball"),this.shadow&&this.shadow.destroy()},e.prototype.setShadowPosition=function(){this.shadow.x=this.x+.35*a.GameConstants.BALL_RADIUS*a.GameConstants.PHYS_SCALE*(this.x/300),this.shadow.y=this.y+.35*a.GameConstants.BALL_RADIUS*a.GameConstants.PHYS_SCALE*(this.y/150)},e.prototype.pocket=function(t,e){var i;this.pocketTween=!0,this.pocketed=!0,i=e<1e3?150:e<2e3?120:e<3e3?90:e<5e3?60:30,this.pocketVelocity=new u.Vector2D((t.dropPosition.x-this.x/a.GameConstants.PHYS_SCALE)/i*5,(t.dropPosition.y-this.y/a.GameConstants.PHYS_SCALE)/i*5),this.scene.tweens.add({targets:this,x:t.dropPosition.x*a.GameConstants.PHYS_SCALE,y:t.dropPosition.y*a.GameConstants.PHYS_SCALE,ease:Phaser.Math.Easing.Cubic.Out,duration:i,onComplete:function(){this.scene&&i&&(h.BoardContainer.currentInstance.moveBallToTunnel(this),this.pocketVelocity=new u.Vector2D((.7*t.dropPosition.x-this.x/a.GameConstants.PHYS_SCALE)/i*5,(.7*t.dropPosition.y-this.y/a.GameConstants.PHYS_SCALE)/i*5),this.pocketDropTween=this.scene.tweens.add({targets:this,x:.7*t.dropPosition.x*a.GameConstants.PHYS_SCALE,y:.7*t.dropPosition.y*a.GameConstants.PHYS_SCALE,scaleX:.65,scaleY:.65,ease:Phaser.Math.Easing.Linear,duration:1.75*i,onComplete:function(){this.pocketDropTween=null,h.BoardContainer.currentInstance.restitutingBalls?this.destroy():(0!==this.ballObject.id&&l.PocketedBallsTrail.currentInstance.addBall(this.ballObject.id,t.id),o.BallsContainer.currentInstance.removeBall(this))},onCompleteScope:this}))},onCompleteScope:this}),this.scene.tweens.add({targets:this,scaleX:.925,scaleY:.925,ease:Phaser.Math.Easing.Cubic.Out,duration:i}),this.scene.tweens.add({targets:this.shadow,alpha:0,ease:Phaser.Math.Easing.Cubic.Out,duration:i,onComplete:function(){this.shadow.destroy(),this.shadow=null},onCompleteScope:this})},e.prototype.removeFromBoard=function(){this.scene&&this.scene.tweens.add({targets:[this,this.shadow],alpha:0,ease:Phaser.Math.Easing.Cubic.Out,duration:300,onComplete:function(){this.shadow.destroy(),this.destroy()},onCompleteScope:this})},e.prototype.updateRotation=function(t,e){var i=Math.sqrt(t*t+e*e);i>.1&&(this.ballRotation=this.rotateQuat(this.ballRotation,-t/i,e/i,i/this.ballRadius),this.ballRotation=this.normalize(this.ballRotation),this.renderBall(this.ballRotation))},e.prototype.rotateQuat=function(t,e,i,n){var r=Math.sqrt(e*e+i*i),s=e/r,a=i/r,o=Math.sin(.5*n),h=s*o,l=a*o,u=Math.cos(.5*n),c=t[0],d=t[1],f=t[2],p=t[3];return[c*u+d*l-f*h,-c*l+d*u+p*h,c*h+f*u+p*l,-d*h-f*l+p*u]},e.prototype.renderBall=function(t){var e=t[0],i=t[1],n=t[2],r=t[3],s=Math.atan2(2*e*r-2*i*n,1-2*e*e-2*n*n)+Math.PI,a=Math.asin(2*i*e+2*n*r)+Math.PI,o=i*e+n*r;if(!(o>.499||o<-.499)){if(this.angle=u.Maths._180_DIV_PI*s,this.shade.angle=-this.angle,this.ballType===u.BallType.STRIPED){var h=(a-u.Maths.PI_2)/Math.PI,l=41-Math.round(41*h);this.ballImage.setFrame("stripes_"+this.id+"_"+l.toString())}if(this.spotHolder){var c=Math.atan2(2*i*r-2*e*n,1-2*i*i-2*n*n)+Math.PI;a<u.Maths.PI_2||a>3*u.Maths.PI_2?c>u.Maths.PI_2&&c<3*u.Maths.PI_2?(this.spotHolder.y=this.ballRadius*Math.cos(c)*Math.sin(a),this.spotHolder.x=this.ballRadius*Math.sin(c)):(this.spotHolder.y=-this.ballRadius*Math.cos(c)*Math.sin(a),this.spotHolder.x=-this.ballRadius*Math.sin(c)):c>u.Maths.PI_2&&c<3*u.Maths.PI_2?(this.spotHolder.y=-this.ballRadius*Math.cos(c)*Math.sin(a),this.spotHolder.x=-this.ballRadius*Math.sin(c)):(this.spotHolder.y=this.ballRadius*Math.cos(c)*Math.sin(a),this.spotHolder.x=this.ballRadius*Math.sin(c));var d=Math.sqrt(this.spotHolder.x*this.spotHolder.x+this.spotHolder.y*this.spotHolder.y)/this.ballRadius,f=Math.cos(d*u.Maths.PI_2),p=Math.atan2(this.spotHolder.y,this.spotHolder.x);if(f<.1)this.spotHolder.visible=!1;else{this.spotHolder.visible=!0,this.spotHolder.setScale(.675,.675*f)}this.spotHolder.angle=u.Maths._180_DIV_PI*p+90,this.spot.angle=-this.spotHolder.angle}}},e.prototype.normalize=function(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]+t[3]*t[3]);return[t[0]/e,t[1]/e,t[2]/e,t[3]/e]},e}(Phaser.GameObjects.Container);e.Ball=c},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var s=i(1),a=i(0),o=i(41),h=function(t){function e(i){var n=t.call(this,i)||this;return e.currentInstance=n,n.x=a.GameVars.gameData.powerBarSide===s.GameConstants.LEFT?485:-485,n.y=-224,n.queuedBalls=[],n.rollingBalls=[],n.rails=new Phaser.GameObjects.Image(n.scene,0,0,"texture_atlas_1","pot_down"),n.rails.setOrigin(.5,0),n.add(n.rails),n.cover=new Phaser.GameObjects.Image(n.scene,0,0,"texture_atlas_1","pot_up"),n.cover.setOrigin(.5,0),n.add(n.cover),n.rails.scaleX=a.GameVars.gameData.powerBarSide===s.GameConstants.LEFT?1:-1,n.cover.scaleX=n.rails.scaleX,n}return r(e,t),e.prototype.update=function(){for(var t=[],i=0;i<this.queuedBalls.length;i++){var n=this.queuedBalls[i],r=this.rollingBalls[this.rollingBalls.length-1],a=!r||r.y-n.y>3.5*s.GameConstants.BALL_RADIUS*s.GameConstants.PHYS_SCALE;n.f++,n.f>n.startRollingOnTrail_f&&a&&t.push(n)}for(i=0;i<t.length;i++){n=t[i];var o=this.queuedBalls.indexOf(n);-1!==o&&(this.queuedBalls.splice(o,1),n.deltaYTrail=2.1*.95*(this.rollingBalls.length-1)*s.GameConstants.BALL_RADIUS*s.GameConstants.PHYS_SCALE,n.rollOnTrail(),n.visible=!0,this.rollingBalls.push(n))}for(i=0;i<this.rollingBalls.length;i++){(n=this.rollingBalls[i]).rollingOnTrail&&(n.y+=n.pocketVelocity.y*s.GameConstants.PHYS_SCALE,n.update(),n.y>=e.RAILS_LENGTH-n.deltaYTrail&&(n.rollingOnTrail=!1))}},e.prototype.startGame=function(){for(var t=0;t<a.GameVars.billiardEngine.pocketedBallsIDs.length;t++)this.addBall(a.GameVars.billiardEngine.pocketedBallsIDs[t],null,!0)},e.prototype.clear=function(){this.scene.tweens.add({targets:this.rollingBalls,alpha:0,ease:Phaser.Math.Easing.Cubic.Out,duration:450,onComplete:function(){for(var t=0;t<this.rollingBalls.length;t++)this.rollingBalls[t].destroy();this.rollingBalls=[]},onCompleteScope:this})},e.prototype.addBall=function(t,i,n){var r=new o.Ball(this.scene,s.GameConstants.BALL_RADIUS*s.GameConstants.PHYS_SCALE,null,t);if(n){var a=2.1*.95*(this.rollingBalls.length-1)*s.GameConstants.BALL_RADIUS*s.GameConstants.PHYS_SCALE;r.y=e.RAILS_LENGTH-a,this.rollingBalls.push(r)}else switch(r.visible=!1,this.queuedBalls.push(r),i){case 0:r.startRollingOnTrail_f=40;break;case 1:r.startRollingOnTrail_f=25;break;case 2:r.startRollingOnTrail_f=5;break;case 3:r.startRollingOnTrail_f=25;break;case 4:r.startRollingOnTrail_f=30;break;case 5:r.startRollingOnTrail_f=55}this.addAt(r,1)},e.prototype.changeSide=function(){this.x=a.GameVars.gameData.powerBarSide===s.GameConstants.LEFT?485:-485,this.rails.scaleX=a.GameVars.gameData.powerBarSide===s.GameConstants.LEFT?1:-1,this.cover.scaleX=this.rails.scaleX},e.RAILS_LENGTH=412,e}(Phaser.GameObjects.Container);e.PocketedBallsTrail=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Serialize=e.RpcError=e.RpcInterfaces=e.Numeric=e.JsonRpc=e.ApiInterfaces=e.Api=void 0;var n=i(75);Object.defineProperty(e,"Api",{enumerable:!0,get:function(){return n.Api}});var r=i(85);e.ApiInterfaces=r;var s=i(86);Object.defineProperty(e,"JsonRpc",{enumerable:!0,get:function(){return s.JsonRpc}});var a=i(29);e.Numeric=a;var o=i(87);e.RpcInterfaces=o;var h=i(48);Object.defineProperty(e,"RpcError",{enumerable:!0,get:function(){return h.RpcError}});var l=i(44);e.Serialize=l},function(t,e,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__read||function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,s=i.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return a},s=this&&this.__spreadArray||function(t,e){for(var i=0,n=e.length,r=t.length;i<n;i++,r++)t[r]=e[i];return t},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.serializeQuery=e.deserializeAnyArray=e.serializeAnyArray=e.deserializeAnyObject=e.serializeAnyObject=e.deserializeAnyvarShort=e.deserializeAnyvar=e.serializeAnyvar=e.deserializeAction=e.deserializeActionData=e.serializeAction=e.serializeActionData=e.transactionHeader=e.getTypesFromAbi=e.getType=e.createTransactionTypes=e.createTransactionExtensionTypes=e.createAbiTypes=e.createInitialTypes=e.hexToUint8Array=e.arrayToHex=e.symbolToString=e.stringToSymbol=e.blockTimestampToDate=e.dateToBlockTimestamp=e.timePointSecToDate=e.dateToTimePointSec=e.timePointToDate=e.dateToTimePoint=e.supportedAbiVersion=e.SerialBuffer=e.SerializerState=void 0;var o=i(29),h=function(t){void 0===t&&(t={}),this.skippedBinaryExtension=!1,this.options=t};e.SerializerState=h;var l=function(){function t(t){var e=void 0===t?{}:t,i=e.textEncoder,n=e.textDecoder,r=e.array;this.readPos=0,this.array=r||new Uint8Array(1024),this.length=r?r.length:0,this.textEncoder=i||new TextEncoder,this.textDecoder=n||new TextDecoder("utf-8",{fatal:!0})}return t.prototype.reserve=function(t){if(!(this.length+t<=this.array.length)){for(var e=this.array.length;this.length+t>e;)e=Math.ceil(1.5*e);var i=new Uint8Array(e);i.set(this.array),this.array=i}},t.prototype.haveReadData=function(){return this.readPos<this.length},t.prototype.restartRead=function(){this.readPos=0},t.prototype.asUint8Array=function(){return new Uint8Array(this.array.buffer,this.array.byteOffset,this.length)},t.prototype.pushArray=function(t){this.reserve(t.length),this.array.set(t,this.length),this.length+=t.length},t.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.pushArray(t)},t.prototype.get=function(){if(this.readPos<this.length)return this.array[this.readPos++];throw new Error("Read past end of buffer")},t.prototype.pushUint8ArrayChecked=function(t,e){if(t.length!==e)throw new Error("Binary data has incorrect size");this.pushArray(t)},t.prototype.getUint8Array=function(t){if(this.readPos+t>this.length)throw new Error("Read past end of buffer");var e=new Uint8Array(this.array.buffer,this.array.byteOffset+this.readPos,t);return this.readPos+=t,e},t.prototype.skip=function(t){if(this.readPos+t>this.length)throw new Error("Read past end of buffer");this.readPos+=t},t.prototype.pushUint16=function(t){this.push(t>>0&255,t>>8&255)},t.prototype.getUint16=function(){var t=0;return t|=this.get()<<0,t|=this.get()<<8},t.prototype.pushUint32=function(t){this.push(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},t.prototype.getUint32=function(){var t=0;return t|=this.get()<<0,t|=this.get()<<8,t|=this.get()<<16,(t|=this.get()<<24)>>>0},t.prototype.pushNumberAsUint64=function(t){this.pushUint32(t>>>0),this.pushUint32(Math.floor(t/4294967296)>>>0)},t.prototype.getUint64AsNumber=function(){var t=this.getUint32();return 4294967296*(this.getUint32()>>>0)+(t>>>0)},t.prototype.pushVaruint32=function(t){for(;;){if(!(t>>>7)){this.push(t);break}this.push(128|127&t),t>>>=7}},t.prototype.getVaruint32=function(){for(var t=0,e=0;;){var i=this.get();if(t|=(127&i)<<e,e+=7,!(128&i))break}return t>>>0},t.prototype.pushVarint32=function(t){this.pushVaruint32(t<<1^t>>31)},t.prototype.getVarint32=function(){var t=this.getVaruint32();return 1&t?~t>>1|2147483648:t>>>1},t.prototype.pushFloat32=function(t){this.pushArray(new Uint8Array(new Float32Array([t]).buffer))},t.prototype.getFloat32=function(){return new Float32Array(this.getUint8Array(4).slice().buffer)[0]},t.prototype.pushFloat64=function(t){this.pushArray(new Uint8Array(new Float64Array([t]).buffer))},t.prototype.getFloat64=function(){return new Float64Array(this.getUint8Array(8).slice().buffer)[0]},t.prototype.pushName=function(t){if("string"!=typeof t)throw new Error("Expected string containing name");if(!new RegExp(/^[.1-5a-z]{0,12}[.1-5a-j]?$/).test(t))throw new Error("Name should be less than 13 characters, or less than 14 if last character is between 1-5 or a-j, and only contain the following symbols .12345abcdefghijklmnopqrstuvwxyz");for(var e=function(t){return t>="a".charCodeAt(0)&&t<="z".charCodeAt(0)?t-"a".charCodeAt(0)+6:t>="1".charCodeAt(0)&&t<="5".charCodeAt(0)?t-"1".charCodeAt(0)+1:0},i=new Uint8Array(8),n=63,r=0;r<t.length;++r){var s=e(t.charCodeAt(r));n<5&&(s<<=1);for(var a=4;a>=0;--a)n>=0&&(i[Math.floor(n/8)]|=(s>>a&1)<<n%8,--n)}this.pushArray(i)},t.prototype.getName=function(){for(var t=this.getUint8Array(8),e="",i=63;i>=0;){for(var n=0,r=0;r<5;++r)i>=0&&(n=n<<1|t[Math.floor(i/8)]>>i%8&1,--i);e+=n>=6?String.fromCharCode(n+"a".charCodeAt(0)-6):n>=1?String.fromCharCode(n+"1".charCodeAt(0)-1):"."}for(;e.endsWith(".");)e=e.substr(0,e.length-1);return e},t.prototype.pushBytes=function(t){this.pushVaruint32(t.length),this.pushArray(t)},t.prototype.getBytes=function(){return this.getUint8Array(this.getVaruint32())},t.prototype.pushString=function(t){this.pushBytes(this.textEncoder.encode(t))},t.prototype.getString=function(){return this.textDecoder.decode(this.getBytes())},t.prototype.pushSymbolCode=function(t){if("string"!=typeof t)throw new Error("Expected string containing symbol_code");var e=[];for(e.push.apply(e,s([],r(this.textEncoder.encode(t))));e.length<8;)e.push(0);this.pushArray(e.slice(0,8))},t.prototype.getSymbolCode=function(){var t,e=this.getUint8Array(8);for(t=0;t<e.length&&e[t];++t);return this.textDecoder.decode(new Uint8Array(e.buffer,e.byteOffset,t))},t.prototype.pushSymbol=function(t){var e=t.name,i=t.precision;if(!/^[A-Z]{1,7}$/.test(e))throw new Error("Expected symbol to be A-Z and between one and seven characters");var n=[255&i];for(n.push.apply(n,s([],r(this.textEncoder.encode(e))));n.length<8;)n.push(0);this.pushArray(n.slice(0,8))},t.prototype.getSymbol=function(){var t,e=this.get(),i=this.getUint8Array(7);for(t=0;t<i.length&&i[t];++t);return{name:this.textDecoder.decode(new Uint8Array(i.buffer,i.byteOffset,t)),precision:e}},t.prototype.pushAsset=function(t){if("string"!=typeof t)throw new Error("Expected string containing asset");var e=0,i="",n=0;"-"===(t=t.trim())[e]&&(i+="-",++e);for(var r=!1;e<t.length&&t.charCodeAt(e)>="0".charCodeAt(0)&&t.charCodeAt(e)<="9".charCodeAt(0);)r=!0,i+=t[e],++e;if(!r)throw new Error("Asset must begin with a number");if("."===t[e])for(++e;e<t.length&&t.charCodeAt(e)>="0".charCodeAt(0)&&t.charCodeAt(e)<="9".charCodeAt(0);)i+=t[e],++n,++e;var s=t.substr(e).trim();this.pushArray(o.signedDecimalToBinary(8,i)),this.pushSymbol({name:s,precision:n})},t.prototype.getAsset=function(){var t=this.getUint8Array(8),e=this.getSymbol(),i=e.name,n=e.precision,r=o.signedBinaryToDecimal(t,n+1);return n&&(r=r.substr(0,r.length-n)+"."+r.substr(r.length-n)),r+" "+i},t.prototype.pushPublicKey=function(t){var e=o.stringToPublicKey(t);this.push(e.type),this.pushArray(e.data)},t.prototype.getPublicKey=function(){var t,e=this.get();if(e===o.KeyType.wa){var i=this.readPos;this.skip(34),this.skip(this.getVaruint32()),t=new Uint8Array(this.array.buffer,this.array.byteOffset+i,this.readPos-i)}else t=this.getUint8Array(o.publicKeyDataSize);return o.publicKeyToString({type:e,data:t})},t.prototype.pushPrivateKey=function(t){var e=o.stringToPrivateKey(t);this.push(e.type),this.pushArray(e.data)},t.prototype.getPrivateKey=function(){var t=this.get(),e=this.getUint8Array(o.privateKeyDataSize);return o.privateKeyToString({type:t,data:e})},t.prototype.pushSignature=function(t){var e=o.stringToSignature(t);this.push(e.type),this.pushArray(e.data)},t.prototype.getSignature=function(){var t,e=this.get();if(e===o.KeyType.wa){var i=this.readPos;this.skip(65),this.skip(this.getVaruint32()),this.skip(this.getVaruint32()),t=new Uint8Array(this.array.buffer,this.array.byteOffset+i,this.readPos-i)}else t=this.getUint8Array(o.signatureDataSize);return o.signatureToString({type:e,data:t})},t}();e.SerialBuffer=l;e.supportedAbiVersion=function(t){return t.startsWith("eosio::abi/1.")};var u=function(t){var e=Date.parse(t);if(Number.isNaN(e))throw new Error("Invalid time format");return e};e.dateToTimePoint=function(t){return Math.round(1e3*u(t+"Z"))};e.timePointToDate=function(t){var e=new Date(t/1e3).toISOString();return e.substr(0,e.length-1)};e.dateToTimePointSec=function(t){return Math.round(u(t+"Z")/1e3)};e.timePointSecToDate=function(t){var e=new Date(1e3*t).toISOString();return e.substr(0,e.length-1)};e.dateToBlockTimestamp=function(t){return Math.round((u(t+"Z")-9466848e5)/500)};e.blockTimestampToDate=function(t){var e=new Date(500*t+9466848e5).toISOString();return e.substr(0,e.length-1)};e.stringToSymbol=function(t){if("string"!=typeof t)throw new Error("Expected string containing symbol");var e=t.match(/^([0-9]+),([A-Z]+)$/);if(!e)throw new Error("Invalid symbol");return{name:e[2],precision:+e[1]}};e.symbolToString=function(t){var e=t.name;return t.precision+","+e};e.arrayToHex=function(t){var e,i,n="";try{for(var r=a(t),s=r.next();!s.done;s=r.next()){n+=("00"+s.value.toString(16)).slice(-2)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(e)throw e.error}}return n.toUpperCase()};function c(t,e){throw new Error("Don't know how to serialize "+this.name)}function d(t){throw new Error("Don't know how to deserialize "+this.name)}function f(t,e,i,n){var r,s;if(void 0===i&&(i=new h),void 0===n&&(n=!0),"object"!=typeof e)throw new Error("expected object containing data: "+JSON.stringify(e));this.base&&this.base.serialize(t,e,i,n);try{for(var o=a(this.fields),l=o.next();!l.done;l=o.next()){var u=l.value;if(u.name in e){if(i.skippedBinaryExtension)throw new Error("unexpected "+this.name+"."+u.name);u.type.serialize(t,e[u.name],i,n&&u===this.fields[this.fields.length-1])}else{if(!n||!u.type.extensionOf)throw new Error("missing "+this.name+"."+u.name+" (type="+u.type.name+")");i.skippedBinaryExtension=!0}}}catch(t){r={error:t}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(r)throw r.error}}}function p(t,e,i){var n,r,s;void 0===e&&(e=new h),void 0===i&&(i=!0),s=this.base?this.base.deserialize(t,e,i):{};try{for(var o=a(this.fields),l=o.next();!l.done;l=o.next()){var u=l.value;i&&u.type.extensionOf&&!t.haveReadData()?e.skippedBinaryExtension=!0:s[u.name]=u.type.deserialize(t,e,i)}}catch(t){n={error:t}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s}function g(t,e,i,n){if(!Array.isArray(e)||2!==e.length||"string"!=typeof e[0])throw new Error('expected variant: ["type", value]');var r=this.fields.findIndex((function(t){return t.name===e[0]}));if(r<0)throw new Error('type "'+e[0]+'" is not valid for variant');t.pushVaruint32(r),this.fields[r].type.serialize(t,e[1],i,n)}function m(t,e,i){var n=t.getVaruint32();if(n>=this.fields.length)throw new Error("type index "+n+" is not valid for variant");var r=this.fields[n];return[r.name,r.type.deserialize(t,e,i)]}function y(t,e,i,n){var r,s;t.pushVaruint32(e.length);try{for(var o=a(e),h=o.next();!h.done;h=o.next()){var l=h.value;this.arrayOf.serialize(t,l,i,!1)}}catch(t){r={error:t}}finally{try{h&&!h.done&&(s=o.return)&&s.call(o)}finally{if(r)throw r.error}}}function v(t,e,i){for(var n=t.getVaruint32(),r=[],s=0;s<n;++s)r.push(this.arrayOf.deserialize(t,e,!1));return r}function _(t,e,i,n){null==e?t.push(0):(t.push(1),this.optionalOf.serialize(t,e,i,n))}function x(t,e,i){return t.get()?this.optionalOf.deserialize(t,e,i):null}function w(t,e,i,n){this.extensionOf.serialize(t,e,i,n)}function b(t,e,i){return this.extensionOf.deserialize(t,e,i)}function T(t,e,i,n){var s,o,h=Object.entries(e);t.pushVaruint32(h.length);try{for(var l=a(h),u=l.next();!u.done;u=l.next()){var c=r(u.value,2),d=c[0],f=c[1],p=this.fields[0].type,g=this.fields[1].type;p.serialize(t,d,i,n),g.serialize(t,f,i,n)}}catch(t){s={error:t}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(s)throw s.error}}}function E(t,e,i){for(var n=t.getVaruint32(),r={},s=0;s<n;++s){var a=this.fields[0].type,o=this.fields[1].type;r[a.deserialize(t,e,i)]=o.deserialize(t,e,i)}return r}function A(t,e,i,n){var r=this;t.pushVaruint32(e.length),e.forEach((function(e){r.fields[0].type.serialize(t,e[0],i,n),r.fields[1].type.serialize(t,e[1],i,n)}))}function S(t,e,i){for(var n=[],r=t.getVaruint32(),s=0;s<r;++s)n.push(this.fields[0].type.deserialize(t,e,i)),n.push(this.fields[1].type.deserialize(t,e,i));return n}e.hexToUint8Array=function(t){if("string"!=typeof t)throw new Error("Expected string containing hex digits");if(t.length%2)throw new Error("Odd number of hex digits");for(var e=t.length/2,i=new Uint8Array(e),n=0;n<e;++n){var r=parseInt(t.substr(2*n,2),16);if(Number.isNaN(r))throw new Error("Expected hex string");i[n]=r}return i};var C=function(t){return n({name:"<missing name>",aliasOfName:"",arrayOf:null,optionalOf:null,extensionOf:null,baseName:"",base:null,fields:[],serialize:c,deserialize:d},t)},O=function(t,e){if(Number.isNaN(+t)||Number.isNaN(+e)||"number"!=typeof t&&"string"!=typeof t)throw new Error("Expected number");if(+t!=+e)throw new Error("Number is out of range");return+t};e.createInitialTypes=function(){var t=new Map(Object.entries({bool:C({name:"bool",serialize:function(t,e){if("boolean"!=typeof e&&("number"!=typeof e||1!==e&&0!==e))throw new Error("Expected boolean or number equal to 1 or 0");t.push(e?1:0)},deserialize:function(t){return!!t.get()}}),uint8:C({name:"uint8",serialize:function(t,e){t.push(O(e,255&e))},deserialize:function(t){return t.get()}}),int8:C({name:"int8",serialize:function(t,e){t.push(O(e,e<<24>>24))},deserialize:function(t){return t.get()<<24>>24}}),uint16:C({name:"uint16",serialize:function(t,e){t.pushUint16(O(e,65535&e))},deserialize:function(t){return t.getUint16()}}),int16:C({name:"int16",serialize:function(t,e){t.pushUint16(O(e,e<<16>>16))},deserialize:function(t){return t.getUint16()<<16>>16}}),uint32:C({name:"uint32",serialize:function(t,e){t.pushUint32(O(e,e>>>0))},deserialize:function(t){return t.getUint32()}}),uint64:C({name:"uint64",serialize:function(t,e){t.pushArray(o.decimalToBinary(8,""+e))},deserialize:function(t){return o.binaryToDecimal(t.getUint8Array(8))}}),int64:C({name:"int64",serialize:function(t,e){t.pushArray(o.signedDecimalToBinary(8,""+e))},deserialize:function(t){return o.signedBinaryToDecimal(t.getUint8Array(8))}}),int32:C({name:"int32",serialize:function(t,e){t.pushUint32(O(e,0|e))},deserialize:function(t){return 0|t.getUint32()}}),varuint32:C({name:"varuint32",serialize:function(t,e){t.pushVaruint32(O(e,e>>>0))},deserialize:function(t){return t.getVaruint32()}}),varint32:C({name:"varint32",serialize:function(t,e){t.pushVarint32(O(e,0|e))},deserialize:function(t){return t.getVarint32()}}),uint128:C({name:"uint128",serialize:function(t,e){t.pushArray(o.decimalToBinary(16,""+e))},deserialize:function(t){return o.binaryToDecimal(t.getUint8Array(16))}}),int128:C({name:"int128",serialize:function(t,e){t.pushArray(o.signedDecimalToBinary(16,""+e))},deserialize:function(t){return o.signedBinaryToDecimal(t.getUint8Array(16))}}),float32:C({name:"float32",serialize:function(t,e){t.pushFloat32(e)},deserialize:function(t){return t.getFloat32()}}),float64:C({name:"float64",serialize:function(t,e){t.pushFloat64(e)},deserialize:function(t){return t.getFloat64()}}),float128:C({name:"float128",serialize:function(t,i){t.pushUint8ArrayChecked(e.hexToUint8Array(i),16)},deserialize:function(t){return e.arrayToHex(t.getUint8Array(16))}}),bytes:C({name:"bytes",serialize:function(t,i){i instanceof Uint8Array||Array.isArray(i)?t.pushBytes(i):t.pushBytes(e.hexToUint8Array(i))},deserialize:function(t,i){return i&&i.options.bytesAsUint8Array?t.getBytes():e.arrayToHex(t.getBytes())}}),string:C({name:"string",serialize:function(t,e){t.pushString(e)},deserialize:function(t){return t.getString()}}),name:C({name:"name",serialize:function(t,e){t.pushName(e)},deserialize:function(t){return t.getName()}}),time_point:C({name:"time_point",serialize:function(t,i){t.pushNumberAsUint64(e.dateToTimePoint(i))},deserialize:function(t){return e.timePointToDate(t.getUint64AsNumber())}}),time_point_sec:C({name:"time_point_sec",serialize:function(t,i){t.pushUint32(e.dateToTimePointSec(i))},deserialize:function(t){return e.timePointSecToDate(t.getUint32())}}),block_timestamp_type:C({name:"block_timestamp_type",serialize:function(t,i){t.pushUint32(e.dateToBlockTimestamp(i))},deserialize:function(t){return e.blockTimestampToDate(t.getUint32())}}),symbol_code:C({name:"symbol_code",serialize:function(t,e){t.pushSymbolCode(e)},deserialize:function(t){return t.getSymbolCode()}}),symbol:C({name:"symbol",serialize:function(t,i){t.pushSymbol(e.stringToSymbol(i))},deserialize:function(t){return e.symbolToString(t.getSymbol())}}),asset:C({name:"asset",serialize:function(t,e){t.pushAsset(e)},deserialize:function(t){return t.getAsset()}}),checksum160:C({name:"checksum160",serialize:function(t,i){t.pushUint8ArrayChecked(e.hexToUint8Array(i),20)},deserialize:function(t){return e.arrayToHex(t.getUint8Array(20))}}),checksum256:C({name:"checksum256",serialize:function(t,i){t.pushUint8ArrayChecked(e.hexToUint8Array(i),32)},deserialize:function(t){return e.arrayToHex(t.getUint8Array(32))}}),checksum512:C({name:"checksum512",serialize:function(t,i){t.pushUint8ArrayChecked(e.hexToUint8Array(i),64)},deserialize:function(t){return e.arrayToHex(t.getUint8Array(64))}}),public_key:C({name:"public_key",serialize:function(t,e){t.pushPublicKey(e)},deserialize:function(t){return t.getPublicKey()}}),private_key:C({name:"private_key",serialize:function(t,e){t.pushPrivateKey(e)},deserialize:function(t){return t.getPrivateKey()}}),signature:C({name:"signature",serialize:function(t,e){t.pushSignature(e)},deserialize:function(t){return t.getSignature()}})}));return t.set("extended_asset",C({name:"extended_asset",baseName:"",fields:[{name:"quantity",typeName:"asset",type:t.get("asset")},{name:"contract",typeName:"name",type:t.get("name")}],serialize:f,deserialize:p})),t};e.createAbiTypes=function(){var t=e.createInitialTypes();return t.set("extensions_entry",C({name:"extensions_entry",baseName:"",fields:[{name:"tag",typeName:"uint16",type:null},{name:"value",typeName:"bytes",type:null}],serialize:f,deserialize:p})),t.set("type_def",C({name:"type_def",baseName:"",fields:[{name:"new_type_name",typeName:"string",type:null},{name:"type",typeName:"string",type:null}],serialize:f,deserialize:p})),t.set("field_def",C({name:"field_def",baseName:"",fields:[{name:"name",typeName:"string",type:null},{name:"type",typeName:"string",type:null}],serialize:f,deserialize:p})),t.set("struct_def",C({name:"struct_def",baseName:"",fields:[{name:"name",typeName:"string",type:null},{name:"base",typeName:"string",type:null},{name:"fields",typeName:"field_def[]",type:null}],serialize:f,deserialize:p})),t.set("action_def",C({name:"action_def",baseName:"",fields:[{name:"name",typeName:"name",type:null},{name:"type",typeName:"string",type:null},{name:"ricardian_contract",typeName:"string",type:null}],serialize:f,deserialize:p})),t.set("table_def",C({name:"table_def",baseName:"",fields:[{name:"name",typeName:"name",type:null},{name:"index_type",typeName:"string",type:null},{name:"key_names",typeName:"string[]",type:null},{name:"key_types",typeName:"string[]",type:null},{name:"type",typeName:"string",type:null}],serialize:f,deserialize:p})),t.set("clause_pair",C({name:"clause_pair",baseName:"",fields:[{name:"id",typeName:"string",type:null},{name:"body",typeName:"string",type:null}],serialize:f,deserialize:p})),t.set("error_message",C({name:"error_message",baseName:"",fields:[{name:"error_code",typeName:"uint64",type:null},{name:"error_msg",typeName:"string",type:null}],serialize:f,deserialize:p})),t.set("variant_def",C({name:"variant_def",baseName:"",fields:[{name:"name",typeName:"string",type:null},{name:"types",typeName:"string[]",type:null}],serialize:f,deserialize:p})),t.set("action_result",C({name:"action_result",baseName:"",fields:[{name:"name",typeName:"name",type:null},{name:"result_type",typeName:"string",type:null}],serialize:f,deserialize:p})),t.set("primary_key_index_def",C({name:"primary_key_index_def",baseName:"",fields:[{name:"name",typeName:"name",type:null},{name:"type",typeName:"string",type:null}],serialize:f,deserialize:p})),t.set("secondary_index_def",C({name:"secondary_index_def",baseName:"",fields:[{name:"type",typeName:"string",type:null}],serialize:f,deserialize:p})),t.set("secondary_indices",C({name:"secondary_indices",baseName:"",fields:[{name:"name",typeName:"name",type:null},{name:"secondary_index_def",typeName:"secondary_index_def",type:null}],serialize:T,deserialize:E})),t.set("kv_table_entry_def",C({name:"kv_table_entry_def",baseName:"",fields:[{name:"type",typeName:"string",type:null},{name:"primary_index",typeName:"primary_key_index_def",type:null},{name:"secondary_indices",typeName:"secondary_indices",type:null}],serialize:f,deserialize:p})),t.set("kv_table",C({name:"kv_table",baseName:"",fields:[{name:"name",typeName:"name",type:null},{name:"kv_table_entry_def",typeName:"kv_table_entry_def",type:null}],serialize:T,deserialize:E})),t.set("abi_def",C({name:"abi_def",baseName:"",fields:[{name:"version",typeName:"string",type:null},{name:"types",typeName:"type_def[]",type:null},{name:"structs",typeName:"struct_def[]",type:null},{name:"actions",typeName:"action_def[]",type:null},{name:"tables",typeName:"table_def[]",type:null},{name:"ricardian_clauses",typeName:"clause_pair[]",type:null},{name:"error_messages",typeName:"error_message[]",type:null},{name:"abi_extensions",typeName:"extensions_entry[]",type:null},{name:"variants",typeName:"variant_def[]$",type:null},{name:"action_results",typeName:"action_result[]$",type:null},{name:"kv_tables",typeName:"kv_table$",type:null}],serialize:f,deserialize:p})),t};e.createTransactionExtensionTypes=function(){var t=e.createInitialTypes();return t.set("resource_payer",C({name:"resource_payer",baseName:"",fields:[{name:"payer",typeName:"name",type:null},{name:"max_net_bytes",typeName:"uint64",type:null},{name:"max_cpu_us",typeName:"uint64",type:null},{name:"max_memory_bytes",typeName:"uint64",type:null}],serialize:f,deserialize:p})),t};e.createTransactionTypes=function(){var t=e.createInitialTypes();return t.set("permission_level",C({name:"permission_level",baseName:"",fields:[{name:"actor",typeName:"name",type:null},{name:"permission",typeName:"name",type:null}],serialize:f,deserialize:p})),t.set("action",C({name:"action",baseName:"",fields:[{name:"account",typeName:"name",type:null},{name:"name",typeName:"name",type:null},{name:"authorization",typeName:"permission_level[]",type:null},{name:"data",typeName:"bytes",type:null}],serialize:f,deserialize:p})),t.set("extension",C({name:"extension",baseName:"",fields:[{name:"type",typeName:"uint16",type:null},{name:"data",typeName:"bytes",type:null}],serialize:A,deserialize:S})),t.set("transaction_header",C({name:"transaction_header",baseName:"",fields:[{name:"expiration",typeName:"time_point_sec",type:null},{name:"ref_block_num",typeName:"uint16",type:null},{name:"ref_block_prefix",typeName:"uint32",type:null},{name:"max_net_usage_words",typeName:"varuint32",type:null},{name:"max_cpu_usage_ms",typeName:"uint8",type:null},{name:"delay_sec",typeName:"varuint32",type:null}],serialize:f,deserialize:p})),t.set("transaction",C({name:"transaction",baseName:"transaction_header",fields:[{name:"context_free_actions",typeName:"action[]",type:null},{name:"actions",typeName:"action[]",type:null},{name:"transaction_extensions",typeName:"extension",type:null}],serialize:f,deserialize:p})),t};e.getType=function(t,i){var n=t.get(i);if(n&&n.aliasOfName)return e.getType(t,n.aliasOfName);if(n)return n;if(i.endsWith("[]"))return C({name:i,arrayOf:e.getType(t,i.substr(0,i.length-2)),serialize:y,deserialize:v});if(i.endsWith("?"))return C({name:i,optionalOf:e.getType(t,i.substr(0,i.length-1)),serialize:_,deserialize:x});if(i.endsWith("$"))return C({name:i,extensionOf:e.getType(t,i.substr(0,i.length-1)),serialize:w,deserialize:b});throw new Error("Unknown type: "+i)};e.getTypesFromAbi=function(t,i){var n,s,o,h,l,u,c,d,y,v,_=new Map(t);if(i&&i.types)try{for(var x=a(i.types),w=x.next();!w.done;w=x.next()){var b=w.value,T=b.new_type_name,E=b.type;_.set(T,C({name:T,aliasOfName:E}))}}catch(t){n={error:t}}finally{try{w&&!w.done&&(s=x.return)&&s.call(x)}finally{if(n)throw n.error}}if(i&&i.structs)try{for(var A=a(i.structs),S=A.next();!S.done;S=A.next()){var O=S.value,P=O.name,R=O.base,M=O.fields;_.set(P,C({name:P,baseName:R,fields:M.map((function(t){return{name:t.name,typeName:t.type,type:null}})),serialize:f,deserialize:p}))}}catch(t){o={error:t}}finally{try{S&&!S.done&&(h=A.return)&&h.call(A)}finally{if(o)throw o.error}}if(i&&i.variants)try{for(var L=a(i.variants),I=L.next();!I.done;I=L.next()){var k=I.value,D=k.name,F=k.types;_.set(D,C({name:D,fields:F.map((function(t){return{name:t,typeName:t,type:null}})),serialize:g,deserialize:m}))}}catch(t){l={error:t}}finally{try{I&&!I.done&&(u=L.return)&&u.call(L)}finally{if(l)throw l.error}}try{for(var B=a(_),N=B.next();!N.done;N=B.next()){var G=r(N.value,2);G[0];(E=G[1]).baseName&&(E.base=e.getType(_,E.baseName));try{for(var Y=(y=void 0,a(E.fields)),z=Y.next();!z.done;z=Y.next()){var U=z.value;U.type=e.getType(_,U.typeName)}}catch(t){y={error:t}}finally{try{z&&!z.done&&(v=Y.return)&&v.call(Y)}finally{if(y)throw y.error}}}}catch(t){c={error:t}}finally{try{N&&!N.done&&(d=B.return)&&d.call(B)}finally{if(c)throw c.error}}return _};e.transactionHeader=function(t,i){var n,r=t.header?t.header.timestamp:t.timestamp,s=parseInt((n=t.id.substr(16,8)).substr(6,2)+n.substr(4,2)+n.substr(2,2)+n.substr(0,2),16);return{expiration:e.timePointSecToDate(e.dateToTimePointSec(r)+i),ref_block_num:65535&t.block_num,ref_block_prefix:s}};e.serializeActionData=function(t,i,n,r,s,a){var o=t.actions.get(n);if(!o)throw new Error("Unknown action "+n+" in contract "+i);var h=new l({textEncoder:s,textDecoder:a});return o.serialize(h,r),e.arrayToHex(h.asUint8Array())};e.serializeAction=function(t,i,n,r,s,a,o){return{account:i,name:n,authorization:r,data:e.serializeActionData(t,i,n,s,a,o)}};e.deserializeActionData=function(t,i,n,r,s,a){var o=t.actions.get(n);if("string"==typeof r&&(r=e.hexToUint8Array(r)),!o)throw new Error("Unknown action "+n+" in contract "+i);var h=new l({textDecoder:a,textEncoder:s});return h.pushArray(r),o.deserialize(h)};e.deserializeAction=function(t,i,n,r,s,a,o){return{account:i,name:n,authorization:r,data:e.deserializeActionData(t,i,n,s,a,o)}};e.serializeAnyvar=function(t,e){var i,n,s,a,o,h,l,u,c;null===e?(u=(i=r([M.null_t,e],2))[0],c=i[1]):"string"==typeof e?(u=(n=r([M.string,e],2))[0],c=n[1]):"number"==typeof e?(u=(s=r([M.int32,e],2))[0],c=s[1]):e instanceof Uint8Array?(u=(a=r([M.bytes,e],2))[0],c=a[1]):Array.isArray(e)?(u=(o=r([M.any_array,e],2))[0],c=o[1]):2===Object.keys(e).length&&e.hasOwnProperty("type")&&e.hasOwnProperty("value")?(u=(h=r([M[e.type],e.value],2))[0],c=h[1]):(u=(l=r([M.any_object,e],2))[0],c=l[1]),t.pushVaruint32(u.index),u.type.serialize(t,c)};e.deserializeAnyvar=function(t,e){var i=t.getVaruint32();if(i>=L.length)throw new Error("Tried to deserialize unknown anyvar type");var n=L[i],r=n.type.deserialize(t,e);return e&&e.options.useShortForm||n.useShortForm?r:{type:n.type.name,value:r}};e.deserializeAnyvarShort=function(t){return e.deserializeAnyvar(t,new h({useShortForm:!0}))};e.serializeAnyObject=function(t,i){var n,s,o=Object.entries(i);t.pushVaruint32(o.length);try{for(var h=a(o),l=h.next();!l.done;l=h.next()){var u=r(l.value,2),c=u[0],d=u[1];t.pushString(c),e.serializeAnyvar(t,d)}}catch(t){n={error:t}}finally{try{l&&!l.done&&(s=h.return)&&s.call(h)}finally{if(n)throw n.error}}};e.deserializeAnyObject=function(t,i){for(var n=t.getVaruint32(),r={},s=0;s<n;++s){var a=t.getString();if(a in r){for(var o=1;a+"_"+o in r;)++o;a=a+"_"+o}r[a]=e.deserializeAnyvar(t,i)}return r};e.serializeAnyArray=function(t,i){var n,r;t.pushVaruint32(i.length);try{for(var s=a(i),o=s.next();!o.done;o=s.next()){var h=o.value;e.serializeAnyvar(t,h)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}};e.deserializeAnyArray=function(t,i){for(var n=t.getVaruint32(),r=[],s=0;s<n;++s)r.push(e.deserializeAnyvar(t,i));return r};var P,R=((P=e.createInitialTypes()).set("null_t",C({name:"null_t",serialize:function(t,e){},deserialize:function(t,e){}})),P.set("any_object",C({name:"any_object",serialize:e.serializeAnyObject,deserialize:e.deserializeAnyObject})),P.set("any_array",C({name:"any_array",serialize:e.serializeAnyArray,deserialize:e.deserializeAnyArray})),P),M={null_t:{index:0,useShortForm:!0,type:R.get("null_t")},int64:{index:1,useShortForm:!1,type:R.get("int64")},uint64:{index:2,useShortForm:!1,type:R.get("uint64")},int32:{index:3,useShortForm:!0,type:R.get("int32")},uint32:{index:4,useShortForm:!1,type:R.get("uint32")},int16:{index:5,useShortForm:!1,type:R.get("int16")},uint16:{index:6,useShortForm:!1,type:R.get("uint16")},int8:{index:7,useShortForm:!1,type:R.get("int8")},uint8:{index:8,useShortForm:!1,type:R.get("uint8")},time_point:{index:9,useShortForm:!1,type:R.get("time_point")},checksum256:{index:10,useShortForm:!1,type:R.get("checksum256")},float64:{index:11,useShortForm:!1,type:R.get("float64")},string:{index:12,useShortForm:!0,type:R.get("string")},any_object:{index:13,useShortForm:!0,type:R.get("any_object")},any_array:{index:14,useShortForm:!0,type:R.get("any_array")},bytes:{index:15,useShortForm:!1,type:R.get("bytes")},symbol:{index:16,useShortForm:!1,type:R.get("symbol")},symbol_code:{index:17,useShortForm:!1,type:R.get("symbol_code")},asset:{index:18,useShortForm:!1,type:R.get("asset")}},L=[M.null_t,M.int64,M.uint64,M.int32,M.uint32,M.int16,M.uint16,M.int8,M.uint8,M.time_point,M.checksum256,M.float64,M.string,M.any_object,M.any_array,M.bytes,M.symbol,M.symbol_code,M.asset];e.serializeQuery=function(t,i){var n,s,o,h,l,u,c,d;if("string"==typeof i?u=i:Array.isArray(i)&&2===i.length?(u=(n=r(i,2))[0],d=n[1]):Array.isArray(i)&&3===i.length?(u=(s=r(i,3))[0],c=s[1],d=s[2]):(u=(o=r([i.method,i.arg,i.filter],3))[0],c=o[1],d=o[2]),t.pushString(u),void 0===c?t.push(0):(t.push(1),e.serializeAnyvar(t,c)),void 0===d)t.push(0);else{t.pushVaruint32(d.length);try{for(var f=a(d),p=f.next();!p.done;p=f.next()){var g=p.value;e.serializeQuery(t,g)}}catch(t){h={error:t}}finally{try{p&&!p.done&&(l=f.return)&&l.call(f)}finally{if(h)throw h.error}}}}},function(t,e,i){"use strict";var n=i(6).rotr32;function r(t,e,i){return t&e^~t&i}function s(t,e,i){return t&e^t&i^e&i}function a(t,e,i){return t^e^i}e.ft_1=function(t,e,i,n){return 0===t?r(e,i,n):1===t||3===t?a(e,i,n):2===t?s(e,i,n):void 0},e.ch32=r,e.maj32=s,e.p32=a,e.s0_256=function(t){return n(t,2)^n(t,13)^n(t,22)},e.s1_256=function(t){return n(t,6)^n(t,11)^n(t,25)},e.g0_256=function(t){return n(t,7)^n(t,18)^t>>>3},e.g1_256=function(t){return n(t,17)^n(t,19)^t>>>10}},function(t,e,i){"use strict";var n=i(6),r=i(17),s=i(45),a=i(16),o=n.sum32,h=n.sum32_4,l=n.sum32_5,u=s.ch32,c=s.maj32,d=s.s0_256,f=s.s1_256,p=s.g0_256,g=s.g1_256,m=r.BlockHash,y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function v(){if(!(this instanceof v))return new v;m.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=y,this.W=new Array(64)}n.inherits(v,m),t.exports=v,v.blockSize=512,v.outSize=256,v.hmacStrength=192,v.padLength=64,v.prototype._update=function(t,e){for(var i=this.W,n=0;n<16;n++)i[n]=t[e+n];for(;n<i.length;n++)i[n]=h(g(i[n-2]),i[n-7],p(i[n-15]),i[n-16]);var r=this.h[0],s=this.h[1],m=this.h[2],y=this.h[3],v=this.h[4],_=this.h[5],x=this.h[6],w=this.h[7];for(a(this.k.length===i.length),n=0;n<i.length;n++){var b=l(w,f(v),u(v,_,x),this.k[n],i[n]),T=o(d(r),c(r,s,m));w=x,x=_,_=v,v=o(y,b),y=m,m=s,s=r,r=o(b,T)}this.h[0]=o(this.h[0],r),this.h[1]=o(this.h[1],s),this.h[2]=o(this.h[2],m),this.h[3]=o(this.h[3],y),this.h[4]=o(this.h[4],v),this.h[5]=o(this.h[5],_),this.h[6]=o(this.h[6],x),this.h[7]=o(this.h[7],w)},v.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(t,e,i){"use strict";var n=i(6),r=i(17),s=i(16),a=n.rotr64_hi,o=n.rotr64_lo,h=n.shr64_hi,l=n.shr64_lo,u=n.sum64,c=n.sum64_hi,d=n.sum64_lo,f=n.sum64_4_hi,p=n.sum64_4_lo,g=n.sum64_5_hi,m=n.sum64_5_lo,y=r.BlockHash,v=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function _(){if(!(this instanceof _))return new _;y.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=v,this.W=new Array(160)}function x(t,e,i,n,r){var s=t&i^~t&r;return s<0&&(s+=4294967296),s}function w(t,e,i,n,r,s){var a=e&n^~e&s;return a<0&&(a+=4294967296),a}function b(t,e,i,n,r){var s=t&i^t&r^i&r;return s<0&&(s+=4294967296),s}function T(t,e,i,n,r,s){var a=e&n^e&s^n&s;return a<0&&(a+=4294967296),a}function E(t,e){var i=a(t,e,28)^a(e,t,2)^a(e,t,7);return i<0&&(i+=4294967296),i}function A(t,e){var i=o(t,e,28)^o(e,t,2)^o(e,t,7);return i<0&&(i+=4294967296),i}function S(t,e){var i=a(t,e,14)^a(t,e,18)^a(e,t,9);return i<0&&(i+=4294967296),i}function C(t,e){var i=o(t,e,14)^o(t,e,18)^o(e,t,9);return i<0&&(i+=4294967296),i}function O(t,e){var i=a(t,e,1)^a(t,e,8)^h(t,e,7);return i<0&&(i+=4294967296),i}function P(t,e){var i=o(t,e,1)^o(t,e,8)^l(t,e,7);return i<0&&(i+=4294967296),i}function R(t,e){var i=a(t,e,19)^a(e,t,29)^h(t,e,6);return i<0&&(i+=4294967296),i}function M(t,e){var i=o(t,e,19)^o(e,t,29)^l(t,e,6);return i<0&&(i+=4294967296),i}n.inherits(_,y),t.exports=_,_.blockSize=1024,_.outSize=512,_.hmacStrength=192,_.padLength=128,_.prototype._prepareBlock=function(t,e){for(var i=this.W,n=0;n<32;n++)i[n]=t[e+n];for(;n<i.length;n+=2){var r=R(i[n-4],i[n-3]),s=M(i[n-4],i[n-3]),a=i[n-14],o=i[n-13],h=O(i[n-30],i[n-29]),l=P(i[n-30],i[n-29]),u=i[n-32],c=i[n-31];i[n]=f(r,s,a,o,h,l,u,c),i[n+1]=p(r,s,a,o,h,l,u,c)}},_.prototype._update=function(t,e){this._prepareBlock(t,e);var i=this.W,n=this.h[0],r=this.h[1],a=this.h[2],o=this.h[3],h=this.h[4],l=this.h[5],f=this.h[6],p=this.h[7],y=this.h[8],v=this.h[9],_=this.h[10],O=this.h[11],P=this.h[12],R=this.h[13],M=this.h[14],L=this.h[15];s(this.k.length===i.length);for(var I=0;I<i.length;I+=2){var k=M,D=L,F=S(y,v),B=C(y,v),N=x(y,v,_,O,P),G=w(y,v,_,O,P,R),Y=this.k[I],z=this.k[I+1],U=i[I],X=i[I+1],V=g(k,D,F,B,N,G,Y,z,U,X),H=m(k,D,F,B,N,G,Y,z,U,X);k=E(n,r),D=A(n,r),F=b(n,r,a,o,h),B=T(n,r,a,o,h,l);var j=c(k,D,F,B),W=d(k,D,F,B);M=P,L=R,P=_,R=O,_=y,O=v,y=c(f,p,V,H),v=d(p,p,V,H),f=h,p=l,h=a,l=o,a=n,o=r,n=c(V,H,j,W),r=d(V,H,j,W)}u(this.h,0,n,r),u(this.h,2,a,o),u(this.h,4,h,l),u(this.h,6,f,p),u(this.h,8,y,v),u(this.h,10,_,O),u(this.h,12,P,R),u(this.h,14,M,L)},_.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.RpcError=void 0;var s=function(t){function e(i){var n=this;return i.error&&i.error.details&&i.error.details.length&&i.error.details[0].message?(n=t.call(this,i.error.details[0].message)||this).details=i.error.details:i.processed&&i.processed.except&&i.processed.except.message?(n=t.call(this,i.processed.except.message)||this).details=i.processed.except:i.result&&i.result.except&&i.result.except.message?(n=t.call(this,i.result.except.message)||this).details=i.result.except:n=t.call(this,i.message)||this,Object.setPrototypeOf(n,e.prototype),n.json=i,n}return r(e,t),e}(Error);e.RpcError=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(30);class r extends n.ActionGenerator{constructor(t,e){super(t),this.api=e,this.config=e.getConfig()}async createcol(t,e,i,r,s,a,o,h){return super.createcol(t,e,i,r,s,a,o,n.toAttributeMap(h,(await this.config).collection_format))}async createtempl(t,e,i,r,s,a,o,h){const l=await this.api.getSchema(i,r),u=n.toAttributeMap(h,l.format);return super.createtempl(t,e,i,r,s,a,o,u)}async mintasset(t,e,i,r,s,a,o,h,l){const u=await this.api.getSchema(i,r),c=n.toAttributeMap(o,u.format),d=n.toAttributeMap(h,u.format);return super.mintasset(t,e,i,r,s,a,c,d,l)}async setassetdata(t,e,i,r,s){const a=await this.api.getAsset(r),o=n.toAttributeMap(s,a.schema.format);return super.setassetdata(t,e,i,r,o)}async setcoldata(t,e,i){const r=n.toAttributeMap(i,(await this.config).collection_format);return super.setcoldata(t,e,r)}}e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(30);class r extends n.ActionGenerator{constructor(t){super(t.contract),this.api=t}async createcol(t,e,i,r,s,a,o,h){const l=await this.api.config();return super.createcol(t,e,i,r,s,a,o,n.toAttributeMap(h,l.collection_format))}async createtempl(t,e,i,r,s,a,o,h){const l=await this.api.getSchema(i,r),u=n.toAttributeMap(h,await l.rawFormat());return super.createtempl(t,e,i,r,s,a,o,u)}async mintasset(t,e,i,r,s,a,o,h,l){const u=await this.api.getTemplate(i,s),c=n.toAttributeMap(o,await(await u.schema()).rawFormat()),d=n.toAttributeMap(h,await(await u.schema()).rawFormat());return super.mintasset(t,e,i,r,s,a,c,d,l)}async setassetdata(t,e,i,r,s){const a=await this.api.getAsset(i,r),o=await a.schema(),h=n.toAttributeMap(s,await o.rawFormat());return super.setassetdata(t,e,i,r,h)}async setcoldata(t,e,i){const r=n.toAttributeMap(i,(await this.api.config()).collection_format);return super.setcoldata(t,e,r)}}e.default=r},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(22),s=n(i(33)),a=n(i(35)),o=n(i(54));e.default=class{constructor(t,e,i,n,r,h,l,u=!0){this.api=t,this.owner=e,this.id=i,this._data=new Promise(async(r,s)=>{if(n)r(n);else try{r(await t.queue.fetchAsset(e,i,u))}catch(t){s(t)}}),this._template=new Promise(async(e,i)=>{if(l)e(l);else try{const i=await this._data;if(Number(i.template_id)<0)return e(null);e(new o.default(t,i.collection_name,i.template_id,void 0,void 0,u))}catch(t){i(t)}}),this._collection=new Promise(async(e,i)=>{if(r)e(r);else try{const i=await this._data;e(new s.default(t,i.collection_name,void 0,u))}catch(t){i(t)}}),this._schema=new Promise(async(e,i)=>{if(h)e(h);else try{const i=await this._data;e(new a.default(t,i.collection_name,i.schema_name,void 0,u))}catch(t){i(t)}})}async template(){return await this._template}async collection(){return await this._collection}async schema(){return await this._schema}async backedTokens(){return(await this._data).backed_tokens}async immutableData(){const t=await this.schema(),e=await this._data;return r.deserialize(e.immutable_serialized_data,await t.format())}async mutableData(){const t=await this.schema(),e=await this._data;return r.deserialize(e.mutable_serialized_data,await t.format())}async data(){const t=await this.mutableData(),e=await this.immutableData(),i=await this.template(),n=i?await i.immutableData():{};return Object.assign({},t,e,n)}async toObject(){const t=await this.template(),e=await this.collection(),i=await this.schema();return{asset_id:this.id,collection:await e.toObject(),schema:await i.toObject(),template:t?await t.toObject():null,backedTokens:await this.backedTokens(),immutableData:await this.immutableData(),mutableData:await this.mutableData(),data:await this.data()}}}},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(i(31)),s=i(13);e.default=class{constructor(t){this.attributes=t,this.reserved=4}deserialize(t,e=!1){const i={};for(;t.position<t.data.length;){const n=s.varint_decode(t);if(n.equals(0))break;const r=this.getAttribute(n.toJSNumber(),!e);r&&(i[r.name]=r.value.deserialize(t))}return i}serialize(t){const e=[];for(let i=0;i<this.attributes.length;i++){const n=this.attributes[i];void 0!==t[n.name]&&(e.push(s.varint_encode(i+this.reserved)),e.push(n.value.serialize(t[n.name])))}return e.push(s.varint_encode(0)),s.concat_byte_arrays(e)}getAttribute(t,e=!0){const i=t-this.reserved;if(!(i>=this.attributes.length))return this.attributes[Number(i)];if(e)throw new r.default("attribute does not exists")}}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(22),s=n(i(35));e.default=class{constructor(t,e,i,n,r,a=!0){this.api=t,this.collection=e,this.id=i,this._data=new Promise(async(r,s)=>{if(n)r(n);else try{r(await t.queue.fetchTemplate(e,i,a))}catch(t){s(t)}}),this._schema=new Promise(async(t,i)=>{if(r)t(r);else try{const i=await this._data;t(new s.default(this.api,e,i.schema_name,void 0,a))}catch(t){i(t)}})}async schema(){return await this._schema}async immutableData(){const t=await this._schema;return r.deserialize((await this._data).immutable_serialized_data,await t.format())}async isTransferable(){return(await this._data).transferable}async isBurnable(){return(await this._data).burnable}async maxSupply(){return(await this._data).max_supply}async circulation(){return(await this._data).issued_supply}async toObject(){return{collection_name:this.collection,template_id:this.id,schema:await(await this.schema()).toObject(),immutableData:await this.immutableData(),transferable:await this.isTransferable(),burnable:await this.isBurnable(),maxSupply:await this.maxSupply(),circulation:await this.circulation()}}}},function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},function(t,e,i){(function(t){e.fetch=o(t.fetch)&&o(t.ReadableStream),e.writableStream=o(t.WritableStream),e.abortController=o(t.AbortController),e.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),e.blobConstructor=!0}catch(t){}var i;function n(){if(void 0!==i)return i;if(t.XMLHttpRequest){i=new t.XMLHttpRequest;try{i.open("GET",t.XDomainRequest?"/":"https://example.com")}catch(t){i=null}}else i=null;return i}function r(t){var e=n();if(!e)return!1;try{return e.responseType=t,e.responseType===t}catch(t){}return!1}var s=void 0!==t.ArrayBuffer,a=s&&o(t.ArrayBuffer.prototype.slice);function o(t){return"function"==typeof t}e.arraybuffer=e.fetch||s&&r("arraybuffer"),e.msstream=!e.fetch&&a&&r("ms-stream"),e.mozchunkedarraybuffer=!e.fetch&&s&&r("moz-chunked-arraybuffer"),e.overrideMimeType=e.fetch||!!n()&&o(n().overrideMimeType),e.vbArray=o(t.VBArray),i=null}).call(this,i(3))},function(t,e,i){(function(t,n,r){var s=i(56),a=i(9),o=i(58),h=e.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},l=e.IncomingMessage=function(e,i,a,h){var l=this;if(o.Readable.call(l),l._mode=a,l.headers={},l.rawHeaders=[],l.trailers={},l.rawTrailers=[],l.on("end",(function(){t.nextTick((function(){l.emit("close")}))})),"fetch"===a){if(l._fetchResponse=i,l.url=i.url,l.statusCode=i.status,l.statusMessage=i.statusText,i.headers.forEach((function(t,e){l.headers[e.toLowerCase()]=t,l.rawHeaders.push(e,t)})),s.writableStream){var u=new WritableStream({write:function(t){return new Promise((function(e,i){l._destroyed?i():l.push(new n(t))?e():l._resumeFetch=e}))},close:function(){r.clearTimeout(h),l._destroyed||l.push(null)},abort:function(t){l._destroyed||l.emit("error",t)}});try{return void i.body.pipeTo(u).catch((function(t){r.clearTimeout(h),l._destroyed||l.emit("error",t)}))}catch(t){}}var c=i.body.getReader();!function t(){c.read().then((function(e){if(!l._destroyed){if(e.done)return r.clearTimeout(h),void l.push(null);l.push(new n(e.value)),t()}})).catch((function(t){r.clearTimeout(h),l._destroyed||l.emit("error",t)}))}()}else{if(l._xhr=e,l._pos=0,l.url=e.responseURL,l.statusCode=e.status,l.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach((function(t){var e=t.match(/^([^:]+):\s*(.*)/);if(e){var i=e[1].toLowerCase();"set-cookie"===i?(void 0===l.headers[i]&&(l.headers[i]=[]),l.headers[i].push(e[2])):void 0!==l.headers[i]?l.headers[i]+=", "+e[2]:l.headers[i]=e[2],l.rawHeaders.push(e[1],e[2])}})),l._charset="x-user-defined",!s.overrideMimeType){var d=l.rawHeaders["mime-type"];if(d){var f=d.match(/;\s*charset=([^;])(;|$)/);f&&(l._charset=f[1].toLowerCase())}l._charset||(l._charset="utf-8")}}};a(l,o.Readable),l.prototype._read=function(){var t=this._resumeFetch;t&&(this._resumeFetch=null,t())},l.prototype._onXHRProgress=function(){var t=this,e=t._xhr,i=null;switch(t._mode){case"text:vbarray":if(e.readyState!==h.DONE)break;try{i=new r.VBArray(e.responseBody).toArray()}catch(t){}if(null!==i){t.push(new n(i));break}case"text":try{i=e.responseText}catch(e){t._mode="text:vbarray";break}if(i.length>t._pos){var s=i.substr(t._pos);if("x-user-defined"===t._charset){for(var a=new n(s.length),o=0;o<s.length;o++)a[o]=255&s.charCodeAt(o);t.push(a)}else t.push(s,t._charset);t._pos=i.length}break;case"arraybuffer":if(e.readyState!==h.DONE||!e.response)break;i=e.response,t.push(new n(new Uint8Array(i)));break;case"moz-chunked-arraybuffer":if(i=e.response,e.readyState!==h.LOADING||!i)break;t.push(new n(new Uint8Array(i)));break;case"ms-stream":if(i=e.response,e.readyState!==h.LOADING)break;var l=new r.MSStreamReader;l.onprogress=function(){l.result.byteLength>t._pos&&(t.push(new n(new Uint8Array(l.result.slice(t._pos)))),t._pos=l.result.byteLength)},l.onload=function(){t.push(null)},l.readAsArrayBuffer(i)}t._xhr.readyState===h.DONE&&"ms-stream"!==t._mode&&t.push(null)}}).call(this,i(14),i(18).Buffer,i(3))},function(t,e,i){(e=t.exports=i(59)).Stream=e,e.Readable=e,e.Writable=i(63),e.Duplex=i(15),e.Transform=i(65),e.PassThrough=i(121)},function(t,e,i){"use strict";(function(e,n){var r=i(24);t.exports=_;var s,a=i(55);_.ReadableState=v;i(60).EventEmitter;var o=function(t,e){return t.listeners(e).length},h=i(61),l=i(25).Buffer,u=e.Uint8Array||function(){};var c=i(19);c.inherits=i(9);var d=i(115),f=void 0;f=d&&d.debuglog?d.debuglog("stream"):function(){};var p,g=i(116),m=i(62);c.inherits(_,h);var y=["error","close","destroy","pause","resume"];function v(t,e){t=t||{};var n=e instanceof(s=s||i(15));this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,a=t.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(a||0===a)?a:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=i(64).StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function _(t){if(s=s||i(15),!(this instanceof _))return new _(t);this._readableState=new v(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),h.call(this)}function x(t,e,i,n,r){var s,a=t._readableState;null===e?(a.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,T(t)}(t,a)):(r||(s=function(t,e){var i;n=e,l.isBuffer(n)||n instanceof u||"string"==typeof e||void 0===e||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk"));var n;return i}(a,e)),s?t.emit("error",s):a.objectMode||e&&e.length>0?("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===l.prototype||(e=function(t){return l.from(t)}(e)),n?a.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):w(t,a,e,!0):a.ended?t.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!i?(e=a.decoder.write(e),a.objectMode||0!==e.length?w(t,a,e,!1):A(t,a)):w(t,a,e,!1))):n||(a.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(a)}function w(t,e,i,n){e.flowing&&0===e.length&&!e.sync?(t.emit("data",i),t.read(0)):(e.length+=e.objectMode?1:i.length,n?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&T(t)),A(t,e)}Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),_.prototype.destroy=m.destroy,_.prototype._undestroy=m.undestroy,_.prototype._destroy=function(t,e){this.push(null),e(t)},_.prototype.push=function(t,e){var i,n=this._readableState;return n.objectMode?i=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=l.from(t,e),e=""),i=!0),x(this,t,e,!1,i)},_.prototype.unshift=function(t){return x(this,t,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(t){return p||(p=i(64).StringDecoder),this._readableState.decoder=new p(t),this._readableState.encoding=t,this};function b(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=8388608?t=8388608:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function T(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(f("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?r.nextTick(E,t):E(t))}function E(t){f("emit readable"),t.emit("readable"),P(t)}function A(t,e){e.readingMore||(e.readingMore=!0,r.nextTick(S,t,e))}function S(t,e){for(var i=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(f("maybeReadMore read 0"),t.read(0),i!==e.length);)i=e.length;e.readingMore=!1}function C(t){f("readable nexttick read 0"),t.read(0)}function O(t,e){e.reading||(f("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),P(t),e.flowing&&!e.reading&&t.read(0)}function P(t){var e=t._readableState;for(f("flow",e.flowing);e.flowing&&null!==t.read(););}function R(t,e){return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):i=function(t,e,i){var n;t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):n=t===e.head.data.length?e.shift():i?function(t,e){var i=e.head,n=1,r=i.data;t-=r.length;for(;i=i.next;){var s=i.data,a=t>s.length?s.length:t;if(a===s.length?r+=s:r+=s.slice(0,t),0===(t-=a)){a===s.length?(++n,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=s.slice(a));break}++n}return e.length-=n,r}(t,e):function(t,e){var i=l.allocUnsafe(t),n=e.head,r=1;n.data.copy(i),t-=n.data.length;for(;n=n.next;){var s=n.data,a=t>s.length?s.length:t;if(s.copy(i,i.length-t,0,a),0===(t-=a)){a===s.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=s.slice(a));break}++r}return e.length-=r,i}(t,e);return n}(t,e.buffer,e.decoder),i);var i}function M(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,r.nextTick(L,e,t))}function L(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function I(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1}_.prototype.read=function(t){f("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return f("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?M(this):T(this),null;if(0===(t=b(t,e))&&e.ended)return 0===e.length&&M(this),null;var n,r=e.needReadable;return f("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&f("length less than watermark",r=!0),e.ended||e.reading?f("reading or ended",r=!1):r&&(f("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=b(i,e))),null===(n=t>0?R(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&M(this)),null!==n&&this.emit("data",n),n},_.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(t,e){var i=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=t;break;case 1:s.pipes=[s.pipes,t];break;default:s.pipes.push(t)}s.pipesCount+=1,f("pipe count=%d opts=%j",s.pipesCount,e);var h=(!e||!1!==e.end)&&t!==n.stdout&&t!==n.stderr?u:_;function l(e,n){f("onunpipe"),e===i&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,f("cleanup"),t.removeListener("close",y),t.removeListener("finish",v),t.removeListener("drain",c),t.removeListener("error",m),t.removeListener("unpipe",l),i.removeListener("end",u),i.removeListener("end",_),i.removeListener("data",g),d=!0,!s.awaitDrain||t._writableState&&!t._writableState.needDrain||c())}function u(){f("onend"),t.end()}s.endEmitted?r.nextTick(h):i.once("end",h),t.on("unpipe",l);var c=function(t){return function(){var e=t._readableState;f("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,P(t))}}(i);t.on("drain",c);var d=!1;var p=!1;function g(e){f("ondata"),p=!1,!1!==t.write(e)||p||((1===s.pipesCount&&s.pipes===t||s.pipesCount>1&&-1!==I(s.pipes,t))&&!d&&(f("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,p=!0),i.pause())}function m(e){f("onerror",e),_(),t.removeListener("error",m),0===o(t,"error")&&t.emit("error",e)}function y(){t.removeListener("finish",v),_()}function v(){f("onfinish"),t.removeListener("close",y),_()}function _(){f("unpipe"),i.unpipe(t)}return i.on("data",g),function(t,e,i){if("function"==typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events[e]?a(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]:t.on(e,i)}(t,"error",m),t.once("close",y),t.once("finish",v),t.emit("pipe",i),s.flowing||(f("pipe resume"),i.resume()),t},_.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i)),this;if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<r;s++)n[s].emit("unpipe",this,i);return this}var a=I(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i)),this},_.prototype.on=function(t,e){var i=h.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&T(this):r.nextTick(C,this))}return i},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var t=this._readableState;return t.flowing||(f("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,r.nextTick(O,t,e))}(this,t)),this},_.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(t){var e=this,i=this._readableState,n=!1;for(var r in t.on("end",(function(){if(f("wrapped end"),i.decoder&&!i.ended){var t=i.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(r){(f("wrapped data"),i.decoder&&(r=i.decoder.write(r)),i.objectMode&&null==r)||(i.objectMode||r&&r.length)&&(e.push(r)||(n=!0,t.pause()))})),t)void 0===this[r]&&"function"==typeof t[r]&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));for(var s=0;s<y.length;s++)t.on(y[s],this.emit.bind(this,y[s]));return this._read=function(e){f("wrapped _read",e),n&&(n=!1,t.resume())},this},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=R}).call(this,i(3),i(14))},function(t,e,i){"use strict";var n,r="object"==typeof Reflect?Reflect:null,s=r&&"function"==typeof r.apply?r.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};n=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function o(){o.init.call(this)}t.exports=o,t.exports.once=function(t,e){return new Promise((function(i,n){function r(i){t.removeListener(e,s),n(i)}function s(){"function"==typeof t.removeListener&&t.removeListener("error",r),i([].slice.call(arguments))}y(t,e,s,{once:!0}),"error"!==e&&function(t,e,i){"function"==typeof t.on&&y(t,"error",e,i)}(t,r,{once:!0})}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var h=10;function l(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function u(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function c(t,e,i,n){var r,s,a,o;if(l(i),void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),s=t._events),a=s[e]),void 0===a)a=s[e]=i,++t._eventsCount;else if("function"==typeof a?a=s[e]=n?[i,a]:[a,i]:n?a.unshift(i):a.push(i),(r=u(t))>0&&a.length>r&&!a.warned){a.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=t,h.type=e,h.count=a.length,o=h,console&&console.warn&&console.warn(o)}return t}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(t,e,i){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},r=d.bind(n);return r.listener=i,n.wrapFn=r,r}function p(t,e,i){var n=t._events;if(void 0===n)return[];var r=n[e];return void 0===r?[]:"function"==typeof r?i?[r.listener||r]:[r]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(r):m(r,r.length)}function g(t){var e=this._events;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function m(t,e){for(var i=new Array(e),n=0;n<e;++n)i[n]=t[n];return i}function y(t,e,i,n){if("function"==typeof t.on)n.once?t.once(e,i):t.on(e,i);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function r(s){n.once&&t.removeEventListener(e,r),i(s)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return h},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");h=t}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var n="error"===t,r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var h=r[t];if(void 0===h)return!1;if("function"==typeof h)s(h,this,e);else{var l=h.length,u=m(h,l);for(i=0;i<l;++i)s(u[i],this,e)}return!0},o.prototype.addListener=function(t,e){return c(this,t,e,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(t,e){return c(this,t,e,!0)},o.prototype.once=function(t,e){return l(e),this.on(t,f(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){return l(e),this.prependListener(t,f(this,t,e)),this},o.prototype.removeListener=function(t,e){var i,n,r,s,a;if(l(e),void 0===(n=this._events))return this;if(void 0===(i=n[t]))return this;if(i===e||i.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(r=-1,s=i.length-1;s>=0;s--)if(i[s]===e||i[s].listener===e){a=i[s].listener,r=s;break}if(r<0)return this;0===r?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,r),1===i.length&&(n[t]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",t,a||e)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(t){var e,i,n;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0===arguments.length){var r,s=Object.keys(i);for(n=0;n<s.length;++n)"removeListener"!==(r=s[n])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},o.prototype.listeners=function(t){return p(this,t,!0)},o.prototype.rawListeners=function(t){return p(this,t,!1)},o.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):g.call(t,e)},o.prototype.listenerCount=g,o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(t,e,i){t.exports=i(60).EventEmitter},function(t,e,i){"use strict";var n=i(24);function r(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var i=this,s=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return s||a?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||n.nextTick(r,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(n.nextTick(r,i,t),i._writableState&&(i._writableState.errorEmitted=!0)):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,i){"use strict";(function(e,n,r){var s=i(24);function a(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,i){var n=t.entry;t.entry=null;for(;n;){var r=n.callback;e.pendingcb--,r(i),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=v;var o,h=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?n:s.nextTick;v.WritableState=y;var l=i(19);l.inherits=i(9);var u={deprecate:i(120)},c=i(61),d=i(25).Buffer,f=r.Uint8Array||function(){};var p,g=i(62);function m(){}function y(t,e){o=o||i(15),t=t||{};var n=e instanceof o;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,l=t.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(l||0===l)?l:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var c=!1===t.decodeStrings;this.decodeStrings=!c,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var i=t._writableState,n=i.sync,r=i.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(i),e)!function(t,e,i,n,r){--e.pendingcb,i?(s.nextTick(r,n),s.nextTick(E,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(r(n),t._writableState.errorEmitted=!0,t.emit("error",n),E(t,e))}(t,i,n,e,r);else{var a=b(i);a||i.corked||i.bufferProcessing||!i.bufferedRequest||w(t,i),n?h(x,t,i,a,r):x(t,i,a,r)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function v(t){if(o=o||i(15),!(p.call(v,this)||this instanceof o))return new v(t);this._writableState=new y(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),c.call(this)}function _(t,e,i,n,r,s,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,i?t._writev(r,e.onwrite):t._write(r,s,e.onwrite),e.sync=!1}function x(t,e,i,n){i||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),E(t,e)}function w(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var n=e.bufferedRequestCount,r=new Array(n),s=e.corkedRequestsFree;s.entry=i;for(var o=0,h=!0;i;)r[o]=i,i.isBuf||(h=!1),i=i.next,o+=1;r.allBuffers=h,_(t,e,!0,e.length,r,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new a(e),e.bufferedRequestCount=0}else{for(;i;){var l=i.chunk,u=i.encoding,c=i.callback;if(_(t,e,!1,e.objectMode?1:l.length,l,u,c),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function b(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function T(t,e){t._final((function(i){e.pendingcb--,i&&t.emit("error",i),e.prefinished=!0,t.emit("prefinish"),E(t,e)}))}function E(t,e){var i=b(e);return i&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,s.nextTick(T,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),i}l.inherits(v,c),y.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(y.prototype,"buffer",{get:u.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(t){return!!p.call(this,t)||this===v&&(t&&t._writableState instanceof y)}})):p=function(t){return t instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(t,e,i){var n,r=this._writableState,a=!1,o=!r.objectMode&&(n=t,d.isBuffer(n)||n instanceof f);return o&&!d.isBuffer(t)&&(t=function(t){return d.from(t)}(t)),"function"==typeof e&&(i=e,e=null),o?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof i&&(i=m),r.ended?function(t,e){var i=new Error("write after end");t.emit("error",i),s.nextTick(e,i)}(this,i):(o||function(t,e,i,n){var r=!0,a=!1;return null===i?a=new TypeError("May not write null values to stream"):"string"==typeof i||void 0===i||e.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(t.emit("error",a),s.nextTick(n,a),r=!1),r}(this,r,t,i))&&(r.pendingcb++,a=function(t,e,i,n,r,s){if(!i){var a=function(t,e,i){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=d.from(e,i));return e}(e,n,r);n!==a&&(i=!0,r="buffer",n=a)}var o=e.objectMode?1:n.length;e.length+=o;var h=e.length<e.highWaterMark;h||(e.needDrain=!0);if(e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:r,isBuf:i,callback:s,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else _(t,e,!1,o,n,r,s);return h}(this,r,o,t,e,i)),a},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||w(this,t))},v.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(t,e,i){i(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(t,e,i){var n=this._writableState;"function"==typeof t?(i=t,t=null,e=null):"function"==typeof e&&(i=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(t,e,i){e.ending=!0,E(t,e),i&&(e.finished?s.nextTick(i):t.once("finish",i));e.ended=!0,t.writable=!1}(this,n,i)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),v.prototype.destroy=g.destroy,v.prototype._undestroy=g.undestroy,v.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,i(14),i(118).setImmediate,i(3))},function(t,e,i){"use strict";var n=i(25).Buffer,r=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(n.isEncoding===r||!r(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=h,this.end=l,e=4;break;case"utf8":this.fillLast=o,e=4;break;case"base64":this.text=u,this.end=c,e=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function o(t){var e=this.lastTotal-this.lastNeed,i=function(t,e,i){if(128!=(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,""}}(this,t);return void 0!==i?i:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function h(t,e){if((t.length-e)%2==0){var i=t.toString("utf16le",e);if(i){var n=i.charCodeAt(i.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function l(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,i)}return e}function u(t,e){var i=(t.length-e)%3;return 0===i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function c(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function d(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}e.StringDecoder=s,s.prototype.write=function(t){if(0===t.length)return"";var e,i;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},s.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e},s.prototype.text=function(t,e){var i=function(t,e,i){var n=e.length-1;if(n<i)return 0;var r=a(e[n]);if(r>=0)return r>0&&(t.lastNeed=r-1),r;if(--n<i||-2===r)return 0;if((r=a(e[n]))>=0)return r>0&&(t.lastNeed=r-2),r;if(--n<i||-2===r)return 0;if((r=a(e[n]))>=0)return r>0&&(2===r?r=0:t.lastNeed=r-3),r;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=i;var n=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},s.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,i){"use strict";t.exports=a;var n=i(15),r=i(19);function s(t,e){var i=this._transformState;i.transforming=!1;var n=i.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));i.writechunk=null,i.writecb=null,null!=e&&this.push(e),n(t);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function a(t){if(!(this instanceof a))return new a(t);n.call(this,t),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",o)}function o(){var t=this;"function"==typeof this._flush?this._flush((function(e,i){h(t,e,i)})):h(this,null,null)}function h(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}r.inherits=i(9),r.inherits(a,n),a.prototype.push=function(t,e){return this._transformState.needTransform=!1,n.prototype.push.call(this,t,e)},a.prototype._transform=function(t,e,i){throw new Error("_transform() is not implemented")},a.prototype._write=function(t,e,i){var n=this._transformState;if(n.writecb=i,n.writechunk=t,n.writeencoding=e,!n.transforming){var r=this._readableState;(n.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},a.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},a.prototype._destroy=function(t,e){var i=this;n.prototype._destroy.call(this,t,(function(t){e(t),i.emit("close")}))}},function(t,e,i){"use strict";var n=i(125),r=i(126);function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=_,e.resolve=function(t,e){return _(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?_(t,!1,!0).resolveObject(e):e},e.format=function(t){r.isString(t)&&(t=_(t));return t instanceof s?t.format():s.prototype.format.call(t)},e.Url=s;var a=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(l),c=["%","/","?",";","#"].concat(u),d=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=i(127);function _(t,e,i){if(t&&r.isObject(t)&&t instanceof s)return t;var n=new s;return n.parse(t,e,i),n}s.prototype.parse=function(t,e,i){if(!r.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var s=t.indexOf("?"),o=-1!==s&&s<t.indexOf("#")?"?":"#",l=t.split(o);l[0]=l[0].replace(/\\/g,"/");var _=t=l.join(o);if(_=_.trim(),!i&&1===t.split("#").length){var x=h.exec(_);if(x)return this.path=_,this.href=_,this.pathname=x[1],x[2]?(this.search=x[2],this.query=e?v.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=a.exec(_);if(w){var b=(w=w[0]).toLowerCase();this.protocol=b,_=_.substr(w.length)}if(i||w||_.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===_.substr(0,2);!T||w&&m[w]||(_=_.substr(2),this.slashes=!0)}if(!m[w]&&(T||w&&!y[w])){for(var E,A,S=-1,C=0;C<d.length;C++){-1!==(O=_.indexOf(d[C]))&&(-1===S||O<S)&&(S=O)}-1!==(A=-1===S?_.lastIndexOf("@"):_.lastIndexOf("@",S))&&(E=_.slice(0,A),_=_.slice(A+1),this.auth=decodeURIComponent(E)),S=-1;for(C=0;C<c.length;C++){var O;-1!==(O=_.indexOf(c[C]))&&(-1===S||O<S)&&(S=O)}-1===S&&(S=_.length),this.host=_.slice(0,S),_=_.slice(S),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var R=this.hostname.split(/\./),M=(C=0,R.length);C<M;C++){var L=R[C];if(L&&!L.match(f)){for(var I="",k=0,D=L.length;k<D;k++)L.charCodeAt(k)>127?I+="x":I+=L[k];if(!I.match(f)){var F=R.slice(0,C),B=R.slice(C+1),N=L.match(p);N&&(F.push(N[1]),B.unshift(N[2])),B.length&&(_="/"+B.join(".")+_),this.hostname=F.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),P||(this.hostname=n.toASCII(this.hostname));var G=this.port?":"+this.port:"",Y=this.hostname||"";this.host=Y+G,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_))}if(!g[b])for(C=0,M=u.length;C<M;C++){var z=u[C];if(-1!==_.indexOf(z)){var U=encodeURIComponent(z);U===z&&(U=escape(z)),_=_.split(z).join(U)}}var X=_.indexOf("#");-1!==X&&(this.hash=_.substr(X),_=_.slice(0,X));var V=_.indexOf("?");if(-1!==V?(this.search=_.substr(V),this.query=_.substr(V+1),e&&(this.query=v.parse(this.query)),_=_.slice(0,V)):e&&(this.search="",this.query={}),_&&(this.pathname=_),y[b]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){G=this.pathname||"";var H=this.search||"";this.path=G+H}return this.href=this.format(),this},s.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",s=!1,a="";this.host?s=t+this.host:this.hostname&&(s=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&r.isObject(this.query)&&Object.keys(this.query).length&&(a=v.stringify(this.query));var o=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||y[e])&&!1!==s?(s="//"+(s||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):s||(s=""),n&&"#"!==n.charAt(0)&&(n="#"+n),o&&"?"!==o.charAt(0)&&(o="?"+o),e+s+(i=i.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(o=o.replace("#","%23"))+n},s.prototype.resolve=function(t){return this.resolveObject(_(t,!1,!0)).format()},s.prototype.resolveObject=function(t){if(r.isString(t)){var e=new s;e.parse(t,!1,!0),t=e}for(var i=new s,n=Object.keys(this),a=0;a<n.length;a++){var o=n[a];i[o]=this[o]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var h=Object.keys(t),l=0;l<h.length;l++){var u=h[l];"protocol"!==u&&(i[u]=t[u])}return y[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!y[t.protocol]){for(var c=Object.keys(t),d=0;d<c.length;d++){var f=c[d];i[f]=t[f]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||m[t.protocol])i.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),i.pathname=p.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var g=i.pathname||"",v=i.search||"";i.path=g+v}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var _=i.pathname&&"/"===i.pathname.charAt(0),x=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=x||_||i.host&&t.pathname,b=w,T=i.pathname&&i.pathname.split("/")||[],E=(p=t.pathname&&t.pathname.split("/")||[],i.protocol&&!y[i.protocol]);if(E&&(i.hostname="",i.port=null,i.host&&(""===T[0]?T[0]=i.host:T.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),w=w&&(""===p[0]||""===T[0])),x)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,T=p;else if(p.length)T||(T=[]),T.pop(),T=T.concat(p),i.search=t.search,i.query=t.query;else if(!r.isNullOrUndefined(t.search)){if(E)i.hostname=i.host=T.shift(),(P=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=P.shift(),i.host=i.hostname=P.shift());return i.search=t.search,i.query=t.query,r.isNull(i.pathname)&&r.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!T.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var A=T.slice(-1)[0],S=(i.host||t.host||T.length>1)&&("."===A||".."===A)||""===A,C=0,O=T.length;O>=0;O--)"."===(A=T[O])?T.splice(O,1):".."===A?(T.splice(O,1),C++):C&&(T.splice(O,1),C--);if(!w&&!b)for(;C--;C)T.unshift("..");!w||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),S&&"/"!==T.join("/").substr(-1)&&T.push("");var P,R=""===T[0]||T[0]&&"/"===T[0].charAt(0);E&&(i.hostname=i.host=R?"":T.length?T.shift():"",(P=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=P.shift(),i.host=i.hostname=P.shift()));return(w=w||i.host&&T.length)&&!R&&T.unshift(""),T.length?i.pathname=T.join("/"):(i.pathname=null,i.path=null),r.isNull(i.pathname)&&r.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},s.prototype.parseHost=function(){var t=this.host,e=o.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(1),o=i(0),h=i(10),l=i(8),u=i(68),c=i(38),d=s(i(2)),f=i(4),p=i(70),g=function(t){function e(e){var i=t.call(this,e)||this;if(d.SDK.replayMode){var n=new p.AudioButtonContainer(i.scene);n.setPosition(45*o.GameVars.scaleX,45),n.scaleX=o.GameVars.scaleX,i.add(n)}else{var r=new h.Button(i.scene,55*o.GameVars.scaleX,55,"texture_atlas_1","btn_menu_off","btn_menu_on");r.onDown(i.onClickMenu,i),r.scaleX=o.GameVars.scaleX,i.add(r)}return i.cueBallSpinButton=new u.CueBallSpinButton(i.scene),i.cueBallSpinButton.x=a.GameConstants.GAME_WIDTH-50*o.GameVars.scaleX,i.cueBallSpinButton.y=50,i.add(i.cueBallSpinButton),o.GameVars.isDesktop||d.SDK.replayMode?i.powerBarContainer=null:(i.powerBarContainer=new c.PowerBarContainer(i.scene),i.add(i.powerBarContainer)),i}return r(e,t),e.prototype.update=function(){this.powerBarContainer&&this.powerBarContainer.update()},e.prototype.onTurnCompleted=function(){this.cueBallSpinButton.setRedPointPosition(),this.powerBarContainer&&this.powerBarContainer.onTurnCompleted()},e.prototype.onClickMenu=function(){o.GameVars.paused||(l.BoardManager.currentInstance.showPauseMenu(),f.AudioManager.playSound("btn_pressed"))},e.CUE_BALL_BUTTON_SCALE=.15,e}(Phaser.GameObjects.Container);e.GUI=g},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(0),o=i(10),h=i(8),l=i(67),u=i(69),c=s(i(2)),d=function(t){function e(i){var n=t.call(this,i)||this;return e.currentInstance=n,n.scaleX=a.GameVars.scaleX,n.cueBallButton=new o.Button(n.scene,0,0,"texture_atlas_1","btn_spin_off","btn_spin_on"),n.cueBallButton.onDown(n.onDownCueBallButton,n),n.add(n.cueBallButton),n.redDot=new Phaser.GameObjects.Graphics(n.scene),n.redDot.fillStyle(16395875),n.redDot.fillCircle(0,0,8),n.add(n.redDot),n}return r(e,t),e.prototype.setRedPointPosition=function(t,e){var i,n;void 0!==t&&void 0!==e?(i=l.GUI.CUE_BALL_BUTTON_SCALE*u.SpinCircleLayer.SPIN_CIRCLE_RADIUS*t,n=-l.GUI.CUE_BALL_BUTTON_SCALE*u.SpinCircleLayer.SPIN_CIRCLE_RADIUS*e):(i=l.GUI.CUE_BALL_BUTTON_SCALE*u.SpinCircleLayer.SPIN_CIRCLE_RADIUS*a.GameVars.english,n=-l.GUI.CUE_BALL_BUTTON_SCALE*u.SpinCircleLayer.SPIN_CIRCLE_RADIUS*a.GameVars.verticalSpin),this.scene.tweens.add({targets:this.redDot,x:i,y:n,ease:Phaser.Math.Easing.Cubic.Out,duration:250,delay:150})},e.prototype.onDownCueBallButton=function(){a.GameVars.shotRunnig||a.GameVars.paused||c.SDK.replayMode||h.BoardManager.currentInstance.showSpinCircleLayer()},e}(Phaser.GameObjects.Container);e.CueBallSpinButton=d},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(1),o=i(0),h=i(8),l=s(i(5)),u=i(4),c=function(t){function e(i){var n=t.call(this,i)||this;e.currentInstance=n,e.discardClick=!1,n.canMove=!1;var r=new Phaser.GameObjects.Graphics(n.scene);r.fillStyle(988966,.8),r.fillRect(0,0,a.GameConstants.GAME_WIDTH,a.GameConstants.GAME_HEIGHT),r.setInteractive(new Phaser.Geom.Rectangle(0,0,a.GameConstants.GAME_WIDTH,a.GameConstants.GAME_HEIGHT),Phaser.Geom.Rectangle.Contains),r.on("pointerdown",(function(){n.onDownTransparentLayer()}),n),n.add(r);var s=new Phaser.GameObjects.Container(n.scene);s.scaleX=o.GameVars.scaleX,s.x=a.GameConstants.GAME_WIDTH/2,s.y=a.GameConstants.GAME_HEIGHT/2,n.add(s);var h=new Phaser.GameObjects.Image(n.scene,0,0,"texture_atlas_1","cue_ball");return h.setInteractive({pixelPerfect:!0,useHandCursor:!0}),h.on("pointerdown",n.onDownCircle,n),h.on("pointerup",n.onUpCircle,n),h.on("pointerout",n.onUpCircle,n),s.add(h),n.redDot=new Phaser.GameObjects.Graphics(i),n.redDot.fillStyle(15794255),n.redDot.fillCircle(0,0,32),s.add(n.redDot),n.alpha=0,n.scene.tweens.add({targets:n,alpha:1,ease:Phaser.Math.Easing.Cubic.Out,duration:350}),n}return r(e,t),e.prototype.update=function(){if(this.canMove){this.redDot.setScale(1.75);var t=(this.scene.game.input.activePointer.x-a.GameConstants.GAME_WIDTH/2)/o.GameVars.scaleX,i=this.scene.game.input.activePointer.y-a.GameConstants.GAME_HEIGHT/2;if(Math.sqrt(t*t+i*i)<e.SPIN_CIRCLE_RADIUS)this.redDot.setPosition(t,i);else{var n=new l.Vector2D(t,i).normalize();this.redDot.setPosition(n.x*e.SPIN_CIRCLE_RADIUS,n.y*e.SPIN_CIRCLE_RADIUS)}}},e.prototype.onDownTransparentLayer=function(){var t=(this.scene.game.input.activePointer.x-a.GameConstants.GAME_WIDTH/2)/o.GameVars.scaleX,i=this.scene.game.input.activePointer.y-a.GameConstants.GAME_HEIGHT/2;if(Math.sqrt(t*t+i+i)>1.2*e.SPIN_CIRCLE_RADIUS){var n=Math.floor(1e3*this.redDot.x/e.SPIN_CIRCLE_RADIUS)/1e3,r=-Math.floor(1e3*this.redDot.y/e.SPIN_CIRCLE_RADIUS)/1e3;h.BoardManager.currentInstance.hideSpinCircleLayer(n,r),u.AudioManager.playSound("btn_pressed")}},e.prototype.onDownCircle=function(){this.canMove=!0,u.AudioManager.playSound("btn_pressed")},e.prototype.onUpCircle=function(){this.canMove=!1,this.redDot.setScale(1)},e.currentInstance=null,e.discardClick=!1,e.SPIN_CIRCLE_RADIUS=175,e}(Phaser.GameObjects.Container);e.SpinCircleLayer=c},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var s=i(4),a=i(0),o=i(10),h=function(t){function e(e){var i=t.call(this,e)||this;return i.audioOnButton=new o.Button(i.scene,0,0,"texture_atlas_1","btn_sound_on_off","btn_sound_on_on"),i.audioOnButton.onDown(i.onDownAudio,i),i.add(i.audioOnButton),i.audioOffButton=new o.Button(i.scene,0,0,"texture_atlas_1","btn_sound_off_off","btn_sound_off_on"),i.audioOffButton.onDown(i.onDownAudio,i),i.add(i.audioOffButton),a.GameVars.gameData.muted?(i.audioOnButton.visible=!1,i.audioOffButton.visible=!0):(i.audioOnButton.visible=!0,i.audioOffButton.visible=!1),i}return r(e,t),e.prototype.onDownAudio=function(){a.GameVars.paused||(s.AudioManager.toggleAudioState(),a.GameVars.gameData.muted?(this.audioOnButton.visible=!1,this.audioOffButton.visible=!0):(this.audioOnButton.visible=!0,this.audioOffButton.visible=!1),s.AudioManager.playSound("btn_neon"))},e}(Phaser.GameObjects.Container);e.AudioButtonContainer=h},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var s=i(1),a=i(7),o=i(0),h=i(10),l=i(136),u=function(t){function e(){return t.call(this,"ShopScene")||this}return r(e,t),e.prototype.create=function(){a.GameManager.setCurrentScene(this),e.currentInstance=this;var t=this.add.graphics();t.fillStyle(461639,1),t.fillRect(0,0,s.GameConstants.GAME_WIDTH,s.GameConstants.GAME_HEIGHT);var i=this.add.image(0,0,"texture_atlas_1","tab_base");i.scaleX=s.GameConstants.GAME_WIDTH/200,i.scaleY=.85,i.setOrigin(0,0),this.add.image(s.GameConstants.GAME_WIDTH/2,45,"texture_atlas_1","title_equipment").scaleX=o.GameVars.scaleX;var n=new h.Button(this,55*o.GameVars.scaleX,55,"texture_atlas_1","btn_close_off","btn_close_on");n.onDown(this.onClickCloseButton,this),n.scaleX=o.GameVars.scaleX,this.add.existing(n),this.arrowButton=new h.Button(this,s.GameConstants.GAME_WIDTH-40*o.GameVars.scaleX,40,"texture_atlas_1","shop-arrow","shop-arrow"),this.arrowButton.onDown(this.onClickArrowButton,this),this.arrowButton.scaleX=o.GameVars.scaleX,this.add.existing(this.arrowButton),this.shopCues=new l.ShopCues(this),this.add.existing(this.shopCues)},e.prototype.update=function(){this.shopCues.update()},e.prototype.onCueEquipped=function(){this.shopCues.onCueEquipped()},e.prototype.onClickCloseButton=function(){a.GameManager.enterSplashScene()},e.prototype.onClickArrowButton=function(){this.shopCues.tweening||(this.shopCues.scroll(),this.arrowButton.scaleX*=-1)},e}(Phaser.Scene);e.ShopScene=u},function(t,e,i){(function(t){(function(e){"use strict";ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return null!==t&&"object"==typeof t&&t.buffer instanceof ArrayBuffer}),"undefined"==typeof globalThis&&"undefined"!=typeof window&&(window.globalThis=window)
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */;var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function r(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{h(n.next(t))}catch(t){s(t)}}function o(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}h((n=n.apply(t,e||[])).next())}))}function s(t,e){var i,n,r,s,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&s[0]?n.return:s[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,s[1])).done)return r;switch(n=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}}function a(t,e){e.headers=t.headers||{},e.statusMessage=t.statusText,e.statusCode=t.status,e.data=t.response}function o(t,e,i){return new Promise((function(n,r){i=i||{};var s,o,h,l=new XMLHttpRequest,u=i.body,c=i.headers||{};for(s in i.timeout&&(l.timeout=i.timeout),l.ontimeout=l.onerror=function(t){t.timeout="timeout"==t.type,r(t)},l.open(t,e.href||e),l.onload=function(){for(h=l.getAllResponseHeaders().trim().split(/[\r\n]+/),a(l,l);o=h.shift();)o=o.split(": "),l.headers[o.shift().toLowerCase()]=o.join(": ");if((o=l.headers["content-type"])&&~o.indexOf("application/json"))try{l.data=JSON.parse(l.data,i.reviver)}catch(t){return a(l,t),r(t)}(l.status>=400?r:n)(l)},typeof FormData<"u"&&u instanceof FormData||u&&"object"==typeof u&&(c["content-type"]="application/json",u=JSON.stringify(u)),l.withCredentials=!!i.withCredentials,c)l.setRequestHeader(s,c[s]);l.send(u)}))}var h=o.bind(o,"GET"),l=o.bind(o,"POST"),u=o.bind(o,"PATCH"),c=o.bind(o,"DELETE"),d=h,f=u,p=l,g=o.bind(o,"PUT"),m=o,y={del:c,get:d,patch:f,post:p,put:g,send:m},v=Object.freeze(Object.assign(Object.create(null),y,{default:y,del:c,get:d,patch:f,post:p,put:g,send:m})),_=function(t){function e(e,i){var n=t.call(this,i)||this;return n.name="ServerError",n.code=e,n}return n(e,t),e}(Error);function x(t,e){if(this._offset=e,t instanceof ArrayBuffer)this._buffer=t,this._view=new DataView(this._buffer);else{if(!ArrayBuffer.isView(t))throw new Error("Invalid argument");this._buffer=t.buffer,this._view=new DataView(this._buffer,t.byteOffset,t.byteLength)}}function w(t,e,i){for(var n=0,r=0,s=i.length;r<s;r++)(n=i.charCodeAt(r))<128?t.setUint8(e++,n):n<2048?(t.setUint8(e++,192|n>>6),t.setUint8(e++,128|63&n)):n<55296||n>=57344?(t.setUint8(e++,224|n>>12),t.setUint8(e++,128|n>>6&63),t.setUint8(e++,128|63&n)):(r++,n=65536+((1023&n)<<10|1023&i.charCodeAt(r)),t.setUint8(e++,240|n>>18),t.setUint8(e++,128|n>>12&63),t.setUint8(e++,128|n>>6&63),t.setUint8(e++,128|63&n))}function b(t){var e=[],i=[],n=function t(e,i,n){var r=typeof n,s=0,a=0,o=0,h=0,l=0,u=0;if("string"===r){if((l=function(t){for(var e=0,i=0,n=0,r=t.length;n<r;n++)(e=t.charCodeAt(n))<128?i+=1:e<2048?i+=2:e<55296||e>=57344?i+=3:(n++,i+=4);return i}(n))<32)e.push(160|l),u=1;else if(l<256)e.push(217,l),u=2;else if(l<65536)e.push(218,l>>8,l),u=3;else{if(!(l<4294967296))throw new Error("String too long");e.push(219,l>>24,l>>16,l>>8,l),u=5}return i.push({_str:n,_length:l,_offset:e.length}),u+l}if("number"===r)return Math.floor(n)===n&&isFinite(n)?n>=0?n<128?(e.push(n),1):n<256?(e.push(204,n),2):n<65536?(e.push(205,n>>8,n),3):n<4294967296?(e.push(206,n>>24,n>>16,n>>8,n),5):(o=n/Math.pow(2,32)>>0,h=n>>>0,e.push(207,o>>24,o>>16,o>>8,o,h>>24,h>>16,h>>8,h),9):n>=-32?(e.push(n),1):n>=-128?(e.push(208,n),2):n>=-32768?(e.push(209,n>>8,n),3):n>=-2147483648?(e.push(210,n>>24,n>>16,n>>8,n),5):(o=Math.floor(n/Math.pow(2,32)),h=n>>>0,e.push(211,o>>24,o>>16,o>>8,o,h>>24,h>>16,h>>8,h),9):(e.push(203),i.push({_float:n,_length:8,_offset:e.length}),9);if("object"===r){if(null===n)return e.push(192),1;if(Array.isArray(n)){if((l=n.length)<16)e.push(144|l),u=1;else if(l<65536)e.push(220,l>>8,l),u=3;else{if(!(l<4294967296))throw new Error("Array too large");e.push(221,l>>24,l>>16,l>>8,l),u=5}for(s=0;s<l;s++)u+=t(e,i,n[s]);return u}if(n instanceof Date){var c=n.getTime();return o=Math.floor(c/Math.pow(2,32)),h=c>>>0,e.push(215,0,o>>24,o>>16,o>>8,o,h>>24,h>>16,h>>8,h),10}if(n instanceof ArrayBuffer){if((l=n.byteLength)<256)e.push(196,l),u=2;else if(l<65536)e.push(197,l>>8,l),u=3;else{if(!(l<4294967296))throw new Error("Buffer too large");e.push(198,l>>24,l>>16,l>>8,l),u=5}return i.push({_bin:n,_length:l,_offset:e.length}),u+l}if("function"==typeof n.toJSON)return t(e,i,n.toJSON());var d=[],f="",p=Object.keys(n);for(s=0,a=p.length;s<a;s++)"function"!=typeof n[f=p[s]]&&d.push(f);if((l=d.length)<16)e.push(128|l),u=1;else if(l<65536)e.push(222,l>>8,l),u=3;else{if(!(l<4294967296))throw new Error("Object too large");e.push(223,l>>24,l>>16,l>>8,l),u=5}for(s=0;s<l;s++)u+=t(e,i,f=d[s]),u+=t(e,i,n[f]);return u}if("boolean"===r)return e.push(n?195:194),1;if("undefined"===r)return e.push(212,0,0),3;throw new Error("Could not encode")}(e,i,t),r=new ArrayBuffer(n),s=new DataView(r),a=0,o=0,h=-1;i.length>0&&(h=i[0]._offset);for(var l,u=0,c=0,d=0,f=e.length;d<f;d++)if(s.setUint8(o+d,e[d]),d+1===h){if(u=(l=i[a])._length,c=o+h,l._bin)for(var p=new Uint8Array(l._bin),g=0;g<u;g++)s.setUint8(c+g,p[g]);else l._str?w(s,c,l._str):void 0!==l._float&&s.setFloat64(c,l._float);o+=u,i[++a]&&(h=i[a]._offset)}return r}x.prototype._array=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=this._parse();return e},x.prototype._map=function(t){for(var e={},i=0;i<t;i++)e[this._parse()]=this._parse();return e},x.prototype._str=function(t){var e=function(t,e,i){for(var n="",r=0,s=e,a=e+i;s<a;s++){var o=t.getUint8(s);if(0!=(128&o))if(192!=(224&o))if(224!=(240&o)){if(240!=(248&o))throw new Error("Invalid byte "+o.toString(16));(r=(7&o)<<18|(63&t.getUint8(++s))<<12|(63&t.getUint8(++s))<<6|(63&t.getUint8(++s))<<0)>=65536?(r-=65536,n+=String.fromCharCode(55296+(r>>>10),56320+(1023&r))):n+=String.fromCharCode(r)}else n+=String.fromCharCode((15&o)<<12|(63&t.getUint8(++s))<<6|(63&t.getUint8(++s))<<0);else n+=String.fromCharCode((31&o)<<6|63&t.getUint8(++s));else n+=String.fromCharCode(o)}return n}(this._view,this._offset,t);return this._offset+=t,e},x.prototype._bin=function(t){var e=this._buffer.slice(this._offset,this._offset+t);return this._offset+=t,e},x.prototype._parse=function(){var t,e=this._view.getUint8(this._offset++),i=0,n=0,r=0,s=0;if(e<192)return e<128?e:e<144?this._map(15&e):e<160?this._array(15&e):this._str(31&e);if(e>223)return-1*(255-e+1);switch(e){case 192:return null;case 194:return!1;case 195:return!0;case 196:return i=this._view.getUint8(this._offset),this._offset+=1,this._bin(i);case 197:return i=this._view.getUint16(this._offset),this._offset+=2,this._bin(i);case 198:return i=this._view.getUint32(this._offset),this._offset+=4,this._bin(i);case 199:return i=this._view.getUint8(this._offset),n=this._view.getInt8(this._offset+1),this._offset+=2,[n,this._bin(i)];case 200:return i=this._view.getUint16(this._offset),n=this._view.getInt8(this._offset+2),this._offset+=3,[n,this._bin(i)];case 201:return i=this._view.getUint32(this._offset),n=this._view.getInt8(this._offset+4),this._offset+=5,[n,this._bin(i)];case 202:return t=this._view.getFloat32(this._offset),this._offset+=4,t;case 203:return t=this._view.getFloat64(this._offset),this._offset+=8,t;case 204:return t=this._view.getUint8(this._offset),this._offset+=1,t;case 205:return t=this._view.getUint16(this._offset),this._offset+=2,t;case 206:return t=this._view.getUint32(this._offset),this._offset+=4,t;case 207:return r=this._view.getUint32(this._offset)*Math.pow(2,32),s=this._view.getUint32(this._offset+4),this._offset+=8,r+s;case 208:return t=this._view.getInt8(this._offset),this._offset+=1,t;case 209:return t=this._view.getInt16(this._offset),this._offset+=2,t;case 210:return t=this._view.getInt32(this._offset),this._offset+=4,t;case 211:return r=this._view.getInt32(this._offset)*Math.pow(2,32),s=this._view.getUint32(this._offset+4),this._offset+=8,r+s;case 212:return n=this._view.getInt8(this._offset),this._offset+=1,0===n?void(this._offset+=1):[n,this._bin(1)];case 213:return n=this._view.getInt8(this._offset),this._offset+=1,[n,this._bin(2)];case 214:return n=this._view.getInt8(this._offset),this._offset+=1,[n,this._bin(4)];case 215:return n=this._view.getInt8(this._offset),this._offset+=1,0===n?(r=this._view.getInt32(this._offset)*Math.pow(2,32),s=this._view.getUint32(this._offset+4),this._offset+=8,new Date(r+s)):[n,this._bin(8)];case 216:return n=this._view.getInt8(this._offset),this._offset+=1,[n,this._bin(16)];case 217:return i=this._view.getUint8(this._offset),this._offset+=1,this._str(i);case 218:return i=this._view.getUint16(this._offset),this._offset+=2,this._str(i);case 219:return i=this._view.getUint32(this._offset),this._offset+=4,this._str(i);case 220:return i=this._view.getUint16(this._offset),this._offset+=2,this._array(i);case 221:return i=this._view.getUint32(this._offset),this._offset+=4,this._array(i);case 222:return i=this._view.getUint16(this._offset),this._offset+=2,this._map(i);case 223:return i=this._view.getUint32(this._offset),this._offset+=4,this._map(i)}throw new Error("Could not parse")};var T,E,A=globalThis.WebSocket||function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")},S=function(){function t(t){this.events=t}return t.prototype.send=function(t){t instanceof ArrayBuffer?this.ws.send(t):Array.isArray(t)&&this.ws.send(new Uint8Array(t).buffer)},t.prototype.connect=function(t){this.ws=new A(t,this.protocols),this.ws.binaryType="arraybuffer",this.ws.onopen=this.events.onopen,this.ws.onmessage=this.events.onmessage,this.ws.onclose=this.events.onclose,this.ws.onerror=this.events.onerror},t.prototype.close=function(t,e){this.ws.close(t,e)},t}(),C=function(){function t(){this.events={},this.transport=new S(this.events)}return t.prototype.send=function(t){this.transport.send(t)},t.prototype.connect=function(t){this.transport.connect(t)},t.prototype.close=function(t,e){this.transport.close(t,e)},t}(),O={};function P(t,e){O[t]=e}function R(t){var e=O[t];if(!e)throw new Error("missing serializer: "+t);return e}e.Protocol=void 0,(T=e.Protocol||(e.Protocol={}))[T.HANDSHAKE=9]="HANDSHAKE",T[T.JOIN_ROOM=10]="JOIN_ROOM",T[T.ERROR=11]="ERROR",T[T.LEAVE_ROOM=12]="LEAVE_ROOM",T[T.ROOM_DATA=13]="ROOM_DATA",T[T.ROOM_STATE=14]="ROOM_STATE",T[T.ROOM_STATE_PATCH=15]="ROOM_STATE_PATCH",T[T.ROOM_DATA_SCHEMA=16]="ROOM_DATA_SCHEMA",e.ErrorCode=void 0,(E=e.ErrorCode||(e.ErrorCode={}))[E.MATCHMAKE_NO_HANDLER=4210]="MATCHMAKE_NO_HANDLER",E[E.MATCHMAKE_INVALID_CRITERIA=4211]="MATCHMAKE_INVALID_CRITERIA",E[E.MATCHMAKE_INVALID_ROOM_ID=4212]="MATCHMAKE_INVALID_ROOM_ID",E[E.MATCHMAKE_UNHANDLED=4213]="MATCHMAKE_UNHANDLED",E[E.MATCHMAKE_EXPIRED=4214]="MATCHMAKE_EXPIRED",E[E.AUTH_FAILED=4215]="AUTH_FAILED",E[E.APPLICATION_ERROR=4216]="APPLICATION_ERROR";let M=()=>({events:{},emit(t,...e){(this.events[t]||[]).forEach(t=>t(...e))},on(t,e){return(this.events[t]=this.events[t]||[]).push(e),()=>this.events[t]=(this.events[t]||[]).filter(t=>t!==e)}});var L=function(){function t(){this.handlers=[]}return t.prototype.register=function(t,e){return this.handlers.push(t),this},t.prototype.invoke=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.handlers.forEach((function(i){return i.apply(t,e)}))},t.prototype.invokeAsync=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return Promise.all(this.handlers.map((function(i){return i.apply(t,e)})))},t.prototype.remove=function(t){var e=this.handlers.indexOf(t);this.handlers[e]=this.handlers[this.handlers.length-1],this.handlers.pop()},t.prototype.clear=function(){this.handlers=[]},t}();function I(){var t=new L;function e(e){return t.register(e,null===this)}return e.once=function(e){var i=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];e.apply(this,n),t.remove(i)};t.register(i)},e.remove=function(e){return t.remove(e)},e.invoke=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.invoke.apply(t,e)},e.invokeAsync=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.invokeAsync.apply(t,e)},e.clear=function(){return t.clear()},e}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t||"undefined"!=typeof self&&self;var k,D,F=function(t){var e={exports:{}};return t(e,e.exports),e.exports}((function(t,e){!function(t){
/*! *****************************************************************************
        Copyright (c) Microsoft Corporation.

        Permission to use, copy, modify, and/or distribute this software for any
        purpose with or without fee is hereby granted.

        THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
        REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
        AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
        INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
        LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
        OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
        PERFORMANCE OF THIS SOFTWARE.
        ***************************************************************************** */
var e,i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function r(t,e,i,n){var r,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(s<3?r(a):s>3?r(e,i,a):r(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}function s(t,e){for(var i=0,n=e.length,r=t.length;i<n;i++,r++)t[r]=e[i];return t}t.OPERATION=void 0,(e=t.OPERATION||(t.OPERATION={}))[e.ADD=128]="ADD",e[e.REPLACE=0]="REPLACE",e[e.DELETE=64]="DELETE",e[e.DELETE_AND_ADD=192]="DELETE_AND_ADD",e[e.TOUCH=1]="TOUCH",e[e.CLEAR=10]="CLEAR";var a=function(){function t(){this.refs=new Map,this.refCounts={},this.deletedRefs=new Set,this.nextUniqueId=0}return t.prototype.getNextUniqueId=function(){return this.nextUniqueId++},t.prototype.addRef=function(t,e,i){void 0===i&&(i=!0),this.refs.set(t,e),i&&(this.refCounts[t]=(this.refCounts[t]||0)+1)},t.prototype.removeRef=function(t){this.refCounts[t]=this.refCounts[t]-1,this.deletedRefs.add(t)},t.prototype.clearRefs=function(){this.refs.clear(),this.deletedRefs.clear(),this.refCounts={}},t.prototype.garbageCollectDeletedRefs=function(){var t=this;this.deletedRefs.forEach((function(e){if(t.refCounts[e]<=0){var i=t.refs.get(e);if(i instanceof ht)for(var n in i._definition.schema)"string"!=typeof i._definition.schema[n]&&i[n]&&i[n].$changes&&t.removeRef(i[n].$changes.refId);else{var r=i.$changes.parent._definition,s=r.schema[r.fieldsByIndex[i.$changes.parentIndex]];"function"==typeof Object.values(s)[0]&&Array.from(i.values()).forEach((function(e){return t.removeRef(e.$changes.refId)}))}t.refs.delete(e),delete t.refCounts[e]}})),this.deletedRefs.clear()},t}(),o=function(){function e(t,e,i){this.changed=!1,this.changes=new Map,this.allChanges=new Set,this.caches={},this.currentCustomOperation=0,this.ref=t,this.setParent(e,i)}return e.prototype.setParent=function(t,e,i){var n=this;if(this.indexes||(this.indexes=this.ref instanceof ht?this.ref._definition.indexes:{}),this.parent=t,this.parentIndex=i,e)if(this.root=e,this.ref instanceof ht){var r=this.ref._definition;for(var s in r.schema){var a=this.ref[s];if(a&&a.$changes){var o=r.indexes[s];a.$changes.setParent(this.ref,e,o)}}}else"object"==typeof this.ref&&this.ref.forEach((function(t,e){if(t instanceof ht){var i=t.$changes,r=n.ref.$changes.indexes[e];i.setParent(n.ref,n.root,r)}}))},e.prototype.operation=function(t){this.changes.set(--this.currentCustomOperation,t)},e.prototype.change=function(e,i){void 0===i&&(i=t.OPERATION.ADD);var n="number"==typeof e?e:this.indexes[e];this.assertValidIndex(n,e);var r=this.changes.get(n);r&&r.op!==t.OPERATION.DELETE&&r.op!==t.OPERATION.TOUCH||this.changes.set(n,{op:r&&r.op===t.OPERATION.DELETE?t.OPERATION.DELETE_AND_ADD:i,index:n}),this.allChanges.add(n),this.changed=!0,this.touchParents()},e.prototype.touch=function(e){var i="number"==typeof e?e:this.indexes[e];this.assertValidIndex(i,e),this.changes.has(i)||this.changes.set(i,{op:t.OPERATION.TOUCH,index:i}),this.allChanges.add(i),this.touchParents()},e.prototype.touchParents=function(){this.parent&&this.parent.$changes.touch(this.parentIndex)},e.prototype.getType=function(t){if(this.ref._definition)return(e=this.ref._definition).schema[e.fieldsByIndex[t]];var e,i=(e=this.parent._definition).schema[e.fieldsByIndex[this.parentIndex]];return Object.values(i)[0]},e.prototype.getChildrenFilter=function(){var t=this.parent._definition.childFilters;return t&&t[this.parentIndex]},e.prototype.getValue=function(t){return this.ref.getByIndex(t)},e.prototype.delete=function(e){var i="number"==typeof e?e:this.indexes[e];if(void 0!==i){var n=this.getValue(i);this.changes.set(i,{op:t.OPERATION.DELETE,index:i}),this.allChanges.delete(i),delete this.caches[i],n&&n.$changes&&(n.$changes.parent=void 0),this.changed=!0,this.touchParents()}else console.warn("@colyseus/schema "+this.ref.constructor.name+": trying to delete non-existing index: "+e+" ("+i+")")},e.prototype.discard=function(e,i){var n=this;void 0===e&&(e=!1),void 0===i&&(i=!1),this.ref instanceof ht||this.changes.forEach((function(e){if(e.op===t.OPERATION.DELETE){var i=n.ref.getIndex(e.index);delete n.indexes[i]}})),this.changes.clear(),this.changed=e,i&&this.allChanges.clear(),this.currentCustomOperation=0},e.prototype.discardAll=function(){var t=this;this.changes.forEach((function(e){var i=t.getValue(e.index);i&&i.$changes&&i.$changes.discardAll()})),this.discard()},e.prototype.cache=function(t,e){this.caches[t]=e},e.prototype.clone=function(){return new e(this.ref,this.parent,this.root)},e.prototype.ensureRefId=function(){void 0===this.refId&&(this.refId=this.root.getNextUniqueId())},e.prototype.assertValidIndex=function(t,e){if(void 0===t)throw new Error('ChangeTree: missing index for field "'+e+'"')},e}(),h=function(t,e){var i=t.toString(),n=e.toString();return i<n?-1:i>n?1:0};function l(t){return t.$proxy=!0,t=new Proxy(t,{get:function(t,e){return"symbol"==typeof e||isNaN(e)?t[e]:t.at(e)},set:function(t,e,i){if("symbol"==typeof e||isNaN(e))t[e]=i;else{var n=Array.from(t.$items.keys()),r=parseInt(n[e]||e);null==i?t.deleteAt(r):t.setAt(r,i)}return!0},deleteProperty:function(t,e){return"number"==typeof e?t.deleteAt(e):delete t[e],!0}})}var u=function(){function e(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.$changes=new o(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,this.push.apply(this,t)}return e.is=function(t){return Array.isArray(t)||void 0!==t.array},Object.defineProperty(e.prototype,"length",{get:function(){return this.$items.size},set:function(t){0===t?this.clear():this.splice(t,this.length-t)},enumerable:!1,configurable:!0}),e.prototype.push=function(){for(var t,e=this,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return i.forEach((function(i){t=e.$refId++,e.setAt(t,i)})),t},e.prototype.pop=function(){var t=Array.from(this.$indexes.values()).pop();if(void 0!==t){this.$changes.delete(t),this.$indexes.delete(t);var e=this.$items.get(t);return this.$items.delete(t),e}},e.prototype.at=function(t){var e=Array.from(this.$items.keys())[t];return this.$items.get(e)},e.prototype.setAt=function(e,i){var n,r;void 0!==i.$changes&&i.$changes.setParent(this,this.$changes.root,e);var s=null!==(r=null===(n=this.$changes.indexes[e])||void 0===n?void 0:n.op)&&void 0!==r?r:t.OPERATION.ADD;this.$changes.indexes[e]=e,this.$indexes.set(e,e),this.$items.set(e,i),this.$changes.change(e,s)},e.prototype.deleteAt=function(t){var e=Array.from(this.$items.keys())[t];return void 0!==e&&this.$deleteAt(e)},e.prototype.$deleteAt=function(t){return this.$changes.delete(t),this.$indexes.delete(t),this.$items.delete(t)},e.prototype.clear=function(e){var i=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),e&&"string"!=typeof this.$changes.getType()&&this.$items.forEach((function(t){i.$changes.root.removeRef(t.$changes.refId)})),this.$items.clear(),this.$changes.operation({index:0,op:t.OPERATION.CLEAR}),this.$changes.touchParents()},e.prototype.concat=function(){for(var t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return new(e.bind.apply(e,s([void 0],(t=Array.from(this.$items.values())).concat.apply(t,i))))},e.prototype.join=function(t){return Array.from(this.$items.values()).join(t)},e.prototype.reverse=function(){var t=this,e=Array.from(this.$items.keys());return Array.from(this.$items.values()).reverse().forEach((function(i,n){t.setAt(e[n],i)})),this},e.prototype.shift=function(){var t=Array.from(this.$items.keys()).shift();if(void 0!==t){var e=this.$items.get(t);return this.$deleteAt(t),e}},e.prototype.slice=function(t,i){return new(e.bind.apply(e,s([void 0],Array.from(this.$items.values()).slice(t,i))))},e.prototype.sort=function(t){var e=this;void 0===t&&(t=h);var i=Array.from(this.$items.keys());return Array.from(this.$items.values()).sort(t).forEach((function(t,n){e.setAt(i[n],t)})),this},e.prototype.splice=function(t,e){void 0===e&&(e=this.length-t);for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];for(var r=Array.from(this.$items.keys()),s=[],a=t;a<t+e;a++)s.push(this.$items.get(r[a])),this.$deleteAt(r[a]);return s},e.prototype.unshift=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this.length,r=e.length,s=Array.from(this.$items.values());return e.forEach((function(e,i){t.setAt(i,e)})),s.forEach((function(e,i){t.setAt(r+i,e)})),n+r},e.prototype.indexOf=function(t,e){return Array.from(this.$items.values()).indexOf(t,e)},e.prototype.lastIndexOf=function(t,e){return void 0===e&&(e=this.length-1),Array.from(this.$items.values()).lastIndexOf(t,e)},e.prototype.every=function(t,e){return Array.from(this.$items.values()).every(t,e)},e.prototype.some=function(t,e){return Array.from(this.$items.values()).some(t,e)},e.prototype.forEach=function(t,e){Array.from(this.$items.values()).forEach(t,e)},e.prototype.map=function(t,e){return Array.from(this.$items.values()).map(t,e)},e.prototype.filter=function(t,e){return Array.from(this.$items.values()).filter(t,e)},e.prototype.reduce=function(t,e){return Array.from(this.$items.values()).reduce(t,e)},e.prototype.reduceRight=function(t,e){return Array.from(this.$items.values()).reduceRight(t,e)},e.prototype.find=function(t,e){return Array.from(this.$items.values()).find(t,e)},e.prototype.findIndex=function(t,e){return Array.from(this.$items.values()).findIndex(t,e)},e.prototype.fill=function(t,e,i){throw new Error("ArraySchema#fill() not implemented")},e.prototype.copyWithin=function(t,e,i){throw new Error("ArraySchema#copyWithin() not implemented")},e.prototype.toString=function(){return this.$items.toString()},e.prototype.toLocaleString=function(){return this.$items.toLocaleString()},e.prototype[Symbol.iterator]=function(){return Array.from(this.$items.values())[Symbol.iterator]()},e.prototype[Symbol.unscopables]=function(){return this.$items[Symbol.unscopables]()},e.prototype.entries=function(){return this.$items.entries()},e.prototype.keys=function(){return this.$items.keys()},e.prototype.values=function(){return this.$items.values()},e.prototype.includes=function(t,e){return Array.from(this.$items.values()).includes(t,e)},e.prototype.flatMap=function(t,e){throw new Error("ArraySchema#flatMap() is not supported.")},e.prototype.flat=function(t){throw new Error("ArraySchema#flat() is not supported.")},e.prototype.setIndex=function(t,e){this.$indexes.set(t,e)},e.prototype.getIndex=function(t){return this.$indexes.get(t)},e.prototype.getByIndex=function(t){return this.$items.get(this.$indexes.get(t))},e.prototype.deleteByIndex=function(t){var e=this.$indexes.get(t);this.$items.delete(e),this.$indexes.delete(t)},e.prototype.toArray=function(){return Array.from(this.$items.values())},e.prototype.toJSON=function(){return this.toArray().map((function(t){return"function"==typeof t.toJSON?t.toJSON():t}))},e.prototype.clone=function(t){return t?new(e.bind.apply(e,s([void 0],Array.from(this.$items.values())))):new(e.bind.apply(e,s([void 0],this.map((function(t){return t.$changes?t.clone():t})))))},e.prototype.triggerAll=function(){ht.prototype.triggerAll.apply(this)},e}();function c(t){return t.$proxy=!0,t=new Proxy(t,{get:function(t,e){return"symbol"!=typeof e&&void 0===t[e]?t.get(e):t[e]},set:function(t,e,i){return"symbol"!=typeof e&&-1===e.indexOf("$")&&"onAdd"!==e&&"onRemove"!==e&&"onChange"!==e?t.set(e,i):t[e]=i,!0},deleteProperty:function(t,e){return t.delete(e),!0}})}var d=function(){function e(t){var e=this;if(this.$changes=new o(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,t)if(t instanceof Map)t.forEach((function(t,i){return e.set(i,t)}));else for(var i in t)this.set(i,t[i])}return e.is=function(t){return void 0!==t.map},e.prototype[Symbol.iterator]=function(){return this.$items[Symbol.iterator]()},Object.defineProperty(e.prototype,Symbol.toStringTag,{get:function(){return this.$items[Symbol.toStringTag]},enumerable:!1,configurable:!0}),e.prototype.set=function(e,i){if(null==i)throw new Error("MapSchema#set('"+e+"', "+i+"): trying to set "+i+" value on '"+e+"'.");var n=void 0!==this.$changes.indexes[e],r=n?this.$changes.indexes[e]:this.$refId++,s=n?t.OPERATION.REPLACE:t.OPERATION.ADD,a=void 0!==i.$changes;return a&&i.$changes.setParent(this,this.$changes.root,r),n?a&&this.$items.get(e)!==i&&(s=t.OPERATION.ADD):(this.$changes.indexes[e]=r,this.$indexes.set(r,e)),this.$items.set(e,i),this.$changes.change(e,s),this},e.prototype.get=function(t){return this.$items.get(t)},e.prototype.delete=function(t){return this.$changes.delete(t),this.$items.delete(t)},e.prototype.clear=function(e){var i=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),e&&"string"!=typeof this.$changes.getType()&&this.$items.forEach((function(t){i.$changes.root.removeRef(t.$changes.refId)})),this.$items.clear(),this.$changes.operation({index:0,op:t.OPERATION.CLEAR}),this.$changes.touchParents()},e.prototype.has=function(t){return this.$items.has(t)},e.prototype.forEach=function(t){this.$items.forEach(t)},e.prototype.entries=function(){return this.$items.entries()},e.prototype.keys=function(){return this.$items.keys()},e.prototype.values=function(){return this.$items.values()},Object.defineProperty(e.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),e.prototype.setIndex=function(t,e){this.$indexes.set(t,e)},e.prototype.getIndex=function(t){return this.$indexes.get(t)},e.prototype.getByIndex=function(t){return this.$items.get(this.$indexes.get(t))},e.prototype.deleteByIndex=function(t){var e=this.$indexes.get(t);this.$items.delete(e),this.$indexes.delete(t)},e.prototype.toJSON=function(){var t={};return this.forEach((function(e,i){t[i]="function"==typeof e.toJSON?e.toJSON():e})),t},e.prototype.clone=function(t){var i;return t?i=Object.assign(new e,this):(i=new e,this.forEach((function(t,e){t.$changes?i.set(e,t.clone()):i.set(e,t)}))),i},e.prototype.triggerAll=function(){ht.prototype.triggerAll.apply(this)},e}(),f={};function p(t,e){f[t]=e}function g(t){return f[t]}var m=function(){function t(){this.indexes={},this.fieldsByIndex={},this.deprecated={},this.descriptors={}}return t.create=function(e){var i=new t;return i.schema=Object.assign({},e&&e.schema||{}),i.indexes=Object.assign({},e&&e.indexes||{}),i.fieldsByIndex=Object.assign({},e&&e.fieldsByIndex||{}),i.descriptors=Object.assign({},e&&e.descriptors||{}),i.deprecated=Object.assign({},e&&e.deprecated||{}),i},t.prototype.addField=function(t,e){var i=this.getNextFieldIndex();this.fieldsByIndex[i]=t,this.indexes[t]=i,this.schema[t]=Array.isArray(e)?{array:e[0]}:e},t.prototype.addFilter=function(t,e){return this.filters||(this.filters={},this.indexesWithFilters=[]),this.filters[this.indexes[t]]=e,this.indexesWithFilters.push(this.indexes[t]),!0},t.prototype.addChildrenFilter=function(t,e){var i=this.indexes[t],n=this.schema[t];if(g(Object.keys(n)[0]))return this.childFilters||(this.childFilters={}),this.childFilters[i]=e,!0;console.warn("@filterChildren: field '"+t+"' can't have children. Ignoring filter.")},t.prototype.getChildrenFilter=function(t){return this.childFilters&&this.childFilters[this.indexes[t]]},t.prototype.getNextFieldIndex=function(){return Object.keys(this.schema||{}).length},t}(),y=function(){function t(){this.types={},this.schemas=new Map,this.useFilters=!1}return t.prototype.has=function(t){return this.schemas.has(t)},t.prototype.get=function(t){return this.types[t]},t.prototype.add=function(t,e){void 0===e&&(e=this.schemas.size),t._definition=m.create(t._definition),t._typeid=e,this.types[e]=t,this.schemas.set(t,e)},t.create=function(e){return void 0===e&&(e=new t),function(t){return _(t,e)}},t}(),v=new y;function _(t,e){return void 0===e&&(e=v),function(i,n){var r=i.constructor;r._context=e,e.has(r)||e.add(r);var a=r._definition;if(a.addField(n,t),a.descriptors[n]){if(a.deprecated[n])return;try{throw new Error("@colyseus/schema: Duplicate '"+n+"' definition on '"+r.name+"'.\nCheck @type() annotation")}catch(t){var o=t.stack.split("\n")[4].trim();throw new Error(t.message+" "+o)}}var h=u.is(t),f=!h&&d.is(t);if("string"!=typeof t&&!ht.is(t)){var p=Object.values(t)[0];"string"==typeof p||e.has(p)||e.add(p)}var g="_"+n;a.descriptors[g]={enumerable:!1,configurable:!1,writable:!0},a.descriptors[n]={get:function(){return this[g]},set:function(t){t!==this[g]&&(null!=t?(!h||t instanceof u||(t=new(u.bind.apply(u,s([void 0],t)))),!f||t instanceof d||(t=new d(t)),void 0===t.$proxy&&(f?t=c(t):h&&(t=l(t))),this.$changes.change(n),t.$changes&&t.$changes.setParent(this,this.$changes.root,this._definition.indexes[n])):this.$changes.delete(n),this[g]=t)},enumerable:!0,configurable:!0}}}function x(t,e,i){for(var n=0,r=0,s=i.length;r<s;r++)(n=i.charCodeAt(r))<128?t[e++]=n:n<2048?(t[e++]=192|n>>6,t[e++]=128|63&n):n<55296||n>=57344?(t[e++]=224|n>>12,t[e++]=128|n>>6&63,t[e++]=128|63&n):(r++,n=65536+((1023&n)<<10|1023&i.charCodeAt(r)),t[e++]=240|n>>18,t[e++]=128|n>>12&63,t[e++]=128|n>>6&63,t[e++]=128|63&n)}function w(t,e){t.push(255&e)}function b(t,e){t.push(255&e)}function T(t,e){t.push(255&e),t.push(e>>8&255)}function E(t,e){t.push(255&e),t.push(e>>8&255)}function A(t,e){t.push(255&e),t.push(e>>8&255),t.push(e>>16&255),t.push(e>>24&255)}function S(t,e){var i=e>>24,n=e>>16,r=e>>8,s=e;t.push(255&s),t.push(255&r),t.push(255&n),t.push(255&i)}function C(t,e){var i=Math.floor(e/Math.pow(2,32));S(t,e>>>0),S(t,i)}function O(t,e){var i=e/Math.pow(2,32)>>0;S(t,e>>>0),S(t,i)}var P=new Int32Array(2),R=new Float32Array(P.buffer),M=new Float64Array(P.buffer);function L(t,e){R[0]=e,A(t,P[0])}function I(t,e){M[0]=e,A(t,P[0]),A(t,P[1])}function k(t,e){e||(e="");var i=function(t){for(var e=0,i=0,n=0,r=t.length;n<r;n++)(e=t.charCodeAt(n))<128?i+=1:e<2048?i+=2:e<55296||e>=57344?i+=3:(n++,i+=4);return i}(e),n=0;if(i<32)t.push(160|i),n=1;else if(i<256)t.push(217),b(t,i),n=2;else if(i<65536)t.push(218),E(t,i),n=3;else{if(!(i<4294967296))throw new Error("String too long");t.push(219),S(t,i),n=5}return x(t,t.length,e),n+i}function D(t,e){return isNaN(e)?D(t,0):isFinite(e)?e!==(0|e)?(t.push(203),I(t,e),9):e>=0?e<128?(b(t,e),1):e<256?(t.push(204),b(t,e),2):e<65536?(t.push(205),E(t,e),3):e<4294967296?(t.push(206),S(t,e),5):(t.push(207),O(t,e),9):e>=-32?(t.push(224|e+32),1):e>=-128?(t.push(208),w(t,e),2):e>=-32768?(t.push(209),T(t,e),3):e>=-2147483648?(t.push(210),A(t,e),5):(t.push(211),C(t,e),9):D(t,e>0?Number.MAX_SAFE_INTEGER:-Number.MAX_SAFE_INTEGER)}var F=Object.freeze({__proto__:null,utf8Write:x,int8:w,uint8:b,int16:T,uint16:E,int32:A,uint32:S,int64:C,uint64:O,float32:function(t,e){L(t,e)},float64:function(t,e){I(t,e)},writeFloat32:L,writeFloat64:I,boolean:function(t,e){return b(t,e?1:0)},string:k,number:D});function B(t,e){return N(t,e)<<24>>24}function N(t,e){return t[e.offset++]}function G(t,e){return Y(t,e)<<16>>16}function Y(t,e){return t[e.offset++]|t[e.offset++]<<8}function z(t,e){return t[e.offset++]|t[e.offset++]<<8|t[e.offset++]<<16|t[e.offset++]<<24}function U(t,e){return z(t,e)>>>0}function X(t,e){var i=U(t,e);return z(t,e)*Math.pow(2,32)+i}function V(t,e){var i=U(t,e);return U(t,e)*Math.pow(2,32)+i}var H=new Int32Array(2),j=new Float32Array(H.buffer),W=new Float64Array(H.buffer);function K(t,e){return H[0]=z(t,e),j[0]}function q(t,e){return H[0]=z(t,e),H[1]=z(t,e),W[0]}function $(t,e){var i,n=t[e.offset++];n<192?i=31&n:217===n?i=N(t,e):218===n?i=Y(t,e):219===n&&(i=U(t,e));var r=function(t,e,i){for(var n="",r=0,s=e,a=e+i;s<a;s++){var o=t[s];0!=(128&o)?192!=(224&o)?224!=(240&o)?240!=(248&o)?console.error("Invalid byte "+o.toString(16)):(r=(7&o)<<18|(63&t[++s])<<12|(63&t[++s])<<6|(63&t[++s])<<0)>=65536?(r-=65536,n+=String.fromCharCode(55296+(r>>>10),56320+(1023&r))):n+=String.fromCharCode(r):n+=String.fromCharCode((15&o)<<12|(63&t[++s])<<6|(63&t[++s])<<0):n+=String.fromCharCode((31&o)<<6|63&t[++s]):n+=String.fromCharCode(o)}return n}(t,e.offset,i);return e.offset+=i,r}function J(t,e){var i=t[e.offset++];return i<128?i:202===i?K(t,e):203===i?q(t,e):204===i?N(t,e):205===i?Y(t,e):206===i?U(t,e):207===i?V(t,e):208===i?B(t,e):209===i?G(t,e):210===i?z(t,e):211===i?X(t,e):i>223?-1*(255-i+1):void 0}function Z(t,e){return 255===t[e.offset-1]&&(t[e.offset]<128||t[e.offset]>=202&&t[e.offset]<=211)}var Q=Object.freeze({__proto__:null,int8:B,uint8:N,int16:G,uint16:Y,int32:z,uint32:U,float32:function(t,e){return K(t,e)},float64:function(t,e){return q(t,e)},int64:X,uint64:V,readFloat32:K,readFloat64:q,boolean:function(t,e){return N(t,e)>0},string:$,stringCheck:function(t,e){var i=t[e.offset];return i<192&&i>160||217===i||218===i||219===i},number:J,numberCheck:function(t,e){var i=t[e.offset];return i<128||i>=202&&i<=211},arrayCheck:function(t,e){return t[e.offset]<160},switchStructureCheck:Z}),tt=function(){function e(t){var e=this;this.$changes=new o(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,t&&t.forEach((function(t){return e.add(t)}))}return e.is=function(t){return void 0!==t.collection},e.prototype.add=function(t){var e=this.$refId++;return void 0!==t.$changes&&t.$changes.setParent(this,this.$changes.root,e),this.$changes.indexes[e]=e,this.$indexes.set(e,e),this.$items.set(e,t),this.$changes.change(e),e},e.prototype.at=function(t){var e=Array.from(this.$items.keys())[t];return this.$items.get(e)},e.prototype.entries=function(){return this.$items.entries()},e.prototype.delete=function(t){for(var e,i,n=this.$items.entries();(i=n.next())&&!i.done;)if(t===i.value[1]){e=i.value[0];break}return void 0!==e&&(this.$changes.delete(e),this.$indexes.delete(e),this.$items.delete(e))},e.prototype.clear=function(e){var i=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),e&&"string"!=typeof this.$changes.getType()&&this.$items.forEach((function(t){i.$changes.root.removeRef(t.$changes.refId)})),this.$items.clear(),this.$changes.operation({index:0,op:t.OPERATION.CLEAR}),this.$changes.touchParents()},e.prototype.has=function(t){return Array.from(this.$items.values()).some((function(e){return e===t}))},e.prototype.forEach=function(t){var e=this;this.$items.forEach((function(i,n,r){return t(i,n,e)}))},e.prototype.values=function(){return this.$items.values()},Object.defineProperty(e.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),e.prototype.setIndex=function(t,e){this.$indexes.set(t,e)},e.prototype.getIndex=function(t){return this.$indexes.get(t)},e.prototype.getByIndex=function(t){return this.$items.get(this.$indexes.get(t))},e.prototype.deleteByIndex=function(t){var e=this.$indexes.get(t);this.$items.delete(e),this.$indexes.delete(t)},e.prototype.toArray=function(){return Array.from(this.$items.values())},e.prototype.toJSON=function(){var t=[];return this.forEach((function(e,i){t.push("function"==typeof e.toJSON?e.toJSON():e)})),t},e.prototype.clone=function(t){var i;return t?i=Object.assign(new e,this):(i=new e,this.forEach((function(t){t.$changes?i.add(t.clone()):i.add(t)}))),i},e.prototype.triggerAll=function(){ht.prototype.triggerAll.apply(this)},e}(),et=function(){function e(t){var e=this;this.$changes=new o(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,t&&t.forEach((function(t){return e.add(t)}))}return e.is=function(t){return void 0!==t.set},e.prototype.add=function(e){var i,n;if(this.has(e))return!1;var r=this.$refId++;void 0!==e.$changes&&e.$changes.setParent(this,this.$changes.root,r);var s=null!==(n=null===(i=this.$changes.indexes[r])||void 0===i?void 0:i.op)&&void 0!==n?n:t.OPERATION.ADD;return this.$changes.indexes[r]=r,this.$indexes.set(r,r),this.$items.set(r,e),this.$changes.change(r,s),r},e.prototype.entries=function(){return this.$items.entries()},e.prototype.delete=function(t){for(var e,i,n=this.$items.entries();(i=n.next())&&!i.done;)if(t===i.value[1]){e=i.value[0];break}return void 0!==e&&(this.$changes.delete(e),this.$indexes.delete(e),this.$items.delete(e))},e.prototype.clear=function(e){var i=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),e&&"string"!=typeof this.$changes.getType()&&this.$items.forEach((function(t){i.$changes.root.removeRef(t.$changes.refId)})),this.$items.clear(),this.$changes.operation({index:0,op:t.OPERATION.CLEAR}),this.$changes.touchParents()},e.prototype.has=function(t){for(var e,i=this.$items.values(),n=!1;(e=i.next())&&!e.done;)if(t===e.value){n=!0;break}return n},e.prototype.forEach=function(t){var e=this;this.$items.forEach((function(i,n,r){return t(i,n,e)}))},e.prototype.values=function(){return this.$items.values()},Object.defineProperty(e.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),e.prototype.setIndex=function(t,e){this.$indexes.set(t,e)},e.prototype.getIndex=function(t){return this.$indexes.get(t)},e.prototype.getByIndex=function(t){return this.$items.get(this.$indexes.get(t))},e.prototype.deleteByIndex=function(t){var e=this.$indexes.get(t);this.$items.delete(e),this.$indexes.delete(t)},e.prototype.toArray=function(){return Array.from(this.$items.values())},e.prototype.toJSON=function(){var t=[];return this.forEach((function(e,i){t.push("function"==typeof e.toJSON?e.toJSON():e)})),t},e.prototype.clone=function(t){var i;return t?i=Object.assign(new e,this):(i=new e,this.forEach((function(t){t.$changes?i.add(t.clone()):i.add(t)}))),i},e.prototype.triggerAll=function(){ht.prototype.triggerAll.apply(this)},e}(),it=function(){function t(){this.handlers=[]}return t.prototype.register=function(t,e){return this.handlers.push(t),this},t.prototype.invoke=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.handlers.forEach((function(e){return e.apply(void 0,t)}))},t.prototype.invokeAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Promise.all(this.handlers.map((function(e){return e.apply(void 0,t)})))},t.prototype.remove=function(t){var e=this.handlers.indexOf(t);this.handlers[e]=this.handlers[this.handlers.length-1],this.handlers.pop()},t.prototype.clear=function(){this.handlers=[]},t}(),nt=function(){function t(){this.refIds=new WeakSet,this.containerIndexes=new WeakMap}return t.prototype.addRefId=function(t){this.refIds.has(t)||(this.refIds.add(t),this.containerIndexes.set(t,new Set))},t.get=function(e){return void 0===e.$filterState&&(e.$filterState=new t),e.$filterState},t}(),rt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(Error);function st(t,e,i,n){if(!(t instanceof e))throw new rt("a '"+e.name+"' was expected, but '"+t.constructor.name+"' was provided in "+i.constructor.name+"#"+n)}function at(t,e,i,n,r){!function(t,e,i,n){var r,s=!1;switch(e){case"number":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":case"int64":case"uint64":case"float32":case"float64":r="number",isNaN(t)&&console.log('trying to encode "NaN" in '+i.constructor.name+"#"+n);break;case"string":r="string",s=!0;break;case"boolean":return}if(typeof t!==r&&(!s||s&&null!==t)){var a="'"+JSON.stringify(t)+"'"+(t&&t.constructor&&" ("+t.constructor.name+")"||"");throw new rt("a '"+r+"' was expected, but "+a+" was provided in "+i.constructor.name+"#"+n)}}(i,t,n,r);var s=F[t];if(!s)throw new rt("a '"+t+"' was expected, but "+i+" was provided in "+n.constructor.name+"#"+r);s(e,i)}function ot(t,e,i){return Q[t](e,i)}var ht=function(){function e(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Object.defineProperties(this,{$changes:{value:new o(this,void 0,new a),enumerable:!1,writable:!0},$listeners:{value:{},enumerable:!1,writable:!0}});var i=this._definition.descriptors;i&&Object.defineProperties(this,i),t[0]&&this.assign(t[0])}return e.onError=function(t){console.error(t)},e.is=function(t){return t._definition&&void 0!==t._definition.schema},e.prototype.assign=function(t){return Object.assign(this,t),this},Object.defineProperty(e.prototype,"_definition",{get:function(){return this.constructor._definition},enumerable:!1,configurable:!0}),e.prototype.listen=function(t,e){var i=this;return this.$listeners[t]||(this.$listeners[t]=new it),this.$listeners[t].register(e),function(){return i.$listeners[t].remove(e)}},e.prototype.decode=function(i,n,r,s){void 0===n&&(n={offset:0}),void 0===r&&(r=this),void 0===s&&(s=new Map);var a=this.$changes.root,o=i.length,h=0,l=[];for(a.refs.set(h,this),s.set(h,l);n.offset<o;){var c=i[n.offset++];if(255!=c){var f=r.$changes,p=void 0!==r._definition,m=p?c>>6<<6:c;if(m!==t.OPERATION.CLEAR){var y=p?c%(m||255):J(i,n),v=p?r._definition.fieldsByIndex[y]:"",_=f.getType(y),x=void 0,w=void 0,b=void 0;if(p?w=r["_"+v]:(w=r.getByIndex(y),(m&t.OPERATION.ADD)===t.OPERATION.ADD?(b=r instanceof d?$(i,n):y,r.setIndex(y,b)):b=r.getIndex(y)),(m&t.OPERATION.DELETE)===t.OPERATION.DELETE&&(m!==t.OPERATION.DELETE_AND_ADD&&r.deleteByIndex(y),w&&w.$changes&&a.removeRef(w.$changes.refId),x=null),void 0!==v){if(m===t.OPERATION.DELETE);else if(e.is(_)){var T=J(i,n);if(x=a.refs.get(T),m!==t.OPERATION.REPLACE){var E=this.getSchemaType(i,n,_);x||((x=this.createTypeInstance(E)).$changes.refId=T,w&&(x.onChange=w.onChange,x.onRemove=w.onRemove,x.$listeners=w.$listeners,w.$changes.refId&&T!==w.$changes.refId&&a.removeRef(w.$changes.refId))),a.addRef(T,x,x!==w)}}else if("string"==typeof _)x=ot(_,i,n);else{var A=g(Object.keys(_)[0]),S=J(i,n),C=a.refs.has(S)?w||a.refs.get(S):new A.constructor;if((x=C.clone(!0)).$changes.refId=S,w&&(x.onAdd=w.onAdd,x.onRemove=w.onRemove,x.onChange=w.onChange,w.$changes.refId&&S!==w.$changes.refId)){a.removeRef(w.$changes.refId);for(var O=[],P=w.entries(),R=void 0;(R=P.next())&&!R.done;){var M=R.value,L=M[0],I=M[1];O.push({op:t.OPERATION.DELETE,field:L,value:void 0,previousValue:I})}s.set(w.$changes.refId,O)}a.addRef(S,x,C!==w),A.getProxy&&(x=A.getProxy(x))}var k=w!==x;if(null!=x)if(x.$changes&&x.$changes.setParent(f.ref,f.root,y),r instanceof e)r[v]=x;else if(r instanceof d)L=b,r.$items.set(L,x);else if(r instanceof u)r.setAt(y,x);else if(r instanceof tt){var D=r.add(x);r.setIndex(y,D)}else r instanceof et&&!1!==(D=r.add(x))&&r.setIndex(y,D);k&&l.push({op:m,field:v,dynamicIndex:b,value:x,previousValue:w})}else{console.warn("@colyseus/schema: definition mismatch");for(var F={offset:n.offset};n.offset<o&&(!Z(i,n)||(F.offset=n.offset+1,!a.refs.has(J(i,F))));)n.offset++}}else r.clear(!0)}else{h=J(i,n);var B=a.refs.get(h);if(!B)throw new Error('"refId" not found: '+h);r=B,l=[],s.set(h,l)}}return this._triggerChanges(s),a.garbageCollectDeletedRefs(),s},e.prototype.encode=function(i,n,r){void 0===i&&(i=!1),void 0===n&&(n=[]),void 0===r&&(r=!1);for(var s=this.$changes,a=new WeakSet,o=[s],h=1,l=0;l<h;l++){var u=o[l],c=u.ref,f=c instanceof e;u.ensureRefId(),a.add(u),u!==s&&(u.changed||i)&&(b(n,255),D(n,u.refId));for(var p=i?Array.from(u.allChanges):Array.from(u.changes.values()),m=0,y=p.length;m<y;m++){var v=i?{op:t.OPERATION.ADD,index:p[m]}:p[m],_=v.index,x=f?c._definition.fieldsByIndex&&c._definition.fieldsByIndex[_]:_,w=n.length;if(v.op!==t.OPERATION.TOUCH)if(f)b(n,_|v.op);else{if(b(n,v.op),v.op===t.OPERATION.CLEAR)continue;D(n,_)}if(f||(v.op&t.OPERATION.ADD)!=t.OPERATION.ADD||c instanceof d&&k(n,u.ref.$indexes.get(_)),v.op!==t.OPERATION.DELETE){var T=u.getType(_),E=u.getValue(_);if(E&&E.$changes&&!a.has(E.$changes)&&(o.push(E.$changes),E.$changes.ensureRefId(),h++),v.op!==t.OPERATION.TOUCH){if(e.is(T))st(E,T,c,x),D(n,E.$changes.refId),(v.op&t.OPERATION.ADD)===t.OPERATION.ADD&&this.tryEncodeTypeId(n,T,E.constructor);else if("string"==typeof T)at(T,n,E,c,x);else{var A=g(Object.keys(T)[0]);st(c["_"+x],A.constructor,c,x),D(n,E.$changes.refId)}r&&u.cache(_,n.slice(w))}}}i||r||u.discard()}return n},e.prototype.encodeAll=function(t){return this.encode(!0,[],t)},e.prototype.applyFilters=function(i,n){var r,s;void 0===n&&(n=!1);for(var a=this,o=new Set,h=nt.get(i),l=[this.$changes],u=1,c=[],f=function(f){var p=l[f];if(o.has(p.refId))return"continue";var g=p.ref,m=g instanceof e;b(c,255),D(c,p.refId);var y=h.refIds.has(p),v=n||!y;h.addRefId(p);var _=h.containerIndexes.get(p),x=v?Array.from(p.allChanges):Array.from(p.changes.values());!n&&m&&g._definition.indexesWithFilters&&g._definition.indexesWithFilters.forEach((function(e){!_.has(e)&&p.allChanges.has(e)&&(v?x.push(e):x.push({op:t.OPERATION.ADD,index:e}))}));for(var w=0,T=x.length;w<T;w++){var E=v?{op:t.OPERATION.ADD,index:x[w]}:x[w];if(E.op!==t.OPERATION.CLEAR){var A=E.index;if(E.op!==t.OPERATION.DELETE){var S=p.getValue(A),C=p.getType(A);if(m){if((O=g._definition.filters&&g._definition.filters[A])&&!O.call(g,i,S,a)){S&&S.$changes&&o.add(S.$changes.refId);continue}}else{var O,P=p.parent;if((O=p.getChildrenFilter())&&!O.call(P,i,g.$indexes.get(A),S,a)){S&&S.$changes&&o.add(S.$changes.refId);continue}}if(S.$changes&&(l.push(S.$changes),u++),E.op!==t.OPERATION.TOUCH)if(E.op===t.OPERATION.ADD||m)c.push.apply(c,null!==(r=p.caches[A])&&void 0!==r?r:[]),_.add(A);else if(_.has(A))c.push.apply(c,null!==(s=p.caches[A])&&void 0!==s?s:[]);else{if(_.add(A),b(c,t.OPERATION.ADD),D(c,A),g instanceof d){var R=p.ref.$indexes.get(A);k(c,R)}S.$changes?D(c,S.$changes.refId):F[C](c,S)}else S.$changes&&!m&&(b(c,t.OPERATION.ADD),D(c,A),g instanceof d&&(R=p.ref.$indexes.get(A),k(c,R)),D(c,S.$changes.refId))}else m?b(c,E.op|A):(b(c,E.op),D(c,A))}else b(c,E.op)}},p=0;p<u;p++)f(p);return c},e.prototype.clone=function(){var t=new this.constructor,e=this._definition.schema;for(var i in e)"object"==typeof this[i]&&"function"==typeof this[i].clone?t[i]=this[i].clone():t[i]=this[i];return t},e.prototype.triggerAll=function(){if(0!==this.$changes.root.refs.size){var t=new Map;e.prototype._triggerAllFillChanges.call(this,this,t);try{e.prototype._triggerChanges.call(this,t)}catch(t){e.onError(t)}}},e.prototype.toJSON=function(){var t=this._definition.schema,e=this._definition.deprecated,i={};for(var n in t)e[n]||null===this[n]||void 0===this[n]||(i[n]="function"==typeof this[n].toJSON?this[n].toJSON():this["_"+n]);return i},e.prototype.discardAllChanges=function(){this.$changes.discardAll()},e.prototype.getByIndex=function(t){return this[this._definition.fieldsByIndex[t]]},e.prototype.deleteByIndex=function(t){this[this._definition.fieldsByIndex[t]]=void 0},e.prototype.tryEncodeTypeId=function(t,e,i){e._typeid!==i._typeid&&(b(t,213),D(t,i._typeid))},e.prototype.getSchemaType=function(t,e,i){var n;return 213===t[e.offset]&&(e.offset++,n=this.constructor._context.get(J(t,e))),n||i},e.prototype.createTypeInstance=function(t){var e=new t;return e.$changes.root=this.$changes.root,e},e.prototype._triggerAllFillChanges=function(i,n){if(!n.has(i.$changes.refId)){var r=[];if(n.set(i.$changes.refId||0,r),i instanceof e){var s=i._definition.schema;for(var a in s)void 0!==(c=i["_"+a])&&(r.push({op:t.OPERATION.ADD,field:a,value:c,previousValue:void 0}),void 0!==c.$changes&&e.prototype._triggerAllFillChanges.call(this,c,n))}else for(var o=i.entries(),h=void 0;(h=o.next())&&!h.done;){var l=h.value,u=l[0],c=l[1];r.push({op:t.OPERATION.ADD,field:u,dynamicIndex:u,value:c,previousValue:void 0}),void 0!==c.$changes&&e.prototype._triggerAllFillChanges.call(this,c,n)}}},e.prototype._triggerChanges=function(i){var n=this;i.forEach((function(i,r){var s,a,o,h,l,u,c,d,f,p,g,m;if(i.length>0){for(var y=n.$changes.root.refs.get(r),v=y instanceof e,_=0;_<i.length;_++){var x=i[_],w=y.$listeners&&y.$listeners[x.field];if(v||(x.op===t.OPERATION.ADD&&void 0===x.previousValue?null===(a=(s=y).onAdd)||void 0===a||a.call(s,x.value,null!==(o=x.dynamicIndex)&&void 0!==o?o:x.field):x.op===t.OPERATION.DELETE?void 0!==x.previousValue&&(null===(l=(h=y).onRemove)||void 0===l||l.call(h,x.previousValue,null!==(u=x.dynamicIndex)&&void 0!==u?u:x.field)):x.op===t.OPERATION.DELETE_AND_ADD?(void 0!==x.previousValue&&(null===(d=(c=y).onRemove)||void 0===d||d.call(c,x.previousValue,x.dynamicIndex)),null===(p=(f=y).onAdd)||void 0===p||p.call(f,x.value,x.dynamicIndex)):x.op!==t.OPERATION.REPLACE&&x.value===x.previousValue||null===(m=(g=y).onChange)||void 0===m||m.call(g,x.value,x.dynamicIndex)),(x.op&t.OPERATION.DELETE)===t.OPERATION.DELETE&&x.previousValue instanceof e&&x.previousValue.onRemove&&x.previousValue.onRemove(),w)try{w.invoke(x.value,x.previousValue)}catch(t){e.onError(t)}}if(v&&y.onChange)try{y.onChange(i)}catch(t){e.onError(t)}}}))},e._definition=m.create(),e}(),lt=new y,ut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),r([_("string",lt)],e.prototype,"name",void 0),r([_("string",lt)],e.prototype,"type",void 0),r([_("number",lt)],e.prototype,"referencedType",void 0),e}(ht),ct=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fields=new u,e}return n(e,t),r([_("number",lt)],e.prototype,"id",void 0),r([_([ut],lt)],e.prototype,"fields",void 0),e}(ht),dt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.types=new u,e}return n(e,t),e.encode=function(t){var i=t.constructor,n=new e;n.rootType=i._typeid;var r=function(t,e){for(var i in e){var r=new ut;r.name=i;var s=void 0;if("string"==typeof e[i])s=e[i];else{var a=e[i],o=void 0;ht.is(a)?(s="ref",o=e[i]):"string"==typeof a[s=Object.keys(a)[0]]?s+=":"+a[s]:o=a[s],r.referencedType=o?o._typeid:-1}r.type=s,t.fields.push(r)}n.types.push(t)},s=i._context.types;for(var a in s){var o=new ct;o.id=Number(a),r(o,s[a]._definition.schema)}return n.encodeAll()},e.decode=function(t,i){var r=new y,s=new e;s.decode(t,i);var a=s.types.reduce((function(t,e){var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(ht),s=e.id;return t[s]=i,r.add(i,s),t}),{});s.types.forEach((function(t){var e=a[t.id];t.fields.forEach((function(t){var i;if(void 0!==t.referencedType){var n=t.type,s=a[t.referencedType];if(!s){var o=t.type.split(":");n=o[0],s=o[1]}"ref"===n?_(s,r)(e.prototype,t.name):_(((i={})[n]=s,i),r)(e.prototype,t.name)}else _(t.type,r)(e.prototype,t.name)}))}));var o=a[s.rootType],h=new o;for(var l in o._definition.schema){var u=o._definition.schema[l];"string"!=typeof u&&(h[l]="function"==typeof u?new u:new(g(Object.keys(u)[0]).constructor))}return h},r([_([ct],lt)],e.prototype,"types",void 0),r([_("number",lt)],e.prototype,"rootType",void 0),e}(ht);p("map",{constructor:d,getProxy:c}),p("array",{constructor:u,getProxy:l}),p("set",{constructor:et}),p("collection",{constructor:tt}),t.ArraySchema=u,t.CollectionSchema=tt,t.Context=y,t.MapSchema=d,t.Reflection=dt,t.ReflectionField=ut,t.ReflectionType=ct,t.Schema=ht,t.SchemaDefinition=m,t.SetSchema=et,t.decode=Q,t.defineTypes=function(t,e,i){for(var n in void 0===i&&(i=t._context||v),e)_(e[n],i)(t.prototype,n);return t},t.deprecated=function(t,e){return void 0===t&&(t=!0),function(e,i){var n=e.constructor._definition;n.deprecated[i]=!0,t&&(n.descriptors[i]={get:function(){throw new Error(i+" is deprecated.")},set:function(t){},enumerable:!1,configurable:!0})}},t.dumpChanges=function(t){for(var e=[t.$changes],i={},n=i,r=function(t){var i=e[t];i.changes.forEach((function(t){var e=i.ref,r=t.index,s=e._definition?e._definition.fieldsByIndex[r]:e.$indexes.get(r);n[s]=i.getValue(r)}))},s=0;s<1;s++)r(s);return i},t.encode=F,t.filter=function(t){return function(e,i){var n=e.constructor;n._definition.addFilter(i,t)&&(n._context.useFilters=!0)}},t.filterChildren=function(t){return function(e,i){var n=e.constructor;n._definition.addChildrenFilter(i,t)&&(n._context.useFilters=!0)}},t.hasFilter=function(t){return t._context&&t._context.useFilters},t.registerType=p,t.type=_,Object.defineProperty(t,"__esModule",{value:!0})}(e)})),B=function(){function t(t,e){var i=this;this.onStateChange=I(),this.onError=I(),this.onLeave=I(),this.onJoin=I(),this.hasJoined=!1,this.onMessageHandlers=M(),this.id=null,this.name=t,e&&(this.serializer=new(R("schema")),this.rootSchema=e,this.serializer.state=new e),this.onError((function(t,e){return console.warn("colyseus.js - onError => ("+t+") "+e)})),this.onLeave((function(){return i.removeAllListeners()}))}return t.prototype.connect=function(t){var e=this;this.connection=new C,this.connection.events.onmessage=this.onMessageCallback.bind(this),this.connection.events.onclose=function(t){if(!e.hasJoined)return console.warn("Room connection was closed unexpectedly ("+t.code+"): "+t.reason),void e.onError.invoke(t.code,t.reason);e.onLeave.invoke(t.code),e.destroy()},this.connection.events.onerror=function(t){console.warn("Room, onError ("+t.code+"): "+t.reason),e.onError.invoke(t.code,t.reason)},this.connection.connect(t)},t.prototype.leave=function(t){var i=this;return void 0===t&&(t=!0),new Promise((function(n){i.onLeave((function(t){return n(t)})),i.connection?t?i.connection.send([e.Protocol.LEAVE_ROOM]):i.connection.close():i.onLeave.invoke(4e3)}))},t.prototype.onMessage=function(t,e){return this.onMessageHandlers.on(this.getMessageHandlerKey(t),e)},t.prototype.send=function(t,i){var n,r=[e.Protocol.ROOM_DATA];if("string"==typeof t?F.encode.string(r,t):F.encode.number(r,t),void 0!==i){var s=b(i);(n=new Uint8Array(r.length+s.byteLength)).set(new Uint8Array(r),0),n.set(new Uint8Array(s),r.length)}else n=new Uint8Array(r);this.connection.send(n.buffer)},Object.defineProperty(t.prototype,"state",{get:function(){return this.serializer.getState()},enumerable:!1,configurable:!0}),t.prototype.removeAllListeners=function(){this.onJoin.clear(),this.onStateChange.clear(),this.onError.clear(),this.onLeave.clear(),this.onMessageHandlers.events={}},t.prototype.onMessageCallback=function(t){var i=Array.from(new Uint8Array(t.data)),n=i[0];if(n===e.Protocol.JOIN_ROOM){var r=1;if(this.serializerId=function(t,e){for(var i=t[e++],n="",r=0,s=e,a=e+i;s<a;s++){var o=t[s];if(0!=(128&o))if(192!=(224&o))if(224!=(240&o)){if(240!=(248&o))throw new Error("Invalid byte "+o.toString(16));(r=(7&o)<<18|(63&t[++s])<<12|(63&t[++s])<<6|(63&t[++s])<<0)>=65536?(r-=65536,n+=String.fromCharCode(55296+(r>>>10),56320+(1023&r))):n+=String.fromCharCode(r)}else n+=String.fromCharCode((15&o)<<12|(63&t[++s])<<6|(63&t[++s])<<0);else n+=String.fromCharCode((31&o)<<6|63&t[++s]);else n+=String.fromCharCode(o)}return n}(i,r),r+=function(t){void 0===t&&(t="");for(var e=0,i=0,n=0,r=t.length;n<r;n++)(e=t.charCodeAt(n))<128?i+=1:e<2048?i+=2:e<55296||e>=57344?i+=3:(n++,i+=4);return i+1}(this.serializerId),!this.serializer){var s=R(this.serializerId);this.serializer=new s}i.length>r&&this.serializer.handshake&&this.serializer.handshake(i,{offset:r}),this.hasJoined=!0,this.onJoin.invoke(),this.connection.send([e.Protocol.JOIN_ROOM])}else if(n===e.Protocol.ERROR){var a={offset:1},o=F.decode.number(i,a),h=F.decode.string(i,a);this.onError.invoke(o,h)}else if(n===e.Protocol.LEAVE_ROOM)this.leave();else if(n===e.Protocol.ROOM_DATA_SCHEMA){var l={offset:1};(h=new(c=this.serializer.getState().constructor._context.get(F.decode.number(i,l)))).decode(i,l),this.dispatchMessage(c,h)}else if(n===e.Protocol.ROOM_STATE)i.shift(),this.setState(i);else if(n===e.Protocol.ROOM_STATE_PATCH)i.shift(),this.patch(i);else if(n===e.Protocol.ROOM_DATA){var u={offset:1},c=F.decode.stringCheck(i,u)?F.decode.string(i,u):F.decode.number(i,u);h=i.length>u.offset?function(t,e){void 0===e&&(e=0);var i=new x(t,e),n=i._parse();if(i._offset!==t.byteLength)throw new Error(t.byteLength-i._offset+" trailing bytes");return n}(t.data,u.offset):void 0,this.dispatchMessage(c,h)}},t.prototype.setState=function(t){this.serializer.setState(t),this.onStateChange.invoke(this.serializer.getState())},t.prototype.patch=function(t){this.serializer.patch(t),this.onStateChange.invoke(this.serializer.getState())},t.prototype.dispatchMessage=function(t,e){var i=this.getMessageHandlerKey(t);this.onMessageHandlers.events[i]?this.onMessageHandlers.emit(i,e):this.onMessageHandlers.events["*"]?this.onMessageHandlers.emit("*",t,e):console.warn("colyseus.js: onMessage() not registered for type '"+t+"'.")},t.prototype.destroy=function(){this.serializer&&this.serializer.teardown()},t.prototype.getMessageHandlerKey=function(t){switch(typeof t){case"function":return"$"+t._typeid;case"string":return t;case"number":return"i"+t;default:throw new Error("invalid message type.")}},t}();function N(){return k||(k="undefined"!=typeof cc&&cc.sys&&cc.sys.localStorage?cc.sys.localStorage:"undefined"!=typeof window&&window.localStorage?window.localStorage:{cache:{},setItem:function(t,e){this.cache[t]=e},getItem:function(t){this.cache[t]},removeItem:function(t){delete this.cache[t]}}),k}e.Platform=void 0,(D=e.Platform||(e.Platform={})).ios="ios",D.android="android";var G,Y=function(){function t(t){var e,i,n,r=this;this._id=void 0,this.username=void 0,this.displayName=void 0,this.avatarUrl=void 0,this.isAnonymous=void 0,this.email=void 0,this.lang=void 0,this.location=void 0,this.timezone=void 0,this.metadata=void 0,this.devices=void 0,this.facebookId=void 0,this.twitterId=void 0,this.googleId=void 0,this.gameCenterId=void 0,this.steamId=void 0,this.friendIds=void 0,this.blockedUserIds=void 0,this.createdAt=void 0,this.updatedAt=void 0,this.token=void 0,this.endpoint=t.replace("ws","http"),e="colyseus-auth-token",i=function(t){return r.token=t},n=N().getItem(e),"undefined"!=typeof Promise&&n instanceof Promise?n.then((function(t){return i(t)})):i(n)}return Object.defineProperty(t.prototype,"hasToken",{get:function(){return!!this.token},enumerable:!1,configurable:!0}),t.prototype.login=function(t){return void 0===t&&(t={}),r(this,void 0,void 0,(function(){var e,i,n;return s(this,(function(r){switch(r.label){case 0:return e=Object.assign({},t),this.hasToken&&(e.token=this.token),[4,this.request("post","/auth",e)];case 1:for(n in i=r.sent(),this.token=i.token,s="colyseus-auth-token",a=this.token,N().setItem(s,a),i)this.hasOwnProperty(n)&&(this[n]=i[n]);return this.registerPingService(),[2,this]}var s,a}))}))},t.prototype.save=function(){return r(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.request("put","/auth",{},{username:this.username,displayName:this.displayName,avatarUrl:this.avatarUrl,lang:this.lang,location:this.location,timezone:this.timezone})];case 1:return t.sent(),[2,this]}}))}))},t.prototype.getFriends=function(){return r(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.request("get","/friends/all")];case 1:return[2,t.sent()]}}))}))},t.prototype.getOnlineFriends=function(){return r(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.request("get","/friends/online")];case 1:return[2,t.sent()]}}))}))},t.prototype.getFriendRequests=function(){return r(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.request("get","/friends/requests")];case 1:return[2,t.sent()]}}))}))},t.prototype.sendFriendRequest=function(t){return r(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.request("post","/friends/requests",{userId:t})];case 1:return[2,e.sent()]}}))}))},t.prototype.acceptFriendRequest=function(t){return r(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.request("put","/friends/requests",{userId:t})];case 1:return[2,e.sent()]}}))}))},t.prototype.declineFriendRequest=function(t){return r(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.request("del","/friends/requests",{userId:t})];case 1:return[2,e.sent()]}}))}))},t.prototype.blockUser=function(t){return r(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.request("post","/friends/block",{userId:t})];case 1:return[2,e.sent()]}}))}))},t.prototype.unblockUser=function(t){return r(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.request("put","/friends/block",{userId:t})];case 1:return[2,e.sent()]}}))}))},t.prototype.request=function(t,e,i,n,a){return void 0===i&&(i={}),void 0===a&&(a={}),r(this,void 0,void 0,(function(){var r,o,h,l;return s(this,(function(s){switch(s.label){case 0:for(o in a.Accept="application/json",this.hasToken&&(a.Authorization="Bearer "+this.token),r=[],i)r.push(o+"="+i[o]);return h=r.length>0?"?"+r.join("&"):"",l={headers:a},n&&(l.body=n),[4,v[t](""+this.endpoint+e+h,l)];case 1:return[2,s.sent().data]}}))}))},t.prototype.logout=function(){var t;this.token=void 0,t="colyseus-auth-token",N().removeItem(t),this.unregisterPingService()},t.prototype.registerPingService=function(t){var e=this;void 0===t&&(t=15e3),this.unregisterPingService(),this.keepOnlineInterval=setInterval((function(){return e.request("get","/auth")}),t)},t.prototype.unregisterPingService=function(){clearInterval(this.keepOnlineInterval)},t}(),z=function(t){function e(i,n){var r=t.call(this,i)||this;return r.code=n,Object.setPrototypeOf(r,e.prototype),r}return n(e,t),e}(Error),U="undefined"!=typeof window&&void 0!==(null===(G=null===window||void 0===window?void 0:window.location)||void 0===G?void 0:G.hostname)?window.location.protocol.replace("http","ws")+"//"+window.location.hostname+(window.location.port&&":"+window.location.port):"ws://127.0.0.1:2567",X=function(){function t(t){void 0===t&&(t=U),this.endpoint=t}return Object.defineProperty(t.prototype,"auth",{get:function(){return this._auth||(this._auth=new Y(this.endpoint)),this._auth},enumerable:!1,configurable:!0}),t.prototype.joinOrCreate=function(t,e,i){return void 0===e&&(e={}),r(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,this.createMatchMakeRequest("joinOrCreate",t,e,i)];case 1:return[2,n.sent()]}}))}))},t.prototype.create=function(t,e,i){return void 0===e&&(e={}),r(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,this.createMatchMakeRequest("create",t,e,i)];case 1:return[2,n.sent()]}}))}))},t.prototype.join=function(t,e,i){return void 0===e&&(e={}),r(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,this.createMatchMakeRequest("join",t,e,i)];case 1:return[2,n.sent()]}}))}))},t.prototype.joinById=function(t,e,i){return void 0===e&&(e={}),r(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,this.createMatchMakeRequest("joinById",t,e,i)];case 1:return[2,n.sent()]}}))}))},t.prototype.reconnect=function(t,e,i){return r(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,this.createMatchMakeRequest("joinById",t,{sessionId:e},i)];case 1:return[2,n.sent()]}}))}))},t.prototype.getAvailableRooms=function(t){return void 0===t&&(t=""),r(this,void 0,void 0,(function(){var e;return s(this,(function(i){switch(i.label){case 0:return e=this.endpoint.replace("ws","http")+"/matchmake/"+t,[4,d(e,{headers:{Accept:"application/json"}})];case 1:return[2,i.sent().data]}}))}))},t.prototype.consumeSeatReservation=function(t,e){return r(this,void 0,void 0,(function(){var i;return s(this,(function(n){return(i=this.createRoom(t.room.name,e)).id=t.room.roomId,i.sessionId=t.sessionId,i.connect(this.buildEndpoint(t.room,{sessionId:i.sessionId})),[2,new Promise((function(t,e){var n=function(t,i){return e(new _(t,i))};i.onError.once(n),i.onJoin.once((function(){i.onError.remove(n),t(i)}))}))]}))}))},t.prototype.createMatchMakeRequest=function(t,e,i,n){return void 0===i&&(i={}),r(this,void 0,void 0,(function(){var r,a;return s(this,(function(s){switch(s.label){case 0:return r=this.endpoint.replace("ws","http")+"/matchmake/"+t+"/"+e,this._auth&&this._auth.hasToken&&(i.token=this._auth.token),[4,p(r,{headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i)})];case 1:if((a=s.sent().data).error)throw new z(a.error,a.code);return[2,this.consumeSeatReservation(a,n)]}}))}))},t.prototype.createRoom=function(t,e){return new B(t,e)},t.prototype.buildEndpoint=function(t,e){void 0===e&&(e={});var i=[];for(var n in e)e.hasOwnProperty(n)&&i.push(n+"="+e[n]);return this.endpoint+"/"+t.processId+"/"+t.roomId+"?"+i.join("&")},t}(),V=function(){function t(){}return t.prototype.setState=function(t){this.state.decode(t)},t.prototype.getState=function(){return this.state},t.prototype.patch=function(t){this.state.decode(t)},t.prototype.teardown=function(){var t,e;null===(e=null===(t=this.state)||void 0===t?void 0:t.$changes)||void 0===e||e.root.clearRefs()},t.prototype.handshake=function(t,e){this.state?(new F.Reflection).decode(t,e):this.state=F.Reflection.decode(t,e)},t}(),H=function(){function t(){}return t.prototype.setState=function(t){},t.prototype.getState=function(){return null},t.prototype.patch=function(t){},t.prototype.teardown=function(){},t.prototype.handshake=function(t){},t}();P("schema",V),P("none",H),e.Auth=Y,e.Client=X,e.Room=B,e.SchemaSerializer=V,e.registerSerializer=P,Object.defineProperty(e,"__esModule",{value:!0})})(e)}).call(this,i(3))},function(t,e,i){"use strict";var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0}),i(39),i(40);var r,s=i(74),a=i(1),o=i(138),h=i(139),l=i(26),u=i(0),c=i(140),d=n(i(2)),f=i(142),p=i(71),g=i(143),m=new d.ClashDomeMessageClient({onLoginSuccess:function(){d.SDK.onLoginSuccess()},onStartGame:function(t){y(t)}}),y=function(t){var e={type:Phaser.AUTO,backgroundColor:"0x070b47",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,parent:"content",width:a.GameConstants.GAME_WIDTH,height:a.GameConstants.GAME_HEIGHT},scene:[o.BootScene,h.PreloadScene,c.SplashScene,p.ShopScene,l.BoardScene,g.PaymentScene,f.OrientationLock]};r=new s.Game(e,t),window.focus(),m.dispatchGameStarted(r);var i=function(){window.innerWidth>window.innerHeight?r.scene.stop("OrientationLock"):r.scene.run("OrientationLock"),d.SDK.onOrientationChange()};window.addEventListener("orientationchange",i),window.addEventListener("resize",i),window.addEventListener("fullscreenchange",(function(){var t=Math.max(window.innerWidth,window.innerHeight)/Math.min(window.innerWidth,window.innerHeight);u.GameVars.scaleX=a.GameConstants.GAME_WIDTH/a.GameConstants.GAME_HEIGHT/t,u.GameVars.correctionScale=t<=1.6?.825:1,d.SDK.onOrientationChange()}))}},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var s=i(4),a=i(0),o=function(t){function e(i,n){var r=t.call(this,i)||this;return a.GameVars.reactClass=n,e.currentInstance=r,r}return r(e,t),e.prototype.onBlur=function(){s.AudioManager.mute(),t.prototype.onBlur.call(this)},e.prototype.onFocus=function(){s.AudioManager.unmute(),t.prototype.onFocus.call(this)},e}(Phaser.Game);e.Game=o},function(t,e,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{h(n.next(t))}catch(t){s(t)}}function o(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}h((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var i,n,r,s,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&s[0]?n.return:s[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,s[1])).done)return r;switch(n=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},a=this&&this.__read||function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,s=i.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return a},o=this&&this.__spreadArray||function(t,e){for(var i=0,n=e.length,r=t.length;i<n;i++,r++)t[r]=e[i];return t},h=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.ActionBuilder=e.TransactionBuilder=e.Api=void 0;var l=i(76),u=i(44),c=function(){function t(t){this.contracts=new Map,this.cachedAbis=new Map,this.transactionExtensions=[{id:1,type:"resource_payer",keys:["payer","max_net_bytes","max_cpu_us","max_memory_bytes"]}],this.rpc=t.rpc,this.authorityProvider=t.authorityProvider||t.rpc,this.abiProvider=t.abiProvider||t.rpc,this.signatureProvider=t.signatureProvider,this.chainId=t.chainId,this.textEncoder=t.textEncoder,this.textDecoder=t.textDecoder,this.abiTypes=u.getTypesFromAbi(u.createAbiTypes()),this.transactionTypes=u.getTypesFromAbi(u.createTransactionTypes())}return t.prototype.rawAbiToJson=function(t){var e=new u.SerialBuffer({textEncoder:this.textEncoder,textDecoder:this.textDecoder,array:t});if(!u.supportedAbiVersion(e.getString()))throw new Error("Unsupported abi version");return e.restartRead(),this.abiTypes.get("abi_def").deserialize(e)},t.prototype.jsonToRawAbi=function(t){var e=new u.SerialBuffer({textEncoder:this.textEncoder,textDecoder:this.textDecoder});if(this.abiTypes.get("abi_def").serialize(e,t),!u.supportedAbiVersion(e.getString()))throw new Error("Unsupported abi version");return e.asUint8Array()},t.prototype.getCachedAbi=function(t,e){return void 0===e&&(e=!1),r(this,void 0,void 0,(function(){var i,n,r,a;return s(this,(function(s){switch(s.label){case 0:if(!e&&this.cachedAbis.get(t))return[2,this.cachedAbis.get(t)];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.abiProvider.getRawAbi(t)];case 2:return n=s.sent().abi,r=this.rawAbiToJson(n),i={rawAbi:n,abi:r},[3,4];case 3:throw(a=s.sent()).message="fetching abi for "+t+": "+a.message,a;case 4:if(!i)throw new Error("Missing abi for "+t);return this.cachedAbis.set(t,i),[2,i]}}))}))},t.prototype.getAbi=function(t,e){return void 0===e&&(e=!1),r(this,void 0,void 0,(function(){return s(this,(function(i){switch(i.label){case 0:return[4,this.getCachedAbi(t,e)];case 1:return[2,i.sent().abi]}}))}))},t.prototype.getTransactionAbis=function(t,e){return void 0===e&&(e=!1),r(this,void 0,void 0,(function(){var i,n,h,l,u=this;return s(this,(function(c){return i=(t.context_free_actions||[]).concat(t.actions),n=i.map((function(t){return t.account})),h=new Set(n),l=o([],a(h)).map((function(t){return r(u,void 0,void 0,(function(){var i;return s(this,(function(n){switch(n.label){case 0:return i={accountName:t},[4,this.getCachedAbi(t,e)];case 1:return[2,(i.abi=n.sent().rawAbi,i)]}}))}))})),[2,Promise.all(l)]}))}))},t.prototype.getContract=function(t,e){return void 0===e&&(e=!1),r(this,void 0,void 0,(function(){var i,n,r,a,o,l,c,d,f,p,g;return s(this,(function(s){switch(s.label){case 0:return!e&&this.contracts.get(t)?[2,this.contracts.get(t)]:[4,this.getAbi(t,e)];case 1:i=s.sent(),n=u.getTypesFromAbi(u.createInitialTypes(),i),r=new Map;try{for(a=h(i.actions),o=a.next();!o.done;o=a.next())l=o.value,c=l.name,d=l.type,r.set(c,u.getType(n,d))}catch(t){p={error:t}}finally{try{o&&!o.done&&(g=a.return)&&g.call(a)}finally{if(p)throw p.error}}return f={types:n,actions:r},this.contracts.set(t,f),[2,f]}}))}))},t.prototype.serialize=function(t,e,i){this.transactionTypes.get(e).serialize(t,i)},t.prototype.deserialize=function(t,e){return this.transactionTypes.get(e).deserialize(t)},t.prototype.serializeTransaction=function(t){var e=new u.SerialBuffer({textEncoder:this.textEncoder,textDecoder:this.textDecoder});return this.serialize(e,"transaction",n({max_net_usage_words:0,max_cpu_usage_ms:0,delay_sec:0,context_free_actions:[],actions:[],transaction_extensions:[]},t)),e.asUint8Array()},t.prototype.serializeContextFreeData=function(t){var e,i;if(!t||!t.length)return null;var n=new u.SerialBuffer({textEncoder:this.textEncoder,textDecoder:this.textDecoder});n.pushVaruint32(t.length);try{for(var r=h(t),s=r.next();!s.done;s=r.next()){var a=s.value;n.pushBytes(a)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(e)throw e.error}}return n.asUint8Array()},t.prototype.deserializeTransaction=function(t){var e=new u.SerialBuffer({textEncoder:this.textEncoder,textDecoder:this.textDecoder});return e.pushArray(t),this.deserialize(e,"transaction")},t.prototype.serializeTransactionExtensions=function(t){var e=[];if(t.resource_payer){var i=new u.SerialBuffer({textEncoder:this.textEncoder,textDecoder:this.textDecoder});u.getTypesFromAbi(u.createTransactionExtensionTypes()).get("resource_payer").serialize(i,t.resource_payer),e=o(o([],a(e)),[[1,u.arrayToHex(i.asUint8Array())]])}return e},t.prototype.deserializeTransactionExtensions=function(t){var e=this,i={};return t.forEach((function(t){var n=e.transactionExtensions.find((function(e){return e.id===t[0]}));if(void 0===n)throw new Error("Transaction Extension could not be determined: "+t);var r=u.getTypesFromAbi(u.createTransactionExtensionTypes()),s=new u.SerialBuffer({textEncoder:e.textEncoder,textDecoder:e.textDecoder});s.pushArray(u.hexToUint8Array(t[1]));var a=r.get(n.type).deserialize(s);1===t[0]&&(a.max_net_bytes=Number(a.max_net_bytes),a.max_cpu_us=Number(a.max_cpu_us),a.max_memory_bytes=Number(a.max_memory_bytes),i.resource_payer=a)})),i},t.prototype.deleteTransactionExtensionObjects=function(t){return delete t.resource_payer,t},t.prototype.serializeActions=function(t){return r(this,void 0,void 0,(function(){var e=this;return s(this,(function(i){switch(i.label){case 0:return[4,Promise.all(t.map((function(t){return r(e,void 0,void 0,(function(){var e,i,n,r,a;return s(this,(function(s){switch(s.label){case 0:return e=t.account,i=t.name,n=t.authorization,r=t.data,[4,this.getContract(e)];case 1:return a=s.sent(),"object"!=typeof r?[2,t]:[2,u.serializeAction(a,e,i,n,r,this.textEncoder,this.textDecoder)]}}))}))})))];case 1:return[2,i.sent()]}}))}))},t.prototype.deserializeActions=function(t){return r(this,void 0,void 0,(function(){var e=this;return s(this,(function(i){switch(i.label){case 0:return[4,Promise.all(t.map((function(t){var i=t.account,n=t.name,a=t.authorization,o=t.data;return r(e,void 0,void 0,(function(){var t;return s(this,(function(e){switch(e.label){case 0:return[4,this.getContract(i)];case 1:return t=e.sent(),[2,u.deserializeAction(t,i,n,a,o,this.textEncoder,this.textDecoder)]}}))}))})))];case 1:return[2,i.sent()]}}))}))},t.prototype.deserializeTransactionWithActions=function(t){return r(this,void 0,void 0,(function(){var e,i,r;return s(this,(function(s){switch(s.label){case 0:return"string"==typeof t&&(t=u.hexToUint8Array(t)),e=this.deserializeTransaction(t),[4,this.deserializeActions(e.context_free_actions)];case 1:return i=s.sent(),[4,this.deserializeActions(e.actions)];case 2:return r=s.sent(),[2,n(n({},e),{context_free_actions:i,actions:r})]}}))}))},t.prototype.deflateSerializedArray=function(t){return l.deflate(t,{level:9})},t.prototype.inflateSerializedArray=function(t){return l.inflate(t)},t.prototype.transact=function(t,e){var i=void 0===e?{}:e,a=i.broadcast,o=void 0===a||a,h=i.sign,l=void 0===h||h,u=i.readOnlyTrx,c=i.returnFailureTraces,d=i.requiredKeys,f=i.compression,p=i.blocksBehind,g=i.useLastIrreversible,m=i.expireSeconds;return r(this,void 0,void 0,(function(){var e,i,r,a,h,y,v,_;return s(this,(function(s){switch(s.label){case 0:if("number"==typeof p&&g)throw new Error("Use either blocksBehind or useLastIrreversible");return this.chainId?[3,2]:[4,this.rpc.get_info()];case 1:e=s.sent(),this.chainId=e.chain_id,s.label=2;case 2:return"number"!=typeof p&&!g||!m?[3,4]:[4,this.generateTapos(e,t,p,g,m)];case 3:t=s.sent(),s.label=4;case 4:if(!this.hasRequiredTaposFields(t))throw new Error("Required configuration or TAPOS fields are not present");return[4,this.getTransactionAbis(t)];case 5:return i=s.sent(),r=[n({},t)],_={},[4,this.serializeTransactionExtensions(t)];case 6:return _.transaction_extensions=s.sent(),[4,this.serializeActions(t.context_free_actions||[])];case 7:return _.context_free_actions=s.sent(),[4,this.serializeActions(t.actions)];case 8:return t=n.apply(void 0,r.concat([(_.actions=s.sent(),_)])),t=this.deleteTransactionExtensionObjects(t),a=this.serializeTransaction(t),h=this.serializeContextFreeData(t.context_free_data),y={serializedTransaction:a,serializedContextFreeData:h,signatures:[]},l?d?[3,11]:[4,this.signatureProvider.getAvailableKeys()]:[3,13];case 9:return v=s.sent(),[4,this.authorityProvider.getRequiredKeys({transaction:t,availableKeys:v})];case 10:d=s.sent(),s.label=11;case 11:return[4,this.signatureProvider.sign({chainId:this.chainId,requiredKeys:d,serializedTransaction:a,serializedContextFreeData:h,abis:i})];case 12:y=s.sent(),s.label=13;case 13:return o?f?[2,this.pushCompressedSignedTransaction(y,u,c)]:[2,this.pushSignedTransaction(y,u,c)]:[2,y]}}))}))},t.prototype.query=function(t,e,i,a){var o=a.sign,h=a.requiredKeys,l=a.authorization,c=void 0===l?[]:l;return r(this,void 0,void 0,(function(){var r,a,l,d,f,p,g,m,y,v,_;return s(this,(function(s){switch(s.label){case 0:return[4,this.rpc.get_info()];case 1:return r=s.sent(),[4,this.tryRefBlockFromGetInfo(r)];case 2:return a=s.sent(),l=new u.SerialBuffer({textEncoder:this.textEncoder,textDecoder:this.textDecoder}),u.serializeQuery(l,i),d=n(n({},u.transactionHeader(a,1800)),{context_free_actions:[],actions:[{account:t,name:"queryit",authorization:c,data:u.arrayToHex(l.asUint8Array())}]}),f=this.serializeTransaction(d),p=[],o?[4,this.getTransactionAbis(d)]:[3,8];case 3:return g=s.sent(),h?[3,6]:[4,this.signatureProvider.getAvailableKeys()];case 4:return m=s.sent(),[4,this.authorityProvider.getRequiredKeys({transaction:d,availableKeys:m})];case 5:h=s.sent(),s.label=6;case 6:return[4,this.signatureProvider.sign({chainId:this.chainId,requiredKeys:h,serializedTransaction:f,serializedContextFreeData:null,abis:g})];case 7:y=s.sent(),p=y.signatures,s.label=8;case 8:return[4,this.rpc.send_transaction({signatures:p,compression:0,serializedTransaction:f})];case 9:return v=s.sent(),_=new u.SerialBuffer({textEncoder:this.textEncoder,textDecoder:this.textDecoder,array:u.hexToUint8Array(v.processed.action_traces[0][1].return_value)}),e?[2,u.deserializeAnyvarShort(_)]:[2,u.deserializeAnyvar(_)]}}))}))},t.prototype.pushSignedTransaction=function(t,e,i){var n=t.signatures,a=t.serializedTransaction,o=t.serializedContextFreeData;return void 0===e&&(e=!1),void 0===i&&(i=!1),r(this,void 0,void 0,(function(){return s(this,(function(t){return e?[2,this.rpc.push_ro_transaction({signatures:n,serializedTransaction:a,serializedContextFreeData:o},i)]:[2,this.rpc.push_transaction({signatures:n,serializedTransaction:a,serializedContextFreeData:o})]}))}))},t.prototype.pushCompressedSignedTransaction=function(t,e,i){var n=t.signatures,a=t.serializedTransaction,o=t.serializedContextFreeData;return void 0===e&&(e=!1),void 0===i&&(i=!1),r(this,void 0,void 0,(function(){var t,r;return s(this,(function(s){return t=this.deflateSerializedArray(a),r=this.deflateSerializedArray(o||new Uint8Array(0)),e?[2,this.rpc.push_ro_transaction({signatures:n,compression:1,serializedTransaction:t,serializedContextFreeData:r},i)]:[2,this.rpc.push_transaction({signatures:n,compression:1,serializedTransaction:t,serializedContextFreeData:r})]}))}))},t.prototype.generateTapos=function(t,e,i,a,o){return r(this,void 0,void 0,(function(){var r,h,l,c;return s(this,(function(s){switch(s.label){case 0:return t?[3,2]:[4,this.rpc.get_info()];case 1:t=s.sent(),s.label=2;case 2:return a?[4,this.tryRefBlockFromGetInfo(t)]:[3,4];case 3:return r=s.sent(),[2,n(n({},u.transactionHeader(r,o)),e)];case 4:return(h=t.head_block_num-i)<=t.last_irreversible_block_num?[4,this.tryGetBlockInfo(h)]:[3,6];case 5:return c=s.sent(),[3,8];case 6:return[4,this.tryGetBlockHeaderState(h)];case 7:c=s.sent(),s.label=8;case 8:return l=c,[2,n(n({},u.transactionHeader(l,o)),e)]}}))}))},t.prototype.hasRequiredTaposFields=function(t){var e=t.expiration,i=t.ref_block_num,n=t.ref_block_prefix;return!(!e||"number"!=typeof i||"number"!=typeof n)},t.prototype.tryGetBlockHeaderState=function(t){return r(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,4]),[4,this.rpc.get_block_header_state(t)];case 1:return[2,e.sent()];case 2:return e.sent(),[4,this.tryGetBlockInfo(t)];case 3:return[2,e.sent()];case 4:return[2]}}))}))},t.prototype.tryGetBlockInfo=function(t){return r(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,4]),[4,this.rpc.get_block_info(t)];case 1:return[2,e.sent()];case 2:return e.sent(),[4,this.rpc.get_block(t)];case 3:return[2,e.sent()];case 4:return[2]}}))}))},t.prototype.tryRefBlockFromGetInfo=function(t){return r(this,void 0,void 0,(function(){var e;return s(this,(function(i){switch(i.label){case 0:return t.hasOwnProperty("last_irreversible_block_id")&&t.hasOwnProperty("last_irreversible_block_num")&&t.hasOwnProperty("last_irreversible_block_time")?[2,{block_num:t.last_irreversible_block_num,id:t.last_irreversible_block_id,timestamp:t.last_irreversible_block_time}]:[3,1];case 1:return[4,this.tryGetBlockInfo(t.last_irreversible_block_num)];case 2:return[2,{block_num:(e=i.sent()).block_num,id:e.id,timestamp:e.timestamp}]}}))}))},t.prototype.with=function(t){return new f(this,t)},t.prototype.buildTransaction=function(t){var e=new d(this);return t?t(e):e},t}();e.Api=c;var d=function(){function t(t){this.actions=[],this.contextFreeGroups=[],this.api=t}return t.prototype.with=function(t){var e=new f(this.api,t);return this.actions.push(e),e},t.prototype.associateContextFree=function(t){return this.contextFreeGroups.push(t),this},t.prototype.send=function(t){return r(this,void 0,void 0,(function(){var e,i,n,a=this;return s(this,(function(o){switch(o.label){case 0:return e=[],i=[],n=this.actions.map((function(t){return t.serializedData})),[4,Promise.all(this.contextFreeGroups.map((function(t){return r(a,void 0,void 0,(function(){var r,a,o,h;return s(this,(function(s){return r=t({cfd:e.length,cfa:i.length}),a=r.action,o=r.contextFreeAction,h=r.contextFreeData,a&&n.push(a),o&&i.push(o),h&&e.push(h),[2]}))}))})))];case 1:return o.sent(),this.contextFreeGroups=[],this.actions=[],[4,this.api.transact({context_free_data:e,context_free_actions:i,actions:n},t)];case 2:return[2,o.sent()]}}))}))},t}();e.TransactionBuilder=d;var f=function(){function t(t,e){this.api=t,this.accountName=e}return t.prototype.as=function(t){void 0===t&&(t=[]);var e=[];return e=t&&"string"==typeof t?[{actor:t,permission:"active"}]:t,new p(this,this.api,this.accountName,e)},t}();e.ActionBuilder=f;var p=function(t,e,i,n){var r,s,a=this,o=e.cachedAbis.get(i);if(!o)throw new Error("ABI must be cached before using ActionBuilder, run api.getAbi()");var l=u.getTypesFromAbi(u.createInitialTypes(),o.abi),c=new Map;try{for(var d=h(o.abi.actions),f=d.next();!f.done;f=d.next()){var p=f.value,g=p.name,m=p.type;c.set(g,u.getType(l,m))}}catch(t){r={error:t}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(r)throw r.error}}c.forEach((function(r,s){var o;Object.assign(a,((o={})[s]=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var h={};a.forEach((function(t,e){var i=r.fields[e];h[i.name]=t}));var d=u.serializeAction({types:l,actions:c},i,s,n,h,e.textEncoder,e.textDecoder);return t.serializedData=d,d},o))}))}},function(t,e,i){"use strict";i.r(e),i.d(e,"Deflate",(function(){return Ke})),i.d(e,"Inflate",(function(){return Ze})),i.d(e,"constants",(function(){return ii})),i.d(e,"deflate",(function(){return qe})),i.d(e,"deflateRaw",(function(){return $e})),i.d(e,"gzip",(function(){return Je})),i.d(e,"inflate",(function(){return Qe})),i.d(e,"inflateRaw",(function(){return ti})),i.d(e,"ungzip",(function(){return ei}));function n(t){let e=t.length;for(;--e>=0;)t[e]=0}const r=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),s=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),a=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),o=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),h=new Array(576);n(h);const l=new Array(60);n(l);const u=new Array(512);n(u);const c=new Array(256);n(c);const d=new Array(29);n(d);const f=new Array(30);function p(t,e,i,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}let g,m,y;function v(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}n(f);const _=t=>t<256?u[t]:u[256+(t>>>7)],x=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},w=(t,e,i)=>{t.bi_valid>16-i?(t.bi_buf|=e<<t.bi_valid&65535,x(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)},b=(t,e,i)=>{w(t,i[2*e],i[2*e+1])},T=(t,e)=>{let i=0;do{i|=1&t,t>>>=1,i<<=1}while(--e>0);return i>>>1},E=(t,e,i)=>{const n=new Array(16);let r,s,a=0;for(r=1;r<=15;r++)n[r]=a=a+i[r-1]<<1;for(s=0;s<=e;s++){let e=t[2*s+1];0!==e&&(t[2*s]=T(n[e]++,e))}},A=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},S=t=>{t.bi_valid>8?x(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},C=(t,e,i,n)=>{const r=2*e,s=2*i;return t[r]<t[s]||t[r]===t[s]&&n[e]<=n[i]},O=(t,e,i)=>{const n=t.heap[i];let r=i<<1;for(;r<=t.heap_len&&(r<t.heap_len&&C(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!C(e,n,t.heap[r],t.depth));)t.heap[i]=t.heap[r],i=r,r<<=1;t.heap[i]=n},P=(t,e,i)=>{let n,a,o,h,l=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*l]<<8|t.pending_buf[t.d_buf+2*l+1],a=t.pending_buf[t.l_buf+l],l++,0===n?b(t,a,e):(o=c[a],b(t,o+256+1,e),h=r[o],0!==h&&(a-=d[o],w(t,a,h)),n--,o=_(n),b(t,o,i),h=s[o],0!==h&&(n-=f[o],w(t,n,h)))}while(l<t.last_lit);b(t,256,e)},R=(t,e)=>{const i=e.dyn_tree,n=e.stat_desc.static_tree,r=e.stat_desc.has_stree,s=e.stat_desc.elems;let a,o,h,l=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<s;a++)0!==i[2*a]?(t.heap[++t.heap_len]=l=a,t.depth[a]=0):i[2*a+1]=0;for(;t.heap_len<2;)h=t.heap[++t.heap_len]=l<2?++l:0,i[2*h]=1,t.depth[h]=0,t.opt_len--,r&&(t.static_len-=n[2*h+1]);for(e.max_code=l,a=t.heap_len>>1;a>=1;a--)O(t,i,a);h=s;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],O(t,i,1),o=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=o,i[2*h]=i[2*a]+i[2*o],t.depth[h]=(t.depth[a]>=t.depth[o]?t.depth[a]:t.depth[o])+1,i[2*a+1]=i[2*o+1]=h,t.heap[1]=h++,O(t,i,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const i=e.dyn_tree,n=e.max_code,r=e.stat_desc.static_tree,s=e.stat_desc.has_stree,a=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,h=e.stat_desc.max_length;let l,u,c,d,f,p,g=0;for(d=0;d<=15;d++)t.bl_count[d]=0;for(i[2*t.heap[t.heap_max]+1]=0,l=t.heap_max+1;l<573;l++)u=t.heap[l],d=i[2*i[2*u+1]+1]+1,d>h&&(d=h,g++),i[2*u+1]=d,u>n||(t.bl_count[d]++,f=0,u>=o&&(f=a[u-o]),p=i[2*u],t.opt_len+=p*(d+f),s&&(t.static_len+=p*(r[2*u+1]+f)));if(0!==g){do{for(d=h-1;0===t.bl_count[d];)d--;t.bl_count[d]--,t.bl_count[d+1]+=2,t.bl_count[h]--,g-=2}while(g>0);for(d=h;0!==d;d--)for(u=t.bl_count[d];0!==u;)c=t.heap[--l],c>n||(i[2*c+1]!==d&&(t.opt_len+=(d-i[2*c+1])*i[2*c],i[2*c+1]=d),u--)}})(t,e),E(i,l,t.bl_count)},M=(t,e,i)=>{let n,r,s=-1,a=e[1],o=0,h=7,l=4;for(0===a&&(h=138,l=3),e[2*(i+1)+1]=65535,n=0;n<=i;n++)r=a,a=e[2*(n+1)+1],++o<h&&r===a||(o<l?t.bl_tree[2*r]+=o:0!==r?(r!==s&&t.bl_tree[2*r]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,s=r,0===a?(h=138,l=3):r===a?(h=6,l=3):(h=7,l=4))},L=(t,e,i)=>{let n,r,s=-1,a=e[1],o=0,h=7,l=4;for(0===a&&(h=138,l=3),n=0;n<=i;n++)if(r=a,a=e[2*(n+1)+1],!(++o<h&&r===a)){if(o<l)do{b(t,r,t.bl_tree)}while(0!=--o);else 0!==r?(r!==s&&(b(t,r,t.bl_tree),o--),b(t,16,t.bl_tree),w(t,o-3,2)):o<=10?(b(t,17,t.bl_tree),w(t,o-3,3)):(b(t,18,t.bl_tree),w(t,o-11,7));o=0,s=r,0===a?(h=138,l=3):r===a?(h=6,l=3):(h=7,l=4)}};let I=!1;const k=(t,e,i,n)=>{w(t,0+(n?1:0),3),((t,e,i,n)=>{S(t),n&&(x(t,i),x(t,~i)),t.pending_buf.set(t.window.subarray(e,e+i),t.pending),t.pending+=i})(t,e,i,!0)};var D={_tr_init:t=>{I||((()=>{let t,e,i,n,o;const v=new Array(16);for(i=0,n=0;n<28;n++)for(d[n]=i,t=0;t<1<<r[n];t++)c[i++]=n;for(c[i-1]=n,o=0,n=0;n<16;n++)for(f[n]=o,t=0;t<1<<s[n];t++)u[o++]=n;for(o>>=7;n<30;n++)for(f[n]=o<<7,t=0;t<1<<s[n]-7;t++)u[256+o++]=n;for(e=0;e<=15;e++)v[e]=0;for(t=0;t<=143;)h[2*t+1]=8,t++,v[8]++;for(;t<=255;)h[2*t+1]=9,t++,v[9]++;for(;t<=279;)h[2*t+1]=7,t++,v[7]++;for(;t<=287;)h[2*t+1]=8,t++,v[8]++;for(E(h,287,v),t=0;t<30;t++)l[2*t+1]=5,l[2*t]=T(t,5);g=new p(h,r,257,286,15),m=new p(l,s,0,30,15),y=new p(new Array(0),a,0,19,7)})(),I=!0),t.l_desc=new v(t.dyn_ltree,g),t.d_desc=new v(t.dyn_dtree,m),t.bl_desc=new v(t.bl_tree,y),t.bi_buf=0,t.bi_valid=0,A(t)},_tr_stored_block:k,_tr_flush_block:(t,e,i,n)=>{let r,s,a=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),R(t,t.l_desc),R(t,t.d_desc),a=(t=>{let e;for(M(t,t.dyn_ltree,t.l_desc.max_code),M(t,t.dyn_dtree,t.d_desc.max_code),R(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*o[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),r=t.opt_len+3+7>>>3,s=t.static_len+3+7>>>3,s<=r&&(r=s)):r=s=i+5,i+4<=r&&-1!==e?k(t,e,i,n):4===t.strategy||s===r?(w(t,2+(n?1:0),3),P(t,h,l)):(w(t,4+(n?1:0),3),((t,e,i,n)=>{let r;for(w(t,e-257,5),w(t,i-1,5),w(t,n-4,4),r=0;r<n;r++)w(t,t.bl_tree[2*o[r]+1],3);L(t,t.dyn_ltree,e-1),L(t,t.dyn_dtree,i-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),P(t,t.dyn_ltree,t.dyn_dtree)),A(t),n&&S(t)},_tr_tally:(t,e,i)=>(t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(c[i]+256+1)]++,t.dyn_dtree[2*_(e)]++),t.last_lit===t.lit_bufsize-1),_tr_align:t=>{w(t,2,3),b(t,256,h),(t=>{16===t.bi_valid?(x(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}};var F=(t,e,i,n)=>{let r=65535&t|0,s=t>>>16&65535|0,a=0;for(;0!==i;){a=i>2e3?2e3:i,i-=a;do{r=r+e[n++]|0,s=s+r|0}while(--a);r%=65521,s%=65521}return r|s<<16|0};const B=new Uint32Array((()=>{let t,e=[];for(var i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e})());var N=(t,e,i,n)=>{const r=B,s=n+i;t^=-1;for(let i=n;i<s;i++)t=t>>>8^r[255&(t^e[i])];return-1^t},G={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Y={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:z,_tr_stored_block:U,_tr_flush_block:X,_tr_tally:V,_tr_align:H}=D,{Z_NO_FLUSH:j,Z_PARTIAL_FLUSH:W,Z_FULL_FLUSH:K,Z_FINISH:q,Z_BLOCK:$,Z_OK:J,Z_STREAM_END:Z,Z_STREAM_ERROR:Q,Z_DATA_ERROR:tt,Z_BUF_ERROR:et,Z_DEFAULT_COMPRESSION:it,Z_FILTERED:nt,Z_HUFFMAN_ONLY:rt,Z_RLE:st,Z_FIXED:at,Z_DEFAULT_STRATEGY:ot,Z_UNKNOWN:ht,Z_DEFLATED:lt}=Y,ut=(t,e)=>(t.msg=G[e],e),ct=t=>(t<<1)-(t>4?9:0),dt=t=>{let e=t.length;for(;--e>=0;)t[e]=0};let ft=(t,e,i)=>(e<<t.hash_shift^i)&t.hash_mask;const pt=t=>{const e=t.state;let i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+i),t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))},gt=(t,e)=>{X(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,pt(t.strm)},mt=(t,e)=>{t.pending_buf[t.pending++]=e},yt=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},vt=(t,e,i,n)=>{let r=t.avail_in;return r>n&&(r=n),0===r?0:(t.avail_in-=r,e.set(t.input.subarray(t.next_in,t.next_in+r),i),1===t.state.wrap?t.adler=F(t.adler,e,r,i):2===t.state.wrap&&(t.adler=N(t.adler,e,r,i)),t.next_in+=r,t.total_in+=r,r)},_t=(t,e)=>{let i,n,r=t.max_chain_length,s=t.strstart,a=t.prev_length,o=t.nice_match;const h=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,l=t.window,u=t.w_mask,c=t.prev,d=t.strstart+258;let f=l[s+a-1],p=l[s+a];t.prev_length>=t.good_match&&(r>>=2),o>t.lookahead&&(o=t.lookahead);do{if(i=e,l[i+a]===p&&l[i+a-1]===f&&l[i]===l[s]&&l[++i]===l[s+1]){s+=2,i++;do{}while(l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&s<d);if(n=258-(d-s),s=d-258,n>a){if(t.match_start=e,a=n,n>=o)break;f=l[s+a-1],p=l[s+a]}}}while((e=c[e&u])>h&&0!=--r);return a<=t.lookahead?a:t.lookahead},xt=t=>{const e=t.w_size;let i,n,r,s,a;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-262)){t.window.set(t.window.subarray(e,e+e),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,n=t.hash_size,i=n;do{r=t.head[--i],t.head[i]=r>=e?r-e:0}while(--n);n=e,i=n;do{r=t.prev[--i],t.prev[i]=r>=e?r-e:0}while(--n);s+=e}if(0===t.strm.avail_in)break;if(n=vt(t.strm,t.window,t.strstart+t.lookahead,s),t.lookahead+=n,t.lookahead+t.insert>=3)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=ft(t,t.ins_h,t.window[a+1]);t.insert&&(t.ins_h=ft(t,t.ins_h,t.window[a+3-1]),t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)},wt=(t,e)=>{let i,n;for(;;){if(t.lookahead<262){if(xt(t),t.lookahead<262&&e===j)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-262&&(t.match_length=_t(t,i)),t.match_length>=3)if(n=V(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=ft(t,t.ins_h,t.window[t.strstart+1]);else n=V(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(gt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===q?(gt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(gt(t,!1),0===t.strm.avail_out)?1:2},bt=(t,e)=>{let i,n,r;for(;;){if(t.lookahead<262){if(xt(t),t.lookahead<262&&e===j)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-262&&(t.match_length=_t(t,i),t.match_length<=5&&(t.strategy===nt||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,n=V(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(gt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(n=V(t,0,t.window[t.strstart-1]),n&&gt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=V(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===q?(gt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(gt(t,!1),0===t.strm.avail_out)?1:2};function Tt(t,e,i,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=r}const Et=[new Tt(0,0,0,0,(t,e)=>{let i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(xt(t),0===t.lookahead&&e===j)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;const n=t.block_start+i;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,gt(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-262&&(gt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===q?(gt(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(gt(t,!1),t.strm.avail_out),1)}),new Tt(4,4,8,4,wt),new Tt(4,5,16,8,wt),new Tt(4,6,32,32,wt),new Tt(4,4,16,16,bt),new Tt(8,16,32,32,bt),new Tt(8,16,128,128,bt),new Tt(8,32,128,256,bt),new Tt(32,128,258,1024,bt),new Tt(32,258,258,4096,bt)];function At(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=lt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),dt(this.dyn_ltree),dt(this.dyn_dtree),dt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),dt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),dt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const St=t=>{if(!t||!t.state)return ut(t,Q);t.total_in=t.total_out=0,t.data_type=ht;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=j,z(e),J},Ct=t=>{const e=St(t);var i;return e===J&&((i=t.state).window_size=2*i.w_size,dt(i.head),i.max_lazy_match=Et[i.level].max_lazy,i.good_match=Et[i.level].good_length,i.nice_match=Et[i.level].nice_length,i.max_chain_length=Et[i.level].max_chain,i.strstart=0,i.block_start=0,i.lookahead=0,i.insert=0,i.match_length=i.prev_length=2,i.match_available=0,i.ins_h=0),e},Ot=(t,e,i,n,r,s)=>{if(!t)return Q;let a=1;if(e===it&&(e=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),r<1||r>9||i!==lt||n<8||n>15||e<0||e>9||s<0||s>at)return ut(t,Q);8===n&&(n=9);const o=new At;return t.state=o,o.strm=t,o.wrap=a,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=r+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<r+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=s,o.method=i,Ct(t)};var Pt={deflateInit:(t,e)=>Ot(t,e,lt,15,8,ot),deflateInit2:Ot,deflateReset:Ct,deflateResetKeep:St,deflateSetHeader:(t,e)=>t&&t.state?2!==t.state.wrap?Q:(t.state.gzhead=e,J):Q,deflate:(t,e)=>{let i,n;if(!t||!t.state||e>$||e<0)return t?ut(t,Q):Q;const r=t.state;if(!t.output||!t.input&&0!==t.avail_in||666===r.status&&e!==q)return ut(t,0===t.avail_out?et:Q);r.strm=t;const s=r.last_flush;if(r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,mt(r,31),mt(r,139),mt(r,8),r.gzhead?(mt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),mt(r,255&r.gzhead.time),mt(r,r.gzhead.time>>8&255),mt(r,r.gzhead.time>>16&255),mt(r,r.gzhead.time>>24&255),mt(r,9===r.level?2:r.strategy>=rt||r.level<2?4:0),mt(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(mt(r,255&r.gzhead.extra.length),mt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=N(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(mt(r,0),mt(r,0),mt(r,0),mt(r,0),mt(r,0),mt(r,9===r.level?2:r.strategy>=rt||r.level<2?4:0),mt(r,3),r.status=113);else{let e=lt+(r.w_bits-8<<4)<<8,i=-1;i=r.strategy>=rt||r.level<2?0:r.level<6?1:6===r.level?2:3,e|=i<<6,0!==r.strstart&&(e|=32),e+=31-e%31,r.status=113,yt(r,e),0!==r.strstart&&(yt(r,t.adler>>>16),yt(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(i=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>i&&(t.adler=N(t.adler,r.pending_buf,r.pending-i,i)),pt(t),i=r.pending,r.pending!==r.pending_buf_size));)mt(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>i&&(t.adler=N(t.adler,r.pending_buf,r.pending-i,i)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(t.adler=N(t.adler,r.pending_buf,r.pending-i,i)),pt(t),i=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,mt(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>i&&(t.adler=N(t.adler,r.pending_buf,r.pending-i,i)),0===n&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(t.adler=N(t.adler,r.pending_buf,r.pending-i,i)),pt(t),i=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,mt(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>i&&(t.adler=N(t.adler,r.pending_buf,r.pending-i,i)),0===n&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&pt(t),r.pending+2<=r.pending_buf_size&&(mt(r,255&t.adler),mt(r,t.adler>>8&255),t.adler=0,r.status=113)):r.status=113),0!==r.pending){if(pt(t),0===t.avail_out)return r.last_flush=-1,J}else if(0===t.avail_in&&ct(e)<=ct(s)&&e!==q)return ut(t,et);if(666===r.status&&0!==t.avail_in)return ut(t,et);if(0!==t.avail_in||0!==r.lookahead||e!==j&&666!==r.status){let i=r.strategy===rt?((t,e)=>{let i;for(;;){if(0===t.lookahead&&(xt(t),0===t.lookahead)){if(e===j)return 1;break}if(t.match_length=0,i=V(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(gt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===q?(gt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(gt(t,!1),0===t.strm.avail_out)?1:2})(r,e):r.strategy===st?((t,e)=>{let i,n,r,s;const a=t.window;for(;;){if(t.lookahead<=258){if(xt(t),t.lookahead<=258&&e===j)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=t.strstart-1,n=a[r],n===a[++r]&&n===a[++r]&&n===a[++r])){s=t.strstart+258;do{}while(n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&r<s);t.match_length=258-(s-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(i=V(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=V(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(gt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===q?(gt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(gt(t,!1),0===t.strm.avail_out)?1:2})(r,e):Et[r.level].func(r,e);if(3!==i&&4!==i||(r.status=666),1===i||3===i)return 0===t.avail_out&&(r.last_flush=-1),J;if(2===i&&(e===W?H(r):e!==$&&(U(r,0,0,!1),e===K&&(dt(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),pt(t),0===t.avail_out))return r.last_flush=-1,J}return e!==q?J:r.wrap<=0?Z:(2===r.wrap?(mt(r,255&t.adler),mt(r,t.adler>>8&255),mt(r,t.adler>>16&255),mt(r,t.adler>>24&255),mt(r,255&t.total_in),mt(r,t.total_in>>8&255),mt(r,t.total_in>>16&255),mt(r,t.total_in>>24&255)):(yt(r,t.adler>>>16),yt(r,65535&t.adler)),pt(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?J:Z)},deflateEnd:t=>{if(!t||!t.state)return Q;const e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?ut(t,Q):(t.state=null,113===e?ut(t,tt):J)},deflateSetDictionary:(t,e)=>{let i=e.length;if(!t||!t.state)return Q;const n=t.state,r=n.wrap;if(2===r||1===r&&42!==n.status||n.lookahead)return Q;if(1===r&&(t.adler=F(t.adler,e,i,0)),n.wrap=0,i>=n.w_size){0===r&&(dt(n.head),n.strstart=0,n.block_start=0,n.insert=0);let t=new Uint8Array(n.w_size);t.set(e.subarray(i-n.w_size,i),0),e=t,i=n.w_size}const s=t.avail_in,a=t.next_in,o=t.input;for(t.avail_in=i,t.next_in=0,t.input=e,xt(n);n.lookahead>=3;){let t=n.strstart,e=n.lookahead-2;do{n.ins_h=ft(n,n.ins_h,n.window[t+3-1]),n.prev[t&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=t,t++}while(--e);n.strstart=t,n.lookahead=2,xt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=a,t.input=o,t.avail_in=s,n.wrap=r,J},deflateInfo:"pako deflate (from Nodeca project)"};const Rt=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Mt=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(const e in i)Rt(i,e)&&(t[e]=i[e])}}return t},Lt=t=>{let e=0;for(let i=0,n=t.length;i<n;i++)e+=t[i].length;const i=new Uint8Array(e);for(let e=0,n=0,r=t.length;e<r;e++){let r=t[e];i.set(r,n),n+=r.length}return i};let It=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){It=!1}const kt=new Uint8Array(256);for(let t=0;t<256;t++)kt[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;kt[254]=kt[254]=1;var Dt=t=>{let e,i,n,r,s,a=t.length,o=0;for(r=0;r<a;r++)i=t.charCodeAt(r),55296==(64512&i)&&r+1<a&&(n=t.charCodeAt(r+1),56320==(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),r++)),o+=i<128?1:i<2048?2:i<65536?3:4;for(e=new Uint8Array(o),s=0,r=0;s<o;r++)i=t.charCodeAt(r),55296==(64512&i)&&r+1<a&&(n=t.charCodeAt(r+1),56320==(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),r++)),i<128?e[s++]=i:i<2048?(e[s++]=192|i>>>6,e[s++]=128|63&i):i<65536?(e[s++]=224|i>>>12,e[s++]=128|i>>>6&63,e[s++]=128|63&i):(e[s++]=240|i>>>18,e[s++]=128|i>>>12&63,e[s++]=128|i>>>6&63,e[s++]=128|63&i);return e},Ft=(t,e)=>{let i,n;const r=e||t.length,s=new Array(2*r);for(n=0,i=0;i<r;){let e=t[i++];if(e<128){s[n++]=e;continue}let a=kt[e];if(a>4)s[n++]=65533,i+=a-1;else{for(e&=2===a?31:3===a?15:7;a>1&&i<r;)e=e<<6|63&t[i++],a--;a>1?s[n++]=65533:e<65536?s[n++]=e:(e-=65536,s[n++]=55296|e>>10&1023,s[n++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&It)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let i="";for(let n=0;n<e;n++)i+=String.fromCharCode(t[n]);return i})(s,n)},Bt=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let i=e-1;for(;i>=0&&128==(192&t[i]);)i--;return i<0||0===i?e:i+kt[t[i]]>e?i:e};var Nt=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Gt=Object.prototype.toString,{Z_NO_FLUSH:Yt,Z_SYNC_FLUSH:zt,Z_FULL_FLUSH:Ut,Z_FINISH:Xt,Z_OK:Vt,Z_STREAM_END:Ht,Z_DEFAULT_COMPRESSION:jt,Z_DEFAULT_STRATEGY:Wt,Z_DEFLATED:Kt}=Y;function qt(t){this.options=Mt({level:jt,method:Kt,chunkSize:16384,windowBits:15,memLevel:8,strategy:Wt},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Nt,this.strm.avail_out=0;let i=Pt.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(i!==Vt)throw new Error(G[i]);if(e.header&&Pt.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?Dt(e.dictionary):"[object ArrayBuffer]"===Gt.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,i=Pt.deflateSetDictionary(this.strm,t),i!==Vt)throw new Error(G[i]);this._dict_set=!0}}function $t(t,e){const i=new qt(e);if(i.push(t,!0),i.err)throw i.msg||G[i.err];return i.result}qt.prototype.push=function(t,e){const i=this.strm,n=this.options.chunkSize;let r,s;if(this.ended)return!1;for(s=e===~~e?e:!0===e?Xt:Yt,"string"==typeof t?i.input=Dt(t):"[object ArrayBuffer]"===Gt.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;;)if(0===i.avail_out&&(i.output=new Uint8Array(n),i.next_out=0,i.avail_out=n),(s===zt||s===Ut)&&i.avail_out<=6)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if(r=Pt.deflate(i,s),r===Ht)return i.next_out>0&&this.onData(i.output.subarray(0,i.next_out)),r=Pt.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===Vt;if(0!==i.avail_out){if(s>0&&i.next_out>0)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(0===i.avail_in)break}else this.onData(i.output)}return!0},qt.prototype.onData=function(t){this.chunks.push(t)},qt.prototype.onEnd=function(t){t===Vt&&(this.result=Lt(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Jt={Deflate:qt,deflate:$t,deflateRaw:function(t,e){return(e=e||{}).raw=!0,$t(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,$t(t,e)},constants:Y};var Zt=function(t,e){let i,n,r,s,a,o,h,l,u,c,d,f,p,g,m,y,v,_,x,w,b,T,E,A;const S=t.state;i=t.next_in,E=t.input,n=i+(t.avail_in-5),r=t.next_out,A=t.output,s=r-(e-t.avail_out),a=r+(t.avail_out-257),o=S.dmax,h=S.wsize,l=S.whave,u=S.wnext,c=S.window,d=S.hold,f=S.bits,p=S.lencode,g=S.distcode,m=(1<<S.lenbits)-1,y=(1<<S.distbits)-1;t:do{f<15&&(d+=E[i++]<<f,f+=8,d+=E[i++]<<f,f+=8),v=p[d&m];e:for(;;){if(_=v>>>24,d>>>=_,f-=_,_=v>>>16&255,0===_)A[r++]=65535&v;else{if(!(16&_)){if(0==(64&_)){v=p[(65535&v)+(d&(1<<_)-1)];continue e}if(32&_){S.mode=12;break t}t.msg="invalid literal/length code",S.mode=30;break t}x=65535&v,_&=15,_&&(f<_&&(d+=E[i++]<<f,f+=8),x+=d&(1<<_)-1,d>>>=_,f-=_),f<15&&(d+=E[i++]<<f,f+=8,d+=E[i++]<<f,f+=8),v=g[d&y];i:for(;;){if(_=v>>>24,d>>>=_,f-=_,_=v>>>16&255,!(16&_)){if(0==(64&_)){v=g[(65535&v)+(d&(1<<_)-1)];continue i}t.msg="invalid distance code",S.mode=30;break t}if(w=65535&v,_&=15,f<_&&(d+=E[i++]<<f,f+=8,f<_&&(d+=E[i++]<<f,f+=8)),w+=d&(1<<_)-1,w>o){t.msg="invalid distance too far back",S.mode=30;break t}if(d>>>=_,f-=_,_=r-s,w>_){if(_=w-_,_>l&&S.sane){t.msg="invalid distance too far back",S.mode=30;break t}if(b=0,T=c,0===u){if(b+=h-_,_<x){x-=_;do{A[r++]=c[b++]}while(--_);b=r-w,T=A}}else if(u<_){if(b+=h+u-_,_-=u,_<x){x-=_;do{A[r++]=c[b++]}while(--_);if(b=0,u<x){_=u,x-=_;do{A[r++]=c[b++]}while(--_);b=r-w,T=A}}}else if(b+=u-_,_<x){x-=_;do{A[r++]=c[b++]}while(--_);b=r-w,T=A}for(;x>2;)A[r++]=T[b++],A[r++]=T[b++],A[r++]=T[b++],x-=3;x&&(A[r++]=T[b++],x>1&&(A[r++]=T[b++]))}else{b=r-w;do{A[r++]=A[b++],A[r++]=A[b++],A[r++]=A[b++],x-=3}while(x>2);x&&(A[r++]=A[b++],x>1&&(A[r++]=A[b++]))}break}}break}}while(i<n&&r<a);x=f>>3,i-=x,f-=x<<3,d&=(1<<f)-1,t.next_in=i,t.next_out=r,t.avail_in=i<n?n-i+5:5-(i-n),t.avail_out=r<a?a-r+257:257-(r-a),S.hold=d,S.bits=f};const Qt=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),te=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ee=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ie=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ne=(t,e,i,n,r,s,a,o)=>{const h=o.bits;let l,u,c,d,f,p,g=0,m=0,y=0,v=0,_=0,x=0,w=0,b=0,T=0,E=0,A=null,S=0;const C=new Uint16Array(16),O=new Uint16Array(16);let P,R,M,L=null,I=0;for(g=0;g<=15;g++)C[g]=0;for(m=0;m<n;m++)C[e[i+m]]++;for(_=h,v=15;v>=1&&0===C[v];v--);if(_>v&&(_=v),0===v)return r[s++]=20971520,r[s++]=20971520,o.bits=1,0;for(y=1;y<v&&0===C[y];y++);for(_<y&&(_=y),b=1,g=1;g<=15;g++)if(b<<=1,b-=C[g],b<0)return-1;if(b>0&&(0===t||1!==v))return-1;for(O[1]=0,g=1;g<15;g++)O[g+1]=O[g]+C[g];for(m=0;m<n;m++)0!==e[i+m]&&(a[O[e[i+m]]++]=m);if(0===t?(A=L=a,p=19):1===t?(A=Qt,S-=257,L=te,I-=257,p=256):(A=ee,L=ie,p=-1),E=0,m=0,g=y,f=s,x=_,w=0,c=-1,T=1<<_,d=T-1,1===t&&T>852||2===t&&T>592)return 1;for(;;){P=g-w,a[m]<p?(R=0,M=a[m]):a[m]>p?(R=L[I+a[m]],M=A[S+a[m]]):(R=96,M=0),l=1<<g-w,u=1<<x,y=u;do{u-=l,r[f+(E>>w)+u]=P<<24|R<<16|M|0}while(0!==u);for(l=1<<g-1;E&l;)l>>=1;if(0!==l?(E&=l-1,E+=l):E=0,m++,0==--C[g]){if(g===v)break;g=e[i+a[m]]}if(g>_&&(E&d)!==c){for(0===w&&(w=_),f+=y,x=g-w,b=1<<x;x+w<v&&(b-=C[x+w],!(b<=0));)x++,b<<=1;if(T+=1<<x,1===t&&T>852||2===t&&T>592)return 1;c=E&d,r[c]=_<<24|x<<16|f-s|0}}return 0!==E&&(r[f+E]=g-w<<24|64<<16|0),o.bits=_,0};const{Z_FINISH:re,Z_BLOCK:se,Z_TREES:ae,Z_OK:oe,Z_STREAM_END:he,Z_NEED_DICT:le,Z_STREAM_ERROR:ue,Z_DATA_ERROR:ce,Z_MEM_ERROR:de,Z_BUF_ERROR:fe,Z_DEFLATED:pe}=Y,ge=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function me(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ye=t=>{if(!t||!t.state)return ue;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,oe},ve=t=>{if(!t||!t.state)return ue;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,ye(t)},_e=(t,e)=>{let i;if(!t||!t.state)return ue;const n=t.state;return e<0?(i=0,e=-e):(i=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?ue:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,ve(t))},xe=(t,e)=>{if(!t)return ue;const i=new me;t.state=i,i.window=null;const n=_e(t,e);return n!==oe&&(t.state=null),n};let we,be,Te=!0;const Ee=t=>{if(Te){we=new Int32Array(512),be=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(ne(1,t.lens,0,288,we,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;ne(2,t.lens,0,32,be,0,t.work,{bits:5}),Te=!1}t.lencode=we,t.lenbits=9,t.distcode=be,t.distbits=5},Ae=(t,e,i,n)=>{let r;const s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(i-s.wsize,i),0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>n&&(r=n),s.window.set(e.subarray(i-n,i-n+r),s.wnext),(n-=r)?(s.window.set(e.subarray(i-n,i),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0};var Se={inflateReset:ve,inflateReset2:_e,inflateResetKeep:ye,inflateInit:t=>xe(t,15),inflateInit2:xe,inflate:(t,e)=>{let i,n,r,s,a,o,h,l,u,c,d,f,p,g,m,y,v,_,x,w,b,T,E=0;const A=new Uint8Array(4);let S,C;const O=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return ue;i=t.state,12===i.mode&&(i.mode=13),a=t.next_out,r=t.output,h=t.avail_out,s=t.next_in,n=t.input,o=t.avail_in,l=i.hold,u=i.bits,c=o,d=h,T=oe;t:for(;;)switch(i.mode){case 1:if(0===i.wrap){i.mode=13;break}for(;u<16;){if(0===o)break t;o--,l+=n[s++]<<u,u+=8}if(2&i.wrap&&35615===l){i.check=0,A[0]=255&l,A[1]=l>>>8&255,i.check=N(i.check,A,2,0),l=0,u=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&l)<<8)+(l>>8))%31){t.msg="incorrect header check",i.mode=30;break}if((15&l)!==pe){t.msg="unknown compression method",i.mode=30;break}if(l>>>=4,u-=4,b=8+(15&l),0===i.wbits)i.wbits=b;else if(b>i.wbits){t.msg="invalid window size",i.mode=30;break}i.dmax=1<<i.wbits,t.adler=i.check=1,i.mode=512&l?10:12,l=0,u=0;break;case 2:for(;u<16;){if(0===o)break t;o--,l+=n[s++]<<u,u+=8}if(i.flags=l,(255&i.flags)!==pe){t.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=l>>8&1),512&i.flags&&(A[0]=255&l,A[1]=l>>>8&255,i.check=N(i.check,A,2,0)),l=0,u=0,i.mode=3;case 3:for(;u<32;){if(0===o)break t;o--,l+=n[s++]<<u,u+=8}i.head&&(i.head.time=l),512&i.flags&&(A[0]=255&l,A[1]=l>>>8&255,A[2]=l>>>16&255,A[3]=l>>>24&255,i.check=N(i.check,A,4,0)),l=0,u=0,i.mode=4;case 4:for(;u<16;){if(0===o)break t;o--,l+=n[s++]<<u,u+=8}i.head&&(i.head.xflags=255&l,i.head.os=l>>8),512&i.flags&&(A[0]=255&l,A[1]=l>>>8&255,i.check=N(i.check,A,2,0)),l=0,u=0,i.mode=5;case 5:if(1024&i.flags){for(;u<16;){if(0===o)break t;o--,l+=n[s++]<<u,u+=8}i.length=l,i.head&&(i.head.extra_len=l),512&i.flags&&(A[0]=255&l,A[1]=l>>>8&255,i.check=N(i.check,A,2,0)),l=0,u=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&(f=i.length,f>o&&(f=o),f&&(i.head&&(b=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Uint8Array(i.head.extra_len)),i.head.extra.set(n.subarray(s,s+f),b)),512&i.flags&&(i.check=N(i.check,n,f,s)),o-=f,s+=f,i.length-=f),i.length))break t;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===o)break t;f=0;do{b=n[s+f++],i.head&&b&&i.length<65536&&(i.head.name+=String.fromCharCode(b))}while(b&&f<o);if(512&i.flags&&(i.check=N(i.check,n,f,s)),o-=f,s+=f,b)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===o)break t;f=0;do{b=n[s+f++],i.head&&b&&i.length<65536&&(i.head.comment+=String.fromCharCode(b))}while(b&&f<o);if(512&i.flags&&(i.check=N(i.check,n,f,s)),o-=f,s+=f,b)break t}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;u<16;){if(0===o)break t;o--,l+=n[s++]<<u,u+=8}if(l!==(65535&i.check)){t.msg="header crc mismatch",i.mode=30;break}l=0,u=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=12;break;case 10:for(;u<32;){if(0===o)break t;o--,l+=n[s++]<<u,u+=8}t.adler=i.check=ge(l),l=0,u=0,i.mode=11;case 11:if(0===i.havedict)return t.next_out=a,t.avail_out=h,t.next_in=s,t.avail_in=o,i.hold=l,i.bits=u,le;t.adler=i.check=1,i.mode=12;case 12:if(e===se||e===ae)break t;case 13:if(i.last){l>>>=7&u,u-=7&u,i.mode=27;break}for(;u<3;){if(0===o)break t;o--,l+=n[s++]<<u,u+=8}switch(i.last=1&l,l>>>=1,u-=1,3&l){case 0:i.mode=14;break;case 1:if(Ee(i),i.mode=20,e===ae){l>>>=2,u-=2;break t}break;case 2:i.mode=17;break;case 3:t.msg="invalid block type",i.mode=30}l>>>=2,u-=2;break;case 14:for(l>>>=7&u,u-=7&u;u<32;){if(0===o)break t;o--,l+=n[s++]<<u,u+=8}if((65535&l)!=(l>>>16^65535)){t.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&l,l=0,u=0,i.mode=15,e===ae)break t;case 15:i.mode=16;case 16:if(f=i.length,f){if(f>o&&(f=o),f>h&&(f=h),0===f)break t;r.set(n.subarray(s,s+f),a),o-=f,s+=f,h-=f,a+=f,i.length-=f;break}i.mode=12;break;case 17:for(;u<14;){if(0===o)break t;o--,l+=n[s++]<<u,u+=8}if(i.nlen=257+(31&l),l>>>=5,u-=5,i.ndist=1+(31&l),l>>>=5,u-=5,i.ncode=4+(15&l),l>>>=4,u-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;u<3;){if(0===o)break t;o--,l+=n[s++]<<u,u+=8}i.lens[O[i.have++]]=7&l,l>>>=3,u-=3}for(;i.have<19;)i.lens[O[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,S={bits:i.lenbits},T=ne(0,i.lens,0,19,i.lencode,0,i.work,S),i.lenbits=S.bits,T){t.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;E=i.lencode[l&(1<<i.lenbits)-1],m=E>>>24,y=E>>>16&255,v=65535&E,!(m<=u);){if(0===o)break t;o--,l+=n[s++]<<u,u+=8}if(v<16)l>>>=m,u-=m,i.lens[i.have++]=v;else{if(16===v){for(C=m+2;u<C;){if(0===o)break t;o--,l+=n[s++]<<u,u+=8}if(l>>>=m,u-=m,0===i.have){t.msg="invalid bit length repeat",i.mode=30;break}b=i.lens[i.have-1],f=3+(3&l),l>>>=2,u-=2}else if(17===v){for(C=m+3;u<C;){if(0===o)break t;o--,l+=n[s++]<<u,u+=8}l>>>=m,u-=m,b=0,f=3+(7&l),l>>>=3,u-=3}else{for(C=m+7;u<C;){if(0===o)break t;o--,l+=n[s++]<<u,u+=8}l>>>=m,u-=m,b=0,f=11+(127&l),l>>>=7,u-=7}if(i.have+f>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=30;break}for(;f--;)i.lens[i.have++]=b}}if(30===i.mode)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,S={bits:i.lenbits},T=ne(1,i.lens,0,i.nlen,i.lencode,0,i.work,S),i.lenbits=S.bits,T){t.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,S={bits:i.distbits},T=ne(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,S),i.distbits=S.bits,T){t.msg="invalid distances set",i.mode=30;break}if(i.mode=20,e===ae)break t;case 20:i.mode=21;case 21:if(o>=6&&h>=258){t.next_out=a,t.avail_out=h,t.next_in=s,t.avail_in=o,i.hold=l,i.bits=u,Zt(t,d),a=t.next_out,r=t.output,h=t.avail_out,s=t.next_in,n=t.input,o=t.avail_in,l=i.hold,u=i.bits,12===i.mode&&(i.back=-1);break}for(i.back=0;E=i.lencode[l&(1<<i.lenbits)-1],m=E>>>24,y=E>>>16&255,v=65535&E,!(m<=u);){if(0===o)break t;o--,l+=n[s++]<<u,u+=8}if(y&&0==(240&y)){for(_=m,x=y,w=v;E=i.lencode[w+((l&(1<<_+x)-1)>>_)],m=E>>>24,y=E>>>16&255,v=65535&E,!(_+m<=u);){if(0===o)break t;o--,l+=n[s++]<<u,u+=8}l>>>=_,u-=_,i.back+=_}if(l>>>=m,u-=m,i.back+=m,i.length=v,0===y){i.mode=26;break}if(32&y){i.back=-1,i.mode=12;break}if(64&y){t.msg="invalid literal/length code",i.mode=30;break}i.extra=15&y,i.mode=22;case 22:if(i.extra){for(C=i.extra;u<C;){if(0===o)break t;o--,l+=n[s++]<<u,u+=8}i.length+=l&(1<<i.extra)-1,l>>>=i.extra,u-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;E=i.distcode[l&(1<<i.distbits)-1],m=E>>>24,y=E>>>16&255,v=65535&E,!(m<=u);){if(0===o)break t;o--,l+=n[s++]<<u,u+=8}if(0==(240&y)){for(_=m,x=y,w=v;E=i.distcode[w+((l&(1<<_+x)-1)>>_)],m=E>>>24,y=E>>>16&255,v=65535&E,!(_+m<=u);){if(0===o)break t;o--,l+=n[s++]<<u,u+=8}l>>>=_,u-=_,i.back+=_}if(l>>>=m,u-=m,i.back+=m,64&y){t.msg="invalid distance code",i.mode=30;break}i.offset=v,i.extra=15&y,i.mode=24;case 24:if(i.extra){for(C=i.extra;u<C;){if(0===o)break t;o--,l+=n[s++]<<u,u+=8}i.offset+=l&(1<<i.extra)-1,l>>>=i.extra,u-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(0===h)break t;if(f=d-h,i.offset>f){if(f=i.offset-f,f>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=30;break}f>i.wnext?(f-=i.wnext,p=i.wsize-f):p=i.wnext-f,f>i.length&&(f=i.length),g=i.window}else g=r,p=a-i.offset,f=i.length;f>h&&(f=h),h-=f,i.length-=f;do{r[a++]=g[p++]}while(--f);0===i.length&&(i.mode=21);break;case 26:if(0===h)break t;r[a++]=i.length,h--,i.mode=21;break;case 27:if(i.wrap){for(;u<32;){if(0===o)break t;o--,l|=n[s++]<<u,u+=8}if(d-=h,t.total_out+=d,i.total+=d,d&&(t.adler=i.check=i.flags?N(i.check,r,d,a-d):F(i.check,r,d,a-d)),d=h,(i.flags?l:ge(l))!==i.check){t.msg="incorrect data check",i.mode=30;break}l=0,u=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;u<32;){if(0===o)break t;o--,l+=n[s++]<<u,u+=8}if(l!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=30;break}l=0,u=0}i.mode=29;case 29:T=he;break t;case 30:T=ce;break t;case 31:return de;case 32:default:return ue}return t.next_out=a,t.avail_out=h,t.next_in=s,t.avail_in=o,i.hold=l,i.bits=u,(i.wsize||d!==t.avail_out&&i.mode<30&&(i.mode<27||e!==re))&&Ae(t,t.output,t.next_out,d-t.avail_out),c-=t.avail_in,d-=t.avail_out,t.total_in+=c,t.total_out+=d,i.total+=d,i.wrap&&d&&(t.adler=i.check=i.flags?N(i.check,r,d,t.next_out-d):F(i.check,r,d,t.next_out-d)),t.data_type=i.bits+(i.last?64:0)+(12===i.mode?128:0)+(20===i.mode||15===i.mode?256:0),(0===c&&0===d||e===re)&&T===oe&&(T=fe),T},inflateEnd:t=>{if(!t||!t.state)return ue;let e=t.state;return e.window&&(e.window=null),t.state=null,oe},inflateGetHeader:(t,e)=>{if(!t||!t.state)return ue;const i=t.state;return 0==(2&i.wrap)?ue:(i.head=e,e.done=!1,oe)},inflateSetDictionary:(t,e)=>{const i=e.length;let n,r,s;return t&&t.state?(n=t.state,0!==n.wrap&&11!==n.mode?ue:11===n.mode&&(r=1,r=F(r,e,i,0),r!==n.check)?ce:(s=Ae(t,e,i,i),s?(n.mode=31,de):(n.havedict=1,oe))):ue},inflateInfo:"pako inflate (from Nodeca project)"};var Ce=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Oe=Object.prototype.toString,{Z_NO_FLUSH:Pe,Z_FINISH:Re,Z_OK:Me,Z_STREAM_END:Le,Z_NEED_DICT:Ie,Z_STREAM_ERROR:ke,Z_DATA_ERROR:De,Z_MEM_ERROR:Fe}=Y;function Be(t){this.options=Mt({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Nt,this.strm.avail_out=0;let i=Se.inflateInit2(this.strm,e.windowBits);if(i!==Me)throw new Error(G[i]);if(this.header=new Ce,Se.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Dt(e.dictionary):"[object ArrayBuffer]"===Oe.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(i=Se.inflateSetDictionary(this.strm,e.dictionary),i!==Me)))throw new Error(G[i])}function Ne(t,e){const i=new Be(e);if(i.push(t),i.err)throw i.msg||G[i.err];return i.result}Be.prototype.push=function(t,e){const i=this.strm,n=this.options.chunkSize,r=this.options.dictionary;let s,a,o;if(this.ended)return!1;for(a=e===~~e?e:!0===e?Re:Pe,"[object ArrayBuffer]"===Oe.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(n),i.next_out=0,i.avail_out=n),s=Se.inflate(i,a),s===Ie&&r&&(s=Se.inflateSetDictionary(i,r),s===Me?s=Se.inflate(i,a):s===De&&(s=Ie));i.avail_in>0&&s===Le&&i.state.wrap>0&&0!==t[i.next_in];)Se.inflateReset(i),s=Se.inflate(i,a);switch(s){case ke:case De:case Ie:case Fe:return this.onEnd(s),this.ended=!0,!1}if(o=i.avail_out,i.next_out&&(0===i.avail_out||s===Le))if("string"===this.options.to){let t=Bt(i.output,i.next_out),e=i.next_out-t,r=Ft(i.output,t);i.next_out=e,i.avail_out=n-e,e&&i.output.set(i.output.subarray(t,t+e),0),this.onData(r)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(s!==Me||0!==o){if(s===Le)return s=Se.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},Be.prototype.onData=function(t){this.chunks.push(t)},Be.prototype.onEnd=function(t){t===Me&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Lt(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Ge={Inflate:Be,inflate:Ne,inflateRaw:function(t,e){return(e=e||{}).raw=!0,Ne(t,e)},ungzip:Ne,constants:Y};const{Deflate:Ye,deflate:ze,deflateRaw:Ue,gzip:Xe}=Jt,{Inflate:Ve,inflate:He,inflateRaw:je,ungzip:We}=Ge;var Ke=Ye,qe=ze,$e=Ue,Je=Xe,Ze=Ve,Qe=He,ti=je,ei=We,ii=Y,ni={Deflate:Ke,deflate:qe,deflateRaw:$e,gzip:Je,Inflate:Ze,inflate:Qe,inflateRaw:ti,ungzip:ei,constants:ii};e.default=ni},function(t,e,i){var n=e;n.utils=i(6),n.common=i(17),n.sha=i(78),n.ripemd=i(82),n.hmac=i(83),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},function(t,e,i){"use strict";e.sha1=i(79),e.sha224=i(80),e.sha256=i(46),e.sha384=i(81),e.sha512=i(47)},function(t,e,i){"use strict";var n=i(6),r=i(17),s=i(45),a=n.rotl32,o=n.sum32,h=n.sum32_5,l=s.ft_1,u=r.BlockHash,c=[1518500249,1859775393,2400959708,3395469782];function d(){if(!(this instanceof d))return new d;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(d,u),t.exports=d,d.blockSize=512,d.outSize=160,d.hmacStrength=80,d.padLength=64,d.prototype._update=function(t,e){for(var i=this.W,n=0;n<16;n++)i[n]=t[e+n];for(;n<i.length;n++)i[n]=a(i[n-3]^i[n-8]^i[n-14]^i[n-16],1);var r=this.h[0],s=this.h[1],u=this.h[2],d=this.h[3],f=this.h[4];for(n=0;n<i.length;n++){var p=~~(n/20),g=h(a(r,5),l(p,s,u,d),f,i[n],c[p]);f=d,d=u,u=a(s,30),s=r,r=g}this.h[0]=o(this.h[0],r),this.h[1]=o(this.h[1],s),this.h[2]=o(this.h[2],u),this.h[3]=o(this.h[3],d),this.h[4]=o(this.h[4],f)},d.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(t,e,i){"use strict";var n=i(6),r=i(46);function s(){if(!(this instanceof s))return new s;r.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(s,r),t.exports=s,s.blockSize=512,s.outSize=224,s.hmacStrength=192,s.padLength=64,s.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},function(t,e,i){"use strict";var n=i(6),r=i(47);function s(){if(!(this instanceof s))return new s;r.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(s,r),t.exports=s,s.blockSize=1024,s.outSize=384,s.hmacStrength=192,s.padLength=128,s.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},function(t,e,i){"use strict";var n=i(6),r=i(17),s=n.rotl32,a=n.sum32,o=n.sum32_3,h=n.sum32_4,l=r.BlockHash;function u(){if(!(this instanceof u))return new u;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function c(t,e,i,n){return t<=15?e^i^n:t<=31?e&i|~e&n:t<=47?(e|~i)^n:t<=63?e&n|i&~n:e^(i|~n)}function d(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function f(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}n.inherits(u,l),e.ripemd160=u,u.blockSize=512,u.outSize=160,u.hmacStrength=192,u.padLength=64,u.prototype._update=function(t,e){for(var i=this.h[0],n=this.h[1],r=this.h[2],l=this.h[3],u=this.h[4],v=i,_=n,x=r,w=l,b=u,T=0;T<80;T++){var E=a(s(h(i,c(T,n,r,l),t[p[T]+e],d(T)),m[T]),u);i=u,u=l,l=s(r,10),r=n,n=E,E=a(s(h(v,c(79-T,_,x,w),t[g[T]+e],f(T)),y[T]),b),v=b,b=w,w=s(x,10),x=_,_=E}E=o(this.h[1],r,w),this.h[1]=o(this.h[2],l,b),this.h[2]=o(this.h[3],u,v),this.h[3]=o(this.h[4],i,_),this.h[4]=o(this.h[0],n,x),this.h[0]=E},u.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"little"):n.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],g=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],m=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],y=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(t,e,i){"use strict";var n=i(6),r=i(16);function s(t,e,i){if(!(this instanceof s))return new s(t,e,i);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(e,i))}t.exports=s,s.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),r(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},s.prototype.update=function(t,e){return this.inner.update(t,e),this},s.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},function(t,e,i){"use strict";var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,r=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,s=t}finally{try{!n&&o.return&&o.return()}finally{if(r)throw s}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,null,[{key:"get_n_pad_bytes",value:function(t){return 64-(t+8&63)}},{key:"pad",value:function(e){var i,r,s=e.byteLength,a=t.get_n_pad_bytes(s),o=(i=s,r=536870912,[Math.floor(i/r),i%r]).map((function(t,e){return e?8*t:t})),h=n(o,2),l=h[0],u=h[1],c=new Uint8Array(s+a+8);c.set(new Uint8Array(e),0);var d=new DataView(c.buffer);return d.setUint8(s,128),d.setUint32(s+a,u,!0),d.setUint32(s+a+4,l,!0),c.buffer}},{key:"f",value:function(t,e,i,n){return 0<=t&&t<=15?e^i^n:16<=t&&t<=31?e&i|~e&n:32<=t&&t<=47?(e|~i)^n:48<=t&&t<=63?e&n|i&~n:64<=t&&t<=79?e^(i|~n):void 0}},{key:"K",value:function(t){return 0<=t&&t<=15?0:16<=t&&t<=31?1518500249:32<=t&&t<=47?1859775393:48<=t&&t<=63?2400959708:64<=t&&t<=79?2840853838:void 0}},{key:"KP",value:function(t){return 0<=t&&t<=15?1352829926:16<=t&&t<=31?1548603684:32<=t&&t<=47?1836072691:48<=t&&t<=63?2053994217:64<=t&&t<=79?0:void 0}},{key:"add_modulo32",value:function(){return 0|Array.from(arguments).reduce((function(t,e){return t+e}),0)}},{key:"rol32",value:function(t,e){return t<<e|t>>>32-e}},{key:"hash",value:function(e){for(var i=t.pad(e),n=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],r=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],a=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],o=i.byteLength/64,h=new Array(o).fill(void 0).map((function(t,e){return function(t){return new DataView(i,64*e,64).getUint32(4*t,!0)}})),l=[1732584193,4023233417,2562383102,271733878,3285377520],u=0;u<o;++u){for(var c=l[0],d=l[1],f=l[2],p=l[3],g=l[4],m=c,y=d,v=f,_=p,x=g,w=0;w<80;++w){var b=t.add_modulo32(t.rol32(t.add_modulo32(c,t.f(w,d,f,p),h[u](n[w]),t.K(w)),s[w]),g);c=g,g=p,p=t.rol32(f,10),f=d,d=b,b=t.add_modulo32(t.rol32(t.add_modulo32(m,t.f(79-w,y,v,_),h[u](r[w]),t.KP(w)),a[w]),x),m=x,x=_,_=t.rol32(v,10),v=y,y=b}var T=t.add_modulo32(l[1],f,_);l[1]=t.add_modulo32(l[2],p,x),l[2]=t.add_modulo32(l[3],g,m),l[3]=t.add_modulo32(l[4],c,y),l[4]=t.add_modulo32(l[0],d,v),l[0]=T}var E=new ArrayBuffer(20),A=new DataView(E);return l.forEach((function(t,e){return A.setUint32(4*e,t,!0)})),E}}]),t}();t.exports={RIPEMD160:s}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,i){"use strict";(function(t){var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{h(n.next(t))}catch(t){s(t)}}function o(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}h((n=n.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var i,n,r,s,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&s[0]?n.return:s[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,s[1])).done)return r;switch(n=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.JsonRpc=void 0;var a=i(29),o=i(48),h=function(t){var e,i,n="";try{for(var r=s(t),a=r.next();!a.done;a=r.next()){n+=("00"+a.value.toString(16)).slice(-2)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(e)throw e.error}}return n},l=function(){function e(e,i){void 0===i&&(i={}),this.endpoint=e.replace(/\/$/,""),i.fetch?this.fetchBuiltin=i.fetch:this.fetchBuiltin=t.fetch}return e.prototype.fetch=function(t,e){return n(this,void 0,void 0,(function(){var i,n,s;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,(0,this.fetchBuiltin)(this.endpoint+t,{body:JSON.stringify(e),method:"POST"})];case 1:return[4,(i=r.sent()).json()];case 2:if((n=r.sent()).processed&&n.processed.except)throw new o.RpcError(n);if(n.result&&n.result.except)throw new o.RpcError(n);return[3,4];case 3:throw(s=r.sent()).isFetchError=!0,s;case 4:if(!i.ok)throw new o.RpcError(n);return[2,n]}}))}))},e.prototype.abi_bin_to_json=function(t,e,i){return n(this,void 0,void 0,(function(){return r(this,(function(n){switch(n.label){case 0:return[4,this.fetch("/v1/chain/abi_bin_to_json",{code:t,action:e,binargs:i})];case 1:return[2,n.sent()]}}))}))},e.prototype.abi_json_to_bin=function(t,e,i){return n(this,void 0,void 0,(function(){return r(this,(function(n){switch(n.label){case 0:return[4,this.fetch("/v1/chain/abi_json_to_bin",{code:t,action:e,args:i})];case 1:return[2,n.sent()]}}))}))},e.prototype.get_abi=function(t){return n(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.fetch("/v1/chain/get_abi",{account_name:t})];case 1:return[2,e.sent()]}}))}))},e.prototype.get_account=function(t){return n(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.fetch("/v1/chain/get_account",{account_name:t})];case 1:return[2,e.sent()]}}))}))},e.prototype.get_accounts_by_authorizers=function(t,e){return n(this,void 0,void 0,(function(){return r(this,(function(i){switch(i.label){case 0:return[4,this.fetch("/v1/chain/get_accounts_by_authorizers",{accounts:t,keys:e})];case 1:return[2,i.sent()]}}))}))},e.prototype.get_activated_protocol_features=function(t){var e=t.limit,i=void 0===e?10:e,s=t.search_by_block_num,a=void 0!==s&&s,o=t.reverse,h=void 0!==o&&o,l=t.lower_bound,u=void 0===l?null:l,c=t.upper_bound,d=void 0===c?null:c;return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this.fetch("/v1/chain/get_activated_protocol_features",{lower_bound:u,upper_bound:d,limit:i,search_by_block_num:a,reverse:h})];case 1:return[2,t.sent()]}}))}))},e.prototype.get_block_header_state=function(t){return n(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.fetch("/v1/chain/get_block_header_state",{block_num_or_id:t})];case 1:return[2,e.sent()]}}))}))},e.prototype.get_block_info=function(t){return n(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.fetch("/v1/chain/get_block_info",{block_num:t})];case 1:return[2,e.sent()]}}))}))},e.prototype.get_block=function(t){return n(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.fetch("/v1/chain/get_block",{block_num_or_id:t})];case 1:return[2,e.sent()]}}))}))},e.prototype.get_code=function(t){return n(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.fetch("/v1/chain/get_code",{account_name:t,code_as_wasm:!0})];case 1:return[2,e.sent()]}}))}))},e.prototype.get_code_hash=function(t){return n(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.fetch("/v1/chain/get_code_hash",{account_name:t})];case 1:return[2,e.sent()]}}))}))},e.prototype.get_currency_balance=function(t,e,i){return void 0===i&&(i=null),n(this,void 0,void 0,(function(){return r(this,(function(n){switch(n.label){case 0:return[4,this.fetch("/v1/chain/get_currency_balance",{code:t,account:e,symbol:i})];case 1:return[2,n.sent()]}}))}))},e.prototype.get_currency_stats=function(t,e){return n(this,void 0,void 0,(function(){return r(this,(function(i){switch(i.label){case 0:return[4,this.fetch("/v1/chain/get_currency_stats",{code:t,symbol:e})];case 1:return[2,i.sent()]}}))}))},e.prototype.get_info=function(){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this.fetch("/v1/chain/get_info",{})];case 1:return[2,t.sent()]}}))}))},e.prototype.get_producer_schedule=function(){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this.fetch("/v1/chain/get_producer_schedule",{})];case 1:return[2,t.sent()]}}))}))},e.prototype.get_producers=function(t,e,i){return void 0===t&&(t=!0),void 0===e&&(e=""),void 0===i&&(i=50),n(this,void 0,void 0,(function(){return r(this,(function(n){switch(n.label){case 0:return[4,this.fetch("/v1/chain/get_producers",{json:t,lower_bound:e,limit:i})];case 1:return[2,n.sent()]}}))}))},e.prototype.get_raw_code_and_abi=function(t){return n(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.fetch("/v1/chain/get_raw_code_and_abi",{account_name:t})];case 1:return[2,e.sent()]}}))}))},e.prototype.getRawAbi=function(t){return n(this,void 0,void 0,(function(){var e,i;return r(this,(function(n){switch(n.label){case 0:return[4,this.get_raw_abi(t)];case 1:return e=n.sent(),i=a.base64ToBinary(e.abi),[2,{accountName:e.account_name,abi:i}]}}))}))},e.prototype.get_raw_abi=function(t){return n(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.fetch("/v1/chain/get_raw_abi",{account_name:t})];case 1:return[2,e.sent()]}}))}))},e.prototype.get_scheduled_transactions=function(t,e,i){return void 0===t&&(t=!0),void 0===e&&(e=""),void 0===i&&(i=50),n(this,void 0,void 0,(function(){return r(this,(function(n){switch(n.label){case 0:return[4,this.fetch("/v1/chain/get_scheduled_transactions",{json:t,lower_bound:e,limit:i})];case 1:return[2,n.sent()]}}))}))},e.prototype.get_table_rows=function(t){var e=t.json,i=void 0===e||e,s=t.code,a=t.scope,o=t.table,h=t.lower_bound,l=void 0===h?"":h,u=t.upper_bound,c=void 0===u?"":u,d=t.index_position,f=void 0===d?1:d,p=t.key_type,g=void 0===p?"":p,m=t.limit,y=void 0===m?10:m,v=t.reverse,_=void 0!==v&&v,x=t.show_payer,w=void 0!==x&&x;return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this.fetch("/v1/chain/get_table_rows",{json:i,code:s,scope:a,table:o,lower_bound:l,upper_bound:c,index_position:f,key_type:g,limit:y,reverse:_,show_payer:w})];case 1:return[2,t.sent()]}}))}))},e.prototype.get_kv_table_rows=function(t){var e=t.json,i=void 0===e||e,s=t.code,a=t.table,o=t.index_name,h=t.encode_type,l=void 0===h?"bytes":h,u=t.index_value,c=t.lower_bound,d=t.upper_bound,f=t.limit,p=void 0===f?10:f,g=t.reverse,m=void 0!==g&&g,y=t.show_payer,v=void 0!==y&&y;return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this.fetch("/v1/chain/get_kv_table_rows",{json:i,code:s,table:a,index_name:o,encode_type:l,index_value:u,lower_bound:c,upper_bound:d,limit:p,reverse:m,show_payer:v})];case 1:return[2,t.sent()]}}))}))},e.prototype.get_table_by_scope=function(t){var e=t.code,i=t.table,s=t.lower_bound,a=void 0===s?"":s,o=t.upper_bound,h=void 0===o?"":o,l=t.limit,u=void 0===l?10:l;return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this.fetch("/v1/chain/get_table_by_scope",{code:e,table:i,lower_bound:a,upper_bound:h,limit:u})];case 1:return[2,t.sent()]}}))}))},e.prototype.getRequiredKeys=function(t){return n(this,void 0,void 0,(function(){var e;return r(this,(function(i){switch(i.label){case 0:return e=a.convertLegacyPublicKeys,[4,this.fetch("/v1/chain/get_required_keys",{transaction:t.transaction,available_keys:t.availableKeys})];case 1:return[2,e.apply(void 0,[i.sent().required_keys])]}}))}))},e.prototype.push_transaction=function(t){var e=t.signatures,i=t.compression,s=void 0===i?0:i,a=t.serializedTransaction,o=t.serializedContextFreeData;return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this.fetch("/v1/chain/push_transaction",{signatures:e,compression:s,packed_context_free_data:h(o||new Uint8Array(0)),packed_trx:h(a)})];case 1:return[2,t.sent()]}}))}))},e.prototype.push_ro_transaction=function(t,e){var i=t.signatures,s=t.compression,a=void 0===s?0:s,o=t.serializedTransaction;return void 0===e&&(e=!1),n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this.fetch("/v1/chain/push_ro_transaction",{transaction:{signatures:i,compression:a,packed_context_free_data:h(new Uint8Array(0)),packed_trx:h(o)},return_failure_traces:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.push_transactions=function(t){return n(this,void 0,void 0,(function(){var e;return r(this,(function(i){switch(i.label){case 0:return e=t.map((function(t){var e=t.signatures,i=t.compression,n=void 0===i?0:i,r=t.serializedTransaction,s=t.serializedContextFreeData;return{signatures:e,compression:n,packed_context_free_data:h(s||new Uint8Array(0)),packed_trx:h(r)}})),[4,this.fetch("/v1/chain/push_transactions",e)];case 1:return[2,i.sent()]}}))}))},e.prototype.send_transaction=function(t){var e=t.signatures,i=t.compression,s=void 0===i?0:i,a=t.serializedTransaction,o=t.serializedContextFreeData;return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this.fetch("/v1/chain/send_transaction",{signatures:e,compression:s,packed_context_free_data:h(o||new Uint8Array(0)),packed_trx:h(a)})];case 1:return[2,t.sent()]}}))}))},e.prototype.db_size_get=function(){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this.fetch("/v1/db_size/get",{})];case 1:return[2,t.sent()]}}))}))},e.prototype.trace_get_block=function(t){return n(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.fetch("/v1/trace_api/get_block",{block_num:t})];case 1:return[2,e.sent()]}}))}))},e.prototype.history_get_actions=function(t,e,i){return void 0===e&&(e=null),void 0===i&&(i=null),n(this,void 0,void 0,(function(){return r(this,(function(n){switch(n.label){case 0:return[4,this.fetch("/v1/history/get_actions",{account_name:t,pos:e,offset:i})];case 1:return[2,n.sent()]}}))}))},e.prototype.history_get_transaction=function(t,e){return void 0===e&&(e=null),n(this,void 0,void 0,(function(){return r(this,(function(i){switch(i.label){case 0:return[4,this.fetch("/v1/history/get_transaction",{id:t,block_num_hint:e})];case 1:return[2,i.sent()]}}))}))},e.prototype.history_get_key_accounts=function(t){return n(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.fetch("/v1/history/get_key_accounts",{public_key:t})];case 1:return[2,e.sent()]}}))}))},e.prototype.history_get_controlled_accounts=function(t){return n(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.fetch("/v1/history/get_controlled_accounts",{controlling_account:t})];case 1:return[2,e.sent()]}}))}))},e}();e.JsonRpc=l}).call(this,i(3))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(i(49)),s=n(i(89));function a(t,e){var i;const n={};for(const t of e){const e=null!==(i=t.type)&&void 0!==i?i:"data";"number"==typeof t.value?n[e+":number."+t.key]=String(t.value):"boolean"==typeof t.value?n[e+":bool."+t.key]=t.value?"true":"false":n[e+"."+t.key]=t.value}return Object.assign({},t,n)}e.default=class{constructor(t,e,i){this.endpoint=t,this.namespace=e,i.fetch?this.fetchBuiltin=i.fetch:this.fetchBuiltin=window.fetch,this.action=(async()=>new r.default((await this.getConfig()).contract,this))()}async getConfig(){return await this.fetchEndpoint("/v1/config",{})}async getAssets(t={},e=1,i=100,n=[]){return await this.fetchEndpoint("/v1/assets",Object.assign({page:e,limit:i},a(t,n)))}async countAssets(t,e=[]){return await this.countEndpoint("/v1/assets",a(t,e))}async getAsset(t){return await this.fetchEndpoint("/v1/assets/"+t,{})}async getAssetStats(t){return await this.fetchEndpoint("/v1/assets/"+t+"/stats",{})}async getAssetLogs(t,e=1,i=100,n="desc"){return await this.fetchEndpoint("/v1/assets/"+t+"/logs",{page:e,limit:i,order:n})}async getCollections(t={},e=1,i=100){return await this.fetchEndpoint("/v1/collections",Object.assign({page:e,limit:i},t))}async countCollections(t={}){return await this.countEndpoint("/v1/collections",t)}async getCollection(t){return await this.fetchEndpoint("/v1/collections/"+t,{})}async getCollectionStats(t){return await this.fetchEndpoint("/v1/collections/"+t+"/stats",{})}async getCollectionLogs(t,e=1,i=100,n="desc"){return await this.fetchEndpoint("/v1/collections/"+t+"/logs",{page:e,limit:i,order:n})}async getSchemas(t={},e=1,i=100){return await this.fetchEndpoint("/v1/schemas",Object.assign({page:e,limit:i},t))}async countSchemas(t={}){return await this.countEndpoint("/v1/schemas",t)}async getSchema(t,e){return await this.fetchEndpoint("/v1/schemas/"+t+"/"+e,{})}async getSchemaStats(t,e){return await this.fetchEndpoint("/v1/schemas/"+t+"/"+e+"/stats",{})}async getSchemaLogs(t,e,i=1,n=100,r="desc"){return await this.fetchEndpoint("/v1/schemas/"+t+"/"+e+"/logs",{page:i,limit:n,order:r})}async getTemplates(t={},e=1,i=100,n=[]){return await this.fetchEndpoint("/v1/templates",Object.assign({page:e,limit:i},a(t,n)))}async countTemplates(t={},e=[]){return await this.countEndpoint("/v1/templates",a(t,e))}async getTemplate(t,e){return await this.fetchEndpoint("/v1/templates/"+t+"/"+e,{})}async getTemplateStats(t,e){return await this.fetchEndpoint("/v1/templates/"+t+"/"+e+"/stats",{})}async getTemplateLogs(t,e,i=1,n=100,r="desc"){return await this.fetchEndpoint("/v1/templates/"+t+"/"+e+"/logs",{page:i,limit:n,order:r})}async getTransfers(t={},e=1,i=100){return await this.fetchEndpoint("/v1/transfers",Object.assign({page:e,limit:i},t))}async countTransfers(t={}){return await this.countEndpoint("/v1/transfers",t)}async getOffers(t={},e=1,i=100){return await this.fetchEndpoint("/v1/offers",Object.assign({page:e,limit:i},t))}async countOffers(t={}){return await this.countEndpoint("/v1/offers",t)}async getOffer(t){return await this.fetchEndpoint("/v1/offers/"+t,{})}async getAccounts(t={},e=1,i=100){return await this.fetchEndpoint("/v1/accounts",Object.assign({page:e,limit:i},t))}async getBurns(t={},e=1,i=100){return await this.fetchEndpoint("/v1/burns",Object.assign({page:e,limit:i},t))}async countAccounts(t={}){return await this.countEndpoint("/v1/accounts",t)}async getAccount(t,e={}){return await this.fetchEndpoint("/v1/accounts/"+t,e)}async getAccountCollection(t,e){return await this.fetchEndpoint("/v1/accounts/"+t+"/"+e,{})}async getAccountBurns(t,e={}){return await this.fetchEndpoint("/v1/burns/"+t,e)}async fetchEndpoint(t,e){let i,n;const r=this.fetchBuiltin,a=Object.keys(e).map(t=>{let i=e[t];return!0===i&&(i="true"),!1===i&&(i="false"),t+"="+encodeURIComponent(i)}).join("&");try{i=await r(this.endpoint+"/"+this.namespace+t+(a.length>0?"?"+a:"")),n=await i.json()}catch(t){throw new s.default(t.message,500)}if(200!==i.status)throw new s.default(n.message,i.status);if(!n.success)throw new s.default(n.message,i.status);return n.data}async countEndpoint(t,e){const i=await this.fetchEndpoint(t+"/_count",e);return parseInt(i,10)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n extends Error{constructor(t,e){super(t),this.message=t,this.status=e,this.isApiError=!0}}e.default=n},function(t,e,i){"use strict";(function(t){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(i(50)),s=n(i(91)),a=n(i(51)),o=n(i(96)),h=n(i(33)),l=n(i(98)),u=n(i(99)),c=n(i(35)),d=n(i(54));e.default=class{constructor(e,i,n={rateLimit:4}){this.endpoint=e,this.contract=i,n.fetch?this.fetchBuiltin=n.fetch:this.fetchBuiltin=t.fetch,this.queue=new u.default(this,n.rateLimit),this.cache=new o.default,this.action=new r.default(this),this._config=new Promise(async(t,e)=>{try{const i=await this.getTableRows({code:this.contract,scope:this.contract,table:"config"});return 1!==i.rows.length?e("invalid config"):t(i.rows[0])}catch(t){e(t)}})}async config(){return await this._config}async getAsset(t,e,i=!0){i||this.cache.deleteAsset(e);const n=await this.queue.fetchAsset(t,e,i);return new a.default(this,t,e,n,void 0,void 0,void 0,i)}async getTemplate(t,e,i=!0){i||this.cache.deleteTemplate(t,e);const n=await this.queue.fetchTemplate(t,e,i);return new d.default(this,t,e,n,void 0,i)}async getCollection(t,e=!0){e||this.cache.deleteCollection(t);const i=await this.queue.fetchCollection(t,e);return new h.default(this,t,i,e)}async getCollectionTemplates(t){return(await this.queue.fetchCollectionTemplates(t)).map(e=>new d.default(this,t,String(e.template_id),e,void 0))}async getCollectionsSchemas(t){return(await this.queue.fetchCollectionSchemas(t)).map(e=>new c.default(this,t,e.schema_name,void 0))}async getSchema(t,e,i=!0){i||this.cache.deleteSchema(t,e);const n=await this.queue.fetchSchema(t,e,i);return new c.default(this,t,e,n,i)}async getOffer(t,e=!0){e||this.cache.deleteOffer(t);const i=await this.queue.fetchOffer(t,e);return new l.default(this,t,i,void 0,void 0,e)}async getAccountOffers(t){return(await this.queue.fetchAccountOffers(t)).map(t=>new l.default(this,t.offer_id,t,void 0,void 0))}async getAccountAssets(t){return(await this.queue.fetchAccountAssets(t)).map(e=>new a.default(this,t,e.asset_id,e,void 0,void 0,void 0))}async getCollectionInventory(t,e){return await this.queue.preloadCollection(t,!0),(await this.queue.fetchAccountAssets(e)).filter(e=>e.collection_name===t).map(t=>new a.default(this,e,t.asset_id,t,void 0,void 0,void 0))}async preloadCollection(t,e=!0){await this.queue.preloadCollection(t,e)}async getTableRows({code:t,scope:e,table:i,table_key:n="",lower_bound:r="",upper_bound:s="",index_position:a=1,key_type:o=""}){return await this.fetchRpc("/v1/chain/get_table_rows",{code:t,scope:e,table:i,table_key:n,lower_bound:r,upper_bound:s,index_position:a,key_type:o,limit:101,reverse:!1,show_payer:!1,json:!0})}async fetchRpc(t,e){let i,n;try{const r=this.fetchBuiltin;i=await r(this.endpoint+t,{body:JSON.stringify(e),method:"POST"}),n=await i.json()}catch(t){throw t.isFetchError=!0,t}if(n.processed&&n.processed.except||!i.ok)throw new s.default(n);return n}}}).call(this,i(3))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n extends Error{constructor(t){t.error&&t.error.details&&t.error.details.length&&t.error.details[0].message?super(t.error.details[0].message):t.processed&&t.processed.except&&t.processed.except.message?super(t.processed.except.message):super(t.message),this.json=t}}e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t){if(this.ALPHABET=t,t.length>=255)throw new TypeError("Alphabet too long");this.BASE_MAP=new Uint8Array(256);for(let t=0;t<this.BASE_MAP.length;t++)this.BASE_MAP[t]=255;for(let e=0;e<t.length;e++){const i=t.charAt(e),n=i.charCodeAt(0);if(255!==this.BASE_MAP[n])throw new TypeError(i+" is ambiguous");this.BASE_MAP[n]=e}this.BASE=t.length,this.LEADER=t.charAt(0),this.FACTOR=Math.log(this.BASE)/Math.log(256),this.iFACTOR=Math.log(256)/Math.log(this.BASE)}encode(t){if(0===t.length)return"";let e=0,i=0,n=0;const r=t.length;for(;n!==r&&0===t[n];)n++,e++;const s=(r-n)*this.iFACTOR+1>>>0,a=new Uint8Array(s);for(;n!==r;){let e=t[n],r=0;for(let t=s-1;(0!==e||r<i)&&-1!==t;t--,r++)e+=256*a[t]>>>0,a[t]=e%this.BASE>>>0,e=e/this.BASE>>>0;if(0!==e)throw new Error("Non-zero carry");i=r,n++}let o=s-i;for(;o!==s&&0===a[o];)o++;let h=this.LEADER.repeat(e);for(;o<s;++o)h+=this.ALPHABET.charAt(a[o]);return h}decode(t){const e=this.decodeUnsafe(t);if(e)return e;throw new Error("Non-base"+this.BASE+" character")}decodeUnsafe(t){if(0===t.length)return new Uint8Array(0);let e=0;if(" "===t[e])return new Uint8Array(0);let i=0,n=0;for(;t[e]===this.LEADER;)i++,e++;const r=(t.length-e)*this.FACTOR+1>>>0,s=new Uint8Array(r);for(;t[e];){let i=this.BASE_MAP[t.charCodeAt(e)];if(255===i)return new Uint8Array(0);let a=0;for(let t=r-1;(0!==i||a<n)&&-1!==t;t--,a++)i+=this.BASE*s[t]>>>0,s[t]=i%256>>>0,i=i/256>>>0;if(0!==i)throw new Error("Non-zero carry");n=a,e++}if(" "===t[e])return new Uint8Array(0);let a=r-n;for(;a!==r&&0===s[a];)a++;const o=new Uint8Array(i+(r-a));o.fill(0,0,i);let h=i;for(;a!==r;)o[h++]=s[a++];return o}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.prepare=void 0;class n{constructor(t,e=0){this.data=t,this.position=e}}e.default=n,e.prepare=function(t){return new n(t,0)}},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(i(31)),s=i(12);e.default=class{constructor(t){if(void 0===s.ParserTypes[t])throw new r.default(`attribute type '${t}' not defined`);this.parser=s.ParserTypes[t]}deserialize(t){return this.parser.deserialize(t)}serialize(t){return this.parser.serialize(t)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(13);e.default=class{constructor(t){this.element=t}deserialize(t){const e=n.varint_decode(t).toJSNumber(),i=[];for(let n=0;n<e;n++)i.push(this.element.deserialize(t));return i}serialize(t){const e=[n.varint_encode(t.length)];for(const i of t)e.push(this.element.serialize(i));return n.concat_byte_arrays(e)}}},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(i(97));e.default=class{constructor(){this.cache=new r.default({expiryCheckInterval:6e4})}getAsset(t,e){return e&&(e.mutable_serialized_data=new Uint8Array(e.mutable_serialized_data),e.immutable_serialized_data=new Uint8Array(e.immutable_serialized_data)),this.access("assets",t,e)}deleteAsset(t){this.delete("assets",t)}getTemplate(t,e,i){return i&&(i.immutable_serialized_data=new Uint8Array(i.immutable_serialized_data)),this.access("templates",t+":"+e,i)}deleteTemplate(t,e){this.delete("templates",t+":"+e)}getSchema(t,e,i){return this.access("schemas",t+":"+e,i)}deleteSchema(t,e){this.delete("schemas",t+":"+e)}getCollection(t,e){return this.access("collections",t,e)}deleteCollection(t){this.delete("collections",t)}getOffer(t,e){return this.access("offers",t,e)}deleteOffer(t){this.delete("offers",t)}access(t,e,i){if(void 0===i){const i=this.cache.get(t+":"+e);return null===i?null:i.value}return this.cache.put(t+":"+e,i,9e5),i}delete(t,e){this.cache.remove(t+":"+e)}}},function(t,e,i){t.exports=function(){"use strict";function t(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function e(e){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?t(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(t){return{all:t=t||new Map,on:function(e,i){var n=t.get(e);n?n.push(i):t.set(e,[i])},off:function(e,i){var n=t.get(e);n&&(i?n.splice(n.indexOf(i)>>>0,1):t.set(e,[]))},emit:function(e,i){var n=t.get(e);n&&n.slice().map((function(t){t(i)})),(n=t.get("*"))&&n.slice().map((function(t){t(e,i)}))}}}var o="expiry",h=function(t){if(t)throw new Error("Cannot use disposed instance.")},l={expiryCheckInterval:100},u=function(){function t(){var n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),s(this,"expire",(function(){h(n.disposed);for(var t=Date.now(),e=t;e>=n.lastExpiredTime;e-=1){var i=n.queue[e];i&&(delete n.queue[e],i.forEach((function(t){var e=t.key;return(0,t.onExpire)(e)})))}n.lastExpiredTime=t})),this.config=e(e({},l),r),this.queue={},this.disposed=!1,this.lastExpiredTime=Date.now()-1;var a=this.config.expiryCheckInterval;this.timer=setInterval(this.expire,a)}return r(t,[{key:"add",value:function(t,e,i){return h(this.disposed),this.queue[t]||(this.queue[t]=[]),this.queue[t].push({key:e,onExpire:i}),!0}},{key:"remove",value:function(t,e){h(this.disposed);var i=this.queue[t];if(i){var n=i.filter((function(t){return t.key!==e}));return n.length?this.queue[t]=n:delete this.queue[t],!0}return!1}},{key:"dispose",value:function(){return h(this.disposed),clearInterval(this.timer),this.timer=null,this.queue={},this.disposed=!0,!0}}]),t}(),c={defaultCacheExpiryIn:6e4,expiryCheckInterval:100};return function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;i(this,t),this.config=e(e({},c),n);var s=a(),o=s.on,h=s.off,l=s.emit,d=[o,h,l];this.on=d[0],this.off=d[1],this.emit=d[2],this.cacheStore={},this.disposed=!1;var f=this.config.expiryCheckInterval;this.cacheExpirer=new r({expiryCheckInterval:f})}return r(t,[{key:"put",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.config.defaultCacheExpiryIn;h(this.disposed),this.cacheStore[e]&&this.remove(e);var r=Date.now(),s=n?r+n:null,a={value:i,addedAt:r,expiryAt:s};if(this.cacheStore[e]=a,s){var l=function(){t.remove(e),t.emit(o,{key:e,data:t.cacheStore[e]})};this.cacheExpirer.add(s,e,l)}return this.emit("add",{key:e,data:a}),a}},{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";h(this.disposed);var e=this.cacheStore[t];return e?(this.emit("get",{key:t,data:e}),e):null}},{key:"remove",value:function(t){h(this.disposed);var e=this.cacheStore[t];if(e){delete this.cacheStore[t];var i=e.expiryAt;return this.cacheExpirer.remove(i,t),this.emit("remove",{key:t,data:e}),!0}return!1}},{key:"dispose",value:function(){var t=this;return h(this.disposed),Object.keys(this.cacheStore).forEach((function(e){return t.remove(e)})),this.emit("clear",{}),this.cacheExpirer.dispose(),this.disposed=!0,!0}}]),t}()}()},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(i(51));e.default=class{constructor(t,e,i,n,s,a=!0){this.api=t,this.id=e,this._data=new Promise(async(t,n)=>{if(i)t(i);else try{t(await this.api.queue.fetchOffer(e,a))}catch(t){n(t)}}),this._senderAssets=new Promise(async(t,e)=>{if(n)t(n);else try{const e=await this._data,i=await this.api.queue.fetchAccountAssets(e.sender);return t(e.sender_asset_ids.map(t=>{const n=i.find(e=>e.asset_id===t);return n?new r.default(this.api,e.sender,t,n,void 0,void 0,void 0,a):t}))}catch(t){return e(t)}}),this._recipientAssets=new Promise(async(t,e)=>{if(s)t(s);else try{const e=await this._data,i=await this.api.queue.fetchAccountAssets(e.recipient);return t(e.recipient_asset_ids.map(t=>{const n=i.find(e=>e.asset_id===t);return n?new r.default(this.api,e.recipient,t,n,void 0,void 0,void 0,a):t}))}catch(t){return e(t)}})}async sender(){return(await this._data).sender}async recipient(){return(await this._data).recipient}async senderAssets(){return await this._senderAssets}async recipientAssets(){return await this._recipientAssets}async memo(){return(await this._data).memo}async toObject(){return{offer_id:this.id,sender:{account:await this.sender(),assets:await Promise.all((await this.senderAssets()).map(async t=>"string"==typeof t?t:await t.toObject()))},recipient:{account:await this.recipient(),assets:await Promise.all((await this.recipientAssets()).map(async t=>"string"==typeof t?t:await t.toObject()))},memo:await this.memo()}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e=4){this.api=t,this.requestLimit=e,this.elements=[],this.interval=null,this.preloadedCollections={}}async fetchAsset(t,e,i=!0){return await this.fetch_single_row("assets",t,e,t=>i||void 0!==t?this.api.cache.getAsset(e,t):null)}async fetchAccountAssets(t){return(await this.fetch_all_rows("assets",t,"asset_id")).map(t=>this.api.cache.getAsset(t.asset_id,t))}async fetchTemplate(t,e,i=!0){return await this.fetch_single_row("templates",t,e,n=>i||void 0!==n?this.api.cache.getTemplate(t,e,n):null)}async fetchSchema(t,e,i=!0){return await this.fetch_single_row("schemas",t,e,n=>i||void 0!==n?this.api.cache.getSchema(t,e,n):null)}async fetchCollection(t,e=!0){return await this.fetch_single_row("collections",this.api.contract,t,i=>e||void 0!==i?this.api.cache.getCollection(t,i):null)}async fetchCollectionSchemas(t){return(await this.fetch_all_rows("schemas",t,"schema_name")).map(e=>this.api.cache.getSchema(t,e.schema_name,e))}async fetchCollectionTemplates(t){return(await this.fetch_all_rows("templates",t,"template_id")).map(e=>this.api.cache.getTemplate(t,String(e.template_id),e))}async preloadCollection(t,e=!0){(!e||!this.preloadedCollections[t]||this.preloadedCollections[t]+9e5<Date.now())&&(await this.fetchCollectionSchemas(t),await this.fetchCollectionTemplates(t))}async fetchOffer(t,e=!0){return await this.fetch_single_row("offers",this.api.contract,t,i=>e||void 0!==i?this.api.cache.getOffer(t,i):null)}async fetchAccountOffers(t){const e=await Promise.all([this.fetch_all_rows("offers",this.api.contract,"offer_sender",t,t,2,"name"),this.fetch_all_rows("offers",this.api.contract,"offer_recipient",t,t,3,"name")]);return e[0].concat(e[1]).map(t=>this.api.cache.getOffer(t.offer_id,t))}dequeue(){this.interval||(this.interval=setInterval(async()=>{this.elements.length>0?this.elements.shift()():(clearInterval(this.interval),this.interval=null)},Math.ceil(1e3/this.requestLimit)))}async fetch_single_row(t,e,i,n,r=1,s=""){return new Promise((a,o)=>{let h=n();if(null!==h)return a(h);this.elements.push(async()=>{if(h=n(),null!==h)return a(h);try{const h={code:this.api.contract,table:t,scope:e,limit:1,lower_bound:i,upper_bound:i,index_position:r,key_type:s},l=await this.api.getTableRows(h);return 0===l.rows.length?o(new Error("Row not found for "+JSON.stringify(h))):a(n(l.rows[0]))}catch(t){return o(t)}}),this.dequeue()})}async fetch_all_rows(t,e,i,n="",r="",s=1,a=""){return new Promise(async(o,h)=>{this.elements.push(async()=>{const l=await this.api.getTableRows({code:this.api.contract,scope:e,table:t,lower_bound:n,upper_bound:r,limit:1e3,index_position:s,key_type:a});l.more&&1===s?(this.elements.unshift(async()=>{try{const n=await this.fetch_all_rows(t,e,i,l.rows[l.rows.length-1][i],r,s,a);n.length>0&&n.shift(),o(l.rows.concat(n))}catch(t){h(t)}}),this.dequeue()):o(l.rows)}),this.dequeue()})}}},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ParserTypes=void 0;const r=n(i(101)),s=i(102),a=n(i(103)),o=n(i(104)),h=n(i(106)),l=n(i(107)),u=n(i(108));e.ParserTypes={int8:new u.default(1,!1),int16:new u.default(2,!1),int32:new u.default(4,!1),int64:new u.default(8,!1),uint8:new u.default(1,!0),uint16:new u.default(2,!0),uint32:new u.default(4,!0),uint64:new u.default(8,!0),fixed8:new a.default(1),fixed16:new a.default(2),fixed32:new a.default(4),fixed64:new a.default(8),bool:new r.default,bytes:new s.ByteParser,string:new l.default,image:new l.default,ipfs:new h.default,float:new o.default(!1),double:new o.default(!0)}},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(i(36));class s extends r.default{constructor(){super(1)}deserialize(t){return 1===super.deserialize(t)[0]?1:0}serialize(t){return super.serialize(new Uint8Array([t?1:0]))}}e.default=s},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ByteParser=void 0;const r=n(i(37));class s extends r.default{deserialize(t){return super.deserialize(t)}serialize(t){return super.serialize(t)}}e.ByteParser=s},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(i(32)),s=n(i(36));class a extends s.default{deserialize(t){const e=super.deserialize(t).reverse();let i=r.default(0);for(const t of e)i=i.shiftLeft(8),i=i.plus(t);return this.size<=6?i.toJSNumber():i.toString()}serialize(t){let e=r.default(t);const i=[];for(let t=0;t<this.size;t++)i.push(e.and(255).toJSNumber()),e=e.shiftRight(8);return super.serialize(new Uint8Array(i))}}e.default=a},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(i(36)),s=i(105);class a extends r.default{constructor(t){super(t?8:4),this.isDouble=t}deserialize(t){return this.isDouble?s.readDoubleLE(super.deserialize(t)):s.readFloatLE(super.deserialize(t))}serialize(t){let e=[];return this.isDouble?(s.writeDoubleLE(e,t),super.serialize(new Uint8Array(e))):(s.writeFloatLE(e,t),super.serialize(new Uint8Array(e)))}}e.default=a},function(t,e,i){"use strict";var n,r,s,a,o,h,l,u,c,d,f,p,g=!1;function m(t,e,i){var n=t[e++],r=t[e++],s=t[e++],a=t[e];return"bige"===i?256*(256*(256*n+r)+s)+a:256*(256*(256*a+s)+r)+n}function y(t,e,i,n){var r=e>>>24&255,s=e>>16&255,a=e>>8&255,o=255&e;"bige"===n?(t[i++]=r,t[i++]=s,t[i++]=a,t[i]=o):(t[i++]=o,t[i++]=a,t[i++]=s,t[i]=r)}function v(t,e,i,n,r){"bige"===r?(y(t,e,n,r),y(t,i,n+4,r)):(y(t,i,n,r),y(t,e,n+4,r))}"function"==typeof Float32Array&&(c=new Float32Array(1),d=new Uint8Array(c.buffer),c[0]=-1,g=0===d[3],n=function(t,e){return(e=e||0)<0||e+4>t.length?0:(d[0]=t[e++],d[1]=t[e++],d[2]=t[e++],d[3]=t[e],c[0])},s=function(t,e){return(e=e||0)<0||e+4>t.length?0:(d[3]=t[e++],d[2]=t[e++],d[1]=t[e++],d[0]=t[e],c[0])},r=function(t,e,i){i=i||0,c[0]=e,t[i++]=d[0],t[i++]=d[1],t[i++]=d[2],t[i]=d[3]},a=function(t,e,i){i=i||0,c[0]=e,t[i++]=d[3],t[i++]=d[2],t[i++]=d[1],t[i]=d[0]}),"function"==typeof Float64Array&&(f=new Float64Array(1),p=new Uint8Array(f.buffer),o=function(t,e){return(e=e||0)<0||e+8>t.length?0:(p[0]=t[e+0],p[1]=t[e+1],p[2]=t[e+2],p[3]=t[e+3],p[4]=t[e+4],p[5]=t[e+5],p[6]=t[e+6],p[7]=t[e+7],f[0])},l=function(t,e){return(e=e||0)<0||e+8>t.length?0:(p[7]=t[e+0],p[6]=t[e+1],p[5]=t[e+2],p[4]=t[e+3],p[3]=t[e+4],p[2]=t[e+5],p[1]=t[e+6],p[0]=t[e+7],f[0])},h=function(t,e,i){i=i||0,f[0]=e,t[i+0]=p[0],t[i+1]=p[1],t[i+2]=p[2],t[i+3]=p[3],t[i+4]=p[4],t[i+5]=p[5],t[i+6]=p[6],t[i+7]=p[7]},u=function(t,e,i){i=i||0,f[0]=e,t[i+0]=p[7],t[i+1]=p[6],t[i+2]=p[5],t[i+3]=p[4],t[i+4]=p[3],t[i+5]=p[2],t[i+6]=p[1],t[i+7]=p[0]});for(var _=new Array,x=0;x<1200;x++)_[x]=Math.pow(2,x);var w=new Array;for(x=0;x<1200;x++)w[x]=Math.pow(2,-x);function b(t){return t>=0?_[t]:w[-t]}b(-1023);function T(t,e,i){var n,r,s=m(t,e,i),a=m(t,e+4,i);"bige"===i?(n=s,r=a):(n=a,r=s);var o=4294967296*(1048575&n)+r,h=(2146435072&n)>>>20;return(n>>31||1)*(0===h?o?o*b(-1074):0:h<2047?o>=0?(1+2220446049250313e-31*o)*b(h-1023):0:o?NaN:1/0)}var E=Math.pow(2,-23),A=Math.pow(2,-127);function S(t,e,i){var n=m(t,e,i),r=8388607&n,s=(2139095040&n)>>>23;return(n>>31||1)*(0===s?r?r*E*2*A:0:s<255?(1+r*E)*b(s-127):r?NaN:1/0)}var C={exp:0,mant:0};function O(t){var e=0;return t>=2?(t*=b(-(e=R(1,t))))>=2&&(t/=2,e+=1):t<1&&((e=R(t,2))<=1023?t*=b(e):(t*=b(e-100),t*=b(100)),e=-e),C.exp=e,C.mant=t,C}var P=Math.pow(2,192);function R(t,e){for(var i=0;t*P<e;)t*=P,i+=192;for(;0x10000000000000000*t<e;)t*=0x10000000000000000,i+=64;for(;65536*t<e;)t*=65536,i+=16;for(;64*t<e;)t*=64,i+=6;for(;2*t<e;)t*=2,i+=1;return i}function M(t,e){return(t*=e)-Math.floor(t)!=.5||1&t?t+.5:t}function L(t,e,i,n){var r,s=0;e<0&&(s=2147483648,e=-e),e&&e<1/0?((r=O(e)).exp+=127,r.exp<=0?r.exp<=-25?(r.mant=0,r.exp=0):(r.mant=M(r.mant,b(22+r.exp)),r.exp=0,r.mant>=8388608&&(r.mant-=8388608,r.exp+=1)):(r.mant=M(r.mant-1,8388608),r.mant>=8388608&&(r.mant-=8388608,r.exp+=1),r.exp>254&&(r.mant=0,r.exp=255)),y(t,s|r.exp<<23|r.mant,i,n)):y(t,0===e?1/e<0?2147483648:0:e===1/0?2139095040|s:2143289344,i,n)}new Uint8Array(8);var I=Math.pow(2,52);function k(t,e,i,n){var r,s,a,o=0;e<0&&(o=2147483648,e=-e),e&&e<1/0?((r=O(e)).exp+=1023,r.exp<=0?(r.mant*=b(51+r.exp),r.exp=0):r.mant=(r.mant-1)*I,v(t,s=o|r.exp<<20|r.mant/4294967296,a=r.mant>>>0,i,n)):(0===e?(s=1/e<0?2147483648:0,a=0):e===1/0?(s=o+2146435072,a=0):(s=2146959360,a=0),v(t,s,a,i,n))}(function e(){var i=t.exports||this;i.readWord=m,i.writeWord=y,i.writeDoubleWord=v,i.readFloat=S,i.writeFloat=L,i.readDouble=T,i.writeDouble=k,i._useFloatArray=function(t){i._usingFloatArray=t,t?("full"==t&&(i.readFloatLE=g?s:n),i.writeFloatLE=g?a:r,"full"==t&&(i.readFloatBE=g?n:s),i.writeFloatBE=g?r:a,i.readDoubleLE=g?l:o,i.writeDoubleLE=g?u:h,i.readDoubleBE=g?o:l,i.writeDoubleBE=g?h:u):(i._usingFloatArray="",i.readFloatLE=function(t,e){return i.readFloat(t,e||0,"le")},i.writeFloatLE=function(t,e,n){i.writeFloat(t,e,n||0,"le")},i.readFloatBE=function(t,e){return i.readFloat(t,e||0,"bige")},i.writeFloatBE=function(t,e,n){i.writeFloat(t,e,n||0,"bige")},i.readDoubleLE=function(t,e){return i.readDouble(t,e||0,"le")},i.writeDoubleLE=function(t,e,n){i.writeDouble(t,e,n||0,"le")},i.readDoubleBE=function(t,e){return i.readDouble(t,e||0,"bige")},i.writeDoubleBE=function(t,e,n){i.writeDouble(t,e,n||0,"bige")})},i._getBigeCpu=function(){return g},i._setBigeCpu=function(t){g=t},i._useFloatArray(!1),i._useFloatArray(n&&o&&"fastest"),e.prototype=i}).call(this)},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(13),s=n(i(37));class a extends s.default{deserialize(t){return r.base58_encode(super.deserialize(t))}serialize(t){return super.serialize(r.base58_decode(t))}}e.default=a},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(i(37));class s extends r.default{deserialize(t){return(new TextDecoder).decode(super.deserialize(t))}serialize(t){return super.serialize((new TextEncoder).encode(t))}}e.default=s},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(i(32)),s=n(i(23)),a=n(i(21)),o=i(13);e.default=class{constructor(t,e){this.size=t,this.unsigned=e}deserialize(t){let e=o.varint_decode(t);if(this.unsigned||(e=o.zigzag_decode(e)),e.greaterOrEquals(r.default(2).pow(8*this.size-(this.unsigned?0:1))))throw new s.default("number '"+e.toString()+"' too large for given type");return this.size<=6?e.toJSNumber():e.toString()}serialize(t){let e=r.default(t);if(e.greaterOrEquals(r.default(2).pow(8*this.size-(this.unsigned?0:1))))throw new a.default("number '"+e.toString()+"' too large for given type");return this.unsigned||(e=o.zigzag_encode(e)),o.varint_encode(e)}}},function(t,e,i){"use strict";var n=i(110),r={"user-agent":"ipapi/ipapi-nodejs/0.3"},s=["ip","city","region","country","postal","latitude","longitude","timezone","latlong"];t.exports={location:function(t,e,i,a){var o,h=!1;if("function"!=typeof t)return"Callback function is required";if(void 0!==a&&""!==a){if(-1===s.indexOf(a))return"Invalid field";h=!0}o=h?void 0!==e?"/"+e+"/"+a+"/":"/"+a+"/":void 0!==e?"/"+e+"/json/":"/json/",void 0!==i&&""!==i&&(o=o+"?key="+i),function(t,e,i){var s={host:"ipapi.co",path:t,headers:r};n.get(s,(function(t){var n="";t.on("data",(function(t){n+=t})),t.on("end",(function(){if(i){var t=JSON.parse(n);e(t)}else{e(t=n)}}))})).on("error",(function(t){e(new Error(t))}))}(o,t,!h)}}},function(t,e,i){var n=i(111),r=i(66),s=t.exports;for(var a in n)n.hasOwnProperty(a)&&(s[a]=n[a]);function o(t){if("string"==typeof t&&(t=r.parse(t)),t.protocol||(t.protocol="https:"),"https:"!==t.protocol)throw new Error('Protocol "'+t.protocol+'" not supported. Expected "https:"');return t}s.request=function(t,e){return t=o(t),n.request.call(this,t,e)},s.get=function(t,e){return t=o(t),n.get.call(this,t,e)}},function(t,e,i){(function(t){var n=i(112),r=i(57),s=i(123),a=i(124),o=i(66),h=e;h.request=function(e,i){e="string"==typeof e?o.parse(e):s(e);var r=-1===t.location.protocol.search(/^https?:$/)?"http:":"",a=e.protocol||r,h=e.hostname||e.host,l=e.port,u=e.path||"/";h&&-1!==h.indexOf(":")&&(h="["+h+"]"),e.url=(h?a+"//"+h:"")+(l?":"+l:"")+u,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var c=new n(e);return i&&c.on("response",i),c},h.get=function(t,e){var i=h.request(t,e);return i.end(),i},h.ClientRequest=n,h.IncomingMessage=r.IncomingMessage,h.Agent=function(){},h.Agent.defaultMaxSockets=4,h.globalAgent=new h.Agent,h.STATUS_CODES=a,h.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,i(3))},function(t,e,i){(function(e,n,r){var s=i(56),a=i(9),o=i(57),h=i(58),l=i(122),u=o.IncomingMessage,c=o.readyStates;var d=t.exports=function(t){var i,n=this;h.Writable.call(n),n._opts=t,n._body=[],n._headers={},t.auth&&n.setHeader("Authorization","Basic "+new e(t.auth).toString("base64")),Object.keys(t.headers).forEach((function(e){n.setHeader(e,t.headers[e])}));var r=!0;if("disable-fetch"===t.mode||"requestTimeout"in t&&!s.abortController)r=!1,i=!0;else if("prefer-streaming"===t.mode)i=!1;else if("allow-wrong-content-type"===t.mode)i=!s.overrideMimeType;else{if(t.mode&&"default"!==t.mode&&"prefer-fast"!==t.mode)throw new Error("Invalid value for opts.mode");i=!0}n._mode=function(t,e){return s.fetch&&e?"fetch":s.mozchunkedarraybuffer?"moz-chunked-arraybuffer":s.msstream?"ms-stream":s.arraybuffer&&t?"arraybuffer":s.vbArray&&t?"text:vbarray":"text"}(i,r),n._fetchTimer=null,n.on("finish",(function(){n._onFinish()}))};a(d,h.Writable),d.prototype.setHeader=function(t,e){var i=t.toLowerCase();-1===f.indexOf(i)&&(this._headers[i]={name:t,value:e})},d.prototype.getHeader=function(t){var e=this._headers[t.toLowerCase()];return e?e.value:null},d.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},d.prototype._onFinish=function(){var t=this;if(!t._destroyed){var i=t._opts,a=t._headers,o=null;"GET"!==i.method&&"HEAD"!==i.method&&(o=s.arraybuffer?l(e.concat(t._body)):s.blobConstructor?new n.Blob(t._body.map((function(t){return l(t)})),{type:(a["content-type"]||{}).value||""}):e.concat(t._body).toString());var h=[];if(Object.keys(a).forEach((function(t){var e=a[t].name,i=a[t].value;Array.isArray(i)?i.forEach((function(t){h.push([e,t])})):h.push([e,i])})),"fetch"===t._mode){var u=null;if(s.abortController){var d=new AbortController;u=d.signal,t._fetchAbortController=d,"requestTimeout"in i&&0!==i.requestTimeout&&(t._fetchTimer=n.setTimeout((function(){t.emit("requestTimeout"),t._fetchAbortController&&t._fetchAbortController.abort()}),i.requestTimeout))}n.fetch(t._opts.url,{method:t._opts.method,headers:h,body:o||void 0,mode:"cors",credentials:i.withCredentials?"include":"same-origin",signal:u}).then((function(e){t._fetchResponse=e,t._connect()}),(function(e){n.clearTimeout(t._fetchTimer),t._destroyed||t.emit("error",e)}))}else{var f=t._xhr=new n.XMLHttpRequest;try{f.open(t._opts.method,t._opts.url,!0)}catch(e){return void r.nextTick((function(){t.emit("error",e)}))}"responseType"in f&&(f.responseType=t._mode.split(":")[0]),"withCredentials"in f&&(f.withCredentials=!!i.withCredentials),"text"===t._mode&&"overrideMimeType"in f&&f.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in i&&(f.timeout=i.requestTimeout,f.ontimeout=function(){t.emit("requestTimeout")}),h.forEach((function(t){f.setRequestHeader(t[0],t[1])})),t._response=null,f.onreadystatechange=function(){switch(f.readyState){case c.LOADING:case c.DONE:t._onXHRProgress()}},"moz-chunked-arraybuffer"===t._mode&&(f.onprogress=function(){t._onXHRProgress()}),f.onerror=function(){t._destroyed||t.emit("error",new Error("XHR error"))};try{f.send(o)}catch(e){return void r.nextTick((function(){t.emit("error",e)}))}}}},d.prototype._onXHRProgress=function(){(function(t){try{var e=t.status;return null!==e&&0!==e}catch(t){return!1}})(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},d.prototype._connect=function(){var t=this;t._destroyed||(t._response=new u(t._xhr,t._fetchResponse,t._mode,t._fetchTimer),t._response.on("error",(function(e){t.emit("error",e)})),t.emit("response",t._response))},d.prototype._write=function(t,e,i){this._body.push(t),i()},d.prototype.abort=d.prototype.destroy=function(){this._destroyed=!0,n.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},d.prototype.end=function(t,e,i){"function"==typeof t&&(i=t,t=void 0),h.Writable.prototype.end.call(this,t,e,i)},d.prototype.flushHeaders=function(){},d.prototype.setTimeout=function(){},d.prototype.setNoDelay=function(){},d.prototype.setSocketKeepAlive=function(){};var f=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,i(18).Buffer,i(3),i(14))},function(t,e,i){"use strict";e.byteLength=function(t){var e=l(t),i=e[0],n=e[1];return 3*(i+n)/4-n},e.toByteArray=function(t){var e,i,n=l(t),a=n[0],o=n[1],h=new s(function(t,e,i){return 3*(e+i)/4-i}(0,a,o)),u=0,c=o>0?a-4:a;for(i=0;i<c;i+=4)e=r[t.charCodeAt(i)]<<18|r[t.charCodeAt(i+1)]<<12|r[t.charCodeAt(i+2)]<<6|r[t.charCodeAt(i+3)],h[u++]=e>>16&255,h[u++]=e>>8&255,h[u++]=255&e;2===o&&(e=r[t.charCodeAt(i)]<<2|r[t.charCodeAt(i+1)]>>4,h[u++]=255&e);1===o&&(e=r[t.charCodeAt(i)]<<10|r[t.charCodeAt(i+1)]<<4|r[t.charCodeAt(i+2)]>>2,h[u++]=e>>8&255,h[u++]=255&e);return h},e.fromByteArray=function(t){for(var e,i=t.length,r=i%3,s=[],a=0,o=i-r;a<o;a+=16383)s.push(u(t,a,a+16383>o?o:a+16383));1===r?(e=t[i-1],s.push(n[e>>2]+n[e<<4&63]+"==")):2===r&&(e=(t[i-2]<<8)+t[i-1],s.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return s.join("")};for(var n=[],r=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,h=a.length;o<h;++o)n[o]=a[o],r[a.charCodeAt(o)]=o;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function u(t,e,i){for(var r,s,a=[],o=e;o<i;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),a.push(n[(s=r)>>18&63]+n[s>>12&63]+n[s>>6&63]+n[63&s]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,i,n,r){var s,a,o=8*r-n-1,h=(1<<o)-1,l=h>>1,u=-7,c=i?r-1:0,d=i?-1:1,f=t[e+c];for(c+=d,s=f&(1<<-u)-1,f>>=-u,u+=o;u>0;s=256*s+t[e+c],c+=d,u-=8);for(a=s&(1<<-u)-1,s>>=-u,u+=n;u>0;a=256*a+t[e+c],c+=d,u-=8);if(0===s)s=1-l;else{if(s===h)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,n),s-=l}return(f?-1:1)*a*Math.pow(2,s-n)},e.write=function(t,e,i,n,r,s){var a,o,h,l=8*s-r-1,u=(1<<l)-1,c=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:s-1,p=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-a))<1&&(a--,h*=2),(e+=a+c>=1?d/h:d*Math.pow(2,1-c))*h>=2&&(a++,h/=2),a+c>=u?(o=0,a=u):a+c>=1?(o=(e*h-1)*Math.pow(2,r),a+=c):(o=e*Math.pow(2,c-1)*Math.pow(2,r),a=0));r>=8;t[i+f]=255&o,f+=p,o/=256,r-=8);for(a=a<<r|o,l+=r;l>0;t[i+f]=255&a,f+=p,a/=256,l-=8);t[i+f-p]|=128*g}},function(t,e){},function(t,e,i){"use strict";var n=i(25).Buffer,r=i(117);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i},t.prototype.concat=function(t){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var e,i,r,s=n.allocUnsafe(t>>>0),a=this.head,o=0;a;)e=a.data,i=s,r=o,e.copy(i,r),o+=a.data.length,a=a.next;return s},t}(),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var t=r.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,i){(function(t){var n=void 0!==t&&t||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function s(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new s(r.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new s(r.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},i(119),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,i(3))},function(t,e,i){(function(t,e){!function(t,i){"use strict";if(!t.setImmediate){var n,r,s,a,o,h=1,l={},u=!1,c=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick((function(){p(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}()?t.MessageChannel?((s=new MessageChannel).port1.onmessage=function(t){p(t.data)},n=function(t){s.port2.postMessage(t)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,n=function(t){var e=c.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e)}):n=function(t){setTimeout(p,0,t)}:(a="setImmediate$"+Math.random()+"$",o=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&p(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",o,!1):t.attachEvent("onmessage",o),n=function(e){t.postMessage(a+e,"*")}),d.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var r={callback:t,args:e};return l[h]=r,n(h),h++},d.clearImmediate=f}function f(t){delete l[t]}function p(t){if(u)setTimeout(p,0,t);else{var e=l[t];if(e){u=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(void 0,i)}}(e)}finally{f(t),u=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,i(3),i(14))},function(t,e,i){(function(e){function i(t){try{if(!e.localStorage)return!1}catch(t){return!1}var i=e.localStorage[t];return null!=i&&"true"===String(i).toLowerCase()}t.exports=function(t,e){if(i("noDeprecation"))return t;var n=!1;return function(){if(!n){if(i("throwDeprecation"))throw new Error(e);i("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}}).call(this,i(3))},function(t,e,i){"use strict";t.exports=s;var n=i(65),r=i(19);function s(t){if(!(this instanceof s))return new s(t);n.call(this,t)}r.inherits=i(9),r.inherits(s,n),s.prototype._transform=function(t,e,i){i(null,t)}},function(t,e,i){var n=i(18).Buffer;t.exports=function(t){if(t instanceof Uint8Array){if(0===t.byteOffset&&t.byteLength===t.buffer.byteLength)return t.buffer;if("function"==typeof t.buffer.slice)return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}if(n.isBuffer(t)){for(var e=new Uint8Array(t.length),i=t.length,r=0;r<i;r++)e[r]=t[r];return e.buffer}throw new Error("Argument must be a Buffer")}},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)i.call(n,r)&&(t[r]=n[r])}return t};var i=Object.prototype.hasOwnProperty},function(t,e){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(t,e,i){(function(t,n){var r;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(s){e&&e.nodeType,t&&t.nodeType;var a="object"==typeof n&&n;a.global!==a&&a.window!==a&&a.self;var o,h=2147483647,l=/^xn--/,u=/[^\x20-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,p=String.fromCharCode;function g(t){throw new RangeError(d[t])}function m(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function y(t,e){var i=t.split("@"),n="";return i.length>1&&(n=i[0]+"@",t=i[1]),n+m((t=t.replace(c,".")).split("."),e).join(".")}function v(t){for(var e,i,n=[],r=0,s=t.length;r<s;)(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<s?56320==(64512&(i=t.charCodeAt(r++)))?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--):n.push(e);return n}function _(t){return m(t,(function(t){var e="";return t>65535&&(e+=p((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=p(t)})).join("")}function x(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function w(t,e,i){var n=0;for(t=i?f(t/700):t>>1,t+=f(t/e);t>455;n+=36)t=f(t/35);return f(n+36*t/(t+38))}function b(t){var e,i,n,r,s,a,o,l,u,c,d,p=[],m=t.length,y=0,v=128,x=72;for((i=t.lastIndexOf("-"))<0&&(i=0),n=0;n<i;++n)t.charCodeAt(n)>=128&&g("not-basic"),p.push(t.charCodeAt(n));for(r=i>0?i+1:0;r<m;){for(s=y,a=1,o=36;r>=m&&g("invalid-input"),((l=(d=t.charCodeAt(r++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:36)>=36||l>f((h-y)/a))&&g("overflow"),y+=l*a,!(l<(u=o<=x?1:o>=x+26?26:o-x));o+=36)a>f(h/(c=36-u))&&g("overflow"),a*=c;x=w(y-s,e=p.length+1,0==s),f(y/e)>h-v&&g("overflow"),v+=f(y/e),y%=e,p.splice(y++,0,v)}return _(p)}function T(t){var e,i,n,r,s,a,o,l,u,c,d,m,y,_,b,T=[];for(m=(t=v(t)).length,e=128,i=0,s=72,a=0;a<m;++a)(d=t[a])<128&&T.push(p(d));for(n=r=T.length,r&&T.push("-");n<m;){for(o=h,a=0;a<m;++a)(d=t[a])>=e&&d<o&&(o=d);for(o-e>f((h-i)/(y=n+1))&&g("overflow"),i+=(o-e)*y,e=o,a=0;a<m;++a)if((d=t[a])<e&&++i>h&&g("overflow"),d==e){for(l=i,u=36;!(l<(c=u<=s?1:u>=s+26?26:u-s));u+=36)b=l-c,_=36-c,T.push(p(x(c+b%_,0))),l=f(b/_);T.push(p(x(l,0))),s=w(i,y,n==r),i=0,++n}++i,++e}return T.join("")}o={version:"1.4.1",ucs2:{decode:v,encode:_},decode:b,encode:T,toASCII:function(t){return y(t,(function(t){return u.test(t)?"xn--"+T(t):t}))},toUnicode:function(t){return y(t,(function(t){return l.test(t)?b(t.slice(4).toLowerCase()):t}))}},void 0===(r=function(){return o}.call(e,i,e,t))||(t.exports=r)}()}).call(this,i(53)(t),i(3))},function(t,e,i){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,i){"use strict";e.decode=e.parse=i(128),e.encode=e.stringify=i(129)},function(t,e,i){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,i,s){e=e||"&",i=i||"=";var a={};if("string"!=typeof t||0===t.length)return a;var o=/\+/g;t=t.split(e);var h=1e3;s&&"number"==typeof s.maxKeys&&(h=s.maxKeys);var l=t.length;h>0&&l>h&&(l=h);for(var u=0;u<l;++u){var c,d,f,p,g=t[u].replace(o,"%20"),m=g.indexOf(i);m>=0?(c=g.substr(0,m),d=g.substr(m+1)):(c=g,d=""),f=decodeURIComponent(c),p=decodeURIComponent(d),n(a,f)?r(a[f])?a[f].push(p):a[f]=[a[f],p]:a[f]=p}return a};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,i){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,i,o){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?s(a(t),(function(a){var o=encodeURIComponent(n(a))+i;return r(t[a])?s(t[a],(function(t){return o+encodeURIComponent(n(t))})).join(e):o+encodeURIComponent(n(t[a]))})).join(e):o?encodeURIComponent(n(o))+i+encodeURIComponent(n(t)):""};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function s(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var a=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(1),o=i(0),h=i(4),l=s(i(2)),u=s(i(5)),c=function(t){function e(e){var i=t.call(this,e)||this;i.x=465,i.scaleX=o.GameVars.scaleX,i.boosterAlphaTween=null;var n=new Phaser.GameObjects.Image(i.scene,0,10,"texture_atlas_1","hudBg");n.setOrigin(.5,0),i.add(n);var r=l.SDK.replayMode?l.SDK.replayAccount:l.SDK.playerAccount;i.scene.textures.exists("avatar-"+r)?(i.playerAvatar=new Phaser.GameObjects.Image(i.scene,-234.5,52,"avatar-"+r),i.playerAvatar.setScale(.48),i.add(i.playerAvatar)):i.playerAvatar=null,i.playerNameLabel=new Phaser.GameObjects.Text(i.scene,-80,30,r,{fontFamily:"Avenir_Next",fontSize:"25px",color:"#00FFFF"}),i.playerNameLabel.setOrigin(.5),i.add(i.playerNameLabel),i.timer=new Phaser.GameObjects.Text(i.scene,155,44,"0",{fontFamily:"Groovy_Fast",fontSize:"55px",color:"#00FFFF"}),i.timer.setOrigin(.5),i.timer.setShadow(2,2,"rgba(0, 255, 255, .45)",4),i.add(i.timer),i.secondsLabel=new Phaser.GameObjects.Text(i.scene,i.timer.x+64,i.timer.y+3,"s",{fontFamily:"Groovy_Fast",fontSize:"40px",color:"#00FFFF"}),i.secondsLabel.setOrigin(.5),i.secondsLabel.setShadow(2,2,"rgba(0, 255, 255, .45)",4),i.add(i.secondsLabel),i.score=new Phaser.GameObjects.Text(i.scene,i.timer.x,76,"0",{fontFamily:"Avenir_Next",fontSize:"20px",color:"#00FFFF"}),i.score.setOrigin(1,.5),i.add(i.score);var s=new Phaser.GameObjects.Text(i.scene,i.score.x+10,i.score.y,"POINTS",{fontFamily:"Avenir_Next",fontSize:"20px",color:"#00FFFF"});return s.setOrigin(0,.5),i.add(s),i.rackLabel=new Phaser.GameObjects.Text(i.scene,i.playerNameLabel.x,74,"RACK ",{fontFamily:"Avenir_Next",fontSize:"20px",color:"#00FFFF"}),i.rackLabel.setOrigin(.5),i.add(i.rackLabel),i}return r(e,t),e.prototype.update=function(){if(o.GameVars.billiardEngine&&!o.GameVars.billiardEngine.gameOver){if(this.tickLabel&&(this.tickLabel.text="t: "+o.GameVars.formatNumber(o.GameVars.billiardEngine.absoluteTick)),null===this.playerAvatar){var t=l.SDK.replayMode?l.SDK.replayAccount:l.SDK.playerAccount;this.scene.textures.exists("avatar-"+t)&&(this.playerAvatar=new Phaser.GameObjects.Image(this.scene,-234.5,52,"avatar-"+t),this.playerAvatar.setScale(.48),this.add(this.playerAvatar))}this.updateScoreBoard()}},e.prototype.startGame=function(){this.ballPointsContainer=new Phaser.GameObjects.Container(this.scene),this.ballPointsContainer.x=305,this.ballPointsContainer.y=52,this.add(this.ballPointsContainer);var t=new Phaser.GameObjects.Image(this.scene,0,-25,"texture_atlas_1","ball_icon_1");t.setScale(.9),this.ballPointsContainer.add(t);var e=new Phaser.GameObjects.Text(this.scene,t.x+15,t.y,"Solid - "+o.GameVars.billiardEngine.scoreManager.pointsSolidBalls+" pts",{fontFamily:"Avenir_Next",fontSize:"15px",color:"#00FFFF"});e.setOrigin(0,.5),e.setShadow(1,1,"rgba(150, 150, 150, .45)",2),this.ballPointsContainer.add(e),(t=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_1","ball_icon_09")).setScale(.9),this.ballPointsContainer.add(t);var i=new Phaser.GameObjects.Text(this.scene,t.x+15,t.y,"Striped - "+o.GameVars.billiardEngine.scoreManager.pointsStripedBalls+" pts",{fontFamily:"Avenir_Next",fontSize:"15px",color:"#00FFFF"});i.setOrigin(0,.5),i.setShadow(1,1,"rgba(150, 150, 150, .45)",2),this.ballPointsContainer.add(i),(t=new Phaser.GameObjects.Image(this.scene,0,25,"texture_atlas_1","ball_icon_8")).setScale(.9),this.ballPointsContainer.add(t);var n=new Phaser.GameObjects.Text(this.scene,t.x+15,t.y,"Black - "+o.GameVars.billiardEngine.scoreManager.pointsBlackBall+" pts",{fontFamily:"Avenir_Next",fontSize:"15px",color:"#00FFFF"});n.setOrigin(0,.5),n.setShadow(1,1,"rgba(150, 150, 150, .45)",2),this.ballPointsContainer.add(n),this.updateScoreBoard()},e.prototype.onCombo=function(t){var e=this.scene.add.container();e.setPosition(a.GameConstants.GAME_WIDTH/2-15*o.GameVars.scaleX,175+15*t),e.scaleX=o.GameVars.scaleX;var i=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_1","combo_x");e.add(i);var n=new Phaser.GameObjects.Image(this.scene,i.width/2+38,0,"texture_atlas_1",t.toString());e.add(n),this.scene.tweens.add({targets:e,scaleX:1.15*o.GameVars.scaleX,scaleY:1.15,ease:Phaser.Math.Easing.Cubic.Out,duration:150}),this.scene.tweens.add({targets:e,y:125+15*t,ease:Phaser.Math.Easing.Cubic.Out,duration:400,delay:500,onComplete:function(){this.scene.tweens.add({targets:e,scaleX:o.GameVars.scaleX,scaleY:1,alpha:0,ease:Phaser.Math.Easing.Cubic.In,duration:300,onComplete:function(){e.destroy()},onCompleteScope:this})},onCompleteScope:this}),h.AudioManager.playSound("combo")},e.prototype.onBallPocketed=function(){if(!o.GameVars.billiardEngine.gameOver){var t=new Phaser.GameObjects.Image(this.scene,this.timer.x,this.timer.y+65,"texture_atlas_1","timer_up_arrow");t.alpha=0,this.add(t),this.scene.tweens.add({targets:t,alpha:1,ease:Phaser.Math.Easing.Cubic.Out,duration:300,onComplete:function(){this.scene.tweens.add({targets:t,y:this.timer.y-15,alpha:0,ease:Phaser.Math.Easing.Cubic.Out,duration:1e3,delay:250,onComplete:function(){t.destroy()},onCompleteScope:this})},onCompleteScope:this}),h.AudioManager.playSound("add_time")}},e.prototype.onRackCleared=function(){if(!o.GameVars.billiardEngine.gameOver){var t=new Phaser.GameObjects.Container(this.scene,a.GameConstants.GAME_WIDTH/2,300);t.scaleX=o.GameVars.scaleX,this.scene.add.existing(t);var e=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_1","rack_cleared");if(t.add(e),!o.GameVars.billiardEngine.scoreDisabled){var i=new Phaser.GameObjects.Text(this.scene,e.x,e.y+60,"+"+u.ScoreManager.POINTS_COMPLETED_RACK+" POINTS",{fontFamily:"Avenir_Next",fontSize:"40px",color:"#00FFFF"});i.setOrigin(.5),i.setShadow(2,2,"rgba(150, 150, 150, .45)",2),t.add(i)}t.alpha=0,this.scene.tweens.add({targets:t,y:t.y-35,alpha:1,ease:Phaser.Math.Easing.Cubic.Out,duration:400,onComplete:function(){this.scene.tweens.add({targets:t,alpha:0,scaleX:.85,scaleY:.85,ease:Phaser.Math.Easing.Cubic.Out,duration:400,delay:1e3,onComplete:function(){t.destroy()},onCompleteScope:this})},onCompleteScope:this})}},e.prototype.onGameOver=function(){this.secondsLabel.visible=!1,this.timer.text="TIME OVER",this.timer.setFontSize(40)},e.prototype.onBoosterPurchased=function(){if(l.SDK.replayMode){this.ballPointsContainer.visible=!1;var t=new Phaser.GameObjects.Text(this.scene,345,44,"BOOSTER\nPURCHASED",{fontFamily:"Groovy_Fast",fontSize:"25px",color:"#00FFFF",align:"center"});t.setOrigin(.5),t.setShadow(2,2,"rgba(0, 255, 255, .45)",4),this.add(t),this.scene.tweens.add({targets:t,alpha:0,ease:Phaser.Math.Easing.Cubic.Out,duration:350,delay:1250,onComplete:function(){t.destroy(),this.ballPointsContainer.visible=!0},onCompleteScope:this})}else this.boosterAlphaTween=this.scene.tweens.add({targets:this.timer,alpha:.4,ease:Phaser.Math.Easing.Linear,duration:250,yoyo:250,repeat:-1})},e.prototype.onBoosterActivated=function(){this.boosterAlphaTween&&(this.boosterAlphaTween.remove(),this.boosterAlphaTween=null),this.timer.alpha=1,this.timer.setFontSize(55),this.scene.tweens.add({targets:this.timer,scaleX:1.2,scaleY:1.25,ease:Phaser.Math.Easing.Cubic.Out,duration:250,yoyo:150}),h.AudioManager.playSound("surpassed_score")},e.prototype.updateScoreBoard=function(){var t=Math.ceil(o.GameVars.billiardEngine.tick/60*10)/10;this.timer.text=o.GameVars.formatTime(t);var e=o.GameVars.formatNumber(o.GameVars.billiardEngine.score);this.score.text=e,this.rackLabel.text="RACK "+o.GameVars.billiardEngine.rack},e}(Phaser.GameObjects.Container);e.HUD=c},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(4),o=i(1),h=i(0),l=i(10),u=s(i(2)),c=i(8),d=i(7),f=function(t){function e(e){var i=t.call(this,e)||this,n=new Phaser.GameObjects.Graphics(i.scene);n.fillStyle(597301,.75),n.fillRect(0,0,o.GameConstants.GAME_WIDTH,o.GameConstants.GAME_HEIGHT),i.add(n);var r=new Phaser.GameObjects.Image(i.scene,0,0,"texture_atlas_1","tab_base");r.scaleX=o.GameConstants.GAME_WIDTH/200,r.setOrigin(0,0),i.add(r);var s=new Phaser.GameObjects.Image(i.scene,o.GameConstants.GAME_WIDTH/2,50,"texture_atlas_1","title_pause");s.scaleX=h.GameVars.scaleX,i.add(s);var a=new l.Button(i.scene,55*h.GameVars.scaleX,55,"texture_atlas_1","btn_close_off","btn_close_on");a.onDown(i.onClickCloseButton,i),a.scaleX=h.GameVars.scaleX,i.add(a);var u=new Phaser.GameObjects.Container(i.scene);u.x=o.GameConstants.GAME_WIDTH/2,u.y=o.GameConstants.GAME_HEIGHT/2,u.scaleX=h.GameVars.scaleX,i.add(u),i.container1=new Phaser.GameObjects.Container(i.scene),u.add(i.container1),i.audioOnButton=new l.Button(i.scene,75,-50,"texture_atlas_1","switch_on","switch_on"),i.audioOnButton.onDown(i.onClickAudioButton,i),i.container1.add(i.audioOnButton),i.audioOffButton=new l.Button(i.scene,75,i.audioOnButton.y,"texture_atlas_1","switch_off","switch_off"),i.audioOffButton.onDown(i.onClickAudioButton,i),i.audioOffButton.visible=!1,i.container1.add(i.audioOffButton),i.audioLabel=new Phaser.GameObjects.Text(i.scene,-10,i.audioOnButton.y,h.GameVars.gameData.muted?"AUDIO OFF:":"AUDIO ON:",{fontFamily:"Avenir_Next",fontSize:"35px",color:"#ffffff"}),i.audioLabel.setOrigin(1,.5),i.audioLabel.setShadow(3,3,"rgba(0,0,0,0.5)",5),i.container1.add(i.audioLabel);var c=new l.Button(i.scene,0,220,"texture_atlas_1","btn_restart_off","btn_restart_on");c.onDown(i.onClickRestartButton,i),i.container1.add(c),h.GameVars.isDesktop||(i.sidePowerBarLeftButton=new l.Button(i.scene,75,30,"texture_atlas_1","switch_on","switch_on"),i.sidePowerBarLeftButton.onDown(i.onClickPowerBarButton,i),i.container1.add(i.sidePowerBarLeftButton),i.sidePowerBarRightButton=new l.Button(i.scene,75,i.sidePowerBarLeftButton.y,"texture_atlas_1","switch_off","switch_off"),i.sidePowerBarRightButton.onDown(i.onClickPowerBarButton,i),i.sidePowerBarRightButton.visible=!1,i.container1.add(i.sidePowerBarRightButton),i.powerBarLabel=new Phaser.GameObjects.Text(i.scene,-10,i.sidePowerBarLeftButton.y,h.GameVars.gameData.powerBarSide===o.GameConstants.LEFT?"POWER BAR LEFT:":"POWER BAR RIGHT:",{fontFamily:"Avenir_Next",fontSize:"35px",color:"#ffffff"}),i.powerBarLabel.setOrigin(1,.5),i.powerBarLabel.setShadow(3,3,"rgba(0,0,0,0.5)",5),i.container1.add(i.powerBarLabel)),i.container2=new Phaser.GameObjects.Container(i.scene),i.container2.visible=!1,u.add(i.container2);var d=new Phaser.GameObjects.Text(i.scene,0,-90,"ARE YOU SURE YOU WANT TO RESIGN?",{fontFamily:"Avenir_Next",align:"center",fontSize:"40px",color:"#FFFFFF"});d.setOrigin(.5,0),i.container2.add(d);var f=new l.Button(i.scene,-150,120,"texture_atlas_1","btn_resign_off","btn_resign_on");f.onDown(i.onClickConfirmRestartButton,i),i.container2.add(f);var p=new l.Button(i.scene,-f.x,f.y,"texture_atlas_1","btn_continue_off","btn_continue_on");return p.onDown(i.onClickCancelButton,i),i.container2.add(p),i}return r(e,t),e.prototype.onClickCloseButton=function(){c.BoardManager.currentInstance.hidePauseMenu(),a.AudioManager.playSound("btn_neon")},e.prototype.onClickAudioButton=function(){this.audioOnButton.visible=!this.audioOnButton.visible,this.audioOffButton.visible=!this.audioOffButton.visible,a.AudioManager.toggleAudioState(),this.audioLabel.text=h.GameVars.gameData.muted?"AUDIO OFF:":"AUDIO ON:",a.AudioManager.playSound("btn_neon")},e.prototype.onClickPowerBarButton=function(){d.GameManager.changePowerBarSide(),this.powerBarLabel.text=h.GameVars.gameData.powerBarSide===o.GameConstants.LEFT?"POWER BAR LEFT:":"POWER BAR RIGHT:",this.sidePowerBarLeftButton.visible=!this.sidePowerBarLeftButton.visible,this.sidePowerBarRightButton.visible=!this.sidePowerBarRightButton.visible,a.AudioManager.playSound("btn_neon")},e.prototype.onClickRestartButton=function(){this.container1.visible=!1,this.container2.visible=!0,a.AudioManager.playSound("btn_neon")},e.prototype.onClickCancelButton=function(){this.container1.visible=!0,this.container2.visible=!1,a.AudioManager.playSound("btn_neon")},e.prototype.onClickConfirmRestartButton=function(){this.destroy(),u.SDK.onGameOver(h.GameVars.billiardEngine.score,!0),a.AudioManager.playSound("btn_neon")},e}(Phaser.GameObjects.Container);e.PauseLayer=f},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var s=i(1),a=i(0),o=function(t){function e(e){var i=t.call(this,e)||this;i.scaleX=a.GameVars.scaleX;var n=new Phaser.GameObjects.Container(i.scene);n.x=s.GameConstants.GAME_WIDTH/a.GameVars.scaleX+30*a.GameVars.scaleX,i.add(n);var r=new Phaser.GameObjects.Sprite(i.scene,0,145,"texture_atlas_1");return r.angle=-90,r.setScale(1.45),i.scene.add.existing(r),n.add(r),r.play("bug_walking"),i.scene.tweens.add({targets:n,angle:120,ease:Phaser.Math.Easing.Linear,duration:1e4,delay:0,onComplete:function(){this.destroy()},onCompleteScope:i}),i}return r(e,t),e}(Phaser.GameObjects.Container);e.Bug=o},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(1),o=s(i(5)),h=function(t){function e(e){var i=t.call(this,e)||this;i.scanImage=new Phaser.GameObjects.Image(i.scene,0,0,"texture_atlas_1","scan_effect"),i.scanImage.visible=!1,i.scanImage.scaleY=510,i.add(i.scanImage);var n=new Phaser.GameObjects.Image(i.scene,0,0,"texture_atlas_hall","wood");return i.add(n),i}return r(e,t),e.prototype.onAllBallsRestituted=function(){this.scanImage.visible=!0,this.scanImage.x=-450,this.scanImage.setOrigin(0,.5),this.scanImage.scaleX=0,this.scene.tweens.add({targets:this.scanImage,scaleX:2.22,ease:Phaser.Math.Easing.Cubic.Out,duration:1e3,onComplete:function(){this.scanImage.setOrigin(1,.5),this.scanImage.x=409*2.22-450,this.scene.tweens.add({targets:this.scanImage,scaleX:0,ease:Phaser.Math.Easing.Cubic.In,duration:800,onComplete:function(){this.scanImage.visible=!1},onCompleteScope:this})},onCompleteScope:this})},e.prototype.onCueBalCollisionWithBorder=function(t,e,i){var n,r;if(i){var s=0,h=0;"BC"===e||"FG"===e?h=-o.Engine.BALL_RADIUS*a.GameConstants.PHYS_SCALE:"JK"===e?s=o.Engine.BALL_RADIUS*a.GameConstants.PHYS_SCALE:"RS"===e||"NO"===e?h=o.Engine.BALL_RADIUS*a.GameConstants.PHYS_SCALE:s=-o.Engine.BALL_RADIUS*a.GameConstants.PHYS_SCALE,n=t.x*a.GameConstants.PHYS_SCALE+s,r=t.y*a.GameConstants.PHYS_SCALE+h}else n=t.x*a.GameConstants.PHYS_SCALE,r=t.y*a.GameConstants.PHYS_SCALE;var l=new Phaser.GameObjects.Image(this.scene,n,r,"texture_atlas_1","glow");l.setScale(0),this.add(l),this.scene.tweens.add({targets:l,scaleX:.65,scaleY:.65,ease:Phaser.Math.Easing.Cubic.Out,duration:75,onComplete:function(){this.scene.tweens.add({targets:l,alpha:0,ease:Phaser.Math.Easing.Cubic.Out,duration:375,onComplete:function(){l.destroy()},onCompleteScope:this})},onCompleteScope:this})},e}(Phaser.GameObjects.Container);e.EffectsContainer=h},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(1),o=i(0),h=i(11),l=i(20),u=s(i(5)),c=function(t){function e(e){var i=t.call(this,e)||this;i.guide=new Phaser.GameObjects.Graphics(i.scene),i.add(i.guide),i.guideWidth=3,i.guideAlpha=.65;var n=a.GameConstants.CUES_DATA[o.GameVars.gameData.cueID-1];switch(i.guideColor=Number(n["guide-color"]),n.guide){case"short":i.factor=1;break;case"medium":i.factor=1.5;break;case"long":i.factor=2}return i}return r(e,t),e.prototype.update=function(){this.guide.clear();var t=l.CueContainer.currentInstance;if(t.visible&&!t.shooting&&!o.GameVars.paused){this.guide.lineStyle(this.guideWidth,this.guideColor,this.guideAlpha);for(var e,i=o.GameVars.billiardEngine.ballsArray[0].position,n=i.plus(l.CueContainer.currentInstance.aimDirectionVector.times(5e5)),r=new u.Point(n.x,n.y),s=[],c=[],d=new u.Point(i.x,i.y),f=1;f<o.GameVars.billiardEngine.ballsArray.length;f++){var p=o.GameVars.billiardEngine.ballsArray[f];if(p.active){var g=new u.Point(p.position.x,p.position.y);(L=u.Maths.lineIntersectCircle(d,r,g,2*a.GameConstants.BALL_RADIUS,5)).intersects&&(s.push(p),null!==L.enter&&c.push(L.enter))}}var m=null;if(s.length>0){var y=1e10;for(f=0;f<s.length;f++)if(c[f]){var v=c[f].x,_=c[f].y,x=(v-i.x)*(v-i.x)+(_-i.y)*(_-i.y);x<y&&(y=x,e=s[f],m=c[f])}if(this.guide.moveTo(i.x*a.GameConstants.PHYS_SCALE,i.y*a.GameConstants.PHYS_SCALE),!m)return;var w=!1;for(f=0;f<4;f++){if((L=u.Maths.lineIntersectCircle(h.BoardContainer.CUSHION_VERTEXES[f],h.BoardContainer.CUSHION_VERTEXES[f+1],m,a.GameConstants.BALL_RADIUS,5)).intersects){w=!0;break}}if(w)for(f=0;f<4;f++){if(L=u.Maths.lineIntersectLine(d,r,h.BoardContainer.CUSHION_VERTEXES_PLUS_RADIUS[f],h.BoardContainer.CUSHION_VERTEXES_PLUS_RADIUS[f+1],5)){m=L;break}}else{this.guide.strokeCircle(m.x*a.GameConstants.PHYS_SCALE,m.y*a.GameConstants.PHYS_SCALE,a.GameConstants.BALL_RADIUS*a.GameConstants.PHYS_SCALE);var b=u.Maths.findBearing(m.x-i.x,m.y-i.y),T=u.Maths.findBearing(e.position.x-m.x,e.position.y-m.y),E=Math.abs(u.Maths.angleDiff(T,b)),A=5*a.GameConstants.BALL_RADIUS*((90-E)/90)*this.factor,S=new u.Point(e.position.x+Math.cos(T*Math.PI/180)*A,e.position.y+Math.sin(T*Math.PI/180)*A);this.guide.moveTo(e.position.x*a.GameConstants.PHYS_SCALE,e.position.y*a.GameConstants.PHYS_SCALE),this.guide.lineTo(S.x*a.GameConstants.PHYS_SCALE,S.y*a.GameConstants.PHYS_SCALE);var C=u.Maths.findBearing(m.x-i.x,m.y-i.y),O=u.Maths.findBearing(S.x-m.x,S.y-m.y);E=u.Maths.angleDiff(O,C);var P=5*a.GameConstants.BALL_RADIUS*E/90,R=O-90,M=new u.Point(m.x+P*Math.cos(R*Math.PI/180),m.y+P*Math.sin(R*Math.PI/180));this.guide.moveTo(m.x*a.GameConstants.PHYS_SCALE,m.y*a.GameConstants.PHYS_SCALE),this.guide.lineTo(M.x*a.GameConstants.PHYS_SCALE,M.y*a.GameConstants.PHYS_SCALE)}}else for(f=0;f<4;f++){var L;if(L=u.Maths.lineIntersectLine(d,r,h.BoardContainer.CUSHION_VERTEXES_PLUS_RADIUS[f],h.BoardContainer.CUSHION_VERTEXES_PLUS_RADIUS[f+1],5)){m=L;break}}m&&(this.guide.moveTo(i.x*a.GameConstants.PHYS_SCALE,i.y*a.GameConstants.PHYS_SCALE),this.guide.lineTo(m.x*a.GameConstants.PHYS_SCALE,m.y*a.GameConstants.PHYS_SCALE),this.guide.stroke(),this.guide.strokeCircle(m.x*a.GameConstants.PHYS_SCALE,m.y*a.GameConstants.PHYS_SCALE,a.GameConstants.BALL_RADIUS*a.GameConstants.PHYS_SCALE)),this.guide.stroke()}},e}(Phaser.GameObjects.Container);e.GuideContainer=c},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=s(i(5)),o=i(1),h=i(0),l=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype.update=function(){this.clear();for(var t=a.BallsStartConfig.getLinesAndVertexArrays(),e=t.lineArray,i=t.vertexArray,n=0;n<e.length;n++){var r=e[n].p1,s=e[n].p2;this.lineStyle(1,16776960,1),this.lineBetween(r.x*o.GameConstants.PHYS_SCALE,r.y*o.GameConstants.PHYS_SCALE,s.x*o.GameConstants.PHYS_SCALE,s.y*o.GameConstants.PHYS_SCALE)}this.fillStyle(65280);for(n=0;n<i.length;n++)var l=i[n].position;var u=h.GameVars.billiardEngine.ballsArray;this.lineStyle(1,65280,1.5);for(n=0;n<u.length;n++)if(u[n].active){l=u[n].position;var c=u[n].radius;this.strokeCircle(l.x*o.GameConstants.PHYS_SCALE,l.y*o.GameConstants.PHYS_SCALE,c*o.GameConstants.PHYS_SCALE)}},e}(Phaser.GameObjects.Graphics);e.DebugGraphics=l},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var s=i(1),a=i(0),o=i(137),h=function(t){function e(e){var i=t.call(this,e)||this;i.scaleX=a.GameVars.scaleX,i.cues=[],i.tweening=!1;for(var n=0;n<s.GameConstants.CUES_DATA.length;n++){var r=new o.ShopCueContainer(i.scene,n+1);r.x=90+133*n,r.y=330,i.add(r),i.cues.push(r)}return i}return r(e,t),e.prototype.scroll=function(){var t;t=this.x<0?0:-895*a.GameVars.scaleX,this.scene.tweens.add({targets:this,x:t,ease:Phaser.Math.Easing.Cubic.Out,duration:550,onComplete:function(){this.tweening=!1},onCompleteScope:this})},e.prototype.onCueEquipped=function(){for(var t=0;t<this.cues.length;t++)this.cues[t].setCurrentState()},e}(Phaser.GameObjects.Container);e.ShopCues=h},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(1),o=i(7),h=i(0),l=i(10),u=s(i(2)),c=function(t){function e(e,i){var n=t.call(this,e)||this,r=a.GameConstants.CUES_DATA;n.id=i,n.cueCapsule=new Phaser.GameObjects.Image(n.scene,0,0,"texture_atlas_1","cue-capsule"),n.cueCapsule.setInteractive({useHandCursor:!0}),n.cueCapsule.on("pointerdown",n.onDownCapsule,n),n.cueCapsule.on("pointerover",n.oOverCapsule,n),n.cueCapsule.on("pointerout",n.onOutCapsule,n),n.add(n.cueCapsule),n.equipedFrame=new Phaser.GameObjects.Image(n.scene,-2,-4,"texture_atlas_1","equiped-frame"),n.add(n.equipedFrame),n.equipedLabelImg=new Phaser.GameObjects.Image(n.scene,70,-30,"texture_atlas_1","equipped"),n.add(n.equipedLabelImg);var s=n.id>=10?"cue_":"cue_0",o=new Phaser.GameObjects.Image(n.scene,0,0,"texture_atlas_3",s+n.id+"_00");if(o.angle=90,n.add(o),0!==r[n.id-1]["animation-frames"]){var h=new Phaser.GameObjects.Image(n.scene,0,0,"texture_atlas_3",s+n.id+"_01");h.angle=90,n.add(h)}if(n.cueNameLabel=new Phaser.GameObjects.Text(n.scene,0,232,r[n.id-1].name,{fontFamily:"Avenir_Next",fontSize:"17px",color:"#00FFFF"}),n.cueNameLabel.setOrigin(.5),n.add(n.cueNameLabel),n.aimingLabel=new Phaser.GameObjects.Text(n.scene,0,258,"Guide:"+r[n.id-1].guide,{fontFamily:"Avenir_Next",fontSize:"16px",color:"#00FFFF"}),n.aimingLabel.setOrigin(.5),n.add(n.aimingLabel),1!==n.id){var u=new l.Button(n.scene,0,288,"texture_atlas_1","btn_buy_off","btn_buy_on");u.onDown(n.onClickBuy,n),n.add(u)}return n.setCurrentState(),n}return r(e,t),e.prototype.setCurrentState=function(){var t=this.id===h.GameVars.gameData.cueID,e=a.GameConstants.CUES_DATA[this.id-1]["name-nft"];this.equipedFrame.visible=t,this.equipedLabelImg.visible=t,h.GameVars.availableCues[e]&&!t?(this.cueCapsule.setInteractive(),this.cueCapsule.alpha=1,this.cueNameLabel.alpha=1,this.aimingLabel.alpha=1):(this.cueCapsule.disableInteractive(),this.cueCapsule.alpha=.35,this.cueNameLabel.alpha=.35,this.aimingLabel.alpha=.35)},e.prototype.onDownCapsule=function(){o.GameManager.equipCue(this.id)},e.prototype.oOverCapsule=function(){this.cueCapsule.setScale(1.025)},e.prototype.onOutCapsule=function(){this.cueCapsule.setScale(1)},e.prototype.onClickBuy=function(){var t="https://wax.atomichub.io/market?collection_name=clashdomenft&order=asc&schema_name=poolcues&search="+a.GameConstants.CUES_DATA[this.id-1].name+"&sort=price&symbol=WAX";u.Utils.openExternalLink(t,!1)},e}(Phaser.GameObjects.Container);e.ShopCueContainer=c},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(7),o=i(0),h=s(i(2)),l=function(t){function e(){return t.call(this,"BootScene")||this}return r(e,t),e.prototype.preload=function(){e.currentInstance=this,a.GameManager.setCurrentScene(this),this.load.image("rotate-device","assets/rotate-device.png"),h.SDK.loadPreloaderAssets("rug-pool")},e.prototype.create=function(){(e.currentInstance=this,a.GameManager.setCurrentScene(this),this.scene.setVisible(!1),o.GameVars.isDesktop=o.GameVars.currentScene.sys.game.device.os.desktop&&!(navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)),o.GameVars.isDesktop)?a.GameManager.init():(a.GameManager.init(),window.innerWidth>window.innerHeight?this.scene.stop("OrientationLock"):this.scene.run("OrientationLock"))},e}(Phaser.Scene);e.BootScene=l},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(7),o=i(4),h=i(40),l=s(i(2)),u=function(t){function e(){var i=t.call(this,"PreloadScene")||this;return e.currentInstance=i,i}return r(e,t),e.prototype.preload=function(){a.GameManager.setCurrentScene(this),this.composeScene(),this.loadAssets()},e.prototype.create=function(){var t=this.cache.json.get("audiosprite");t=JSON.parse(JSON.stringify(t).replace("urls","src")),t=JSON.parse(JSON.stringify(t).replace("../","")),t=JSON.parse(JSON.stringify(t).replace("../","")),o.AudioManager.howl=new h.Howl(t),o.AudioManager.howl.on("load",(function(){a.GameManager.onGameAssetsLoaded()}))},e.prototype.composeScene=function(){this.add.text(-100,-100,"abcdefg",{fontFamily:"Oswald-ExtraLight",fontSize:"26px",color:"#FFFF00"}),this.add.text(-100,-100,"abcdefg",{fontFamily:"Oswald-Medium",fontSize:"26px",color:"#FFFF00"}),this.add.text(-100,-100,"abcdefg",{fontFamily:"Avenir_Next",fontSize:"26px",color:"#FFFF00"}),this.add.text(-100,-100,"abcdefg",{fontFamily:"Groovy_Fast",fontSize:"26px",color:"#FFFF00"})},e.prototype.loadAssets=function(){l.SDK.loadAssets(),this.load.image("splash-background","assets/bg_splash.jpg"),this.load.atlas("texture_atlas_1","assets/texture_atlas_1.png","assets/texture_atlas_1.json"),this.load.atlas("texture_atlas_2","assets/texture_atlas_2.png","assets/texture_atlas_2.json"),this.load.atlas("texture_atlas_3","assets/texture_atlas_3.png","assets/texture_atlas_3.json"),this.load.json("audiosprite","assets/audio/audiosprite.json")},e}(Phaser.Scene);e.PreloadScene=u},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var s=i(4),a=i(1),o=i(7),h=i(0),l=i(10),u=i(70),c=i(141),d=function(t){function e(){return t.call(this,"SplashScene")||this}return r(e,t),e.prototype.create=function(){o.GameManager.setCurrentScene(this),this.counter=0,this.add.image(a.GameConstants.GAME_WIDTH/2,a.GameConstants.GAME_HEIGHT/2,"splash-background").setScale(1/h.GameVars.correctionScale,1/(h.GameVars.scaleX*h.GameVars.correctionScale)),this.light=this.add.image(a.GameConstants.GAME_WIDTH/2,a.GameConstants.GAME_HEIGHT/2,"texture_atlas_1","light_splash"),this.light.setScale(2/h.GameVars.correctionScale,2/(h.GameVars.scaleX*h.GameVars.correctionScale)),this.light.tint=16731647,this.gameTitle=this.add.image(a.GameConstants.GAME_WIDTH/2,0,"texture_atlas_1","title_splash_a"),this.gameTitle.setOrigin(.5,0),this.gameTitle.scaleX=h.GameVars.scaleX;var t=new u.AudioButtonContainer(this);t.setPosition(40*h.GameVars.scaleX,40),t.scaleX=h.GameVars.scaleX,this.add.existing(t);var e=new l.Button(this,a.GameConstants.GAME_WIDTH-40*h.GameVars.scaleX,40,"texture_atlas_1","btn_info_off","btn_info_on");e.onDown(this.onClickInfo,this),e.scaleX=h.GameVars.scaleX,this.add.existing(e);var i=new l.Button(this,100*h.GameVars.scaleX,a.GameConstants.GAME_HEIGHT-45,"texture_atlas_1","btn_play_off","btn_play_on");i.onDown(this.onClickPlay,this),i.scaleX=h.GameVars.scaleX,this.add.existing(i);var n=new l.Button(this,270*h.GameVars.scaleX,a.GameConstants.GAME_HEIGHT-45,"texture_atlas_1","btn_equipment_off","btn_equipment_on");n.onDown(this.onClickShop,this),n.scaleX=h.GameVars.scaleX,this.add.existing(n),s.AudioManager.playSound("music",!0)},e.prototype.update=function(){this.counter++,60===this.counter?(this.light.tint=6422525,this.gameTitle.setFrame("title_splash_b")):120===this.counter&&(this.counter=0,this.light.tint=16731647,this.gameTitle.setFrame("title_splash_a"))},e.prototype.onClickPlay=function(){o.GameManager.enterPaymentScene(),s.AudioManager.playSound("btn_neon")},e.prototype.onClickInfo=function(){var t=new c.InfoLayer(this);this.add.existing(t),s.AudioManager.playSound("btn_neon")},e.prototype.onClickShop=function(){o.GameManager.enterShopScene()},e}(Phaser.Scene);e.SplashScene=d},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var s=i(1),a=i(0),o=i(10),h=function(t){function e(e){var i=t.call(this,e,0,0)||this;return i._addContent(),i}return r(e,t),e.prototype._addContent=function(){var t=this,e=new Phaser.GameObjects.Graphics(this.scene);e.fillStyle(461639,1),e.fillRect(0,0,s.GameConstants.GAME_WIDTH,s.GameConstants.GAME_HEIGHT),this.add(e);var i=new Phaser.GameObjects.Text(this.scene,this.scene.game.scale.width/2,30,"SCORING SYSTEM",{fontFamily:"Avenir_Next",fontSize:"32px",color:"#00FFFF"});this.add(i),i.scaleX=a.GameVars.scaleX,i.setOrigin(.5);var n=new Phaser.GameObjects.Text(this.scene,50,100," Hitting the cue ball against the table borders earn +5 POINTS.\n\n Pocketing the cue ball doesn't have any effect on the score.\n\n Pocketing a ball increases the timer by 0.75 SECOND.\n\n If a ball is pocketed in the marked hole, the points and the extra time are multiplied by the multiplier displayed on that hole.\n\n\n Pocketing a ball in the marked hole increases the multiplier by +0.5.\n\n If no balls are pocketed in a turn or the cue ball is pocketed, then the multiplier is reset to 1.\n\n\n The multiplier hole changes when a ball is pocketed in any hole.\n\n COMBO: Get COMBO by pocketing multiple balls in the same turn.\n\n Clearing a rack earns +150 POINTS",{fontFamily:"Avenir_Next",fontSize:"20px",color:"#00FFFF",wordWrap:{width:Math.floor(.7*this.scene.game.scale.width),useAdvancedWrap:!0}});this.add(n),n.scaleX=a.GameVars.scaleX,this.scene.time.delayedCall(100,(function(){var e=new o.Button(t.scene,t.scene.game.scale.width-30,40,"texture_atlas_1","btn_close_off","btn_close_on");t.add(e),e.setScale(.7*a.GameVars.scaleX,.7),e.once(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,(function(){t.destroy(!0)}),t)}),this)},e}(Phaser.GameObjects.Container);e.InfoLayer=h},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var s=i(1),a=function(t){function e(){return t.call(this,"OrientationLock")||this}return r(e,t),e.prototype.create=function(){this._main=this.add.container();var t=new Phaser.GameObjects.Graphics(this,{fillStyle:{color:0}});this._main.add(t),t.fillRect(0,0,s.GameConstants.GAME_WIDTH,s.GameConstants.GAME_HEIGHT),this._icon=new Phaser.GameObjects.Image(this,s.GameConstants.GAME_WIDTH/2,s.GameConstants.GAME_HEIGHT/2,"rotate-device"),this._main.add(this._icon)},e.prototype.update=function(){this._icon.setScale(this.scale.displayScale.x,this.scale.displayScale.y)},e}(Phaser.Scene);e.OrientationLock=a},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=s(i(2)),o=i(1),h=i(7),l=i(0),u=function(t){function e(){var i=t.call(this,"PaymentScene")||this;return e.currentInstance=i,i}return r(e,t),e.prototype.create=function(){h.GameManager.setCurrentScene(this),this.add.image(o.GameConstants.GAME_WIDTH/2,o.GameConstants.GAME_HEIGHT/2,"splash-background").setScale(1/l.GameVars.correctionScale,1/(l.GameVars.scaleX*l.GameVars.correctionScale)),this.light=this.add.image(o.GameConstants.GAME_WIDTH/2,o.GameConstants.GAME_HEIGHT/2,"texture_atlas_1","light_splash"),this.light.setScale(2/l.GameVars.correctionScale,2/(l.GameVars.scaleX*l.GameVars.correctionScale)),this.light.tint=16731647,this.gameTitle=this.add.image(o.GameConstants.GAME_WIDTH/2,0,"texture_atlas_1","title_splash_a"),this.gameTitle.setOrigin(.5,0),this.gameTitle.scaleX=l.GameVars.scaleX;var t=this.add.graphics();t.fillStyle(597301,.25),t.fillRect(0,0,o.GameConstants.GAME_WIDTH,o.GameConstants.GAME_HEIGHT),a.SDK.showPaymentLayer(h.GameManager.enterBoardScene,h.GameManager)},e.prototype.update=function(){this.counter++,60===this.counter?(this.light.tint=6422525,this.gameTitle.setFrame("title_splash_b")):120===this.counter&&(this.counter=0,this.light.tint=16731647,this.gameTitle.setFrame("title_splash_a"))},e}(Phaser.Scene);e.PaymentScene=u}]);
//# sourceMappingURL=bundle.js.map