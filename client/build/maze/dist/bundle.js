!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=70)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.formatNumber=function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},t}();e.GameVars=n},function(t,e,i){"use strict";var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var s=n(i(2)),r=function(){function t(){}return t.DEVELOPMENT=!1,t.VERBOSE=!1,t.GAME_WIDTH=1100,t.GAME_HEIGHT=680,t.DEBUG=!1,t.COLLECTION="tstclashdome",t.SCHEMA_ELEMENTS="testelement",t.SCHEMA_LEVELS="testlevel",t.NFT_DATA_TESTNET=[{asset_id:null,owner:null,template_id:610029,item_id:s.Cells.PORTAL_1,name:"Red Wisp",schema:"testelement",img:"QmRQBdJYxnD8BYR2mbQwsQasQoZW6D1mpg4NGqfDuTMLn9"},{asset_id:null,owner:null,template_id:610032,item_id:s.Cells.PORTAL_2,name:"Blue Wisp",schema:"testelement",img:"Qme4Jv21Fe7E6nw2AQYzvDM4gHbXBrUWGxdSZc8DFpaRP5"},{asset_id:null,owner:null,template_id:610031,item_id:s.Cells.PORTAL_3,name:"Yellow Wisp",schema:"testelement",img:"QmaDC9rNAJ928fbqQsjxm4wF4cVL4msp93b3AmL1RVfrd8"},{asset_id:null,owner:null,template_id:610030,item_id:s.Cells.PORTAL_4,name:"Green Wisp",schema:"testelement",img:"QmZpvrbqu86N7UA123nLDLeqDsn38dGK1bpJHTTjvqo8fX"}],t.WISP_DATA=[{imgName:"icon_red_wisp",labelColor:16589407},{imgName:"icon_green_wisp",labelColor:11072784},{imgName:"icon_yellow_wisp",labelColor:16768513},{imgName:"icon_blue_wisp",labelColor:2291711}],t.SAVED_GAME_DATA_KEY="maze-game-data",t}();e.GameConstants=r},function(t,e,i){"use strict";var n,s,r,a,o,h;i.r(e),function(t){t[t.UP=0]="UP",t[t.DOWN=1]="DOWN",t[t.LEFT=2]="LEFT",t[t.RIGHT=3]="RIGHT"}(n||(n={})),function(t){t[t.EMPTY=0]="EMPTY",t[t.PATH=1]="PATH",t[t.WALL=2]="WALL",t[t.GROUND=3]="GROUND",t[t.DOT=4]="DOT",t[t.POWER_PELLET=5]="POWER_PELLET",t[t.PACMAN_SPAWNING_POINT=6]="PACMAN_SPAWNING_POINT",t[t.GHOSTS_1_SPAWNING_POINT=7]="GHOSTS_1_SPAWNING_POINT",t[t.GHOSTS_2_SPAWNING_POINT=8]="GHOSTS_2_SPAWNING_POINT",t[t.GHOSTS_3_SPAWNING_POINT=9]="GHOSTS_3_SPAWNING_POINT",t[t.GHOSTS_4_SPAWNING_POINT=10]="GHOSTS_4_SPAWNING_POINT",t[t.PORTAL_1=11]="PORTAL_1",t[t.PORTAL_2=12]="PORTAL_2",t[t.PORTAL_3=13]="PORTAL_3",t[t.PORTAL_4=14]="PORTAL_4"}(s||(s={})),function(t){t.BLINKY="blinky",t.PINKY="pinky",t.INKY="inky",t.CLYDE="clyde"}(r||(r={})),function(t){t.GHOST="ghost",t.PLAYER="player"}(a||(a={})),function(t){t.CHASE="chase",t.SCATTER="scatter",t.FRIGHTENED="frightened"}(o||(o={})),function(t){t.START_GAME="start game",t.CHANGE_DIRECTION="cd",t.SET_SEED="set seed",t.PURCHASE_BOOSTER="purchase booster",t.SKIP_GAME="skip game",t.FORCE_GAMEOVER="force gameover"}(h||(h={}));class l{constructor(t,e){this.type=t,this.params=e||null}getParams(){return this.params}getType(){return this.type}}l.FRIGHTENED_STATE_ENTERED="frightened state entered",l.FRIGHTENED_STATE_SIGNAL="frightened state signal",l.FRIGHTENED_STATE_LEFT="frightened state left",l.CONTACT_INTERACTIVE_ITEM="contact interactive item",l.GHOST_SPAWNED="ghost spawned",l.GHOST_EATEN="ghost eaten",l.LIFE_LOST="life lost",l.PLAYER_RESPAWNED="player respawned",l.LEVEL_RESET="level reset",l.PLAYER_DIRECTION_CHANGED="player direction changed",l.PLAYER_TELEPORTED="player teleported",l.PLAYER_HIT_SINGLE_PORTAL="player hit single portal",l.PLAYER_HIT="player hit",l.GAME_OVER="game over";class c{constructor(){this.listeners=[]}hasEventListener(t,e){let i=!1;for(let n=0;n<this.listeners.length;n++)this.listeners[n].type===t&&this.listeners[n].listenerFunction===e&&(i=!0);return i}addEventListener(t,e,i){this.hasEventListener(t,e)||this.listeners.push({type:t,listenerFunction:e,scope:i})}removeEventListener(t,e){for(let i=0;i<this.listeners.length;i++)if(this.listeners[i].type===t&&this.listeners[i].listenerFunction===e){this.listeners.splice(i,1);break}}dispatchEvent(t){for(let e=0;e<this.listeners.length;e++)if(this.listeners[e].type===t.getType()){this.listeners[e].listenerFunction.apply(this.listeners[e].scope,t.getParams());break}}}class u{static fixNumber(t){return isNaN(t)?0:Math.floor(1e5*t)/1e5}static transposeMatrix(t){const e=t.length,i=t[0].length,n=[];for(let s=0;s<i;s++){n[s]=new Array(e);for(let i=0;i<e;i++)n[s][i]=t[i][s]}return n}static shuffleArray(t,e){const i=[...t];let n,s,r=i.length;for(;0!==r;)s=Math.floor(e.getRandom()*r),r--,n=i[r],i[r]=i[s],i[s]=n;return i}static getRandomElement(t,e,i){if(0===t.length)return null;if(1===t.length&&void 0!==i)return null;const n=void 0!==i?t.filter((t,e)=>e!==i):t;return n[Math.floor(n.length*e.getRandom())]}}class d{constructor(t){this._seed=t||12345,this._seed=Math.imul(741103597,this._seed)>>>0}set seed(t){this._seed=t,this._seed=Math.imul(741103597,this._seed)>>>0}getRandom(){return this._seed=Math.imul(741103597,this._seed)>>>0,Math.floor(this._seed/2**32*1e5)/1e5}}class f{constructor(t){this.engine=t,this.position={x:0,y:0},this.v=0,this.isOnTurningPoint=!1,this.dir=null,this.newDir=null,this.lastDir=null,this.type=null,this.corneringDeltaSpeed=0,this.active=!0}update(){if(!this.active)return;let t=!1;if(null===this.dir){if(null===this.newDir||this.getNextCell(this.newDir)!==s.PATH)return;this.dir=this.newDir,this.newDir=null,t=!0}if(this.dir===n.UP&&this.newDir===n.DOWN&&(this.dir=n.DOWN,this.newDir=null),this.dir===n.DOWN&&this.newDir===n.UP&&(this.dir=n.UP,this.newDir=null),this.dir===n.LEFT&&this.newDir===n.RIGHT&&(this.dir=n.RIGHT,this.newDir=null),this.dir===n.RIGHT&&this.newDir===n.LEFT&&(this.dir=n.LEFT,this.newDir=null),this.isOnTurningPoint&&null!==this.newDir&&this.getNextCell(this.newDir)===s.PATH){switch(this.newDir){case n.UP:this.turnUp();break;case n.DOWN:this.turnDown();break;case n.LEFT:this.turnLeft();break;case n.RIGHT:this.turnRight()}this.newDir=null,this.isOnTurningPoint=!1}else{let e,i;switch(this.dir){case n.UP:this.position.y-=this.v,t&&(this.position.y-=this.v*this.corneringDeltaSpeed),i=this.position.y-Math.floor(this.position.y),this.isOnTurningPoint=i<=this.v;break;case n.DOWN:this.position.y+=this.v,t&&(this.position.y+=this.v*this.corneringDeltaSpeed),i=Math.ceil(this.position.y)-this.position.y,this.isOnTurningPoint=i<=this.v;break;case n.LEFT:this.position.x-=this.v,t&&(this.position.x-=this.v*this.corneringDeltaSpeed),e=this.position.x-Math.floor(this.position.x),this.isOnTurningPoint=e<=this.v;break;case n.RIGHT:this.position.x+=this.v,t&&(this.position.x+=this.v*this.corneringDeltaSpeed),e=Math.ceil(this.position.x)-this.position.x,this.isOnTurningPoint=e<=this.v}}}turnUp(){let t;this.dir===n.LEFT?(t=this.position.x-Math.floor(this.position.x),this.position.x=Math.floor(this.position.x)):this.dir===n.RIGHT&&(t=Math.ceil(this.position.x)-this.position.x,this.position.x=Math.ceil(this.position.x));const e=u.fixNumber(this.v-t+this.v*this.corneringDeltaSpeed);this.position.y-=e,this.dir=n.UP}turnDown(){let t;this.dir===n.RIGHT?(t=Math.ceil(this.position.x)-this.position.x,this.position.x=Math.ceil(this.position.x)):this.dir===n.LEFT&&(t=this.position.x-Math.floor(this.position.x),this.position.x=Math.floor(this.position.x));const e=u.fixNumber(this.v-t+this.v*this.corneringDeltaSpeed);this.position.y+=e,this.dir=n.DOWN}turnLeft(){let t;this.dir===n.UP?(t=this.position.y-Math.floor(this.position.y),this.position.y=Math.floor(this.position.y)):this.dir===n.DOWN&&(t=Math.ceil(this.position.y)-this.position.y,this.position.y=Math.ceil(this.position.y));const e=u.fixNumber(this.v-t+this.v*this.corneringDeltaSpeed);this.position.x-=e,this.dir=n.LEFT}turnRight(){let t;this.dir===n.UP?(t=this.position.y-Math.floor(this.position.y),this.position.y=Math.floor(this.position.y)):this.dir===n.DOWN&&(t=Math.ceil(this.position.y)-this.position.y,this.position.y=Math.ceil(this.position.y));const e=u.fixNumber(this.v-t+this.v*this.corneringDeltaSpeed);this.position.x+=e,this.dir=n.RIGHT}getMatrixIndexes(){return{c:Math.round(this.position.x),r:Math.round(this.position.y)}}getNextCell(t){if(null===t)return null;{const e=this.engine.board,i=this.getMatrixIndexes();let s,r;switch(t){case n.UP:s=i.c,r=i.r-1;break;case n.DOWN:s=i.c,r=i.r+1;break;case n.LEFT:s=i.c-1,r=i.r;break;case n.RIGHT:s=i.c+1,r=i.r}return s<0||s===this.engine.c||r<0||r===this.engine.r?null:e[s][r]}}}class p extends f{constructor(t,e){super(t),this.name=a.PLAYER,this.invulnerable=!1,this.respawned=!1,this.position={x:e.x,y:e.y},this.corneringDeltaSpeed=1.5,this.exitingPortal=null,this.v=.075}update(){super.update(),this.lastDir!==this.dir&&(A.log("direction changed dir:"+this.dir+" tick:"+this.engine.tick),this.engine.eventDispatcher.dispatchEvent(new l(l.PLAYER_DIRECTION_CHANGED,[this.dir,this.engine.tick]))),this.lastDir=this.dir;const t=this.getMatrixIndexes();null!==this.exitingPortal&&(this.isOnTurningPoint=!0,this.exitingPortal.c===t.c&&this.exitingPortal.r===t.r||(this.exitingPortal=null));const e=this.engine.interactiveItems[t.c][t.r];if(e!==s.EMPTY){Math.abs(this.position.x-t.c)+Math.abs(this.position.y-t.r)<p.BOUNDING_CIRCLE_RADIUS&&this.engine.onContactWithInteractiveElement(e,t)}if(this.isOnTurningPoint){const t=this.getNextCell(this.dir);null!==t&&t===s.PATH||(this.lastDir=this.dir,this.dir=null,this.position.x=Math.round(this.position.x),this.position.y=Math.round(this.position.y))}}}p.BOUNDING_CIRCLE_RADIUS=.4;class g{constructor(t){this.engine=t,this.tickLifeLost=0,this.tickInvulnerable=0,this.tickRespawned=0}update(){this.player.update(),this.player.active||this.engine.tick!==this.tickLifeLost+g.RESPAWN_TICKS||this.respawnPlayer(),this.player.invulnerable&&this.engine.tick===this.tickInvulnerable+g.INVULNERABLE_TICKS&&(this.player.invulnerable=!1),this.player.respawned&&this.engine.tick===this.tickRespawned+g.RESPAWN_TICKS&&(this.player.respawned=!1)}init(){this.player=new p(this.engine,this.engine.playerSpawningPosition),this.portal1Positions=[],this.portal2Positions=[],this.portal3Positions=[],this.portal4Positions=[];const t=this.engine.c,e=this.engine.r;for(let i=0;i<t;i++)for(let t=0;t<e;t++)this.engine.interactiveItems[i][t]===s.PORTAL_1?this.portal1Positions.push({c:i,r:t}):this.engine.interactiveItems[i][t]===s.PORTAL_2?this.portal2Positions.push({c:i,r:t}):this.engine.interactiveItems[i][t]===s.PORTAL_3?this.portal3Positions.push({c:i,r:t}):this.engine.interactiveItems[i][t]===s.PORTAL_4&&this.portal4Positions.push({c:i,r:t})}changePlayerDirection(t){this.player.active&&this.player.dir!==t&&(this.player.newDir=t)}onLifeLost(){this.tickLifeLost=this.engine.tick,this.player.active=!1,this.player.dir=null,this.player.newDir=null,this.engine.onLifeLost()}respawnPlayer(){this.tickRespawned=this.engine.tick,this.player.position={x:this.engine.playerSpawningPosition.x,y:this.engine.playerSpawningPosition.y},this.player.active=!0,this.player.respawned=!0,this.engine.onPlayerRespawned()}teleport(t,e){if(null!==this.player.exitingPortal)return;let i,n,r=null;t===s.PORTAL_1?i=this.portal1Positions:t===s.PORTAL_2?i=this.portal2Positions:t===s.PORTAL_3?i=this.portal3Positions:t===s.PORTAL_4&&(i=this.portal4Positions);for(let t=0;t<i.length;t++){const s=i[t];if(s.c===e.c&&s.r===e.r){n=t;break}}r=u.getRandomElement(i,this.engine.prng,n),null!==r?(this.player.position={x:r.c,y:r.r},this.player.exitingPortal={c:r.c,r:r.r},this.engine.eventDispatcher.dispatchEvent(new l(l.PLAYER_TELEPORTED,[t,r])),A.log("teleported tick:"+this.engine.tick)):this.engine.eventDispatcher.dispatchEvent(new l(l.PLAYER_HIT_SINGLE_PORTAL,[t,e]))}enterInvulnerableState(){this.player.invulnerable=!0,this.tickInvulnerable=this.engine.tick}}g.RESPAWN_TICKS=30,g.INVULNERABLE_TICKS=180;class m{constructor(t){this.ghost=t,this.targetPosition=null,this.firstDirection=null,this.dir=this.getDirectionInPath()}update(){this.ghost.isOnTurningPoint&&(this.setDirection(),null===this.dir&&(this.dir=this.getOppositeDirection(this.ghost.dir)))}init(){this.dir=this.ghost.dir}setDirection(){}getOppositeDirection(t){let e=null;switch(t){case n.UP:e=n.DOWN;break;case n.DOWN:e=n.UP;break;case n.LEFT:e=n.RIGHT;break;case n.RIGHT:e=n.LEFT}return e}isPlayerInRange(){const t=this.ghost.engine.playerManager.player,e=this.ghost.position.x-t.position.x,i=this.ghost.position.y-t.position.y;return e*e+i*i<=this.ghost.engine.squaredDetectionDistance}getValidCells(){const t=this.ghost.engine.board,e=Math.round(this.ghost.position.x),i=Math.round(this.ghost.position.y),r={dir:n.UP,c:e,r:i-1},a={dir:n.DOWN,c:e,r:i+1},o={dir:n.LEFT,c:e-1,r:i},h={dir:n.RIGHT,c:e+1,r:i};let l=[];if(r.r>=0&&t[r.c][r.r]===s.PATH&&l.push(r),a.r<this.ghost.engine.r&&t[a.c][a.r]===s.PATH&&l.push(a),o.c>=0&&t[o.c][o.r]===s.PATH&&l.push(o),h.c<this.ghost.engine.c&&t[h.c][h.r]===s.PATH&&l.push(h),null===this.firstDirection){let t=null;this.dir===n.UP?t=l.indexOf(a):this.dir===n.DOWN?t=l.indexOf(r):this.dir===n.LEFT?t=l.indexOf(h):this.dir===n.RIGHT&&(t=l.indexOf(o)),null!==t&&-1!==t&&l.splice(t,1)}return l}getDirectionInPath(){const t=this.ghost.engine.board,e=this.ghost.engine.c,i=this.ghost.engine.r,r=this.ghost.engine.prng;let a=null,o=0;for(;null===a&&o<1e3;){let h,l=this.ghost.position.x,c=this.ghost.position.y;const u=r.getRandom();u<.25?(l++,h=n.RIGHT):u<.5?(l--,h=n.LEFT):u<.75?(c++,h=n.DOWN):(c--,h=n.UP),l>=0&&l<e&&c>=0&&c<i&&t[l][c]===s.PATH&&(a=h),o++}return a}}class v extends m{constructor(t){super(t)}setDirection(){const t=this.getValidCells();if(0===t.length)return void(this.dir=this.getOppositeDirection(this.dir));const e=this.ghost.engine.playerManager.player;if(this.targetPosition={x:e.position.x,y:e.position.y},this.isPlayerInRange()){let e=1e10,i=null;for(let n=0;n<t.length;n++){const s=t[n].c-this.targetPosition.x,r=t[n].r-this.targetPosition.y,a=s*s+r*r;a<e&&(e=a,i=t[n].dir)}this.dir=i}else{this.targetPosition=null;const e=this.ghost.engine.prng,i=t[Math.floor(e.getRandom()*t.length)];this.dir=i.dir}}}class y extends m{constructor(t){super(t)}setDirection(){const t=this.getValidCells();if(0===t.length)return void(this.dir=this.getOppositeDirection(this.dir));const e=this.ghost.engine.playerManager.player;if(this.targetPosition={x:e.position.x,y:e.position.y},this.isPlayerInRange()){let i;if(null===e.dir){const t=this.ghost.engine.prng;i=null!==e.lastDir?e.lastDir:Math.floor(4*t.getRandom())}else i=e.dir;switch(i){case n.UP:this.targetPosition.y-=4;break;case n.DOWN:this.targetPosition.y+=4;break;case n.LEFT:this.targetPosition.x-=4;break;case n.RIGHT:this.targetPosition.x+=4}let s=1e10,r=null;for(let e=0;e<t.length;e++){const i=t[e].c-this.targetPosition.x,n=t[e].r-this.targetPosition.y,a=i*i+n*n;a<s&&(s=a,r=t[e].dir)}this.dir=r}else{this.targetPosition=null;const e=this.ghost.engine.prng,i=t[Math.floor(e.getRandom()*t.length)];this.dir=i.dir}}}class _ extends m{constructor(t){super(t)}setDirection(){const t=this.getValidCells();if(0===t.length)return this.targetPosition=null,void(this.dir=this.getOppositeDirection(this.dir));const e=this.ghost.engine.playerManager.player;this.pivotPosition={x:e.position.x,y:e.position.y};let i=null;const s=this.ghost.engine.ghostsManager.ghosts;for(let t=0;t<s.length;t++)if(s[t].name===r.BLINKY){i=s[t].position;break}if(this.isPlayerInRange()&&null!==i){let s;if(null===e.dir){const t=this.ghost.engine.prng;s=null!==e.lastDir?e.lastDir:Math.floor(4*t.getRandom())}else s=e.dir;switch(s){case n.UP:this.pivotPosition.y-=2;break;case n.DOWN:this.pivotPosition.y+=2;break;case n.LEFT:this.pivotPosition.x-=2;break;case n.RIGHT:this.pivotPosition.x+=2}const r=this.pivotPosition.x-i.x,a=this.pivotPosition.y-i.y;this.targetPosition={x:this.pivotPosition.x+r,y:this.pivotPosition.y+a};let o=1e10,h=null;for(let e=0;e<t.length;e++){const i=t[e].c-this.targetPosition.x,n=t[e].r-this.targetPosition.y,s=i*i+n*n;s<o&&(o=s,h=t[e].dir)}this.dir=h}else{this.targetPosition=null;const e=this.ghost.engine.prng,i=t[Math.floor(e.getRandom()*t.length)];this.dir=i.dir}}}class x extends m{constructor(t){super(t)}setDirection(){const t=this.getValidCells();if(0===t.length)return void(this.dir=this.getOppositeDirection(this.dir));const e=this.ghost.engine.playerManager.player;if(this.isPlayerInRange()){this.targetPosition=null;const e=this.ghost.engine.prng,i=t[Math.floor(e.getRandom()*t.length)];this.dir=i.dir}else{this.targetPosition={x:e.position.x,y:e.position.y};let i=1e10,n=null;for(let e=0;e<t.length;e++){const s=t[e].c-this.targetPosition.x,r=t[e].r-this.targetPosition.y,a=s*s+r*r;a<i&&(i=a,n=t[e].dir)}this.dir=n}}}class w extends m{constructor(t){super(t),this.firstDirection=null}init(){let t;switch(super.init(),this.dir){case n.UP:t=n.DOWN;break;case n.DOWN:t=n.UP;break;case n.LEFT:t=n.RIGHT;break;case n.RIGHT:t=n.LEFT}if(this.isPlayerInRange()){const e=this.getNextPosition(t),i=this.getNextPosition(this.dir),n=this.ghost.engine.playerManager.player.position,s=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=(n.x-i.x)*(n.x-i.x)+(n.y-i.y)*(n.y-i.y);this.firstDirection=s>r?t:null}}setDirection(){if(null!==this.firstDirection)this.dir=this.firstDirection,this.firstDirection=null;else{const t=this.getValidCells();if(t.length>0){let e=!1;for(let i=0;i<t.length;i++)if(this.dir===t[i].dir){e=!0;break}if(!e){const e=this.ghost.engine.prng,i=t[Math.floor(e.getRandom()*t.length)];this.dir=i.dir}}else this.dir=this.getOppositeDirection(this.dir)}}getNextPosition(t){let e={x:this.ghost.position.x,y:this.ghost.position.y};const i=this.ghost.v;switch(t){case n.UP:e.y-=i;break;case n.DOWN:e.y+=i;break;case n.LEFT:e.x-=i;break;case n.RIGHT:e.x+=i}return e}}class b extends m{constructor(t){super(t)}setDirection(){const t=this.getValidCells();let e=1e10,i=null;for(let n=0;n<t.length;n++){const s=t[n].c-this.ghost.scatterPosition.x,r=t[n].r-this.ghost.scatterPosition.y,a=s*s+r*r;a<e&&(e=a,i=t[n].dir)}this.dir=i}}class E extends f{constructor(t,e,i,n,s,o){switch(super(t),this.type=e,this.name=a.GHOST,this.scatterPosition=n,this.id=o,this.initialPosition={x:i.x,y:i.y},this.position={x:i.x,y:i.y},this.corneringDeltaSpeed=0,this.iVelocity=s,this.v=E.SPEEDS[this.iVelocity],this.type){case r.BLINKY:this.chaseBehaviour=new v(this);break;case r.PINKY:this.chaseBehaviour=new y(this);break;case r.INKY:this.chaseBehaviour=new _(this);break;case r.CLYDE:this.chaseBehaviour=new x(this)}this.frightenedBehaviour=new w(this),this.scatterBehaviour=new b(this),this.ghostBehaviour=this.chaseBehaviour,this.dir=this.chaseBehaviour.dir}update(){super.update(),this.ghostBehaviour.update(),this.newDir=this.ghostBehaviour.dir;const t=this.engine.playerManager.player;if(t.active&&!t.respawned){const e=t.position;Math.abs(this.position.x-e.x)+Math.abs(this.position.y-e.y)<E.BOUNDING_CIRCLE_RADIUS+p.BOUNDING_CIRCLE_RADIUS&&this.engine.onContactWithGhost(this)}}changeState(t){if(this.state!==t){switch(this.state=t,t){case o.CHASE:this.ghostBehaviour=this.chaseBehaviour;break;case o.FRIGHTENED:this.ghostBehaviour=this.frightenedBehaviour;break;case o.SCATTER:this.ghostBehaviour=this.scatterBehaviour}this.ghostBehaviour.init()}}}E.BOUNDING_CIRCLE_RADIUS=.4,E.SPEEDS=[.05,.1,.25];class T{constructor(t){this.engine=t,this.ghosts=[],this.tickFrightened=null,this.id=0,this.spawningGhostList=[],this.eatenGhostsCounter=0}update(){let t=0;for(;this.spawningGhostList.length>0&&this.spawningGhostList[0].tick===this.engine.tick&&t<1e3;){const e=this.spawningGhostList.shift();this.spawnGhost(e),t++}for(let t=0;t<this.ghosts.length;t++)this.ghosts[t].update();null!==this.tickFrightened&&(this.engine.tick>=this.tickFrightened+g.INVULNERABLE_TICKS?this.leaveFrightenedState():this.engine.tick===this.tickFrightened+g.INVULNERABLE_TICKS-T.TICKS_FRIGHTENED_SIGNAL&&this.engine.eventDispatcher.dispatchEvent(new l(l.FRIGHTENED_STATE_SIGNAL,[])))}init(t){const e=JSON.parse(JSON.stringify(t));let i=0;for(let t=0;t<e.length;t++)e[t].ghosts.length>i&&(i=e[t].ghosts.length);const n=e.length;for(let t=0;t<i;t++)for(let i=0;i<n;i++){const n=e[i].ghosts.shift();n&&this.spawningGhostList.push({tick:30+30*t,type:n,position:e[i].position,iVelocity:e[i].iVelocity})}}spawnGhost(t){const e=new E(this.engine,t.type,t.position,t.position,t.iVelocity,this.id);this.ghosts.push(e),this.tickFrightened&&this.engine.tick<this.tickFrightened+g.INVULNERABLE_TICKS&&e.changeState(o.FRIGHTENED),this.id++,this.engine.eventDispatcher.dispatchEvent(new l(l.GHOST_SPAWNED,[e]))}enterFrightenedState(){this.tickFrightened=this.engine.tick;for(let t=0;t<this.ghosts.length;t++)this.ghosts[t].changeState(o.FRIGHTENED);A.log("frightened state entered tick:"+this.engine.tick),this.engine.eventDispatcher.dispatchEvent(new l(l.FRIGHTENED_STATE_ENTERED,[]))}leaveFrightenedState(){this.tickFrightened=null,this.eatenGhostsCounter=0;for(let t=0;t<this.ghosts.length;t++)this.ghosts[t].changeState(o.CHASE);A.log("frightened state left tick:"+this.engine.tick),this.engine.eventDispatcher.dispatchEvent(new l(l.FRIGHTENED_STATE_LEFT,[]))}removeGhost(t){const e=this.ghosts.indexOf(t);if(-1!==e){this.eatenGhostsCounter++;const i={x:t.initialPosition.x,y:t.initialPosition.y};this.spawningGhostList.push({tick:this.engine.tick+100,type:t.type,position:i,iVelocity:t.iVelocity}),this.ghosts.splice(e,1),this.engine.eventDispatcher.dispatchEvent(new l(l.GHOST_EATEN,[t,this.eatenGhostsCounter]))}}onLifeLost(){for(let t=0;t<this.ghosts.length;t++)this.ghosts[t].changeState(o.SCATTER)}onPlayerRespawned(){for(let t=0;t<this.ghosts.length;t++)this.ghosts[t].changeState(o.CHASE)}}T.TICKS_FRIGHTENED_SIGNAL=60;class S{constructor(t){this.engine=t,this.eatenDots=0,this.dotsCounter=0,this.totalDots=0}static checkLevelConsistency(t){const e={isConsistent:!0,message:""};return null===t.playerData.position&&(e.isConsistent=!1,e.message="Player missing"),e}update(){}init(){const t=this.engine.interactiveItems,e=this.engine.c,i=this.engine.r;for(let n=0;n<e;n++)for(let e=0;e<i;e++){const i=t[n][e];i!==s.DOT&&i!==s.POWER_PELLET||this.totalDots++}this.dotsCounter=this.totalDots}onDotEaten(){this.eatenDots++,this.dotsCounter--,0===this.dotsCounter&&this.reset()}reset(){this.dotsCounter=this.totalDots-1,this.engine.interactiveItems=JSON.parse(JSON.stringify(this.engine.interactiveItemsInitial));const t=Math.round(this.engine.playerManager.player.position.x),e=Math.round(this.engine.playerManager.player.position.y);this.engine.interactiveItems[t][e]===s.DOT||this.engine.interactiveItems[t][e]===s.POWER_PELLET?(this.engine.interactiveItems[t][e]=s.EMPTY,this.dotsCounter=this.totalDots-1):this.dotsCounter=this.totalDots,this.engine.eventDispatcher.dispatchEvent(new l(l.LEVEL_RESET,[]))}}class A{constructor(t){t?console.log("Maze Game Engine v:"+A.VERSION+" verbose: true"):console.log("Maze Game Engine v:"+A.VERSION),A.verbose=t,this.tick=0,this.score=0,this.gameOver=!1,this.prng=new d,this.eventDispatcher=new c,this.playerManager=new g(this),this.ghostsManager=new T(this),this.levelManager=new S(this)}addEventListener(t,e,i){this.eventDispatcher.addEventListener(t,e,i)}removeEventListener(t,e){this.eventDispatcher.removeEventListener(t,e)}init(t,e){let i,n;this.levelID=t,i=u.transposeMatrix(e.board),n=u.transposeMatrix(e.interactiveItems),this.levelTime=e.gameOverOptions.time,this.lifes=e.gameOverOptions.lifes,this.playerSpawningPosition=e.playerData.position,this.ghostData=e.ghostData,this.board=u.transposeMatrix(i),this.interactiveItems=u.transposeMatrix(n),this.interactiveItemsInitial=JSON.parse(JSON.stringify(this.interactiveItems)),this.c=this.board.length,this.r=this.board[0].length,this.squaredDetectionDistance=Math.floor((this.c*this.c+this.r*this.r)/6.25),this.playerManager.init(),this.ghostsManager.init(this.ghostData),this.levelManager.init()}update(){this.gameOver||(this.tick++,this.levelManager.update(),this.playerManager.update(),this.ghostsManager.update(),0!==this.levelTime&&this.levelTime===this.tick&&(this.gameOver=!0,this.eventDispatcher.dispatchEvent(new l(l.GAME_OVER,[this.score]))))}forceGameOver(){this.gameOver=!0}changePlayerDirection(t){this.playerManager.changePlayerDirection(t)}onContactWithInteractiveElement(t,e){switch(t){case s.DOT:this.score+=A.POINTS_DOT,this.levelManager.onDotEaten(),this.interactiveItems[e.c][e.r]=s.EMPTY;break;case s.POWER_PELLET:this.score+=2*A.POINTS_DOT,this.ghostsManager.enterFrightenedState(),this.playerManager.enterInvulnerableState(),this.levelManager.onDotEaten(),this.interactiveItems[e.c][e.r]=s.EMPTY;break;case s.PORTAL_1:case s.PORTAL_2:case s.PORTAL_3:case s.PORTAL_4:this.playerManager.teleport(t,e)}this.eventDispatcher.dispatchEvent(new l(l.CONTACT_INTERACTIVE_ITEM,[t,e]))}onContactWithGhost(t){t.state===o.FRIGHTENED?(this.ghostsManager.removeGhost(t),this.score+=A.POINTS_GHOST*this.ghostsManager.eatenGhostsCounter):(this.ghostsManager.onLifeLost(),this.playerManager.onLifeLost(),this.lifes--,0===this.lifes&&(this.gameOver=!0,this.eventDispatcher.dispatchEvent(new l(l.GAME_OVER,[this.score]))),this.eventDispatcher.dispatchEvent(new l(l.PLAYER_HIT,[])))}onLifeLost(){this.eventDispatcher.dispatchEvent(new l(l.LIFE_LOST,[]))}onPlayerRespawned(){this.ghostsManager.onPlayerRespawned(),A.log("player respawned tick:"+this.tick),this.eventDispatcher.dispatchEvent(new l(l.PLAYER_RESPAWNED,[]))}processActions(t){A.log("***** Maze Engine v:"+A.VERSION+"procesando acciones");let e=1,i=0;for(;!this.gameOver&&i<1e4;){if(this.update(),t[e]){const{type:i,data:n}=t[e];i===h.CHANGE_DIRECTION&&this.tick===n.tick-1&&(this.changePlayerDirection(n.dir),e++),i===h.FORCE_GAMEOVER&&this.tick===n.tick-1&&this.forceGameOver()}i++}if(1e4===i)throw new Error("something went wrong while processing actions")}static log(t,e){A.verbose&&(e?console.error(t+":",e):console.log(t))}}A.VERSION="0.0.10",A.POINTS_DOT=10,A.POINTS_GHOST=200,i.d(e,"Direction",(function(){return n})),i.d(e,"Cells",(function(){return s})),i.d(e,"GhostType",(function(){return r})),i.d(e,"EntityName",(function(){return a})),i.d(e,"GhostState",(function(){return o})),i.d(e,"ActionType",(function(){return h})),i.d(e,"Event",(function(){return l})),i.d(e,"EventDispatcher",(function(){return c})),i.d(e,"MathUtils",(function(){return u})),i.d(e,"PRNG",(function(){return d})),i.d(e,"Engine",(function(){return A})),i.d(e,"Player",(function(){return p})),i.d(e,"Ghost",(function(){return E})),i.d(e,"LevelManager",(function(){return S}))},function(t,e,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var s in e=arguments[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)},s=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function a(t){try{h(n.next(t))}catch(t){r(t)}}function o(t){try{h(n.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}h((n=n.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var i,n,s,r,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function o(r){return function(o){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(s=2&r[0]?n.return:r[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(s=a.trys,(s=s.length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){a.label=r[1];break}if(6===r[0]&&a.label<s[1]){a.label=s[1],s=r;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(r);break}s[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,o])}}},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var o=i(8),h=i(0),l=i(27),c=i(38),u=i(66),d=i(67),f=i(1),p=a(i(2)),g=a(i(5)),m=function(){function t(){}return t.init=function(){if(null!==h.GameVars.editedLevelData.board||t.board){var e=h.GameVars.editedLevelData.board;t.board=JSON.parse(JSON.stringify(e)),t.interactiveItems=JSON.parse(JSON.stringify(h.GameVars.editedLevelData.interactiveItems)),t.gameOverOptions=JSON.parse(JSON.stringify(h.GameVars.editedLevelData.gameOverOptions)),t.time=t.gameOverOptions.time||3600,t.lifes=t.gameOverOptions.lifes||3,t.playerSpawningPosition=h.GameVars.editedLevelData.playerData.position,t.ghostData=h.GameVars.editedLevelData.ghostData?JSON.parse(JSON.stringify(h.GameVars.editedLevelData.ghostData)):[]}else t.clearLevel();t.editing=!0,h.GameVars.testingLevel=!1,t.selectedTile=null,t.x4TileSize=!1,t.numGhosts=4,t.pan=!1,t.showingLayer=!1,t.stakePileAssets_IDs=[],t.accountWisps()},t.onDownCell=function(e,i){if(null!==t.selectedTile){if(t.selectedTile===p.Cells.GROUND||t.selectedTile===p.Cells.WALL||t.selectedTile===p.Cells.PATH)for(var n=t.getCellsToDraw(e,i),s=0;s<n.length;s++)t.board[n[s].c][n[s].r]=t.selectedTile,t.board[n[s].c][n[s].r]===p.Cells.PATH?t.interactiveItems[n[s].c][n[s].r]=p.Cells.DOT:t.interactiveItems[n[s].c][n[s].r]=p.Cells.EMPTY;else{switch(t.selectedTile){case p.Cells.PACMAN_SPAWNING_POINT:for(var r=0;r<t.COLS;r++)for(var a=0;a<t.ROWS;a++)if(t.interactiveItems[r][a]===p.Cells.PACMAN_SPAWNING_POINT){t.interactiveItems[r][a]=p.Cells.DOT;break}t.interactiveItems[e][i]=p.Cells.PACMAN_SPAWNING_POINT;break;case p.Cells.GHOSTS_1_SPAWNING_POINT:switch(t.numGhosts){case 1:t.interactiveItems[e][i]=p.Cells.GHOSTS_1_SPAWNING_POINT;break;case 2:t.interactiveItems[e][i]=p.Cells.GHOSTS_2_SPAWNING_POINT;break;case 3:t.interactiveItems[e][i]=p.Cells.GHOSTS_3_SPAWNING_POINT;break;case 4:t.interactiveItems[e][i]=p.Cells.GHOSTS_4_SPAWNING_POINT}break;case p.Cells.POWER_PELLET:t.interactiveItems[e][i]=p.Cells.POWER_PELLET;break;case p.Cells.PORTAL_1:t.interactiveItems[e][i]=p.Cells.PORTAL_1;break;case p.Cells.PORTAL_2:t.interactiveItems[e][i]=p.Cells.PORTAL_2;break;case p.Cells.PORTAL_3:t.interactiveItems[e][i]=p.Cells.PORTAL_3;break;case p.Cells.PORTAL_4:t.interactiveItems[e][i]=p.Cells.PORTAL_4}t.board[e][i]=p.Cells.PATH}t.ghostData=[],t.playerSpawningPosition=null;for(var o=0;o<t.COLS;o++)for(var h=0;h<t.ROWS;h++)t.interactiveItems[o][h]===p.Cells.PACMAN_SPAWNING_POINT?t.playerSpawningPosition={x:o,y:h}:t.interactiveItems[o][h]===p.Cells.GHOSTS_1_SPAWNING_POINT?t.ghostData.push({position:{x:o,y:h},ghosts:[p.GhostType.BLINKY],iVelocity:0}):t.interactiveItems[o][h]===p.Cells.GHOSTS_2_SPAWNING_POINT?t.ghostData.push({position:{x:o,y:h},ghosts:[p.GhostType.BLINKY,p.GhostType.PINKY],iVelocity:0}):t.interactiveItems[o][h]===p.Cells.GHOSTS_3_SPAWNING_POINT?t.ghostData.push({position:{x:o,y:h},ghosts:[p.GhostType.BLINKY,p.GhostType.PINKY,p.GhostType.INKY],iVelocity:0}):t.interactiveItems[o][h]===p.Cells.GHOSTS_4_SPAWNING_POINT&&t.ghostData.push({position:{x:o,y:h},ghosts:[p.GhostType.BLINKY,p.GhostType.PINKY,p.GhostType.INKY,p.GhostType.CLYDE],iVelocity:0});l.LevelEditionContainer.currentInstance.checkLevelElements(),t.accountWisps(),t.saveLevelData()}},t.setSelectedTile=function(e){t.selectedTile=e},t.saveLevelData=function(){h.GameVars.editedLevelData.board=JSON.parse(JSON.stringify(t.board)),h.GameVars.editedLevelData.interactiveItems=JSON.parse(JSON.stringify(t.interactiveItems)),h.GameVars.editedLevelData.playerData.position=t.playerSpawningPosition,h.GameVars.editedLevelData.ghostData=JSON.parse(JSON.stringify(t.ghostData)),h.GameVars.editedLevelData.gameOverOptions=JSON.parse(JSON.stringify(t.gameOverOptions)),h.GameVars.editedLevelData.editionTimestamp=Date.now(),g.DataManager.saveGameData("edited_level",h.GameVars.editedLevelData)},t.clearLevel=function(){t.board=[],t.interactiveItems=[];for(var e=0;e<t.COLS;e++){t.board[e]=[],t.interactiveItems[e]=[];for(var i=0;i<t.ROWS;i++)t.board[e][i]=p.Cells.GROUND,t.interactiveItems[e][i]=p.Cells.EMPTY}t.gameOverOptions={time:0,lifes:3},t.time=0,t.lifes=3,t.playerSpawningPosition=null,t.ghostData=[],t.numGhosts=4,t.saveLevelData(),l.LevelEditionContainer.currentInstance&&l.LevelEditionContainer.currentInstance.checkLevelElements(),t.hideMenu()},t.testLevel=function(){null!==t.playerSpawningPosition&&(h.GameVars.testingLevel=!0,h.GameVars.levelData={board:JSON.parse(JSON.stringify(t.board)),interactiveItems:JSON.parse(JSON.stringify(t.interactiveItems)),playerData:{position:{x:t.playerSpawningPosition.x,y:t.playerSpawningPosition.y},iVelocity:0},ghostData:JSON.parse(JSON.stringify(t.ghostData)),gameOverOptions:JSON.parse(JSON.stringify(t.gameOverOptions)),editionTimestamp:Date.now(),author:g.SDK.playerAccount},o.GameManager.enterBoardScene())},t.switchTime=function(){null===t.gameOverOptions.time?t.gameOverOptions.time=t.time:(t.gameOverOptions.time=null,null===t.gameOverOptions.lifes&&(t.gameOverOptions.lifes=t.lifes)),t.saveLevelData()},t.switchLifes=function(){null===t.gameOverOptions.lifes?t.gameOverOptions.lifes=t.lifes:(t.gameOverOptions.lifes=null,null===t.gameOverOptions.time&&(t.gameOverOptions.time=t.time)),t.saveLevelData()},t.updateLifes=function(e){t.showingLayer=!0,h.GameVars.currentScene.time.delayedCall(500,(function(){t.showingLayer=!1}),[],t),0===e&&0===t.gameOverOptions.time&&t.updateTime(u.LifesValuesSetter.TIME_VALUES[1]),t.gameOverOptions.lifes=e,t.lifes=t.gameOverOptions.lifes,t.saveLevelData()},t.updateTime=function(e){t.showingLayer=!0,h.GameVars.currentScene.time.delayedCall(500,(function(){t.showingLayer=!1}),[],t),0===e&&0===t.gameOverOptions.lifes&&t.updateLifes(u.LifesValuesSetter.LIFES_VALUES[1]),t.gameOverOptions.time=60*e,t.time=t.gameOverOptions.time,t.saveLevelData()},t.mintLevel=function(){return s(this,void 0,void 0,(function(){var e,i,n;return r(this,(function(a){switch(a.label){case 0:return e=c.LevelEditionScene.currentInstance.menuLayer,i={board:t.board,interactiveItems:t.interactiveItems,gameOverOptions:t.gameOverOptions,playerData:{position:t.playerSpawningPosition,iVelocity:0},ghostData:t.ghostData,editionTimestamp:Date.now(),author:g.SDK.playerAccount},(n=p.LevelManager.checkLevelConsistency(i)).isConsistent?[4,g.DataManager.mintNFT(JSON.stringify(i),"1.0000 LUDIO",(function(){return s(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return g.SDK.development?(h.GameVars.hasPlayerLevelsStaked=!1,[3,3]):[3,1];case 1:return[4,o.GameManager.checkPlayerStakedLevels()];case 2:t.sent(),t.label=3;case 3:return e.resetMintingButtonsContainer(),[2]}}))}))}),t)]:[3,2];case 1:return a.sent().error&&e.resetMintingButtonsContainer(),[3,3];case 2:g.DataManager.throwError(n.message),e.resetMintingButtonsContainer(),a.label=3;case 3:return[2]}}))}))},t.stakeLevel=function(t){return s(this,void 0,void 0,(function(){var e;return r(this,(function(i){switch(i.label){case 0:return e=c.LevelEditionScene.currentInstance.menuLayer,[4,g.DataManager.stakeNFTs("clashdomepay",[t],"mint level",f.GameConstants.COLLECTION,f.GameConstants.SCHEMA_LEVELS,!1,(function(){return s(this,void 0,void 0,(function(){return r(this,(function(t){return h.GameVars.hasPlayerLevelsStaked=!0,e.resetMintingButtonsContainer(),[2]}))}))}),this)];case 1:return i.sent(),[2]}}))}))},t.changeTileSize=function(e,i){t.x4TileSize=e?i:!t.x4TileSize},t.switchPan=function(){t.pan=!t.pan},t.showWispManagerLayer=function(){t.showingLayer=!0,g.DataManager.getNFTsAndImages(f.GameConstants.SCHEMA_ELEMENTS,f.GameConstants.COLLECTION,(function(t){d.WispManagementLayer.currentInstance.onBlockchainInfoRetrieved(t)}),t),c.LevelEditionScene.currentInstance.showWispManagerLayer()},t.onRefreshNFTs=function(){g.DataManager.getNFTsAndImages(f.GameConstants.SCHEMA_ELEMENTS,f.GameConstants.COLLECTION,d.WispManagementLayer.currentInstance.onBlockchainInfoRetrieved,d.WispManagementLayer.currentInstance)},t.showMenu=function(){t.showingLayer=!0,c.LevelEditionScene.currentInstance.showMenuLayer()},t.hideMenu=function(){setTimeout((function(){t.showingLayer=!1}),250),c.LevelEditionScene.currentInstance.hideMenuLayer()},t.onNFTAddedToStakePile=function(e){t.stakePileAssets_IDs.push(e)},t.clearStakePile=function(){t.stakePileAssets_IDs.length>0&&(d.WispManagementLayer.currentInstance.clearPile(),t.stakePileAssets_IDs=[])},t.stakeWispsNFTs=function(){return s(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return 0===t.stakePileAssets_IDs.length?[2]:[4,g.DataManager.stakeNFTs("clashdomemaz",t.stakePileAssets_IDs,"wisps",f.GameConstants.COLLECTION,f.GameConstants.SCHEMA_ELEMENTS,!0,(function(){return s(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,o.GameManager.checkPlayerWisps()];case 1:return e.sent(),t.accountWisps(),t.stakePileAssets_IDs=[],d.WispManagementLayer.currentInstance.onNFTsStaked(),[2]}}))}))}),t)];case 1:return e.sent(),[2]}}))}))},t.clearPiles=function(){t.stakePileAssets_IDs=[]},t.changeGhostNum=function(){t.numGhosts=1===t.numGhosts?4:t.numGhosts-1},t.isBalanceExceeded=function(){return t.wispData.red<0||t.wispData.green<0||t.wispData.yellow<0||t.wispData.blue<0},t.getCellsToDraw=function(e,i){var n=[{c:e,r:i}];return t.x4TileSize&&(e<t.COLS-1&&n.push({c:e+1,r:i}),i<t.ROWS-1&&n.push({c:e,r:i+1}),3===n.length&&n.push({c:e+1,r:i+1})),n},t.accountWisps=function(){t.wispData=n({},h.GameVars.wispData);for(var e=0;e<t.COLS;e++)for(var i=0;i<t.ROWS;i++){switch(t.interactiveItems[e][i]){case p.Cells.PORTAL_1:t.wispData.red--;break;case p.Cells.PORTAL_2:t.wispData.blue--;break;case p.Cells.PORTAL_3:t.wispData.yellow--;break;case p.Cells.PORTAL_4:t.wispData.green--}}},t.COLS=33,t.ROWS=17,t.DELTA_TIME=10,t.MAX_TIME=180,t.MIN_TIME=60,t.MAX_LIFES=6,t.MIN_LIFES=1,t}();e.LevelEditionManager=m},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";var n,s,r,a,o;i.r(e),function(t){t.START_GAME="start game",t.SKIP_GAME="skip game",t.LEAVE_GAME="leave game",t.PURCHASE_BOOSTER="purchase booster",t.SET_SEED="set seed",t.CONFIG="config"}(n||(n={})),function(t){t.LUDIO="LUDIO",t.JIGO="CDJIGO",t.CARBZ="CDCARBZ"}(s||(s={})),function(t){t.PLAYER="player",t.ADVERSARY="adversary",t.REPLAY="replay"}(r||(r={})),function(t){t.FINISH="finish",t.SKIP="skip",t.QUIT="quit"}(a||(a={})),function(t){t.EDITED_LEVEL="edited_level"}(o||(o={}));var h;i(39);class l{static getPlayersAvatarUrls(t,e,n){const s=[],r=i(41).JsonRpc;try{const i=new r(Y.urls.apis[0]);let a=t.length;for(let r=0;r<t.length;r++){const o=t[r];i.get_table_rows({json:!0,code:"clashdomewld",scope:"clashdomewld",table:"citiz",lower_bound:o,upper_bound:o}).then((function(t){t.rows.length>0?s.push({account:o,url:"https://cloudflare-ipfs.com/ipfs/"+t.rows[0].avatar}):s.push({account:o,url:null}),a--,0===a&&e.apply(n,[s])})).catch((function(t){s.push({account:o,url:null}),a--,0===a&&e.apply(n,[s])}))}}catch(t){e.apply(n,[[]])}}static async getPlayerNick(t,e){const i=await l.getTableRows("clashdomewld","social",1,1,"i64",t,t,!1,0);if(i.rows&&i.rows[0]){let t=JSON.parse(i.rows[0].data).cn;switch(e){case r.PLAYER:Y.playerNick=t;break;case r.ADVERSARY:Y.adversaryNick=t;break;case r.REPLAY:Y.replayNick=t}}}static getTimeUntilEndOfDay(){const t=new Date;return 86400-60*t.getUTCHours()*60-60*t.getUTCMinutes()-t.getUTCSeconds()}static formatNumber(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}static formatTime(t,e){if(isNaN(t)||t>86400&&!e)return{str:"0:00:00",h:"00",m:"00",s:"00"};const i=Math.floor(t/3600),n=Math.floor((t-3600*i)/60),s=t-3600*i-60*n;let r=i.toString(),a=n.toString(),o=s.toString();return i<10&&(r="0"+i),n<10&&(a="0"+n),s<10&&(o="0"+s),{str:r+":"+a+":"+o,h:r,m:a,s:o}}static getTournamentID(t){const e=new Date,i=(e.getUTCDate()<10?"0":"")+e.getUTCDate(),n=(e.getUTCMonth()+1<10?"0":"")+(e.getUTCMonth()+1);return e.getUTCFullYear()+n+i+l.GAME_IDS[t]}static fixNumber(t){return isNaN(t)?0:Math.floor(1e5*t)/1e5}static async getTrialCitizenData(){if(Y.development)return{full:!0,staked:!0};{const t=await l.getTableRows("clashdomewld","trials",1,1,"i64",Y.playerAccount,Y.playerAccount,!1,0);return t.rows&&t.rows.length>0?t.rows[0]:null}}static async getIsAdversaryFriend(t){if(Y.development)return!0;{const e=await l.getTableRows("clashdomewld","social",1,1,"i64",Y.playerAccount,Y.playerAccount,!1,0);if(e.rows&&e.rows.length>0){let i=JSON.parse(e.rows[0].data);return!!i.fr&&!!i.fr[t]}return!1}}static areAllFeesZero(){let t=!0;const e=Y.gameFees.fees;for(let i=0;i<e.length;i++)if(-1===e[i].indexOf("0.0000")){t=!1;break}return t}static async doesPlayerOwnVIP(){const t=new(0,i(11).ExplorerApi)(Y.urls.atomic,"atomicassets",{fetch:fetch});return 0!==(await t.getAssets({owner:Y.playerAccount,collection_name:"clashdomenft",schema_name:"vip"})).length}static async doesPlayerOwnLand(){let t=!1;if(Y.development)t=!0;else{let e,n;switch(Y.gameName){case"rug-pool":e="poolhalls",n="hall_id";break;case"endless-siege-2":e="lands",n="land_id"}const s=new(0,i(11).ExplorerApi)(Y.urls.atomic,"atomicassets",{fetch:fetch}),r=await s.getAssets({owner:Y.playerAccount,collection_name:"clashdomenft",schema_name:e});for(let e=0;e<r.length;e++){if(r[e].data[n]===Y.landID){t=!0;break}}}return t}static async hasPlayerCitizenStaked(){const t=await l.getTableRows("clashdomewld","citiz",1,1,"i64",Y.playerAccount,Y.playerAccount,!1,0);return!(!t.rows||0===t.rows.length)}static isPlayerLogged(){return!!Y.development||!(!Y.reactClass.state||!Y.reactClass.state.wax.userAccount)}static getLandName(){let t;switch(Y.gameName){case"rug-pool":t=l.RUG_POOL_LANDS[Y.landID.toString()];break;case"endless-siege-2":t=l.ENDLESS_SIEGE_2_LANDS[Y.landID.toString()]}return t}static async getTableRows(t,e,n,s,r,a,o,h,c){try{const u=new(0,i(41).JsonRpc)(Y.urls.apis[c]);try{return await u.get_table_rows({json:!0,code:t,scope:t,table:e,limit:n,index_position:s,key_type:r,lower_bound:a,upper_bound:o,reverse:h,show_payer:!1})}catch(i){return c!==Y.urls.apis.length-1?l.getTableRows(t,e,n,s,r,a,o,h,c+1):{error:i}}}catch(t){console.error(t)}}static async emulateLatency(t){return new Promise((e,i)=>{setTimeout(e,t)}).then((function(){}))}static openExternalLink(t,e){let i;i=e?window.open(t,"_self"):window.open(t,"_blank"),i&&i.focus?i.focus():i||(window.location.href=t)}static getQuantityValue(t){-1!==t.indexOf(" CREDITS")?t.replace(" CREDITS",""):-1!==t.indexOf(" LUDIO")?t.replace(" LUDIO",""):-1!==t.indexOf(" CDJIGO")&&t.replace(" CDJIGO","");let e=parseFloat(t);return e=isNaN(e)?0:Math.round(10*e)/10,e}static isBoosterSupported(){if(Y.private)return!1;let t=!1;return(0===Y.fee&&Y.gameFees.waxToLudioFactor&&0!==parseInt(Y.gameFees.waxToLudioFactor)||Y.fee>0&&Y.gameFees.creditsToJigoFactor&&0!==parseInt(Y.gameFees.creditsToJigoFactor))&&(t=!0),t}static getBoosterFee(){let t;return t=0===Y.fee?Y.gameFees.creditsToJigoFactor*parseFloat(Y.gameFees.reward.replace("CREDITS",""))/1e4:Y.gameFees.waxToLudioFactor*Y.fee/1e4,t=Math.floor(1e4*t)/1e4,t}static async getCDTokenBalance(t){if(Y.development)return new Promise((t,e)=>{setTimeout(t,3e3)}).then((function(){return Math.random()>.5?11.5:.2}));{let e=await Y.reactClass.state.wax.rpc.get_currency_balance("clashdometkn",Y.playerAccount,t);return e=e.length?parseFloat(e[0]):0,e}}static getFormattedTokenBoosterFee(t){let e=t.toString(),i=0===Y.fee?s.JIGO:s.LUDIO;const n=e.indexOf(".");if(-1===n)e+=".0000 "+i;else{let t=4-e.length+n+1;for(let i=0;i<t;i++)e+="0";e+=" "+i}return e}static async callAction(t,e,i){try{const n=[{account:t,name:e,authorization:[{actor:Y.playerAccount,permission:"active"}],data:i}];return"wcw"===Y.reactClass.state.wax.type?await Y.reactClass.state.wax.api.transact({actions:n},{blocksBehind:3,expireSeconds:30}):"anchor"===Y.reactClass.state.wax.type&&await Y.reactClass.state.wax.signTransaction({actions:n},{blocksBehind:3,expireSeconds:30}),{error:null}}catch(t){return{error:t.message}}}static async fetchWithTimeout(t,e={}){let i=e.timeout||8e3;const n=new AbortController,s=setTimeout(()=>n.abort(),i),r=await fetch(t,{...e,signal:n.signal});return clearTimeout(s),r}}l.ENDLESS_SIEGE_2_LANDS={1:"CRAPSMOOR",2:"NEW TURDINGTON",3:"AVERAGEBY",4:"CHAMPTON",5:"PIMPSHIRE",6:"HIGH GOLDENFORD",7:"NICEBURY",8:"ST. MEH UPON AVON",9:"TRASHDALE",10:"LITTERTOFT",11:"UPPER JUNKWICK",12:"DUMPFORD HEIGHTS",13:"NOTSOTHORPE",14:"CHADHAM TURN",15:"SMINEMDALE",16:"MERRYSQUIRT MEADOWS",17:"RADVILLE",18:"SHIPPLETHWAITE",19:"TARNISHGATE",20:"BEARISHTOWN",21:"MUDWHARF",22:"POOPBURY",23:"REGULAR CREEK",24:"EPICWORTH",25:"MAYDENHEAD",26:"LUDIOVILLE HIGH",27:"BOOSTERBURY",28:"DECENTSHIRE",29:"LOWER DUNGMOOR",30:"DISMAYWICK",31:"SHAGGYFORD BAY",32:"PUKEHAVEN",33:"DULLFOLKSMERE",34:"OVERTHETOPPENHAM",35:"REAT BLINGHAM",36:"LAMBOVILLE",37:"WAXTON PENINSULA",38:"BLANDFORD",39:"ROTTENSIDE",40:"FUDWATER PORT"},l.RUG_POOL_LANDS={1:"MotherHustlers",2:"Sly's Snooker Club",3:"Rack & Chalk",4:"Sizzling Balls",5:"Solids, Stars & Stripes",6:"Tight Rack",7:"The Ragtag Shed",8:"Marielito Management Co.",9:"Lata Snooker Classic",10:"Chillin' Ronnie"},l.GAME_IDS={"candy-fiesta":"01",templok:"02","ringy-dingy":"03","endless-siege-2":"04","rug-pool":"05",maze:"06"},l.GAME_TITLES={"candy-fiesta":"Candy Fiesta",templok:"Templok","ringy-dingy":"Ringy Dingy","endless-siege-2":"Endless Siege 2","rug-pool":"Rug Pool",maze:"Maze (coming soon)"},l.BOOSTER_DESCRIPTION={"candy-fiesta":"Activate this booster for 5 extra moves in Candy Fiesta.",templok:"Activate this booster to get an extra re-roll.","ringy-dingy":"Activate this booster and remove all the rings of the same color.","endless-siege-2":"","rug-pool":"Activate this booster for 5 extra seconds.",maze:""},l.GAME_LOGOS={"candy-fiesta":"assets/sdk/images/logo_candyFiesta.png",templok:"assets/sdk/images/logo_templok.png","ringy-dingy":"assets/sdk/images/logo_ringy.png","endless-siege-2":"assets/sdk/images/logo_endless.png","rug-pool":"assets/sdk/images/logo_rugPool.png",maze:"assets/sdk/images/logo_maze.png"},l.MONTH_NAMES=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],l.CANDY_FIESTA_DEV_LOG=[{type:"start game",data:{seed:61715485}},{type:"move",data:{move:56,p1:{c:3,r:0},p2:{c:3,r:1},score:0}},{type:"set seed",data:{seed:17892100,i:1}},{type:"move",data:{move:55,p1:{c:5,r:1},p2:{c:5,r:2},score:30}},{type:"set seed",data:{seed:12698900,i:2}},{type:"move",data:{move:54,p1:{c:4,r:1},p2:{c:4,r:2},score:60}},{type:"set seed",data:{seed:48687200,i:3}},{type:"skip game"},{type:"end game",data:{userName:"clashdomeali",score:90,duration:7214337}}],l.ENDLESS_SIEGE_2_DEV_LOG=[{type:"start game",data:{seed:21319167}},{type:"ccrd",tk:0},{type:"ccrd",tk:0},{type:"ccrd",tk:0},{type:"ccrd",tk:0},{type:"cc",tk:30,id:3,p:{r:7,c:5}},{type:"dc",tk:30,id:3},{type:"ccrd",tk:30},{type:"set seed",data:{seed:750730,i:1}},{type:"cc",tk:58,id:4,p:{r:6,c:9}},{type:"dc",tk:58,id:4},{type:"ccrd",tk:58},{type:"set seed",data:{seed:369970,i:2}},{type:"br",tk:104,p:{r:8,c:6}},{type:"dc",tk:104,id:2},{type:"ccrd",tk:104},{type:"set seed",data:{seed:518870,i:3}},{type:"cc",tk:123,id:1,p:{r:8,c:6}},{type:"dc",tk:123,id:1},{type:"ccrd",tk:123},{type:"set seed",data:{seed:457290,i:4}},{type:"at",tk:141,trT:"laser",p:{r:6,c:9},id:6},{type:"dc",tk:141,id:6},{type:"ccrd",tk:141},{type:"set seed",data:{seed:298410,i:5}},{type:"at",tk:165,trT:"launch",p:{r:8,c:6},id:8},{type:"dc",tk:165,id:8},{type:"ccrd",tk:165},{type:"set seed",data:{seed:744320,i:6}},{type:"lu",tk:191,cardId:9,id:6},{type:"ccrd",tk:191},{type:"set seed",data:{seed:813700,i:7}},{type:"nw",tk:210},{type:"nw",tk:385},{type:"lu",tk:424,cardId:5,id:6},{type:"ccrd",tk:424},{type:"set seed",data:{seed:663960,i:8}},{type:"lu",tk:464,cardId:10,id:6},{type:"ccrd",tk:464},{type:"set seed",data:{seed:624040,i:9}},{type:"lu",tk:504,cardId:7,id:8},{type:"ccrd",tk:504},{type:"set seed",data:{seed:185120,i:10}},{type:"nw",tk:555},{type:"lu",tk:622,cardId:13,id:6},{type:"ccrd",tk:622},{type:"set seed",data:{seed:497220,i:11}},{type:"lu",tk:705,cardId:14,id:6},{type:"ccrd",tk:705},{type:"set seed",data:{seed:856890,i:12}},{type:"nw",tk:809},{type:"nw",tk:1122},{type:"at",tk:1406,trT:"projectile",p:{r:7,c:4},id:12},{type:"dc",tk:1406,id:12},{type:"ccrd",tk:1406},{type:"set seed",data:{seed:898170,i:13}},{type:"nw",tk:1474},{type:"ubc",tk:1509,id:17},{type:"dc",tk:1509,id:17},{type:"ccrd",tk:1509},{type:"set seed",data:{seed:289450,i:14}},{type:"lu",tk:1666,cardId:18,id:8},{type:"ccrd",tk:1666},{type:"set seed",data:{seed:305180,i:15}},{type:"nw",tk:1771},{type:"lu",tk:1843,cardId:19,id:8},{type:"ccrd",tk:1843},{type:"set seed",data:{seed:536e3,i:16}},{type:"lu",tk:1886,cardId:15,id:6},{type:"ccrd",tk:1886},{type:"set seed",data:{seed:530990,i:17}},{type:"lu",tk:1926,cardId:20,id:6},{type:"ccrd",tk:1926},{type:"set seed",data:{seed:8080,i:18}},{type:"lu",tk:1978,cardId:21,id:8},{type:"ccrd",tk:1978},{type:"set seed",data:{seed:34530,i:19}},{type:"nw",tk:2023},{type:"lu",tk:2059,cardId:22,id:12},{type:"ccrd",tk:2059},{type:"set seed",data:{seed:193390,i:20}},{type:"at",tk:2137,trT:"glue",p:{r:9,c:8},id:16},{type:"dc",tk:2137,id:16},{type:"ccrd",tk:2137},{type:"set seed",data:{seed:111490,i:21}},{type:"lu",tk:2167,cardId:11,id:16},{type:"ccrd",tk:2167},{type:"set seed",data:{seed:300460,i:22}},{type:"lu",tk:2242,cardId:26,id:16},{type:"ccrd",tk:2242},{type:"set seed",data:{seed:597980,i:23}},{type:"lu",tk:2290,cardId:23,id:8},{type:"ccrd",tk:2290},{type:"set seed",data:{seed:779030,i:24}},{type:"nw",tk:2306},{type:"lu",tk:2349,cardId:24,id:6},{type:"ccrd",tk:2349},{type:"set seed",data:{seed:61540,i:25}},{type:"lu",tk:2383,cardId:27,id:6},{type:"ccrd",tk:2383},{type:"set seed",data:{seed:207780,i:26}},{type:"lu",tk:2495,cardId:25,id:8},{type:"ccrd",tk:2495},{type:"set seed",data:{seed:136960,i:27}},{type:"nw",tk:2677},{type:"lu",tk:2785,cardId:30,id:8},{type:"ccrd",tk:2785},{type:"set seed",data:{seed:52930,i:28}},{type:"nw",tk:3068},{type:"lu",tk:3152,cardId:32,id:12},{type:"ccrd",tk:3152},{type:"set seed",data:{seed:442270,i:29}},{type:"nw",tk:3274},{type:"lu",tk:3316,cardId:33,id:16},{type:"ccrd",tk:3316},{type:"set seed",data:{seed:31390,i:30}},{type:"lu",tk:3370,cardId:34,id:8},{type:"ccrd",tk:3370},{type:"set seed",data:{seed:130770,i:31}},{type:"end game",data:{userName:"gr.au.wam",score:10,duration:1234}}],l.TEMPLOK_DEV_LOG=[{type:"start game",data:{seed:25780989}},{type:"drop block",data:{p:{c:8,r:3},blockData:{id:3,n:5,data:[1,2,1,2],i:1},isOnNiche:!1}},{type:"drop block",data:{p:{c:4,r:7},blockData:{id:2,n:5,data:[34956,7936,50244,63488],i:0},isOnNiche:!1}},{type:"drop block into niche",data:{blockData:{id:1,n:4,data:[27648,35904,27648,35904],i:1}}},{type:"set seed",data:{seed:275570,i:1}},{type:"rerroll",data:null},{type:"set seed",data:{seed:835200,i:2}},{type:"drop block",data:{p:{c:3,r:7},blockData:{id:1007,n:2,data:[49152,34816,49152,34816],i:2},isOnNiche:!0}},{type:"drop block",data:{p:{c:5,r:5},blockData:{id:5,n:3,data:[51200,35840,19456,50176],i:2},isOnNiche:!1}},{type:"drop block",data:{p:{c:0,r:3},blockData:{id:4,n:9,data:[61152,61152,61152,61152],i:1},isOnNiche:!1}},{type:"drop block",data:{p:{c:1,r:7},blockData:{id:6,n:1,data:[32768,32768,32768,32768],i:1},isOnNiche:!1}},{type:"set seed",data:{seed:809660,i:3}},{type:"drop block",data:{p:{c:4,r:3},blockData:{id:1008,n:5,data:[34956,7936,50244,63488],i:0},isOnNiche:!1}},{type:"drop block",data:{p:{c:1,r:5},blockData:{id:1009,n:4,data:[51328,36352,17600,57856],i:2},isOnNiche:!1}},{type:"drop block",data:{p:{c:4,r:4},blockData:{id:1010,n:1,data:[32768,32768,32768,32768],i:1},isOnNiche:!1}},{type:"set seed",data:{seed:185920,i:4}},{type:"drop block",data:{p:{c:3,r:0},blockData:{id:1011,n:4,data:[50688,19584,50688,19584],i:0},isOnNiche:!1}},{type:"drop block into niche",data:{blockData:{id:1012,n:3,data:[57344,34944,57344,34944],i:3}}},{type:"rotate",data:null},{type:"drop block",data:{p:{c:5,r:0},blockData:{id:1012,n:3,data:[57344,34944,57344,34944],i:3},isOnNiche:!0}},{type:"drop block",data:{p:{c:1,r:1},blockData:{id:1013,n:1,data:[32768,32768,32768,32768],i:2},isOnNiche:!1}},{type:"set seed",data:{seed:870640,i:5}},{type:"drop block",data:{p:{c:8,r:1},blockData:{id:1014,n:2,data:[49152,34816,49152,34816],i:2},isOnNiche:!1}},{type:"purchase booster",data:null},{type:"drop block into niche",data:{blockData:{id:1016,n:4,data:[19520,58368,35968,19968],i:0}}},{type:"rerroll",data:null},{type:"set seed",data:{seed:547730,i:6}},{type:"drop block",data:{p:{c:4,r:4},blockData:{id:1025,n:4,data:[27648,35904,27648,35904],i:0},isOnNiche:!0}},{type:"drop block into niche",data:{blockData:{id:1015,n:5,data:[1,2,1,2],i:0}}},{type:"set seed",data:{seed:616570,i:7}},{type:"drop block",data:{p:{c:3,r:2},blockData:{id:1029,n:3,data:[57344,34944,57344,34944],i:2},isOnNiche:!1}},{type:"rerroll",data:null},{type:"set seed",data:{seed:941520,i:8}},{type:"drop block",data:{p:{c:5,r:2},blockData:{id:1027,n:4,data:[50688,19584,50688,19584],i:0},isOnNiche:!1}},{type:"end game",data:{userName:"gr.au.wam",score:560,duration:1234}}],l.RINGY_DINGY_DEV_LOG=[{type:"start game",data:{seed:57571305}},{type:"drop block",data:{p:{c:5,r:4},blockData:{id:4,n:5,data:[20032,20032,20032,20032],i:1},isOnNiche:!1}},{type:"drop block into niche",data:{blockData:{id:2,n:2,data:[49152,34816,49152,34816],i:1}}},{type:"rerroll",data:null},{type:"set seed",data:{seed:433280,i:1}},{type:"rotate",data:null},{type:"drop block",data:{p:{c:8,r:4},blockData:{id:5,n:5,data:[1,2,1,2],i:3},isOnNiche:!0}},{type:"drop block",data:{p:{c:4,r:6},blockData:{id:1,n:5,data:[52288,60416,36032,28160],i:1},isOnNiche:!1}},{type:"set seed",data:{seed:953280,i:2}},{type:"drop block",data:{p:{c:1,r:6},blockData:{id:9,n:4,data:[35008,11776,50240,59392],i:2},isOnNiche:!1}},{type:"drop block",data:{p:{c:0,r:5},blockData:{id:7,n:3,data:[51200,35840,19456,50176],i:0},isOnNiche:!1}},{type:"drop block",data:{p:{c:2,r:3},blockData:{id:6,n:5,data:[59520,35040,8928,57888],i:1},isOnNiche:!1}},{type:"set seed",data:{seed:494200,i:3}},{type:"drop block",data:{p:{c:1,r:8},blockData:{id:10,n:1,data:[32768,32768,32768,32768],i:2},isOnNiche:!1}},{type:"drop block",data:{p:{c:2,r:4},blockData:{id:11,n:4,data:[50688,19584,50688,19584],i:0},isOnNiche:!1}},{type:"drop block",data:{p:{c:3,r:5},blockData:{id:12,n:3,data:[57344,34944,57344,34944],i:1},isOnNiche:!1}},{type:"set seed",data:{seed:540760,i:4}},{type:"drop block",data:{p:{c:0,r:2},blockData:{id:13,n:4,data:[19520,58368,35968,19968],i:1},isOnNiche:!1}},{type:"drop block",data:{p:{c:6,r:5},blockData:{id:15,n:3,data:[51200,35840,19456,50176],i:1},isOnNiche:!1}},{type:"drop block",data:{p:{c:3,r:2},blockData:{id:14,n:4,data:[34952,61440,34952,61440],i:2},isOnNiche:!1}},{type:"set seed",data:{seed:341400,i:5}},{type:"drop block",data:{p:{c:0,r:0},blockData:{id:16,n:4,data:[51328,36352,17600,57856],i:1},isOnNiche:!1}},{type:"drop block",data:{p:{c:2,r:0},blockData:{id:18,n:3,data:[57344,34944,57344,34944],i:2},isOnNiche:!1}},{type:"drop block",data:{p:{c:4,r:0},blockData:{id:17,n:4,data:[51328,36352,17600,57856],i:2},isOnNiche:!1}},{type:"set seed",data:{seed:151450,i:6}},{type:"drop block",data:{p:{c:1,r:4},blockData:{id:19,n:4,data:[50688,19584,50688,19584],i:2},isOnNiche:!1}},{type:"drop block into niche",data:{blockData:{id:20,n:5,data:[20032,20032,20032,20032],i:0}}},{type:"rerroll",data:null},{type:"set seed",data:{seed:522570,i:7}},{type:"drop block",data:{p:{c:0,r:6},blockData:{id:22,n:5,data:[59520,35040,8928,57888],i:0},isOnNiche:!0}},{type:"drop block into niche",data:{blockData:{id:21,n:5,data:[59520,35040,8928,57888],i:2}}},{type:"set seed",data:{seed:502020,i:8}},{type:"drop block",data:{p:{c:5,r:5},blockData:{id:24,n:5,data:[51336,36608,17484,61696],i:2},isOnNiche:!1}},{type:"drop block",data:{p:{c:7,r:2},blockData:{id:23,n:4,data:[27648,35904,27648,35904],i:2},isOnNiche:!1}},{type:"purchase booster",data:null},{type:"rerroll",data:null},{type:"set seed",data:{seed:587990,i:9}},{type:"drop block",data:{p:{c:6,r:7},blockData:{id:27,n:3,data:[51200,35840,19456,50176],i:2},isOnNiche:!0}},{type:"drop block into niche",data:{blockData:{id:25,n:4,data:[35008,11776,50240,59392],i:0}}},{type:"set seed",data:{seed:468800,i:10}},{type:"drop block",data:{p:{c:0,r:1},blockData:{id:30,n:3,data:[51200,35840,19456,50176],i:1},isOnNiche:!1}},{type:"end game",data:{userName:"gr.au.wam",score:810,duration:1234}}],l.RUG_POOL_DEV_LOG=[{data:{seed:22823281},type:"start game"},{data:{fee:0,cueID:1,engineVersion:"0.0.36"},type:"config"},{data:{english:0,cueSpeed:{vx:2133.62599,vy:-536.27201},deltaScrew:{x:0,y:0},verticalSpeed:0},type:"shot"},{data:{i:1,seed:45336766},type:"set seed"},{data:{english:0,cueSpeed:{vx:445.39099,vy:1930.00123},deltaScrew:{x:0,y:0},verticalSpeed:0},type:"shot"},{data:{i:2,seed:58228596},type:"set seed"},{data:{english:0,cueSpeed:{vx:-1632.22083,vy:66.04418},deltaScrew:{x:0,y:0},verticalSpeed:0},type:"shot"},{data:{i:3,seed:87852202},type:"set seed"},{data:{english:0,cueSpeed:{vx:1711.00026,vy:-1052.92634},deltaScrew:{x:0,y:0},verticalSpeed:0},type:"shot"},{data:{i:4,seed:69336750},type:"set seed"},{data:{english:0,cueSpeed:{vx:1828.25893,vy:-545.80077},deltaScrew:{x:0,y:0},verticalSpeed:0},type:"shot"},{data:{i:5,seed:97194995},type:"set seed"},{data:{english:0,cueSpeed:{vx:-1756.65027,vy:117.80134},deltaScrew:{x:0,y:0},verticalSpeed:0},type:"shot"},{data:{i:6,seed:70378389},type:"set seed"},{data:{english:0,cueSpeed:{vx:373.61702,vy:59.95748},deltaScrew:{x:0,y:0},verticalSpeed:0},type:"shot"},{data:{i:7,seed:30346308},type:"set seed"},{data:{english:0,cueSpeed:{vx:-683.15741,vy:-910.60334},deltaScrew:{x:0,y:0},verticalSpeed:0},type:"shot"},{data:{i:8,seed:55848908},type:"set seed"},{data:{english:0,cueSpeed:{vx:-1772.49333,vy:-114.27878},deltaScrew:{x:0,y:0},verticalSpeed:0},type:"shot"},{data:{i:9,seed:66192005},type:"set seed"},{data:{english:0,cueSpeed:{vx:219.5278,vy:936.17116},deltaScrew:{x:0,y:0},verticalSpeed:0},type:"shot"},{data:{i:10,seed:61796400},type:"set seed"},{data:{english:0,cueSpeed:{vx:-950.29503,vy:-1282.60777},deltaScrew:{x:0,y:0},verticalSpeed:0},type:"shot"},{data:{i:11,seed:9964193},type:"set seed"},{data:{score:540,landID:2,duration:120704,userName:"gsube.wam"},type:"end game"}],l.MAZE_DEV_LOG=[{type:"start game",data:{seed:123456}},{type:"change direction",data:{dir:1,tick:44}},{type:"change direction",data:{dir:2,tick:69}},{type:"change direction",data:{dir:0,tick:107}},{type:"change direction",data:{dir:1,tick:128}},{type:"change direction",data:{dir:3,tick:149}},{type:"change direction",data:{dir:1,tick:187}},{type:"change direction",data:{dir:3,tick:198}},{type:"change direction",data:{dir:null,tick:219}},{type:"change direction",data:{dir:2,tick:229}},{type:"change direction",data:{dir:0,tick:280}},{type:"change direction",data:{dir:3,tick:331}},{type:"change direction",data:{dir:1,tick:382}},{type:"change direction",data:{dir:null,tick:430}},{type:"change direction",data:{dir:3,tick:452}},{type:"change direction",data:{dir:1,tick:543}},{type:"change direction",data:{dir:2,tick:595}},{type:"change direction",data:{dir:0,tick:633}},{type:"change direction",data:{dir:1,tick:668}},{type:"change direction",data:{dir:0,tick:681}},{type:"change direction",data:{dir:null,tick:691}},{type:"change direction",data:{dir:0,tick:743}},{type:"change direction",data:{dir:3,tick:781}},{type:"change direction",data:{dir:1,tick:806}},{type:"change direction",data:{dir:2,tick:881}},{type:"change direction",data:{dir:0,tick:932}},{type:"change direction",data:{dir:1,tick:954}},{type:"change direction",data:{dir:3,tick:977}},{type:"change direction",data:{dir:1,tick:1050}},{type:"change direction",data:{dir:3,tick:1102}},{type:"change direction",data:{dir:2,tick:1191}},{type:"change direction",data:{dir:0,tick:1214}},{type:"end game",data:{userName:"gr.au.wam",score:1200,duration:1234}}];class c{constructor(t){this._seed=t||Math.random(),this._seed=l.fixNumber(l.fixNumber(Math.imul(741103597,this._seed))>>>0)}set seed(t){this._seed=t,this._seed=l.fixNumber(l.fixNumber(Math.imul(741103597,this._seed))>>>0)}getRandom(){return this._seed=l.fixNumber(l.fixNumber(Math.imul(741103597,this._seed)>>>0)),l.fixNumber(this._seed/2**32)}}!function(t){t.PRELOAD_LAYER_COMMUNICATING="PRELOAD_LAYER_COMMUNICATING",t.PAYMENTS_LAYER_DUEL_READY_LABEL="PAYMENTS_LAYER_DUEL_READY_LABEL",t.PAYMENTS_LAYER_PLAY="PAYMENTS_LAYER_PLAY",t.PAYMENTS_LAYER_INFO_LABEL="PAYMENTS_LAYER_INFO_LABEL",t.PAYMENTS_LAYER_REWARD="PAYMENTS_LAYER_REWARD",t.PAYMENTS_LAYER_REWARD3="PAYMENTS_LAYER_REWARD3",t.PAYMENTS_LAYER_STAKED_CITIZEN_LABEL="PAYMENTS_LAYER_STAKED_CITIZEN_LABEL",t.PAYMENTS_LAYER_STAKED_TRIAL_LABEL="PAYMENTS_LAYER_STAKED_TRIAL_LABEL",t.PAYMENTS_LAYER_FREE="PAYMENTS_LAYER_FREE",t.PAYMENTS_LAYER_BALANCED="PAYMENTS_LAYER_BALANCED",t.PAYMENTS_LAYER_FAST_MATCHING="PAYMENTS_LAYER_FAST_MATCHING",t.PAYMENTS_LAYER_TERMS="PAYMENTS_LAYER_TERMS",t.ACCEPT_LAYER_TERMS="ACCEPT_LAYER_LAYER_TERMS",t.PAYMENTS_LAYER_UNLOCK_MULTIPLIER="PAYMENTS_LAYER_UNLOCK_MULTIPLIER",t.PAYMENTS_LAYER_ENTRY_FEE="PAYMENTS_LAYER_ENTRY_FEE",t.PAYMENTS_LAYER_EARLY_ACCESS="PAYMENTS_LAYER_EARLY_ACCESS",t.BOOSTER_LAYER_YOUR_CURRENT_SCORE="BOOSTER_LAYER_YOUR_CURRENT_SCORE",t.BOOSTER_LAYER_SKIP="BOOSTER_LAYER_SKIP",t.GAMEOVER_LAYER_CLOSED_DUEL_GAMEOVER="GAMEOVER_LAYER_CLOSED_DUEL_GAMEOVER",t.GAMEOVER_PLAY_AGAIN="GAMEOVER_PLAY_AGAIN",t.GAMEOVER_LAYER_CLOSED_DUEL_CLAIM_WAX="GAMEOVER_LAYER_CLOSED_DUEL_CLAIM_WAX",t.GAMEOVER_LAYER_CLOSED_DUEL_YOU_EARNED="GAMEOVER_LAYER_CLOSED_DUEL_YOU_EARNED",t.GAMEOVER_LAYER_OPEN_DUEL_GAMEOVER="GAMEOVER_LAYER_OPEN_DUEL_GAMEOVER",t.GAMEOVER_LAYER_OPEN_DUEL_SCORE_SUBMITTED="GAMEOVER_LAYER_OPEN_DUEL_SCORE_SUBMITTED",t.GAMEOVER_LAYER_OPEN_DUEL_WAITING="GAMEOVER_LAYER_OPEN_DUEL_WAITING",t.GAMEOVER_LAYER_REPLAY_GAME_ENDED="GAMEOVER_LAYER_REPLAY_GAME_ENDED",t.GAMEOVER_LAYER_REPLAY_PLAYER_SKIPPED="GAMEOVER_LAYER_REPLAY_PLAYER_SKIPPED",t.GAMEOVER_LAYER_REPLAY_PLAYER_QUIT="GAMEOVER_LAYER_REPLAY_PLAYER_QUIT",t.GAMEOVER_LAYER_REPLAY_RESTART="GAMEOVER_LAYER_REPLAY_RESTART",t.PAYMENT_LAYER_TOURNAMENT_PLAY="PAYMENT_LAYER_TOURNAMENT_PLAY",t.PAYMENT_LAYER_TOURNAMENT_CURRENT_TOURNAMENT_POT="PAYMENT_LAYER_TOURNAMENT_CURRENT_TOURNAMENT_POT",t.PRELOADER_LAYER_REPLAY="PRELOADER_LAYER_REPLAY",t.SLOTS_CONTAINER_REPLAY="SLOTS_CONTAINER_REPLAY",t.ERROR_DESC_CONTAINER_LOW_RESOURCES="ERROR_DESC_CONTAINER_LOW_RESOURCES",t.ERROR_DESC_CONTAINER_HERE="ERROR_DESC_CONTAINER_HERE",t.ERROR_DESC_CONTAINER_MORE_INFO="ERROR_DESC_CONTAINER_MORE_INFO",t.REPLAY_INFO_LAYER_SCORE="REPLAY_INFO_LAYER_SCORE",t.REPLAY_INFO_LAYER_DURATION="REPLAY_INFO_LAYER_DURATION",t.REPLAY_PAYMENT_LAYER_WATCH_REPLAY="REPLAY_PAYMENT_LAYER_WATCH_REPLAY",t.REPLAY_PAYMENT_LAYER_50="REPLAY_PAYMENT_LAYER_50",t.REPLAY_PAYMENT_LAYER_REMEMBER="REPLAY_PAYMENT_LAYER_REMEMBER",t.RESTORED_SESSION_LAYER_SESSION_RESTORED="RESTORED_SESSION_LAYER_SESSION_RESTORED",t.RESTORED_SESSION_LAYER_SEED_MSG_1="RESTORED_SESSION_LAYER_SEED_MSG_1",t.RESTORED_SESSION_LAYER_SEED_MSG_2="RESTORED_SESSION_LAYER_SEED_MSG_2",t.RESTORED_SESSION_LAYER_CONTINUE="RESTORED_SESSION_LAYER_CONTINUE",t.SKIP_DUEL_LAYER_ALREADY_BEAT="SKIP_DUEL_LAYER_ALREADY_BEAT",t.SKIP_DUEL_LAYER_SKIP="SKIP_DUEL_LAYER_SKIP",t.WAITING_LAYER_GAME_OVER="WAITING_LAYER_GAME_OVER",t.WAITING_LAYER_VALIDATING="WAITING_LAYER_VALIDATING",t.WEEKLY_HIGHSCORE="WEEKLY_HIGHSCORE",t.ALL_TIME_HIGHSCORE="ALL_TIME_HIGHSCORE"}(h||(h={}));const u={[h.PRELOAD_LAYER_COMMUNICATING]:{en:"communicating with the dome"},[h.PAYMENTS_LAYER_DUEL_READY_LABEL]:{en:"DUEL READY!"},[h.PAYMENTS_LAYER_PLAY]:{en:"PLAY"},[h.PAYMENTS_LAYER_INFO_LABEL]:{en:"Both you and your rival share the same random seed\nleading to the same random outcomes."},[h.PAYMENTS_LAYER_REWARD]:{en:"reward {reward}"},[h.PAYMENTS_LAYER_REWARD3]:{en:"REWARD"},[h.PAYMENTS_LAYER_STAKED_CITIZEN_LABEL]:{en:"* You need to stake a ClashDome citizen to play this game for free."},[h.PAYMENTS_LAYER_STAKED_TRIAL_LABEL]:{en:"* Your trial citizen is full. Stake a ClashDome citizen to continue playing for free."},[h.PAYMENTS_LAYER_FREE]:{en:"FREE"},[h.PAYMENTS_LAYER_BALANCED]:{en:"BALANCED"},[h.PAYMENTS_LAYER_FAST_MATCHING]:{en:"FAST"},[h.PAYMENTS_LAYER_TERMS]:{en:"BY CLICKING THE PLAY BUTTON YOU ACCEPT THE TERMS AND CONDITIONS OF CLASHDOME"},[h.ACCEPT_LAYER_TERMS]:{en:"BY CLICKING THE ACCEPT BUTTON YOU ACCEPT THE TERMS AND CONDITIONS OF CLASHDOME"},[h.PAYMENTS_LAYER_UNLOCK_MULTIPLIER]:{en:"UNLOCK MULTIPLIER BY PLAYING ONE DUEL ON THE WAX TIER"},[h.PAYMENTS_LAYER_ENTRY_FEE]:{en:"ENTRY FEE"},[h.PAYMENTS_LAYER_EARLY_ACCESS]:{en:"EARLY ACCESS"},[h.BOOSTER_LAYER_YOUR_CURRENT_SCORE]:{en:"YOUR CURRENT SCORE"},[h.BOOSTER_LAYER_SKIP]:{en:" SKIP"},[h.GAMEOVER_LAYER_CLOSED_DUEL_GAMEOVER]:{en:"GAME OVER"},[h.GAMEOVER_PLAY_AGAIN]:{en:"PLAY AGAIN"},[h.GAMEOVER_LAYER_CLOSED_DUEL_CLAIM_WAX]:{en:"CLAIM your WAX on HUB > Duel Results"},[h.GAMEOVER_LAYER_CLOSED_DUEL_YOU_EARNED]:{en:"YOU EARNED"},[h.GAMEOVER_LAYER_OPEN_DUEL_GAMEOVER]:{en:"GAME OVER"},[h.GAMEOVER_LAYER_OPEN_DUEL_SCORE_SUBMITTED]:{en:"YOUR SCORE WAS SUBMITTED!"},[h.GAMEOVER_LAYER_OPEN_DUEL_WAITING]:{en:"Waiting for a rival to respond your duel.\nCheck later the DUEL RESULTS section."},[h.GAMEOVER_LAYER_REPLAY_GAME_ENDED]:{en:"REPLAY ENDED"},[h.GAMEOVER_LAYER_REPLAY_PLAYER_SKIPPED]:{en:"The player skipped the match"},[h.GAMEOVER_LAYER_REPLAY_PLAYER_QUIT]:{en:"The player quit the match"},[h.GAMEOVER_LAYER_REPLAY_RESTART]:{en:"RESTART"},[h.PAYMENT_LAYER_TOURNAMENT_PLAY]:{en:"PLAY"},[h.PAYMENT_LAYER_TOURNAMENT_CURRENT_TOURNAMENT_POT]:{en:"CURRENT TOURNAMENT POT"},[h.PRELOADER_LAYER_REPLAY]:{en:"REPLAY..."},[h.SLOTS_CONTAINER_REPLAY]:{en:"REPLAY"},[h.ERROR_DESC_CONTAINER_LOW_RESOURCES]:{en:"The CPU of your WAX account is not enough to perform this transaction. Stake more resources    "},[h.ERROR_DESC_CONTAINER_HERE]:{en:"here."},[h.ERROR_DESC_CONTAINER_MORE_INFO]:{en:"More info about staking WAX here."},[h.REPLAY_INFO_LAYER_SCORE]:{en:"score: {score}"},[h.REPLAY_INFO_LAYER_DURATION]:{en:"duration: {duration}"},[h.REPLAY_PAYMENT_LAYER_WATCH_REPLAY]:{en:"WATCH REPLAY"},[h.REPLAY_PAYMENT_LAYER_50]:{en:"50% GOES TO"},[h.REPLAY_PAYMENT_LAYER_REMEMBER]:{en:"REMEMBER: WATCHING YOUR REPLAYS AND THE REPLAYS OF YOUR DIRECT RIVAL IS FREE."},[h.RESTORED_SESSION_LAYER_SESSION_RESTORED]:{en:"SESSION RESTORED"},[h.RESTORED_SESSION_LAYER_SEED_MSG_1]:{en:"STARTED: {date}"},[h.RESTORED_SESSION_LAYER_SEED_MSG_2]:{en:"STARTED: {date}\n DUEL ID: {duelId}"},[h.RESTORED_SESSION_LAYER_CONTINUE]:{en:"CONTINUE"},[h.SKIP_DUEL_LAYER_ALREADY_BEAT]:{en:"YOU ALREADY BEAT\nYOUR RIVAL'S SCORE!"},[h.SKIP_DUEL_LAYER_SKIP]:{en:"SKIP"},[h.WAITING_LAYER_GAME_OVER]:{en:"GAME OVER"},[h.WAITING_LAYER_VALIDATING]:{en:"Validating score ..."},[h.WEEKLY_HIGHSCORE]:{en:"NEW WEEK HIGHSCORE!"},[h.ALL_TIME_HIGHSCORE]:{en:"ALL TIME NEW HIGHSCORE!"}};class d{constructor(){this._textInstances=[]}init(t,e){this.translationData=u,this.lang=t,this.events=new Phaser.Events.EventEmitter,this._textInstances=[]}setLanguage(t){this.lang=t,this.events.emit(d.LANGUAGE_CHANGED),this._textInstances.forEach(t=>{t.text.setText(this.get(t.value,t.variables))})}track(t,e){const i=t.text;this._textInstances.push({text:t,value:i,variables:e}),t.setText(this.get(i,e)),t.once(Phaser.GameObjects.Events.DESTROY,()=>{const e=this._textInstances.findIndex(e=>e.text===t);e>=0&&this._textInstances.splice(e,1)},this)}get(t,e={}){if(!this.translationData[t])return t;let i=this.translationData[t][this.lang];return i||(i=this.translationData[t][this.fallback]),i||(i=t),i.replace(/{(\w+)}/g,(t,i)=>e.hasOwnProperty(i)?e[i]:t)}}d.LANGUAGE_CHANGED="LANGUAGE_CHANGED";const f=new d;class p extends Phaser.GameObjects.Image{constructor(t,e,i,n,s,r=s){super(t,e,i,n,s),this.setInteractive({pixelPerfect:!0,useHandCursor:!0}),s!==r&&(this.on("pointerover",()=>{this.setFrame(r)},this),this.on("pointerout",()=>{this.setFrame(s)},this),this.on("pointerdown",()=>{this.setFrame(r)},this),this.on("pointerup",()=>{this.setFrame(s)},this))}setFrames(t,e=t){this.on("pointerover",()=>{this.setFrame(e)},this),this.on("pointerout",()=>{this.setFrame(t)},this),this.on("pointerdown",()=>{this.setFrame(e)},this),this.on("pointerup",()=>{this.setFrame(t)},this)}setInflationTween(t,e=this.scaleX,i=this.scaleY,n,s){this.setScale(e,i),this.defaultScale={x:e,y:i},n&&(s||(s={ease:Phaser.Math.Easing.Cubic.Out,duration:200})),this.on("pointerover",()=>{n?this.scene.tweens.add({targets:[this],scaleX:this.defaultScale.x*t,scaleY:this.defaultScale.y*t,ease:s.ease,duration:s.duration}):this.setScale(this.defaultScale.x*t,this.defaultScale.y*t)},this),this.on("pointerout",()=>{n?this.scene.tweens.add({targets:[this],scaleX:this.defaultScale.x,scaleY:this.defaultScale.y,ease:s.ease,duration:s.duration}):this.setScale(this.defaultScale.x,this.defaultScale.y)},this),this.on("pointerdown",()=>{this.scene.game.device.os.desktop?this.setScale(this.defaultScale.x,this.defaultScale.y):this.setScale(this.defaultScale.x*t,this.defaultScale.y*t)},this),this.on("pointerup",()=>{this.scene.game.device.os.desktop?this.setScale(this.defaultScale.x*t,this.defaultScale.y*t):this.setScale(this.defaultScale.x,this.defaultScale.y)},this)}onUp(t,e){this.on("pointerup",t,e)}onDown(t,e){this.on("pointerdown",t,e)}onOver(t,e){this.on("pointerover",t,e)}onOut(t,e){this.on("pointerout",t,e)}disable(){this.disableInteractive()}enable(){this.setInteractive()}}class g extends Phaser.GameObjects.Container{constructor(t,e,i,n,s){super(t),this.buttonImage=e,this.buttonImage.setInteractive({useHandCursor:!0}),this.buttonImage.on("pointerover",()=>{this.originalScale=this.scaleX,this.setScale(1.025*this.originalScale)},this),this.buttonImage.on("pointerout",()=>{this.setScale(this.originalScale)},this),this.buttonImage.on("pointerup",()=>{!Y.currentScene.game.device.os.desktop&&Y.gameWidth>Y.gameHeight&&Y.currentScene.scale.startFullscreen(),n.apply(s)},this),this.add(this.buttonImage),this.add(i)}enable(){this.buttonImage.setInteractive({useHandCursor:!0})}disable(){this.buttonImage.disableInteractive()}}const m=new class{create(t,e,i,n){if(!t.textures.exists(i))return;t.textures.exists(e)&&t.textures.remove(e);const s=t.textures.createCanvas(e,510,510),r=s.context;for(let e=0;e<5;e++)for(let a=0;a<5;a++){const o=102*e,h=102*a,l=new Phaser.Curves.Path(o+1+100,h+1+50).circleTo(50).getPoints();r.save(),r.moveTo(l[0].x,l[0].y),r.beginPath();for(let t=1;t<l.length;t++)r.lineTo(l[t].x,l[t].y);r.closePath(),r.clip();const c=t.textures.get(i).getSourceImage();if(Boolean(n)){const e=t.textures.getFrame(i,n).canvasData;r.drawImage(c,e.x,e.y,e.width,e.height,0,0,102,102)}else r.drawImage(c,0,0,102,102);r.restore(),s.add(`${e}x${a}`,0,102*e,102*a,102,102)}s.refresh()}};class v extends Phaser.GameObjects.Container{constructor(t,e){if(super(t),"string"!=typeof e&&(e=JSON.stringify(e)),-1!==e.indexOf("ClashDome")&&(e=e.replace("ClashDome Error - ","")),e.includes("billed CPU time"))this.composeCaseCPU();else{let t=30-5*Math.floor(e.length/80);t<20&&(t=20),e.length>260&&(e=e.substring(0,257)+"...");const i=new Phaser.GameObjects.Text(this.scene,0,46,e,{fontFamily:"Oswald-ExtraLight",fontSize:t+"px",color:"#00ddfe",align:"center"});i.setOrigin(.5),i.setWordWrapWidth(460),this.add(i)}}composeCaseCPU(){const t=new Phaser.GameObjects.Text(this.scene,0,46,h.ERROR_DESC_CONTAINER_LOW_RESOURCES,{fontFamily:"Oswald-ExtraLight",fontSize:"25px",color:"#00ddfe",align:"center"});t.setOrigin(.5),t.setWordWrapWidth(460),this.add(t),f.track(t);const e=new Phaser.GameObjects.Text(this.scene,155,46,h.ERROR_DESC_CONTAINER_HERE,{fontFamily:"Oswald-ExtraLight",fontSize:"25px",color:"#FFFFFF"});e.setOrigin(0),this.add(e),f.track(e),e.setInteractive(),e.on("pointerup",()=>{var t=window.open(Y.urls.bloks+"/wallet/resources/stake","_blank");t&&t.focus?t.focus():t||(window.location.href=Y.urls.bloks+"/wallet/resources/stake")},this.scene);const i=new Phaser.GameObjects.Graphics(this.scene);i.fillStyle(16777215,1),i.fillRect(155,75,41,1),this.add(i);const n=new Phaser.GameObjects.Text(this.scene,0,100,h.ERROR_DESC_CONTAINER_MORE_INFO,{fontFamily:"Oswald-ExtraLight",fontSize:"25px",color:"#FFFFFF",align:"center"});n.setOrigin(.5),this.add(n),f.track(n),n.setInteractive(),n.on("pointerup",()=>{var t=window.open("https://youtu.be/GAts5Pwg_Is?t=267","_blank");t&&t.focus?t.focus():t||(window.location.href="https://youtu.be/GAts5Pwg_Is?t=267")},this.scene);const s=new Phaser.GameObjects.Graphics(this.scene);s.fillStyle(16777215,1),s.fillRect(-140,112,280,1),this.add(s)}}class y extends Phaser.GameObjects.Container{constructor(t,e,i,n,s,r){super(t,e,i),this._text=new Phaser.GameObjects.Text(this.scene,0,0,r.toUpperCase(),{fontFamily:"Oswald-Medium",fontSize:"30px",color:"#387ecb"}),this.add(this._text),this._text.setOrigin(0,.5),this._button=new p(this.scene,n,0,"texture_atlas_0","btn_play_off","btn_play_on"),this.add(this._button),this._button.setOrigin(1,0),this._text.y=this._button.displayHeight/2,this._button.onDown(()=>{l.openExternalLink(Y.urls.clashdome+`/${s}/play?duel=true`,!0)},this),-1!==r.indexOf("(coming soon)")&&(this._button.alpha=.35,this._button.disableInteractive())}get DisplayHeight(){return this._button.displayHeight}}class _ extends Phaser.GameObjects.Container{constructor(t){super(t,0,0),this.WIDTH=.7*Y.gameWidth,this._overlay=new Phaser.GameObjects.Rectangle(t,0,0,Y.gameWidth,Y.gameHeight,0,.3),this.add(this._overlay),this._overlay.x+=Y.gameWidth/2,this._overlay.y+=Y.gameHeight/2,this._overlay.setInteractive(),this._container=new Phaser.GameObjects.Container(this.scene),this.add(this._container),this._container.setAlpha(0),this._container.setScale(Y.scaleX,Y.scaleY),Y.gameWidth>Y.gameHeight&&(this._container.scaleX*=.7,this._container.scaleY*=.7),this._bg=new Phaser.GameObjects.Graphics(t,{fillStyle:{color:16777215,alpha:1}}),this._bg.fillRect(0,0,this.WIDTH,2*Y.gameHeight),this._container.add(this._bg),this._closeButton=new p(this.scene,this.WIDTH-10,10,"texture_atlas_0","btn_close_on","btn_close_off"),this._container.add(this._closeButton),this._closeButton.onDown(this.close,this),this._closeButton.setOrigin(1,0);let e=this._closeButton.getBottomCenter().y+30;this._hubButton=new p(this.scene,0,0,"texture_atlas_0","btn_hub_on","btn_hub_off"),this._container.add(this._hubButton),this._hubButton.setOrigin(0),this._hubButton.onDown(()=>{l.openExternalLink(Y.urls.clashdome+"/token-mining-game/"+Y.playerAccount,!0)},!0);const i=[this._hubButton];Object.keys(l.GAME_TITLES).forEach(t=>{if(t===Y.gameName)return;const e=l.GAME_TITLES[t],n=new y(this.scene,0,0,this.WIDTH-40,t,e);this._container.add(n),i.push(n)});for(let t=0;t<i.length;t++){this.createHorizonalLine().setPosition(0,e);const n=i[t];e+=15,n.setPosition(20,e),n instanceof p?e+=n.displayHeight:n instanceof y&&(e+=n.DisplayHeight),e+=15}this.createHorizonalLine().setPosition(0,e),this.scene.add.tween({targets:this._container,alpha:1,x:{from:this._container.x-50,to:this._container.x},duration:400,ease:Phaser.Math.Easing.Quartic.Out})}close(){this.scene.add.tween({targets:this._container,alpha:0,x:"-=50",duration:400,ease:Phaser.Math.Easing.Quartic.Out,onComplete:()=>{this.destroy(!0)},onCompleteScope:this})}createHorizonalLine(){const t=new Phaser.GameObjects.Graphics(this.scene,{lineStyle:{color:13421772,width:1}});return this._container.add(t),t.lineBetween(0,0,this.WIDTH,0),t}}class x extends Phaser.GameObjects.Container{constructor(t,e,i,n,s,r,a){super(Y.currentScene),this.retryCallback=i,this.args=n,this.retryCallbackScope=s,r=r||"TRY AGAIN",this.enableInputsAfterClosing=a;const o=new Phaser.GameObjects.Graphics(this.scene);o.fillStyle(597301,.85),o.fillRect(0,0,Y.gameWidth,Y.gameHeight),this.add(o),this.scaledItemsContainer=new Phaser.GameObjects.Container(this.scene),this.scaledItemsContainer.x=.5*Y.gameWidth,this.scaledItemsContainer.y=.4*Y.gameHeight,this.scaledItemsContainer.scaleX=Y.scaleX,this.scaledItemsContainer.scaleY=Y.scaleY,this.add(this.scaledItemsContainer),Y.gameWidth>Y.gameHeight&&(this.scaledItemsContainer.scaleX*=.74,this.scaledItemsContainer.scaleY*=.74);const h=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","box_small");this.scaledItemsContainer.add(h);const c=new Phaser.GameObjects.Image(this.scene,0,-175,"texture_atlas_0","logo_cd");this.scaledItemsContainer.add(c);const u=new Phaser.GameObjects.Text(this.scene,0,-38,t,{fontFamily:"Oswald-Medium",fontSize:"40px",color:"#FFFFFF"});u.setOrigin(.5),this.scaledItemsContainer.add(u);const d=new v(this.scene,e);if(this.scaledItemsContainer.add(d),!Y.replayMode){if(l.isPlayerLogged()){const t=new Phaser.GameObjects.Text(this.scene,-230,125,Y.playerAccount,{fontFamily:"Oswald-ExtraLight",fontSize:"22px",color:"#00ddfe"});t.setOrigin(0,.5),t.tint=56830,this.scaledItemsContainer.add(t)}if(null!==Y.duelID&&-1!==Y.duelID){const t=new Phaser.GameObjects.Text(this.scene,230,125,"ID:"+Y.duelID,{fontFamily:"Oswald-ExtraLight",fontSize:"22px",color:"#00ddfe"});t.setOrigin(1,.5),t.tint=56830,this.scaledItemsContainer.add(t)}}if(this.retryCallback||this.enableInputsAfterClosing){const t=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","btn_regular"),e=new Phaser.GameObjects.Text(this.scene,0,0,r,{fontFamily:"Oswald-Medium",fontSize:"36px",color:"#361601"});e.setOrigin(.5);const i=new g(this.scene,t,e,this.onDownTryAgain,this);i.y=230,i.visible=!1,this.scaledItemsContainer.add(i),this.scene.time.delayedCall(500,(function(){i.visible=!0}),[],this)}if(Y.expiredGame){const t=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","btn_regular");t.setOrigin(.5),t.setScale(1.2);const e=new Phaser.GameObjects.Text(this.scene,0,0,"OK",{fontFamily:"Oswald-Medium",fontSize:"40px",color:"#361601"});e.setOrigin(.5);const i=new g(this.scene,t,e,Y.onRestart,this);i.x=0,i.y=220,i.alpha=0,this.scaledItemsContainer.add(i),this.scene.tweens.add({targets:i,alpha:1,ease:Phaser.Math.Easing.Cubic.Out,duration:350,delay:500})}this.moreGamesMenuBtn=new p(this.scene,65*Y.scaleX,65*Y.scaleY,"texture_atlas_0","btn_menu_off","btn_menu_on"),this.moreGamesMenuBtn.onDown(this.openMenu,this),this.moreGamesMenuBtn.setScale(Y.scaleX,Y.scaleY),this.add(this.moreGamesMenuBtn),Y.gameWidth>Y.gameHeight&&(this.moreGamesMenuBtn.scaleX*=.7,this.moreGamesMenuBtn.scaleY*=.7)}onOrientationChange(){this.scaledItemsContainer.scaleX=Y.scaleX,this.scaledItemsContainer.scaleY=Y.scaleY}openMenu(){const t=new _(this.scene);this.add(t)}onDownTryAgain(){this.destroy(),Y.errorLayer=null,b.errorLayer=null,this.retryCallback&&this.retryCallback.apply(this.retryCallbackScope,this.args),this.enableInputsAfterClosing&&Y.enableInputsCallback.apply(Y.gameManagerReference,[])}}class w extends Phaser.GameObjects.Container{constructor(t,e,i){super(t);const n=new Phaser.GameObjects.Graphics(this.scene);n.fillStyle(597301,.85),n.fillRect(0,0,Y.gameWidth,Y.gameHeight),this.add(n),this.scaledItemsContainer=new Phaser.GameObjects.Container(this.scene),this.scaledItemsContainer.x=.5*Y.gameWidth,this.scaledItemsContainer.y=.5*Y.gameHeight,this.scaledItemsContainer.scaleX=Y.scaleX,this.scaledItemsContainer.scaleY=Y.scaleY,this.add(this.scaledItemsContainer),Y.gameWidth>Y.gameHeight&&(this.scaledItemsContainer.scaleX*=.74,this.scaledItemsContainer.scaleY*=.74);const s=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","box_bg");if(this.scaledItemsContainer.add(s),s.setScale(.75),this.titleLabel=new Phaser.GameObjects.Text(this.scene,0,-110,e,{fontFamily:"Oswald-Medium",fontSize:"35px",align:"center",color:"#FFFFFF"}),this.titleLabel.setWordWrapWidth(300),this.titleLabel.setOrigin(.5),this.scaledItemsContainer.add(this.titleLabel),i){const t=new Phaser.GameObjects.Text(this.scene,0,-35,i,{fontFamily:"Oswald-ExtraLight",fontSize:"25px",align:"center",color:"#FFFFFF"});t.setOrigin(.5),this.scaledItemsContainer.add(t)}const r=new Phaser.GameObjects.Image(this.scene,0,65,"texture_atlas_0","load_icon");this.scaledItemsContainer.add(r),this.scene.tweens.add({targets:r,angle:360,ease:Phaser.Math.Easing.Linear,duration:2e3,repeat:-1})}updateTitle(t){this.titleLabel.text=t}}class b{static async saveGameData(t,e){const i=Y.gameName+"-"+t;localStorage.setItem(i,JSON.stringify(e))}static async retrieveGameData(t){const e=Y.gameName+"-"+t;return{error:null,gameData:localStorage.getItem(e),t:12345}}static throwError(t){Y.disableInputsCallback.apply(Y.gameManagerReference,[]),b.errorLayer=new x("ERROR!",t,null,[],null,"CLOSE",!0),Y.currentScene.add.existing(b.errorLayer)}static async mintNFT(t,e,i,n){const s=parseInt(l.GAME_IDS[Y.gameName]);if(Y.disableInputsCallback.apply(Y.gameManagerReference,[]),b.errorLayer&&(b.errorLayer.destroy(),b.errorLayer=null),Y.development)return new Promise((t,e)=>{setTimeout(t,1500)}).then((function(){Y.enableInputsCallback.apply(Y.gameManagerReference,[]);return i.apply(n,[]),{message:"success"}}));if("maze"===Y.gameName){const r=[{account:"clashdometkn",name:"transfer",authorization:[{actor:Y.playerAccount,permission:"active"}],data:{from:Y.playerAccount,to:"clashdomepay",quantity:e,memo:"mint level"}}];try{"wcw"===Y.reactClass.state.wax.type?await Y.reactClass.state.wax.api.transact({actions:r},{blocksBehind:3,expireSeconds:30}):"anchor"===Y.reactClass.state.wax.type&&await Y.reactClass.state.wax.signTransaction({actions:r},{blocksBehind:3,expireSeconds:30})}catch(t){return Y.enableInputsCallback.apply(Y.gameManagerReference,[]),b.errorLayer=new x("ERROR!",t.message,null,[],null,"CLOSE",!0),Y.currentScene.add.existing(b.errorLayer),{error:t.message}}const a=await l.fetchWithTimeout("/api/maze-game/mint-level-nft",{headers:{"Content-type":"application/json"},method:"POST",body:JSON.stringify({nftData:t,userName:Y.playerAccount,gameID:s}),timeout:15e3});if(Y.enableInputsCallback.apply(Y.gameManagerReference,[]),200===a.status)return i.apply(n,[]),{message:"success"};{const t=await a.json();return b.errorLayer=new x("ERROR!",t.error,null,[],null,"CLOSE",!0),Y.currentScene.add.existing(b.errorLayer),{error:t.error}}}}static async getNFTs(t,e,n,s){const r=new(0,i(11).ExplorerApi)(Y.urls.atomic,"atomicassets",{fetch:fetch}),a=await r.getAssets({owner:Y.playerAccount,collection_name:e,schema_name:t});n.apply(s,[a])}static async getNFTsAndImages(t,e,n,s){Y.disableInputsCallback.apply(Y.gameManagerReference,[]);const r=new(0,i(11).ExplorerApi)(Y.urls.atomic,"atomicassets",{fetch:fetch}),a=await r.getAssets({owner:Y.playerAccount,collection_name:e,schema_name:t});Y.currentScene.load.setPath("https://atomichub-ipfs.com/ipfs");for(let t=0;t<a.length;t++)Y.currentScene.load.image(a[t].asset_id.toString(),a[t].data.img);Y.currentScene.load.once("complete",()=>{Y.enableInputsCallback.apply(Y.gameManagerReference,[]),n.apply(s,[a])},b),Y.currentScene.load.start()}static async getStakedNFTs(t,e){b.infoLayer=new w(Y.currentScene,"GETTING STAKED NFTs DATA"),Y.currentScene.add.existing(b.infoLayer);let i=await l.getTableRows(t,e,500,2,"i64",Y.playerAccount,Y.playerAccount,!1,0);return b.infoLayer.destroy(),i.rows}static async getStakedNFTsAndImages(t,e,i,n,s){b.infoLayer=new w(Y.currentScene,"GETTING STAKED NFTs DATA"),Y.currentScene.add.existing(b.infoLayer);let r=await l.getTableRows(t,e,500,2,"i64",Y.playerAccount,Y.playerAccount,!1,0);b.infoLayer.updateTitle("LOADING NFTs IMAGES"),Y.currentScene.load.setPath("https://atomichub-ipfs.com/ipfs");for(let t=0;t<i.length;t++)Y.currentScene.load.image(i[t],i[t]);Y.currentScene.load.once("complete",()=>{Y.enableInputsCallback.apply(Y.gameManagerReference,[]),b.infoLayer.destroy(),n.apply(s,[r.rows])},b),Y.currentScene.load.start()}static async stakeNFTs(t,e,n,s,r,a,o,h){if(Y.disableInputsCallback.apply(Y.gameManagerReference,[]),b.errorLayer&&(b.errorLayer.destroy(),b.errorLayer=null),a&&(b.infoLayer=new w(Y.currentScene,"STAKING NFTs"),Y.currentScene.add.existing(b.infoLayer)),Y.development)return new Promise((t,e)=>{setTimeout(t,2500)}).then((function(){return a&&b.infoLayer.destroy(),o.apply(h),Y.enableInputsCallback.apply(Y.gameManagerReference,[]),{error:null}}));{await l.emulateLatency(250);const c=new(0,i(11).ExplorerApi)(Y.urls.atomic,"atomicassets",{fetch:fetch});let u=await c.getAssets({owner:Y.playerAccount,collection_name:s,schema_name:r});const d=u.length,f=await l.callAction("atomicassets","transfer",{from:Y.playerAccount,to:t,asset_ids:e,memo:n});if(f.error)return a&&b.infoLayer.destroy(),b.errorLayer=new x("ERROR!",f.error,b.stakeNFTs,[t,e,n],b),Y.currentScene.add.existing(b.errorLayer),{error:f.error};{const t=await l.fetchWithTimeout("/api/maze-game/player-has-staked-level/"+Y.playerAccount+"/"+e[0],{timeout:15e3});if(200===t.status){for(u=await c.getAssets({owner:Y.playerAccount,collection_name:s,schema_name:r});d===u.length;)await l.emulateLatency(1500),u=await c.getAssets({owner:Y.playerAccount,collection_name:"clashdomenft",schema_name:r});Y.enableInputsCallback.apply(Y.gameManagerReference,[]),a&&b.infoLayer.destroy(),o.apply(h)}else{a&&b.infoLayer.destroy();const e=await t.json();Y.enableInputsCallback.apply(Y.gameManagerReference,[]),b.errorLayer=new x("ERROR!",e.error),Y.currentScene.add.existing(b.errorLayer)}}}}static async unstakeNFTs(t,e,n,s,r,a){if(Y.disableInputsCallback.apply(Y.gameManagerReference,[]),b.errorLayer&&(b.errorLayer.destroy(),b.errorLayer=null),b.infoLayer=new w(Y.currentScene,"UNSTAKING NFTs"),Y.currentScene.add.existing(b.infoLayer),Y.development)return new Promise((t,e)=>{setTimeout(t,1500)}).then((function(){return b.infoLayer.destroy(),r.apply(a),Y.enableInputsCallback.apply(Y.gameManagerReference,[]),{error:null}}));{const o=new(0,i(11).ExplorerApi)(Y.urls.atomic,"atomicassets",{fetch:fetch});let h=await o.getAssets({owner:Y.playerAccount,collection_name:"clashdomenft",schema_name:s});const c=h.length,u=await l.callAction(t,e,{account:Y.playerAccount,asset_ids:n});if(u.error)return b.infoLayer.destroy(),b.errorLayer=new x("ERROR!",u.error,b.stakeNFTs,[n,r,a],b),Y.currentScene.add.existing(b.errorLayer),{error:u.error};for(await l.emulateLatency(2500),h=await o.getAssets({owner:Y.playerAccount,collection_name:"clashdomenft",schema_name:s});c===h.length;)await l.emulateLatency(2500),h=await o.getAssets({owner:Y.playerAccount,collection_name:"clashdomenft",schema_name:s});b.infoLayer.destroy(),r.apply(a),Y.enableInputsCallback.apply(Y.gameManagerReference,[])}}static async castVote(t){if(Y.development)return new Promise((t,e)=>{setTimeout(t,1200)}).then((function(){E.currentInstance.onVoteCasted()}));{const e=await l.fetchWithTimeout("/api/maze-game/vote-level/"+Y.playerAccount+"/"+Y.landID+"/"+t+"/"+Y.credential,{timeout:15e3});if(200===e.status)E.currentInstance.onVoteCasted();else{const t=await e.json();Y.gameOverLayerOpenDuel&&Y.gameOverLayerOpenDuel.destroy(),Y.gameOverLayerClosedDuel&&Y.gameOverLayerClosedDuel.destroy(),b.errorLayer=new x("ERROR!",t.error),Y.currentScene.add.existing(b.errorLayer)}}}static async getReplayLog(){if(Y.development)return new Promise((t,e)=>{setTimeout(t,500)}).then((function(){let t;switch(Y.gameName){case"candy-fiesta":t=JSON.parse(JSON.stringify(l.CANDY_FIESTA_DEV_LOG));break;case"templok":t=JSON.parse(JSON.stringify(l.TEMPLOK_DEV_LOG));break;case"ringy-dingy":t=JSON.parse(JSON.stringify(l.RINGY_DINGY_DEV_LOG));break;case"endless-siege-2":t=JSON.parse(JSON.stringify(l.ENDLESS_SIEGE_2_DEV_LOG));break;case"rug-pool":t=JSON.parse(JSON.stringify(l.RUG_POOL_DEV_LOG));break;case"maze":t=JSON.parse(JSON.stringify(l.MAZE_DEV_LOG))}const e=t.pop();return Y.replayAccount=e.data.userName,Y.replayScore=e.data.score,Y.replayDuration=Math.floor(e.data.duration/1e3),Y.landID=e.data.landID,t[t.length-1].type===n.SKIP_GAME?Y.gameOverType=a.SKIP:t[t.length-1].type===n.LEAVE_GAME&&(Y.gameOverType=a.QUIT),{actions:t}}));{const t=await fetch("/api/clashdome-game/get-replay-log/"+Y.replayDuelID+"/"+Y.duelReplayPlayerOrder),e=await t.json();if(e.error)return Y.errorLayer=new x("ERROR!",e.error),Y.currentScene.add.existing(Y.errorLayer),{error:!0};{const t=JSON.parse(e.actions);if(t){const e=t.pop();return Y.replayAccount=e.data.userName,Y.replayScore=e.data.score,Y.replayDuration=Math.floor(e.data.duration/1e3),Y.landID=e.data.landID,t[t.length-1].type===n.SKIP_GAME?Y.gameOverType=a.SKIP:t[t.length-1].type===n.LEAVE_GAME&&(Y.gameOverType=a.QUIT),{actions:t}}return Y.errorLayer=new x("ERROR!","No actions found for duel:"+Y.replayDuelID),Y.currentScene.add.existing(Y.errorLayer),{error:!0}}}}static fetchLDevLevelData(){"maze"===Y.gameName&&(Y.levelData={board:[[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2],[3,3,3,2,2,2,2,2,2,2,2,2,1,1,1,1,1,2],[3,3,3,2,1,1,1,1,1,1,2,2,1,2,2,2,1,2],[3,3,3,2,1,2,2,1,2,1,2,2,1,2,3,2,1,2],[3,3,3,2,1,1,1,1,2,1,2,2,1,2,2,2,1,2],[3,3,3,2,1,2,2,1,1,1,2,2,1,1,1,1,1,2],[3,3,3,2,1,2,2,2,2,1,2,2,2,2,2,2,2,2],[3,3,3,2,1,2,2,2,2,1,2,2,3,3,3,3,3,3],[3,3,3,2,1,1,1,1,1,1,1,2,3,3,3,3,3,3],[3,3,3,2,1,2,2,2,2,2,1,2,3,3,3,3,3,3],[3,3,3,2,1,1,1,1,1,1,1,2,3,3,3,3,3,3],[3,3,3,2,1,2,2,2,2,2,1,2,2,2,2,2,3,3],[3,3,3,2,1,2,3,3,3,2,1,1,1,1,1,2,3,3],[3,3,3,2,1,2,2,2,2,2,1,2,2,2,1,2,3,3],[3,3,3,2,1,1,1,1,1,1,1,1,1,1,1,2,3,3],[3,3,3,2,2,2,2,1,2,2,1,2,2,2,1,2,3,3],[3,3,3,3,3,3,2,1,2,2,1,2,2,2,1,2,3,3],[3,3,3,3,3,3,2,1,2,2,1,1,1,1,1,2,3,3],[3,3,3,3,3,3,2,1,2,2,1,2,2,2,1,2,3,3],[3,3,3,3,3,3,2,1,2,2,1,1,1,1,1,2,3,3],[3,3,3,3,3,3,2,1,2,2,2,2,2,2,1,2,3,3],[3,3,3,3,3,3,2,1,2,3,3,3,3,2,1,2,3,3],[3,3,3,3,3,3,2,1,2,3,3,3,3,2,1,2,3,3],[3,3,3,3,3,3,2,1,2,2,2,2,2,2,1,2,3,3],[3,3,3,3,3,3,2,1,1,1,1,1,1,1,1,2,3,3],[3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3]],interactiveItems:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,5,4,4,4,4,0],[0,0,0,0,4,4,4,4,4,4,0,0,4,0,0,0,4,0],[0,0,0,0,4,0,0,4,0,4,0,0,4,0,0,0,4,0],[0,0,0,0,4,4,4,4,0,4,0,0,4,0,0,0,4,0],[0,0,0,0,4,0,0,5,4,4,0,0,7,4,4,4,11,0],[0,0,0,0,4,0,0,0,0,4,0,0,0,0,0,0,0,0],[0,0,0,0,4,0,0,0,0,4,0,0,0,0,0,0,0,0],[0,0,0,0,4,4,4,6,4,4,4,0,0,0,0,0,0,0],[0,0,0,0,4,0,0,0,0,0,4,0,0,0,0,0,0,0],[0,0,0,0,5,4,4,4,4,4,11,0,0,0,0,0,0,0],[0,0,0,0,4,0,0,0,0,0,4,0,0,0,0,0,0,0],[0,0,0,0,4,0,0,0,0,0,4,4,4,4,4,0,0,0],[0,0,0,0,4,0,0,0,0,0,4,0,0,0,4,0,0,0],[0,0,0,0,4,4,4,5,4,4,4,4,4,4,4,0,0,0],[0,0,0,0,0,0,0,4,0,0,4,0,0,0,4,0,0,0],[0,0,0,0,0,0,0,4,0,0,4,0,0,0,4,0,0,0],[0,0,0,0,0,0,0,4,0,0,4,4,4,4,4,0,0,0],[0,0,0,0,0,0,0,4,0,0,4,0,0,0,4,0,0,0],[0,0,0,0,0,0,0,5,0,0,9,4,4,4,4,0,0,0],[0,0,0,0,0,0,0,4,0,0,0,0,0,0,4,0,0,0],[0,0,0,0,0,0,0,4,0,0,0,0,0,0,4,0,0,0],[0,0,0,0,0,0,0,4,0,0,0,0,0,0,4,0,0,0],[0,0,0,0,0,0,0,4,0,0,0,0,0,0,4,0,0,0],[0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],gameOverOptions:{time:180,lifes:2},playerData:{position:{x:13,y:7},iVelocity:null},ghostData:[{position:{x:10,y:12},ghosts:["blinky"],iVelocity:0},{position:{x:24,y:10},ghosts:["blinky","pinky","inky"],iVelocity:0}],editionTimestamp:1676555239464,author:"clashdomeali"})}}class E extends Phaser.GameObjects.Container{constructor(t){if(super(t),E.currentInstance=this,this.x=Y.gameWidth/2,this.y=Y.gameHeight,!Y.hasPlayerVotedLevel){this.votesContainer=new Phaser.GameObjects.Container(this.scene),this.add(this.votesContainer);const t=new Phaser.GameObjects.Image(this.scene,6,0,"texture_atlas_0","votes_cartridge");t.setOrigin(.5,1),this.votesContainer.add(t);const e=new Phaser.GameObjects.Text(this.scene,-140,-25,"RATE THIS LEVEL",{fontFamily:"Oswald-Medium",fontSize:"26px",color:"#FFFFFF"});e.setOrigin(1,.5),this.votesContainer.add(e),this.stars=[];const i=this;for(let t=0;t<5;t++){const e=new Phaser.GameObjects.Image(this.scene,43*t-80,-26,"texture_atlas_0","star_voting_off");e.setInteractive({useHandCursor:!0}),e.on("pointerdown",(function(){i.onDownStar(t)}),this),this.scene.game.device.os.desktop&&(e.on("pointerout",(function(){i.onOutStar()}),this),e.on("pointerover",(function(){i.onOverStar(t)}),this)),this.votesContainer.add(e),this.stars.push(e)}this.votesContainer.y=75,e.visible=!1,this.scene.tweens.add({targets:this.votesContainer,y:0,ease:Phaser.Math.Easing.Cubic.Out,duration:500,delay:1e3,onComplete:function(){e.visible=!0},onCompleteScope:this})}const e=new Phaser.GameObjects.Text(this.scene,Y.gameWidth/2-10,-10,"ID:"+Y.landID,{fontFamily:"Oswald-ExtraLight",fontSize:"20px",color:"#00ddfe"});e.setOrigin(1),this.add(e);const i=new Phaser.GameObjects.Text(this.scene,Y.gameWidth/2-80,45-Y.gameHeight,"Designed by\n"+Y.levelData.author,{fontFamily:"Oswald-ExtraLight",fontSize:"20px",color:"#00ddfe",align:"center"});i.setOrigin(.5),i.setInteractive({useHandCursor:!0}),i.on("pointerdown",this.onDownAuthorLabel,this),this.add(i);let n="circle-avatar-"+Y.levelData.author;this.scene.textures.exists(n)?this.levelAuthorAvatar=new Phaser.GameObjects.Image(this.scene,Y.gameWidth/2-80,125-Y.gameHeight,n):(m.create(this.scene,`circle-avatar-${Y.levelData.author}`,`avatar-${Y.levelData.author}`),n="circle-avatar-"+Y.levelData.author,this.scene.textures.exists(n)?this.levelAuthorAvatar=new Phaser.GameObjects.Image(this.scene,Y.gameWidth/2-80,125-Y.gameHeight,n):this.levelAuthorAvatar=new Phaser.GameObjects.Image(this.scene,Y.gameWidth/2-80,125-Y.gameHeight,"texture_atlas_0","default_avatar")),this.levelAuthorAvatar.setScale(80/this.levelAuthorAvatar.width),this.add(this.levelAuthorAvatar)}onVoteCasted(){this.votesContainer.visible=!1;const t=new Phaser.GameObjects.Text(this.scene,0,-25,"THANKS FOR VOTING!",{fontFamily:"Oswald-ExtraLight",fontSize:"26px",color:"#00ddfe"});t.setOrigin(.5),this.add(t)}onDownStar(t){b.castVote(t+1);for(let t=0;t<5;t++)this.stars[t].disableInteractive();this.votesContainer.alpha=.5}onLevelAuthorAvatarLoaded(){let t="circle-avatar-"+Y.levelData.author;this.scene.textures.exists(t)?this.levelAuthorAvatar=new Phaser.GameObjects.Image(this.scene,Y.gameWidth/2-80,125-Y.gameHeight,t):(m.create(this.scene,`circle-avatar-${Y.levelData.author}`,`avatar-${Y.levelData.author}`),t="circle-avatar-"+Y.levelData.author,this.scene.textures.exists(t)?this.levelAuthorAvatar=new Phaser.GameObjects.Image(this.scene,Y.gameWidth/2-80,125-Y.gameHeight,t):this.levelAuthorAvatar=new Phaser.GameObjects.Image(this.scene,Y.gameWidth/2-80,125-Y.gameHeight,"texture_atlas_0","default_avatar")),this.levelAuthorAvatar.setScale(80/this.levelAuthorAvatar.width),this.add(this.levelAuthorAvatar)}onOutStar(){for(let t=0;t<5;t++)this.stars[t].setFrame("star_voting_off")}onOverStar(t){for(let e=0;e<5;e++)this.stars[e].setFrame(e<=t?"star_voting_on":"star_voting_off")}onDownAuthorLabel(){l.openExternalLink("https://clashdome.io/token-mining-game/"+Y.levelData.author)}}class T extends Phaser.GameObjects.Container{constructor(t,e,i,n,s,r,a){super(t),this.y=50,this.account=e,this.isPlayer=n,this.score=i,this.isWinner=s,this.tie=r,this.gameDuration=a,this.accountLabel=new Phaser.GameObjects.Text(this.scene,0,75,e,{fontFamily:"Oswald-ExtraLight",fontSize:"30px",color:"#FFFFFF"}),this.accountLabel.setOrigin(.5),this.accountLabel.alpha=0,this.accountLabel.setScale(.5),this.add(this.accountLabel);const o="circle-avatar-"+this.account;this.scene.textures.exists(o)?this.avatar=new Phaser.GameObjects.Image(this.scene,0,0,o):this.avatar=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","default_avatar"),this.avatar.setScale(105/this.avatar.width),this.isPlayer||(this.avatar.scaleX=-105/this.avatar.width),this.add(this.avatar),this.isWinner?(this.glow=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","glow"),this.glow.visible=!1,this.addAt(this.glow,0)):this.glow=null,this.scoreLabel=new Phaser.GameObjects.Text(this.scene,0,120,l.formatNumber(this.score),{fontFamily:"Oswald-ExtraLight",fontSize:"36px",color:"#F9EA00"}),this.scoreLabel.setOrigin(.5),this.scoreLabel.alpha=0,this.scoreLabel.setScale(.5),this.add(this.scoreLabel),this.replayButton=new p(this.scene,0,170,"texture_atlas_0","btn_replay_off","btn_replay_on"),this.replayButton.onDown(this.onClickReplay,this),this.replayButton.visible=!1,this.add(this.replayButton),this.scene.sys.updateList.add(this)}preUpdate(){this.isPlayer?Y.playerNick&&(this.accountLabel.text=Y.playerNick):Y.adversaryNick&&(this.accountLabel.text=Y.adversaryNick)}onAvatarsLoaded(){this.avatar.destroy();const t="circle-avatar-"+this.account;this.scene.textures.exists(t)?this.avatar=new Phaser.GameObjects.Image(this.scene,0,0,t):this.avatar=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","default_avatar"),this.avatar.setScale(90/this.avatar.width),this.isPlayer||(this.avatar.scaleX=-90/this.avatar.width),this.add(this.avatar)}activate(){let t=this.isWinner?0:100;this.scene.tweens.add({targets:this.accountLabel,alpha:1,scaleX:1,scaleY:1,ease:Phaser.Math.Easing.Cubic.Out,duration:450,delay:t}),this.isPlayer&&(this.scoreLabel.text=l.formatNumber(this.score)),this.scene.tweens.add({targets:this.scoreLabel,alpha:1,scaleX:1,scaleY:1,ease:Phaser.Math.Easing.Cubic.Out,duration:450,delay:450+t})}onWinnerRevealed(){if(this.scene.tweens.add({targets:this,y:-90,ease:Phaser.Math.Easing.Cubic.Out,duration:450}),this.replayButton.visible=!0,this.replayButton.setScale(0),this.scene.tweens.add({targets:this.replayButton,scaleX:1,scaleY:1,ease:Phaser.Math.Easing.Cubic.Out,duration:350}),this.glow){this.glow.visible=!0,this.glow.alpha=0,this.glow.setScale(.25);const t=this.scene,e=this.glow;this.scene.tweens.add({targets:this.glow,alpha:1,scaleX:.75,scaleY:.75,ease:Phaser.Math.Easing.Cubic.Out,duration:550,onComplete:function(){t.tweens.add({targets:e,scaleX:.6,scaleY:.6,ease:Phaser.Math.Easing.Cubic.Out,duration:1e3,repeat:-1,yoyo:!0})},onCompleteScope:this})}else this.avatar.tint=11184810;if(this.accountLabel.setInteractive({cursor:"pointer"}),this.accountLabel.on("pointerdown",this.onDownAccountLabel,this),this.tie){this.scoreLabel.x=-50;const t=l.formatNumber(this.gameDuration),e=new Phaser.GameObjects.Text(this.scene,this.scoreLabel.width/2-50+10,this.scoreLabel.y+2,"("+t+" seconds)",{fontFamily:"Oswald-ExtraLight",fontSize:"20px",color:"#FF0000"});e.setOrigin(0,.5),e.setColor(this.isWinner?"#00FF00":"#FF0000"),this.add(e)}}onClickReplay(){let t;if(Y.private)if(this.isPlayer){let e=!0===Y.isSecondPlayer?2:1;t=Y.urls.clashdome+"/"+Y.gameName+"/play?replay=true&duel=true&player="+e.toString()+"&id="+Y.duelID}else{let e=!0===Y.isSecondPlayer?1:2;t=Y.urls.clashdome+"/"+Y.gameName+"/play?replay=true&duel=true&player="+e.toString()+"&id="+Y.duelID}else t=this.isPlayer?Y.urls.clashdome+"/"+Y.gameName+"/play?replay=true&duel=true&player=2&id="+Y.duelID:Y.urls.clashdome+"/"+Y.gameName+"/play?replay=true&duel=true&player=1&id="+Y.duelID;l.openExternalLink(t)}onDownAccountLabel(){l.openExternalLink(Y.urls.clashdome+"/profile/"+this.account)}}class S extends Phaser.GameObjects.Container{constructor(t,e,i,n){super(Y.currentScene),S.currentInstance=this,this.playerScore=t,this.tPlayer=e,this.adversaryScore=i,this.tAdversary=n,this.tie=!1,this.playerScore===this.adversaryScore?(this.tie=!0,this.tPlayer<this.tAdversary?this.isPlayerWinner=!0:this.isPlayerWinner=!1):this.playerScore>this.adversaryScore?this.isPlayerWinner=!0:this.isPlayerWinner=!1;const s=new Phaser.GameObjects.Graphics(this.scene);s.fillStyle(597301,.85),s.fillRect(0,0,Y.gameWidth,Y.gameHeight),this.add(s),this.scaledItemsContainer=new Phaser.GameObjects.Container(this.scene),this.scaledItemsContainer.x=.5*Y.gameWidth,this.scaledItemsContainer.y=.5*Y.gameHeight,this.scaledItemsContainer.scaleX=Y.scaleX,this.scaledItemsContainer.scaleY=Y.scaleY,this.add(this.scaledItemsContainer),Y.gameWidth>Y.gameHeight&&(this.scaledItemsContainer.scaleX*=.74,this.scaledItemsContainer.scaleY*=.74);const r=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","box_bg");r.setScale(1.2),this.scaledItemsContainer.add(r),m.create(this.scene,`circle-avatar-${Y.playerAccount}`,`avatar-${Y.playerAccount}`),m.create(this.scene,`circle-avatar-${Y.adversaryAccount}`,`avatar-${Y.adversaryAccount}`),this.winLoseImage=new Phaser.GameObjects.Image(this.scene,0,-240,"texture_atlas_0",this.isPlayerWinner?"you_win":"you_lose"),this.winLoseImage.setScale(1.1).setAlpha(0),this.scaledItemsContainer.add(this.winLoseImage),this.playerInfoContainer=new T(this.scene,Y.playerAccount,this.playerScore,!0,this.isPlayerWinner,this.tie,this.tPlayer),this.playerInfoContainer.x=-155,this.scaledItemsContainer.add(this.playerInfoContainer),this.adversaryInfoContainer=new T(this.scene,Y.adversaryAccount,this.adversaryScore,!1,!this.isPlayerWinner,this.tie,this.tAdversary),this.adversaryInfoContainer.x=155,this.scaledItemsContainer.add(this.adversaryInfoContainer),this.vsImage=new Phaser.GameObjects.Image(this.scene,0,40,"texture_atlas_0","vs"),this.vsImage.alpha=0,this.vsImage.setScale(.5),this.scaledItemsContainer.add(this.vsImage);const a=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","btn_regular"),o=new Phaser.GameObjects.Text(this.scene,0,0,h.GAMEOVER_PLAY_AGAIN,{fontFamily:"Oswald-Medium",fontSize:"28px",color:"#361601"});o.setOrigin(.5),f.track(o),this.playAgainButton=new g(this.scene,a,o,this.onClickPlayAgain,this),this.playAgainButton.x=0,this.playAgainButton.y=250,this.playAgainButton.visible=!1,this.scaledItemsContainer.add(this.playAgainButton),this.isPlayerWinner&&0!==Y.fee&&!Y.private?(this.claimInfoLabel=new Phaser.GameObjects.Text(this.scene,0,this.playAgainButton.y+50,h.GAMEOVER_LAYER_CLOSED_DUEL_CLAIM_WAX,{fontFamily:"Oswald-ExtraLight",fontSize:"20px",color:"#00ddfe"}),this.claimInfoLabel.setOrigin(.5),this.claimInfoLabel.visible=!1,this.scaledItemsContainer.add(this.claimInfoLabel),f.track(this.claimInfoLabel)):this.claimInfoLabel=null,this.moreGamesMenuBtn=new p(this.scene,65*Y.scaleX,65*Y.scaleY,"texture_atlas_0","btn_menu_off","btn_menu_on"),this.moreGamesMenuBtn.visible=!1,this.moreGamesMenuBtn.setScale(Y.scaleX,Y.scaleY),this.moreGamesMenuBtn.onDown(this.openMenu,this),this.add(this.moreGamesMenuBtn),Y.gameWidth>Y.gameHeight&&(this.moreGamesMenuBtn.scaleX*=.7,this.moreGamesMenuBtn.scaleY*=.7);const l=this;this.scene.tweens.add({targets:this.vsImage,alpha:1,scaleX:1.3,scaleY:1.3,ease:Phaser.Math.Easing.Cubic.In,duration:250,delay:500,onComplete:function(){l.scene.tweens.add({targets:l.vsImage,scaleX:1,scaleY:1,ease:Phaser.Math.Easing.Cubic.Out,duration:350,onComplete:function(){S.currentInstance.revealWinner()},onCompleteScope:l})},onCompleteScope:this}),this.playerInfoContainer.activate(),this.adversaryInfoContainer.activate(),"maze"===Y.gameName&&(this.levelRatingCapsule=new E(this.scene),this.add(this.levelRatingCapsule))}onPlayersAvatarsLoaded(){this.playerInfoContainer.onAvatarsLoaded(),this.adversaryInfoContainer.onAvatarsLoaded(),this.levelRatingCapsule&&this.levelRatingCapsule.onLevelAuthorAvatarLoaded()}revealWinner(){if(this.isPlayerWinner){const t=new Phaser.GameObjects.Text(this.scene,0,130,h.GAMEOVER_LAYER_CLOSED_DUEL_YOU_EARNED,{fontFamily:"Oswald-ExtraLight",fontSize:"30px",color:"#FFFFFF"});if(t.setOrigin(.5),this.scaledItemsContainer.add(t),f.track(t),0===Y.fee){const e=new Phaser.GameObjects.Image(this.scene,0,t.y+40,"texture_atlas_0","icon_credits");e.setScale(1.25),this.scaledItemsContainer.add(e);const i=parseFloat(Y.gameFees.reward.replace("CREDITS","")),n=new Phaser.GameObjects.Text(this.scene,-30,e.y,i.toString(),{fontFamily:"Oswald-Medium",fontSize:"32px",color:"#F9EA00"});if(n.setOrigin(1,.5),this.scaledItemsContainer.add(n),Y.playerMultiplier){const t=new Phaser.GameObjects.Text(this.scene,30,e.y,"x"+Y.playerMultiplier,{fontFamily:"Oswald-Medium",fontSize:"32px",color:"#00ddfe"});t.setOrigin(0,.5),this.scaledItemsContainer.add(t)}}else{let e;e=-1===Y.feeStr.indexOf("CDJIGO")?(1.9*Y.fee).toString()+" WAX":(1.4*Y.fee).toString()+" CDJIGO";const i=new Phaser.GameObjects.Text(this.scene,0,t.y+40,e,{fontFamily:"Oswald-Medium",fontSize:"32px",color:"#F9EA00"});i.setOrigin(.5),this.scaledItemsContainer.add(i)}}this.scene.tweens.add({targets:this.winLoseImage,alpha:{from:0,to:1},ease:Phaser.Math.Easing.Sine.InOut,duration:500}),Y.private||(this.playAgainButton.visible=!0,this.playAgainButton.alpha=0,this.playAgainButton.setScale(0),this.scene.tweens.add({targets:this.playAgainButton,alpha:1,scaleX:1,scaleY:1,ease:Phaser.Math.Easing.Sine.Out,duration:350})),this.moreGamesMenuBtn.visible=!0,this.moreGamesMenuBtn.alpha=0,this.moreGamesMenuBtn.setScale(0),this.scene.tweens.add({targets:[this.moreGamesMenuBtn],alpha:1,scaleX:Y.scaleX,scaleY:Y.scaleY,ease:Phaser.Math.Easing.Cubic.Out,duration:250}),this.claimInfoLabel&&(this.claimInfoLabel.visible=!0,this.claimInfoLabel.alpha=0,this.scene.tweens.add({targets:[this.claimInfoLabel],alpha:1,scaleX:1,scaleY:Y.scaleY,ease:Phaser.Math.Easing.Cubic.Out,duration:250})),this.scene.tweens.add({targets:this.vsImage,y:-90,ease:Phaser.Math.Easing.Cubic.Out,duration:450}),this.playerInfoContainer.onWinnerRevealed(),this.adversaryInfoContainer.onWinnerRevealed()}onClickPlayAgain(){Y.onRestart()}openMenu(){const t=new _(this.scene);this.add(t)}}class A extends Phaser.GameObjects.Container{constructor(){super(Y.currentScene);const t=new Phaser.GameObjects.Graphics(this.scene);t.fillStyle(597301,.85),t.fillRect(0,0,Y.gameWidth,Y.gameHeight),this.add(t),this.scaledItemsContainer=new Phaser.GameObjects.Container(this.scene),this.scaledItemsContainer.x=.5*Y.gameWidth,this.scaledItemsContainer.y=.5*Y.gameHeight,this.scaledItemsContainer.scaleX=Y.scaleX,this.scaledItemsContainer.scaleY=Y.scaleY,this.add(this.scaledItemsContainer),Y.gameWidth>Y.gameHeight&&(this.scaledItemsContainer.scaleX*=.74,this.scaledItemsContainer.scaleY*=.74);const e=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","box_bg");this.scaledItemsContainer.add(e),e.setScale(1.2);const i=new Phaser.GameObjects.Image(this.scene,0,-330,"texture_atlas_0","logo_cd");i.alpha=0,this.scaledItemsContainer.add(i),this.scene.add.tween({targets:i,alpha:1,duration:400,ease:Phaser.Math.Easing.Cubic.Out});const n=new Phaser.GameObjects.Text(this.scene,0,-150,Y.private?"WAITING FOR RIVAL'S SCORE":h.GAMEOVER_LAYER_OPEN_DUEL_GAMEOVER,{fontFamily:"Oswald-Medium",fontSize:Y.private?"50px":"70px",color:"#FFFFFF"});n.setOrigin(.5),this.scaledItemsContainer.add(n),f.track(n);const s=new Phaser.GameObjects.Text(this.scene,0,-65,h.GAMEOVER_LAYER_OPEN_DUEL_SCORE_SUBMITTED,{fontFamily:"Oswald-ExtraLight",fontSize:"30px",color:"#00ddfe"});s.setOrigin(.5),s.tint=56830,this.scaledItemsContainer.add(s),f.track(s);const r=new Phaser.GameObjects.Graphics(this.scene);r.fillStyle(1004659),r.fillRoundedRect(-140,-37.5,280,75,15),r.y=5,this.scaledItemsContainer.add(r);const a=new Phaser.GameObjects.Text(this.scene,0,r.y,l.formatNumber(Y.score),{fontFamily:"Oswald-Medium",fontSize:"44px",color:"#fbde00"});if(a.setOrigin(.5),this.scaledItemsContainer.add(a),Y.private){const t=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","btn_buy"),e=new Phaser.GameObjects.Text(this.scene,0,0,"OK",{fontFamily:"Oswald-Medium",fontSize:"34px",color:"#361601"});e.setOrigin(.5),e.tint=3544577,f.track(e);const i=new g(this.scene,t,e,this.onClickOK,this);i.x=0,i.y=180,i.setScale(1.25),this.scaledItemsContainer.add(i)}else{const t=new Phaser.GameObjects.Text(this.scene,0,95,h.GAMEOVER_LAYER_OPEN_DUEL_WAITING,{fontFamily:"Oswald-ExtraLight",fontSize:"26px",color:"#00ddfe",align:"center"});t.setOrigin(.5),this.scaledItemsContainer.add(t),f.track(t);const e=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","btn_regular"),i=new Phaser.GameObjects.Text(this.scene,0,0,h.GAMEOVER_PLAY_AGAIN,{fontFamily:"Oswald-Medium",fontSize:"28px",color:"#361601"});i.setOrigin(.5),i.tint=3544577,f.track(i);const n=new g(this.scene,e,i,this.onClickPlayAgain,this);n.x=0,n.y=230,this.scaledItemsContainer.add(n)}const o=new p(this.scene,65*Y.scaleX,65*Y.scaleY,"texture_atlas_0","btn_menu_off","btn_menu_on");o.alpha=0,o.onDown(this.openMenu,this),this.add(o),Y.gameWidth>Y.gameHeight&&(o.scaleX*=.7,o.scaleY*=.7),"maze"===Y.gameName&&(this.levelRatingCapsule=new E(this.scene),this.add(this.levelRatingCapsule)),this.scene.tweens.add({targets:[o],alpha:1,scaleX:1,scaleY:Y.scaleY,ease:Phaser.Math.Easing.Cubic.Out,duration:250})}onPlayersAvatarsLoaded(){this.levelRatingCapsule&&this.levelRatingCapsule.onLevelAuthorAvatarLoaded()}onClickPlayAgain(){Y.onRestart()}onClickOK(){l.openExternalLink(Y.urls.clashdome+"/token-mining-game/"+Y.playerAccount,!0)}openMenu(){const t=new _(this.scene);this.add(t)}}class O extends Phaser.GameObjects.Container{constructor(){super(Y.currentScene);const t=new Phaser.GameObjects.Graphics(this.scene);t.fillStyle(597301,.85),t.fillRect(0,0,Y.gameWidth,Y.gameHeight),this.add(t),this.scaledItemsContainer=new Phaser.GameObjects.Container(this.scene),this.scaledItemsContainer.x=.5*Y.gameWidth,this.scaledItemsContainer.y=.4*Y.gameHeight,this.scaledItemsContainer.scaleX=Y.scaleX,this.scaledItemsContainer.scaleY=Y.scaleY,this.add(this.scaledItemsContainer),Y.gameWidth>Y.gameHeight&&(this.scaledItemsContainer.scaleX*=.74,this.scaledItemsContainer.scaleY*=.74);const e=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","box_small");this.scaledItemsContainer.add(e);const i=new Phaser.GameObjects.Image(this.scene,0,-175,"texture_atlas_0","logo_cd");let n;this.scaledItemsContainer.add(i),n=Y.private?1===Y.numActions?"CHALLENGE ACCEPTED":"CHALLENGE RESTORED":"SESSION RESTORED";const s=new Phaser.GameObjects.Text(this.scene,0,-40,n,{fontFamily:"Oswald-Medium",fontSize:"36px",color:"#FFFFFF"});let r;s.setOrigin(.5),this.scaledItemsContainer.add(s),f.track(s);let a=new Date(Date.parse(Y.date)).toLocaleString();r=-1===Y.duelID?h.RESTORED_SESSION_LAYER_SEED_MSG_1:h.RESTORED_SESSION_LAYER_SEED_MSG_2;const o=new Phaser.GameObjects.Text(this.scene,0,60,r,{fontFamily:"Oswald-ExtraLight",fontSize:"28px",color:"#00ddfe",align:"center"});if(o.setOrigin(.5),this.scaledItemsContainer.add(o),f.track(o,{date:a,duelId:Y.duelID}),Y.private){m.create(this.scene,`circle-avatar-${Y.adversaryAccount}`,`avatar-${Y.adversaryAccount}`);const t="circle-avatar-"+Y.adversaryAccount;this.scene.textures.exists(t)?this.adversaryAvatar=new Phaser.GameObjects.Image(this.scene,0,120,t):this.adversaryAvatar=new Phaser.GameObjects.Image(this.scene,0,120,"texture_atlas_0","default_avatar"),this.adversaryAvatar.setScale(45/this.adversaryAvatar.width),this.scaledItemsContainer.add(this.adversaryAvatar);Y.adversaryNick?Y.adversaryNick:Y.adversaryAccount;this.adversaryLabel=new Phaser.GameObjects.Text(this.scene,30,120,Y.adversaryNick,{fontFamily:"Oswald-Medium",fontSize:"22px",color:"#FFFFFF"}),this.adversaryLabel.setOrigin(0,.5),this.scaledItemsContainer.add(this.adversaryLabel);const e=(7.5+this.adversaryLabel.width)/2;this.adversaryAvatar.x=-e,this.adversaryLabel.x=30-e}const l=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","btn_regular"),c=new Phaser.GameObjects.Text(this.scene,0,0,h.RESTORED_SESSION_LAYER_CONTINUE,{fontFamily:"Oswald-Medium",fontSize:"36px",color:"#361601"});c.setOrigin(.5),f.track(c),this.continueButton=new g(this.scene,l,c,this.onClickContinueBtn,this),this.continueButton.y=230,this.scaledItemsContainer.add(this.continueButton),this.loadIcon=new Phaser.GameObjects.Image(this.scene,0,this.continueButton.y,"texture_atlas_0","load_icon"),this.loadIcon.visible=!1,this.scaledItemsContainer.add(this.loadIcon),this.scene.tweens.add({targets:this.loadIcon,angle:360,ease:Phaser.Math.Easing.Linear,duration:2e3,repeat:-1})}onAdversaryAvatarLoaded(){m.create(this.scene,`circle-avatar-${Y.adversaryAccount}`,`avatar-${Y.adversaryAccount}`),this.adversaryAvatar&&this.adversaryAvatar.destroy();const t="circle-avatar-"+Y.adversaryAccount;if(this.scene.textures.exists(t)?this.adversaryAvatar=new Phaser.GameObjects.Image(this.scene,0,120,t):this.adversaryAvatar=new Phaser.GameObjects.Image(this.scene,0,120,"texture_atlas_0","default_avatar"),this.adversaryAvatar.setScale(45/this.adversaryAvatar.width),this.scaledItemsContainer.add(this.adversaryAvatar),this.adversaryLabel){Y.adversaryNick&&(this.adversaryLabel.text=Y.adversaryNick);const t=(7.5+this.adversaryLabel.width)/2;this.adversaryAvatar.x=-t,this.adversaryLabel.x=30-t}}onClickContinueBtn(){this.continueButton.visible=!1,this.loadIcon.visible=!0,Y.continueRestoredGame()}}class C extends Phaser.GameObjects.Container{constructor(t){super(t);const e=new Phaser.GameObjects.Graphics(this.scene);e.fillStyle(597301,.85),e.fillRect(0,0,Y.gameWidth,Y.gameHeight),this.add(e),this.scaledItemsContainer=new Phaser.GameObjects.Container(this.scene),this.scaledItemsContainer.x=.5*Y.gameWidth,this.scaledItemsContainer.y=.5*Y.gameHeight,this.scaledItemsContainer.scaleX=Y.scaleX,this.scaledItemsContainer.scaleY=Y.scaleY,this.add(this.scaledItemsContainer),Y.gameWidth>Y.gameHeight&&(this.scaledItemsContainer.scaleX*=.74,this.scaledItemsContainer.scaleY*=.74);const i=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","box_bg");this.scaledItemsContainer.add(i),i.setScale(1.2);const n=new Phaser.GameObjects.Text(this.scene,0,-150,h.WAITING_LAYER_GAME_OVER,{fontFamily:"Oswald-Medium",fontSize:"70px",color:"#FFFFFF"});n.setOrigin(.5),this.scaledItemsContainer.add(n),f.track(n);const s=new Phaser.GameObjects.Image(this.scene,0,155,"texture_atlas_0","load_icon");this.scaledItemsContainer.add(s),this.scene.tweens.add({targets:s,angle:360,ease:Phaser.Math.Easing.Linear,duration:2e3,repeat:-1});const r=new Phaser.GameObjects.Text(this.scene,0,-5,h.WAITING_LAYER_VALIDATING,{fontFamily:"Oswald-ExtraLight",fontSize:"40px",color:"#00ddfe"});r.setOrigin(.5),this.scaledItemsContainer.add(r),f.track(r),Y.hasBoosterBeenDiscarded||(this.alpha=0,this.scene.tweens.add({targets:this,alpha:1,ease:Phaser.Math.Easing.Cubic.Out,duration:500}))}}class P extends Phaser.GameObjects.Container{constructor(){super(Y.currentScene);const t=new Phaser.GameObjects.Graphics(this.scene);t.fillStyle(597301,.85),t.fillRect(0,0,Y.gameWidth,Y.gameHeight),this.add(t),this.scaledItemsContainer=new Phaser.GameObjects.Container(this.scene),this.scaledItemsContainer.x=.5*Y.gameWidth,this.scaledItemsContainer.y=.5*Y.gameHeight,this.scaledItemsContainer.scaleX=Y.scaleX,this.scaledItemsContainer.scaleY=Y.scaleY,this.add(this.scaledItemsContainer),Y.gameWidth>Y.gameHeight&&(this.scaledItemsContainer.scaleX*=.74,this.scaledItemsContainer.scaleY*=.74);const e=new Phaser.GameObjects.Image(this.scene,0,-110,"texture_atlas_0","box_small");this.scaledItemsContainer.add(e);const i=new Phaser.GameObjects.Image(this.scene,0,-285,"texture_atlas_0","logo_cd");this.scaledItemsContainer.add(i);const n=new Phaser.GameObjects.Text(this.scene,0,-150,h.GAMEOVER_LAYER_REPLAY_GAME_ENDED,{fontFamily:"Oswald-Medium",fontSize:"40px",color:"#FFFFFF"});if(n.setOrigin(.5),this.scaledItemsContainer.add(n),f.track(n),Y.gameOverType!==a.FINISH){const t=new Phaser.GameObjects.Text(this.scene,0,-100,Y.gameOverType===a.SKIP?h.GAMEOVER_LAYER_REPLAY_PLAYER_SKIPPED:h.GAMEOVER_LAYER_REPLAY_PLAYER_QUIT,{fontFamily:"Oswald-ExtraLight",fontSize:"30px",color:"#0BA1FF"});t.setOrigin(.5),this.scaledItemsContainer.add(t),f.track(t)}const s=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","btn_regular"),r=new Phaser.GameObjects.Text(this.scene,0,0,h.GAMEOVER_LAYER_REPLAY_RESTART,{fontFamily:"Oswald-Medium",fontSize:"32px",color:"#361601"});r.setOrigin(.5),f.track(r);const o=new g(this.scene,s,r,Y.restartReplay,this);o.x=0,o.y=-30,o.alpha=0,this.scaledItemsContainer.add(o),this.moreGamesMenuBtn=new p(this.scene,65*Y.scaleX,65*Y.scaleY,"texture_atlas_0","btn_menu_off","btn_menu_on"),this.moreGamesMenuBtn.onDown(this.openMenu,this),this.moreGamesMenuBtn.setScale(Y.scaleX,Y.scaleY),this.add(this.moreGamesMenuBtn),Y.gameWidth>Y.gameHeight&&(this.moreGamesMenuBtn.scaleX*=.7,this.moreGamesMenuBtn.scaleY*=.7),this.alpha=0,this.scene.tweens.add({targets:this,alpha:1,ease:Phaser.Math.Easing.Cubic.Out,duration:500,onComplete:()=>{this.scene.tweens.add({targets:o,alpha:1,ease:Phaser.Math.Easing.Cubic.Out,duration:750})},onCompleteScope:this})}openMenu(){const t=new _(this.scene);this.add(t)}}class L extends Phaser.GameObjects.Container{constructor(){super(Y.currentScene);const t=new Phaser.GameObjects.Graphics(this.scene);t.fillStyle(597301,.5),t.fillRect(0,0,Y.gameWidth,Y.gameHeight),this.add(t),this.skipMenu=new Phaser.GameObjects.Container(this.scene),this.add(this.skipMenu),this.skipMenu.x=Y.gameWidth,this.skipMenu.y=20*Y.scaleY,this.skipMenu.scaleX=Y.scaleX,this.skipMenu.scaleY=Y.scaleY;const e=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","tab_skip");e.setOrigin(0),this.skipMenu.add(e);const i=new Phaser.GameObjects.Text(this.scene,25,11,h.SKIP_DUEL_LAYER_ALREADY_BEAT,{fontFamily:"Oswald-Medium",fontSize:"20px",color:"#FFFFFF",align:"center"});this.skipMenu.add(i),f.track(i);const n=new p(this.scene,5,15,"texture_atlas_0","btn_skip_off","btn_skip_on");n.onUp(this.onUpClose,this),this.skipMenu.add(n);const s=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","btn_skip"),r=new Phaser.GameObjects.Text(this.scene,0,0,h.SKIP_DUEL_LAYER_SKIP,{fontFamily:"Oswald-Medium",fontSize:"24px",color:"#361601",align:"center"});r.setOrigin(.5),f.track(r);const a=new g(this.scene,s,r,this.onSkipDown,this);a.x=255,a.y=40,this.skipMenu.add(a),this.scene.tweens.add({targets:this.skipMenu,x:Y.gameWidth-302*Y.scaleX,ease:Phaser.Math.Easing.Cubic.Out,duration:500}),this.scene.sys.updateList.add(this)}preUpdate(){Y.isSkipPossible?this.alpha=1:this.alpha=.65}onUpClose(){Y.isSkipPossible&&Y.removeSkipDuelLayer()}onSkipDown(){Y.isSkipPossible&&Y.onGameOver(null,!1,!0)}}class R extends Phaser.GameObjects.Container{constructor(){super(Y.currentScene),this.f=0;const t=new Phaser.GameObjects.Graphics(this.scene);t.fillStyle(597301,.85),t.fillRect(0,0,Y.gameWidth,Y.gameHeight),this.add(t),this.scaledItemsContainer=new Phaser.GameObjects.Container(this.scene),this.scaledItemsContainer.x=.5*Y.gameWidth,this.scaledItemsContainer.y=.5*Y.gameHeight,this.scaledItemsContainer.scaleX=Y.scaleX,this.scaledItemsContainer.scaleY=Y.scaleY,this.add(this.scaledItemsContainer),Y.gameWidth>Y.gameHeight&&(this.scaledItemsContainer.scaleX*=.65,this.scaledItemsContainer.scaleY*=.65);const e=new Phaser.GameObjects.Image(this.scene,0,35,"texture_atlas_0","box_big");e.setScale(1.213),this.scaledItemsContainer.add(e);const i=new Phaser.GameObjects.Image(this.scene,0,-375,"texture_atlas_0","logo_cd");this.scaledItemsContainer.add(i);const n=new Phaser.GameObjects.Text(this.scene,0,-210,h.BOOSTER_LAYER_YOUR_CURRENT_SCORE,{fontFamily:"Oswald-ExtraLight",fontSize:"24px",color:"#00ddfe"});n.setOrigin(.5),this.scaledItemsContainer.add(n),f.track(n);const r=new Phaser.GameObjects.Graphics(this.scene);r.fillStyle(1004659),r.fillRoundedRect(-140,-37.5,280,75,15),r.y=-145,this.scaledItemsContainer.add(r);const a=new Phaser.GameObjects.Text(this.scene,0,r.y,l.formatNumber(Y.score),{fontFamily:"Oswald-Medium",fontSize:"44px",color:"#fbde00"});a.setOrigin(.5),this.scaledItemsContainer.add(a);const o=parseInt(l.GAME_IDS[Y.gameName]),c=new Phaser.GameObjects.Image(this.scene,0,100,"texture_atlas_0","banner_booster_"+o);this.scaledItemsContainer.add(c);const u=new Phaser.GameObjects.Text(this.scene,0,218,l.BOOSTER_DESCRIPTION[Y.gameName],{fontFamily:"Oswald-ExtraLight",fontSize:"28px",color:"#00ddfe"});u.setOrigin(.5),this.scaledItemsContainer.add(u);const d=new Phaser.GameObjects.Image(this.scene,175,50,"texture_atlas_0","logo booster");this.scaledItemsContainer.add(d),this.scene.tweens.add({targets:d,scaleX:1.05,scaleY:1.05,ease:Phaser.Math.Easing.Cubic.Out,duration:1e3,yoyo:!0,repeat:-1});let p=l.getBoosterFee();p=Math.floor(100*p)/100;const m=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","btn_buy"),v=new Phaser.GameObjects.Text(this.scene,-15,0,p.toString(),{fontFamily:"Oswald-Medium",fontSize:"22px",color:"#361601"});v.setOrigin(.5),this.buyBoosterButton=new g(this.scene,m,v,this.onClickBuyBooster,this),this.buyBoosterButton.x=d.x,this.buyBoosterButton.y=140,this.scaledItemsContainer.add(this.buyBoosterButton);let y=0===Y.fee?s.JIGO:s.LUDIO;this.notEnoughTokenLabel=new Phaser.GameObjects.Text(this.scene,this.buyBoosterButton.x,this.buyBoosterButton.y,"Your "+y+" balance\n is too low.",{fontFamily:"Oswald-Medium",fontSize:"24px",color:"#FFFFFF",align:"center"}),this.notEnoughTokenLabel.setOrigin(.5),this.notEnoughTokenLabel.visible=!1,this.scaledItemsContainer.add(this.notEnoughTokenLabel),(0===Y.fee?Y.jigoBalance:Y.ludioBalance)?this.checkCDTokenBalance():(this.buyBoosterButton.disable(),this.buyBoosterButton.alpha=.35);const _=new Phaser.GameObjects.Image(this.scene,25,0,"texture_atlas_0",0===Y.fee?"jigo_icon":"ludioIcon");this.buyBoosterButton.add(_),this.loadIcon=new Phaser.GameObjects.Image(this.scene,this.buyBoosterButton.x,this.buyBoosterButton.y,"texture_atlas_0","load_icon"),this.loadIcon.visible=!1,this.scaledItemsContainer.add(this.loadIcon),this.scene.tweens.add({targets:this.loadIcon,angle:360,ease:Phaser.Math.Easing.Linear,duration:2e3,repeat:-1});const x=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","btn_regular"),w=new Phaser.GameObjects.Text(this.scene,0,0,h.BOOSTER_LAYER_SKIP,{fontFamily:"Oswald-Medium",fontSize:"32px",color:"#361601"});w.setOrigin(.5),f.track(w);const b=new g(this.scene,x,w,this.onClickSkip,this);b.x=0,b.y=320,this.scaledItemsContainer.add(b),this.alpha=0,this.scene.tweens.add({targets:this,alpha:1,ease:Phaser.Math.Easing.Cubic.Out,duration:500}),this.scene.sys.updateList.add(this)}preUpdate(){this.loadIcon.visible||(this.f++,90===this.f&&(this.f=0,(async()=>{0!==Y.fee?Y.ludioBalance=await l.getCDTokenBalance(s.LUDIO):Y.jigoBalance=await l.getCDTokenBalance(s.JIGO)})(),this.checkCDTokenBalance()))}checkCDTokenBalance(){let t=l.getBoosterFee();t=Math.floor(100*t)/100,(0===Y.fee?Y.jigoBalance:Y.ludioBalance)>=t?(this.buyBoosterButton.enable(),this.buyBoosterButton.alpha=1,this.buyBoosterButton.visible=!0,this.notEnoughTokenLabel.visible=!1):(this.buyBoosterButton.visible=!1,this.notEnoughTokenLabel.visible=!0)}onClickSkip(){Y.errorLayer||Y.inputsDisabled||Y.discardBooster()}onClickBuyBooster(){Y.inputsDisabled||(this.buyBoosterButton.visible=!1,this.loadIcon.visible=!0,Y.buyBooster())}}class I extends Phaser.GameObjects.Container{constructor(){super(Y.currentScene);const t=new Phaser.GameObjects.Graphics(this.scene);t.fillStyle(461639),t.fillRect(0,0,Y.gameWidth,Y.gameHeight),this.add(t),this.scaledItemsContainer=new Phaser.GameObjects.Container(this.scene),this.scaledItemsContainer.x=.5*Y.gameWidth,this.scaledItemsContainer.y=.5*Y.gameHeight,this.scaledItemsContainer.scaleX=Y.scaleX,this.scaledItemsContainer.scaleY=Y.scaleY,this.add(this.scaledItemsContainer);const e=new Phaser.GameObjects.Image(this.scene,0,0,"arcade_base");this.scaledItemsContainer.add(e),e.setScale(.9),e.y=120;const i=new Phaser.GameObjects.Image(this.scene,0,0,"arcade_base");this.scaledItemsContainer.add(i),i.setScale(e.scale),i.setFlipX(!0),i.y=e.y;const n=new Phaser.GameObjects.Image(this.scene,0,0,"arcade_btns");this.scaledItemsContainer.add(n),n.setScale(e.scale),n.setPosition(0,160);const s=new Phaser.GameObjects.Image(this.scene,0,-75,"game_logo");s.setScale(e.scale),this.scaledItemsContainer.add(s),this.progressBarBg=new Phaser.GameObjects.Graphics(this.scene,{fillStyle:{color:16777215,alpha:.1}}),this.progressBarBg.fillRect(0,0,10,275).setAngle(-90).setPosition(-137.5,20),this.scaledItemsContainer.add(this.progressBarBg),this.progressBar=new Phaser.GameObjects.Graphics(this.scene),this.progressBar.fillGradientStyle(16711832,16711832,56319,56319),this.progressBar.fillRect(0,0,10,275),this.progressBar.angle=this.progressBarBg.angle,this.progressBar.x=this.progressBarBg.x,this.progressBar.y=this.progressBarBg.y,this.progressBar.scaleY=0,this.scaledItemsContainer.add(this.progressBar),Y.replayMode&&(this.replay=new Phaser.GameObjects.Text(this.scene,this.progressBar.x,this.progressBar.y+15,h.PRELOADER_LAYER_REPLAY,{fontFamily:"Arial",fontSize:"25px",color:"#2BB0FF"}),this.scaledItemsContainer.add(this.replay),f.track(this.replay))}updateProgressbar(t){this.progressBar.scaleY=t,t>=1&&!this.label&&(this.progressBarBg.setVisible(!1),this.progressBar.setVisible(!1),this.label=new Phaser.GameObjects.Text(this.scene,this.progressBar.x+137.5,this.progressBar.y-5,h.PRELOAD_LAYER_COMMUNICATING,{fontFamily:"Arial",fontSize:"25px",color:"#2BB0FF"}),this.label.setOrigin(.5),this.scaledItemsContainer.add(this.label),f.track(this.label),this.scene.tweens.add({targets:this.label,alpha:.25,ease:Phaser.Math.Easing.Cubic.Out,duration:350,repeat:-1,yoyo:!0}))}onOrientationChange(){this.scaledItemsContainer.scaleX=Y.scaleX,this.scaledItemsContainer.scaleY=Y.scaleY}}class M extends Phaser.GameObjects.Container{constructor(t){super(Y.currentScene);const e=new Phaser.GameObjects.Graphics(this.scene);e.fillStyle(597301,.5),e.fillRect(0,0,Y.gameWidth,Y.gameHeight),this.add(e),this.highScoreContainer=new Phaser.GameObjects.Container(this.scene),this.add(this.highScoreContainer),this.highScoreContainer.x=0,this.highScoreContainer.y=20*Y.scaleY,this.highScoreContainer.scaleX=Y.scaleX,this.highScoreContainer.scaleY=Y.scaleY;const i=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","tab_skip");let n;i.setOrigin(0),i.scaleX=-1,this.highScoreContainer.add(i),n=t?h.WEEKLY_HIGHSCORE:h.ALL_TIME_HIGHSCORE;const s=new Phaser.GameObjects.Text(this.scene,-275,10,n,{fontFamily:"Oswald-Medium",fontSize:"24px",color:"#FFFFFF",align:"center"});this.highScoreContainer.add(s),f.track(s),this.scoreLabel=new Phaser.GameObjects.Text(this.scene,s.x+s.width/2,40,l.formatNumber(Y.score),{fontFamily:"Oswald-Medium",fontSize:"24px",color:"#fff448",align:"center"}),this.scoreLabel.setOrigin(.5,0),this.highScoreContainer.add(this.scoreLabel),this.scene.tweens.add({targets:this.highScoreContainer,x:302*Y.scaleX,ease:Phaser.Math.Easing.Cubic.Out,duration:500});const r=this;this.scene.time.delayedCall(3500,(function(){r.scene.tweens.add({targets:r.highScoreContainer,x:0,ease:Phaser.Math.Easing.Cubic.Out,duration:500,onComplete:function(){Y.highScoreLayer=null,r.destroy()},onCompleteScope:r})}),[],this),this.scene.sys.updateList.add(this)}preUpdate(){this.scoreLabel.text=l.formatNumber(Y.score)}}class D extends Phaser.GameObjects.Container{constructor(t){super(Y.currentScene),this.scaleX=Y.scaleX,this.scaleY=Y.scaleY;let e="up"===t.position?0:Y.gameHeight-D.BAR_HEIGHT;const i=t.backgroundColor,n=t.gradient,s=t.fontColor;if(this.y=e*Y.scaleY,"none"===n){const t=new Phaser.GameObjects.Graphics(this.scene);t.fillStyle(i),t.fillRect(0,0,Y.gameWidth,D.BAR_HEIGHT),this.add(t)}else if("vertical"===n){const e=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","white-gradient");e.scaleX=Y.gameWidth/50,"up"===t.position?(e.setOrigin(0,1),e.scaleY=-D.BAR_HEIGHT/50):(e.setOrigin(0),e.scaleY=D.BAR_HEIGHT/50),e.tint=i,this.add(e)}const r=new Phaser.GameObjects.Text(this.scene,130*Y.scaleX,0,Y.replayAccount,{fontFamily:"Oswald-Medium",fontSize:"30px",color:s,align:"center"});r.setInteractive({cursor:"pointer"}),r.on("pointerdown",this.onDownAccountLabel,this),this.add(r);const a=new Phaser.GameObjects.Text(this.scene,300*Y.scaleX,0,h.REPLAY_INFO_LAYER_SCORE,{fontFamily:"Oswald-Medium",fontSize:"30px",color:s,align:"center"});this.add(a),f.track(a,{score:l.formatNumber(Y.replayScore)});const o=l.formatTime(Math.floor(Y.replayDuration));let c;c=Y.replayDuration>3600?o.h+"h "+o.m+"m "+o.s+"s":Y.replayDuration>60?o.m+"m "+o.s+"s":o.s+"s";const u=new Phaser.GameObjects.Text(this.scene,510*Y.scaleX,0,h.REPLAY_INFO_LAYER_DURATION,{fontFamily:"Oswald-Medium",fontSize:"30px",color:s,align:"center"});this.add(u),f.track(u,{duration:c})}onDownAccountLabel(){window.open(Y.urls.clashdome+"/profile/"+Y.replayAccount)}}D.BAR_HEIGHT=42;var k=i(69);class N{constructor(){this.scoreSentTimeStamp=0}init(){let t;t=-1!==window.location.hostname.indexOf("localhost")||-1!==window.location.hostname.indexOf("127")?"ws://localhost:3001":"wss://"+window.location.hostname+":443",this.client=new k.Client(t)}async joinOrCreateRoom(t,e){try{try{this.room=await this.client.joinById(t,{roomId:t,username:e})}catch(i){this.room=await this.client.create("lobby",{roomId:t,username:e})}this.room.onMessage(N.PLAYER_JOINED,t=>{t!==e&&Y.onAdversaryJoined()}),this.room.onMessage(N.GAME_OVER,t=>{let i=JSON.parse(t);i.username!==e&&Y.onAdversaryGameOverReceived(i)}),this.room.onMessage(N.SCORE,t=>{let i=JSON.parse(t);i.username!==e&&Y.onAdversaryScoreReceived(i.score)})}catch(t){console.log(t)}}async sendMessage(t,e){if(t===N.SCORE){const t=(new Date).getTime();t-this.scoreSentTimeStamp>12e3&&(this.scoreSentTimeStamp=t,this.room.send(N.SCORE,e))}else this.room.send(t,e)}}N.LOBBY="lobby",N.GAME_OVER="game_over",N.PLAYER_JOINED="joined",N.SCORE="score";class F extends Phaser.GameObjects.Container{constructor(){super(Y.currentScene);const t=new Phaser.GameObjects.Graphics(this.scene);t.fillStyle(597301,.85),t.fillRect(0,0,Y.gameWidth,Y.gameHeight),this.add(t),this.scaledItemsContainer=new Phaser.GameObjects.Container(this.scene),this.scaledItemsContainer.x=.5*Y.gameWidth,this.scaledItemsContainer.y=.5*Y.gameHeight,this.scaledItemsContainer.scaleX=Y.scaleX,this.scaledItemsContainer.scaleY=Y.scaleY,this.add(this.scaledItemsContainer),Y.gameWidth>Y.gameHeight&&(this.scaledItemsContainer.y=.525*Y.gameHeight,this.scaledItemsContainer.scaleX*=.74,this.scaledItemsContainer.scaleY*=.74);const e=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","box_big");this.scaledItemsContainer.add(e);const i=new Phaser.GameObjects.Image(this.scene,0,-345,"texture_atlas_0","logo_cd");this.scaledItemsContainer.add(i),this.progressMessageLabel=new Phaser.GameObjects.Text(this.scene,0,190,"",{fontFamily:"Oswald-ExtraLight",fontSize:"36px",color:"#00ddfe"}),this.progressMessageLabel.setOrigin(.5),this.progressMessageLabel.tint=56830,this.progressMessageLabel.visible=!1,this.scaledItemsContainer.add(this.progressMessageLabel),this.loadIcon=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","load_icon"),this.scaledItemsContainer.add(this.loadIcon),this.scene.tweens.add({targets:this.loadIcon,angle:360,ease:Phaser.Math.Easing.Linear,duration:2e3,repeat:-1})}setProgressMessage(t){this.progressMessageLabel.visible=!0,this.progressMessageLabel.setText(t)}onDuelReady(){this.loadIcon.destroy(),this.progressMessageLabel.visible=!1;const t=new Phaser.GameObjects.Text(this.scene,0,-150,h.PAYMENTS_LAYER_DUEL_READY_LABEL,{fontFamily:"Oswald-Medium",fontSize:"60px",color:"#FFFFFF"});t.setOrigin(.5),this.scaledItemsContainer.add(t),f.track(t);const e=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","btn_regular"),i=new Phaser.GameObjects.Text(this.scene,0,0,h.PAYMENTS_LAYER_PLAY,{fontFamily:"Oswald-Medium",fontSize:"36px",color:"#361601"});i.setOrigin(.5),f.track(i);const n=new g(this.scene,e,i,this.onClickPlay,this);n.x=0,n.y=15,this.scaledItemsContainer.add(n);const s=new Phaser.GameObjects.Text(this.scene,0,260,h.PAYMENTS_LAYER_INFO_LABEL,{fontFamily:"Oswald-ExtraLight",fontSize:"24px",color:"#00ddfe",align:"center"});s.setOrigin(.5),this.scaledItemsContainer.add(s),f.track(s),this.termsAndConditionsLabel=new Phaser.GameObjects.Text(this.scene,Y.gameWidth/2,Y.gameHeight-20*Y.scaleY,h.PAYMENTS_LAYER_TERMS,{fontFamily:"Oswald-ExtraLight",fontSize:"22px",color:"#00ddfe"}),this.termsAndConditionsLabel.setOrigin(.5),this.termsAndConditionsLabel.scaleX=Y.scaleX,this.termsAndConditionsLabel.scaleY=Y.scaleY,this.termsAndConditionsLabel.setInteractive({cursor:"pointer"}),f.track(this.termsAndConditionsLabel),this.termsAndConditionsLabel.on("pointerdown",(function(){l.openExternalLink(Y.urls.clashdome+"/terms-and-conditions")}),this),this.add(this.termsAndConditionsLabel)}onClickPlay(){Y.startDuel()}}class G extends Phaser.GameObjects.Container{constructor(t){super(Y.currentScene);const e=new Phaser.GameObjects.Graphics(this.scene);e.fillStyle(597301,.85),e.fillRect(0,0,Y.gameWidth,Y.gameHeight),this.add(e),this.scaledItemsContainer=new Phaser.GameObjects.Container(this.scene),this.scaledItemsContainer.x=.5*Y.gameWidth,this.scaledItemsContainer.y=.5*Y.gameHeight,this.scaledItemsContainer.scaleX=Y.scaleX,this.scaledItemsContainer.scaleY=Y.scaleY,this.add(this.scaledItemsContainer),Y.gameWidth>Y.gameHeight&&(this.scaledItemsContainer.y=.525*Y.gameHeight,this.scaledItemsContainer.scaleX*=.74,this.scaledItemsContainer.scaleY*=.74);const i=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","box_big");this.scaledItemsContainer.add(i);const n=new Phaser.GameObjects.Image(this.scene,0,-345,"texture_atlas_0","logo_cd");this.scaledItemsContainer.add(n);const s=Y.gameFees.fees.indexOf(t);let r;switch(s){case 0:r=16776960;break;case 1:r=16762646;break;case 2:r=16743719;break;case 3:r=16734759;break;default:r=16776960}const a=new Phaser.GameObjects.Graphics(this.scene);a.fillStyle(r),a.fillRoundedRect(-202.5,-43,405,86,6),a.y=-165,this.scaledItemsContainer.add(a);const o=new Phaser.GameObjects.Text(this.scene,0,a.y,"TIER "+parseFloat(t),{fontFamily:"Oswald-Medium",fontSize:"66px",color:"#442302",align:"center"});o.setOrigin(0,.5),this.scaledItemsContainer.add(o);let c=new Phaser.GameObjects.Image(this.scene,o.width+45,a.y,"texture_atlas_0",0===s?"token_alcor_jigo":"icon_waxp_token");this.scaledItemsContainer.add(c);let u=-(o.width+45+c.width/2)/2;o.x+=u,c.x+=u;const d=new Phaser.GameObjects.Text(this.scene,0,a.y+68,"CHALLENGE RECEIVED FROM",{fontFamily:"Oswald-Medium",fontSize:"35px",color:"#"+r.toString(16),align:"center"});d.setOrigin(.5),this.scaledItemsContainer.add(d),this.adversaryLabel=new Phaser.GameObjects.Text(this.scene,-90,30,Y.adversaryNick?Y.adversaryNick:Y.adversaryAccount,{fontFamily:"Oswald-Medium",fontSize:"34px",color:"#FFFFFF"}),this.adversaryLabel.setOrigin(.5),this.scaledItemsContainer.add(this.adversaryLabel),this.adversaryAvatar=new Phaser.GameObjects.Image(this.scene,100,this.adversaryLabel.y,"texture_atlas_0","default_avatar"),this.scaledItemsContainer.add(this.adversaryAvatar);const p=new Phaser.GameObjects.Text(this.scene,Y.gameWidth/2,Y.gameHeight-20*Y.scaleY,h.ACCEPT_LAYER_TERMS,{fontFamily:"Oswald-ExtraLight",fontSize:"22px",color:"#00ddfe"});p.setOrigin(.5),p.scaleX=Y.scaleX,p.scaleY=Y.scaleY,p.setInteractive({cursor:"pointer"}),f.track(p),p.on("pointerdown",(function(){l.openExternalLink(Y.urls.clashdome+"/terms-and-conditions",!1)}),this),this.add(p),this.buttonsContainer=new Phaser.GameObjects.Container(this.scene),this.scaledItemsContainer.add(this.buttonsContainer);const m=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","btn_accept"),v=new Phaser.GameObjects.Text(this.scene,0,0,"ACCEPT",{fontFamily:"Oswald-Medium",fontSize:"34px",color:"#FFFFFF"});v.setOrigin(.5),f.track(v);const y=new g(this.scene,m,v,this.onClickAccept,this);y.x=-100,y.y=190,this.buttonsContainer.add(y);const _=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","btn_decline"),x=new Phaser.GameObjects.Text(this.scene,0,0,"DECLINE",{fontFamily:"Oswald-Medium",fontSize:"34px",color:"#FFFFFF"});x.setOrigin(.5),f.track(x);const w=new g(this.scene,_,x,this.onClickDecline,this);w.x=-y.x,w.y=y.y,this.buttonsContainer.add(w);const b=new Phaser.GameObjects.Text(this.scene,y.x,y.y+64,parseFloat(t).toString(),{fontFamily:"Oswald-ExtraLight",fontSize:"30px",color:"#00ddfe"});b.setOrigin(0,.5),this.buttonsContainer.add(b),c=new Phaser.GameObjects.Image(this.scene,b.x+b.width+25,b.y,"texture_atlas_0",0===s?"token_alcor_jigo":"icon_waxp_token"),c.setScale(.5),this.buttonsContainer.add(c),u=-(b.width+25+c.width*c.scale/2)/2,b.x+=u,c.x+=u,this.alpha=0,this.scene.tweens.add({targets:this,alpha:1,ease:Phaser.Math.Easing.Cubic.Out,duration:350})}onAdversaryAvatarLoaded(t){if(t!==Y.adversaryAccount)return;this.adversaryLabel.text=Y.adversaryNick?Y.adversaryNick:Y.adversaryAccount,this.adversaryAvatar&&this.adversaryAvatar.destroy(),m.create(this.scene,`circle-avatar-${Y.adversaryAccount}`,`avatar-${Y.adversaryAccount}`);const e="circle-avatar-"+Y.adversaryAccount;this.scene.textures.exists(e)?this.adversaryAvatar=new Phaser.GameObjects.Image(this.scene,100,this.adversaryLabel.y,e):this.adversaryAvatar=new Phaser.GameObjects.Image(this.scene,100,this.adversaryLabel.y,"texture_atlas_0","default_avatar"),this.scaledItemsContainer.add(this.adversaryAvatar)}async onClickAccept(){Y.inputsDisabled||(this.buttonsContainer.visible=!1,this.addLoadIcon(),await Y.proceedWithPrivateDuelInvitation())}async onClickDecline(){Y.inputsDisabled||(this.buttonsContainer.visible=!1,this.addLoadIcon(),await Y.cancelPrivateDuelInvitation())}addLoadIcon(){const t=new Phaser.GameObjects.Image(this.scene,0,190,"texture_atlas_0","load_icon");this.scaledItemsContainer.add(t),this.scene.tweens.add({targets:t,angle:360,ease:Phaser.Math.Easing.Linear,duration:2e3,repeat:-1})}}class B extends Phaser.GameObjects.Container{constructor(){super(Y.currentScene),this.score=0,this.scaleX=Y.scaleX,this.scaleY=Y.scaleY,Y.adversaryScoreContainerConfig?(this.x=Y.adversaryScoreContainerConfig.x,this.y=Y.adversaryScoreContainerConfig.y,this.containerWidth=Y.adversaryScoreContainerConfig.width,this.containerHeight=Y.adversaryScoreContainerConfig.height):(this.x=Y.gameWidth/2,this.y=Y.gameHeight,this.containerWidth=125,this.containerHeight=30),this.adversaryGameOver=!1;const t=new Phaser.GameObjects.Graphics(this.scene);t.fillStyle(6724,.5),t.fillRoundedRect(-this.containerWidth/2,-1.5*this.containerHeight,this.containerWidth,this.containerHeight,.25*this.containerHeight),this.add(t),m.create(this.scene,`circle-avatar-${Y.adversaryAccount}`,`avatar-${Y.adversaryAccount}`);const e="circle-avatar-"+Y.adversaryAccount;let i;i=this.scene.textures.exists(e)?new Phaser.GameObjects.Image(this.scene,-3.15*this.containerHeight,-this.containerHeight,e):new Phaser.GameObjects.Image(this.scene,-3.15*this.containerHeight,-this.containerHeight,"texture_atlas_0","default_avatar"),i.setScale(1.35*this.containerHeight/i.width),this.add(i);const n=Math.floor(.8*this.containerHeight);this.scoreLabel=new Phaser.GameObjects.Text(this.scene,0,-this.containerHeight,"-",{fontFamily:"Oswald-ExtraLight",fontSize:n+"px",color:"#FFFFFF",align:"center"}),this.scoreLabel.setOrigin(.5,.5),this.add(this.scoreLabel),this.loadIcon=new Phaser.GameObjects.Image(this.scene,i.x,i.y,"texture_atlas_0","load_icon"),this.loadIcon.setScale(1.45*this.containerHeight/this.loadIcon.width),this.loadIcon.visible=!1,this.add(this.loadIcon),this.scene.tweens.add({targets:this.loadIcon,angle:360,ease:Phaser.Math.Easing.Linear,duration:2e3,repeat:-1}),null!==Y.adversaryScore&&this.onAdversaryGameOver(Y.adversaryScore)}updateScore(t){if(this.adversaryGameOver)return;const e=this;this.scene.tweens.add({targets:this,score:t,ease:Phaser.Math.Easing.Linear,duration:450,onUpdate:function(){e.scoreLabel.text=l.formatNumber(Math.floor(e.score))},onUpdateScope:this}),this.adversaryGameOver&&(this.loadIcon.visible=!0)}onAdversaryGameOver(t){this.adversaryGameOver=!0,this.loadIcon.visible=!1,this.scoreLabel.destroy();const e=Math.floor(.7*this.containerHeight);this.scoreLabel=new Phaser.GameObjects.Text(this.scene,0,-this.containerHeight-2,l.formatNumber(t),{fontFamily:"Oswald-Medium",fontSize:e+"px",color:"#fbde00",align:"center"}),this.scoreLabel.setOrigin(.5,.5),this.add(this.scoreLabel),this.scoreLabel.alpha=0,this.scene.tweens.add({targets:this.scoreLabel,alpha:1,ease:Phaser.Math.Easing.Cubic.Out,duration:500});const i=this.scoreLabel.width,n=this.scoreLabel.y+.56*e,s=Math.floor(.125*this.containerHeight),r=new Phaser.GameObjects.Graphics(this.scene);r.lineStyle(s,16506368),r.moveTo(-i/2,n),r.lineTo(i/2,n),r.stroke(),this.add(r),r.scaleX=0,this.scene.tweens.add({targets:r,scaleX:1,ease:Phaser.Math.Easing.Cubic.Out,duration:650,delay:500})}onAddedToGameOverLayer(){this.x=Y.gameWidth/2,this.y=Y.gameHeight,"-"!==this.scoreLabel.text&&(this.loadIcon.visible=!0)}}class z extends Phaser.GameObjects.Container{constructor(){super(Y.currentScene),this.stakedCitizenLabel=null,this.areButtonsEnabled=!1,this.tierButtons=[];const t=this;setTimeout(()=>{t.areButtonsEnabled=!0},250);const e=new Phaser.GameObjects.Graphics(this.scene);e.fillStyle(597301,.85),e.fillRect(0,0,Y.gameWidth,Y.gameHeight),this.add(e),this.scaledItemsContainer=new Phaser.GameObjects.Container(this.scene),this.scaledItemsContainer.x=.5*Y.gameWidth,this.scaledItemsContainer.y=.5*Y.gameHeight,this.scaledItemsContainer.scaleX=Y.scaleX,this.scaledItemsContainer.scaleY=Y.scaleY,this.add(this.scaledItemsContainer),Y.gameWidth>Y.gameHeight&&(this.scaledItemsContainer.y=.525*Y.gameHeight,this.scaledItemsContainer.scaleX*=.74,this.scaledItemsContainer.scaleY*=.74);const i=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","box_big");this.scaledItemsContainer.add(i);const n=new Phaser.GameObjects.Image(this.scene,0,-345,"texture_atlas_0","logo_cd");this.scaledItemsContainer.add(n),this.paymentMenuContainer=new Phaser.GameObjects.Container(this.scene),this.scaledItemsContainer.add(this.paymentMenuContainer),this.composeBackground(),this.progressMessageLabel=new Phaser.GameObjects.Text(this.scene,0,190,"",{fontFamily:"Oswald-ExtraLight",fontSize:"36px",color:"#00ddfe"}),this.progressMessageLabel.setOrigin(.5),this.progressMessageLabel.tint=56830,this.progressMessageLabel.visible=!1,this.scaledItemsContainer.add(this.progressMessageLabel),this.alpha=0,this.addJigoButton(),this.addWAXButtons(),Y.isPrivateDuelAllowed||this.disableButtons(),this.scene.tweens.add({targets:this,alpha:1,ease:Phaser.Math.Easing.Cubic.Out,duration:350})}setProgressMessage(t){this.progressMessageLabel.visible=!0,this.progressMessageLabel.setText(t)}onPrivateDuelAccepted(){this.loadIcon.destroy(),this.titleMessageLabel.setText(Y.adversaryAccount.toUpperCase()+"\nACCEPTED THE DUEL!");const t=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","btn_regular"),e=new Phaser.GameObjects.Text(this.scene,0,0,h.PAYMENTS_LAYER_PLAY,{fontFamily:"Oswald-Medium",fontSize:"36px",color:"#361601"});e.setOrigin(.5),f.track(e);const i=new g(this.scene,t,e,this.onClickPlay,this);i.x=0,i.y=15,this.scaledItemsContainer.add(i)}disableButtons(){for(let t=0;t<this.tierButtons.length;t++){const e=this.tierButtons[t];e.disable(),e.alpha=.5}}onAdversaryAvatarLoaded(){if(m.create(this.scene,`circle-avatar-${Y.adversaryAccount}`,`avatar-${Y.adversaryAccount}`),Y.adversaryNick){let t=Y.adversaryNick;t.length>12&&(t.length>18&&(t=t.substring(0,14)+"..."),this.adversaryLabel.setFontSize(15)),this.adversaryLabel.text=t}this.adversaryAvatar&&this.adversaryAvatar.destroy();const t="circle-avatar-"+Y.adversaryAccount;this.scene.textures.exists(t)?this.adversaryAvatar=new Phaser.GameObjects.Image(this.scene,165,-215,t):this.adversaryAvatar=new Phaser.GameObjects.Image(this.scene,165,-215,"texture_atlas_0","default_avatar"),this.adversaryAvatar.setScale(70/this.adversaryAvatar.width),this.paymentMenuContainer.add(this.adversaryAvatar)}composeBackground(){let t;t=Y.isPrivateDuelAllowed?new Phaser.GameObjects.Text(this.scene,0,-215,"YOU ARE CHALLENGING:",{fontFamily:"Oswald-ExtraLight",fontSize:"25px",color:"#FFFFFF"}):new Phaser.GameObjects.Text(this.scene,0,-215,"DUEL NOT POSSIBLE:",{fontFamily:"Oswald-Medium",fontSize:"25px",color:"#FF2456"}),t.setOrigin(1,.5),this.paymentMenuContainer.add(t),this.adversaryLabel=new Phaser.GameObjects.Text(this.scene,120,-215,Y.adversaryAccount,{fontFamily:"Oswald-Medium",fontSize:"20px",color:"#FFFFFF"}),this.adversaryLabel.setOrigin(1,.5),this.paymentMenuContainer.add(this.adversaryLabel),m.create(this.scene,`circle-avatar-${Y.adversaryAccount}`,`avatar-${Y.adversaryAccount}`);const e="circle-avatar-"+Y.adversaryAccount;this.scene.textures.exists(e)?this.adversaryAvatar=new Phaser.GameObjects.Image(this.scene,165,-215,e):this.adversaryAvatar=new Phaser.GameObjects.Image(this.scene,165,-215,"texture_atlas_0","default_avatar"),this.adversaryAvatar.setScale(70/this.adversaryAvatar.width),this.paymentMenuContainer.add(this.adversaryAvatar);const i=new Phaser.GameObjects.Text(this.scene,-170,-135,"ENTRY FEE",{fontFamily:"Oswald-Medium",fontSize:"25px",color:"#00dbff"});i.setOrigin(.5),this.paymentMenuContainer.add(i);let n=new Phaser.GameObjects.Text(this.scene,10,i.y,h.PAYMENTS_LAYER_REWARD3,{fontFamily:"Oswald-Medium",fontSize:"25px",color:"#00dbff"});n.setOrigin(.5),this.paymentMenuContainer.add(n),f.track(n);let s=new Phaser.GameObjects.Text(this.scene,170,i.y,"SEND INVITE",{fontFamily:"Oswald-Medium",fontSize:"25px",color:"#00dbff"});s.setOrigin(.5),this.paymentMenuContainer.add(s);const r=new Phaser.GameObjects.Text(this.scene,-170,12,h.PAYMENTS_LAYER_ENTRY_FEE,{fontFamily:"Oswald-Medium",fontSize:"25px",color:"#00dbff"});r.setOrigin(.5),this.paymentMenuContainer.add(r),f.track(r),n=new Phaser.GameObjects.Text(this.scene,10,r.y,h.PAYMENTS_LAYER_REWARD3,{fontFamily:"Oswald-Medium",fontSize:"25px",color:"#00dbff"}),n.setOrigin(.5),this.paymentMenuContainer.add(n),f.track(n),s=new Phaser.GameObjects.Text(this.scene,170,r.y,"SEND INVITE",{fontFamily:"Oswald-Medium",fontSize:"25px",color:"#00dbff"}),s.setOrigin(.5),this.paymentMenuContainer.add(s);let a=new Phaser.GameObjects.Graphics(this.scene);a.fillStyle(14702),a.fillRect(-250,0,500,83),a.y=-110,this.paymentMenuContainer.add(a),a=new Phaser.GameObjects.Graphics(this.scene),a.fillStyle(14702),a.fillRect(-250,0,500,83),a.y=44,this.paymentMenuContainer.add(a),a=new Phaser.GameObjects.Graphics(this.scene),a.fillStyle(14702),a.fillRect(-250,0,500,83),a.y=217,this.paymentMenuContainer.add(a)}addJigoButton(){const t=this,e=this.getPrivateDuelNoStakeFee(),i=new Phaser.GameObjects.Text(this.scene,-180,-65,e.toString(),{fontFamily:"Oswald-ExtraLight",fontSize:"24px",color:"#FFFFFF"});i.setOrigin(.5),i.alpha=Y.isPrivateDuelAllowed?1:.35,this.paymentMenuContainer.add(i),f.track(i);let n=this.getPrivateDuelNoStakeTokenLogo();n.x=i.x+i.width/2+22,n.y=i.y,n.alpha=Y.isPrivateDuelAllowed?1:.35,this.paymentMenuContainer.add(n);const s=Math.round(1.4*e*100)/100,r=new Phaser.GameObjects.Text(this.scene,0,i.y,s.toString(),{fontFamily:"Oswald-Medium",fontSize:"24px",color:"#fff835"});r.setOrigin(.5),r.alpha=Y.isPrivateDuelAllowed?1:.35,this.paymentMenuContainer.add(r),n=this.getPrivateDuelNoStakeTokenLogo(),n.x=r.x+r.width/2+22,n.y=r.y,n.alpha=Y.isPrivateDuelAllowed?1:.35,this.paymentMenuContainer.add(n),this.freeDuelButton=new p(this.scene,170,-69,"texture_atlas_0","btn_tier_free","btn_tier_hover"),this.freeDuelButton.onDown((function(){t.onClickProceed(Y.gameFees.fees[0])}),this),this.paymentMenuContainer.add(this.freeDuelButton),this.tierButtons.push(this.freeDuelButton)}addWAXButtons(){const t=this,e=this.getWAXFees();let i=new Phaser.GameObjects.Text(this.scene,-180,84,e[0].toString(),{fontFamily:"Oswald-ExtraLight",fontSize:"24px",color:"#FFFFFF"});i.alpha=Y.isPrivateDuelAllowed?1:.35,i.setOrigin(.5),this.paymentMenuContainer.add(i);let n=new Phaser.GameObjects.Image(this.scene,i.x+i.width/2+22,i.y,"texture_atlas_0","logo_wax");n.alpha=Y.isPrivateDuelAllowed?1:.35,n.setScale(.7),this.paymentMenuContainer.add(n);let s=Math.round(1.9*e[0]*100)/100,r=new Phaser.GameObjects.Text(this.scene,0,i.y,s.toString(),{fontFamily:"Oswald-Medium",fontSize:"24px",color:"#fff835"});r.alpha=Y.isPrivateDuelAllowed?1:.35,r.setOrigin(.5),this.paymentMenuContainer.add(r),n=new Phaser.GameObjects.Image(this.scene,r.x+r.width/2+22,i.y,"texture_atlas_0","logo_wax"),n.alpha=Y.isPrivateDuelAllowed?1:.35,n.setScale(.7),this.paymentMenuContainer.add(n);const a=new p(this.scene,170,i.y,"texture_atlas_0","btn_tier_1","btn_tier_hover");a.onDown((function(){t.onClickProceed(Y.gameFees.fees[1])}),this),this.paymentMenuContainer.add(a),i=new Phaser.GameObjects.Text(this.scene,-180,173,e[1].toString(),{fontFamily:"Oswald-ExtraLight",fontSize:"24px",color:"#FFFFFF"}),i.alpha=Y.isPrivateDuelAllowed?1:.35,i.setOrigin(.5),this.paymentMenuContainer.add(i),n=new Phaser.GameObjects.Image(this.scene,i.x+i.width/2+22,i.y,"texture_atlas_0","logo_wax"),n.alpha=Y.isPrivateDuelAllowed?1:.35,n.setScale(.7),this.paymentMenuContainer.add(n),s=Math.round(1.9*e[1]*100)/100,r=new Phaser.GameObjects.Text(this.scene,0,i.y,s.toString(),{fontFamily:"Oswald-Medium",fontSize:"24px",color:"#fff835"}),r.setOrigin(.5),r.alpha=Y.isPrivateDuelAllowed?1:.35,this.paymentMenuContainer.add(r),n=new Phaser.GameObjects.Image(this.scene,r.x+r.width/2+22,i.y,"texture_atlas_0","logo_wax"),n.alpha=Y.isPrivateDuelAllowed?1:.35,n.setScale(.7),this.paymentMenuContainer.add(n);const o=new p(this.scene,170,i.y,"texture_atlas_0","btn_tier_2","btn_tier_hover");o.onDown((function(){t.onClickProceed(Y.gameFees.fees[2])}),this),this.paymentMenuContainer.add(o),i=new Phaser.GameObjects.Text(this.scene,-180,259,e[2].toString(),{fontFamily:"Oswald-ExtraLight",fontSize:"24px",color:"#FFFFFF"}),i.alpha=Y.isPrivateDuelAllowed?1:.35,i.setOrigin(.5),this.paymentMenuContainer.add(i),n=new Phaser.GameObjects.Image(this.scene,i.x+i.width/2+22,i.y,"texture_atlas_0","logo_wax"),n.alpha=Y.isPrivateDuelAllowed?1:.35,n.setScale(.7),this.paymentMenuContainer.add(n),s=Math.round(1.9*e[2]*100)/100,r=new Phaser.GameObjects.Text(this.scene,0,i.y,s.toString(),{fontFamily:"Oswald-Medium",fontSize:"24px",color:"#fff835"}),r.setOrigin(.5),r.alpha=Y.isPrivateDuelAllowed?1:.35,this.paymentMenuContainer.add(r),n=new Phaser.GameObjects.Image(this.scene,r.x+r.width/2+22,i.y,"texture_atlas_0","logo_wax"),n.alpha=Y.isPrivateDuelAllowed?1:.35,n.setScale(.7),this.paymentMenuContainer.add(n);const h=new p(this.scene,170,i.y,"texture_atlas_0","btn_tier_3","btn_tier_hover");h.onDown((function(){t.onClickProceed(Y.gameFees.fees[3])}),this),this.paymentMenuContainer.add(h),s=Math.round(1.9*e[2]*100)/100,this.tierButtons.push(a),this.tierButtons.push(o),this.tierButtons.push(h)}onClickPlay(){Y.startDuel()}onClickProceed(t){this.areButtonsEnabled&&(this.stakedCitizenLabel&&this.stakedCitizenLabel.destroy(),this.loadIcon=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","load_icon"),this.scaledItemsContainer.add(this.loadIcon),this.scene.tweens.add({targets:this.loadIcon,angle:360,ease:Phaser.Math.Easing.Linear,duration:2e3,repeat:-1}),this.paymentMenuContainer.visible=!1,this.termsAndConditionsLabel&&(this.termsAndConditionsLabel.visible=!1),Y.proceedWithPrivateDuel(t))}getPrivateDuelNoStakeFee(){let t=0;const e=Y.gameFees.fees[0];let i=null;return-1!==Y.gameFees.fees[0].indexOf("CDJIGO")?i=e.replace(" CDJIGO",""):-1!==Y.gameFees.fees[0].indexOf("CDCARBZ")?i=e.replace(" CDCARBZ",""):-1!==Y.gameFees.fees[0].indexOf("LUDIO")&&(i=e.replace(" LUDIO","")),i&&(t=parseFloat(i)),t}getWAXFees(){const t=[];for(let e=0;e<Y.gameFees.fees.length;e++)if(-1!==Y.gameFees.fees[e].indexOf("WAX")){const i=Y.gameFees.fees[e].replace(" WAX",""),n=parseFloat(i);t.push(n)}return t}getPrivateDuelNoStakeTokenLogo(){let t,e=null;return-1!==Y.gameFees.fees[0].indexOf("CDJIGO")?t="jigo_icon":-1!==Y.gameFees.fees[0].indexOf("CDCARBZ")?t="carbz_icon":-1!==Y.gameFees.fees[0].indexOf("LUDIO")&&(t="ludio_icon"),t&&(e=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0",t)),e}}class U extends Phaser.GameObjects.Container{constructor(){super(Y.currentScene);const t=new Phaser.GameObjects.Graphics(this.scene);t.fillStyle(597301,.85),t.fillRect(0,0,Y.gameWidth,Y.gameHeight),this.add(t),this.scaledItemsContainer=new Phaser.GameObjects.Container(this.scene),this.scaledItemsContainer.x=.5*Y.gameWidth,this.scaledItemsContainer.y=.5*Y.gameHeight,this.scaledItemsContainer.scaleX=Y.scaleX,this.scaledItemsContainer.scaleY=Y.scaleY,this.add(this.scaledItemsContainer),Y.gameWidth>Y.gameHeight&&(this.scaledItemsContainer.y=.525*Y.gameHeight,this.scaledItemsContainer.scaleX*=.74,this.scaledItemsContainer.scaleY*=.74);const e=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_0","box_big");this.scaledItemsContainer.add(e);const i=new Phaser.GameObjects.Image(this.scene,0,-345,"texture_atlas_0","logo_cd");this.scaledItemsContainer.add(i);const n=new Phaser.GameObjects.Text(this.scene,0,-180,"CHALLENGE SENT TO:",{fontFamily:"Oswald-Medium",fontSize:"36px",color:"#FFFFFF",align:"center"});n.setOrigin(.5),this.scaledItemsContainer.add(n),this.adversaryLabel=new Phaser.GameObjects.Text(this.scene,-90,-70,Y.adversaryNick?Y.adversaryNick:Y.adversaryAccount,{fontFamily:"Oswald-ExtraLight",fontSize:"28px",color:"#FFFFFF",align:"center"}),this.adversaryLabel.setOrigin(.5),this.scaledItemsContainer.add(this.adversaryLabel),m.create(this.scene,`circle-avatar-${Y.adversaryAccount}`,`avatar-${Y.adversaryAccount}`);const s="circle-avatar-"+Y.adversaryAccount;this.scene.textures.exists(s)?this.adversaryAvatar=new Phaser.GameObjects.Image(this.scene,70,-70,s):this.adversaryAvatar=new Phaser.GameObjects.Image(this.scene,70,-70,"texture_atlas_0","default_avatar"),this.adversaryAvatar.setScale(110/this.adversaryAvatar.width),this.scaledItemsContainer.add(this.adversaryAvatar);const r=new Phaser.GameObjects.Text(this.scene,0,60,"You'll be notified when the challenge has been accepted\nso you can start playing",{fontFamily:"Oswald-ExtraLight",fontSize:"22px",color:"#00ddfe",align:"center"});r.setOrigin(.5),this.scaledItemsContainer.add(r);const a=new Phaser.GameObjects.Graphics(this.scene);a.fillStyle(208712),a.fillRoundedRect(-230,180,360,60,30),this.scaledItemsContainer.add(a),-1!==window.location.hostname.indexOf("localhost")?this.urlStr=window.location.hostname+":3000":this.urlStr="https://"+window.location.hostname,this.urlStr+="/"+Y.gameName+"/play?duel=true&private=true&duelID="+Y.duelID;const o=new Phaser.GameObjects.Text(this.scene,-210,210,this.urlStr.substring(0,40)+"...",{fontFamily:"Oswald-ExtraLight",fontSize:"22px",color:"#FFFFFF",align:"center"});o.setOrigin(0,.5),this.scaledItemsContainer.add(o);const h=new p(this.scene,185,212,"texture_atlas_0","btn_link_challenge_off","btn_link_challenge_on");h.onDown(this.onDownCopyLinkBtn,this),this.scaledItemsContainer.add(h);const l=new Phaser.GameObjects.Text(this.scene,0,280,"SHARE SHORTCUT LINK WITH FRIENDO (OPTIONAL)",{fontFamily:"Oswald-ExtraLight",fontSize:"22px",color:"#00ddfe",align:"center"});l.setOrigin(.5),this.scaledItemsContainer.add(l)}onAdversaryAvatarLoaded(){m.create(this.scene,`circle-avatar-${Y.adversaryAccount}`,`avatar-${Y.adversaryAccount}`),Y.adversaryNick&&(this.adversaryLabel.text=Y.adversaryNick),this.adversaryAvatar&&this.adversaryAvatar.destroy();const t="circle-avatar-"+Y.adversaryAccount;this.scene.textures.exists(t)?this.adversaryAvatar=new Phaser.GameObjects.Image(this.scene,70,-70,t):this.adversaryAvatar=new Phaser.GameObjects.Image(this.scene,70,-70,"texture_atlas_0","default_avatar"),this.adversaryAvatar.setScale(110/this.adversaryAvatar.width),this.scaledItemsContainer.add(this.adversaryAvatar)}onDownCopyLinkBtn(){navigator.clipboard.writeText(this.urlStr)}}class Y{static init(t){console.log("ClashDome SDK v:"+Y.VERSION),Y.reactClass=t.reactClass,Y.gameName=t.gameName,Y.development=t.development,Y.gameOverMenuDelay=t.gameOverMenuDelay||0,Y.adversaryScoreContainerConfig=t.adversaryScoreContainerConfig||null,Y.startResumedGameCallback=t.startResumedGameCallback,Y.goToHomeCallback=t.goToHomeCallback,Y.disableInputsCallback=t.disableInputsCallback,Y.enableInputsCallback=t.enableInputsCallback,Y.gameOverGameCallback=t.gameOverCallback,Y.purchasedBoosterCallback=t.purchasedBoosterCallback||null,Y.gameManagerReference=t.gameManagerReference,Y.engineClass=t.engineClass||null,Y.actions=[],Y.seedsCounter=0,Y.date=null,Y.expiredGame=!1,Y.errorLayer=null,Y.credential=null,Y.gameOver=!1,Y.resumedGame=!1,Y.score=0,Y.playerNick=null,Y.adversaryNick=null,Y.adversaryScore=null,Y.replayAccount=null,Y.replayNick=null,Y.skipLayerShown=!1,Y.hasPlayerCitizenStaked=!1,Y.trialCitizenData=null,Y.isSkipPossible=!0,Y.gameOverType=a.FINISH,Y.hasBoosterBeenPurchased=!1,Y.hasBoosterBeenDiscarded=!1,Y.countryCode=null,Y.playerMultiplier=null,Y.fee=null,Y.allTimeHighScore=0,Y.weekHighScore=0,Y.weeklyHighScoreShown=!1,Y.allTimeHighScoreShown=!1,Y.levelData=null,Y.inputsDisabled=!1,Y.numActions=0,Y.isSecondPlayer=null,Y.hasPlayerVotedLevel=!1;const e=new URLSearchParams(window.location.search);if(Y.duelMode="true"===e.get("duel"),Y.private="true"===e.get("private"),Y.duelID=parseInt(e.get("duelID"))||null,Y.duelSeed=parseInt(e.get("seed"))||null,Y.adversaryAccount=e.get("adversary")||null,Y.replayMode="true"===e.get("replay"),Y.replayDuelID=parseInt(e.get("id")),Y.duelReplayPlayerOrder=parseInt(e.get("player")),Y.landID=parseInt(e.get("land"))||0,Y.gameWidth=Y.currentScene.game.config.width,Y.gameHeight=Y.currentScene.game.config.height,Y.currentScene.sys.game.device.os.desktop)Y.scaleX=1,Y.scaleY=1;else{const t=window.innerWidth/window.innerHeight;Y.gameWidth>Y.gameHeight?(Y.scaleX=Y.gameWidth/Y.gameHeight/t,Y.scaleY=1):(Y.scaleX=1,Y.scaleY=Y.gameHeight/Y.gameWidth*t)}Y.development||Y.reactClass&&Y.reactClass.state&&"testnet"===Y.reactClass.state.serverType?Y.urls={clashdome:"http://test.clashdome.io",bloks:"https://wax-test.bloks.io",atomic:"https://test.wax.api.atomicassets.io",apis:["http://wax-testnet.eosphere.io","https://testnet.wax.pink.gg","https://testnet.wax.eosdetroit.io"]}:Y.urls={clashdome:"https://clashdome.io",bloks:"https://wax.bloks.io",atomic:"https://aa.dapplica.io",apis:["https://api.waxsweden.org","https://wax.pink.gg","https://apiwax.3dkrender.com","https://wax.eu.eosamsterdam.net","https://wax.blacklusion.io","https://wax.csx.io","https://wax.dapplica.io","https://api-wax.eosarabia.net","https://wax.eoseoul.io","https://api.wax.greeneosio.com","https://wax.hkeos.com","https://api.wax.liquidstudios.io","https://wax.eosn.io"]};i(106).location((function(t){Y.countryCode=t}),"","","country")}static onOrientationChange(){if(Y.currentScene.game.device.os.desktop)return;const t=window.innerWidth/window.innerHeight;Y.gameWidth>Y.gameHeight?(Y.scaleX=Y.gameWidth/Y.gameHeight/t,Y.scaleY=1):(Y.scaleX=1,Y.scaleY=Y.gameHeight/Y.gameWidth*t),Y.preloadLayer&&Y.preloadLayer.onOrientationChange(),Y.errorLayer&&Y.errorLayer.onOrientationChange()}static setCurrentScene(t){Y.currentScene=t}static loadPreloaderAssets(t){Y.currentScene.load.image("arcade_base","assets/sdk/images/arcade_base.png"),Y.currentScene.load.image("arcade_btns","assets/sdk/images/arcade_btns.png"),Y.currentScene.load.image("game_logo",l.GAME_LOGOS[t])}static loadAssets(){f.init("en","en"),Y.preloadLayer=new I,Y.currentScene.add.existing(Y.preloadLayer),Y.currentScene.load.atlas("texture_atlas_0","assets/sdk/images/texture_atlas_0.png","assets/sdk/images/texture_atlas_0.json"),Y.currentScene.load.on("progress",t=>{Y.preloadLayer.updateProgressbar(t)},Y.currentScene)}static isPlayerLogged(){return!!Y.development||!(!Y.reactClass.state||!Y.reactClass.state.wax.userAccount)}static async getReplayLog(){if(Y.development)return new Promise((t,e)=>{setTimeout(t,500)}).then((function(){let t;switch(Y.gameName){case"candy-fiesta":t=JSON.parse(JSON.stringify(l.CANDY_FIESTA_DEV_LOG));break;case"templok":t=JSON.parse(JSON.stringify(l.TEMPLOK_DEV_LOG));break;case"ringy-dingy":t=JSON.parse(JSON.stringify(l.RINGY_DINGY_DEV_LOG));break;case"endless-siege-2":t=JSON.parse(JSON.stringify(l.ENDLESS_SIEGE_2_DEV_LOG));break;case"rug-pool":t=JSON.parse(JSON.stringify(l.RUG_POOL_DEV_LOG));break;case"maze":t=JSON.parse(JSON.stringify(l.MAZE_DEV_LOG))}const e=t.pop();return Y.replayAccount=e.data.userName,Y.replayScore=e.data.score,Y.replayDuration=Math.floor(e.data.duration/1e3),Y.landID=e.data.landID,t[t.length-1].type===n.SKIP_GAME?Y.gameOverType=a.SKIP:t[t.length-1].type===n.LEAVE_GAME&&(Y.gameOverType=a.QUIT),{actions:t}}));{const t=await fetch("/api/clashdome-game/get-replay-log/"+Y.replayDuelID+"/"+Y.duelReplayPlayerOrder),e=await t.json();if(e.error)return Y.errorLayer=new x("ERROR!",e.error),Y.currentScene.add.existing(Y.errorLayer),{error:!0};{const t=JSON.parse(e.actions);if(t){const e=t.pop();return Y.replayAccount=e.data.userName,Y.replayScore=e.data.score,Y.replayDuration=Math.floor(e.data.duration/1e3),Y.landID=e.data.landID,t[t.length-1].type===n.SKIP_GAME?Y.gameOverType=a.SKIP:t[t.length-1].type===n.LEAVE_GAME&&(Y.gameOverType=a.QUIT),{actions:t}}return Y.errorLayer=new x("ERROR!","No actions found for duel:"+Y.replayDuelID),Y.currentScene.add.existing(Y.errorLayer),{error:!0}}}}static async checkPlayerLogin(t,e,i){if(Y.gameDataReceivedCallback=t,Y.gameDataReceivedCallbackScope=i,Y.startGameCallback=e,Y.startGameCallbackScope=i,Y.replayMode)Y.gameDataReceivedCallback.apply(Y.gameDataReceivedCallbackScope);else if(l.isPlayerLogged()){Y.playerAccount=Y.development?"clashdomeali":Y.reactClass.state.wax.userAccount,(await Y.getGameConfig()).error||(Y.gameDataReceivedCallback.apply(Y.gameDataReceivedCallbackScope),l.getPlayersAvatarUrls([Y.playerAccount],Y.loadPlayerAvatars,Y),l.getPlayerNick(Y.playerAccount,r.PLAYER))}else Y.errorLayer=new x("ERROR!","Please login to play the game.",Y.login,[],Y,"LOGIN"),Y.currentScene.add.existing(Y.errorLayer)}static async login(){Y.development?Y.onLoginSuccess():Y.reactClass.loginFromGame(Y.gameName)}static async onLoginSuccess(){setTimeout((function(){(async()=>{(await Y.getGameConfig()).error||Y.gameDataReceivedCallback.apply(Y.gameDataReceivedCallbackScope)})()}),750)}static async getGameConfig(){const t=parseInt(l.GAME_IDS[Y.gameName]);if(Y.development){if(localStorage.getItem(Y.gameName+"-actions")){Y.resumedGame=!0,Y.duelID=4321,Y.date=localStorage.getItem(Y.gameName+"-date");const t=new Date(Date.parse(Y.date)).getTime();(new Date).getTime()-t>72e5&&(localStorage.removeItem(Y.gameName+"-duelSeed"),localStorage.removeItem(Y.gameName+"-seedsCounter"),localStorage.removeItem(Y.gameName+"-actions"),localStorage.removeItem(Y.gameName+"-date"),localStorage.removeItem(Y.gameName+"-landID"),Y.expiredGame=!0)}else Y.resumedGame=!1,Y.adversaryScore=null;const e=!1,i={1:{fees:["100.0000 CDJIGO","5.00000000 WAX","10.00000000 WAX","25.00000000 WAX"],reward:"26.9878 CREDITS",waxToLudioFactor:"20000",creditsToJigoFactor:"1000"},2:{fees:["100.0000 CDJIGO","5.00000000 WAX","10.00000000 WAX","25.00000000 WAX"],reward:"10.0000 CREDITS",waxToLudioFactor:"20000",creditsToJigoFactor:"1000"},3:{fees:["100.0000 CDJIGO","5.00000000 WAX","10.00000000 WAX","25.00000000 WAX"],reward:"15.1123 CREDITS",waxToLudioFactor:"20000",creditsToJigoFactor:"1000"},4:{fees:["100.0000 CDJIGO","5.00000000 WAX","10.00000000 WAX","25.00000000 WAX"],reward:"37.9876 CREDITS",waxToLudioFactor:"0",creditsToJigoFactor:"0"},5:{fees:["100.0000 CDJIGO","5.00000000 WAX","10.00000000 WAX","25.00000000 WAX"],reward:"15.9862 CREDITS",waxToLudioFactor:"20000",creditsToJigoFactor:"1000"},6:{fees:["100.0000 CDJIGO","5.00000000 WAX","10.00000000 WAX","25.00000000 WAX"],reward:"11.5562 CREDITS",waxToLudioFactor:"0",creditsToJigoFactor:"0"}};return Y.gameFees=i[t],Y.playerMultiplier=1,Y.weekHighScore=3150,Y.allTimeHighScore=5150,-1!==Y.gameFees.fees.indexOf("0.0000 CREDITS")&&(Y.hasPlayerCitizenStaked=await l.hasPlayerCitizenStaked(),Y.trialCitizenData=await l.getTrialCitizenData()),Y.private&&(Y.isPrivateDuelAllowed=await l.getIsAdversaryFriend(Y.adversaryAccount)),e?(Y.errorLayer=new x("VALIDATING SCORE","Your score is being validated and recorded on the blockchain."),Y.currentScene.add.existing(Y.errorLayer),{error:"validating game"}):new Promise((t,e)=>{setTimeout(t,500)}).then((function(){return{error:null}}))}{const e=await fetch("/api/clashdome-game/get-game-cofig/"+Y.playerAccount+"/"+t+"/"+Y.landID+"/"+Y.private+"/"+Y.duelID+"/"+Y.adversaryAccount),i=await e.json();if(Y.private=Y.private||i.private||!1,Y.duelID=Y.duelID||i.duelID||null,Y.feeStr=i.fee?i.fee:"0.0000 LUDIO",Y.numActions=i.numActions,Y.isSecondPlayer=i.isSecondPlayer,Y.adversaryAccount=i.adversaryAccount,Y.private&&(Y.colyseusManager=new N,Y.colyseusManager.init(),l.getPlayersAvatarUrls([Y.adversaryAccount],Y.loadPlayerAvatars,Y),l.getPlayerNick(Y.adversaryAccount,r.ADVERSARY)),i.error)return Y.errorLayer=new x("ERROR!",i.error),Y.currentScene.add.existing(Y.errorLayer),{error:i.error};if(i.validating)return Y.errorLayer=new x("VALIDATING SCORE","Your score is being validated and recorded on the blockchain."),Y.currentScene.add.existing(Y.errorLayer),{error:"validating game"};if(Y.private&&Y.duelID&&!i.resumedGame&&0===i.state&&i.isSecondPlayer){if(Y.duelSeed=i.seed,Y.gameFees=i.gameFees[t],-1!==i.fee.indexOf("WAX")){const t=i.fee.replace(" WAX","");Y.fee=parseFloat(t)}else Y.fee=0;return Y.acceptPrivateLayer=new G(i.fee),Y.currentScene.add.existing(Y.acceptPrivateLayer),{error:null}}if(Y.resumedGame=i.resumedGame,Y.duelID=i.duelID,Y.gameFees=i.gameFees[t],Y.date=i.date,Y.expiredGame=i.expired,Y.playerMultiplier=i.playerMultiplier,Y.weekHighScore=i.high_scores?i.high_scores.WEEK_HIGH_SCORE:0,Y.allTimeHighScore=i.high_scores?i.high_scores.ALL_TIME_HIGH_SCORE:0,i.credential&&(Y.credential=i.credential),Y.private){const t=await l.getIsAdversaryFriend(Y.adversaryAccount),e=l.areAllFeesZero();Y.isPrivateDuelAllowed=t&&!i.pendingDuels&&!e,!(i.state>=2)&&i.isSecondPlayer||i.resumedGame||(Y.duelID=null),i.roomId&&await Y.colyseusManager.joinOrCreateRoom(i.roomId,Y.playerAccount)}else Y.hasPlayerCitizenStaked=await l.hasPlayerCitizenStaked(),Y.trialCitizenData=await l.getTrialCitizenData();return{error:null}}}static showRestoredGameLayer(){if(Y.preloadLayer.visible=!1,Y.disableInputsCallback.apply(Y.gameManagerReference,[]),Y.expiredGame){const t=new Date,e=new Date(Date.parse(Y.date)),i=l.formatTime((t.getTime()-e.getTime())/1e3,!0),n="Start time: "+e.toLocaleString()+"\n"+l.formatNumber(parseInt(i.h))+"h "+l.formatNumber(parseInt(i.m))+"m ago (duels expire automatically after 2 h)";Y.errorLayer=new x("SESSION EXPIRED!",n),Y.currentScene.add.existing(Y.errorLayer)}else Y.private&&(l.getPlayersAvatarUrls([Y.adversaryAccount],Y.loadPlayerAvatars,Y),l.getPlayerNick(Y.adversaryAccount,r.ADVERSARY)),Y.restoredGameLayer=new O,Y.currentScene.add.existing(Y.restoredGameLayer);return Y.expiredGame}static onAdversaryGameOverReceived(t){Y.gameOverLayerOpenDuel?(Y.gameOverLayerOpenDuel.destroy(),Y.gameOverLayerOpenDuel=null,Y.adversaryScoreLayer&&(Y.adversaryScoreLayer.destroy(),Y.adversaryScoreLayer=null),Y.gameOverLayerClosedDuel=new S(Y.score,t.tAdversary,t.score,t.tPlayer),Y.currentScene.add.existing(Y.gameOverLayerClosedDuel)):Y.adversaryScoreLayer&&Y.adversaryScoreLayer.onAdversaryGameOver(t.score)}static onAdversaryScoreReceived(t){Y.adversaryScoreLayer&&Y.adversaryScoreLayer.updateScore(t)}static continueRestoredGame(){Y.development?setTimeout((async function(){const t=Math.random();Y.restoredGameLayer.destroy(),Y.restoredGameLayer=null,Y.credential=Math.floor(1e5*t);const e=localStorage.getItem(Y.gameName+"-actions"),i=JSON.parse(e);Y.hasBoosterBeenPurchased=-1!==e.indexOf(n.PURCHASE_BOOSTER),Y.seedsCounter=parseInt(localStorage.getItem(Y.gameName+"-seedsCounter")),Y.landID=parseInt(localStorage.getItem(Y.gameName+"-landID")),b.fetchLDevLevelData(),Y.devPRNG=new c(Y.duelSeed);for(let t=0;t<i.length;t++)"set seed"===i[t].type&&Y.devPRNG.getRandom();Y.adversaryAccount="fitzcarraldo",Y.adversaryScore=1450,Y.adversaryAccount&&(l.getPlayersAvatarUrls([Y.adversaryAccount],Y.loadPlayerAvatars,Y),l.getPlayerNick(Y.adversaryAccount,r.ADVERSARY)),Y.startResumedGameCallback.apply(Y.gameManagerReference,[i])}),2500):(async()=>{const t=parseInt(l.GAME_IDS[Y.gameName]);try{const e=[{account:"clashdomedll",name:"startsession",authorization:[{actor:Y.playerAccount,permission:"active"}],data:{account:Y.playerAccount,game:t}}];let i;"wcw"===Y.reactClass.state.wax.type?i=await Y.reactClass.state.wax.api.transact({actions:e},{blocksBehind:3,expireSeconds:30}):"anchor"===Y.reactClass.state.wax.type&&(i=await Y.reactClass.state.wax.signTransaction({actions:e},{blocksBehind:3,expireSeconds:30}))}catch(t){return Y.errorLayer&&(Y.errorLayer.destroy(),Y.errorLayer=null),Y.errorLayer=new x("ERROR!",t.message,Y.continueRestoredGame,[],Y),Y.currentScene.add.existing(Y.errorLayer),{error:t.message}}await l.emulateLatency(2500);const e=await fetch("/api/clashdome-game/restore-game/"+Y.playerAccount+"/"+t),i=await e.json();if(null!==Y.restoredGameLayer&&(Y.restoredGameLayer.destroy(),Y.restoredGameLayer=null),i.error)return Y.errorLayer&&(Y.errorLayer.destroy(),Y.errorLayer=null),Y.errorLayer=new x("ERROR!",i.error,Y.continueRestoredGame,[],Y),Y.currentScene.add.existing(Y.errorLayer),{error:i.error};{i.private&&(Y.private=!0,Y.colyseusManager||(Y.colyseusManager=new N,Y.colyseusManager.init()),await Y.colyseusManager.joinOrCreateRoom(i.roomId,Y.playerAccount));const t=JSON.parse(i.actions);if(Y.landID=i.landID,Y.duelSeed=parseInt(i.seed),Y.seedsCounter=i.seedsCounter,Y.adversaryScore=null===i.adversaryScore?null:parseInt(i.adversaryScore),Y.credential=i.credential,i.levelData&&(Y.levelData=JSON.parse(JSON.parse(i.levelData))),i.adversaryAccount[0],i.private&&0===i.state)return Y.waitingPrivateLayer=new U,Y.currentScene.add.existing(Y.waitingPrivateLayer),!0;Y.hasBoosterBeenPurchased=-1!==i.actions.indexOf(n.PURCHASE_BOOSTER),Y.feeStr=i.fee;let e=i.fee;-1!==e.indexOf(" CREDITS")?e.replace(" CREDITS",""):-1!==e.indexOf(" WAX")&&e.replace(" WAX",""),Y.fee=parseFloat(e),Y.adversaryAccount&&(l.getPlayersAvatarUrls([Y.adversaryAccount],Y.loadPlayerAvatars,Y),l.getPlayerNick(Y.adversaryAccount,r.ADVERSARY)),Y.startResumedGameCallback.apply(Y.gameManagerReference,[t])}})()}static removeRestoredGameLayer(){Y.restoredGameLayer.destroy(),Y.restoredGameLayer=null}static async fetchSeed(){if(Y.disableInputsCallback.apply(Y.gameManagerReference,[]),Y.development){const t=localStorage.getItem(Y.gameName+"-seedsCounter");if(parseInt(t)!==Y.seedsCounter)return Y.errorLayer=new x("ERROR!","Duplicated game session."),Y.currentScene.add.existing(Y.errorLayer),{seed:null,seedsCounter:null,error:"Duplicated game session."};(new Date).getTime()-new Date(Date.parse(Y.date)).getTime()>72e5&&(Y.disableInputsCallback.apply(Y.gameManagerReference,[]),localStorage.removeItem(Y.gameName+"-duelSeed"),localStorage.removeItem(Y.gameName+"-seedsCounter"),localStorage.removeItem(Y.gameName+"-actions"),localStorage.removeItem(Y.gameName+"-date"),localStorage.removeItem(Y.gameName+"-booster"),Y.expiredGame=!0,Y.showRestoredGameLayer());const e=localStorage.getItem(Y.gameName+"-actions");let i;i=e?JSON.parse(e):[];const n=Math.floor(1e6*Y.devPRNG.getRandom());return new Promise((t,e)=>{setTimeout(t,250+250*Math.random())}).then((function(){return i=i.concat(Y.actions),Y.seedsCounter++,localStorage.setItem(Y.gameName+"-seedsCounter",(parseInt(t)+1).toString()),i.push({type:"set seed",data:{seed:n,i:Y.seedsCounter}}),localStorage.setItem(Y.gameName+"-actions",JSON.stringify(i)),Y.actions=[],Y.enableInputsCallback.apply(Y.gameManagerReference,[]),{seed:n,seedsCounter:Y.seedsCounter,error:null}}))}try{const t=parseInt(l.GAME_IDS[Y.gameName]),e=await fetch("/api/clashdome-game/fetch-seed/"+Y.playerAccount+"/"+t+"/"+JSON.stringify(Y.actions)+"/"+Y.seedsCounter+"/"+Y.credential),i=await e.json();return i.error?(Y.errorLayer=new x("ERROR!",i.error),Y.currentScene.add.existing(Y.errorLayer),{seed:null,seedsCounter:null,error:i.error}):i.expired?(Y.expiredGame=!0,Y.date=i.date,Y.showRestoredGameLayer(),{seed:null,seedsCounter:null,error:"session expired"}):(Y.seedsCounter++,Y.actions=[],Y.enableInputsCallback.apply(Y.gameManagerReference,[]),{seed:i.seed,seedsCounter:i.seedsCounter,error:null})}catch(t){return Y.errorLayer=new x("ERROR!",t),Y.currentScene.add.existing(Y.errorLayer),{seed:null,seedsCounter:null,error:t}}}static async addAction(t,e,i){if(Y.actions.push(t),e){if(i&&Y.disableInputsCallback.apply(Y.gameManagerReference,[]),Y.development){const t=localStorage.getItem(Y.gameName+"-actions");let e;e=t?JSON.parse(t):[],e=e.concat(Y.actions),localStorage.setItem(Y.gameName+"-actions",JSON.stringify(e)),Y.actions=[],i&&Y.enableInputsCallback.apply(Y.gameManagerReference,[])}else try{const t=parseInt(l.GAME_IDS[Y.gameName]),e=await fetch("/api/clashdome-game/store-actions/"+Y.playerAccount+"/"+t+"/"+JSON.stringify(Y.actions)+"/"+Y.credential);if(200===e.status)Y.actions=[];else{const t=await e.json();Y.errorLayer=new x("ERROR!",t.error),Y.currentScene.add.existing(Y.errorLayer)}i&&Y.enableInputsCallback.apply(Y.gameManagerReference,[])}catch(t){Y.errorLayer=new x("ERROR!",t),Y.currentScene.add.existing(Y.errorLayer),i&&Y.enableInputsCallback.apply(Y.gameManagerReference,[])}Y.resumedGame&&(Y.resumedGame=!1)}}static onScoreUpdated(t){Y.score=t,Y.score>Y.allTimeHighScore&&Y.allTimeHighScore>0&&!Y.allTimeHighScoreShown?(Y.allTimeHighScoreShown=!0,Y.highScoreLayer=new M,Y.currentScene.add.existing(Y.highScoreLayer)):Y.score>Y.weekHighScore&&Y.weekHighScore>0&&!Y.weeklyHighScoreShown&&!Y.allTimeHighScoreShown&&(Y.weeklyHighScoreShown=!0,Y.highScoreLayer=new M(!0),Y.currentScene.add.existing(Y.highScoreLayer)),Y.private?t>0&&Y.colyseusManager.sendMessage(N.SCORE,JSON.stringify({username:Y.playerAccount,score:t})):null!==Y.adversaryScore&&Y.adversaryScore<Y.score&&!Y.skipLayerShown&&(Y.skipLayerShown=!0,Y.skipDuelLayer=new L,Y.currentScene.add.existing(Y.skipDuelLayer),Y.disableInputsCallback.apply(Y.gameManagerReference,[!0]))}static removeSkipDuelLayer(){Y.skipDuelLayer.destroy(),Y.skipDuelLayer=null,Y.enableInputsCallback.apply(Y.gameManagerReference,[!0])}static async onGameOver(t,e,i){if(Y.replayMode)return;if(Y.gameOver=!0,Y.score=t||Y.score,Y.score>Y.weekHighScore&&(Y.weekHighScore=Y.score),Y.score>Y.allTimeHighScore&&(Y.allTimeHighScore=Y.score),Y.disableInputsCallback.apply(Y.gameManagerReference,[]),!Y.credential)return;Y.skipDuelLayer&&(Y.skipDuelLayer.destroy(),Y.skipDuelLayer=null);let r=null;if(Y.waitingLayer?(Y.waitingLayer.destroy(),Y.waitingLayer=null):r=Y.gameOverGameCallback.apply(Y.gameManagerReference,[]),Y.boosterLayer&&(Y.inputsDisabled=!1,Y.boosterLayer.destroy(),Y.boosterLayer=null),e&&Y.addAction({type:n.LEAVE_GAME,data:r}),i&&Y.addAction({type:n.SKIP_GAME,data:r}),!Y.hasBoosterBeenPurchased&&!Y.hasBoosterBeenDiscarded&&l.isBoosterSupported()&&!e&&!Y.skipLayerShown)return Y.ludioBalance=null,Y.jigoBalance=null,(async()=>{0===Y.fee?Y.jigoBalance=await l.getCDTokenBalance(s.JIGO):Y.ludioBalance=await l.getCDTokenBalance(s.LUDIO)})(),new Promise((t,e)=>{setTimeout(t,Y.gameOverMenuDelay)}).then((function(){Y.boosterLayer=new R,Y.currentScene.add.existing(Y.boosterLayer)}));"maze"===Y.gameName&&l.getPlayersAvatarUrls([Y.levelData.author],Y.loadPlayerAvatars,Y),await Y.addWaitingLayer();const a=parseInt(l.GAME_IDS[Y.gameName]);let o,h;if(Y.development){"maze"===Y.gameName&&(Y.hasPlayerVotedLevel=!1);const t=localStorage.getItem(Y.gameName+"-actions");let e;return e=t?JSON.parse(t):[],e=e.concat(Y.actions),e.push({type:"end game",data:{userName:"gr.au.wam",score:Y.score,duration:1234}}),localStorage.removeItem(Y.gameName+"-actions"),localStorage.removeItem(Y.gameName+"-duelSeed"),localStorage.removeItem(Y.gameName+"-seedsCounter"),localStorage.removeItem(Y.gameName+"-date"),localStorage.removeItem(Y.gameName+"-booster"),o=700,h=600,new Promise((t,e)=>{setTimeout(t,500+500*Math.random())}).then((function(){let t=null;if(Y.engineClass){const i=new Y.engineClass;i.init(Y.landID,Y.engineInitObject),i.processActions(e),Y.score!==i.score?t="Score validation mismatch.\nClient:"+l.formatNumber(Y.score)+" Server:"+l.formatNumber(i.score):console.log("dev. validation OK")}t?(Y.errorLayer=new x("ERROR!",t),Y.currentScene.add.existing(Y.errorLayer)):(Y.waitingLayer.destroy(),Y.waitingLayer=null,Y.adversaryScore?(Y.duelID=7777,Y.gameOverLayerClosedDuel=new S(Y.score,o,Y.adversaryScore,h),Y.currentScene.add.existing(Y.gameOverLayerClosedDuel)):(Y.gameOverLayerOpenDuel=new A,Y.currentScene.add.existing(Y.gameOverLayerOpenDuel)))}))}try{const t=await fetch("/api/clashdome-game/update-score/"+Y.playerAccount+"/"+a+"/"+JSON.stringify(Y.actions)+"/"+Y.score+"/"+Y.credential),e=await t.json();if(Y.waitingLayer.destroy(),Y.waitingLayer=null,e.error)Y.errorLayer=new x("ERROR!",e.error),Y.currentScene.add.existing(Y.errorLayer);else if(e.expired){Y.expiredGame=!0;const t=new Date,i=new Date(Date.parse(e.date)),n=l.formatTime((t.getTime()-i.getTime())/1e3,!0);let s="Start time: "+i.toLocaleString()+"\n"+l.formatNumber(parseInt(n.h))+"h "+l.formatNumber(parseInt(n.m))+"m ago (duels expire automatically after 2 h)";Y.errorLayer=new x("SESSION EXPIRED!",s),Y.currentScene.add.existing(Y.errorLayer)}else Y.duelID=e.duelID,Y.score=parseInt(e.playerScore),o=Math.floor(e.tPlayer/1e3),Y.adversaryScore=null===e.adversaryScore?null:parseInt(e.adversaryScore),h=Math.floor(e.tAdversary/1e3),Y.playerMultiplier=e.playerMultiplier,Y.hasPlayerVotedLevel=e.hasPlayerVotedLevel,null!==Y.adversaryScore?(Y.private&&Y.adversaryScoreLayer.destroy(),Y.gameOverLayerClosedDuel=new S(Y.score,o,Y.adversaryScore,h),Y.currentScene.add.existing(Y.gameOverLayerClosedDuel)):(Y.gameOverLayerOpenDuel=new A,Y.currentScene.add.existing(Y.gameOverLayerOpenDuel),Y.private&&(Y.gameOverLayerOpenDuel.add(Y.adversaryScoreLayer),Y.adversaryScoreLayer.onAddedToGameOverLayer())),Y.private&&Y.colyseusManager.sendMessage(N.GAME_OVER,JSON.stringify({username:Y.playerAccount,score:Y.score,tPlayer:o,tAdversary:h}))}catch(e){Y.errorLayer=new x("ERROR!","Dome connection lost.",Y.onGameOver,[t],Y),Y.currentScene.add.existing(Y.errorLayer)}}static discardBooster(){Y.hasBoosterBeenDiscarded=!0,Y.onGameOver()}static async buyBooster(t){if(Y.development)return new Promise((t,e)=>{setTimeout(t,1500)}).then((function(){return Y.inputsDisabled=!1,Y.boosterLayer.destroy(),Y.boosterLayer=null,Y.enableInputsCallback.apply(Y.gameManagerReference,[]),Y.hasBoosterBeenPurchased=!0,Y.gameOver=!1,localStorage.setItem(Y.gameName+"-booster","true"),Y.addAction({type:n.PURCHASE_BOOSTER,data:null}),Y.purchasedBoosterCallback&&Y.purchasedBoosterCallback.apply(Y.gameManagerReference,[]),null}));{const e=l.getFormattedTokenBoosterFee(l.getBoosterFee());let i;i=0===Y.fee?l.GAME_TITLES[Y.gameName]+" booster fee free duel":l.GAME_TITLES[Y.gameName]+" booster fee WAX duel";const n=[{account:"clashdometkn",name:"transfer",authorization:[{actor:Y.playerAccount,permission:"active"}],data:{from:Y.playerAccount,to:"clashdomedll",quantity:e,memo:i}}];try{t||(Y.inputsDisabled=!0,"wcw"===Y.reactClass.state.wax.type?await Y.reactClass.state.wax.api.transact({actions:n},{blocksBehind:3,expireSeconds:30}):"anchor"===Y.reactClass.state.wax.type&&await Y.reactClass.state.wax.signTransaction({actions:n},{blocksBehind:3,expireSeconds:30}))}catch(t){return Y.errorLayer&&(Y.errorLayer.destroy(),Y.errorLayer=null),Y.errorLayer=new x("ERROR!",t.message,Y.buyBooster,[],Y),Y.currentScene.add.existing(Y.errorLayer),{error:t.message}}Y.inputsDisabled=!1;const s=parseInt(l.GAME_IDS[Y.gameName]),r=await fetch("/api/clashdome-game/booster-purchased/"+Y.playerAccount+"/"+s+"/"+e+"/"+Y.credential),a=await r.json();a.error?(Y.errorLayer=new x("ERROR!",a.error),Y.currentScene.add.existing(Y.errorLayer)):(Y.boosterLayer.destroy(),Y.boosterLayer=null,Y.hasBoosterBeenPurchased=!0,Y.gameOver=!1,Y.enableInputsCallback.apply(Y.gameManagerReference,[]),Y.purchasedBoosterCallback.apply(Y.gameManagerReference,[]))}}static onErrorWhilePurchasingBooster(){Y.inputsDisabled=!0,Y.boosterLayer=new R,Y.currentScene.add.existing(Y.boosterLayer)}static async onReplayGameOver(){Y.gameOver=!0,Y.gameOverGameCallback.apply(Y.gameManagerReference,[]),await Y.addReplayGameOverLayer()}static async proceedWithFreeDuel(){Y.fee=0,Y.freeDuelInfoLayer||(Y.freeDuelInfoLayer=new F,Y.currentScene.add.existing(Y.freeDuelInfoLayer)),Y.freeDuelInfoLayer.setProgressMessage("LOOKING FOR A RIVAL\nWITH SIMILAR SKILLS");const t=parseInt(l.GAME_IDS[Y.gameName]);if(Y.development){Y.duelSeed=Math.round(1e8*Math.random()),Y.duelID=123456,Y.adversaryScore=1e3,Y.adversaryAccount="clashdomebob",Y.credential=654321,Y.landID=Y.landID?Y.landID:0,Y.devPRNG=new c(Y.duelID),Y.seedsCounter=0,Y.date=(new Date).toString(),b.fetchLDevLevelData();const t=[{type:"start game",data:{seed:Y.duelID}}];return localStorage.setItem(Y.gameName+"-actions",JSON.stringify(t)),localStorage.setItem(Y.gameName+"-duelSeed",Y.duelSeed.toString()),localStorage.setItem(Y.gameName+"-seedsCounter",Y.seedsCounter.toString()),localStorage.setItem(Y.gameName+"-date",Y.date),localStorage.setItem(Y.gameName+"-fee",Y.fee.toString()),localStorage.setItem(Y.gameName+"-landID",Y.landID.toString()),new Promise((function(t,e){setTimeout(t,500)})).then((function(){Y.freeDuelInfoLayer.onDuelReady()}))}{const e=[{account:"clashdomedll",name:"startsession",authorization:[{actor:Y.playerAccount,permission:"active"}],data:{account:Y.playerAccount,game:t}}];try{"wcw"===Y.reactClass.state.wax.type?await Y.reactClass.state.wax.api.transact({actions:e},{blocksBehind:3,expireSeconds:30}):"anchor"===Y.reactClass.state.wax.type&&await Y.reactClass.state.wax.signTransaction({actions:e},{blocksBehind:3,expireSeconds:30})}catch(t){return Y.errorLayer&&(Y.errorLayer.destroy(),Y.errorLayer=null),Y.errorLayer=new x("ERROR!",t.message,Y.proceedWithFreeDuel,[],Y),void Y.currentScene.add.existing(Y.errorLayer)}try{const e=await l.fetchWithTimeout("/api/clashdome-game/get-duel-id-and-seed/"+Y.playerAccount+"/"+t+"/0.0000 LUDIO/"+Y.landID+"/"+Y.countryCode,{timeout:15e3}),i=await e.json();if(200!==e.status)return Y.errorLayer&&(Y.errorLayer.destroy(),Y.errorLayer=null),Y.errorLayer=new x("ERROR!",i.error,Y.proceedWithFreeDuel,[],Y),void Y.currentScene.add.existing(Y.errorLayer);Y.duelID=i.duelID,Y.landID=i.landID,Y.duelSeed=parseInt(i.seed),i.levelData&&(Y.levelData=JSON.parse(JSON.parse(i.levelData))),Y.adversaryScore=parseInt(i.adversaryScore),Y.adversaryAccount=i.adversaryAccount,Y.credential=i.credential,Y.freeDuelInfoLayer.setProgressMessage("SEED: "+Y.duelSeed),Y.freeDuelInfoLayer.onDuelReady()}catch(t){null===Y.duelID&&null===Y.errorLayer&&(Y.freeDuelInfoLayer&&(Y.freeDuelInfoLayer.destroy(),Y.freeDuelInfoLayer=null),Y.errorLayer=new x("ERROR!","The Dome failed to provide a rival.",Y.proceedWithFreeDuel,[],Y,"RETRY"),Y.currentScene.add.existing(Y.errorLayer))}}}static async proceedWithPrivateDuel(t){if(Y.feeStr=t,-1!==t.indexOf("WAX")){const e=t.replace(" WAX","");Y.fee=parseFloat(e)}else{const e=t.replace(" CDJIGO","");Y.fee=parseFloat(e)}Y.paymentLayerPrivateDuel.visible=!0,Y.paymentLayerPrivateDuel.setProgressMessage("CREATING PRIVATE DUEL");const e=await Y.getPrivateDuelIDAndSeed();e.error||(Y.duelID=e.duelID,Y.landID=e.landID,Y.duelSeed=e.seed,Y.isSecondPlayer=e.isSecondPlayer,Y.credential=e.credential,Y.paymentLayerPrivateDuel.destroy(),Y.paymentLayerPrivateDuel=null,Y.waitingPrivateLayer=new U,Y.currentScene.add.existing(Y.waitingPrivateLayer))}static async proceedWithPrivateDuelInvitation(){let t=await fetch("/api/clashdome-game/check-join-private-duel/"+Y.duelID);if((await t.json()).value){const t=await Y.getPrivateDuelIDAndSeed();t.error||(Y.duelID=t.duelID,Y.landID=t.landID,Y.duelSeed=t.seed,Y.isSecondPlayer=t.isSecondPlayer,Y.credential=t.credential,Y.startDuel())}else Y.errorLayer&&(Y.errorLayer.destroy(),Y.errorLayer=null),Y.errorLayer=new x("ERROR!","THIS DUEL CAN'T BE JOINED.",Y.proceedWithPrivateDuelInvitation,[!1],Y),Y.currentScene.add.existing(Y.errorLayer)}static async cancelPrivateDuelInvitation(){try{const t=parseInt(l.GAME_IDS[Y.gameName]),e=[{account:"clashdomedll",name:"startsession",authorization:[{actor:Y.playerAccount,permission:"active"}],data:{account:Y.playerAccount,game:t}}];let i;"wcw"===Y.reactClass.state.wax.type?i=await Y.reactClass.state.wax.api.transact({actions:e},{blocksBehind:3,expireSeconds:30}):"anchor"===Y.reactClass.state.wax.type&&(i=await Y.reactClass.state.wax.signTransaction({actions:e},{blocksBehind:3,expireSeconds:30}));let n=await fetch("/api/clashdome-game/reject-duel/"+Y.playerAccount+"/"+Y.duelID+"/"+t),s=await n.json();s.error?(Y.errorLayer&&(Y.errorLayer.destroy(),Y.errorLayer=null),Y.errorLayer=new x("ERROR!",s.error,Y.cancelPrivateDuelInvitation,[],Y),Y.currentScene.add.existing(Y.errorLayer)):Y.onRestart()}catch(t){Y.errorLayer&&(Y.errorLayer.destroy(),Y.errorLayer=null),Y.errorLayer=new x("ERROR!",t.message,Y.cancelPrivateDuelInvitation,[],Y),Y.currentScene.add.existing(Y.errorLayer)}}static startDuel(){Y.acceptPrivateLayer&&(Y.acceptPrivateLayer.destroy(),Y.acceptPrivateLayer=null),Y.paymentLayerPrivateDuel&&(Y.paymentLayerPrivateDuel.destroy(),Y.paymentLayerPrivateDuel=null),Y.freeDuelInfoLayer&&(Y.freeDuelInfoLayer.destroy(),Y.freeDuelInfoLayer=null),Y.startGameCallback.apply(Y.startGameCallbackScope,[])}static onGameStarted(){Y.private&&(Y.adversaryScoreLayer=new B,Y.currentScene.add.existing(Y.adversaryScoreLayer))}static onRestart(){Y.actions=[],Y.seedsCounter=0,Y.duelID=null,Y.gameOver=!1,Y.credential=null,Y.score=0,Y.adversaryScore=null,Y.adversaryNick=null,Y.adversaryAccount=null,Y.skipLayerShown=!1,Y.resumedGame=!1,Y.expiredGame=!1,Y.isSkipPossible=!0,Y.hasBoosterBeenPurchased=!1,Y.hasBoosterBeenDiscarded=!1,Y.duelSeed=null,Y.gameOverLayerClosedDuel=null,Y.weeklyHighScoreShown=!1,Y.allTimeHighScoreShown=!1,Y.private=!1,Y.isSecondPlayer=null;const t=new URLSearchParams(window.location.search);Y.landID=parseInt(t.get("land"))||0,Y.duelID=parseInt(t.get("duelID"))||null,Y.enableInputsCallback.apply(Y.gameManagerReference,[]),Y.goToHomeScene()}static restartReplay(){Y.gameOver=!1,Y.currentScene.scene.restart()}static goToHomeScene(){Y.goToHomeCallback.apply(Y.gameManagerReference,[])}static async showPaymentLayer(t,e){if(Y.startGameCallback=t,Y.startGameCallbackScope=e,l.getPlayersAvatarUrls([Y.playerAccount],Y.loadPlayerAvatars,Y),l.getPlayerNick(Y.playerAccount,r.PLAYER),Y.adversaryAccount&&(l.getPlayersAvatarUrls([Y.adversaryAccount],Y.loadPlayerAvatars,Y),l.getPlayerNick(Y.adversaryAccount,r.ADVERSARY)),Y.private){if(!Y.adversaryAccount)return Y.errorLayer=new x("ERROR!","Private duels require the username of the opponent. Go to your friendo HUB to send a new invitation.",null,[],Y),void Y.currentScene.add.existing(Y.errorLayer);Y.paymentLayerPrivateDuel=new z,Y.currentScene.add.existing(Y.paymentLayerPrivateDuel);let t=!1;0!==Y.landID&&(t=await l.doesPlayerOwnLand()),0===Y.landID||t||Y.paymentLayerPrivateDuel.disableButtons()}else Y.proceedWithFreeDuel()}static onReplayStart(t){Y.replayInfoLayer=new D(t),Y.currentScene.add.existing(Y.replayInfoLayer)}static onClickPlay(){Y.startGameCallback.apply(Y.startGameCallbackScope,[])}static async onAdversaryJoined(){if(Y.waitingPrivateLayer&&Y.private){const t=parseInt(l.GAME_IDS[Y.gameName]),e=await fetch("/api/clashdome-game/create-private-ongoing/"+Y.duelID+"/"+Y.playerAccount+"/"+t),i=await e.json();Y.credential=i.credential,Y.waitingPrivateLayer&&(Y.waitingPrivateLayer.destroy(),Y.waitingPrivateLayer=null),Y.startGameCallback.apply(Y.startGameCallbackScope,[])}}static loadPlayerAvatars(t){if(0!==t.length){for(let e=0;e<t.length;e++)t[e].url&&Y.currentScene.load.image("avatar-"+t[e].account,t[e].url);Y.currentScene.load.once("complete",(function(){Y.private&&Y.restoredGameLayer&&Y.restoredGameLayer.onAdversaryAvatarLoaded(),Y.gameOverLayerClosedDuel&&Y.gameOverLayerClosedDuel.onPlayersAvatarsLoaded(),Y.gameOverLayerOpenDuel&&Y.gameOverLayerOpenDuel.onPlayersAvatarsLoaded(),Y.acceptPrivateLayer&&Y.acceptPrivateLayer.onAdversaryAvatarLoaded(t[0].account),Y.paymentLayerPrivateDuel&&Y.paymentLayerPrivateDuel.onAdversaryAvatarLoaded(),Y.waitingPrivateLayer&&Y.waitingPrivateLayer.onAdversaryAvatarLoaded()})),Y.currentScene.load.start()}else Y.gameOverLayerClosedDuel&&Y.gameOverLayerClosedDuel.onPlayersAvatarsLoaded()}static async addWaitingLayer(){return new Promise((t,e)=>{setTimeout(t,Y.gameOverMenuDelay)}).then((function(){Y.waitingLayer=new C(Y.currentScene),Y.currentScene.add.existing(Y.waitingLayer)}))}static async addReplayGameOverLayer(){return new Promise((t,e)=>{setTimeout(t,Y.gameOverMenuDelay)}).then((function(){Y.gameOverLayerReplay=new P,Y.currentScene.add.existing(Y.gameOverLayerReplay)}))}static async getPrivateDuelIDAndSeed(t){const e=parseInt(l.GAME_IDS[Y.gameName]);if(Y.inputsDisabled=!0,Y.development){const t=Math.round(1e8*Math.random()),e=123456,i=654321,n=Y.landID?Y.landID:1;Y.devPRNG=new c(t),Y.seedsCounter=0,Y.date=(new Date).toString();const s=[{type:"start game",data:{seed:t}}];return localStorage.setItem(Y.gameName+"-actions",JSON.stringify(s)),localStorage.setItem(Y.gameName+"-duelSeed",t.toString()),localStorage.setItem(Y.gameName+"-seedsCounter",Y.seedsCounter.toString()),localStorage.setItem(Y.gameName+"-date",Y.date),localStorage.setItem(Y.gameName+"-fee",Y.fee.toString()),localStorage.setItem(Y.gameName+"-landID",Y.landID.toString()),new Promise((function(t,e){setTimeout(t,500)})).then((function(){return Y.inputsDisabled=!1,{duelID:e,landID:n,seed:t,adversaryScore:0,adversaryAccount:Y.adversaryAccount,credential:i}}))}{let i;i=-1===Y.feeStr.indexOf("WAX")?[{account:"clashdometkn",name:"transfer",authorization:[{actor:Y.playerAccount,permission:"active"}],data:{from:Y.playerAccount,to:"clashdomedll",quantity:Y.feeStr,memo:l.GAME_TITLES[Y.gameName]+" private duel setup fee"}}]:[{account:"eosio.token",name:"transfer",authorization:[{actor:Y.playerAccount,permission:"active"}],data:{from:Y.playerAccount,to:"clashdomedll",quantity:Y.feeStr,memo:l.GAME_TITLES[Y.gameName]+" private duel fee"}}];try{t||("wcw"===Y.reactClass.state.wax.type?await Y.reactClass.state.wax.api.transact({actions:i},{blocksBehind:3,expireSeconds:30}):"anchor"===Y.reactClass.state.wax.type&&await Y.reactClass.state.wax.signTransaction({actions:i},{blocksBehind:3,expireSeconds:30}))}catch(t){return Y.errorLayer&&(Y.errorLayer.destroy(),Y.errorLayer=null),Y.errorLayer=new x("ERROR!",t.message,Y.getPrivateDuelIDAndSeed,[!1],Y),Y.currentScene.add.existing(Y.errorLayer),{error:t.message}}try{const t=await l.fetchWithTimeout("/api/clashdome-game/join-private-duel/"+Y.playerAccount+"/"+e+"/"+Y.feeStr+"/"+Y.landID+"/"+Y.countryCode+"/"+Y.adversaryAccount+"/"+Y.duelID,{timeout:15e3}),i=await t.json();return i.error?(Y.errorLayer=new x("ERROR!",i.error,Y.getPrivateDuelIDAndSeed,[!1],Y),Y.currentScene.add.existing(Y.errorLayer),{error:i.error}):(await Y.colyseusManager.joinOrCreateRoom(i.roomId,Y.playerAccount),Y.inputsDisabled=!1,{duelID:i.duelID,landID:i.landID,seed:i.seed,isSecondPlayer:i.isSecondPlayer,credential:i.credential})}catch(t){return Y.errorLayer=new x("ERROR!",t.message,Y.getPrivateDuelIDAndSeed,[!0],Y),Y.currentScene.add.existing(Y.errorLayer),{error:"server doesn't respond to open private duel"}}}}}Y.VERSION="0.4.3";class X{constructor(t){console.log("ClashDomeMessageClient:","started"),this._callbacks=t,this._onStartGame=this._onStartGame.bind(this),this._onLoginSuccess=this._onLoginSuccess.bind(this),this._onCustomEvent=this._onCustomEvent.bind(this),this._onDisposeGame=this._onDisposeGame.bind(this),this._customEventListeners=[],window.addEventListener("start-game",this._onStartGame),window.addEventListener("login-success",this._onLoginSuccess),window.addEventListener("clashdome-server-event",this._onCustomEvent),window.addEventListener("dispose-game",this._onDisposeGame)}dispatchGameStarted(t){console.log("ClashDomeMessageClient:","dispatchGameStarted");const e=new Event("game-started");e.game=t,window.dispatchEvent(e)}dispatchMessageToWeb(t){console.log("ClashDomeMessageClient:","dispatchMessageToWeb",t);const e=new Event("clashdome-client-event");e.data=t,window.dispatchEvent(e)}addCustomEventListener(t,e,i){this._customEventListeners.push({id:t,callback:e,context:i})}removeCustomEventListener(t){const e=this._customEventListeners.findIndex(e=>e.id===t);this._customEventListeners.splice(e,1)}removeCustomEventListeners(){this._customEventListeners=[]}_onStartGame(t){console.log("ClashDomeMessageClient:","_onStartGame",t),this._callbacks.onStartGame(t.reactClass),window.removeEventListener("start-game",this._onStartGame)}_onDisposeGame(){window.removeEventListener("start-game",this._onStartGame),window.removeEventListener("login-success",this._onLoginSuccess),window.removeEventListener("clashdome-server-event",this._onCustomEvent),window.removeEventListener("dispose-game",this._onDisposeGame)}_onLoginSuccess(){console.log("ClashDomeMessageClient:","_onLoginSuccess"),this._callbacks.onLoginSuccess(),window.removeEventListener("login-success",this._onLoginSuccess)}_onCustomEvent(t){console.log("ClashDomeMessageClient:","custom-event:",t),this._customEventListeners.forEach(e=>{e.id===t.data.id&&e.callback.call(e.context,t.data.payload)})}}i.d(e,"ActionType",(function(){return n})),i.d(e,"DataType",(function(){return o})),i.d(e,"SDK",(function(){return Y})),i.d(e,"Utils",(function(){return l})),i.d(e,"ClashDomeMessageClient",(function(){return X})),i.d(e,"DataManager",(function(){return b}))},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(7),a=function(t){function e(e,i,n,s,a,o,h){var l=this;return o=o||a,l=t.call(this,e,i,n,s,a)||this,h?(l.setInteractive(l.scene.input.makePixelPerfect(20)),l.setInteractive({pixelPerfect:!0,useHandCursor:!0})):l.setInteractive({useHandCursor:!0}),a!==o&&(l.on("pointerover",(function(){l.setFrame(o)}),l),l.on("pointerout",(function(){l.setFrame(a)}),l),l.on("pointerdown",(function(){l.setFrame(o),r.AudioManager.playSound("btn_click")}),l),l.on("pointerup",(function(){l.setFrame(a)}),l)),l}return s(e,t),e.prototype.disable=function(){this.disableInteractive(),this.alpha=.4},e.prototype.enable=function(){this.setInteractive({pixelPerfect:!0}),this.alpha=1},e.prototype.setFrames=function(t,e){var i=this;void 0===e&&(e=t),this.on("pointerover",(function(){i.setFrame(e)}),this),this.on("pointerout",(function(){i.setFrame(t)}),this),this.on("pointerdown",(function(){i.setFrame(e)}),this),this.on("pointerup",(function(){i.setFrame(t)}),this)},e.prototype.setInflationTween=function(t,e,i,n,s){var r=this;void 0===e&&(e=this.scaleX),void 0===i&&(i=this.scaleY),this.setScale(e,i),this.defaultScale={x:e,y:i},n&&(s||(s={ease:Phaser.Math.Easing.Cubic.Out,duration:200})),this.on("pointerover",(function(){n?r.scene.tweens.add({targets:[r],scaleX:r.defaultScale.x*t,scaleY:r.defaultScale.y*t,ease:s.ease,duration:s.duration}):r.setScale(r.defaultScale.x*t,r.defaultScale.y*t)}),this),this.on("pointerout",(function(){n?r.scene.tweens.add({targets:[r],scaleX:r.defaultScale.x,scaleY:r.defaultScale.y,ease:s.ease,duration:s.duration}):r.setScale(r.defaultScale.x,r.defaultScale.y)}),this),this.on("pointerdown",(function(){r.scene.game.device.os.desktop?r.setScale(r.defaultScale.x,r.defaultScale.y):r.setScale(r.defaultScale.x*t,r.defaultScale.y*t)}),this),this.on("pointerup",(function(){r.scene.game.device.os.desktop?r.setScale(r.defaultScale.x*t,r.defaultScale.y*t):r.setScale(r.defaultScale.x,r.defaultScale.y)}),this)},e.prototype.onUp=function(t,e){this.on("pointerup",t,e)},e.prototype.onDown=function(t,e){this.on("pointerdown",t,e)},e.prototype.onOver=function(t,e){this.on("pointerover",t,e)},e.prototype.onOut=function(t,e){this.on("pointerout",t,e)},e}(Phaser.GameObjects.Image);e.Button=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),s=i(8),r=function(){function t(){}return t.init=function(){t.howl.mute(n.GameVars.gameData.muted),t.lastEffectPlayed=null,t.loopID=null,t.loopKey=null},t.toggleAudioState=function(){n.GameVars.gameData.muted=!n.GameVars.gameData.muted,s.GameManager.writeGameData(),t.howl&&t.howl.mute(n.GameVars.gameData.muted)},t.mute=function(){null!==t.howl&&t.howl.mute(!0)},t.unmute=function(){null!==t.howl&&(n.GameVars.gameData.muted||t.howl.mute(!1))},t.playSound=function(e,i,n,s,r){var a=(new Date).getTime();if(!(a-t.timeLastEffectPlayed<100&&t.lastEffectPlayed===e||i&&t.loopKey===e)){t.timeLastEffectPlayed=a,t.lastEffectPlayed=e,i=i||!1,n=n||1;var o=t.howl.play(e);return t.howl.volume(n,o),i&&(t.loopKey=e,t.loopID&&t.howl.stop(t.loopID),t.loopID=o,t.howl.loop(!0,t.loopID)),s&&t.howl.rate(s,o),r&&t.howl.seek(r,o),o}},t.stopSound=function(e){t.howl.stop(e)},t.setLoopVolume=function(e,i){t.howl.fade(e,i,500,t.loopID)},t.stopLoop=function(e,i){var n=t.loopID||e;n&&(i?t.howl.fade(1,0,1e3,n):t.howl.stop(n),t.loopID=null,t.loopKey=null)},t.onBlur=function(){!n.GameVars.gameData.muted&&t.howl&&t.howl.mute(!0)},t.onFocus=function(){!n.GameVars.gameData.muted&&t.howl&&t.howl.mute(!1)},t.howl=null,t}();e.AudioManager=r},function(t,e,i){"use strict";var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function a(t){try{h(n.next(t))}catch(t){r(t)}}function o(t){try{h(n.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}h((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var i,n,s,r,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function o(r){return function(o){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(s=2&r[0]?n.return:r[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(s=a.trys,(s=s.length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){a.label=r[1];break}if(6===r[0]&&a.label<s[1]){a.label=s[1],s=r;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(r);break}s[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,o])}}},r=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),s=0;for(e=0;e<i;e++)for(var r=arguments[e],a=0,o=r.length;a<o;a++,s++)n[s]=r[a];return n},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var o=i(1),h=i(0),l=(a(i(2)),a(i(5))),c=i(7),u=i(26),d=function(){function t(){}return t.init=function(){if(console.log("TODO: usar MathUtils.fixNumber en el motor para calcular las posiciones de los fantasmas"),h.GameVars.currentScene.sys.game.device.os.desktop)h.GameVars.scaleX=1;else{h.GameVars.currentScene.game.scale.displaySize=h.GameVars.currentScene.game.scale.parentSize,h.GameVars.currentScene.game.scale.refresh();var e=window.innerWidth/window.innerHeight;h.GameVars.scaleX=o.GameConstants.GAME_WIDTH/o.GameConstants.GAME_HEIGHT/e}var i={reactClass:h.GameVars.reactClass,gameName:"maze",activatePaymentLayer:!0,development:!1,gameOverMenuDelay:750,startResumedGameCallback:t.startResumedGameCallback,goToHomeCallback:t.enterSplashScene,disableInputsCallback:t.disableInputs,enableInputsCallback:t.enableInputs,gameOverCallback:t.onGameOver,purchasedBoosterCallback:null,gameManagerReference:t,engineClass:null};l.SDK.init(i),h.GameVars.levelData=null,h.GameVars.inputsEnabled=!0,h.GameVars.editionTimeStamp=null,h.GameVars.testingLevel=!1,h.GameVars.notStakedNFTs=[],h.GameVars.hasPlayerLevelsStaked=!1,t.readGameData()},t.readGameData=function(){t.getGameStorageData(o.GameConstants.SAVED_GAME_DATA_KEY,(function(e){e?h.GameVars.gameData=JSON.parse(e):(h.GameVars.gameData={muted:!1},t.writeGameData()),t.startGame()}))},t.setCurrentScene=function(t){h.GameVars.currentScene=t,l.SDK.setCurrentScene(h.GameVars.currentScene)},t.onGameAssetsLoaded=function(){c.AudioManager.init(),h.GameVars.currentScene.time.delayedCall(500,(function(){l.SDK.checkPlayerLogin(t.onGameConfigReceived,t.enterBoardScene,t)}),[],t)},t.onGameConfigReceived=function(){var e=this;l.SDK.replayMode?n(e,void 0,void 0,(function(){var e;return s(this,(function(i){switch(i.label){case 0:return[4,l.DataManager.getReplayLog()];case 1:return e=i.sent(),h.GameVars.actions=e.actions,t.enterBoardScene(),[2]}}))})):l.SDK.resumedGame?l.SDK.showRestoredGameLayer():(h.GameVars.actions=null,n(e,void 0,void 0,(function(){var e;return s(this,(function(i){switch(i.label){case 0:return e=h.GameVars,[4,l.Utils.doesPlayerOwnVIP()];case 1:return e.hasPlayerVIPPass=i.sent(),t.enterSplashScene(),[2]}}))})))},t.enterSplashScene=function(){h.GameVars.currentScene.scene.start("SplashScene")},t.enterLevelEditionScene=function(){h.GameVars.currentScene.scene.start("LevelEditionScene")},t.enterPaymentScene=function(){h.GameVars.isDesktop||h.GameVars.currentScene.scale.startFullscreen(),h.GameVars.currentScene.scene.start("PaymentScene")},t.enterBoardScene=function(){h.GameVars.currentScene.scene.start("BoardScene")},t.enterStakeScene=function(){h.GameVars.currentScene.scene.start("StakeScene")},t.enterUnstakeScene=function(){h.GameVars.currentScene.scene.start("UnstakeScene")},t.resetGame=function(){t.enterBoardScene()},t.onLevelMinted=function(){t.retrieveEditedLevelData()},t.retrieveEditedLevelData=function(){return n(this,void 0,void 0,(function(){var e;return s(this,(function(i){switch(i.label){case 0:return[4,t.checkPlayerStakedLevels()];case 1:return i.sent(),[4,t.checkPlayerWisps()];case 2:return i.sent(),[4,l.DataManager.retrieveGameData(l.DataType.EDITED_LEVEL)];case 3:return(e=i.sent()).gameData?(h.GameVars.editedLevelData=JSON.parse(e.gameData),h.GameVars.editionTimeStamp=e.t):(h.GameVars.editedLevelData={board:null,interactiveItems:null,gameOverOptions:{time:0,lifes:3},playerData:{position:null,iVelocity:null},ghostData:[],editionTimestamp:0,author:l.SDK.playerAccount},h.GameVars.editionTimeStamp=null),t.enterLevelEditionScene(),[2]}}))}))},t.checkPlayerStakedLevels=function(){return n(this,void 0,void 0,(function(){var t;return s(this,(function(e){switch(e.label){case 0:return[4,l.Utils.getTableRows("clashdomepay","transfers",1,1,"i64",l.SDK.playerAccount,l.SDK.playerAccount,!1,0)];case 1:return t=e.sent(),t=r(t.rows)[0],h.GameVars.hasPlayerLevelsStaked=t&&t.t_data&&t.t_data.some((function(t){return t.schema===o.GameConstants.SCHEMA_LEVELS})),[2]}}))}))},t.checkPlayerWisps=function(){return n(this,void 0,void 0,(function(){var t;return s(this,(function(e){switch(e.label){case 0:return[4,l.Utils.getTableRows("clashdomemaz","playerwisps",1,1,"i64",l.SDK.playerAccount,l.SDK.playerAccount,!1,0)];case 1:return t=e.sent(),(t=r(t.rows)[0])?(delete t.account,h.GameVars.wispData=t):h.GameVars.wispData={red:0,blue:0,yellow:0,green:0},[2]}}))}))},t.startResumedGameCallback=function(){t.enterBoardScene()},t.disableInputs=function(){h.GameVars.inputsEnabled=!1},t.enableInputs=function(){h.GameVars.inputsEnabled=!0},t.onGameOver=function(){u.BoardScene.currentInstance.onGameOver()},t.writeGameData=function(){t.setGameStorageData(o.GameConstants.SAVED_GAME_DATA_KEY,h.GameVars.gameData,(function(){t.log("game data successfully saved")}))},t.log=function(t,e){o.GameConstants.VERBOSE&&(e?console.error(t+":",e):console.log(t))},t.logBoard=function(){o.GameConstants.VERBOSE&&console.clear()},t.startGame=function(){h.GameVars.currentScene.scene.start("PreloadScene")},t.getGameStorageData=function(t,e){e(localStorage.getItem(t))},t.setGameStorageData=function(t,e,i){localStorage.setItem(t,JSON.stringify(e)),i()},t}();e.GameManager=d},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(1),o=i(0),h=i(129),l=i(65),c=i(130),u=i(131),d=i(132),f=i(16),p=i(7),g=r(i(2)),m=function(t){function e(i){var n=t.call(this,i)||this;return e.currentInstance=n,n.y=e.CONTAINER_DY,n.scaleX=o.GameVars.scaleX,n.scaleDots=1,n.shaking=!1,n.shakingDuration=0,n.f=0,n.floorTiles=[],n}return s(e,t),e.prototype.update=function(){if(this.playerActor&&this.playerActor.update(),this.fxContainer.update(),this.backgroundContainer.sort("y"),this.actorsContainer.sort("y"),this.ghostActors.length>0)for(var t=0;t<this.ghostActors.length;t++)this.ghostActors[t].update();if(a.GameConstants.DEBUG&&this.debugContainer.update(),1!==this.scaleDots)for(var i=o.GameVars.mazeEngine.c,n=o.GameVars.mazeEngine.r,s=0;s<i;s++)for(var r=0;r<n;r++){var h=o.GameVars.mazeEngine.interactiveItems[s][r];h!==g.Cells.DOT&&h!==g.Cells.POWER_PELLET||this.interactiveItems[s][r].setScale(this.scaleDots)}this.shaking?(this.f++,this.x=this.px+1.5-3*Math.random(),this.y=e.CONTAINER_DY+1.5-3*Math.random(),this.f===this.shakingDuration&&(this.shaking=!1)):(this.x=this.px,this.y=e.CONTAINER_DY)},e.prototype.startGame=function(){this.px=a.GameConstants.GAME_WIDTH/2-(o.GameVars.mazeEngine.c-1)*e.CELLS_SIZE/2*o.GameVars.scaleX,this.initBackground(),this.interactiveItemsContainer=new Phaser.GameObjects.Container(this.scene),this.add(this.interactiveItemsContainer),this.initInteractiveItems(),this.actorsContainer=new Phaser.GameObjects.Container(this.scene),this.add(this.actorsContainer),this.playerActor=new l.PlayerActor(this.scene,o.GameVars.mazeEngine.playerManager.player),this.actorsContainer.add(this.playerActor),this.ghostActors=[],a.GameConstants.DEBUG&&(this.debugContainer=new c.DebugContainer(this.scene),this.add(this.debugContainer)),this.fxContainer=new u.FXContainer(this.scene),this.add(this.fxContainer)},e.prototype.onGameOver=function(){this.playerActor.onGameOver()},e.prototype.onFrightenedStateEntered=function(){for(var t=0;t<this.ghostActors.length;t++)this.ghostActors[t].blinking=!1;for(t=0;t<this.floorTiles.length;t++)this.floorTiles[t].play("floor")},e.prototype.onFrightenedSignal=function(){for(var t=0;t<this.ghostActors.length;t++)this.ghostActors[t].blinking=!0;this.playerActor.blinking=!0},e.prototype.onFrightenedStateLeft=function(){for(var t=0;t<this.ghostActors.length;t++)this.ghostActors[t].blinking=!1;this.playerActor.blinking=!1;for(t=0;t<this.floorTiles.length;t++)this.floorTiles[t].anims.stop(),this.floorTiles[t].setFrame("floor")},e.prototype.shake=function(){this.shaking=!0,this.shakingDuration=f.BoardManager.FROZEN_FRAMES,this.f=0},e.prototype.onContactWithInteractiveElement=function(t,e){t!==g.Cells.DOT&&t!==g.Cells.POWER_PELLET||(this.interactiveItems[e.c][e.r].visible=!1,t===g.Cells.DOT?this.fxContainer.onDotEaten(e):p.AudioManager.playSound("big_pill_fx"))},e.prototype.onGhostSpawned=function(t){var e=new h.GhostActor(this.scene,t);this.actorsContainer.add(e),this.ghostActors.push(e),this.fxContainer.onGhostRespawned(e),p.AudioManager.playSound("ghast_reappears")},e.prototype.onGhostEaten=function(t,e){var i=this.getGhostActor(t);if(i){var n=this.ghostActors.indexOf(i);-1!==n?(this.fxContainer.onGhostEaten(i,e),this.ghostActors.splice(n,1),i.destroy()):console.warn("no se encuentra fantasma en el array"),this.shake(),p.AudioManager.playSound("eaten_ghast")}else console.warn("no se encuentra al fantasma")},e.prototype.onPlayerRespawned=function(){this.playerActor.onPlayerRespawned()},e.prototype.onPlayerHit=function(){this.fxContainer.onPlayerHit(),this.playerActor.onPlayerHit(),this.shaking=!0,this.shakingDuration=f.BoardManager.FROZEN_FRAMES/3,this.f=0},e.prototype.onPlayerTeleported=function(t,e){this.playerActor.onTeleported(t),this.fxContainer.onPlayerTeleported(t,e),p.AudioManager.playSound("teleport")},e.prototype.onPlayerHitSinglePortal=function(t,e){this.fxContainer.onPlayerHitSinglePortal(t,e),p.AudioManager.playSound("teleport")},e.prototype.onLevelReset=function(){for(var t=o.GameVars.mazeEngine.c,e=o.GameVars.mazeEngine.r,i=0;i<t;i++)for(var n=0;n<e;n++){var s=o.GameVars.mazeEngine.interactiveItems[i][n];s!==g.Cells.DOT&&s!==g.Cells.POWER_PELLET||(this.interactiveItems[i][n].visible=!0,this.interactiveItems[i][n].setScale(0))}this.scaleDots=0,this.scene.tweens.add({targets:this,scaleDots:1,ease:Phaser.Math.Easing.Cubic.Out,duration:600})},e.prototype.initBackground=function(){this.pathContainer=new Phaser.GameObjects.Container(this.scene),this.add(this.pathContainer),this.backgroundContainer=new Phaser.GameObjects.Container(this.scene),this.add(this.backgroundContainer);for(var t=o.GameVars.mazeEngine.board,i=o.GameVars.mazeEngine.c,n=o.GameVars.mazeEngine.r,s=0;s<i;s++)for(var r=0;r<n;r++){var a=s*e.CELLS_SIZE,h=r*e.CELLS_SIZE,l=void 0;switch(t[s][r]){case g.Cells.WALL:l=t[s][r+1]&&t[s][r+1]!==g.Cells.GROUND?t[s][r+1]===g.Cells.WALL?new Phaser.GameObjects.Image(this.scene,a,h,"texture_atlas_1","v_wall"):new Phaser.GameObjects.Image(this.scene,a,h,"texture_atlas_1","h_wall_1"):new Phaser.GameObjects.Image(this.scene,a,h,"texture_atlas_1","outer_wall"),this.backgroundContainer.add(l);break;case g.Cells.GROUND:var c=void 0,u=Math.random();c=u>.4?1:u>.2?2:3,l=new Phaser.GameObjects.Image(this.scene,a,h,"texture_atlas_1","grass_0"+c),this.pathContainer.add(l);break;case g.Cells.PATH:l=new Phaser.GameObjects.Sprite(this.scene,a,h,"texture_atlas_1","floor"),this.scene.add.existing(l),this.pathContainer.add(l),this.floorTiles.push(l)}}var d=o.GameVars.mazeEngine.playerSpawningPosition,f=d.x*e.CELLS_SIZE,p=d.y*e.CELLS_SIZE,m=new Phaser.GameObjects.Image(this.scene,f,p,"texture_atlas_1","spawn_mark_player");this.pathContainer.add(m);for(var v=0;v<o.GameVars.mazeEngine.ghostData.length;v++)f=(d=o.GameVars.mazeEngine.ghostData[v].position).x*e.CELLS_SIZE,p=d.y*e.CELLS_SIZE,m=new Phaser.GameObjects.Image(this.scene,f,p,"texture_atlas_1","spawn_mark_ghosts"),this.pathContainer.add(m)},e.prototype.initInteractiveItems=function(){var t=o.GameVars.mazeEngine.interactiveItems,i=o.GameVars.mazeEngine.c,n=o.GameVars.mazeEngine.r;this.interactiveItems=[];for(var s=0;s<i;s++){this.interactiveItems[s]=[];for(var r=0;r<n;r++){var a=s*e.CELLS_SIZE,h=r*e.CELLS_SIZE;switch(t[s][r]){case g.Cells.EMPTY:this.interactiveItems[s][r]=null;break;case g.Cells.DOT:var l=new Phaser.GameObjects.Sprite(this.scene,a,h-.2*e.CELLS_SIZE,"texture_atlas_1","pill_01");this.scene.add.existing(l),this.interactiveItems[s][r]=l,l.play("dot");var c=l.anims.currentAnim.frames.length,u=l.anims.currentAnim.frames[Math.floor(c*Math.random())];l.anims.setCurrentFrame(u),this.interactiveItemsContainer.add(l);break;case g.Cells.POWER_PELLET:var f=new Phaser.GameObjects.Sprite(this.scene,a,h-.2*e.CELLS_SIZE,"texture_atlas_1","pill_big_01");this.scene.add.existing(f),this.interactiveItems[s][r]=f,f.play("pill_big_01"),this.interactiveItemsContainer.add(f);break;case g.Cells.PORTAL_1:case g.Cells.PORTAL_2:case g.Cells.PORTAL_3:case g.Cells.PORTAL_4:var p=new d.Portal(this.scene,t[s][r]);p.x=a,p.y=h-.15*e.CELLS_SIZE,this.interactiveItemsContainer.add(p)}}}},e.prototype.getGhostActor=function(t){for(var e,i=0;i<this.ghostActors.length;i++)if(this.ghostActors[i].ghost.id===t.id){e=this.ghostActors[i];break}return e},e.CELLS_SIZE=32,e.CONTAINER_DY=90,e}(Phaser.GameObjects.Container);e.BoardContainer=m},function(t,e,i){"use strict";var n=i(17),s=i(74);function r(t,e){return 55296==(64512&t.charCodeAt(e))&&(!(e<0||e+1>=t.length)&&56320==(64512&t.charCodeAt(e+1)))}function a(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function o(t){return 1===t.length?"0"+t:t}function h(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}e.inherits=s,e.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var i=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),s=0;s<t.length;s+=2)i.push(parseInt(t[s]+t[s+1],16))}else for(var n=0,s=0;s<t.length;s++){var a=t.charCodeAt(s);a<128?i[n++]=a:a<2048?(i[n++]=a>>6|192,i[n++]=63&a|128):r(t,s)?(a=65536+((1023&a)<<10)+(1023&t.charCodeAt(++s)),i[n++]=a>>18|240,i[n++]=a>>12&63|128,i[n++]=a>>6&63|128,i[n++]=63&a|128):(i[n++]=a>>12|224,i[n++]=a>>6&63|128,i[n++]=63&a|128)}else for(s=0;s<t.length;s++)i[s]=0|t[s];return i},e.toHex=function(t){for(var e="",i=0;i<t.length;i++)e+=o(t[i].toString(16));return e},e.htonl=a,e.toHex32=function(t,e){for(var i="",n=0;n<t.length;n++){var s=t[n];"little"===e&&(s=a(s)),i+=h(s.toString(16))}return i},e.zero2=o,e.zero8=h,e.join32=function(t,e,i,s){var r=i-e;n(r%4==0);for(var a=new Array(r/4),o=0,h=e;o<a.length;o++,h+=4){var l;l="big"===s?t[h]<<24|t[h+1]<<16|t[h+2]<<8|t[h+3]:t[h+3]<<24|t[h+2]<<16|t[h+1]<<8|t[h],a[o]=l>>>0}return a},e.split32=function(t,e){for(var i=new Array(4*t.length),n=0,s=0;n<t.length;n++,s+=4){var r=t[n];"big"===e?(i[s]=r>>>24,i[s+1]=r>>>16&255,i[s+2]=r>>>8&255,i[s+3]=255&r):(i[s+3]=r>>>24,i[s+2]=r>>>16&255,i[s+1]=r>>>8&255,i[s]=255&r)}return i},e.rotr32=function(t,e){return t>>>e|t<<32-e},e.rotl32=function(t,e){return t<<e|t>>>32-e},e.sum32=function(t,e){return t+e>>>0},e.sum32_3=function(t,e,i){return t+e+i>>>0},e.sum32_4=function(t,e,i,n){return t+e+i+n>>>0},e.sum32_5=function(t,e,i,n,s){return t+e+i+n+s>>>0},e.sum64=function(t,e,i,n){var s=t[e],r=n+t[e+1]>>>0,a=(r<n?1:0)+i+s;t[e]=a>>>0,t[e+1]=r},e.sum64_hi=function(t,e,i,n){return(e+n>>>0<e?1:0)+t+i>>>0},e.sum64_lo=function(t,e,i,n){return e+n>>>0},e.sum64_4_hi=function(t,e,i,n,s,r,a,o){var h=0,l=e;return h+=(l=l+n>>>0)<e?1:0,h+=(l=l+r>>>0)<r?1:0,t+i+s+a+(h+=(l=l+o>>>0)<o?1:0)>>>0},e.sum64_4_lo=function(t,e,i,n,s,r,a,o){return e+n+r+o>>>0},e.sum64_5_hi=function(t,e,i,n,s,r,a,o,h,l){var c=0,u=e;return c+=(u=u+n>>>0)<e?1:0,c+=(u=u+r>>>0)<r?1:0,c+=(u=u+o>>>0)<o?1:0,t+i+s+a+h+(c+=(u=u+l>>>0)<l?1:0)>>>0},e.sum64_5_lo=function(t,e,i,n,s,r,a,o,h,l){return e+n+r+o+l>>>0},e.rotr64_hi=function(t,e,i){return(e<<32-i|t>>>i)>>>0},e.rotr64_lo=function(t,e,i){return(t<<32-i|e>>>i)>>>0},e.shr64_hi=function(t,e,i){return t>>>i},e.shr64_lo=function(t,e,i){return(t<<32-i|e>>>i)>>>0}},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ActionGenerator=e.ExplorerActionGenerator=e.RpcActionGenerator=e.ParserTypes=e.serialize=e.deserialize=e.ObjectSchema=e.ExplorerApi=e.RpcApi=void 0;const s=n(i(47));e.ExplorerActionGenerator=s.default;const r=i(29);Object.defineProperty(e,"ActionGenerator",{enumerable:!0,get:function(){return r.ActionGenerator}});const a=n(i(48));e.RpcActionGenerator=a.default;const o=n(i(85));e.ExplorerApi=o.default;const h=n(i(87));e.RpcApi=h.default;const l=i(33);Object.defineProperty(e,"ObjectSchema",{enumerable:!0,get:function(){return l.ObjectSchema}});const c=i(22);Object.defineProperty(e,"deserialize",{enumerable:!0,get:function(){return c.deserialize}}),Object.defineProperty(e,"serialize",{enumerable:!0,get:function(){return c.serialize}});const u=i(97);Object.defineProperty(e,"ParserTypes",{enumerable:!0,get:function(){return u.ParserTypes}})},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.byte_vector_to_int=e.int_to_byte_vector=e.concat_byte_arrays=e.hex_encode=e.hex_decode=e.base58_encode=e.base58_decode=e.zigzag_decode=e.zigzag_encode=e.integer_unsign=e.integer_sign=e.varint_decode=e.varint_encode=void 0;const s=n(i(31)),r=n(i(23)),a=n(i(21)),o=n(i(89));e.varint_encode=function(t){const e=[];let i=s.default(t);if(i.lesser(0))throw new a.default("cant pack negative integer");for(;;){const t=i.and(127);if(i=i.shiftRight(7),i.equals(0)){e.push(t.toJSNumber());break}e.push(t.toJSNumber()+128)}return new Uint8Array(e)},e.varint_decode=function(t){let e=s.default(0);for(let i=0;;i++){if(t.position>=t.data.length)throw new r.default("failed to unpack integer");const n=s.default(t.data[t.position]);if(t.position+=1,n.lesser(128)){e=e.plus(n.shiftLeft(7*i));break}e=e.plus(n.and(127).shiftLeft(7*i))}return e},e.integer_sign=function(t,e){const i=s.default(t);if(i.greaterOrEquals(s.default(2).pow(8*e-1)))throw new Error("cannot sign integer: too big");return i.greaterOrEquals(0)?i:i.negate().xor(s.default(2).pow(8*e).minus(1)).plus(1)},e.integer_unsign=function(t,e){const i=s.default(t);if(i.greater(s.default(2).pow(8*e)))throw new Error("cannot unsign integer: too big");return i.greater(s.default(2).pow(8*e-1))?i.minus(1).xor(s.default(2).pow(8*e).minus(1)).negate():i},e.zigzag_encode=function(t){const e=s.default(t);return e.lesser(0)?e.plus(1).multiply(-2).plus(1):e.multiply(2)},e.zigzag_decode=function(t){const e=s.default(t);return e.mod(2).equals(0)?e.divmod(2).quotient:e.divmod(2).quotient.multiply(-1).minus(1)};const h=new o.default("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");e.base58_decode=function(t){return h.decode(t)},e.base58_encode=function(t){return h.encode(t)},e.hex_decode=function(t){const e=t.match(/.{1,2}/g);return e?new Uint8Array(e.map(t=>parseInt(t,16))):new Uint8Array(0)},e.hex_encode=function(t){return t.reduce((t,e)=>t+e.toString(16).padStart(2,"0"),"")},e.concat_byte_arrays=function(t){const e=new Uint8Array(t.reduce((t,e)=>t+e.length,0));let i=0;for(const n of t)e.set(n,i),i+=n.length;return e},e.int_to_byte_vector=function(t){const e=[];let i=s.default(t);for(;i.notEquals(0);)e.push(i.and(255).toJSNumber()),i=i.shiftRight(8);return new Uint8Array(e)},e.byte_vector_to_int=function(t){let e=s.default(0);for(let i=0;i<t.length;i++)e=e.plus(s.default(t[i]).shiftLeft(8*i));return e.toJSNumber()}},function(t,e){var i,n,s=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(t){if(i===setTimeout)return setTimeout(t,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:r}catch(t){i=r}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var h,l=[],c=!1,u=-1;function d(){c&&h&&(c=!1,h.length?l=h.concat(l):u=-1,l.length&&f())}function f(){if(!c){var t=o(d);c=!0;for(var e=l.length;e;){for(h=l,l=[];++u<e;)h&&h[u].run();u=-1,e=l.length}h=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new p(t,e)),1!==l.length||c||o(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=g,s.addListener=g,s.once=g,s.off=g,s.removeListener=g,s.removeAllListeners=g,s.emit=g,s.prependListener=g,s.prependOnceListener=g,s.listeners=function(t){return[]},s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,e,i){"use strict";var n=i(24),s=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};t.exports=u;var r=i(20);r.inherits=i(12);var a=i(57),o=i(61);r.inherits(u,a);for(var h=s(o.prototype),l=0;l<h.length;l++){var c=h[l];u.prototype[c]||(u.prototype[c]=o.prototype[c])}function u(t){if(!(this instanceof u))return new u(t);a.call(this,t),o.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||n.nextTick(f,this)}function f(t){t.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),u.prototype._destroy=function(t,e){this.push(null),this.end(),n.nextTick(e,t)}},function(t,e,i){"use strict";var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var s=i(0),r=i(9),a=i(26),o=n(i(2)),h=n(i(5)),l=function(){function t(){t.currentInstance=this,this.frozen=!1,this.f=0,h.SDK.resumedGame?this.startResumedGame():h.SDK.replayMode||this.startGame()}return t.prototype.update=function(){s.GameVars.paused||(this.frozen?(this.f++,this.f===t.FROZEN_FRAMES&&(this.f=0,this.frozen=!1)):s.GameVars.mazeEngine.update())},t.prototype.startResumedGame=function(){this.startGame()},t.prototype.startGame=function(){s.GameVars.paused=!1,s.GameVars.mazeEngine=new o.Engine,s.GameVars.testingLevel?(s.GameVars.mazeEngine.init(null,JSON.parse(JSON.stringify(s.GameVars.levelData))),h.SDK.development&&(h.SDK.engineInitObject=JSON.parse(JSON.stringify(s.GameVars.levelData)))):(s.GameVars.mazeEngine.init(h.SDK.landID,JSON.parse(JSON.stringify(h.SDK.levelData))),h.SDK.development&&(h.SDK.engineInitObject=JSON.parse(JSON.stringify(h.SDK.levelData)))),this.addEngineListeners(),a.BoardScene.currentInstance.startGame()},t.prototype.pauseGame=function(){s.GameVars.paused=!0,a.BoardScene.currentInstance.onGamePaused()},t.prototype.resumeGame=function(){s.GameVars.paused=!1,a.BoardScene.currentInstance.onGameResumed()},t.prototype.onGameOver=function(){if(!s.GameVars.mazeEngine.gameOver){s.GameVars.mazeEngine.forceGameOver();var t={type:o.ActionType.FORCE_GAMEOVER,data:{tick:s.GameVars.mazeEngine.tick}};h.SDK.addAction(t)}},t.prototype.changePlayerDirection=function(t){this.frozen||s.GameVars.mazeEngine.changePlayerDirection(t)},t.prototype.forceFrightenedState=function(){s.GameVars.mazeEngine.ghostsManager.enterFrightenedState()},t.prototype.onFrightenedStateEntered=function(){s.GameVars.mazeEngine.playerManager.player.invulnerable||(r.BoardContainer.currentInstance.shake(),this.frozen=!0),a.BoardScene.currentInstance.onFrightenedStateEntered()},t.prototype.onFrightenedSignal=function(){r.BoardContainer.currentInstance.onFrightenedSignal()},t.prototype.onFrightenedStateLeft=function(){a.BoardScene.currentInstance.onFrightenedStateLeft()},t.prototype.onContactWithInteractiveElement=function(t,e){t!==o.Cells.DOT&&t!==o.Cells.POWER_PELLET||h.SDK.onScoreUpdated(s.GameVars.mazeEngine.score),r.BoardContainer.currentInstance.onContactWithInteractiveElement(t,e)},t.prototype.onGhostSpawned=function(t){r.BoardContainer.currentInstance.onGhostSpawned(t)},t.prototype.onLifeLost=function(){},t.prototype.onPlayerRespawned=function(){r.BoardContainer.currentInstance.onPlayerRespawned()},t.prototype.onGhostEaten=function(t,e){h.SDK.onScoreUpdated(s.GameVars.mazeEngine.score),r.BoardContainer.currentInstance.onGhostEaten(t,e)},t.prototype.onPlayerDirectionChanged=function(t,e){if(!s.GameVars.testingLevel){var i={type:o.ActionType.CHANGE_DIRECTION,data:{dir:t,tick:e}};h.SDK.addAction(i)}},t.prototype.onPlayerTeleported=function(t,e){r.BoardContainer.currentInstance.onPlayerTeleported(t,e)},t.prototype.onPlayerHitSinglePortal=function(t,e){r.BoardContainer.currentInstance.onPlayerHitSinglePortal(t,e)},t.prototype.onLevelReset=function(){a.BoardScene.currentInstance.onLevelReset()},t.prototype.onTestedLevelGameOver=function(){a.BoardScene.currentInstance.onTestedLevelGameOver()},t.prototype.onPlayerHit=function(){r.BoardContainer.currentInstance.onPlayerHit()},t.prototype.addEngineListeners=function(){s.GameVars.mazeEngine.addEventListener(o.Event.FRIGHTENED_STATE_ENTERED,this.onFrightenedStateEntered,this),s.GameVars.mazeEngine.addEventListener(o.Event.FRIGHTENED_STATE_SIGNAL,this.onFrightenedSignal,this),s.GameVars.mazeEngine.addEventListener(o.Event.FRIGHTENED_STATE_LEFT,this.onFrightenedStateLeft,this),s.GameVars.mazeEngine.addEventListener(o.Event.CONTACT_INTERACTIVE_ITEM,this.onContactWithInteractiveElement,this),s.GameVars.mazeEngine.addEventListener(o.Event.LIFE_LOST,this.onLifeLost,this),s.GameVars.mazeEngine.addEventListener(o.Event.PLAYER_RESPAWNED,this.onPlayerRespawned,this),s.GameVars.mazeEngine.addEventListener(o.Event.GHOST_EATEN,this.onGhostEaten,this),s.GameVars.mazeEngine.addEventListener(o.Event.GHOST_SPAWNED,this.onGhostSpawned,this),s.GameVars.mazeEngine.addEventListener(o.Event.LEVEL_RESET,this.onLevelReset,this),s.GameVars.mazeEngine.addEventListener(o.Event.PLAYER_DIRECTION_CHANGED,this.onPlayerDirectionChanged,this),s.GameVars.mazeEngine.addEventListener(o.Event.PLAYER_TELEPORTED,this.onPlayerTeleported,this),s.GameVars.mazeEngine.addEventListener(o.Event.PLAYER_HIT_SINGLE_PORTAL,this.onPlayerHitSinglePortal,this),s.GameVars.mazeEngine.addEventListener(o.Event.PLAYER_HIT,this.onPlayerHit,this),s.GameVars.testingLevel?s.GameVars.mazeEngine.addEventListener(o.Event.GAME_OVER,this.onTestedLevelGameOver,this):s.GameVars.mazeEngine.addEventListener(o.Event.GAME_OVER,h.SDK.onGameOver,this)},t.FROZEN_FRAMES=15,t}();e.BoardManager=l},function(t,e){function i(t,e){if(!t)throw new Error(e||"Assertion failed")}t.exports=i,i.equal=function(t,e,i){if(t!=e)throw new Error(i||"Assertion failed: "+t+" != "+e)}},function(t,e,i){"use strict";var n=i(10),s=i(17);function r(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=r,r.prototype.update=function(t,e){if(t=n.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var i=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-i,t.length),0===this.pending.length&&(this.pending=null),t=n.join32(t,0,t.length-i,this.endian);for(var s=0;s<t.length;s+=this._delta32)this._update(t,s,s+this._delta32)}return this},r.prototype.digest=function(t){return this.update(this._pad()),s(null===this.pending),this._digest(t)},r.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,i=e-(t+this.padLength)%e,n=new Array(i+this.padLength);n[0]=128;for(var s=1;s<i;s++)n[s]=0;if(t<<=3,"big"===this.endian){for(var r=8;r<this.padLength;r++)n[s++]=0;n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=t>>>24&255,n[s++]=t>>>16&255,n[s++]=t>>>8&255,n[s++]=255&t}else for(n[s++]=255&t,n[s++]=t>>>8&255,n[s++]=t>>>16&255,n[s++]=t>>>24&255,n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=0,r=8;r<this.padLength;r++)n[s++]=0;return n}},function(t,e,i){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=i(110),s=i(111),r=i(53);function a(){return h.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return h.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=h.prototype:(null===t&&(t=new h(e)),t.length=e),t}function h(t,e,i){if(!(h.TYPED_ARRAY_SUPPORT||this instanceof h))return new h(t,e,i);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return u(this,t)}return l(this,t,e,i)}function l(t,e,i,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,i,n){if(e.byteLength,i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===i&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,i):new Uint8Array(e,i,n);h.TYPED_ARRAY_SUPPORT?(t=e).__proto__=h.prototype:t=d(t,e);return t}(t,e,i,n):"string"==typeof e?function(t,e,i){"string"==typeof i&&""!==i||(i="utf8");if(!h.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=0|p(e,i),s=(t=o(t,n)).write(e,i);s!==n&&(t=t.slice(0,s));return t}(t,e,i):function(t,e){if(h.isBuffer(e)){var i=0|f(e.length);return 0===(t=o(t,i)).length||e.copy(t,0,0,i),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?o(t,0):d(t,e);if("Buffer"===e.type&&r(e.data))return d(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e){if(c(e),t=o(t,e<0?0:0|f(e)),!h.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function d(t,e){var i=e.length<0?0:0|f(e.length);t=o(t,i);for(var n=0;n<i;n+=1)t[n]=255&e[n];return t}function f(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(h.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return U(t).length;default:if(n)return z(t).length;e=(""+e).toLowerCase(),n=!0}}function g(t,e,i){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,i);case"utf8":case"utf-8":return A(this,e,i);case"ascii":return O(this,e,i);case"latin1":case"binary":return C(this,e,i);case"base64":return S(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,i);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function m(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function v(t,e,i,n,s){if(0===t.length)return-1;if("string"==typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=s?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(s)return-1;i=t.length-1}else if(i<0){if(!s)return-1;i=0}if("string"==typeof e&&(e=h.from(e,n)),h.isBuffer(e))return 0===e.length?-1:y(t,e,i,n,s);if("number"==typeof e)return e&=255,h.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):y(t,[e],i,n,s);throw new TypeError("val must be string, number or Buffer")}function y(t,e,i,n,s){var r,a=1,o=t.length,h=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,o/=2,h/=2,i/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(s){var c=-1;for(r=i;r<o;r++)if(l(t,r)===l(e,-1===c?0:r-c)){if(-1===c&&(c=r),r-c+1===h)return c*a}else-1!==c&&(r-=r-c),c=-1}else for(i+h>o&&(i=o-h),r=i;r>=0;r--){for(var u=!0,d=0;d<h;d++)if(l(t,r+d)!==l(e,d)){u=!1;break}if(u)return r}return-1}function _(t,e,i,n){i=Number(i)||0;var s=t.length-i;n?(n=Number(n))>s&&(n=s):n=s;var r=e.length;if(r%2!=0)throw new TypeError("Invalid hex string");n>r/2&&(n=r/2);for(var a=0;a<n;++a){var o=parseInt(e.substr(2*a,2),16);if(isNaN(o))return a;t[i+a]=o}return a}function x(t,e,i,n){return Y(z(e,t.length-i),t,i,n)}function w(t,e,i,n){return Y(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,n)}function b(t,e,i,n){return w(t,e,i,n)}function E(t,e,i,n){return Y(U(e),t,i,n)}function T(t,e,i,n){return Y(function(t,e){for(var i,n,s,r=[],a=0;a<t.length&&!((e-=2)<0);++a)i=t.charCodeAt(a),n=i>>8,s=i%256,r.push(s),r.push(n);return r}(e,t.length-i),t,i,n)}function S(t,e,i){return 0===e&&i===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,i))}function A(t,e,i){i=Math.min(t.length,i);for(var n=[],s=e;s<i;){var r,a,o,h,l=t[s],c=null,u=l>239?4:l>223?3:l>191?2:1;if(s+u<=i)switch(u){case 1:l<128&&(c=l);break;case 2:128==(192&(r=t[s+1]))&&(h=(31&l)<<6|63&r)>127&&(c=h);break;case 3:r=t[s+1],a=t[s+2],128==(192&r)&&128==(192&a)&&(h=(15&l)<<12|(63&r)<<6|63&a)>2047&&(h<55296||h>57343)&&(c=h);break;case 4:r=t[s+1],a=t[s+2],o=t[s+3],128==(192&r)&&128==(192&a)&&128==(192&o)&&(h=(15&l)<<18|(63&r)<<12|(63&a)<<6|63&o)>65535&&h<1114112&&(c=h)}null===c?(c=65533,u=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),s+=u}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var i="",n=0;for(;n<e;)i+=String.fromCharCode.apply(String,t.slice(n,n+=4096));return i}(n)}e.Buffer=h,e.SlowBuffer=function(t){+t!=t&&(t=0);return h.alloc(+t)},e.INSPECT_MAX_BYTES=50,h.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),h.poolSize=8192,h._augment=function(t){return t.__proto__=h.prototype,t},h.from=function(t,e,i){return l(null,t,e,i)},h.TYPED_ARRAY_SUPPORT&&(h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0})),h.alloc=function(t,e,i){return function(t,e,i,n){return c(e),e<=0?o(t,e):void 0!==i?"string"==typeof n?o(t,e).fill(i,n):o(t,e).fill(i):o(t,e)}(null,t,e,i)},h.allocUnsafe=function(t){return u(null,t)},h.allocUnsafeSlow=function(t){return u(null,t)},h.isBuffer=function(t){return!(null==t||!t._isBuffer)},h.compare=function(t,e){if(!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,n=e.length,s=0,r=Math.min(i,n);s<r;++s)if(t[s]!==e[s]){i=t[s],n=e[s];break}return i<n?-1:n<i?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!r(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var n=h.allocUnsafe(e),s=0;for(i=0;i<t.length;++i){var a=t[i];if(!h.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,s),s+=a.length}return n},h.byteLength=p,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},h.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},h.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},h.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?A(this,0,t):g.apply(this,arguments)},h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){var t="",i=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(t+=" ... ")),"<Buffer "+t+">"},h.prototype.compare=function(t,e,i,n,s){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===n&&(n=0),void 0===s&&(s=this.length),e<0||i>t.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&e>=i)return 0;if(n>=s)return-1;if(e>=i)return 1;if(this===t)return 0;for(var r=(s>>>=0)-(n>>>=0),a=(i>>>=0)-(e>>>=0),o=Math.min(r,a),l=this.slice(n,s),c=t.slice(e,i),u=0;u<o;++u)if(l[u]!==c[u]){r=l[u],a=c[u];break}return r<a?-1:a<r?1:0},h.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},h.prototype.indexOf=function(t,e,i){return v(this,t,e,i,!0)},h.prototype.lastIndexOf=function(t,e,i){return v(this,t,e,i,!1)},h.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var s=this.length-e;if((void 0===i||i>s)&&(i=s),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var r=!1;;)switch(n){case"hex":return _(this,t,e,i);case"utf8":case"utf-8":return x(this,t,e,i);case"ascii":return w(this,t,e,i);case"latin1":case"binary":return b(this,t,e,i);case"base64":return E(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,i);default:if(r)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),r=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function O(t,e,i){var n="";i=Math.min(t.length,i);for(var s=e;s<i;++s)n+=String.fromCharCode(127&t[s]);return n}function C(t,e,i){var n="";i=Math.min(t.length,i);for(var s=e;s<i;++s)n+=String.fromCharCode(t[s]);return n}function P(t,e,i){var n=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>n)&&(i=n);for(var s="",r=e;r<i;++r)s+=B(t[r]);return s}function L(t,e,i){for(var n=t.slice(e,i),s="",r=0;r<n.length;r+=2)s+=String.fromCharCode(n[r]+256*n[r+1]);return s}function R(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function I(t,e,i,n,s,r){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>s||e<r)throw new RangeError('"value" argument is out of bounds');if(i+n>t.length)throw new RangeError("Index out of range")}function M(t,e,i,n){e<0&&(e=65535+e+1);for(var s=0,r=Math.min(t.length-i,2);s<r;++s)t[i+s]=(e&255<<8*(n?s:1-s))>>>8*(n?s:1-s)}function D(t,e,i,n){e<0&&(e=4294967295+e+1);for(var s=0,r=Math.min(t.length-i,4);s<r;++s)t[i+s]=e>>>8*(n?s:3-s)&255}function k(t,e,i,n,s,r){if(i+n>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function N(t,e,i,n,r){return r||k(t,0,i,4),s.write(t,e,i,n,23,4),i+4}function F(t,e,i,n,r){return r||k(t,0,i,8),s.write(t,e,i,n,52,8),i+8}h.prototype.slice=function(t,e){var i,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),h.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=h.prototype;else{var s=e-t;i=new h(s,void 0);for(var r=0;r<s;++r)i[r]=this[r+t]}return i},h.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||R(t,e,this.length);for(var n=this[t],s=1,r=0;++r<e&&(s*=256);)n+=this[t+r]*s;return n},h.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||R(t,e,this.length);for(var n=this[t+--e],s=1;e>0&&(s*=256);)n+=this[t+--e]*s;return n},h.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},h.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||R(t,e,this.length);for(var n=this[t],s=1,r=0;++r<e&&(s*=256);)n+=this[t+r]*s;return n>=(s*=128)&&(n-=Math.pow(2,8*e)),n},h.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||R(t,e,this.length);for(var n=e,s=1,r=this[t+--n];n>0&&(s*=256);)r+=this[t+--n]*s;return r>=(s*=128)&&(r-=Math.pow(2,8*e)),r},h.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},h.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},h.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),s.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),s.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),s.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),s.read(this,t,!1,52,8)},h.prototype.writeUIntLE=function(t,e,i,n){(t=+t,e|=0,i|=0,n)||I(this,t,e,i,Math.pow(2,8*i)-1,0);var s=1,r=0;for(this[e]=255&t;++r<i&&(s*=256);)this[e+r]=t/s&255;return e+i},h.prototype.writeUIntBE=function(t,e,i,n){(t=+t,e|=0,i|=0,n)||I(this,t,e,i,Math.pow(2,8*i)-1,0);var s=i-1,r=1;for(this[e+s]=255&t;--s>=0&&(r*=256);)this[e+s]=t/r&255;return e+i},h.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||I(this,t,e,1,255,0),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},h.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||I(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},h.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||I(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},h.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||I(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):D(this,t,e,!0),e+4},h.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||I(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},h.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e|=0,!n){var s=Math.pow(2,8*i-1);I(this,t,e,i,s-1,-s)}var r=0,a=1,o=0;for(this[e]=255&t;++r<i&&(a*=256);)t<0&&0===o&&0!==this[e+r-1]&&(o=1),this[e+r]=(t/a>>0)-o&255;return e+i},h.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e|=0,!n){var s=Math.pow(2,8*i-1);I(this,t,e,i,s-1,-s)}var r=i-1,a=1,o=0;for(this[e+r]=255&t;--r>=0&&(a*=256);)t<0&&0===o&&0!==this[e+r+1]&&(o=1),this[e+r]=(t/a>>0)-o&255;return e+i},h.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||I(this,t,e,1,127,-128),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||I(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},h.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||I(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},h.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||I(this,t,e,4,2147483647,-2147483648),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):D(this,t,e,!0),e+4},h.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||I(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},h.prototype.writeFloatLE=function(t,e,i){return N(this,t,e,!0,i)},h.prototype.writeFloatBE=function(t,e,i){return N(this,t,e,!1,i)},h.prototype.writeDoubleLE=function(t,e,i){return F(this,t,e,!0,i)},h.prototype.writeDoubleBE=function(t,e,i){return F(this,t,e,!1,i)},h.prototype.copy=function(t,e,i,n){if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var s,r=n-i;if(this===t&&i<e&&e<n)for(s=r-1;s>=0;--s)t[s+e]=this[s+i];else if(r<1e3||!h.TYPED_ARRAY_SUPPORT)for(s=0;s<r;++s)t[s+e]=this[s+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+r),e);return r},h.prototype.fill=function(t,e,i,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),1===t.length){var s=t.charCodeAt(0);s<256&&(t=s)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!h.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var r;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(r=e;r<i;++r)this[r]=t;else{var a=h.isBuffer(t)?t:z(new h(t,n).toString()),o=a.length;for(r=0;r<i-e;++r)this[r+e]=a[r%o]}return this};var G=/[^+\/0-9A-Za-z-_]/g;function B(t){return t<16?"0"+t.toString(16):t.toString(16)}function z(t,e){var i;e=e||1/0;for(var n=t.length,s=null,r=[],a=0;a<n;++a){if((i=t.charCodeAt(a))>55295&&i<57344){if(!s){if(i>56319){(e-=3)>-1&&r.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&r.push(239,191,189);continue}s=i;continue}if(i<56320){(e-=3)>-1&&r.push(239,191,189),s=i;continue}i=65536+(s-55296<<10|i-56320)}else s&&(e-=3)>-1&&r.push(239,191,189);if(s=null,i<128){if((e-=1)<0)break;r.push(i)}else if(i<2048){if((e-=2)<0)break;r.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;r.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;r.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return r}function U(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(G,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Y(t,e,i,n){for(var s=0;s<n&&!(s+i>=e.length||s>=t.length);++s)e[s+i]=t[s];return s}}).call(this,i(4))},function(t,e,i){(function(t){function i(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===i(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===i(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===i(t)},e.isError=function(t){return"[object Error]"===i(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,i(19).Buffer)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n extends Error{}e.default=n},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.deserialize=e.serialize=void 0;const s=n(i(50)),r=i(13),a=n(i(90));e.serialize=function(t,e){const i=e.serialize(t);return e instanceof s.default?i.slice(0,i.length-1):i},e.deserialize=function(t,e){e instanceof s.default&&(t=r.concat_byte_arrays([t,r.varint_encode(0)]));const i=new a.default(t,0);return e.deserialize(i)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n extends Error{}e.default=n},function(t,e,i){"use strict";(function(e){void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,i,n,s){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var r,a,o=arguments.length;switch(o){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,i)}));case 3:return e.nextTick((function(){t.call(null,i,n)}));case 4:return e.nextTick((function(){t.call(null,i,n,s)}));default:for(r=new Array(o-1),a=0;a<r.length;)r[a++]=arguments[a];return e.nextTick((function(){t.apply(null,r)}))}}}:t.exports=e}).call(this,i(14))},function(t,e,i){var n=i(19),s=n.Buffer;function r(t,e){for(var i in t)e[i]=t[i]}function a(t,e,i){return s(t,e,i)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=n:(r(n,e),e.Buffer=a),r(s,a),a.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return s(t,e,i)},a.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=s(t);return void 0!==e?"string"==typeof i?n.fill(e,i):n.fill(e):n.fill(0),n},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return s(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(8),o=i(127),h=i(128),l=i(9),c=i(1),u=i(16),d=i(133),f=i(0),p=i(134),g=i(65),m=i(7),v=i(135),y=r(i(2)),_=r(i(5)),x=function(t){function e(){var i=t.call(this,"BoardScene")||this;return e.currentInstance=i,i}return s(e,t),e.prototype.create=function(){a.GameManager.setCurrentScene(this),this.setAnimations();var t=this.add.graphics();t.fillStyle(1386540),t.fillRect(0,0,c.GameConstants.GAME_WIDTH,c.GameConstants.GAME_HEIGHT),this.playerController=new d.PlayerController(this),this.boardContainer=new l.BoardContainer(this),this.add.existing(this.boardContainer),this.hud=new o.HUD(this),this.add.existing(this.hud),this.gui=new h.GUI(this),this.add.existing(this.gui),_.SDK.replayMode?(this.boardManager=null,this.replayManager=new v.ReplayManager):(this.boardManager=new u.BoardManager,this.replayManager=null),m.AudioManager.playSound("go"),this.time.delayedCall(1e3,(function(){m.AudioManager.playSound("loop_normal",!0)}),[],this)},e.prototype.update=function(){f.GameVars.mazeEngine.gameOver||(this.boardManager?(this.boardManager.update(),this.playerController.update()):this.replayManager.update(),this.boardContainer.update(),this.hud.update())},e.prototype.startGame=function(){this.boardContainer.startGame(),this.hud.startGame()},e.prototype.onLevelReset=function(){this.boardContainer.onLevelReset()},e.prototype.onTestedLevelGameOver=function(){var t=this.add.graphics();t.fillStyle(0),t.fillRect(0,0,c.GameConstants.GAME_WIDTH,c.GameConstants.GAME_HEIGHT),t.alpha=0,this.tweens.add({targets:t,alpha:.65,ease:Phaser.Math.Easing.Cubic.Out,duration:750,delay:350}),this.time.delayedCall(1700,(function(){a.GameManager.enterLevelEditionScene()}),[],this),m.AudioManager.setLoopVolume(1,.2)},e.prototype.onGameOver=function(){this.boardManager.onGameOver(),this.boardContainer.onGameOver(),m.AudioManager.playSound("gameover_outro"),this.time.delayedCall(700,(function(){m.AudioManager.stopLoop()}),[],this),this.time.delayedCall(2e3,(function(){m.AudioManager.playSound("game_over_loop",!0)}),[],this)},e.prototype.onGamePaused=function(){this.pauseLayer=new p.PauseLayer(this),this.add.existing(this.pauseLayer),this.gui.onGamePaused()},e.prototype.onGameResumed=function(){this.pauseLayer.destroy(),this.pauseLayer=null,this.gui.onGameResumed()},e.prototype.onFrightenedStateEntered=function(){f.GameVars.mazeEngine.playerManager.player.invulnerable||l.BoardContainer.currentInstance.shake(),this.boardContainer.onFrightenedStateEntered(),f.GameVars.mazeEngine.playerManager.player.invulnerable||m.AudioManager.playSound("transformation"),this.time.delayedCall(700,(function(){m.AudioManager.playSound("loop_beast",!0)}),[],this)},e.prototype.onFrightenedStateLeft=function(){this.boardContainer.onFrightenedStateLeft(),m.AudioManager.playSound("reverts_to_normal"),this.time.delayedCall(700,(function(){m.AudioManager.playSound("loop_normal",!0)}),[],this)},e.prototype.setAnimations=function(){this.anims.create({key:"portal_blue",frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"portal_blue_",start:1,end:15,zeroPad:2,suffix:""}),frameRate:16,repeat:-1}),this.anims.create({key:"portal_green",frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"portal_green_",start:1,end:15,zeroPad:2,suffix:""}),frameRate:16,repeat:-1}),this.anims.create({key:"portal_red",frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"portal_red_",start:1,end:15,zeroPad:2,suffix:""}),frameRate:16,repeat:-1}),this.anims.create({key:"portal_yellow",frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"portal_yellow_",start:1,end:15,zeroPad:2,suffix:""}),frameRate:16,repeat:-1}),this.anims.create({key:g.PlayerActor.ANIMATION_RUN_UP,frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"run_standard_back_",start:1,end:9,zeroPad:2,suffix:""}),frameRate:25,repeat:-1}),this.anims.create({key:g.PlayerActor.ANIMATION_RUN_DOWN,frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"run_standard_front_",start:1,end:9,zeroPad:2,suffix:""}),frameRate:25,repeat:-1}),this.anims.create({key:g.PlayerActor.ANIMATION_RUN_HORIZONTAL,frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"run_standard_side_",start:1,end:9,zeroPad:2,suffix:""}),frameRate:25,repeat:-1}),this.anims.create({key:g.PlayerActor.ANIMATION_IDLE_HORIZONTAL,frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"idle_standard_side_",start:1,end:9,zeroPad:2,suffix:""}),frameRate:10,repeat:-1}),this.anims.create({key:g.PlayerActor.ANIMATION_IDLE_UP,frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"idle_standard_back_",start:1,end:9,zeroPad:2,suffix:""}),frameRate:10,repeat:-1}),this.anims.create({key:g.PlayerActor.ANIMATION_IDLE_DOWN,frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"idle_standard_front_",start:1,end:9,zeroPad:2,suffix:""}),frameRate:10,repeat:-1}),this.anims.create({key:g.PlayerActor.ANIMATION_INVULNERABLE_RUN_UP,frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"run_powerUp_back_",start:1,end:9,zeroPad:2,suffix:""}),frameRate:25,repeat:-1}),this.anims.create({key:g.PlayerActor.ANIMATION_INVULNERABLE_RUN_DOWN,frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"run_powerUp_front_",start:1,end:9,zeroPad:2,suffix:""}),frameRate:25,repeat:-1}),this.anims.create({key:g.PlayerActor.ANIMATION_INVULNERABLE_RUN_HORIZONTAL,frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"run_powerUp_side_",start:1,end:9,zeroPad:2,suffix:""}),frameRate:25,repeat:-1}),this.anims.create({key:g.PlayerActor.ANIMATION_INVULNERABLE_IDLE_HORIZONTAL,frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"idle_powerUp_side_",start:1,end:9,zeroPad:2,suffix:""}),frameRate:10,repeat:-1}),this.anims.create({key:g.PlayerActor.ANIMATION_INVULNERABLE_IDLE_UP,frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"idle_powerUp_back_",start:1,end:9,zeroPad:2,suffix:""}),frameRate:10,repeat:-1}),this.anims.create({key:g.PlayerActor.ANIMATION_INVULNERABLE_IDLE_DOWN,frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"idle_powerUp_front_",start:1,end:9,zeroPad:2,suffix:""}),frameRate:10,repeat:-1}),this.anims.create({key:g.PlayerActor.ANIMATION_HIT_UP,frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"death_back_",start:1,end:3,zeroPad:2,suffix:""}),frameRate:25}),this.anims.create({key:g.PlayerActor.ANIMATION_HIT_DOWN,frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"death_front_",start:1,end:3,zeroPad:2,suffix:""}),frameRate:25}),this.anims.create({key:g.PlayerActor.ANIMATION_HIT_HORIZONTAL,frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"death_side_",start:1,end:3,zeroPad:2,suffix:""}),frameRate:25}),this.anims.create({key:g.PlayerActor.ANIMATION_GAMEOVER_UP,frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"death_back_",start:1,end:7,zeroPad:2,suffix:""}),frameRate:25}),this.anims.create({key:g.PlayerActor.ANIMATION_GAMEOVER_DOWN,frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"death_front_",start:1,end:7,zeroPad:2,suffix:""}),frameRate:25}),this.anims.create({key:g.PlayerActor.ANIMATION_GAMEOVER_HORIZONTAL,frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"death_side_",start:1,end:7,zeroPad:2,suffix:""}),frameRate:25}),this.anims.create({key:"pill_big_01_fx",frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"powerUp_",start:1,end:13,zeroPad:2,suffix:""}),frameRate:24,hideOnComplete:!0}),this.anims.create({key:"pill_big_01",frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"pill_big_",start:1,end:9,zeroPad:2,suffix:""}),frameRate:16,repeat:-1}),this.anims.create({key:"dot",frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"pill_",start:1,end:20,zeroPad:2,suffix:""}),frameRate:20,repeat:-1}),this.anims.create({key:"dot_fx",frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"fx_catch_pill_",start:1,end:6,zeroPad:2,suffix:""}),frameRate:16}),this.anims.create({key:y.GhostType.BLINKY,frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"ghost_purple_",start:1,end:16,zeroPad:2,suffix:""}),frameRate:25,repeat:-1}),this.anims.create({key:y.GhostType.PINKY,frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"ghost_pink_",start:1,end:16,zeroPad:2,suffix:""}),frameRate:25,repeat:-1}),this.anims.create({key:y.GhostType.INKY,frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"ghost_green_",start:1,end:16,zeroPad:2,suffix:""}),frameRate:25,repeat:-1}),this.anims.create({key:y.GhostType.CLYDE,frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"ghost_orange_",start:1,end:16,zeroPad:2,suffix:""}),frameRate:25,repeat:-1}),this.anims.create({key:"frightened",frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"ghost_scared_",start:1,end:16,zeroPad:2,suffix:""}),frameRate:25,repeat:-1}),this.anims.create({key:"explosion_"+y.GhostType.BLINKY,frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"death_fx_purple_",start:1,end:13,zeroPad:2,suffix:""}),frameRate:25}),this.anims.create({key:"explosion_"+y.GhostType.PINKY,frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"death_fx_pink_",start:1,end:13,zeroPad:2,suffix:""}),frameRate:25}),this.anims.create({key:"explosion_"+y.GhostType.INKY,frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"death_fx_green_",start:1,end:13,zeroPad:2,suffix:""}),frameRate:25}),this.anims.create({key:"explosion_"+y.GhostType.CLYDE,frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"death_fx_orange_",start:1,end:13,zeroPad:2,suffix:""}),frameRate:25}),this.anims.create({key:"floor",frames:this.anims.generateFrameNames("texture_atlas_1",{prefix:"floor_",start:1,end:8,zeroPad:1,suffix:""}),frameRate:24,repeat:-1})},e}(Phaser.Scene);e.BoardScene=x},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(1),o=i(0),h=i(9),l=i(3),c=i(139),u=r(i(2)),d=function(t){function e(i){var n=t.call(this,i)||this;e.currentInstance=n,n.scaleX=o.GameVars.scaleX,n.s=1,n.x=a.GameConstants.GAME_WIDTH/2,n.y=a.GameConstants.GAME_HEIGHT/2+.5*h.BoardContainer.CELLS_SIZE,n.tiles=[],n.backgroundContainer=new Phaser.GameObjects.Container(n.scene),n.backgroundContainer.x=-l.LevelEditionManager.COLS*h.BoardContainer.CELLS_SIZE/2,n.backgroundContainer.y=-l.LevelEditionManager.ROWS*h.BoardContainer.CELLS_SIZE/2,n.add(n.backgroundContainer),n.interactiveItemsContainer=new Phaser.GameObjects.Container(n.scene),n.interactiveItemsContainer.x=n.backgroundContainer.x,n.interactiveItemsContainer.y=n.backgroundContainer.y,n.add(n.interactiveItemsContainer),n.actorsContainer=new Phaser.GameObjects.Container(n.scene),n.actorsContainer.x=n.backgroundContainer.x,n.actorsContainer.y=n.backgroundContainer.y,n.add(n.actorsContainer);var s=new c.GridContainer(n.scene);return s.x=n.backgroundContainer.x,s.y=n.backgroundContainer.y,n.add(s),n}return s(e,t),e.prototype.init=function(){for(var t=l.LevelEditionManager.COLS,e=l.LevelEditionManager.ROWS,i=0;i<t;i++){this.tiles[i]=[];for(var n=0;n<e;n++){var s=h.BoardContainer.CELLS_SIZE*(i+.5),r=h.BoardContainer.CELLS_SIZE*(n+.5),a=new Phaser.GameObjects.Image(this.scene,s,r,"texture_atlas_1","h_wall_1");this.backgroundContainer.add(a),this.tiles[i][n]=a}}this.interactiveItems=[];for(i=0;i<t;i++){this.interactiveItems[i]=[];for(n=0;n<e;n++){s=h.BoardContainer.CELLS_SIZE*(i+.5),r=h.BoardContainer.CELLS_SIZE*(n+.5);var o=new Phaser.GameObjects.Image(this.scene,s,r,"texture_atlas_1","pill_01");this.interactiveItemsContainer.add(o),this.interactiveItems[i][n]=o}}this.checkLevelElements()},e.prototype.checkLevelElements=function(){for(var t=l.LevelEditionManager.COLS,e=l.LevelEditionManager.ROWS,i=l.LevelEditionManager.board,n=0;n<t;n++)for(var s=0;s<e;s++)i[n][s]===u.Cells.PATH&&this.tiles[n][s].setFrame("floor"),i[n][s]===u.Cells.GROUND&&this.tiles[n][s].setFrame("grass_01"),i[n][s]===u.Cells.WALL&&i[n][s+1]===u.Cells.PATH&&this.tiles[n][s].setFrame("h_wall_1"),i[n][s]!==u.Cells.WALL||i[n][s+1]!==u.Cells.GROUND&&s+1!==e||this.tiles[n][s].setFrame("outer_wall"),i[n][s]===u.Cells.WALL&&i[n][s+1]===u.Cells.WALL&&this.tiles[n][s].setFrame("v_wall");for(n=0;n<t;n++)for(s=0;s<e;s++){var r=l.LevelEditionManager.interactiveItems[n][s],a=this.interactiveItems[n][s];switch(r){case u.Cells.EMPTY:a.visible=!1;break;case u.Cells.DOT:a.visible=!0,a.setFrame("pill_01");break;case u.Cells.POWER_PELLET:a.visible=!0,a.setFrame("pill_big_icon");break;case u.Cells.PACMAN_SPAWNING_POINT:a.visible=!0,a.setFrame("player-icon");break;case u.Cells.GHOSTS_1_SPAWNING_POINT:a.visible=!0,a.setFrame("ghost-icon-1");break;case u.Cells.GHOSTS_2_SPAWNING_POINT:a.visible=!0,a.setFrame("ghost-icon-2");break;case u.Cells.GHOSTS_3_SPAWNING_POINT:a.visible=!0,a.setFrame("ghost-icon-3");break;case u.Cells.GHOSTS_4_SPAWNING_POINT:a.visible=!0,a.setFrame("ghost-icon-4");break;case u.Cells.PORTAL_1:a.visible=!0,a.setFrame("portal_1_icon");break;case u.Cells.PORTAL_2:a.visible=!0,a.setFrame("portal_2_icon");break;case u.Cells.PORTAL_3:a.visible=!0,a.setFrame("portal_3_icon");break;case u.Cells.PORTAL_4:a.visible=!0,a.setFrame("portal_4_icon")}}},e.prototype.zoom=function(t){this.s=t?this.s<1.75?this.s+.25:this.s:this.s>.75?this.s-.25:this.s,this.scaleX=this.s*o.GameVars.scaleX,this.scaleY=this.s},e}(Phaser.GameObjects.Container);e.LevelEditionContainer=d},function(t,e,i){"use strict";var n=this&&this.__read||function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,s,r=i.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)a.push(n.value)}catch(t){s={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(s)throw s.error}}return a},s=this&&this.__spreadArray||function(t,e){for(var i=0,n=e.length,s=t.length;i<n;i++,s++)t[s]=e[i];return t},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.signatureToString=e.stringToSignature=e.privateKeyToString=e.privateKeyToLegacyString=e.stringToPrivateKey=e.convertLegacyPublicKeys=e.convertLegacyPublicKey=e.publicKeyToString=e.publicKeyToLegacyString=e.stringToPublicKey=e.signatureDataSize=e.privateKeyDataSize=e.publicKeyDataSize=e.KeyType=e.base64ToBinary=e.binaryToBase58=e.base58ToBinary=e.signedBinaryToDecimal=e.binaryToDecimal=e.signedDecimalToBinary=e.decimalToBinary=e.negate=e.isNegative=void 0;var a=i(73),o=i(81).RIPEMD160.hash,h="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=function(){for(var t=Array(256).fill(-1),e=0;e<h.length;++e)t[h.charCodeAt(e)]=e;return t}(),u=function(){for(var t=Array(256).fill(-1),e=0;e<l.length;++e)t[l.charCodeAt(e)]=e;return t["=".charCodeAt(0)]=0,t}();e.isNegative=function(t){return 0!=(128&t[t.length-1])};e.negate=function(t){for(var e=1,i=0;i<t.length;++i){var n=(255&~t[i])+e;t[i]=n,e=n>>8}};e.decimalToBinary=function(t,e){for(var i=new Uint8Array(t),n=0;n<e.length;++n){var s=e.charCodeAt(n);if(s<"0".charCodeAt(0)||s>"9".charCodeAt(0))throw new Error("invalid number");for(var r=s-"0".charCodeAt(0),a=0;a<t;++a){var o=10*i[a]+r;i[a]=o,r=o>>8}if(r)throw new Error("number is out of range")}return i};e.signedDecimalToBinary=function(t,i){var n="-"===i[0];n&&(i=i.substr(1));var s=e.decimalToBinary(t,i);if(n){if(e.negate(s),!e.isNegative(s))throw new Error("number is out of range")}else if(e.isNegative(s))throw new Error("number is out of range");return s};e.binaryToDecimal=function(t,e){void 0===e&&(e=1);for(var i=Array(e).fill("0".charCodeAt(0)),r=t.length-1;r>=0;--r){for(var a=t[r],o=0;o<i.length;++o){var h=(i[o]-"0".charCodeAt(0)<<8)+a;i[o]="0".charCodeAt(0)+h%10,a=h/10|0}for(;a;)i.push("0".charCodeAt(0)+a%10),a=a/10|0}return i.reverse(),String.fromCharCode.apply(String,s([],n(i)))};e.signedBinaryToDecimal=function(t,i){if(void 0===i&&(i=1),e.isNegative(t)){var n=t.slice();return e.negate(n),"-"+e.binaryToDecimal(n,i)}return e.binaryToDecimal(t,i)};e.base58ToBinary=function(t,e){if(!t)return function(t){for(var e,i,n=[],s=0;s<t.length;++s){var a=c[t.charCodeAt(s)];if(a<0)throw new Error("invalid base-58 value");for(var o=0;o<n.length;++o){var h=58*n[o]+a;n[o]=255&h,a=h>>8}a&&n.push(a)}try{for(var l=r(t),u=l.next();!u.done;u=l.next()){if("1"!==u.value)break;n.push(0)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(e)throw e.error}}return n.reverse(),new Uint8Array(n)}(e);for(var i=new Uint8Array(t),n=0;n<e.length;++n){var s=c[e.charCodeAt(n)];if(s<0)throw new Error("invalid base-58 value");for(var a=0;a<t;++a){var o=58*i[a]+s;i[a]=o,s=o>>8}if(s)throw new Error("base-58 value is out of range")}return i.reverse(),i};e.binaryToBase58=function(t,e){var i,a,o,l;void 0===e&&(e=1);var u=[];try{for(var d=r(t),f=d.next();!f.done;f=d.next()){for(var p=f.value,g=0;g<u.length;++g){var m=(c[u[g]]<<8)+p;u[g]=h.charCodeAt(m%58),p=m/58|0}for(;p;)u.push(h.charCodeAt(p%58)),p=p/58|0}}catch(t){i={error:t}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}try{for(var v=r(t),y=v.next();!y.done;y=v.next()){if(y.value)break;u.push("1".charCodeAt(0))}}catch(t){o={error:t}}finally{try{y&&!y.done&&(l=v.return)&&l.call(v)}finally{if(o)throw o.error}}return u.reverse(),String.fromCharCode.apply(String,s([],n(u)))};var d;e.base64ToBinary=function(t){var e=t.length;if(1==(3&e)&&"="===t[e-1]&&(e-=1),0!=(3&e))throw new Error("base-64 value is not padded correctly");var i=e>>2,n=3*i;e>0&&"="===t[e-1]&&("="===t[e-2]?n-=2:n-=1);for(var s=new Uint8Array(n),r=0;r<i;++r){var a=u[t.charCodeAt(4*r+0)],o=u[t.charCodeAt(4*r+1)],h=u[t.charCodeAt(4*r+2)],l=u[t.charCodeAt(4*r+3)];s[3*r+0]=a<<2|o>>4,3*r+1<n&&(s[3*r+1]=(15&o)<<4|h>>2),3*r+2<n&&(s[3*r+2]=(3&h)<<6|l)}return s},function(t){t[t.k1=0]="k1",t[t.r1=1]="r1",t[t.wa=2]="wa"}(d=e.KeyType||(e.KeyType={})),e.publicKeyDataSize=33,e.privateKeyDataSize=32,e.signatureDataSize=65;var f=function(t,e){for(var i=new Uint8Array(t.length+e.length),n=0;n<t.length;++n)i[n]=t[n];for(n=0;n<e.length;++n)i[t.length+n]=e.charCodeAt(n);return o(i)},p=function(t,i,n,s){var r=e.base58ToBinary(n?n+4:0,t),a={type:i,data:new Uint8Array(r.buffer,0,r.length-4)},o=new Uint8Array(f(a.data,s));if(o[0]!==r[r.length-4]||o[1]!==r[r.length-3]||o[2]!==r[r.length-2]||o[3]!==r[r.length-1])throw new Error("checksum doesn't match");return a},g=function(t,i,n){for(var s=new Uint8Array(f(t.data,i)),r=new Uint8Array(t.data.length+4),a=0;a<t.data.length;++a)r[a]=t.data[a];for(a=0;a<4;++a)r[a+t.data.length]=s[a];return n+e.binaryToBase58(r)};e.stringToPublicKey=function(t){if("string"!=typeof t)throw new Error("expected string containing public key");if("EOS"===t.substr(0,3)){for(var i=e.base58ToBinary(e.publicKeyDataSize+4,t.substr(3)),n={type:d.k1,data:new Uint8Array(e.publicKeyDataSize)},s=0;s<e.publicKeyDataSize;++s)n.data[s]=i[s];var r=new Uint8Array(o(n.data));if(r[0]!==i[e.publicKeyDataSize]||r[1]!==i[34]||r[2]!==i[35]||r[3]!==i[36])throw new Error("checksum doesn't match");return n}if("PUB_K1_"===t.substr(0,7))return p(t.substr(7),d.k1,e.publicKeyDataSize,"K1");if("PUB_R1_"===t.substr(0,7))return p(t.substr(7),d.r1,e.publicKeyDataSize,"R1");if("PUB_WA_"===t.substr(0,7))return p(t.substr(7),d.wa,0,"WA");throw new Error("unrecognized public key format")};e.publicKeyToLegacyString=function(t){if(t.type===d.k1&&t.data.length===e.publicKeyDataSize)return g(t,"","EOS");throw t.type===d.r1||t.type===d.wa?new Error("Key format not supported in legacy conversion"):new Error("unrecognized public key format")};e.publicKeyToString=function(t){if(t.type===d.k1&&t.data.length===e.publicKeyDataSize)return g(t,"K1","PUB_K1_");if(t.type===d.r1&&t.data.length===e.publicKeyDataSize)return g(t,"R1","PUB_R1_");if(t.type===d.wa)return g(t,"WA","PUB_WA_");throw new Error("unrecognized public key format")};e.convertLegacyPublicKey=function(t){return"EOS"===t.substr(0,3)?e.publicKeyToString(e.stringToPublicKey(t)):t};e.convertLegacyPublicKeys=function(t){return t.map(e.convertLegacyPublicKey)};e.stringToPrivateKey=function(t){if("string"!=typeof t)throw new Error("expected string containing private key");if("PVT_R1_"===t.substr(0,7))return p(t.substr(7),d.r1,e.privateKeyDataSize,"R1");if("PVT_K1_"===t.substr(0,7))return p(t.substr(7),d.k1,e.privateKeyDataSize,"K1");var i=e.base58ToBinary(e.privateKeyDataSize+5,t),n={type:d.k1,data:new Uint8Array(e.privateKeyDataSize)};if(128!==i[0])throw new Error("unrecognized private key type");for(var s=0;s<e.privateKeyDataSize;++s)n.data[s]=i[s+1];return n};e.privateKeyToLegacyString=function(t){if(t.type===d.k1&&t.data.length===e.privateKeyDataSize){var i=[];i.push(128),t.data.forEach((function(t){return i.push(t)}));for(var n=new Uint8Array(a.sha256().update(a.sha256().update(i).digest()).digest()),s=new Uint8Array(e.privateKeyDataSize+5),r=0;r<i.length;r++)s[r]=i[r];for(r=0;r<4;r++)s[r+i.length]=n[r];return e.binaryToBase58(s)}throw t.type===d.r1||t.type===d.wa?new Error("Key format not supported in legacy conversion"):new Error("unrecognized public key format")};e.privateKeyToString=function(t){if(t.type===d.r1)return g(t,"R1","PVT_R1_");if(t.type===d.k1)return g(t,"K1","PVT_K1_");throw new Error("unrecognized private key format")};e.stringToSignature=function(t){if("string"!=typeof t)throw new Error("expected string containing signature");if("SIG_K1_"===t.substr(0,7))return p(t.substr(7),d.k1,e.signatureDataSize,"K1");if("SIG_R1_"===t.substr(0,7))return p(t.substr(7),d.r1,e.signatureDataSize,"R1");if("SIG_WA_"===t.substr(0,7))return p(t.substr(7),d.wa,0,"WA");throw new Error("unrecognized signature format")};e.signatureToString=function(t){if(t.type===d.k1)return g(t,"K1","SIG_K1_");if(t.type===d.r1)return g(t,"R1","SIG_R1_");if(t.type===d.wa)return g(t,"WA","SIG_WA_");throw new Error("unrecognized signature format")}},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.toAttributeMap=e.ActionGenerator=void 0;const s=n(i(21));e.ActionGenerator=class{constructor(t){this.contract=t}async acceptoffer(t,e){return this._pack(t,"acceptoffer",{offer_id:e})}async addcolauth(t,e,i){return this._pack(t,"addcolauth",{collection_name:e,account_to_add:i})}async addconftoken(t,e,i){return this._pack(t,"addconftoken",{token_contract:e,token_symbol:i})}async addnotifyacc(t,e,i){return this._pack(t,"addnotifyacc",{collection_name:e,account_to_add:i})}async announcedepo(t,e,i){return this._pack(t,"announcedepo",{owner:e,symbol_to_announce:i})}async backasset(t,e,i,n,s){return this._pack(t,"backasset",{payer:e,asset_owner:i,asset_id:n,token_to_back:s})}async burnasset(t,e,i){return this._pack(t,"burnasset",{asset_owner:e,asset_id:i})}async canceloffer(t,e){return this._pack(t,"canceloffer",{offer_id:e})}async createcol(t,e,i,n,s,r,a,o){return this._pack(t,"createcol",{author:e,collection_name:i,allow_notify:n,authorized_accounts:s,notify_accounts:r,market_fee:a,data:o})}async createoffer(t,e,i,n,s,r){return this._pack(t,"createoffer",{sender:e,recipient:i,sender_asset_ids:n,recipient_asset_ids:s,memo:r})}async createtempl(t,e,i,n,s,r,a,o){return this._pack(t,"createtempl",{authorized_creator:e,collection_name:i,schema_name:n,transferable:s,burnable:r,max_supply:a,immutable_data:o})}async createschema(t,e,i,n,s){return this._pack(t,"createschema",{authorized_creator:e,collection_name:i,schema_name:n,schema_format:s})}async declineoffer(t,e){return this._pack(t,"declineoffer",{offer_id:e})}async extendschema(t,e,i,n,s){return this._pack(t,"extendschema",{authorized_editor:e,collection_name:i,schema_name:n,schema_format_extension:s})}async forbidnotify(t,e){return this._pack(t,"forbidnotify",{collection_name:e})}async locktemplate(t,e,i,n){return this._pack(t,"locktemplate",{authorized_editor:e,collection_name:i,template_id:n})}async mintasset(t,e,i,n,s,r,a,o,h){return this._pack(t,"mintasset",{authorized_minter:e,collection_name:i,schema_name:n,template_id:s,new_asset_owner:r,immutable_data:a,mutable_data:o,tokens_to_back:h})}async payofferram(t,e,i){return this._pack(t,"payofferram",{payer:e,offer_id:i})}async remcolauth(t,e,i){return this._pack(t,"remcolauth",{collection_name:e,account_to_remove:i})}async remnotifyacc(t,e,i){return this._pack(t,"remnotifyacc",{collection_name:e,account_to_remove:i})}async setassetdata(t,e,i,n,s){return this._pack(t,"setassetdata",{authorized_editor:e,asset_owner:i,asset_id:n,new_mutable_data:s})}async setcoldata(t,e,i){return this._pack(t,"setcoldata",{collection_name:e,data:i})}async setmarketfee(t,e,i){return this._pack(t,"setmarketfee",{collection_name:e,market_fee:i})}async transfer(t,e,i,n,s){return this._pack(t,"transfer",{from:e,to:i,asset_ids:n,memo:s})}async withdraw(t,e,i){return this._pack(t,"withdraw",{owner:e,token_to_withdraw:i})}_pack(t,e,i){return[{account:this.contract,name:e,authorization:t,data:i}]}},e.toAttributeMap=function(t,e){const i={},n=[];for(const t of e)i[t.name]=t.type;const r=Object.keys(t);for(const e of r){if(void 0!==i[e])throw new s.default("field not defined in schema");n.push({key:e,value:[i[e],t[e]]})}return n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n extends Error{}e.default=n},function(t,e,i){(function(t){var n,s=function(t){"use strict";var e=1e7,i=9007199254740992,n=u(i),r="function"==typeof BigInt;function a(t,e,i,n){return void 0===t?a[0]:void 0!==e&&(10!=+e||i)?z(t,e,i,n):j(t)}function o(t,e){this.value=t,this.sign=e,this.isSmall=!1}function h(t){this.value=t,this.sign=t<0,this.isSmall=!0}function l(t){this.value=t}function c(t){return-i<t&&t<i}function u(t){return t<1e7?[t]:t<1e14?[t%1e7,Math.floor(t/1e7)]:[t%1e7,Math.floor(t/1e7)%1e7,Math.floor(t/1e14)]}function d(t){f(t);var i=t.length;if(i<4&&C(t,n)<0)switch(i){case 0:return 0;case 1:return t[0];case 2:return t[0]+t[1]*e;default:return t[0]+(t[1]+t[2]*e)*e}return t}function f(t){for(var e=t.length;0===t[--e];);t.length=e+1}function p(t){for(var e=new Array(t),i=-1;++i<t;)e[i]=0;return e}function g(t){return t>0?Math.floor(t):Math.ceil(t)}function m(t,i){var n,s,r=t.length,a=i.length,o=new Array(r),h=0,l=e;for(s=0;s<a;s++)h=(n=t[s]+i[s]+h)>=l?1:0,o[s]=n-h*l;for(;s<r;)h=(n=t[s]+h)===l?1:0,o[s++]=n-h*l;return h>0&&o.push(h),o}function v(t,e){return t.length>=e.length?m(t,e):m(e,t)}function y(t,i){var n,s,r=t.length,a=new Array(r),o=e;for(s=0;s<r;s++)n=t[s]-o+i,i=Math.floor(n/o),a[s]=n-i*o,i+=1;for(;i>0;)a[s++]=i%o,i=Math.floor(i/o);return a}function _(t,e){var i,n,s=t.length,r=e.length,a=new Array(s),o=0;for(i=0;i<r;i++)(n=t[i]-o-e[i])<0?(n+=1e7,o=1):o=0,a[i]=n;for(i=r;i<s;i++){if(!((n=t[i]-o)<0)){a[i++]=n;break}n+=1e7,a[i]=n}for(;i<s;i++)a[i]=t[i];return f(a),a}function x(t,e,i){var n,s,r=t.length,a=new Array(r),l=-e;for(n=0;n<r;n++)s=t[n]+l,l=Math.floor(s/1e7),s%=1e7,a[n]=s<0?s+1e7:s;return"number"==typeof(a=d(a))?(i&&(a=-a),new h(a)):new o(a,i)}function w(t,e){var i,n,s,r,a=t.length,o=e.length,h=p(a+o);for(s=0;s<a;++s){r=t[s];for(var l=0;l<o;++l)i=r*e[l]+h[s+l],n=Math.floor(i/1e7),h[s+l]=i-1e7*n,h[s+l+1]+=n}return f(h),h}function b(t,i){var n,s,r=t.length,a=new Array(r),o=e,h=0;for(s=0;s<r;s++)n=t[s]*i+h,h=Math.floor(n/o),a[s]=n-h*o;for(;h>0;)a[s++]=h%o,h=Math.floor(h/o);return a}function E(t,e){for(var i=[];e-- >0;)i.push(0);return i.concat(t)}function T(t,i,n){return new o(t<e?b(i,t):w(i,u(t)),n)}function S(t){var e,i,n,s,r=t.length,a=p(r+r);for(n=0;n<r;n++){i=0-(s=t[n])*s;for(var o=n;o<r;o++)e=s*t[o]*2+a[n+o]+i,i=Math.floor(e/1e7),a[n+o]=e-1e7*i;a[n+r]=i}return f(a),a}function A(t,e){var i,n,s,r,a=t.length,o=p(a);for(s=0,i=a-1;i>=0;--i)s=(r=1e7*s+t[i])-(n=g(r/e))*e,o[i]=0|n;return[o,0|s]}function O(t,i){var n,s=j(i);if(r)return[new l(t.value/s.value),new l(t.value%s.value)];var c,m=t.value,v=s.value;if(0===v)throw new Error("Cannot divide by zero");if(t.isSmall)return s.isSmall?[new h(g(m/v)),new h(m%v)]:[a[0],t];if(s.isSmall){if(1===v)return[t,a[0]];if(-1==v)return[t.negate(),a[0]];var y=Math.abs(v);if(y<e){c=d((n=A(m,y))[0]);var x=n[1];return t.sign&&(x=-x),"number"==typeof c?(t.sign!==s.sign&&(c=-c),[new h(c),new h(x)]):[new o(c,t.sign!==s.sign),new h(x)]}v=u(y)}var w=C(m,v);if(-1===w)return[a[0],t];if(0===w)return[a[t.sign===s.sign?1:-1],a[0]];c=(n=m.length+v.length<=200?function(t,i){var n,s,r,a,o,h,l,c=t.length,u=i.length,f=e,g=p(i.length),m=i[u-1],v=Math.ceil(f/(2*m)),y=b(t,v),_=b(i,v);for(y.length<=c&&y.push(0),_.push(0),m=_[u-1],s=c-u;s>=0;s--){for(n=f-1,y[s+u]!==m&&(n=Math.floor((y[s+u]*f+y[s+u-1])/m)),r=0,a=0,h=_.length,o=0;o<h;o++)r+=n*_[o],l=Math.floor(r/f),a+=y[s+o]-(r-l*f),r=l,a<0?(y[s+o]=a+f,a=-1):(y[s+o]=a,a=0);for(;0!==a;){for(n-=1,r=0,o=0;o<h;o++)(r+=y[s+o]-f+_[o])<0?(y[s+o]=r+f,r=0):(y[s+o]=r,r=1);a+=r}g[s]=n}return y=A(y,v)[0],[d(g),d(y)]}(m,v):function(t,e){for(var i,n,s,r,a,o=t.length,h=e.length,l=[],c=[];o;)if(c.unshift(t[--o]),f(c),C(c,e)<0)l.push(0);else{s=1e7*c[(n=c.length)-1]+c[n-2],r=1e7*e[h-1]+e[h-2],n>h&&(s=1e7*(s+1)),i=Math.ceil(s/r);do{if(C(a=b(e,i),c)<=0)break;i--}while(i);l.push(i),c=_(c,a)}return l.reverse(),[d(l),d(c)]}(m,v))[0];var E=t.sign!==s.sign,T=n[1],S=t.sign;return"number"==typeof c?(E&&(c=-c),c=new h(c)):c=new o(c,E),"number"==typeof T?(S&&(T=-T),T=new h(T)):T=new o(T,S),[c,T]}function C(t,e){if(t.length!==e.length)return t.length>e.length?1:-1;for(var i=t.length-1;i>=0;i--)if(t[i]!==e[i])return t[i]>e[i]?1:-1;return 0}function P(t){var e=t.abs();return!e.isUnit()&&(!!(e.equals(2)||e.equals(3)||e.equals(5))||!(e.isEven()||e.isDivisibleBy(3)||e.isDivisibleBy(5))&&(!!e.lesser(49)||void 0))}function L(t,e){for(var i,n,r,a=t.prev(),o=a,h=0;o.isEven();)o=o.divide(2),h++;t:for(n=0;n<e.length;n++)if(!t.lesser(e[n])&&!(r=s(e[n]).modPow(o,t)).isUnit()&&!r.equals(a)){for(i=h-1;0!=i;i--){if((r=r.square().mod(t)).isUnit())return!1;if(r.equals(a))continue t}return!1}return!0}o.prototype=Object.create(a.prototype),h.prototype=Object.create(a.prototype),l.prototype=Object.create(a.prototype),o.prototype.add=function(t){var e=j(t);if(this.sign!==e.sign)return this.subtract(e.negate());var i=this.value,n=e.value;return e.isSmall?new o(y(i,Math.abs(n)),this.sign):new o(v(i,n),this.sign)},o.prototype.plus=o.prototype.add,h.prototype.add=function(t){var e=j(t),i=this.value;if(i<0!==e.sign)return this.subtract(e.negate());var n=e.value;if(e.isSmall){if(c(i+n))return new h(i+n);n=u(Math.abs(n))}return new o(y(n,Math.abs(i)),i<0)},h.prototype.plus=h.prototype.add,l.prototype.add=function(t){return new l(this.value+j(t).value)},l.prototype.plus=l.prototype.add,o.prototype.subtract=function(t){var e=j(t);if(this.sign!==e.sign)return this.add(e.negate());var i=this.value,n=e.value;return e.isSmall?x(i,Math.abs(n),this.sign):function(t,e,i){var n;return C(t,e)>=0?n=_(t,e):(n=_(e,t),i=!i),"number"==typeof(n=d(n))?(i&&(n=-n),new h(n)):new o(n,i)}(i,n,this.sign)},o.prototype.minus=o.prototype.subtract,h.prototype.subtract=function(t){var e=j(t),i=this.value;if(i<0!==e.sign)return this.add(e.negate());var n=e.value;return e.isSmall?new h(i-n):x(n,Math.abs(i),i>=0)},h.prototype.minus=h.prototype.subtract,l.prototype.subtract=function(t){return new l(this.value-j(t).value)},l.prototype.minus=l.prototype.subtract,o.prototype.negate=function(){return new o(this.value,!this.sign)},h.prototype.negate=function(){var t=this.sign,e=new h(-this.value);return e.sign=!t,e},l.prototype.negate=function(){return new l(-this.value)},o.prototype.abs=function(){return new o(this.value,!1)},h.prototype.abs=function(){return new h(Math.abs(this.value))},l.prototype.abs=function(){return new l(this.value>=0?this.value:-this.value)},o.prototype.multiply=function(t){var i,n,s,r=j(t),h=this.value,l=r.value,c=this.sign!==r.sign;if(r.isSmall){if(0===l)return a[0];if(1===l)return this;if(-1===l)return this.negate();if((i=Math.abs(l))<e)return new o(b(h,i),c);l=u(i)}return n=h.length,s=l.length,new o(-.012*n-.012*s+15e-6*n*s>0?function t(e,i){var n=Math.max(e.length,i.length);if(n<=30)return w(e,i);n=Math.ceil(n/2);var s=e.slice(n),r=e.slice(0,n),a=i.slice(n),o=i.slice(0,n),h=t(r,o),l=t(s,a),c=t(v(r,s),v(o,a)),u=v(v(h,E(_(_(c,h),l),n)),E(l,2*n));return f(u),u}(h,l):w(h,l),c)},o.prototype.times=o.prototype.multiply,h.prototype._multiplyBySmall=function(t){return c(t.value*this.value)?new h(t.value*this.value):T(Math.abs(t.value),u(Math.abs(this.value)),this.sign!==t.sign)},o.prototype._multiplyBySmall=function(t){return 0===t.value?a[0]:1===t.value?this:-1===t.value?this.negate():T(Math.abs(t.value),this.value,this.sign!==t.sign)},h.prototype.multiply=function(t){return j(t)._multiplyBySmall(this)},h.prototype.times=h.prototype.multiply,l.prototype.multiply=function(t){return new l(this.value*j(t).value)},l.prototype.times=l.prototype.multiply,o.prototype.square=function(){return new o(S(this.value),!1)},h.prototype.square=function(){var t=this.value*this.value;return c(t)?new h(t):new o(S(u(Math.abs(this.value))),!1)},l.prototype.square=function(t){return new l(this.value*this.value)},o.prototype.divmod=function(t){var e=O(this,t);return{quotient:e[0],remainder:e[1]}},l.prototype.divmod=h.prototype.divmod=o.prototype.divmod,o.prototype.divide=function(t){return O(this,t)[0]},l.prototype.over=l.prototype.divide=function(t){return new l(this.value/j(t).value)},h.prototype.over=h.prototype.divide=o.prototype.over=o.prototype.divide,o.prototype.mod=function(t){return O(this,t)[1]},l.prototype.mod=l.prototype.remainder=function(t){return new l(this.value%j(t).value)},h.prototype.remainder=h.prototype.mod=o.prototype.remainder=o.prototype.mod,o.prototype.pow=function(t){var e,i,n,s=j(t),r=this.value,o=s.value;if(0===o)return a[1];if(0===r)return a[0];if(1===r)return a[1];if(-1===r)return s.isEven()?a[1]:a[-1];if(s.sign)return a[0];if(!s.isSmall)throw new Error("The exponent "+s.toString()+" is too large.");if(this.isSmall&&c(e=Math.pow(r,o)))return new h(g(e));for(i=this,n=a[1];!0&o&&(n=n.times(i),--o),0!==o;)o/=2,i=i.square();return n},h.prototype.pow=o.prototype.pow,l.prototype.pow=function(t){var e=j(t),i=this.value,n=e.value,s=BigInt(0),r=BigInt(1),o=BigInt(2);if(n===s)return a[1];if(i===s)return a[0];if(i===r)return a[1];if(i===BigInt(-1))return e.isEven()?a[1]:a[-1];if(e.isNegative())return new l(s);for(var h=this,c=a[1];(n&r)===r&&(c=c.times(h),--n),n!==s;)n/=o,h=h.square();return c},o.prototype.modPow=function(t,e){if(t=j(t),(e=j(e)).isZero())throw new Error("Cannot take modPow with modulus 0");var i=a[1],n=this.mod(e);for(t.isNegative()&&(t=t.multiply(a[-1]),n=n.modInv(e));t.isPositive();){if(n.isZero())return a[0];t.isOdd()&&(i=i.multiply(n).mod(e)),t=t.divide(2),n=n.square().mod(e)}return i},l.prototype.modPow=h.prototype.modPow=o.prototype.modPow,o.prototype.compareAbs=function(t){var e=j(t),i=this.value,n=e.value;return e.isSmall?1:C(i,n)},h.prototype.compareAbs=function(t){var e=j(t),i=Math.abs(this.value),n=e.value;return e.isSmall?i===(n=Math.abs(n))?0:i>n?1:-1:-1},l.prototype.compareAbs=function(t){var e=this.value,i=j(t).value;return(e=e>=0?e:-e)===(i=i>=0?i:-i)?0:e>i?1:-1},o.prototype.compare=function(t){if(t===1/0)return-1;if(t===-1/0)return 1;var e=j(t),i=this.value,n=e.value;return this.sign!==e.sign?e.sign?1:-1:e.isSmall?this.sign?-1:1:C(i,n)*(this.sign?-1:1)},o.prototype.compareTo=o.prototype.compare,h.prototype.compare=function(t){if(t===1/0)return-1;if(t===-1/0)return 1;var e=j(t),i=this.value,n=e.value;return e.isSmall?i==n?0:i>n?1:-1:i<0!==e.sign?i<0?-1:1:i<0?1:-1},h.prototype.compareTo=h.prototype.compare,l.prototype.compare=function(t){if(t===1/0)return-1;if(t===-1/0)return 1;var e=this.value,i=j(t).value;return e===i?0:e>i?1:-1},l.prototype.compareTo=l.prototype.compare,o.prototype.equals=function(t){return 0===this.compare(t)},l.prototype.eq=l.prototype.equals=h.prototype.eq=h.prototype.equals=o.prototype.eq=o.prototype.equals,o.prototype.notEquals=function(t){return 0!==this.compare(t)},l.prototype.neq=l.prototype.notEquals=h.prototype.neq=h.prototype.notEquals=o.prototype.neq=o.prototype.notEquals,o.prototype.greater=function(t){return this.compare(t)>0},l.prototype.gt=l.prototype.greater=h.prototype.gt=h.prototype.greater=o.prototype.gt=o.prototype.greater,o.prototype.lesser=function(t){return this.compare(t)<0},l.prototype.lt=l.prototype.lesser=h.prototype.lt=h.prototype.lesser=o.prototype.lt=o.prototype.lesser,o.prototype.greaterOrEquals=function(t){return this.compare(t)>=0},l.prototype.geq=l.prototype.greaterOrEquals=h.prototype.geq=h.prototype.greaterOrEquals=o.prototype.geq=o.prototype.greaterOrEquals,o.prototype.lesserOrEquals=function(t){return this.compare(t)<=0},l.prototype.leq=l.prototype.lesserOrEquals=h.prototype.leq=h.prototype.lesserOrEquals=o.prototype.leq=o.prototype.lesserOrEquals,o.prototype.isEven=function(){return 0==(1&this.value[0])},h.prototype.isEven=function(){return 0==(1&this.value)},l.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},o.prototype.isOdd=function(){return 1==(1&this.value[0])},h.prototype.isOdd=function(){return 1==(1&this.value)},l.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},o.prototype.isPositive=function(){return!this.sign},h.prototype.isPositive=function(){return this.value>0},l.prototype.isPositive=h.prototype.isPositive,o.prototype.isNegative=function(){return this.sign},h.prototype.isNegative=function(){return this.value<0},l.prototype.isNegative=h.prototype.isNegative,o.prototype.isUnit=function(){return!1},h.prototype.isUnit=function(){return 1===Math.abs(this.value)},l.prototype.isUnit=function(){return this.abs().value===BigInt(1)},o.prototype.isZero=function(){return!1},h.prototype.isZero=function(){return 0===this.value},l.prototype.isZero=function(){return this.value===BigInt(0)},o.prototype.isDivisibleBy=function(t){var e=j(t);return!e.isZero()&&(!!e.isUnit()||(0===e.compareAbs(2)?this.isEven():this.mod(e).isZero()))},l.prototype.isDivisibleBy=h.prototype.isDivisibleBy=o.prototype.isDivisibleBy,o.prototype.isPrime=function(t){var e=P(this);if(void 0!==e)return e;var i=this.abs(),n=i.bitLength();if(n<=64)return L(i,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var r=Math.log(2)*n.toJSNumber(),a=Math.ceil(!0===t?2*Math.pow(r,2):r),o=[],h=0;h<a;h++)o.push(s(h+2));return L(i,o)},l.prototype.isPrime=h.prototype.isPrime=o.prototype.isPrime,o.prototype.isProbablePrime=function(t,e){var i=P(this);if(void 0!==i)return i;for(var n=this.abs(),r=void 0===t?5:t,a=[],o=0;o<r;o++)a.push(s.randBetween(2,n.minus(2),e));return L(n,a)},l.prototype.isProbablePrime=h.prototype.isProbablePrime=o.prototype.isProbablePrime,o.prototype.modInv=function(t){for(var e,i,n,r=s.zero,a=s.one,o=j(t),h=this.abs();!h.isZero();)e=o.divide(h),i=r,n=o,r=a,o=h,a=i.subtract(e.multiply(a)),h=n.subtract(e.multiply(h));if(!o.isUnit())throw new Error(this.toString()+" and "+t.toString()+" are not co-prime");return-1===r.compare(0)&&(r=r.add(t)),this.isNegative()?r.negate():r},l.prototype.modInv=h.prototype.modInv=o.prototype.modInv,o.prototype.next=function(){var t=this.value;return this.sign?x(t,1,this.sign):new o(y(t,1),this.sign)},h.prototype.next=function(){var t=this.value;return t+1<i?new h(t+1):new o(n,!1)},l.prototype.next=function(){return new l(this.value+BigInt(1))},o.prototype.prev=function(){var t=this.value;return this.sign?new o(y(t,1),!0):x(t,1,this.sign)},h.prototype.prev=function(){var t=this.value;return t-1>-i?new h(t-1):new o(n,!0)},l.prototype.prev=function(){return new l(this.value-BigInt(1))};for(var R=[1];2*R[R.length-1]<=e;)R.push(2*R[R.length-1]);var I=R.length,M=R[I-1];function D(t){return Math.abs(t)<=e}function k(t,e,i){e=j(e);for(var n=t.isNegative(),r=e.isNegative(),a=n?t.not():t,o=r?e.not():e,h=0,l=0,c=null,u=null,d=[];!a.isZero()||!o.isZero();)h=(c=O(a,M))[1].toJSNumber(),n&&(h=M-1-h),l=(u=O(o,M))[1].toJSNumber(),r&&(l=M-1-l),a=c[0],o=u[0],d.push(i(h,l));for(var f=0!==i(n?1:0,r?1:0)?s(-1):s(0),p=d.length-1;p>=0;p-=1)f=f.multiply(M).add(s(d[p]));return f}o.prototype.shiftLeft=function(t){var e=j(t).toJSNumber();if(!D(e))throw new Error(String(e)+" is too large for shifting.");if(e<0)return this.shiftRight(-e);var i=this;if(i.isZero())return i;for(;e>=I;)i=i.multiply(M),e-=I-1;return i.multiply(R[e])},l.prototype.shiftLeft=h.prototype.shiftLeft=o.prototype.shiftLeft,o.prototype.shiftRight=function(t){var e,i=j(t).toJSNumber();if(!D(i))throw new Error(String(i)+" is too large for shifting.");if(i<0)return this.shiftLeft(-i);for(var n=this;i>=I;){if(n.isZero()||n.isNegative()&&n.isUnit())return n;n=(e=O(n,M))[1].isNegative()?e[0].prev():e[0],i-=I-1}return(e=O(n,R[i]))[1].isNegative()?e[0].prev():e[0]},l.prototype.shiftRight=h.prototype.shiftRight=o.prototype.shiftRight,o.prototype.not=function(){return this.negate().prev()},l.prototype.not=h.prototype.not=o.prototype.not,o.prototype.and=function(t){return k(this,t,(function(t,e){return t&e}))},l.prototype.and=h.prototype.and=o.prototype.and,o.prototype.or=function(t){return k(this,t,(function(t,e){return t|e}))},l.prototype.or=h.prototype.or=o.prototype.or,o.prototype.xor=function(t){return k(this,t,(function(t,e){return t^e}))},l.prototype.xor=h.prototype.xor=o.prototype.xor;function N(t){var i=t.value,n="number"==typeof i?i|1<<30:"bigint"==typeof i?i|BigInt(1<<30):i[0]+i[1]*e|1073758208;return n&-n}function F(t,e){return t=j(t),e=j(e),t.greater(e)?t:e}function G(t,e){return t=j(t),e=j(e),t.lesser(e)?t:e}function B(t,e){if(t=j(t).abs(),e=j(e).abs(),t.equals(e))return t;if(t.isZero())return e;if(e.isZero())return t;for(var i,n,s=a[1];t.isEven()&&e.isEven();)i=G(N(t),N(e)),t=t.divide(i),e=e.divide(i),s=s.multiply(i);for(;t.isEven();)t=t.divide(N(t));do{for(;e.isEven();)e=e.divide(N(e));t.greater(e)&&(n=e,e=t,t=n),e=e.subtract(t)}while(!e.isZero());return s.isUnit()?t:t.multiply(s)}o.prototype.bitLength=function(){var t=this;return t.compareTo(s(0))<0&&(t=t.negate().subtract(s(1))),0===t.compareTo(s(0))?s(0):s(function t(e,i){if(i.compareTo(e)<=0){var n=t(e,i.square(i)),r=n.p,a=n.e,o=r.multiply(i);return o.compareTo(e)<=0?{p:o,e:2*a+1}:{p:r,e:2*a}}return{p:s(1),e:0}}(t,s(2)).e).add(s(1))},l.prototype.bitLength=h.prototype.bitLength=o.prototype.bitLength;var z=function(t,e,i,n){i=i||"0123456789abcdefghijklmnopqrstuvwxyz",t=String(t),n||(t=t.toLowerCase(),i=i.toLowerCase());var s,r=t.length,a=Math.abs(e),o={};for(s=0;s<i.length;s++)o[i[s]]=s;for(s=0;s<r;s++){if("-"!==(c=t[s])&&(c in o&&o[c]>=a)){if("1"===c&&1===a)continue;throw new Error(c+" is not a valid digit in base "+e+".")}}e=j(e);var h=[],l="-"===t[0];for(s=l?1:0;s<t.length;s++){var c;if((c=t[s])in o)h.push(j(o[c]));else{if("<"!==c)throw new Error(c+" is not a valid character");var u=s;do{s++}while(">"!==t[s]&&s<t.length);h.push(j(t.slice(u+1,s)))}}return U(h,e,l)};function U(t,e,i){var n,s=a[0],r=a[1];for(n=t.length-1;n>=0;n--)s=s.add(t[n].times(r)),r=r.times(e);return i?s.negate():s}function Y(t,e){if((e=s(e)).isZero()){if(t.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(e.equals(-1)){if(t.isZero())return{value:[0],isNegative:!1};if(t.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-t.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var i=Array.apply(null,Array(t.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return i.unshift([1]),{value:[].concat.apply([],i),isNegative:!1}}var n=!1;if(t.isNegative()&&e.isPositive()&&(n=!0,t=t.abs()),e.isUnit())return t.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(t.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:n};for(var r,a=[],o=t;o.isNegative()||o.compareAbs(e)>=0;){r=o.divmod(e),o=r.quotient;var h=r.remainder;h.isNegative()&&(h=e.minus(h).abs(),o=o.next()),a.push(h.toJSNumber())}return a.push(o.toJSNumber()),{value:a.reverse(),isNegative:n}}function X(t,e,i){var n=Y(t,e);return(n.isNegative?"-":"")+n.value.map((function(t){return function(t,e){return t<(e=e||"0123456789abcdefghijklmnopqrstuvwxyz").length?e[t]:"<"+t+">"}(t,i)})).join("")}function H(t){if(c(+t)){var e=+t;if(e===g(e))return r?new l(BigInt(e)):new h(e);throw new Error("Invalid integer: "+t)}var i="-"===t[0];i&&(t=t.slice(1));var n=t.split(/e/i);if(n.length>2)throw new Error("Invalid integer: "+n.join("e"));if(2===n.length){var s=n[1];if("+"===s[0]&&(s=s.slice(1)),(s=+s)!==g(s)||!c(s))throw new Error("Invalid integer: "+s+" is not a valid exponent.");var a=n[0],u=a.indexOf(".");if(u>=0&&(s-=a.length-u-1,a=a.slice(0,u)+a.slice(u+1)),s<0)throw new Error("Cannot include negative exponent part for integers");t=a+=new Array(s+1).join("0")}if(!/^([0-9][0-9]*)$/.test(t))throw new Error("Invalid integer: "+t);if(r)return new l(BigInt(i?"-"+t:t));for(var d=[],p=t.length,m=p-7;p>0;)d.push(+t.slice(m,p)),(m-=7)<0&&(m=0),p-=7;return f(d),new o(d,i)}function j(t){return"number"==typeof t?function(t){if(r)return new l(BigInt(t));if(c(t)){if(t!==g(t))throw new Error(t+" is not an integer.");return new h(t)}return H(t.toString())}(t):"string"==typeof t?H(t):"bigint"==typeof t?new l(t):t}o.prototype.toArray=function(t){return Y(this,t)},h.prototype.toArray=function(t){return Y(this,t)},l.prototype.toArray=function(t){return Y(this,t)},o.prototype.toString=function(t,e){if(void 0===t&&(t=10),10!==t)return X(this,t,e);for(var i,n=this.value,s=n.length,r=String(n[--s]);--s>=0;)i=String(n[s]),r+="0000000".slice(i.length)+i;return(this.sign?"-":"")+r},h.prototype.toString=function(t,e){return void 0===t&&(t=10),10!=t?X(this,t,e):String(this.value)},l.prototype.toString=h.prototype.toString,l.prototype.toJSON=o.prototype.toJSON=h.prototype.toJSON=function(){return this.toString()},o.prototype.valueOf=function(){return parseInt(this.toString(),10)},o.prototype.toJSNumber=o.prototype.valueOf,h.prototype.valueOf=function(){return this.value},h.prototype.toJSNumber=h.prototype.valueOf,l.prototype.valueOf=l.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};for(var W=0;W<1e3;W++)a[W]=j(W),W>0&&(a[-W]=j(-W));return a.one=a[1],a.zero=a[0],a.minusOne=a[-1],a.max=F,a.min=G,a.gcd=B,a.lcm=function(t,e){return t=j(t).abs(),e=j(e).abs(),t.divide(B(t,e)).multiply(e)},a.isInstance=function(t){return t instanceof o||t instanceof h||t instanceof l},a.randBetween=function(t,i,n){t=j(t),i=j(i);var s=n||Math.random,r=G(t,i),o=F(t,i).subtract(r).add(1);if(o.isSmall)return r.add(Math.floor(s()*o));for(var h=Y(o,e).value,l=[],c=!0,u=0;u<h.length;u++){var d=c?h[u]:e,f=g(s()*d);l.push(f),f<d&&(c=!1)}return r.add(a.fromArray(l,e,!1))},a.fromArray=function(t,e,i){return U(t.map(j),j(e||10),i)},a}();t.hasOwnProperty("exports")&&(t.exports=s),void 0===(n=function(){return s}.call(e,i,e,t))||(t.exports=n)}).call(this,i(51)(t))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(33),s=i(22);e.default=class{constructor(t,e,i,n=!0){this.api=t,this.name=e,this._data=new Promise(async(s,r)=>{if(i)s(i);else try{s(await t.queue.fetchCollection(e,n))}catch(t){r(t)}})}async author(){return(await this._data).author}async allowNotify(){return(await this._data).allow_notify}async authorizedAccounts(){return(await this._data).authorized_accounts}async notifyAccounts(){return(await this._data).notify_accounts}async marketFee(){return Number((await this._data).market_fee)}async data(){return s.deserialize((await this._data).serialized_data,n.ObjectSchema((await this.api.config()).collection_format))}async toObject(){return{collection_name:this.name,author:await this.author(),allowNotify:await this.allowNotify(),authorizedAccounts:await this.authorizedAccounts(),notifyAccounts:await this.notifyAccounts(),marketFee:await this.marketFee(),data:await this.data()}}}},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectSchema=void 0;const s=n(i(30)),r=n(i(50)),a=n(i(91)),o=n(i(92));function h(t,e){const i=[];let n=e[t];void 0===n&&(n=[]),delete e[t];for(const t of n)i.push({name:t.name,value:l(t.type,e)});return new r.default(i)}function l(t,e){if(t.endsWith("[]"))return new o.default(l(t.substring(0,t.length-2),e));if(t.startsWith("object{")&&t.endsWith("}")){const i=parseInt(t.substring(7,t.length-1),10);if(isNaN(i))throw new s.default(`invalid type '${t}'`);return h(i,e)}return new a.default(t)}e.ObjectSchema=function(t){const e={};for(const i of t){const t=void 0===i.parent?0:i.parent;void 0===e[t]&&(e[t]=[]),e[t].push(i)}return h(0,e)}},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(33),r=n(i(32));e.default=class{constructor(t,e,i,n,s=!0){this.api=t,this.collection=e,this.name=i,this._data=new Promise(async(r,a)=>{if(n)r(n);else try{r(await t.queue.fetchSchema(e,i,s))}catch(t){a(t)}}),this._collection=new Promise(async(i,n)=>{try{i(new r.default(t,e,void 0,s))}catch(t){n(t)}})}async format(){return s.ObjectSchema((await this._data).format)}async rawFormat(){return(await this._data).format}async toObject(){return{collection_name:this.collection,schema_name:this.name,format:await this.rawFormat()}}}},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=n(i(23)),r=n(i(21));e.default=class{constructor(t){this.size=t}deserialize(t){t.position+=this.size;const e=t.data.slice(t.position-this.size,t.position);if(e.length!==this.size)throw new s.default("FixedParser: read past end");return e}serialize(t){if(t.length!==this.size)throw new r.default("input data does not conform fixed size");return t}}},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=n(i(23)),r=i(13);e.default=class{deserialize(t){const e=r.varint_decode(t).toJSNumber();t.position+=e;const i=t.data.slice(t.position-e,t.position);if(i.length!==e)throw new s.default("VariableParser: read past end");return i}serialize(t){return r.concat_byte_arrays([r.varint_encode(t.length),t])}}},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(7),a=i(0),o=i(6),h=function(t){function e(e){var i=t.call(this,e)||this;return i.audioOnButton=new o.Button(i.scene,0,0,"texture_atlas_1","btn_audio_on_off","btn_audio_on_on"),i.audioOnButton.onDown(i.onDownAudio,i),i.add(i.audioOnButton),i.audioOffButton=new o.Button(i.scene,0,0,"texture_atlas_1","btn_audio_off_off","btn_audio_off_on"),i.audioOffButton.onDown(i.onDownAudio,i),i.add(i.audioOffButton),a.GameVars.gameData.muted?(i.audioOnButton.visible=!1,i.audioOffButton.visible=!0):(i.audioOnButton.visible=!0,i.audioOffButton.visible=!1),i}return s(e,t),e.prototype.onDownAudio=function(){r.AudioManager.toggleAudioState(),a.GameVars.gameData.muted?(this.audioOnButton.visible=!1,this.audioOffButton.visible=!0):(this.audioOnButton.visible=!0,this.audioOffButton.visible=!1)},e}(Phaser.GameObjects.Container);e.AudioButtonContainer=h},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),a=i(8),o=i(9),h=i(3),l=i(143),c=i(27),u=i(0),d=i(150),f=i(151),p=i(7),g=i(156),m=i(67),v=function(t){function e(){var i=t.call(this,"LevelEditionScene")||this;return e.currentInstance=i,i}return s(e,t),e.prototype.create=function(){a.GameManager.setCurrentScene(this);var t=this.add.graphics();t.fillStyle(1386540),t.fillRect(0,0,r.GameConstants.GAME_WIDTH,r.GameConstants.GAME_HEIGHT),h.LevelEditionManager.init(),this.levelItemsContainer=new c.LevelEditionContainer(this),this.add.existing(this.levelItemsContainer),this.game.device.os.desktop?(this.editionCursor=new d.EditionCursor(this),this.add.existing(this.editionCursor)):this.editionCursor=null,this.levelEditionMenu=new l.LevelEditionMenu(this),this.add.existing(this.levelEditionMenu),this.levelItemsContainer.init(),this.menuLayer=new f.MenuLayer(this),this.menuLayer.visible=!1,this.add.existing(this.menuLayer),this.wispManagementLayer=new m.WispManagementLayer(this),this.wispManagementLayer.visible=!1,this.add.existing(this.wispManagementLayer),this.wispBalanceBox=new g.WispBalanceBox(this),this.wispBalanceBox.x=r.GameConstants.GAME_WIDTH/2,this.wispBalanceBox.scaleX=u.GameVars.scaleX,this.add.existing(this.wispBalanceBox),p.AudioManager.stopLoop()},e.prototype.update=function(){if(this.editionCursor&&this.editionCursor.update(),this.levelEditionMenu.update(),this.wispBalanceBox.update(),u.GameVars.inputsEnabled&&!h.LevelEditionManager.showingLayer&&this.input.activePointer.isDown){var t=this.getColAndRow(),e=t.c,i=t.r;e>=0&&e<h.LevelEditionManager.COLS&&i>=0&&i<h.LevelEditionManager.ROWS&&h.LevelEditionManager.onDownCell(e,i)}},e.prototype.getColAndRow=function(){var t=this.input.activePointer.x,e=this.input.activePointer.y,i=h.LevelEditionManager.COLS,n=h.LevelEditionManager.ROWS,s=c.LevelEditionContainer.currentInstance.s,r=c.LevelEditionContainer.currentInstance.x,a=c.LevelEditionContainer.currentInstance.y;return t=(t-r)/(u.GameVars.scaleX*s)+i*o.BoardContainer.CELLS_SIZE/2,e=(e-a)/s+n*o.BoardContainer.CELLS_SIZE/2,{c:Math.floor(t/o.BoardContainer.CELLS_SIZE),r:Math.floor(e/o.BoardContainer.CELLS_SIZE)}},e.prototype.showWispManagerLayer=function(){this.wispBalanceBox.onMenuShown(),this.levelEditionMenu.onMenuShown(),this.wispManagementLayer.visible=!0},e.prototype.showMenuLayer=function(){this.wispBalanceBox.onMenuShown(),this.levelEditionMenu.onMenuShown(),this.menuLayer.visible=!0,this.menuLayer.onMenuShown()},e.prototype.hideMenuLayer=function(){this.menuLayer&&(this.menuLayer.visible=!1,this.wispBalanceBox.onMenuHidden(),this.levelEditionMenu.onMenuHidden())},e}(Phaser.Scene);e.LevelEditionScene=v},function(t,e,i){t.exports=function(){return i={},t.m=e=[function(t,e){function i(t,e,i,n){for(var r in e)if(e.hasOwnProperty(r)){var a=(c=e,u=r,p=f=void 0,p=(d=i)?c[u]:Object.getOwnPropertyDescriptor(c,u),!d&&p.value&&"object"==typeof p.value&&(p=p.value),!(!p||!((f=p).get&&"function"==typeof f.get||f.set&&"function"==typeof f.set))&&(void 0===p.enumerable&&(p.enumerable=!0),void 0===p.configurable&&(p.configurable=!0),p));if(!1!==a){if(o=(n||t).prototype,h=r,l=void 0,(l=Object.getOwnPropertyDescriptor(o,h))&&(l.value&&"object"==typeof l.value&&(l=l.value),!1===l.configurable)){if(s.ignoreFinals)continue;throw new Error("cannot override final property '"+r+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(t.prototype,r,a)}else t.prototype[r]=e[r]}var o,h,l,c,u,d,f,p}function n(t,e){if(e){Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++)i(t,e[n].prototype||e[n])}}function s(t){var e,s,r;if((t=t||{}).initialize){if("function"!=typeof t.initialize)throw new Error("initialize must be a function");r=t.initialize,delete t.initialize}else r=t.Extends?(s=t.Extends,function(){s.apply(this,arguments)}):function(){};t.Extends?(r.prototype=Object.create(t.Extends.prototype),r.prototype.constructor=r,e=t.Extends,delete t.Extends):r.prototype.constructor=r;var a=null;return t.Mixins&&(a=t.Mixins,delete t.Mixins),n(r,a),i(r,t,!0,e),r}s.extend=i,s.mixin=n,s.ignoreFinals=!1,t.exports=s},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e,i){var n=typeof t;return t&&"number"!=n&&"string"!=n&&t.hasOwnProperty(e)&&void 0!==t[e]?t[e]:i}},function(t,e,i){var n=i(0),s=i(124),r=new n({initialize:function(t,e){this.x=0,this.y=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0):(void 0===e&&(e=t),this.x=t||0,this.y=e||0)},clone:function(){return new r(this.x,this.y)},copy:function(t){return this.x=t.x||0,this.y=t.y||0,this},setFromObject:function(t){return this.x=t.x||0,this.y=t.y||0,this},set:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setTo:function(t,e){return this.set(t,e)},setToPolar:function(t,e){return null==e&&(e=1),this.x=Math.cos(t)*e,this.y=Math.sin(t)*e,this},equals:function(t){return this.x===t.x&&this.y===t.y},fuzzyEquals:function(t,e){return s(this.x,t.x,e)&&s(this.y,t.y,e)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},setAngle:function(t){return this.setToPolar(t,this.length())},add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(t){var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},distanceSq:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},length:function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},setLength:function(t){return this.normalize().scale(t)},lengthSq:function(){var t=this.x,e=this.y;return t*t+e*e},normalize:function(){var t=this.x,e=this.y,i=t*t+e*e;return 0<i&&(i=1/Math.sqrt(i),this.x=t*i,this.y=e*i),this},normalizeRightHand:function(){var t=this.x;return this.x=-1*this.y,this.y=t,this},normalizeLeftHand:function(){var t=this.x;return this.x=this.y,this.y=-1*t,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lerp:function(t,e){void 0===e&&(e=0);var i=this.x,n=this.y;return this.x=i+e*(t.x-i),this.y=n+e*(t.y-n),this},transformMat3:function(t){var e=this.x,i=this.y,n=t.val;return this.x=n[0]*e+n[3]*i+n[6],this.y=n[1]*e+n[4]*i+n[7],this},transformMat4:function(t){var e=this.x,i=this.y,n=t.val;return this.x=n[0]*e+n[4]*i+n[12],this.y=n[1]*e+n[5]*i+n[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(t){var e=this.length();return e&&t<e&&this.scale(t/e),this},reflect:function(t){return t=t.clone().normalize(),this.subtract(t.scale(2*this.dot(t)))},mirror:function(t){return this.reflect(t).negate()},rotate:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e*this.x-i*this.y,i*this.x+e*this.y)}});r.ZERO=new r,r.RIGHT=new r(1,0),r.LEFT=new r(-1,0),r.UP=new r(0,-1),r.DOWN=new r(0,1),r.ONE=new r(1,1),t.exports=r},function(t,e,i){var n=i(0),s=i(56),r=new n({initialize:function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.type=s.POINT,this.x=t,this.y=e},setTo:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this}});t.exports=r},function(t,e,i){var n=i(0),s=i(24),r=i(20),a=new n({initialize:function(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(r.BOOT,this.boot,this),this.events.on(r.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(r.DESTROY,this.destroy,this)},start:function(){this.events.once(r.SHUTDOWN,this.shutdown,this)},existing:function(t){return(t.renderCanvas||t.renderWebGL)&&this.displayList.add(t),t.preUpdate&&this.updateList.add(t),t},shutdown:function(){this.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(r.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});a.register=function(t,e){a.prototype.hasOwnProperty(t)||(a.prototype[t]=e)},a.remove=function(t){a.prototype.hasOwnProperty(t)&&delete a.prototype[t]},s.register("GameObjectFactory",a,"add"),t.exports=a},function(t,e){t.exports=function(t,e,i){if(t&&"number"!=typeof t){if(t.hasOwnProperty(e))return t[e];if(-1===e.indexOf("."))return i;for(var n=e.split("."),s=t,r=i,a=0;a<n.length;a++){if(!s.hasOwnProperty(n[a])){r=i;break}r=s[n[a]],s=s[n[a]]}return r}return i}},function(t,e){t.exports=function(t){if("object"!=typeof t||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0}},function(t,e){var i={},n={install:function(t){for(var e in i)t[e]=i[e]},register:function(t,e){i[t]=e},destroy:function(){i={}}};t.exports=n},function(t,e,i){"use strict";var n=Object.prototype.hasOwnProperty,s="~";function r(){}function a(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function o(t,e,i,n,r){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new a(i,n||t,r),h=s?s+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],o]:t._events[h].push(o):(t._events[h]=o,t._eventsCount++),t}function h(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function l(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(s=!1)),l.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)n.call(t,e)&&i.push(s?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},l.prototype.listeners=function(t){var e=s?s+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,r=i.length,a=new Array(r);n<r;n++)a[n]=i[n].fn;return a},l.prototype.listenerCount=function(t){var e=s?s+t:t,i=this._events[e];return i?i.fn?1:i.length:0},l.prototype.emit=function(t,e,i,n,r,a){var o=s?s+t:t;if(!this._events[o])return!1;var h,l=this._events[o],c=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,i),!0;case 4:return l.fn.call(l.context,e,i,n),!0;case 5:return l.fn.call(l.context,e,i,n,r),!0;case 6:return l.fn.call(l.context,e,i,n,r,a),!0}for(f=1,h=new Array(c-1);f<c;f++)h[f-1]=arguments[f];l.fn.apply(l.context,h)}else for(var u,d=l.length,f=0;f<d;f++)switch(l[f].once&&this.removeListener(t,l[f].fn,void 0,!0),c){case 1:l[f].fn.call(l[f].context);break;case 2:l[f].fn.call(l[f].context,e);break;case 3:l[f].fn.call(l[f].context,e,i);break;case 4:l[f].fn.call(l[f].context,e,i,n);break;default:if(!h)for(u=1,h=new Array(c-1);u<c;u++)h[u-1]=arguments[u];l[f].fn.apply(l[f].context,h)}return!0},l.prototype.on=function(t,e,i){return o(this,t,e,i,!1)},l.prototype.once=function(t,e,i){return o(this,t,e,i,!0)},l.prototype.removeListener=function(t,e,i,n){var r=s?s+t:t;if(!this._events[r])return this;if(!e)return h(this,r),this;var a=this._events[r];if(a.fn)a.fn!==e||n&&!a.once||i&&a.context!==i||h(this,r);else{for(var o=0,l=[],c=a.length;o<c;o++)(a[o].fn!==e||n&&!a[o].once||i&&a[o].context!==i)&&l.push(a[o]);l.length?this._events[r]=1===l.length?l[0]:l:h(this,r)}return this},l.prototype.removeAllListeners=function(t){var e;return t?(e=s?s+t:t,this._events[e]&&h(this,e)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=s,l.EventEmitter=l,t.exports=l},function(t,e,i){var n=i(0),s=i(57),r=i(171),a=i(306),o=i(56),h=i(47),l=i(174),c=new n({initialize:function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.type=o.RECTANGLE,this.x=t,this.y=e,this.width=i,this.height=n},contains:function(t,e){return s(this,t,e)},getPoint:function(t,e){return r(this,t,e)},getPoints:function(t,e,i){return a(this,t,e,i)},getRandomPoint:function(t){return l(this,t)},setTo:function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(t){return void 0===t&&(t=new h),t.setTo(this.x,this.y,this.right,this.y),t},getLineB:function(t){return void 0===t&&(t=new h),t.setTo(this.right,this.y,this.right,this.bottom),t},getLineC:function(t){return void 0===t&&(t=new h),t.setTo(this.right,this.bottom,this.x,this.bottom),t},getLineD:function(t){return void 0===t&&(t=new h),t.setTo(this.x,this.bottom,this.x,this.y),t},left:{get:function(){return this.x},set:function(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}},right:{get:function(){return this.x+this.width},set:function(t){t<=this.x?this.width=0:this.width=t-this.x}},top:{get:function(){return this.y},set:function(t){t>=this.bottom?this.height=0:this.height=this.bottom-t,this.y=t}},bottom:{get:function(){return this.y+this.height},set:function(t){t<=this.y?this.height=0:this.height=t-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});t.exports=c},function(t,e,i){t.exports={Alpha:i(607),AlphaSingle:i(303),BlendMode:i(304),ComputedSize:i(608),Crop:i(609),Depth:i(305),Flip:i(610),GetBounds:i(611),Mask:i(309),Origin:i(632),PathFollower:i(633),Pipeline:i(167),ScrollFactor:i(312),Size:i(634),Texture:i(635),TextureCrop:i(636),Tint:i(637),ToJSON:i(176),Transform:i(313),TransformMatrix:i(25),Visible:i(314)}},function(t,e){t.exports={getTintFromFloats:function(t,e,i,n){return((255&(255*n|0))<<24|(255&(255*t|0))<<16|(255&(255*e|0))<<8|255&(255*i|0))>>>0},getTintAppendFloatAlpha:function(t,e){return((255&(255*e|0))<<24|t)>>>0},getTintAppendFloatAlphaAndSwap:function(t,e){return((255&(255*e|0))<<24|(255&(0|t))<<16|(255&(t>>8|0))<<8|255&(t>>16|0))>>>0},getFloatsFromUintRGB:function(t){return[(255&(t>>16|0))/255,(255&(t>>8|0))/255,(255&(0|t))/255]},checkShaderMax:function(t,e){e&&-1!==e||(e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS));for(var i=t.createShader(t.FRAGMENT_SHADER),n=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");;){var s=n.replace(/%forloop%/gi,function(t){for(var e="",i=0;i<t;++i)0<i&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}(e));if(t.shaderSource(i,s),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS))break;e=e/2|0}return e},parseFragmentShaderMaxTextures:function(t,e){if(!t)return"";for(var i="",n=0;n<e;n++)0<n&&(i+="\n\telse "),n<e-1&&(i+="if (outTexId < "+n+".5)"),i+="\n\t{",i+="\n\t\ttexture = texture2D(uMainSampler["+n+"], outTexCoord);",i+="\n\t}";return(t=t.replace(/%count%/gi,e.toString())).replace(/%forloop%/gi,i)}}},function(t,e,i){var n=i(193),s=i(6);t.exports=function(t,e,i){var r=s(t,e,null);if(null===r)return i;if(Array.isArray(r))return n.RND.pick(r);if("object"==typeof r){if(r.hasOwnProperty("randInt"))return n.RND.integerInRange(r.randInt[0],r.randInt[1]);if(r.hasOwnProperty("randFloat"))return n.RND.realInRange(r.randFloat[0],r.randFloat[1])}else if("function"==typeof r)return r(e);return r}},function(t,e){var i={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};t.exports=i},function(t,e,i){var n=i(0),s=i(176),r=i(101),a=i(9),o=i(75),h=i(20),l=new n({Extends:a,initialize:function(t,e){a.call(this),this.scene=t,this.displayList=null,this.type=e,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(o.ADDED_TO_SCENE,this.addedToScene,this),this.on(o.REMOVED_FROM_SCENE,this.removedFromScene,this),t.sys.queueDepthSort()},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},setState:function(t){return this.state=t,this},setDataEnabled:function(){return this.data||(this.data=new r(this)),this},setData:function(t,e){return this.data||(this.data=new r(this)),this.data.set(t,e),this},incData:function(t,e){return this.data||(this.data=new r(this)),this.data.inc(t,e),this},toggleData:function(t){return this.data||(this.data=new r(this)),this.data.toggle(t),this},getData:function(t){return this.data||(this.data=new r(this)),this.data.get(t)},setInteractive:function(t,e,i){return this.scene.sys.input.enable(this,t,e,i),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return s(this)},willRender:function(t){return!(l.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function(){for(var t=this,e=this.parentContainer,i=[];e&&(i.unshift(e.getIndex(t)),(t=e).parentContainer);)e=e.parentContainer;return this.displayList?i.unshift(this.displayList.getIndex(t)):i.unshift(this.scene.sys.displayList.getIndex(t)),i},addToDisplayList:function(t){return void 0===t&&(t=this.scene.sys.displayList),this.displayList&&this.displayList!==t&&this.removeFromDisplayList(),t.exists(this)||((this.displayList=t).add(this,!0),t.queueDepthSort(),this.emit(o.ADDED_TO_SCENE,this,this.scene),t.events.emit(h.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var t=this.displayList||this.scene.sys.displayList;return t.exists(this)&&(t.remove(this,!0),t.queueDepthSort(),this.displayList=null,this.emit(o.REMOVED_FROM_SCENE,this,this.scene),t.events.emit(h.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(t){this.scene&&!this.ignoreDestroy&&(void 0===t&&(t=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(o.DESTROY,this,t),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});l.RENDER_MASK=15,t.exports=l},function(t,e,i){var n=i(0),s=i(24),r=i(20),a=new n({initialize:function(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(r.BOOT,this.boot,this),this.events.on(r.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(r.DESTROY,this.destroy,this)},start:function(){this.events.once(r.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(r.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});a.register=function(t,e){a.prototype.hasOwnProperty(t)||(a.prototype[t]=e)},a.remove=function(t){a.prototype.hasOwnProperty(t)&&delete a.prototype[t]},s.register("GameObjectCreator",a,"make"),t.exports=a},function(t,e,i){var n=i(7),s=function(){var t,e,i,r,a,o,h=arguments[0]||{},l=1,c=arguments.length,u=!1;for("boolean"==typeof h&&(u=h,h=arguments[1]||{},l=2),c===l&&(h=this,--l);l<c;l++)if(null!=(t=arguments[l]))for(e in t)i=h[e],h!==(r=t[e])&&(u&&r&&(n(r)||(a=Array.isArray(r)))?(o=a?(a=!1,i&&Array.isArray(i)?i:[]):i&&n(i)?i:{},h[e]=s(u,o,r)):void 0!==r&&(h[e]=r));return h};t.exports=s},function(t,e){t.exports=function(t,e,i){return Math.max(e,Math.min(i,t))}},function(t,e,i){var n=i(25),s=new n,r=new n,a=new n,o={camera:s,sprite:r,calc:a};t.exports=function(t,e,i){var n=s,h=r,l=a;return h.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),n.copyFrom(e.matrix),i?(n.multiplyWithOffset(i,-e.scrollX*t.scrollFactorX,-e.scrollY*t.scrollFactorY),h.e=t.x,h.f=t.y):(h.e-=e.scrollX*t.scrollFactorX,h.f-=e.scrollY*t.scrollFactorY),n.multiply(h,l),o}},function(t,e,i){t.exports={ADDED_TO_SCENE:i(656),BOOT:i(657),CREATE:i(658),DESTROY:i(659),PAUSE:i(660),POST_UPDATE:i(661),PRE_RENDER:i(662),PRE_UPDATE:i(663),READY:i(664),REMOVED_FROM_SCENE:i(665),RENDER:i(666),RESUME:i(667),SHUTDOWN:i(668),SLEEP:i(669),START:i(670),TRANSITION_COMPLETE:i(671),TRANSITION_INIT:i(672),TRANSITION_OUT:i(673),TRANSITION_START:i(674),TRANSITION_WAKE:i(675),UPDATE:i(676),WAKE:i(677)}},function(t,e){t.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19}},function(t,e,i){t.exports={BLUR:i(612),BOOT:i(613),CONTEXT_LOST:i(614),CONTEXT_RESTORED:i(615),DESTROY:i(616),FOCUS:i(617),HIDDEN:i(618),PAUSE:i(619),POST_RENDER:i(620),POST_STEP:i(621),PRE_RENDER:i(622),PRE_STEP:i(623),READY:i(624),RESUME:i(625),STEP:i(626),VISIBLE:i(627)}},function(t,e,i){var n=i(0),s=i(21),r=i(95),a=i(2),o=i(155),h=i(240),l=i(517),c=i(156),u=new n({initialize:function(t,e){this.loader=t,this.cache=a(e,"cache",!1),this.type=a(e,"type",!1),this.key=a(e,"key",!1);var i=this.key;if(t.prefix&&""!==t.prefix&&(this.key=t.prefix+i),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var n=a(e,"url");void 0===n?n=t.path+i+"."+a(e,"extension",""):"string"!=typeof n||n.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)||(n=t.path+n),this.url=n,this.src="",this.xhrSettings=c(a(e,"responseType",void 0)),a(e,"xhrSettings",!1)&&(this.xhrSettings=h(this.xhrSettings,a(e,"xhrSettings",{}))),this.xhrLoader=null,this.state="function"==typeof this.url?s.FILE_POPULATED:s.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=a(e,"config",{}),this.multiFile,this.linkFile},setLink:function(t){(this.linkFile=t).linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===s.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=s.FILE_LOADING,this.src=o(this,this.loader.baseURL),0===this.src.indexOf("data:")?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=l(this,this.loader.xhr))},onLoad:function(t,e){var i=t.responseURL&&(0===t.responseURL.indexOf("file://")||0===t.responseURL.indexOf("capacitor://"))&&0===e.target.status,n=!(e.target&&200!==e.target.status)||i;4===t.readyState&&400<=t.status&&t.status<=599&&(n=!1),this.state=s.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,n)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(t){t.lengthComputable&&(this.bytesLoaded=t.loaded,this.bytesTotal=t.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(r.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=s.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=s.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=s.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(t){void 0===t&&(t=this.data);var e=this.key,i=this.type;this.loader.emit(r.FILE_COMPLETE,e,i,t),this.loader.emit(r.FILE_KEY_COMPLETE+i+"-"+e,e,i,t),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});u.createObjectURL=function(t,e,i){var n;"function"==typeof URL?t.src=URL.createObjectURL(e):((n=new FileReader).onload=function(){t.removeAttribute("crossOrigin"),t.src="data:"+(e.type||i)+";base64,"+n.result.split(",")[1]},n.onerror=t.onerror,n.readAsDataURL(e))},u.revokeObjectURL=function(t){"function"==typeof URL&&URL.revokeObjectURL(t.src)},t.exports=u},function(t,e){var i={},n={},s={register:function(t,e,n,s){void 0===s&&(s=!1),i[t]={plugin:e,mapping:n,custom:s}},registerCustom:function(t,e,i,s){n[t]={plugin:e,mapping:i,data:s}},hasCore:function(t){return i.hasOwnProperty(t)},hasCustom:function(t){return n.hasOwnProperty(t)},getCore:function(t){return i[t]},getCustom:function(t){return n[t]},getCustomClass:function(t){return n.hasOwnProperty(t)?n[t].plugin:null},remove:function(t){i.hasOwnProperty(t)&&delete i[t]},removeCustom:function(t){n.hasOwnProperty(t)&&delete n[t]},destroyCorePlugins:function(){for(var t in i)i.hasOwnProperty(t)&&delete i[t]},destroyCustomPlugins:function(){for(var t in n)n.hasOwnProperty(t)&&delete n[t]}};t.exports=s},function(t,e,i){var n=i(0),s=i(14),r=i(3),a=new n({initialize:function(t,e,i,n,s,r){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===s&&(s=0),void 0===r&&(r=0),this.matrix=new Float32Array([t,e,i,n,s,r,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(t){this.matrix[0]=t}},b:{get:function(){return this.matrix[1]},set:function(t){this.matrix[1]=t}},c:{get:function(){return this.matrix[2]},set:function(t){this.matrix[2]=t}},d:{get:function(){return this.matrix[3]},set:function(t){this.matrix[3]=t}},e:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},f:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},tx:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},ty:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var t=this.matrix,e=t[0],i=t[1],n=t[2],r=t[3];return e||i?0<i?Math.acos(e/this.scaleX):-Math.acos(e/this.scaleX):n||r?s.TAU-(0<r?Math.acos(-n/this.scaleY):-Math.acos(n/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var t=this.matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,this},translate:function(t,e){var i=this.matrix;return i[4]=i[0]*t+i[2]*e+i[4],i[5]=i[1]*t+i[3]*e+i[5],this},scale:function(t,e){var i=this.matrix;return i[0]*=t,i[1]*=t,i[2]*=e,i[3]*=e,this},rotate:function(t){var e=Math.sin(t),i=Math.cos(t),n=this.matrix,s=n[0],r=n[1],a=n[2],o=n[3];return n[0]=s*i+a*e,n[1]=r*i+o*e,n[2]=s*-e+a*i,n[3]=r*-e+o*i,this},multiply:function(t,e){var i=this.matrix,n=t.matrix,s=i[0],r=i[1],a=i[2],o=i[3],h=i[4],l=i[5],c=n[0],u=n[1],d=n[2],f=n[3],p=n[4],g=n[5],m=void 0===e?this:e;return m.a=c*s+u*a,m.b=c*r+u*o,m.c=d*s+f*a,m.d=d*r+f*o,m.e=p*s+g*a+h,m.f=p*r+g*o+l,m},multiplyWithOffset:function(t,e,i){var n=this.matrix,s=t.matrix,r=n[0],a=n[1],o=n[2],h=n[3],l=e*r+i*o+n[4],c=e*a+i*h+n[5],u=s[0],d=s[1],f=s[2],p=s[3],g=s[4],m=s[5];return n[0]=u*r+d*o,n[1]=u*a+d*h,n[2]=f*r+p*o,n[3]=f*a+p*h,n[4]=g*r+m*o+l,n[5]=g*a+m*h+c,this},transform:function(t,e,i,n,s,r){var a=this.matrix,o=a[0],h=a[1],l=a[2],c=a[3],u=a[4],d=a[5];return a[0]=t*o+e*l,a[1]=t*h+e*c,a[2]=i*o+n*l,a[3]=i*h+n*c,a[4]=s*o+r*l+u,a[5]=s*h+r*c+d,this},transformPoint:function(t,e,i){void 0===i&&(i={x:0,y:0});var n=this.matrix,s=n[0],r=n[1],a=n[2],o=n[3],h=n[4],l=n[5];return i.x=t*s+e*a+h,i.y=t*r+e*o+l,i},invert:function(){var t=this.matrix,e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],a=t[5],o=e*s-i*n;return t[0]=s/o,t[1]=-i/o,t[2]=-n/o,t[3]=e/o,t[4]=(n*a-s*r)/o,t[5]=-(e*a-i*r)/o,this},copyFrom:function(t){var e=this.matrix;return e[0]=t.a,e[1]=t.b,e[2]=t.c,e[3]=t.d,e[4]=t.e,e[5]=t.f,this},copyFromArray:function(t){var e=this.matrix;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this},copyToContext:function(t){var e=this.matrix;return t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t},setToContext:function(t){var e=this.matrix;return t.setTransform(e[0],e[1],e[2],e[3],e[4],e[5]),t},copyToArray:function(t){var e=this.matrix;return void 0===t?t=[e[0],e[1],e[2],e[3],e[4],e[5]]:(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5]),t},setTransform:function(t,e,i,n,s,r){var a=this.matrix;return a[0]=t,a[1]=e,a[2]=i,a[3]=n,a[4]=s,a[5]=r,this},decomposeMatrix:function(){var t,e,i=this.decomposedMatrix,n=this.matrix,s=n[0],r=n[1],a=n[2],o=n[3],h=s*o-r*a;return i.translateX=n[4],i.translateY=n[5],s||r?(t=Math.sqrt(s*s+r*r),i.rotation=0<r?Math.acos(s/t):-Math.acos(s/t),i.scaleX=t,i.scaleY=h/t):a||o?(e=Math.sqrt(a*a+o*o),i.rotation=.5*Math.PI-(0<o?Math.acos(-a/e):-Math.acos(a/e)),i.scaleX=h/e,i.scaleY=e):(i.rotation=0,i.scaleX=0,i.scaleY=0),i},applyITRS:function(t,e,i,n,s){var r=this.matrix,a=Math.sin(i),o=Math.cos(i);return r[4]=t,r[5]=e,r[0]=o*n,r[1]=a*n,r[2]=-a*s,r[3]=o*s,this},applyInverse:function(t,e,i){void 0===i&&(i=new r);var n=this.matrix,s=n[0],a=n[1],o=n[2],h=n[3],l=n[4],c=n[5],u=1/(s*h+o*-a);return i.x=h*u*t+-o*u*e+(c*o-l*h)*u,i.y=s*u*e+-a*u*t+(-c*s+l*a)*u,i},getX:function(t,e){return t*this.a+e*this.c+this.e},getY:function(t,e){return t*this.b+e*this.d+this.f},getXRound:function(t,e,i){var n=this.getX(t,e);return i&&(n=Math.round(n)),n},getYRound:function(t,e,i){var n=this.getY(t,e);return i&&(n=Math.round(n)),n},getCSSMatrix:function(){var t=this.matrix;return"matrix("+t[0]+","+t[1]+","+t[2]+","+t[3]+","+t[4]+","+t[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});t.exports=a},function(t,e,i){var n=i(2);t.exports=function(t,e,i,s,r,a){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=a.width),void 0===s&&(s=a.height);var o=n(r=r||{},"isNotEmpty",!1),h=n(r,"isColliding",!1),l=n(r,"hasInterestingFace",!1);t<0&&(i+=t,t=0),e<0&&(s+=e,e=0),t+i>a.width&&(i=Math.max(a.width-t,0)),e+s>a.height&&(s=Math.max(a.height-e,0));for(var c=[],u=e;u<e+s;u++)for(var d=t;d<t+i;d++){var f=a.data[u][d];if(null!==f){if(o&&-1===f.index)continue;if(h&&!f.collides)continue;if(l&&!f.hasInterestingFace)continue;c.push(f)}}return c}},function(t,e){t.exports=function(t,e,i,n,s,r){var a;void 0===n&&(n=0),void 0===s&&(s=0),void 0===r&&(r=1);var o=0,h=t.length;if(1===r)for(a=s;a<h;a++)t[a][e]=i+o*n,o++;else for(a=s;0<=a;a--)t[a][e]=i+o*n,o++;return t}},function(t,e,i){var n=i(35),s=i(13);t.exports=function(t,e,i){e.x=s(i,"x",0),e.y=s(i,"y",0),e.depth=s(i,"depth",0),e.flipX=s(i,"flipX",!1),e.flipY=s(i,"flipY",!1);var r=s(i,"scale",null);"number"==typeof r?e.setScale(r):null!==r&&(e.scaleX=s(r,"x",1),e.scaleY=s(r,"y",1));var a=s(i,"scrollFactor",null);"number"==typeof a?e.setScrollFactor(a):null!==a&&(e.scrollFactorX=s(a,"x",1),e.scrollFactorY=s(a,"y",1)),e.rotation=s(i,"rotation",0);var o=s(i,"angle",null);null!==o&&(e.angle=o),e.alpha=s(i,"alpha",1);var h,l,c=s(i,"origin",null);return"number"==typeof c?e.setOrigin(c):null!==c&&(h=s(c,"x",.5),l=s(c,"y",.5),e.setOrigin(h,l)),e.blendMode=s(i,"blendMode",n.NORMAL),e.visible=s(i,"visible",!0),s(i,"add",!0)&&t.sys.displayList.add(e),e.preUpdate&&t.sys.updateList.add(e),e}},function(t,e){t.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},function(t,e,i){var n=i(19);t.exports=function(t,e,i,s,r){var a=s.alpha*i.alpha;if(a<=0)return!1;var o=n(i,s,r).calc;return e.globalCompositeOperation=t.blendModes[i.blendMode],e.globalAlpha=a,e.save(),o.setToContext(e),e.imageSmoothingEnabled=!(!t.antialias||i.frame&&i.frame.source.scaleMode),!0}},function(t,e,i){var n,s=i(33),r=i(192),a=[],o=!1;function h(t,e,i,h,l){void 0===e&&(e=1),void 0===i&&(i=1),void 0===h&&(h=s.CANVAS),void 0===l&&(l=!1);var c=n(h),u=(null===c?(c={parent:t,canvas:document.createElement("canvas"),type:h},h===s.CANVAS&&a.push(c)):c.parent=t,c.canvas);return l&&(c.parent=u),u.width=e,u.height=i,o&&h===s.CANVAS&&r.disable(u.getContext("2d")),u}function l(){var t=0;return a.forEach((function(e){e.parent&&t++})),t}t.exports={create2D:function(t,e,i){return h(t,e,i,s.CANVAS)},create:h,createWebGL:function(t,e,i){return h(t,e,i,s.WEBGL)},disableSmoothing:function(){o=!0},enableSmoothing:function(){o=!1},first:n=function(t){if(void 0===t&&(t=s.CANVAS),t===s.WEBGL)return null;for(var e=0;e<a.length;e++){var i=a[e];if(!i.parent&&i.type===t)return i}return null},free:function(){return a.length-l()},pool:a,remove:function(t){var e=t instanceof HTMLCanvasElement;a.forEach((function(i){(e&&i.canvas===t||!e&&i.parent===t)&&(i.parent=null,i.canvas.width=1,i.canvas.height=1)}))},total:l}},,function(t,e,i){var n={VERSION:"3.55.2",BlendModes:i(35),ScaleModes:i(168),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};t.exports=n},function(t,e,i){var n=i(0),s=i(11),r=i(15),a=i(47),o=new n({Extends:r,Mixins:[s.AlphaSingle,s.BlendMode,s.Depth,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Transform,s.Visible],initialize:function(t,e,i){void 0===e&&(e="Shape"),r.call(this,t,e),this.geom=i,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new a,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.isFilled=!1:(this.fillColor=t,this.fillAlpha=e,this.isFilled=!0),this},setStrokeStyle:function(t,e,i){return void 0===i&&(i=1),void 0===t?this.isStroked=!1:(this.lineWidth=t,this.strokeColor=e,this.strokeAlpha=i,this.isStroked=!0),this},setClosePath:function(t){return this.closePath=t,this},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}}});t.exports=o},function(t,e){t.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(t,e,i){var n=i(14);t.exports=function(t){return t*n.DEG_TO_RAD}},function(t,e,i){t.exports={DESTROY:i(743),FADE_IN_COMPLETE:i(744),FADE_IN_START:i(745),FADE_OUT_COMPLETE:i(746),FADE_OUT_START:i(747),FLASH_COMPLETE:i(748),FLASH_START:i(749),FOLLOW_UPDATE:i(750),PAN_COMPLETE:i(751),PAN_START:i(752),POST_RENDER:i(753),PRE_RENDER:i(754),ROTATE_COMPLETE:i(755),ROTATE_START:i(756),SHAKE_COMPLETE:i(757),SHAKE_START:i(758),ZOOM_COMPLETE:i(759),ZOOM_START:i(760)}},function(t,e,i){var n=i(0),s=i(103),r=i(328),a=i(188),o=i(329),h=new n({initialize:function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(t,e,i,n)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(t,e,i,n,s){return void 0===n&&(n=255),void 0===s&&(s=!0),this._locked=!0,this.red=t,this.green=e,this.blue=i,this.alpha=n,this._locked=!1,this.update(s)},setGLTo:function(t,e,i,n){return void 0===n&&(n=1),this._locked=!0,this.redGL=t,this.greenGL=e,this.blueGL=i,this.alphaGL=n,this._locked=!1,this.update(!0)},setFromRGB:function(t){return this._locked=!0,this.red=t.r,this.green=t.g,this.blue=t.b,t.hasOwnProperty("a")&&(this.alpha=t.a),this._locked=!1,this.update(!0)},setFromHSV:function(t,e,i){return a(t,e,i,this)},update:function(t){if(void 0===t&&(t=!1),this._locked)return this;var e=this.r,i=this.g,n=this.b,a=this.a;return this._color=s(e,i,n),this._color32=r(e,i,n,a),this._rgba="rgba("+e+","+i+","+n+","+a/255+")",t&&o(e,i,n,this),this},updateHSV:function(){var t=this.r,e=this.g,i=this.b;return o(t,e,i,this),this},clone:function(){return new h(this.r,this.g,this.b,this.a)},gray:function(t){return this.setTo(t,t,t)},random:function(t,e){void 0===t&&(t=0),void 0===e&&(e=255);var i=Math.floor(t+Math.random()*(e-t)),n=Math.floor(t+Math.random()*(e-t)),s=Math.floor(t+Math.random()*(e-t));return this.setTo(i,n,s)},randomGray:function(t,e){void 0===t&&(t=0),void 0===e&&(e=255);var i=Math.floor(t+Math.random()*(e-t));return this.setTo(i,i,i)},saturate:function(t){return this.s+=t/100,this},desaturate:function(t){return this.s-=t/100,this},lighten:function(t){return this.v+=t/100,this},darken:function(t){return this.v-=t/100,this},brighten:function(t){var e=this.r,i=this.g,n=this.b;return e=Math.max(0,Math.min(255,e-Math.round(-t/100*255))),i=Math.max(0,Math.min(255,i-Math.round(-t/100*255))),n=Math.max(0,Math.min(255,n-Math.round(-t/100*255))),this.setTo(e,i,n)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(t){this.gl[0]=Math.min(Math.abs(t),1),this.r=Math.floor(255*this.gl[0]),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(t){this.gl[1]=Math.min(Math.abs(t),1),this.g=Math.floor(255*this.gl[1]),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(t){this.gl[2]=Math.min(Math.abs(t),1),this.b=Math.floor(255*this.gl[2]),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(t){this.gl[3]=Math.min(Math.abs(t),1),this.a=Math.floor(255*this.gl[3]),this.update()}},red:{get:function(){return this.r},set:function(t){t=Math.floor(Math.abs(t)),this.r=Math.min(t,255),this.gl[0]=t/255,this.update(!0)}},green:{get:function(){return this.g},set:function(t){t=Math.floor(Math.abs(t)),this.g=Math.min(t,255),this.gl[1]=t/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(t){t=Math.floor(Math.abs(t)),this.b=Math.min(t,255),this.gl[2]=t/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(t){t=Math.floor(Math.abs(t)),this.a=Math.min(t,255),this.gl[3]=t/255,this.update()}},h:{get:function(){return this._h},set:function(t){this._h=t,a(t,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(t){this._s=t,a(this._h,t,this._v,this)}},v:{get:function(){return this._v},set:function(t){this._v=t,a(this._h,this._s,t,this)}}});t.exports=h},function(t,e,i){var n=new(i(0))({initialize:function(t,e,i){this.x=0,this.y=0,this.z=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=e||0,this.z=i||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clone:function(){return new n(this.x,this.y,this.z)},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},crossVectors:function(t,e){var i=t.x,n=t.y,s=t.z,r=e.x,a=e.y,o=e.z;return this.x=n*o-s*a,this.y=s*r-i*o,this.z=i*a-n*r,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this},set:function(t,e,i){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=e||0,this.z=i||0),this},setFromMatrixPosition:function(t){return this.fromArray(t.val,12)},setFromMatrixColumn:function(t,e){return this.fromArray(t.val,4*e)},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addScale:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(t){var e=t.x-this.x,i=t.y-this.y,n=t.z-this.z||0;return Math.sqrt(e*e+i*i+n*n)},distanceSq:function(t){var e=t.x-this.x,i=t.y-this.y,n=t.z-this.z||0;return e*e+i*i+n*n},length:function(){var t=this.x,e=this.y,i=this.z;return Math.sqrt(t*t+e*e+i*i)},lengthSq:function(){var t=this.x,e=this.y,i=this.z;return t*t+e*e+i*i},normalize:function(){var t=this.x,e=this.y,i=this.z,n=t*t+e*e+i*i;return 0<n&&(n=1/Math.sqrt(n),this.x=t*n,this.y=e*n,this.z=i*n),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function(t){var e=this.x,i=this.y,n=this.z,s=t.x,r=t.y,a=t.z;return this.x=i*a-n*r,this.y=n*s-e*a,this.z=e*r-i*s,this},lerp:function(t,e){void 0===e&&(e=0);var i=this.x,n=this.y,s=this.z;return this.x=i+e*(t.x-i),this.y=n+e*(t.y-n),this.z=s+e*(t.z-s),this},applyMatrix3:function(t){var e=this.x,i=this.y,n=this.z,s=t.val;return this.x=s[0]*e+s[3]*i+s[6]*n,this.y=s[1]*e+s[4]*i+s[7]*n,this.z=s[2]*e+s[5]*i+s[8]*n,this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,s=t.val,r=1/(s[3]*e+s[7]*i+s[11]*n+s[15]);return this.x=(s[0]*e+s[4]*i+s[8]*n+s[12])*r,this.y=(s[1]*e+s[5]*i+s[9]*n+s[13])*r,this.z=(s[2]*e+s[6]*i+s[10]*n+s[14])*r,this},transformMat3:function(t){var e=this.x,i=this.y,n=this.z,s=t.val;return this.x=e*s[0]+i*s[3]+n*s[6],this.y=e*s[1]+i*s[4]+n*s[7],this.z=e*s[2]+i*s[5]+n*s[8],this},transformMat4:function(t){var e=this.x,i=this.y,n=this.z,s=t.val;return this.x=s[0]*e+s[4]*i+s[8]*n+s[12],this.y=s[1]*e+s[5]*i+s[9]*n+s[13],this.z=s[2]*e+s[6]*i+s[10]*n+s[14],this},transformCoordinates:function(t){var e=this.x,i=this.y,n=this.z,s=t.val,r=e*s[0]+i*s[4]+n*s[8]+s[12],a=e*s[1]+i*s[5]+n*s[9]+s[13],o=e*s[2]+i*s[6]+n*s[10]+s[14],h=e*s[3]+i*s[7]+n*s[11]+s[15];return this.x=r/h,this.y=a/h,this.z=o/h,this},transformQuat:function(t){var e=this.x,i=this.y,n=this.z,s=t.x,r=t.y,a=t.z,o=t.w,h=o*e+r*n-a*i,l=o*i+a*e-s*n,c=o*n+s*i-r*e,u=-s*e-r*i-a*n;return this.x=h*o+u*-s+l*-a-c*-r,this.y=l*o+u*-r+c*-s-h*-a,this.z=c*o+u*-a+h*-r-l*-s,this},project:function(t){var e=this.x,i=this.y,n=this.z,s=t.val,r=s[0],a=s[1],o=s[2],h=s[3],l=s[4],c=s[5],u=s[6],d=s[7],f=s[8],p=s[9],g=s[10],m=s[11],v=s[12],y=s[13],_=s[14],x=1/(e*h+i*d+n*m+s[15]);return this.x=(e*r+i*l+n*f+v)*x,this.y=(e*a+i*c+n*p+y)*x,this.z=(e*o+i*u+n*g+_)*x,this},projectViewMatrix:function(t,e){return this.applyMatrix4(t).applyMatrix4(e)},unprojectViewMatrix:function(t,e){return this.applyMatrix4(t).applyMatrix4(e)},unproject:function(t,e){var i=t.x,n=t.y,s=t.z,r=t.w,a=this.x-i,o=r-this.y-1-n,h=this.z;return this.x=2*a/s-1,this.y=2*o/r-1,this.z=2*h-1,this.project(e)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});n.ZERO=new n,n.RIGHT=new n(1,0,0),n.LEFT=new n(-1,0,0),n.UP=new n(0,-1,0),n.DOWN=new n(0,1,0),n.FORWARD=new n(0,0,1),n.BACK=new n(0,0,-1),n.ONE=new n(1,1,1),t.exports=n},function(t,e){t.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},,function(t,e){t.exports=function(t){return t.y+t.height-t.height*t.originY}},function(t,e){t.exports=function(t){return t.x-t.width*t.originX}},function(t,e){t.exports=function(t){return t.x+t.width-t.width*t.originX}},function(t,e){t.exports=function(t){return t.y-t.height*t.originY}},function(t,e){t.exports=function(t,e,i,n,s,r){var a;void 0===n&&(n=0),void 0===s&&(s=0),void 0===r&&(r=1);var o=0,h=t.length;if(1===r)for(a=s;a<h;a++)t[a][e]+=i+o*n,o++;else for(a=s;0<=a;a--)t[a][e]+=i+o*n,o++;return t}},function(t,e,i){var n=i(0),s=i(307),r=i(172),a=i(56),o=i(173),h=i(3),l=new n({initialize:function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.type=a.LINE,this.x1=t,this.y1=e,this.x2=i,this.y2=n},getPoint:function(t,e){return s(this,t,e)},getPoints:function(t,e,i){return r(this,t,e,i)},getRandomPoint:function(t){return o(this,t)},setTo:function(t,e,i,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x1=t,this.y1=e,this.x2=i,this.y2=n,this},getPointA:function(t){return void 0===t&&(t=new h),t.set(this.x1,this.y1),t},getPointB:function(t){return void 0===t&&(t=new h),t.set(this.x2,this.y2),t},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(t){this.x1<=this.x2?this.x1=t:this.x2=t}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(t){this.x1>this.x2?this.x1=t:this.x2=t}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(t){this.y1<=this.y2?this.y1=t:this.y2=t}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(t){this.y1>this.y2?this.y1=t:this.y2=t}}});t.exports=l},function(t,e){t.exports=function(t,e,i,n){var s=i||e.fillColor,r=n||e.fillAlpha,a=(16711680&s)>>>16,o=(65280&s)>>>8,h=255&s;t.fillStyle="rgba("+a+","+o+","+h+","+r+")"}},function(t,e,i){var n=new(i(0))({initialize:function(t,e,i,n){var s=[];n.forEach((function(t){t&&s.push(t)})),this.loader=t,this.type=e,this.key=i,this.multiKeyIndex=t.multiKeyIndex++,this.files=s,this.complete=!1,this.pending=s.length,this.failed=0,this.config={},this.baseURL=t.baseURL,this.path=t.path,this.prefix=t.prefix;for(var r=0;r<s.length;r++)s[r].multiFile=this},isReadyToProcess:function(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function(t){return this.files.push(t),(t.multiFile=this).pending++,this.complete=!1,this},onFileComplete:function(t){-1!==this.files.indexOf(t)&&this.pending--},onFileFailed:function(t){-1!==this.files.indexOf(t)&&this.failed++}});t.exports=n},function(t,e){t.exports=function(t,e,i,n){var s=t-i,r=e-n;return Math.sqrt(s*s+r*r)}},function(t,e,i){t.exports={BOOT:i(922),DESTROY:i(923),DRAG_END:i(924),DRAG_ENTER:i(925),DRAG:i(926),DRAG_LEAVE:i(927),DRAG_OVER:i(928),DRAG_START:i(929),DROP:i(930),GAME_OUT:i(931),GAME_OVER:i(932),GAMEOBJECT_DOWN:i(933),GAMEOBJECT_DRAG_END:i(934),GAMEOBJECT_DRAG_ENTER:i(935),GAMEOBJECT_DRAG:i(936),GAMEOBJECT_DRAG_LEAVE:i(937),GAMEOBJECT_DRAG_OVER:i(938),GAMEOBJECT_DRAG_START:i(939),GAMEOBJECT_DROP:i(940),GAMEOBJECT_MOVE:i(941),GAMEOBJECT_OUT:i(942),GAMEOBJECT_OVER:i(943),GAMEOBJECT_POINTER_DOWN:i(944),GAMEOBJECT_POINTER_MOVE:i(945),GAMEOBJECT_POINTER_OUT:i(946),GAMEOBJECT_POINTER_OVER:i(947),GAMEOBJECT_POINTER_UP:i(948),GAMEOBJECT_POINTER_WHEEL:i(949),GAMEOBJECT_UP:i(950),GAMEOBJECT_WHEEL:i(951),MANAGER_BOOT:i(952),MANAGER_PROCESS:i(953),MANAGER_UPDATE:i(954),POINTER_DOWN:i(955),POINTER_DOWN_OUTSIDE:i(956),POINTER_MOVE:i(957),POINTER_OUT:i(958),POINTER_OVER:i(959),POINTER_UP:i(960),POINTER_UP_OUTSIDE:i(961),POINTER_WHEEL:i(962),POINTERLOCK_CHANGE:i(963),PRE_UPDATE:i(964),SHUTDOWN:i(965),START:i(966),UPDATE:i(967)}},function(t,e){t.exports=function(t,e){return t.y=e+t.height*t.originY,t}},function(t,e){t.exports=function(t,e){return t.x=e+t.width*t.originX,t}},function(t,e){t.exports=function(t,e){return t.x=e-t.width+t.width*t.originX,t}},function(t,e){t.exports=function(t,e){return t.y=e-t.height+t.height*t.originY,t}},function(t,e){t.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},function(t,e){t.exports=function(t,e,i){return!(t.width<=0||t.height<=0)&&t.x<=e&&t.x+t.width>=e&&t.y<=i&&t.y+t.height>=i}},function(t,e,i){var n=i(0),s=i(175),r=i(9),a=i(374),o=i(2),h=i(69),l=i(91),c=i(141),u=i(12),d=i(375),f=new n({Extends:r,initialize:function(t){r.call(this);var e=t.game,i=e.renderer,n=i.gl;this.name=o(t,"name","WebGLPipeline"),this.game=e,this.renderer=i,this.manager,this.gl=n,this.view=e.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=o(t,"topology",n.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=o(t,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=t,this.glReset=!1},boot:function(){var t=this.gl,e=this.config,i=this.renderer;this.isPostFX||(this.projectionMatrix=(new h).identity());var n=this.renderTargets,s=o(e,"renderTarget",!1);"boolean"==typeof s&&s&&(s=1);var r=i.width,u=i.height;if("number"==typeof s)for(v=0;v<s;v++)n.push(new c(i,r,u,1,0,!0));else if(Array.isArray(s))for(v=0;v<s.length;v++){var d=o(s[v],"scale",1),f=o(s[v],"minFilter",0),p=o(s[v],"autoClear",1);n.push(new c(i,r,u,d,f,p))}n.length&&(this.currentRenderTarget=n[0]),this.setShadersFromConfig(e);for(var g=this.shaders,m=0,v=0;v<g.length;v++)g[v].vertexSize>m&&(m=g[v].vertexSize);var y=o(e,"batchSize",i.config.batchSize);this.vertexCapacity=6*y;var _=new ArrayBuffer(this.vertexCapacity*m);this.vertexData=_,this.bytes=new Uint8Array(_),this.vertexViewF32=new Float32Array(_),this.vertexViewU32=new Uint32Array(_);var x=o(e,"vertices",null);for(x?(this.vertexViewF32.set(x),this.vertexBuffer=i.createVertexBuffer(_,t.STATIC_DRAW)):this.vertexBuffer=i.createVertexBuffer(_.byteLength,t.DYNAMIC_DRAW),this.setVertexBuffer(),v=g.length-1;0<=v;v--)g[v].rebind();this.hasBooted=!0,i.on(l.RESIZE,this.resize,this),i.on(l.PRE_RENDER,this.onPreRender,this),i.on(l.RENDER,this.onRender,this),i.on(l.POST_RENDER,this.onPostRender,this),this.emit(a.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(t,e){var i=this.renderer;return t===this.currentShader&&i.currentProgram===this.currentShader.program||(this.flush(),i.resetTextures(),this.setVertexBuffer()&&!e&&(e=!0),t.bind(e,!1),this.currentShader=t),this},getShaderByName:function(t){for(var e=this.shaders,i=0;i<e.length;i++)if(e[i].name===t)return e[i]},setShadersFromConfig:function(t){var e=this.shaders,i=this.renderer;for(m=0;m<e.length;m++)e[m].destroy();var n="vertShader",r="fragShader",a="attributes",h=o(t,n,null),l=u.parseFragmentShaderMaxTextures(o(t,r,null),i.maxTextures),c=o(t,a,null),f=o(t,"shaders",[]),p=f.length;if(0===p)h&&l&&(this.shaders=[new d(this,"default",h,l,s(c))]);else{for(var g=[],m=0;m<p;m++){var v=f[m],y=o(v,"name","default"),_=o(v,n,h),x=u.parseFragmentShaderMaxTextures(o(v,r,l),i.maxTextures),w=o(v,a,c);_&&x&&g.push(new d(this,y,_,x,s(w)))}this.shaders=g}return 0===this.shaders.length?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function(t,e){return void 0===e&&(e=t.frame),this.currentUnit=this.renderer.setTextureSource(e.source),this.currentUnit},shouldFlush:function(t){return void 0===t&&(t=0),this.vertexCount+t>this.vertexCapacity},resize:function(t,e){t===this.width&&e===this.height||this.flush(),this.width=t,this.height=e;for(var i=this.renderTargets,n=0;n<i.length;n++)i[n].resize(t,e);return this.setProjectionMatrix(t,e),this.emit(a.RESIZE,t,e,this),this.onResize(t,e),this},setProjectionMatrix:function(t,e){var i=this.projectionMatrix;if(!i)return this;this.projectionWidth=t,this.projectionHeight=e,i.ortho(0,t,e,0,-1e3,1e3);for(var n=this.shaders,s="uProjectionMatrix",r=0;r<n.length;r++){var a=n[r];a.hasUniform(s)&&(a.resetUniform(s),a.setMatrix4fv(s,!1,i.val,a))}return this},updateProjectionMatrix:function(){var t,e;this.projectionMatrix&&(t=this.renderer.projectionWidth,e=this.renderer.projectionHeight,this.projectionWidth===t&&this.projectionHeight===e||this.setProjectionMatrix(t,e))},bind:function(t){if(void 0===t&&(t=this.currentShader),this.glReset)return this.rebind(t);var e=this.setVertexBuffer();return t.bind(e),this.currentShader=t,this.emit(a.BIND,this,t),this.onActive(t),this},rebind:function(t){this.setVertexBuffer();for(var e=this.shaders,i=e.length-1;0<=i;i--){var n=e[i].rebind();t&&n!==t||(this.currentShader=n)}return this.emit(a.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(){var t=this.gl,e=this.vertexBuffer;return t.getParameter(t.ARRAY_BUFFER_BINDING)!==e&&(t.bindBuffer(t.ARRAY_BUFFER,e),!0)},preBatch:function(t){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(t),this},postBatch:function(t){return this.onDraw(this.currentRenderTarget),this.onPostBatch(t),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(t){var e,i,n;return void 0===t&&(t=!1),0<this.vertexCount&&(this.emit(a.BEFORE_FLUSH,this,t),this.onBeforeFlush(t),e=this.gl,i=this.vertexCount,n=this.currentShader.vertexSize,this.active&&(this.setVertexBuffer(),i===this.vertexCapacity?e.bufferData(e.ARRAY_BUFFER,this.vertexData,e.DYNAMIC_DRAW):e.bufferSubData(e.ARRAY_BUFFER,0,this.bytes.subarray(0,i*n)),e.drawArrays(this.topology,0,i)),this.vertexCount=0,this.emit(a.AFTER_FLUSH,this,t),this.onAfterFlush(t)),this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(t,e,i,n,s,r,a){var o=this.vertexViewF32,h=this.vertexViewU32,l=this.vertexCount*this.currentShader.vertexComponentCount-1;o[++l]=t,o[++l]=e,o[++l]=i,o[++l]=n,o[++l]=s,o[++l]=r,h[++l]=a,this.vertexCount++},batchQuad:function(t,e,i,n,s,r,a,o,h,l,c,u,d,f,p,g,m,v,y,_){void 0===_&&(_=this.currentUnit);var x=!1;return this.shouldFlush(6)&&(this.flush(),x=!0,_=this.setTexture2D(y)),this.batchVert(e,i,l,c,_,v,f),this.batchVert(n,s,l,d,_,v,g),this.batchVert(r,a,u,d,_,v,m),this.batchVert(e,i,l,c,_,v,f),this.batchVert(r,a,u,d,_,v,m),this.batchVert(o,h,u,c,_,v,p),this.onBatch(t),x},batchTri:function(t,e,i,n,s,r,a,o,h,l,c,u,d,f,p,g,m){void 0===m&&(m=this.currentUnit);var v=!1;return this.shouldFlush(3)&&(this.flush(),v=!0,m=this.setTexture2D(g)),this.batchVert(e,i,o,h,m,p,u),this.batchVert(n,s,o,c,m,p,d),this.batchVert(r,a,l,c,m,p,f),this.onBatch(t),v},drawFillRect:function(t,e,i,n,s,r,a,o){void 0===a&&(a=this.renderer.whiteTexture.glTexture),void 0===o&&(o=!0),t=Math.floor(t),e=Math.floor(e);var h=Math.floor(t+i),l=Math.floor(e+n),c=this.setTexture2D(a),d=u.getTintAppendFloatAlphaAndSwap(s,r),f=0,p=1;o&&(f=1,p=0),this.batchQuad(null,t,e,t,l,h,l,h,e,0,f,1,p,d,d,d,d,0,a,c)},setTexture2D:function(t){return void 0===t&&(t=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(t),this.currentUnit},bindTexture:function(t,e){void 0===e&&(e=0);var i=this.gl;return i.activeTexture(i.TEXTURE0+e),i.bindTexture(i.TEXTURE_2D,t),this},bindRenderTarget:function(t,e){return this.bindTexture(t.texture,e)},setTime:function(t){return this.set1f(t,this.game.loop.getDuration()),this},set1f:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set1f(t,e),this},set2f:function(t,e,i,n){return void 0===n&&(n=this.currentShader),n.set2f(t,e,i),this},set3f:function(t,e,i,n,s){return void 0===s&&(s=this.currentShader),s.set3f(t,e,i,n),this},set4f:function(t,e,i,n,s,r){return void 0===r&&(r=this.currentShader),r.set4f(t,e,i,n,s),this},set1fv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set1fv(t,e),this},set2fv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set2fv(t,e),this},set3fv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set3fv(t,e),this},set4fv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set4fv(t,e),this},set1iv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set1iv(t,e),this},set2iv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set2iv(t,e),this},set3iv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set3iv(t,e),this},set4iv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set4iv(t,e),this},set1i:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set1i(t,e),this},set2i:function(t,e,i,n){return void 0===n&&(n=this.currentShader),n.set2i(t,e,i),this},set3i:function(t,e,i,n,s){return void 0===s&&(s=this.currentShader),s.set3i(t,e,i,n),this},set4i:function(t,e,i,n,s,r){return void 0===r&&(r=this.currentShader),r.set4i(t,e,i,n,s),this},setMatrix2fv:function(t,e,i,n){return void 0===n&&(n=this.currentShader),n.setMatrix2fv(t,e,i),this},setMatrix3fv:function(t,e,i,n){return void 0===n&&(n=this.currentShader),n.setMatrix3fv(t,e,i),this},setMatrix4fv:function(t,e,i,n){return void 0===n&&(n=this.currentShader),n.setMatrix4fv(t,e,i),this},destroy:function(){this.emit(a.DESTROY,this);for(var t=this.shaders,e=0;e<t.length;e++)t[e].destroy();var i=this.renderTargets;for(e=0;e<i.length;e++)i[e].destroy();this.gl.deleteBuffer(this.vertexBuffer);var n=this.renderer;return n.off(l.RESIZE,this.resize,this),n.off(l.PRE_RENDER,this.onPreRender,this),n.off(l.RENDER,this.onRender,this),n.off(l.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});t.exports=f},function(t,e,i){"use strict";function n(t,e,i){i=i||2;var n,h,u,d,f,p,v,y=e&&e.length,_=y?e[0]*i:t.length,x=s(t,0,_,i,!0),w=[];if(!x||x.next===x.prev)return w;if(y&&(x=function(t,e,i,n){var a,h,u,d=[];for(a=0,h=e.length;a<h;a++)(u=s(t,e[a]*n,a<h-1?e[a+1]*n:t.length,n,!1))===u.next&&(u.steiner=!0),d.push(function(t){for(var e=t,i=t;(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),(e=e.next)!==t;);return i}(u));for(d.sort(o),a=0;a<d.length;a++)!function(t,e){var i;(e=function(t,e){var i,n=e,s=t.x,r=t.y,a=-1/0;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){var o=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(o<=s&&a<o){if((a=o)===s){if(r===n.y)return n;if(r===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(s===a)return i;var h,u=i,d=i.x,f=i.y,p=1/0;for(n=i;s>=n.x&&n.x>=d&&s!==n.x&&l(r<f?s:a,r,d,f,r<f?a:s,r,n.x,n.y)&&(h=Math.abs(r-n.y)/(s-n.x),g(n,t)&&(h<p||h===p&&(n.x>i.x||n.x===i.x&&function(t,e){return c(t.prev,t,e.prev)<0&&c(e.next,t,t.next)<0}(i,n)))&&(i=n,p=h)),(n=n.next)!==u;);return i}(t,e))&&(i=m(e,t),r(e,e.next),r(i,i.next))}(d[a],i),i=r(i,i.next);return i}(t,e,x,i)),t.length>80*i){n=u=t[0],h=d=t[1];for(var b=i;b<_;b+=i)(f=t[b])<n&&(n=f),(p=t[b+1])<h&&(h=p),u<f&&(u=f),d<p&&(d=p);v=0!==(v=Math.max(u-n,d-h))?1/v:0}return a(x,w,i,n,h,v),w}function s(t,e,i,n,s){var r,a;if(s===0<x(t,e,i,n))for(r=e;r<i;r+=n)a=v(r,t[r],t[r+1],a);else for(r=i-n;e<=r;r-=n)a=v(r,t[r],t[r+1],a);return a&&u(a,a.next)&&(y(a),a=a.next),a}function r(t,e){if(!t)return t;e=e||t;var i,n=t;do{if(i=!1,n.steiner||!u(n,n.next)&&0!==c(n.prev,n,n.next))n=n.next;else{if(y(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function a(t,e,i,n,s,o,f){if(t){!f&&o&&function(t,e,i,n){for(var s=t;null===s.z&&(s.z=h(s.x,s.y,e,i,n)),s.prevZ=s.prev,s.nextZ=s.next,(s=s.next)!==t;);s.prevZ.nextZ=null,s.prevZ=null,function(t){var e,i,n,s,r,a,o,h,l=1;do{for(i=t,r=t=null,a=0;i;){for(a++,n=i,e=o=0;e<l&&(o++,n=n.nextZ);e++);for(h=l;0<o||0<h&&n;)0!==o&&(0===h||!n||i.z<=n.z)?(i=(s=i).nextZ,o--):(n=(s=n).nextZ,h--),r?r.nextZ=s:t=s,s.prevZ=r,r=s;i=n}r.nextZ=null,l*=2}while(1<a)}(s)}(t,n,s,o);for(var p,v,_=t;t.prev!==t.next;)if(p=t.prev,v=t.next,o?function(t,e,i,n){var s=t.prev,r=t,a=t.next;if(0<=c(s,r,a))return!1;for(var o=s.x<r.x?s.x<a.x?s.x:a.x:r.x<a.x?r.x:a.x,u=s.y<r.y?s.y<a.y?s.y:a.y:r.y<a.y?r.y:a.y,d=s.x>r.x?s.x>a.x?s.x:a.x:r.x>a.x?r.x:a.x,f=s.y>r.y?s.y>a.y?s.y:a.y:r.y>a.y?r.y:a.y,p=h(o,u,e,i,n),g=h(d,f,e,i,n),m=t.prevZ,v=t.nextZ;m&&m.z>=p&&v&&v.z<=g;){if(m!==t.prev&&m!==t.next&&l(s.x,s.y,r.x,r.y,a.x,a.y,m.x,m.y)&&0<=c(m.prev,m,m.next))return!1;if(m=m.prevZ,v!==t.prev&&v!==t.next&&l(s.x,s.y,r.x,r.y,a.x,a.y,v.x,v.y)&&0<=c(v.prev,v,v.next))return!1;v=v.nextZ}for(;m&&m.z>=p;){if(m!==t.prev&&m!==t.next&&l(s.x,s.y,r.x,r.y,a.x,a.y,m.x,m.y)&&0<=c(m.prev,m,m.next))return!1;m=m.prevZ}for(;v&&v.z<=g;){if(v!==t.prev&&v!==t.next&&l(s.x,s.y,r.x,r.y,a.x,a.y,v.x,v.y)&&0<=c(v.prev,v,v.next))return!1;v=v.nextZ}return!0}(t,n,s,o):function(t){var e=t.prev,i=t,n=t.next;if(0<=c(e,i,n))return!1;for(var s=t.next.next;s!==t.prev;){if(l(e.x,e.y,i.x,i.y,n.x,n.y,s.x,s.y)&&0<=c(s.prev,s,s.next))return!1;s=s.next}return!0}(t))e.push(p.i/i),e.push(t.i/i),e.push(v.i/i),y(t),t=v.next,_=v.next;else if((t=v)===_){f?1===f?a(t=function(t,e,i){var n=t;do{var s=n.prev,a=n.next.next;!u(s,a)&&d(s,n,n.next,a)&&g(s,a)&&g(a,s)&&(e.push(s.i/i),e.push(n.i/i),e.push(a.i/i),y(n),y(n.next),n=t=a),n=n.next}while(n!==t);return r(n)}(r(t),e,i),e,i,n,s,o,2):2===f&&function(t,e,i,n,s,o){var h=t;do{for(var l=h.next.next;l!==h.prev;){if(h.i!==l.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&d(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(g(t,e)&&g(e,t)&&function(t,e){for(var i=t,n=!1,s=(t.x+e.x)/2,r=(t.y+e.y)/2;i.y>r!=i.next.y>r&&i.next.y!==i.y&&s<(i.next.x-i.x)*(r-i.y)/(i.next.y-i.y)+i.x&&(n=!n),(i=i.next)!==t;);return n}(t,e)&&(c(t.prev,t,e.prev)||c(t,e.prev,e))||u(t,e)&&0<c(t.prev,t,t.next)&&0<c(e.prev,e,e.next))}(h,l)){var f=m(h,l);return h=r(h,h.next),f=r(f,f.next),a(h,e,i,n,s,o),a(f,e,i,n,s,o)}l=l.next}h=h.next}while(h!==t)}(t,e,i,n,s,o):a(r(t),e,i,n,s,o,1);break}}}function o(t,e){return t.x-e.x}function h(t,e,i,n,s){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*s)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*s)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function l(t,e,i,n,s,r,a,o){return 0<=(s-a)*(e-o)-(t-a)*(r-o)&&0<=(t-a)*(n-o)-(i-a)*(e-o)&&0<=(i-a)*(r-o)-(s-a)*(n-o)}function c(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function u(t,e){return t.x===e.x&&t.y===e.y}function d(t,e,i,n){var s=p(c(t,e,i)),r=p(c(t,e,n)),a=p(c(i,n,t)),o=p(c(i,n,e));return s!==r&&a!==o||0===s&&f(t,i,e)||0===r&&f(t,n,e)||0===a&&f(i,t,n)||!(0!==o||!f(i,e,n))}function f(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function p(t){return 0<t?1:t<0?-1:0}function g(t,e){return c(t.prev,t,t.next)<0?0<=c(t,e,t.next)&&0<=c(t,t.prev,e):c(t,e,t.prev)<0||c(t,t.next,e)<0}function m(t,e){var i=new _(t.i,t.x,t.y),n=new _(e.i,e.x,e.y),s=t.next,r=e.prev;return(t.next=e).prev=t,(i.next=s).prev=i,(n.next=i).prev=n,(r.next=n).prev=r,n}function v(t,e,i,n){var s=new _(t,e,i);return n?(s.next=n.next,(s.prev=n).next.prev=s,n.next=s):(s.prev=s).next=s,s}function y(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function _(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function x(t,e,i,n){for(var s=0,r=e,a=i-n;r<i;r+=n)s+=(t[a]-t[r])*(t[r+1]+t[a+1]),a=r;return s}n.deviation=function(t,e,i,n){var s=e&&e.length,r=s?e[0]*i:t.length,a=Math.abs(x(t,0,r,i));if(s)for(var o=0,h=e.length;o<h;o++){var l=e[o]*i,c=o<h-1?e[o+1]*i:t.length;a-=Math.abs(x(t,l,c,i))}var u=0;for(o=0;o<n.length;o+=3){var d=n[o]*i,f=n[o+1]*i,p=n[o+2]*i;u+=Math.abs((t[d]-t[p])*(t[1+f]-t[1+d])-(t[d]-t[f])*(t[1+p]-t[1+d]))}return 0===a&&0===u?0:Math.abs((u-a)/a)},n.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,s=0;s<t.length;s++){for(var r=0;r<t[s].length;r++)for(var a=0;a<e;a++)i.vertices.push(t[s][r][a]);0<s&&(n+=t[s-1].length,i.holes.push(n))}return i},t.exports=n},function(t,e){t.exports=function(t,e,i,n){var s=i||e.strokeColor,r=n||e.strokeAlpha,a=(16711680&s)>>>16,o=(65280&s)>>>8,h=255&s;t.strokeStyle="rgba("+a+","+o+","+h+","+r+")",t.lineWidth=e.lineWidth}},function(t,e,i){var n=i(0),s=i(21),r=i(23),a=i(8),o=i(2),h=i(6),l=i(7),c=new n({Extends:r,initialize:function(t,e,i,n,a){var c,u="json";l(e)&&(e=o(c=e,"key"),i=o(c,"url"),n=o(c,"xhrSettings"),u=o(c,"extension",u),a=o(c,"dataKey",a));var d={type:"json",cache:t.cacheManager.json,extension:u,responseType:"text",key:e,url:i,xhrSettings:n,config:a};r.call(this,t,d),l(i)&&(this.data=a?h(i,a):i,this.state=s.FILE_POPULATED)},onProcess:function(){if(this.state!==s.FILE_POPULATED){this.state=s.FILE_PROCESSING;try{var t=JSON.parse(this.xhrLoader.responseText)}catch(t){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),t}var e=this.config;this.data="string"==typeof e?h(t,e,t):t}this.onProcessComplete()}});a.register("json",(function(t,e,i,n){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new c(this,t[s]));else this.addFile(new c(this,t,e,n,i));return this})),t.exports=c},function(t,e){t.exports={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14}},function(t,e,i){var n=i(158),s=i(26);t.exports=function(t,e,i,r,a){for(var o,h,l,c,u=s(t,e,i,r,null,a),d=0;d<u.length;d++){var f=u[d];f&&(f.collides?(o=n(f.x,f.y-1,!0,a),h=n(f.x,f.y+1,!0,a),l=n(f.x-1,f.y,!0,a),c=n(f.x+1,f.y,!0,a),f.faceTop=!o||!o.collides,f.faceBottom=!h||!h.collides,f.faceLeft=!l||!l.collides,f.faceRight=!c||!c.collides):f.resetFaces())}}},,function(t,e,i){var n=i(0),s=i(66),r=i(300),a=i(301),o=i(56),h=i(170),l=new n({initialize:function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.type=o.CIRCLE,this.x=t,this.y=e,this._radius=i,this._diameter=2*i},contains:function(t,e){return s(this,t,e)},getPoint:function(t,e){return r(this,t,e)},getPoints:function(t,e,i){return a(this,t,e,i)},getRandomPoint:function(t){return h(this,t)},setTo:function(t,e,i){return this.x=t,this.y=e,this._radius=i,this._diameter=2*i,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(t){this._radius=t,this._diameter=2*t}},diameter:{get:function(){return this._diameter},set:function(t){this._diameter=t,this._radius=.5*t}},left:{get:function(){return this.x-this._radius},set:function(t){this.x=t+this._radius}},right:{get:function(){return this.x+this._radius},set:function(t){this.x=t-this._radius}},top:{get:function(){return this.y-this._radius},set:function(t){this.y=t+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(t){this.y=t-this._radius}}});t.exports=l},function(t,e){t.exports=function(t,e,i){return 0<t.radius&&e>=t.left&&e<=t.right&&i>=t.top&&i<=t.bottom&&(t.x-e)*(t.x-e)+(t.y-i)*(t.y-i)<=t.radius*t.radius}},function(t,e){t.exports=function(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))}},function(t,e){t.exports=function(t,e,i){var n=i-e;return e+((t-e)%n+n)%n}},function(t,e,i){var n=i(0),s=i(39),r=new n({initialize:function(t){this.val=new Float32Array(16),t?this.copy(t):this.identity()},clone:function(){return new r(this)},set:function(t){return this.copy(t)},setValues:function(t,e,i,n,s,r,a,o,h,l,c,u,d,f,p,g){var m=this.val;return m[0]=t,m[1]=e,m[2]=i,m[3]=n,m[4]=s,m[5]=r,m[6]=a,m[7]=o,m[8]=h,m[9]=l,m[10]=c,m[11]=u,m[12]=d,m[13]=f,m[14]=p,m[15]=g,this},copy:function(t){var e=t.val;return this.setValues(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},fromArray:function(t){return this.setValues(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(t,e,i){var n=a.fromQuat(i).val,s=e.x,r=e.y,o=e.z;return this.setValues(n[0]*s,n[1]*s,n[2]*s,0,n[4]*r,n[5]*r,n[6]*r,0,n[8]*o,n[9]*o,n[10]*o,0,t.x,t.y,t.z,1)},xyz:function(t,e,i){this.identity();var n=this.val;return n[12]=t,n[13]=e,n[14]=i,this},scaling:function(t,e,i){this.zero();var n=this.val;return n[0]=t,n[5]=e,n[10]=i,n[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var t=this.val,e=t[1],i=t[2],n=t[3],s=t[6],r=t[7],a=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=e,t[6]=t[9],t[7]=t[13],t[8]=i,t[9]=s,t[11]=t[14],t[12]=n,t[13]=r,t[14]=a,this},getInverse:function(t){return this.copy(t),this.invert()},invert:function(){var t=this.val,e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],a=t[5],o=t[6],h=t[7],l=t[8],c=t[9],u=t[10],d=t[11],f=t[12],p=t[13],g=t[14],m=t[15],v=e*a-i*r,y=e*o-n*r,_=e*h-s*r,x=i*o-n*a,w=i*h-s*a,b=n*h-s*o,E=l*p-c*f,T=l*g-u*f,S=l*m-d*f,A=c*g-u*p,O=c*m-d*p,C=u*m-d*g,P=v*C-y*O+_*A+x*S-w*T+b*E;return P?(P=1/P,this.setValues((a*C-o*O+h*A)*P,(n*O-i*C-s*A)*P,(p*b-g*w+m*x)*P,(u*w-c*b-d*x)*P,(o*S-r*C-h*T)*P,(e*C-n*S+s*T)*P,(g*_-f*b-m*y)*P,(l*b-u*_+d*y)*P,(r*O-a*S+h*E)*P,(i*S-e*O-s*E)*P,(f*w-p*_+m*v)*P,(c*_-l*w-d*v)*P,(a*T-r*A-o*E)*P,(e*A-i*T+n*E)*P,(p*y-f*x-g*v)*P,(l*x-c*y+u*v)*P)):this},adjoint:function(){var t=this.val,e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],a=t[5],o=t[6],h=t[7],l=t[8],c=t[9],u=t[10],d=t[11],f=t[12],p=t[13],g=t[14],m=t[15];return this.setValues(a*(u*m-d*g)-c*(o*m-h*g)+p*(o*d-h*u),-(i*(u*m-d*g)-c*(n*m-s*g)+p*(n*d-s*u)),i*(o*m-h*g)-a*(n*m-s*g)+p*(n*h-s*o),-(i*(o*d-h*u)-a*(n*d-s*u)+c*(n*h-s*o)),-(r*(u*m-d*g)-l*(o*m-h*g)+f*(o*d-h*u)),e*(u*m-d*g)-l*(n*m-s*g)+f*(n*d-s*u),-(e*(o*m-h*g)-r*(n*m-s*g)+f*(n*h-s*o)),e*(o*d-h*u)-r*(n*d-s*u)+l*(n*h-s*o),r*(c*m-d*p)-l*(a*m-h*p)+f*(a*d-h*c),-(e*(c*m-d*p)-l*(i*m-s*p)+f*(i*d-s*c)),e*(a*m-h*p)-r*(i*m-s*p)+f*(i*h-s*a),-(e*(a*d-h*c)-r*(i*d-s*c)+l*(i*h-s*a)),-(r*(c*g-u*p)-l*(a*g-o*p)+f*(a*u-o*c)),e*(c*g-u*p)-l*(i*g-n*p)+f*(i*u-n*c),-(e*(a*g-o*p)-r*(i*g-n*p)+f*(i*o-n*a)),e*(a*u-o*c)-r*(i*u-n*c)+l*(i*o-n*a))},determinant:function(){var t=this.val,e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],a=t[5],o=t[6],h=t[7],l=t[8],c=t[9],u=t[10],d=t[11],f=t[12],p=t[13],g=t[14],m=t[15];return(e*a-i*r)*(u*m-d*g)-(e*o-n*r)*(c*m-d*p)+(e*h-s*r)*(c*g-u*p)+(i*o-n*a)*(l*m-d*f)-(i*h-s*a)*(l*g-u*f)+(n*h-s*o)*(l*p-c*f)},multiply:function(t){var e=this.val,i=e[0],n=e[1],s=e[2],r=e[3],a=e[4],o=e[5],h=e[6],l=e[7],c=e[8],u=e[9],d=e[10],f=e[11],p=e[12],g=e[13],m=e[14],v=e[15],y=t.val,_=y[0],x=y[1],w=y[2],b=y[3];return e[0]=_*i+x*a+w*c+b*p,e[1]=_*n+x*o+w*u+b*g,e[2]=_*s+x*h+w*d+b*m,e[3]=_*r+x*l+w*f+b*v,_=y[4],x=y[5],w=y[6],b=y[7],e[4]=_*i+x*a+w*c+b*p,e[5]=_*n+x*o+w*u+b*g,e[6]=_*s+x*h+w*d+b*m,e[7]=_*r+x*l+w*f+b*v,_=y[8],x=y[9],w=y[10],b=y[11],e[8]=_*i+x*a+w*c+b*p,e[9]=_*n+x*o+w*u+b*g,e[10]=_*s+x*h+w*d+b*m,e[11]=_*r+x*l+w*f+b*v,_=y[12],x=y[13],w=y[14],b=y[15],e[12]=_*i+x*a+w*c+b*p,e[13]=_*n+x*o+w*u+b*g,e[14]=_*s+x*h+w*d+b*m,e[15]=_*r+x*l+w*f+b*v,this},multiplyLocal:function(t){var e=this.val,i=t.val;return this.setValues(e[0]*i[0]+e[1]*i[4]+e[2]*i[8]+e[3]*i[12],e[0]*i[1]+e[1]*i[5]+e[2]*i[9]+e[3]*i[13],e[0]*i[2]+e[1]*i[6]+e[2]*i[10]+e[3]*i[14],e[0]*i[3]+e[1]*i[7]+e[2]*i[11]+e[3]*i[15],e[4]*i[0]+e[5]*i[4]+e[6]*i[8]+e[7]*i[12],e[4]*i[1]+e[5]*i[5]+e[6]*i[9]+e[7]*i[13],e[4]*i[2]+e[5]*i[6]+e[6]*i[10]+e[7]*i[14],e[4]*i[3]+e[5]*i[7]+e[6]*i[11]+e[7]*i[15],e[8]*i[0]+e[9]*i[4]+e[10]*i[8]+e[11]*i[12],e[8]*i[1]+e[9]*i[5]+e[10]*i[9]+e[11]*i[13],e[8]*i[2]+e[9]*i[6]+e[10]*i[10]+e[11]*i[14],e[8]*i[3]+e[9]*i[7]+e[10]*i[11]+e[11]*i[15],e[12]*i[0]+e[13]*i[4]+e[14]*i[8]+e[15]*i[12],e[12]*i[1]+e[13]*i[5]+e[14]*i[9]+e[15]*i[13],e[12]*i[2]+e[13]*i[6]+e[14]*i[10]+e[15]*i[14],e[12]*i[3]+e[13]*i[7]+e[14]*i[11]+e[15]*i[15])},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.val,n=e.val,s=i[0],r=i[4],a=i[8],o=i[12],h=i[1],l=i[5],c=i[9],u=i[13],d=i[2],f=i[6],p=i[10],g=i[14],m=i[3],v=i[7],y=i[11],_=i[15],x=n[0],w=n[4],b=n[8],E=n[12],T=n[1],S=n[5],A=n[9],O=n[13],C=n[2],P=n[6],L=n[10],R=n[14],I=n[3],M=n[7],D=n[11],k=n[15];return this.setValues(s*x+r*T+a*C+o*I,h*x+l*T+c*C+u*I,d*x+f*T+p*C+g*I,m*x+v*T+y*C+_*I,s*w+r*S+a*P+o*M,h*w+l*S+c*P+u*M,d*w+f*S+p*P+g*M,m*w+v*S+y*P+_*M,s*b+r*A+a*L+o*D,h*b+l*A+c*L+u*D,d*b+f*A+p*L+g*D,m*b+v*A+y*L+_*D,s*E+r*O+a*R+o*k,h*E+l*O+c*R+u*k,d*E+f*O+p*R+g*k,m*E+v*O+y*R+_*k)},translate:function(t){return this.translateXYZ(t.x,t.y,t.z)},translateXYZ:function(t,e,i){var n=this.val;return n[12]=n[0]*t+n[4]*e+n[8]*i+n[12],n[13]=n[1]*t+n[5]*e+n[9]*i+n[13],n[14]=n[2]*t+n[6]*e+n[10]*i+n[14],n[15]=n[3]*t+n[7]*e+n[11]*i+n[15],this},scale:function(t){return this.scaleXYZ(t.x,t.y,t.z)},scaleXYZ:function(t,e,i){var n=this.val;return n[0]=n[0]*t,n[1]=n[1]*t,n[2]=n[2]*t,n[3]=n[3]*t,n[4]=n[4]*e,n[5]=n[5]*e,n[6]=n[6]*e,n[7]=n[7]*e,n[8]=n[8]*i,n[9]=n[9]*i,n[10]=n[10]*i,n[11]=n[11]*i,this},makeRotationAxis:function(t,e){var i=Math.cos(e),n=Math.sin(e),s=1-i,r=t.x,a=t.y,o=t.z,h=s*r,l=s*a;return this.setValues(h*r+i,h*a-n*o,h*o+n*a,0,h*a+n*o,l*a+i,l*o-n*r,0,h*o-n*a,l*o+n*r,s*o*o+i,0,0,0,0,1)},rotate:function(t,e){var i=this.val,n=e.x,s=e.y,r=e.z,a=Math.sqrt(n*n+s*s+r*r);if(Math.abs(a)<1e-6)return this;n*=a=1/a,s*=a,r*=a;var o=Math.sin(t),h=Math.cos(t),l=1-h,c=i[0],u=i[1],d=i[2],f=i[3],p=i[4],g=i[5],m=i[6],v=i[7],y=i[8],_=i[9],x=i[10],w=i[11],b=i[12],E=i[13],T=i[14],S=i[15],A=n*n*l+h,O=s*n*l+r*o,C=r*n*l-s*o,P=n*s*l-r*o,L=s*s*l+h,R=r*s*l+n*o,I=n*r*l+s*o,M=s*r*l-n*o,D=r*r*l+h;return this.setValues(c*A+p*O+y*C,u*A+g*O+_*C,d*A+m*O+x*C,f*A+v*O+w*C,c*P+p*L+y*R,u*P+g*L+_*R,d*P+m*L+x*R,f*P+v*L+w*R,c*I+p*M+y*D,u*I+g*M+_*D,d*I+m*M+x*D,f*I+v*M+w*D,b,E,T,S)},rotateX:function(t){var e=this.val,i=Math.sin(t),n=Math.cos(t),s=e[4],r=e[5],a=e[6],o=e[7],h=e[8],l=e[9],c=e[10],u=e[11];return e[4]=s*n+h*i,e[5]=r*n+l*i,e[6]=a*n+c*i,e[7]=o*n+u*i,e[8]=h*n-s*i,e[9]=l*n-r*i,e[10]=c*n-a*i,e[11]=u*n-o*i,this},rotateY:function(t){var e=this.val,i=Math.sin(t),n=Math.cos(t),s=e[0],r=e[1],a=e[2],o=e[3],h=e[8],l=e[9],c=e[10],u=e[11];return e[0]=s*n-h*i,e[1]=r*n-l*i,e[2]=a*n-c*i,e[3]=o*n-u*i,e[8]=s*i+h*n,e[9]=r*i+l*n,e[10]=a*i+c*n,e[11]=o*i+u*n,this},rotateZ:function(t){var e=this.val,i=Math.sin(t),n=Math.cos(t),s=e[0],r=e[1],a=e[2],o=e[3],h=e[4],l=e[5],c=e[6],u=e[7];return e[0]=s*n+h*i,e[1]=r*n+l*i,e[2]=a*n+c*i,e[3]=o*n+u*i,e[4]=h*n-s*i,e[5]=l*n-r*i,e[6]=c*n-a*i,e[7]=u*n-o*i,this},fromRotationTranslation:function(t,e){var i=t.x,n=t.y,s=t.z,r=t.w,a=i+i,o=n+n,h=s+s,l=i*a,c=i*o,u=i*h,d=n*o,f=n*h,p=s*h,g=r*a,m=r*o,v=r*h;return this.setValues(1-(d+p),c+v,u-m,0,c-v,1-(l+p),f+g,0,u+m,f-g,1-(l+d),0,e.x,e.y,e.z,1)},fromQuat:function(t){var e=t.x,i=t.y,n=t.z,s=t.w,r=e+e,a=i+i,o=n+n,h=e*r,l=e*a,c=e*o,u=i*a,d=i*o,f=n*o,p=s*r,g=s*a,m=s*o;return this.setValues(1-(u+f),l+m,c-g,0,l-m,1-(h+f),d+p,0,c+g,d-p,1-(h+u),0,0,0,0,1)},frustum:function(t,e,i,n,s,r){var a=1/(e-t),o=1/(n-i),h=1/(s-r);return this.setValues(2*s*a,0,0,0,0,2*s*o,0,0,(e+t)*a,(n+i)*o,(r+s)*h,-1,0,0,r*s*2*h,0)},perspective:function(t,e,i,n){var s=1/Math.tan(t/2),r=1/(i-n);return this.setValues(s/e,0,0,0,0,s,0,0,0,0,(n+i)*r,-1,0,0,2*n*i*r,0)},perspectiveLH:function(t,e,i,n){return this.setValues(2*i/t,0,0,0,0,2*i/e,0,0,0,0,-n/(i-n),1,0,0,i*n/(i-n),0)},ortho:function(t,e,i,n,s,r){var a=0==(a=t-e)?a:1/a,o=0==(o=i-n)?o:1/o,h=0==(h=s-r)?h:1/h;return this.setValues(-2*a,0,0,0,0,-2*o,0,0,0,0,2*h,0,(t+e)*a,(n+i)*o,(r+s)*h,1)},lookAtRH:function(t,e,i){var n=this.val;return c.subVectors(t,e),0===c.getLengthSquared()&&(c.z=1),c.normalize(),h.crossVectors(i,c),0===h.getLengthSquared()&&(1===Math.abs(i.z)?c.x+=1e-4:c.z+=1e-4,c.normalize(),h.crossVectors(i,c)),h.normalize(),l.crossVectors(c,h),n[0]=h.x,n[1]=h.y,n[2]=h.z,n[4]=l.x,n[5]=l.y,n[6]=l.z,n[8]=c.x,n[9]=c.y,n[10]=c.z,this},lookAt:function(t,e,i){var n=t.x,s=t.y,r=t.z,a=i.x,o=i.y,h=i.z,l=e.x,c=e.y,u=e.z;if(Math.abs(n-l)<1e-6&&Math.abs(s-c)<1e-6&&Math.abs(r-u)<1e-6)return this.identity();var d=n-l,f=s-c,p=r-u,g=1/Math.sqrt(d*d+f*f+p*p),m=o*(p*=g)-h*(f*=g),v=h*(d*=g)-a*p,y=a*f-o*d;(g=Math.sqrt(m*m+v*v+y*y))?(m*=g=1/g,v*=g,y*=g):y=v=m=0;var _=f*y-p*v,x=p*m-d*y,w=d*v-f*m;return(g=Math.sqrt(_*_+x*x+w*w))?(_*=g=1/g,x*=g,w*=g):w=x=_=0,this.setValues(m,_,d,0,v,x,f,0,y,w,p,0,-(m*n+v*s+y*r),-(_*n+x*s+w*r),-(d*n+f*s+p*r),1)},yawPitchRoll:function(t,e,i){this.zero(),a.zero(),o.zero();var n=this.val,s=a.val,r=o.val,h=Math.sin(i),l=Math.cos(i);return n[10]=1,n[15]=1,n[0]=l,n[1]=h,n[4]=-h,n[5]=l,h=Math.sin(e),l=Math.cos(e),s[0]=1,s[15]=1,s[5]=l,s[10]=l,s[9]=-h,s[6]=h,h=Math.sin(t),l=Math.cos(t),r[5]=1,r[15]=1,r[0]=l,r[2]=-h,r[8]=h,r[10]=l,this.multiplyLocal(a),this.multiplyLocal(o),this},setWorldMatrix:function(t,e,i,n,s){return this.yawPitchRoll(t.y,t.x,t.z),a.scaling(i.x,i.y,i.z),o.xyz(e.x,e.y,e.z),this.multiplyLocal(a),this.multiplyLocal(o),n&&this.multiplyLocal(n),s&&this.multiplyLocal(s),this},multiplyToMat4:function(t,e){var i=this.val,n=t.val,s=i[0],r=i[1],a=i[2],o=i[3],h=i[4],l=i[5],c=i[6],u=i[7],d=i[8],f=i[9],p=i[10],g=i[11],m=i[12],v=i[13],y=i[14],_=i[15],x=n[0],w=n[1],b=n[2],E=n[3],T=n[4],S=n[5],A=n[6],O=n[7],C=n[8],P=n[9],L=n[10],R=n[11],I=n[12],M=n[13],D=n[14],k=n[15];return e.setValues(x*s+w*h+b*d+E*m,w*r+w*l+b*f+E*v,b*a+w*c+b*p+E*y,E*o+w*u+b*g+E*_,T*s+S*h+A*d+O*m,T*r+S*l+A*f+O*v,T*a+S*c+A*p+O*y,T*o+S*u+A*g+O*_,C*s+P*h+L*d+R*m,C*r+P*l+L*f+R*v,C*a+P*c+L*p+R*y,C*o+P*u+L*g+R*_,I*s+M*h+D*d+k*m,I*r+M*l+D*f+k*v,I*a+M*c+D*p+k*y,I*o+M*u+D*g+k*_)},fromRotationXYTranslation:function(t,e,i){var n=e.x,s=e.y,r=e.z,a=Math.sin(t.x),o=Math.cos(t.x),h=Math.sin(t.y),l=Math.cos(t.y),c=n,u=s,d=r,f=-a,p=0-f*h,g=0-o*h,m=f*l,v=o*l;return i||(c=l*n+h*r,u=p*n+o*s+m*r,d=g*n+a*s+v*r),this.setValues(l,p,g,0,0,o,a,0,h,m,v,0,c,u,d,1)},getMaxScaleOnAxis:function(){var t=this.val,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))}}),a=new r,o=new r,h=new s,l=new s,c=new s;t.exports=r},function(t,e,i){t.exports={COMPLETE:i(987),DECODED:i(988),DECODED_ALL:i(989),DESTROY:i(990),DETUNE:i(991),GLOBAL_DETUNE:i(992),GLOBAL_MUTE:i(993),GLOBAL_RATE:i(994),GLOBAL_VOLUME:i(995),LOOP:i(996),LOOPED:i(997),MUTE:i(998),PAN:i(999),PAUSE_ALL:i(1e3),PAUSE:i(1001),PLAY:i(1002),RATE:i(1003),RESUME_ALL:i(1004),RESUME:i(1005),SEEK:i(1006),STOP_ALL:i(1007),STOP:i(1008),UNLOCKED:i(1009),VOLUME:i(1010)}},function(t,e,i){var n=i(0),s=i(21),r=i(23),a=i(8),o=i(2),h=i(7),l=new n({Extends:r,initialize:function t(e,i,n,s,a){var l,c,u="png";h(i)&&(i=o(c=i,"key"),n=o(c,"url"),l=o(c,"normalMap"),s=o(c,"xhrSettings"),u=o(c,"extension",u),a=o(c,"frameConfig")),Array.isArray(n)&&(l=n[1],n=n[0]);var d,f={type:"image",cache:e.textureManager,extension:u,responseType:"blob",key:i,url:n,xhrSettings:s,config:a};r.call(this,e,f),l&&((d=new t(e,this.key,l,s,a)).type="normalMap",this.setLink(d),e.addFile(d))},onProcess:function(){this.state=s.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var t=this;this.data.onload=function(){r.revokeObjectURL(t.data),t.onProcessComplete()},this.data.onerror=function(){r.revokeObjectURL(t.data),t.onProcessError()},r.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var t,e=this.linkFile;e&&e.state===s.FILE_COMPLETE?(t="image"===this.type?this.cache.addImage(this.key,this.data,e.data):this.cache.addImage(e.key,e.data,this.data),this.pendingDestroy(t),e.pendingDestroy(t)):e||(t=this.cache.addImage(this.key,this.data),this.pendingDestroy(t))}});a.register("image",(function(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new l(this,t[n]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},function(t,e){t.exports=function(t,e){e?t.setCollision(!0,!0,!0,!0,!1):t.resetCollision(!1)}},function(t,e,i){var n=i(164),s=i(0),r=i(11),a=i(15),o=i(1065),h=new s({Extends:a,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Size,r.TextureCrop,r.Tint,r.Transform,r.Visible,o],initialize:function(t,e,i,s,r){a.call(this,t,"Sprite"),this._crop=this.resetCropObject(),this.anims=new n(this),this.setTexture(s,r),this.setPosition(e,i),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(t,e){this.anims.update(t,e)},play:function(t,e){return this.anims.play(t,e)},playReverse:function(t,e){return this.anims.playReverse(t,e)},playAfterDelay:function(t,e){return this.anims.playAfterDelay(t,e)},playAfterRepeat:function(t,e){return this.anims.playAfterRepeat(t,e)},chain:function(t){return this.anims.chain(t)},stop:function(){return this.anims.stop()},stopAfterDelay:function(t){return this.anims.stopAfterDelay(t)},stopAfterRepeat:function(t){return this.anims.stopAfterRepeat(t)},stopOnFrame:function(t){return this.anims.stopOnFrame(t)},toJSON:function(){return r.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});t.exports=h},function(t,e){t.exports=function(t,e){if(!(e>=t.length)){for(var i=t.length-1,n=t[e],s=e;s<i;s++)t[s]=t[s+1];return t.length=i,n}}},function(t,e,i){t.exports={ADDED_TO_SCENE:i(643),DESTROY:i(644),REMOVED_FROM_SCENE:i(645),VIDEO_COMPLETE:i(646),VIDEO_CREATED:i(647),VIDEO_ERROR:i(648),VIDEO_LOOP:i(649),VIDEO_PLAY:i(650),VIDEO_SEEKED:i(651),VIDEO_SEEKING:i(652),VIDEO_STOP:i(653),VIDEO_TIMEOUT:i(654),VIDEO_UNLOCKED:i(655)}},function(t,e){t.exports=function(t,e,i,n){return void 0===i&&(i=0),0===e?t:(t-=i,t=e*Math.floor(t/e),n?(i+t)/e:i+t)}},function(t,e){t.exports=function(t){var e={};for(var i in t)Array.isArray(t[i])?e[i]=t[i].slice(0):e[i]=t[i];return e}},function(t,e){t.exports=function(t,e,i,n){var s=t.length;if(e<0||s<e||i<=e||s<i||s<e+i){if(n)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},function(t,e){function i(t,e){return String(t).localeCompare(e)}function n(t,e,i,n){for(var s,r,a,o,h=t.length,l=0,c=2*i,u=0;u<h;u+=c)for(r=(s=u+i)+i,h<s&&(s=h),h<r&&(r=h),a=u,o=s;;)if(a<s&&o<r)e(t[a],t[o])<=0?n[l++]=t[a++]:n[l++]=t[o++];else if(a<s)n[l++]=t[a++];else{if(!(o<r))break;n[l++]=t[o++]}}t.exports=function(t,e){void 0===e&&(e=i);var s=function(t,e){var i=t.length;if(i<=1)return t;for(var s=new Array(i),r=1;r<i;r*=2){n(t,e,r,s);var a=t;t=s,s=a}return t}(t,e);return s!==t&&n(s,null,t.length,t),t}},function(t,e,i){var n=i(134),s=i(205);t.exports=function(t,e){var i,r=n.Power0;if("string"==typeof t?n.hasOwnProperty(t)?r=n[t]:(i="",t.indexOf(".")&&("in"===(i=t.substr(t.indexOf(".")+1)).toLowerCase()?i="easeIn":"out"===i.toLowerCase()?i="easeOut":"inout"===i.toLowerCase()&&(i="easeInOut")),t=s(t.substr(0,t.indexOf(".")+1)+i),n.hasOwnProperty(t)&&(r=n[t])):"function"==typeof t?r=t:Array.isArray(t)&&t.length,!e)return r;var a=e.slice(0);return a.unshift(0),function(t){return a[0]=t,r.apply(this,a)}}},function(t,e,i){var n=i(12);t.exports=function(t,e,i,s,r){var a=t.strokeTint,o=n.getTintAppendFloatAlpha(e.strokeColor,e.strokeAlpha*i);a.TL=o,a.TR=o,a.BL=o,a.BR=o;var h=e.pathData,l=h.length-1,c=e.lineWidth,u=c/2,d=h[0]-s,f=h[1]-r;e.closePath||(l-=2);for(var p=2;p<l;p+=2){var g=h[p]-s,m=h[p+1]-r;t.batchLine(d,f,g,m,u,u,c,p-2,!!e.closePath&&p===l-1),d=g,f=m}}},function(t,e,i){var n=i(0),s=i(115),r=i(476),a=i(477),o=i(56),h=i(47),l=i(181),c=new n({initialize:function(t,e,i,n,s,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0),void 0===r&&(r=0),this.type=o.TRIANGLE,this.x1=t,this.y1=e,this.x2=i,this.y2=n,this.x3=s,this.y3=r},contains:function(t,e){return s(this,t,e)},getPoint:function(t,e){return r(this,t,e)},getPoints:function(t,e,i){return a(this,t,e,i)},getRandomPoint:function(t){return l(this,t)},setTo:function(t,e,i,n,s,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0),void 0===r&&(r=0),this.x1=t,this.y1=e,this.x2=i,this.y2=n,this.x3=s,this.y3=r,this},getLineA:function(t){return void 0===t&&(t=new h),t.setTo(this.x1,this.y1,this.x2,this.y2),t},getLineB:function(t){return void 0===t&&(t=new h),t.setTo(this.x2,this.y2,this.x3,this.y3),t},getLineC:function(t){return void 0===t&&(t=new h),t.setTo(this.x3,this.y3,this.x1,this.y1),t},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(t){var e=this.x1<=this.x2&&this.x1<=this.x3?this.x1-t:this.x2<=this.x1&&this.x2<=this.x3?this.x2-t:this.x3-t;this.x1-=e,this.x2-=e,this.x3-=e}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(t){var e=this.x1>=this.x2&&this.x1>=this.x3?this.x1-t:this.x2>=this.x1&&this.x2>=this.x3?this.x2-t:this.x3-t;this.x1-=e,this.x2-=e,this.x3-=e}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(t){var e=this.y1<=this.y2&&this.y1<=this.y3?this.y1-t:this.y2<=this.y1&&this.y2<=this.y3?this.y2-t:this.y3-t;this.y1-=e,this.y2-=e,this.y3-=e}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(t){var e=this.y1>=this.y2&&this.y1>=this.y3?this.y1-t:this.y2>=this.y1&&this.y2>=this.y3?this.y2-t:this.y3-t;this.y1-=e,this.y2-=e,this.y3-=e}}});t.exports=c},,,function(t,e,i){var n=i(29),s=i(0),r=i(11),a=i(502),o=new s({Mixins:[r.Alpha,r.Flip,r.Visible],initialize:function(t,e,i,n,s,r,a,o){this.layer=t,this.index=e,this.x=i,this.y=n,this.width=s,this.height=r,this.right,this.bottom,this.baseWidth=void 0!==a?a:s,this.baseHeight=void 0!==o?o:r,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,(this.collisionCallbackContext=this).tint=16777215,this.physics={}},containsPoint:function(t,e){return!(t<this.pixelX||e<this.pixelY||t>this.right||e>this.bottom)},copy:function(t){return this.index=t.index,this.alpha=t.alpha,this.properties=t.properties,this.visible=t.visible,this.setFlip(t.flipX,t.flipY),this.tint=t.tint,this.rotation=t.rotation,this.collideUp=t.collideUp,this.collideDown=t.collideDown,this.collideLeft=t.collideLeft,this.collideRight=t.collideRight,this.collisionCallback=t.collisionCallback,this.collisionCallbackContext=t.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(t){var e=this.tilemapLayer;return e?e.tileToWorldX(this.x,t):this.x*this.baseWidth},getRight:function(t){var e=this.tilemapLayer;return e?this.getLeft(t)+this.width*e.scaleX:this.getLeft(t)+this.width},getTop:function(t){var e=this.tilemapLayer;return e?e.tileToWorldY(this.y,t)-(this.height-this.baseHeight)*e.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(t){var e=this.tilemapLayer;return e?this.getTop(t)+this.height*e.scaleY:this.getTop(t)+this.height},getBounds:function(t,e){return void 0===e&&(e=new a),e.x=this.getLeft(),e.y=this.getTop(),e.width=this.getRight()-e.x,e.height=this.getBottom()-e.y,e},getCenterX:function(t){return(this.getLeft(t)+this.getRight(t))/2},getCenterY:function(t){return(this.getTop(t)+this.getBottom(t))/2},intersects:function(t,e,i,n){return!(i<=this.pixelX||n<=this.pixelY||t>=this.right||e>=this.bottom)},isInteresting:function(t,e){return t&&e?this.canCollide||this.hasInterestingFace:t?this.collides:!!e&&this.hasInterestingFace},resetCollision:function(t){return void 0===t&&(t=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,t&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(t,e,i,n,s){return void 0===e&&(e=t),void 0===i&&(i=t),void 0===n&&(n=t),void 0===s&&(s=!0),this.collideLeft=t,this.collideRight=e,this.collideUp=i,this.collideDown=n,this.faceLeft=t,this.faceRight=e,this.faceTop=i,this.faceBottom=n,s&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},setCollisionCallback:function(t,e){return null===t?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=t,this.collisionCallbackContext=e),this},setSize:function(t,e,i,n){return void 0!==t&&(this.width=t),void 0!==e&&(this.height=e),void 0!==i&&(this.baseWidth=i),void 0!==n&&(this.baseHeight=n),this.updatePixelXY(),this},updatePixelXY:function(){var t,e,i=this.layer.orientation;return i===n.ORTHOGONAL?(this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight):i===n.ISOMETRIC?(this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5):i===n.STAGGERED?(this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2)):i===n.HEXAGONAL&&(t=this.layer.hexSideLength,e=(this.baseHeight-t)/2+t,this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*e),this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||void 0!==this.collisionCallback}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var t=this.layer.tilemapLayer;if(t){var e=t.gidMap[this.index];if(e)return e}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var t=this.tilemapLayer;return t?t.tilemap:null}}});t.exports=o},,function(t,e){t.exports=function(t){return t.x-t.width*t.originX+.5*t.width}},function(t,e){t.exports=function(t,e){var i=t.width*t.originX;return t.x=e+i-.5*t.width,t}},function(t,e){t.exports=function(t){return t.y-t.height*t.originY+.5*t.height}},function(t,e){t.exports=function(t,e){var i=t.height*t.originY;return t.y=e+i-.5*t.height,t}},function(t,e,i){t.exports={POST_RENDER:i(628),PRE_RENDER:i(629),RENDER:i(630),RESIZE:i(631)}},function(t,e){t.exports={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"}},function(t,e,i){var n=i(74);t.exports=function(t,e,i,s){if(void 0===s&&(s=t),!Array.isArray(e))return-1!==(o=t.indexOf(e))?(n(t,o),i&&i.call(s,e),e):null;for(var r=e.length-1,a=[];0<=r;){var o,h=e[r];-1!==(o=t.indexOf(h))&&(n(t,o),a.push(h),i&&i.call(s,h)),r--}return a}},function(t,e,i){var n=i(0),s=i(199),r=i(10),a=i(3),o=new n({initialize:function(t){this.type=t,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new a,this._tmpVec2B=new a},draw:function(t,e){return void 0===e&&(e=32),t.strokePoints(this.getPoints(e))},getBounds:function(t,e){t=t||new r,void 0===e&&(e=16);var i=this.getLength();i<e&&(e=i/2);var n=Math.max(1,Math.round(i/e));return s(this.getSpacedPoints(n),t)},getDistancePoints:function(t){var e=this.getLength(),i=Math.max(1,e/t);return this.getSpacedPoints(i)},getEndPoint:function(t){return void 0===t&&(t=new a),this.getPointAt(1,t)},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,i=[],n=this.getPoint(0,this._tmpVec2A),s=0;i.push(0);for(var r=1;r<=t;r++)s+=(e=this.getPoint(r/t,this._tmpVec2B)).distance(n),i.push(s),n.copy(e);return this.cacheArcLengths=i},getPointAt:function(t,e){var i=this.getUtoTmapping(t);return this.getPoint(i,e)},getPoints:function(t,e,i){void 0===i&&(i=[]),t=t||(e?this.getLength()/e:this.defaultDivisions);for(var n=0;n<=t;n++)i.push(this.getPoint(n/t));return i},getRandomPoint:function(t){return void 0===t&&(t=new a),this.getPoint(Math.random(),t)},getSpacedPoints:function(t,e,i){void 0===i&&(i=[]),t=t||(e?this.getLength()/e:this.defaultDivisions);for(var n=0;n<=t;n++){var s=this.getUtoTmapping(n/t,null,t);i.push(this.getPoint(s))}return i},getStartPoint:function(t){return void 0===t&&(t=new a),this.getPointAt(0,t)},getTangent:function(t,e){void 0===e&&(e=new a);var i=t-1e-4,n=t+1e-4;return i<0&&(i=0),1<n&&(n=1),this.getPoint(i,this._tmpVec2A),this.getPoint(n,e),e.subtract(this._tmpVec2A).normalize()},getTangentAt:function(t,e){var i=this.getUtoTmapping(t);return this.getTangent(i,e)},getTFromDistance:function(t,e){return t<=0?0:this.getUtoTmapping(0,t,e)},getUtoTmapping:function(t,e,i){for(var n,s=this.getLengths(i),r=0,a=s.length,o=e?Math.min(e,s[a-1]):t*s[a-1],h=0,l=a-1;h<=l;)if((n=s[r=Math.floor(h+(l-h)/2)]-o)<0)h=r+1;else{if(!(0<n)){l=r;break}l=r-1}if(s[r=l]===o)return r/(a-1);var c=s[r];return(r+(o-c)/(s[r+1]-c))/(a-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});t.exports=o},function(t,e,i){t.exports={ADD:i(968),COMPLETE:i(969),FILE_COMPLETE:i(970),FILE_KEY_COMPLETE:i(971),FILE_LOAD_ERROR:i(972),FILE_LOAD:i(973),FILE_PROGRESS:i(974),POST_PROCESS:i(975),PROGRESS:i(976),START:i(977)}},function(t,e,i){var n=i(4);t.exports=function(t,e,i){void 0===i&&(i=new n);var s=t.x1,r=t.y1,a=t.x2,o=t.y2,h=e.x1,l=e.y1,c=e.x2,u=e.y2,d=(u-l)*(a-s)-(c-h)*(o-r);if(0==d)return!1;var f=((c-h)*(r-l)-(u-l)*(s-h))/d,p=((a-s)*(r-l)-(o-r)*(s-h))/d;return 0<=f&&f<=1&&0<=p&&p<=1&&(i.x=s+f*(a-s),i.y=r+f*(o-r),!0)}},function(t,e){t.exports=function(t){return Math.atan2(t.y2-t.y1,t.x2-t.x1)}},function(t,e,i){var n=i(18);t.exports=function(t,e,i){return(i-e)*(t=n(t,0,1))+e}},function(t,e){t.exports=function(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}},function(t,e){t.exports={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26}},function(t,e,i){var n=i(0),s=i(315),r=new n({initialize:function(t,e){this.parent=t,(this.events=e)||(this.events=t.events?t.events:t),this.list={},this.values={},this._frozen=!1,!t.hasOwnProperty("sys")&&this.events&&this.events.once(s.DESTROY,this.destroy,this)},get:function(t){var e=this.list;if(Array.isArray(t)){for(var i=[],n=0;n<t.length;n++)i.push(e[t[n]]);return i}return e[t]},getAll:function(){var t={};for(var e in this.list)this.list.hasOwnProperty(e)&&(t[e]=this.list[e]);return t},query:function(t){var e={};for(var i in this.list)this.list.hasOwnProperty(i)&&i.match(t)&&(e[i]=this.list[i]);return e},set:function(t,e){if(this._frozen)return this;if("string"==typeof t)return this.setValue(t,e);for(var i in t)this.setValue(i,t[i]);return this},inc:function(t,e){if(this._frozen)return this;void 0===e&&(e=1);var i=this.get(t);return void 0===i&&(i=0),this.set(t,i+e),this},toggle:function(t){return this._frozen||this.set(t,!this.get(t)),this},setValue:function(t,e){return this._frozen||(this.has(t)?this.values[t]=e:(n=(i=this).list,r=this.events,a=this.parent,Object.defineProperty(this.values,t,{enumerable:!0,configurable:!0,get:function(){return n[t]},set:function(e){var o;i._frozen||(o=n[t],n[t]=e,r.emit(s.CHANGE_DATA,a,t,e,o),r.emit(s.CHANGE_DATA_KEY+t,a,e,o))}}),n[t]=e,r.emit(s.SET_DATA,a,t,e))),this;var i,n,r,a},each:function(t,e){for(var i=[this.parent,null,void 0],n=1;n<arguments.length;n++)i.push(arguments[n]);for(var s in this.list)i[1]=s,i[2]=this.list[s],t.apply(e,i);return this},merge:function(t,e){for(var i in void 0===e&&(e=!0),t)t.hasOwnProperty(i)&&(e||!e&&!this.has(i))&&this.setValue(i,t[i]);return this},remove:function(t){if(this._frozen)return this;if(!Array.isArray(t))return this.removeValue(t);for(var e=0;e<t.length;e++)this.removeValue(t[e]);return this},removeValue:function(t){var e;return this.has(t)&&(e=this.list[t],delete this.list[t],delete this.values[t],this.events.emit(s.REMOVE_DATA,this.parent,t,e)),this},pop:function(t){var e=void 0;return!this._frozen&&this.has(t)&&(e=this.list[t],delete this.list[t],delete this.values[t],this.events.emit(s.REMOVE_DATA,this.parent,t,e)),e},has:function(t){return this.list.hasOwnProperty(t)},setFreeze:function(t){return this._frozen=t,this},reset:function(){for(var t in this.list)delete this.list[t],delete this.values[t];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(s.CHANGE_DATA),this.events.off(s.SET_DATA),this.events.off(s.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(t){this._frozen=!!t}},count:{get:function(){var t=0;for(var e in this.list)void 0!==this.list[e]&&t++;return t}}});t.exports=r},function(t,e,i){var n=new(i(0))({initialize:function(t){if(this.entries={},this.size=0,Array.isArray(t))for(var e=0;e<t.length;e++)this.set(t[e][0],t[e][1])},set:function(t,e){return this.has(t)||this.size++,this.entries[t]=e,this},get:function(t){if(this.has(t))return this.entries[t]},getArray:function(){var t=[],e=this.entries;for(var i in e)t.push(e[i]);return t},has:function(t){return this.entries.hasOwnProperty(t)},delete:function(t){return this.has(t)&&(delete this.entries[t],this.size--),this},clear:function(){return Object.keys(this.entries).forEach((function(t){delete this.entries[t]}),this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var t=[],e=this.entries;for(var i in e)t.push(e[i]);return t},dump:function(){var t=this.entries;for(var e in console.group("Map"),t)console.log(e,t[e]);console.groupEnd()},each:function(t){var e=this.entries;for(var i in e)if(!1===t(i,e[i]))break;return this},contains:function(t){var e=this.entries;for(var i in e)if(e[i]===t)return!0;return!1},merge:function(t,e){void 0===e&&(e=!1);var i=this.entries,n=t.entries;for(var s in n)i.hasOwnProperty(s)&&e?i[s]=n[s]:this.set(s,n[s]);return this}});t.exports=n},function(t,e){t.exports=function(t,e,i){return t<<16|e<<8|i}},function(t,e,i){t.exports={ENTER_FULLSCREEN:i(800),FULLSCREEN_FAILED:i(801),FULLSCREEN_UNSUPPORTED:i(802),LEAVE_FULLSCREEN:i(803),ORIENTATION_CHANGE:i(804),RESIZE:i(805)}},function(t,e,i){(function(e){var i={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};t.exports=function(){if("function"==typeof importScripts)return i;var t=navigator.userAgent;/Windows/.test(t)?i.windows=!0:/Mac OS/.test(t)&&!/like Mac OS/.test(t)?navigator.maxTouchPoints&&2<navigator.maxTouchPoints?(i.iOS=!0,i.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),i.iOSVersion=parseInt(RegExp.$1,10)):i.macOS=!0:/Android/.test(t)?i.android=!0:/Linux/.test(t)?i.linux=!0:/iP[ao]d|iPhone/i.test(t)?(i.iOS=!0,navigator.appVersion.match(/OS (\d+)/),i.iOSVersion=parseInt(RegExp.$1,10),i.iPhone=-1!==t.toLowerCase().indexOf("iphone"),i.iPad=-1!==t.toLowerCase().indexOf("ipad")):/Kindle/.test(t)||/\bKF[A-Z][A-Z]+/.test(t)||/Silk.*Mobile Safari/.test(t)?i.kindle=!0:/CrOS/.test(t)&&(i.chromeOS=!0),(/Windows Phone/i.test(t)||/IEMobile/i.test(t))&&(i.android=!1,i.iOS=!1,i.macOS=!1,i.windows=!0,i.windowsPhone=!0);var n=/Silk/.test(t);return(i.windows||i.macOS||i.linux&&!n||i.chromeOS)&&(i.desktop=!0),(i.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t))&&(i.desktop=!1),navigator.standalone&&(i.webApp=!0),"function"!=typeof importScripts&&(void 0!==window.cordova&&(i.cordova=!0),void 0!==window.ejecta&&(i.ejecta=!0)),void 0!==e&&e.versions&&e.versions.node&&(i.node=!0),i.node&&"object"==typeof e.versions&&(i.nodeWebkit=!!e.versions["node-webkit"],i.electron=!!e.versions.electron),/Crosswalk/.test(t)&&(i.crosswalk=!0),i.pixelRatio=window.devicePixelRatio||1,i}()}).call(this,i(807))},function(t,e,i){t.exports={ADD:i(861),ERROR:i(862),LOAD:i(863),READY:i(864),REMOVE:i(865)}},function(t,e){t.exports={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}}},function(t,e,i){var n=i(0),s=i(59),r=i(2),a=i(878),o=i(879),h=i(25),l=i(12),c=i(107),u=i(58),d=new n({Extends:u,initialize:function(t){var e=t.game.renderer,i=r(t,"fragShader",a);t.fragShader=l.parseFragmentShaderMaxTextures(i,e.maxTextures),t.vertShader=r(t,"vertShader",o),t.attributes=r(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:c.UNSIGNED_BYTE,normalized:!0}]),u.call(this,t),this._tempMatrix1=new h,this._tempMatrix2=new h,this._tempMatrix3=new h,this.calcMatrix=new h,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){u.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(t,e,i){this.manager.set(this,t);var n,s=this._tempMatrix1,r=this._tempMatrix2,a=this._tempMatrix3,o=t.frame,h=o.glTexture,c=o.u0,u=o.v0,d=o.u1,f=o.v1,p=o.x,g=o.y,m=o.cutWidth,v=o.cutHeight,y=o.customPivot,_=t.displayOriginX,x=t.displayOriginY,w=-_+p,b=-x+g;t.isCropped&&((n=t._crop).flipX===t.flipX&&n.flipY===t.flipY||o.updateCropUVs(n,t.flipX,t.flipY),c=n.u0,u=n.v0,d=n.u1,f=n.v1,m=n.width,v=n.height,w=-_+n.x,b=-x+n.y);var E=1,T=1;t.flipX&&(y||(w+=-o.realWidth+2*_),E=-1),(t.flipY||o.source.isGLTexture&&!h.flipY)&&(y||(b+=-o.realHeight+2*x),T=-1),r.applyITRS(t.x,t.y,t.rotation,t.scaleX*E,t.scaleY*T),s.copyFrom(e.matrix),i?(s.multiplyWithOffset(i,-e.scrollX*t.scrollFactorX,-e.scrollY*t.scrollFactorY),r.e=t.x,r.f=t.y):(r.e-=e.scrollX*t.scrollFactorX,r.f-=e.scrollY*t.scrollFactorY),s.multiply(r,a);var S=w+m,A=b+v,O=e.roundPixels,C=a.getXRound(w,b,O),P=a.getYRound(w,b,O),L=a.getXRound(w,A,O),R=a.getYRound(w,A,O),I=a.getXRound(S,A,O),M=a.getYRound(S,A,O),D=a.getXRound(S,b,O),k=a.getYRound(S,b,O),N=l.getTintAppendFloatAlpha,F=e.alpha,G=N(t.tintTopLeft,F*t._alphaTL),B=N(t.tintTopRight,F*t._alphaTR),z=N(t.tintBottomLeft,F*t._alphaBL),U=N(t.tintBottomRight,F*t._alphaBR);this.shouldFlush(6)&&this.flush();var Y=this.setGameObject(t,o);this.manager.preBatch(t),this.batchQuad(t,C,P,L,R,I,M,D,k,c,u,d,f,G,B,z,U,t.tintFill,h,Y),this.manager.postBatch(t)},batchTexture:function(t,e,i,n,s,r,a,o,h,l,c,u,d,f,p,g,m,v,y,_,x,w,b,E,T,S,A,O,C,P,L,R){this.manager.set(this,t);var I,M,D,k,N,F=this._tempMatrix1,G=this._tempMatrix2,B=this._tempMatrix3,z=v/i+A,U=y/n+O,Y=(v+_)/i+A,X=(y+x)/n+O,H=a,j=o,W=-g,V=-m;t.isCropped&&(a=H=M=(I=t._crop).width,o=j=D=I.height,k=v=I.x,N=y=I.y,u&&(k=_-I.x-M),d&&(N=x-I.y-D),z=k/i+A,U=N/n+O,Y=(k+M)/i+A,X=(N+D)/n+O,W=-g+v,V=-m+y),u&&(H*=-1,W+=a),(d^=!L&&e.isRenderTexture?1:0)&&(j*=-1,V+=o);var K=W+H,q=V+j;G.applyITRS(s,r,c,h,l),F.copyFrom(C.matrix),P?(F.multiplyWithOffset(P,-C.scrollX*f,-C.scrollY*p),G.e=s,G.f=r):(G.e-=C.scrollX*f,G.f-=C.scrollY*p),F.multiply(G,B);var Z=C.roundPixels,J=B.getXRound(W,V,Z),$=B.getYRound(W,V,Z),Q=B.getXRound(W,q,Z),tt=B.getYRound(W,q,Z),et=B.getXRound(K,q,Z),it=B.getYRound(K,q,Z),nt=B.getXRound(K,V,Z),st=B.getYRound(K,V,Z);void 0===R&&(R=this.renderer.setTexture2D(e)),t&&this.manager.preBatch(t),this.batchQuad(t,J,$,Q,tt,et,it,nt,st,z,U,Y,X,w,b,E,T,S,e,R),t&&this.manager.postBatch(t)},batchTextureFrame:function(t,e,i,n,s,r,a){this.manager.set(this);var o=this._tempMatrix1.copyFrom(r),h=this._tempMatrix2,c=e+t.width,u=i+t.height;a?o.multiply(a,h):h=o;var d=h.getX(e,i),f=h.getY(e,i),p=h.getX(e,u),g=h.getY(e,u),m=h.getX(c,u),v=h.getY(c,u),y=h.getX(c,i),_=h.getY(c,i),x=this.renderer.setTextureSource(t.source);n=l.getTintAppendFloatAlpha(n,s),this.batchQuad(null,d,f,p,g,m,v,y,_,t.u0,t.v0,t.u1,t.v1,n,n,n,n,0,t.glTexture,x)},batchFillRect:function(t,e,i,n,s,r){this.renderer.pipelines.set(this);var a=this.calcMatrix;r&&r.multiply(s,a);var o=t+i,h=e+n,l=a.getX(t,e),c=a.getY(t,e),u=a.getX(t,h),d=a.getY(t,h),f=a.getX(o,h),p=a.getY(o,h),g=a.getX(o,e),m=a.getY(o,e),v=this.fillTint;this.batchQuad(null,l,c,u,d,f,p,g,m,0,0,1,1,v.TL,v.TR,v.BL,v.BR,2)},batchFillTriangle:function(t,e,i,n,s,r,a,o){this.renderer.pipelines.set(this);var h=this.calcMatrix;o&&o.multiply(a,h);var l=h.getX(t,e),c=h.getY(t,e),u=h.getX(i,n),d=h.getY(i,n),f=h.getX(s,r),p=h.getY(s,r),g=this.fillTint;this.batchTri(null,l,c,u,d,f,p,0,0,1,1,g.TL,g.TR,g.BL,2)},batchStrokeTriangle:function(t,e,i,n,s,r,a,o,h){var l=this.tempTriangle;l[0].x=t,l[0].y=e,l[0].width=a,l[1].x=i,l[1].y=n,l[1].width=a,l[2].x=s,l[2].y=r,l[2].width=a,l[3].x=t,l[3].y=e,l[3].width=a,this.batchStrokePath(l,a,!1,o,h)},batchFillPath:function(t,e,i){this.renderer.pipelines.set(this);var n=this.calcMatrix;i&&i.multiply(e,n);for(var r,a,o=t.length,h=this.polygonCache,l=this.fillTint.TL,c=this.fillTint.TR,u=this.fillTint.BL,d=0;d<o;++d)a=t[d],h.push(a.x,a.y);o=(r=s(h)).length;for(var f=0;f<o;f+=3){var p=2*r[f+0],g=2*r[f+1],m=2*r[f+2],v=h[0+p],y=h[1+p],_=h[0+g],x=h[1+g],w=h[0+m],b=h[1+m],E=n.getX(v,y),T=n.getY(v,y),S=n.getX(_,x),A=n.getY(_,x),O=n.getX(w,b),C=n.getY(w,b);this.batchTri(null,E,T,S,A,O,C,0,0,1,1,l,c,u,2)}h.length=0},batchStrokePath:function(t,e,i,n,s){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var r=t.length-1,a=0;a<r;a++){var o=t[a],h=t[a+1];this.batchLine(o.x,o.y,h.x,h.y,o.width/2,h.width/2,e,a,!i&&a===r-1,n,s)}},batchLine:function(t,e,i,n,s,r,a,o,h,l,c){this.renderer.pipelines.set(this);var u=this.calcMatrix;c&&c.multiply(l,u);var d,f,p=i-t,g=n-e,m=Math.sqrt(p*p+g*g),v=s*(n-e)/m,y=s*(t-i)/m,_=r*(n-e)/m,x=r*(t-i)/m,w=i-_,b=n-x,E=t-v,T=e-y,S=i+_,A=n+x,O=t+v,C=e+y,P=u.getX(w,b),L=u.getY(w,b),R=u.getX(E,T),I=u.getY(E,T),M=u.getX(S,A),D=u.getY(S,A),k=u.getX(O,C),N=u.getY(O,C),F=this.strokeTint,G=F.TL,B=F.TR,z=F.BL,U=F.BR;this.batchQuad(null,k,N,R,I,P,L,M,D,0,0,1,1,G,B,z,U,2),a<=2||(d=this.prevQuad,f=this.firstQuad,0<o&&d[4]?this.batchQuad(null,k,N,R,I,d[0],d[1],d[2],d[3],0,0,1,1,G,B,z,U,2):(f[0]=k,f[1]=N,f[2]=R,f[3]=I,f[4]=1),h&&f[4]?this.batchQuad(null,P,L,M,D,f[0],f[1],f[2],f[3],0,0,1,1,G,B,z,U,2):(d[0]=P,d[1]=L,d[2]=M,d[3]=D,d[4]=1))}});t.exports=d},function(t,e,i){var n=i(0),s=i(18),r=i(17),a=new n({initialize:function(t,e,i,n,s,r,a){this.texture=t,this.name=e,this.source=t.source[i],this.sourceIndex=i,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(r,a,n,s)},setSize:function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this.cutX=i,this.cutY=n,this.cutWidth=t,this.cutHeight=e,this.width=t,this.height=e,this.halfWidth=Math.floor(.5*t),this.halfHeight=Math.floor(.5*e),this.centerX=Math.floor(t/2),this.centerY=Math.floor(e/2);var s=this.data,r=s.cut;r.x=i,r.y=n,r.w=t,r.h=e,r.r=i+t,r.b=n+e,s.sourceSize.w=t,s.sourceSize.h=e,s.spriteSourceSize.w=t,s.spriteSourceSize.h=e,s.radius=.5*Math.sqrt(t*t+e*e);var a=s.drawImage;return a.x=i,a.y=n,a.width=t,a.height=e,this.updateUVs()},setTrim:function(t,e,i,n,s,r){var a=this.data,o=a.spriteSourceSize;return a.trim=!0,a.sourceSize.w=t,a.sourceSize.h=e,o.x=i,o.y=n,o.w=s,o.h=r,o.r=i+s,o.b=n+r,this.x=i,this.y=n,this.width=s,this.height=r,this.halfWidth=.5*s,this.halfHeight=.5*r,this.centerX=Math.floor(s/2),this.centerY=Math.floor(r/2),this.updateUVs()},setCropUVs:function(t,e,i,n,r,a,o){var h,l,c,u,d,f,p,g=this.cutX,m=this.cutY,v=this.cutWidth,y=this.cutHeight,_=this.realWidth,x=this.realHeight,w=g+(e=s(e,0,_)),b=m+(i=s(i,0,x)),E=n=s(n,0,_-e),T=r=s(r,0,x-i),S=this.data;S.trim?(h=S.spriteSourceSize,l=e+(n=s(n,0,v-e)),c=i+(r=s(r,0,y-i)),h.r<e||h.b<i||h.x>l||h.y>c?T=E=b=w=0:(u=Math.max(h.x,e),d=Math.max(h.y,i),E=f=Math.min(h.r,l)-u,T=p=Math.min(h.b,c)-d,w=a?g+(v-(u-h.x)-f):g+(u-h.x),b=o?m+(y-(d-h.y)-p):m+(d-h.y),e=u,i=d,n=f,r=p)):(a&&(w=g+(v-e-n)),o&&(b=m+(y-i-r)));var A=this.source.width,O=this.source.height;return t.u0=Math.max(0,w/A),t.v0=Math.max(0,b/O),t.u1=Math.min(1,(w+E)/A),t.v1=Math.min(1,(b+T)/O),t.x=e,t.y=i,t.cx=w,t.cy=b,t.cw=E,t.ch=T,t.width=n,t.height=r,t.flipX=a,t.flipY=o,t},updateCropUVs:function(t,e,i){return this.setCropUVs(t,t.x,t.y,t.width,t.height,e,i)},setUVs:function(t,e,i,n,s,r){var a=this.data.drawImage;return a.width=t,a.height=e,this.u0=i,this.v0=n,this.u1=s,this.v1=r,this},updateUVs:function(){var t=this.cutX,e=this.cutY,i=this.cutWidth,n=this.cutHeight,s=this.data.drawImage;s.width=i,s.height=n;var r=this.source.width,a=this.source.height;return this.u0=t/r,this.v0=e/a,this.u1=(t+i)/r,this.v1=(e+n)/a,this},updateUVsInverted:function(){var t=this.source.width,e=this.source.height;return this.u0=(this.cutX+this.cutHeight)/t,this.v0=this.cutY/e,this.u1=this.cutX/t,this.v1=(this.cutY+this.cutWidth)/e,this},clone:function(){var t=new a(this.texture,this.name,this.sourceIndex);return t.cutX=this.cutX,t.cutY=this.cutY,t.cutWidth=this.cutWidth,t.cutHeight=this.cutHeight,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t.halfWidth=this.halfWidth,t.halfHeight=this.halfHeight,t.centerX=this.centerX,t.centerY=this.centerY,t.rotated=this.rotated,t.data=r(!0,t.data,this.data),t.updateUVs(),t},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});t.exports=a},function(t,e,i){var n=i(208),s=i(0),r=i(1),a=i(79),o=new s({initialize:function(t){this.parent=t,this.list=[],this.position=0,this.addCallback=r,this.removeCallback=r,this._sortKey=""},add:function(t,e){return e?n.Add(this.list,t):n.Add(this.list,t,0,this.addCallback,this)},addAt:function(t,e,i){return i?n.AddAt(this.list,t,e):n.AddAt(this.list,t,e,0,this.addCallback,this)},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t,e){return t&&(void 0===e&&(e=function(e,i){return e[t]-i[t]}),a(this.list,e)),this},getByName:function(t){return n.GetFirst(this.list,"name",t)},getRandom:function(t,e){return n.GetRandom(this.list,t,e)},getFirst:function(t,e,i,s){return n.GetFirst(this.list,t,e,i,s)},getAll:function(t,e,i,s){return n.GetAll(this.list,t,e,i,s)},count:function(t,e){return n.CountAllMatching(this.list,t,e)},swap:function(t,e){n.Swap(this.list,t,e)},moveTo:function(t,e){return n.MoveTo(this.list,t,e)},moveAbove:function(t,e){return n.MoveAbove(this.list,t,e)},moveBelow:function(t,e){return n.MoveBelow(this.list,t,e)},remove:function(t,e){return e?n.Remove(this.list,t):n.Remove(this.list,t,this.removeCallback,this)},removeAt:function(t,e){return e?n.RemoveAt(this.list,t):n.RemoveAt(this.list,t,this.removeCallback,this)},removeBetween:function(t,e,i){return i?n.RemoveBetween(this.list,t,e):n.RemoveBetween(this.list,t,e,this.removeCallback,this)},removeAll:function(t){for(var e=this.list.length;e--;)this.remove(this.list[e],t);return this},bringToTop:function(t){return n.BringToTop(this.list,t)},sendToBack:function(t){return n.SendToBack(this.list,t)},moveUp:function(t){return n.MoveUp(this.list,t),t},moveDown:function(t){return n.MoveDown(this.list,t),t},reverse:function(){return this.list.reverse(),this},shuffle:function(){return n.Shuffle(this.list),this},replace:function(t,e){return n.Replace(this.list,t,e)},exists:function(t){return-1<this.list.indexOf(t)},setAll:function(t,e,i,s){return n.SetAll(this.list,t,e,i,s),this},each:function(t,e){for(var i=[null],n=2;n<arguments.length;n++)i.push(arguments[n]);for(n=0;n<this.list.length;n++)i[0]=this.list[n],t.apply(e,i)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return(this.position=0)<this.list.length?this.list[0]:null}},last:{get:function(){return 0<this.list.length?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return 0<this.position?(this.position--,this.list[this.position]):null}}});t.exports=o},function(t,e,i){var n=i(0),s=i(112),r=i(445),a=i(446),o=i(56),h=i(180),l=new n({initialize:function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.type=o.ELLIPSE,this.x=t,this.y=e,this.width=i,this.height=n},contains:function(t,e){return s(this,t,e)},getPoint:function(t,e){return r(this,t,e)},getPoints:function(t,e,i){return a(this,t,e,i)},getRandomPoint:function(t){return h(this,t)},setTo:function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(t){this.x=t+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(t){this.y=t+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});t.exports=l},function(t,e){t.exports=function(t,e,i){if(t.width<=0||t.height<=0)return!1;var n=(e-t.x)/t.width,s=(i-t.y)/t.height;return(n*=n)+(s*=s)<.25}},function(t,e,i){var n=i(275),s=i(0),r=i(75),a=i(9),o=i(207),h=i(2),l=i(6),c=i(7),u=i(437),d=i(149),f=i(73),p=new s({Extends:a,initialize:function(t,e,i){a.call(this),i?e&&!Array.isArray(e)&&(e=[e]):Array.isArray(e)?c(e[0])&&(i=e,e=null):c(e)&&(i=e,e=null),this.scene=t,this.children=new d,this.isParent=!0,this.type="Group",this.classType=h(i,"classType",f),this.name=h(i,"name",""),this.active=h(i,"active",!0),this.maxSize=h(i,"maxSize",-1),this.defaultKey=h(i,"defaultKey",null),this.defaultFrame=h(i,"defaultFrame",null),this.runChildUpdate=h(i,"runChildUpdate",!1),this.createCallback=h(i,"createCallback",null),this.removeCallback=h(i,"removeCallback",null),this.createMultipleCallback=h(i,"createMultipleCallback",null),this.internalCreateCallback=h(i,"internalCreateCallback",null),this.internalRemoveCallback=h(i,"internalRemoveCallback",null),e&&this.addMultiple(e),i&&this.createMultiple(i),this.on(r.ADDED_TO_SCENE,this.addedToScene,this),this.on(r.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(t,e,i,n,s,r){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.defaultKey),void 0===n&&(n=this.defaultFrame),void 0===s&&(s=!0),void 0===r&&(r=!0),this.isFull())return null;var a=new this.classType(this.scene,t,e,i,n);return a.addToDisplayList(this.scene.sys.displayList),a.addToUpdateList(),a.visible=s,a.setActive(r),this.add(a),a},createMultiple:function(t){if(this.isFull())return[];Array.isArray(t)||(t=[t]);var e=[];if(t[0].key)for(var i=0;i<t.length;i++){var n=this.createFromConfig(t[i]);e=e.concat(n)}return e},createFromConfig:function(t){if(this.isFull())return[];this.classType=h(t,"classType",this.classType);var e=h(t,"key",void 0),i=h(t,"frame",null),s=h(t,"visible",!0),r=h(t,"active",!0),a=[];if(void 0===e)return a;Array.isArray(e)||(e=[e]),Array.isArray(i)||(i=[i]);var o=h(t,"repeat",0),c=h(t,"randomKey",!1),d=h(t,"randomFrame",!1),f=h(t,"yoyo",!1),p=h(t,"quantity",!1),g=h(t,"frameQuantity",1),m=h(t,"max",0),v=u(e,i,{max:m,qty:p||g,random:c,randomB:d,repeat:o,yoyo:f});t.createCallback&&(this.createCallback=t.createCallback),t.removeCallback&&(this.removeCallback=t.removeCallback);for(var y=0;y<v.length;y++){var _=this.create(0,0,v[y].a,v[y].b,s,r);if(!_)break;a.push(_)}var x=l(t,"setXY.x",0),w=l(t,"setXY.y",0),b=l(t,"setXY.stepX",0),E=l(t,"setXY.stepY",0);n.SetXY(a,x,w,b,E);var T=l(t,"setRotation.value",0),S=l(t,"setRotation.step",0);n.SetRotation(a,T,S);var A=l(t,"setScale.x",1),O=l(t,"setScale.y",A),C=l(t,"setScale.stepX",0),P=l(t,"setScale.stepY",0);n.SetScale(a,A,O,C,P);var L=l(t,"setOrigin.x",.5),R=l(t,"setOrigin.y",L),I=l(t,"setOrigin.stepX",0),M=l(t,"setOrigin.stepY",0);n.SetOrigin(a,L,R,I,M);var D=l(t,"setAlpha.value",1),k=l(t,"setAlpha.step",0);n.SetAlpha(a,D,k);var N=l(t,"setDepth.value",0),F=l(t,"setDepth.step",0);n.SetDepth(a,N,F);var G=l(t,"setScrollFactor.x",1),B=l(t,"setScrollFactor.y",G),z=l(t,"setScrollFactor.stepX",0),U=l(t,"setScrollFactor.stepY",0);n.SetScrollFactor(a,G,B,z,U);var Y=h(t,"hitArea",null),X=h(t,"hitAreaCallback",null);Y&&n.SetHitArea(a,Y,X);var H=h(t,"gridAlign",!1);return H&&n.GridAlign(a,H),this.createMultipleCallback&&this.createMultipleCallback.call(this,a),a},preUpdate:function(t,e){if(this.runChildUpdate&&0!==this.children.size)for(var i=this.children.entries.slice(),n=0;n<i.length;n++){var s=i[n];s.active&&s.update(t,e)}},add:function(t,e){return void 0===e&&(e=!1),this.isFull()||(this.children.set(t),this.internalCreateCallback&&this.internalCreateCallback.call(this,t),this.createCallback&&this.createCallback.call(this,t),e&&(t.addToDisplayList(this.scene.sys.displayList),t.addToUpdateList()),t.on(r.DESTROY,this.remove,this)),this},addMultiple:function(t,e){if(void 0===e&&(e=!1),Array.isArray(t))for(var i=0;i<t.length;i++)this.add(t[i],e);return this},remove:function(t,e,i){return void 0===e&&(e=!1),void 0===i&&(i=!1),this.children.contains(t)&&(this.children.delete(t),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,t),this.removeCallback&&this.removeCallback.call(this,t),t.off(r.DESTROY,this.remove,this),i?t.destroy():e&&(t.removeFromDisplayList(),t.removeFromUpdateList())),this},clear:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);for(var i=this.children,n=0;n<i.size;n++){var s=i.entries[n];s.off(r.DESTROY,this.remove,this),e?s.destroy():t&&(s.removeFromDisplayList(),s.removeFromUpdateList())}return this.children.clear(),this},contains:function(t){return this.children.contains(t)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(t,e,i,n){return o(this.children.entries,t,e,i,n)},getFirst:function(t,e,i,n,s,r,a){return this.getHandler(!0,1,t,e,i,n,s,r,a)},getFirstNth:function(t,e,i,n,s,r,a,o){return this.getHandler(!0,t,e,i,n,s,r,a,o)},getLast:function(t,e,i,n,s,r,a){return this.getHandler(!1,1,t,e,i,n,s,r,a)},getLastNth:function(t,e,i,n,s,r,a,o){return this.getHandler(!1,t,e,i,n,s,r,a,o)},getHandler:function(t,e,i,n,s,r,a,o,h){var l,c;void 0===i&&(i=!1),void 0===n&&(n=!1);var u=0,d=this.children.entries;if(t)for(c=0;c<d.length;c++)if((l=d[c]).active===i){if(++u===e)break}else l=null;else for(c=d.length-1;0<=c;c--)if((l=d[c]).active===i){if(++u===e)break}else l=null;return l?("number"==typeof s&&(l.x=s),"number"==typeof r&&(l.y=r),l):n?this.create(s,r,a,o,h):null},get:function(t,e,i,n,s){return this.getFirst(!1,!0,t,e,i,n,s)},getFirstAlive:function(t,e,i,n,s,r){return this.getFirst(!0,t,e,i,n,s,r)},getFirstDead:function(t,e,i,n,s,r){return this.getFirst(!1,t,e,i,n,s,r)},playAnimation:function(t,e){return n.PlayAnimation(this.children.entries,t,e),this},isFull:function(){return-1!==this.maxSize&&this.children.size>=this.maxSize},countActive:function(t){void 0===t&&(t=!0);for(var e=0,i=0;i<this.children.size;i++)this.children.entries[i].active===t&&e++;return e},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var t=this.getTotalUsed();return(-1===this.maxSize?999999999999:this.maxSize)-t},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},propertyValueSet:function(t,e,i,s,r){return n.PropertyValueSet(this.children.entries,t,e,i,s,r),this},propertyValueInc:function(t,e,i,s,r){return n.PropertyValueInc(this.children.entries,t,e,i,s,r),this},setX:function(t,e){return n.SetX(this.children.entries,t,e),this},setY:function(t,e){return n.SetY(this.children.entries,t,e),this},setXY:function(t,e,i,s){return n.SetXY(this.children.entries,t,e,i,s),this},incX:function(t,e){return n.IncX(this.children.entries,t,e),this},incY:function(t,e){return n.IncY(this.children.entries,t,e),this},incXY:function(t,e,i,s){return n.IncXY(this.children.entries,t,e,i,s),this},shiftPosition:function(t,e,i){return n.ShiftPosition(this.children.entries,t,e,i),this},angle:function(t,e){return n.Angle(this.children.entries,t,e),this},rotate:function(t,e){return n.Rotate(this.children.entries,t,e),this},rotateAround:function(t,e){return n.RotateAround(this.children.entries,t,e),this},rotateAroundDistance:function(t,e,i){return n.RotateAroundDistance(this.children.entries,t,e,i),this},setAlpha:function(t,e){return n.SetAlpha(this.children.entries,t,e),this},setTint:function(t,e,i,s){return n.SetTint(this.children.entries,t,e,i,s),this},setOrigin:function(t,e,i,s){return n.SetOrigin(this.children.entries,t,e,i,s),this},scaleX:function(t,e){return n.ScaleX(this.children.entries,t,e),this},scaleY:function(t,e){return n.ScaleY(this.children.entries,t,e),this},scaleXY:function(t,e,i,s){return n.ScaleXY(this.children.entries,t,e,i,s),this},setDepth:function(t,e){return n.SetDepth(this.children.entries,t,e),this},setBlendMode:function(t){return n.SetBlendMode(this.children.entries,t),this},setHitArea:function(t,e){return n.SetHitArea(this.children.entries,t,e),this},shuffle:function(){return n.Shuffle(this.children.entries),this},kill:function(t){this.children.contains(t)&&t.setActive(!1)},killAndHide:function(t){this.children.contains(t)&&(t.setActive(!1),t.setVisible(!1))},setVisible:function(t,e,i){return n.SetVisible(this.children.entries,t,e,i),this},toggleVisible:function(){return n.ToggleVisible(this.children.entries),this},destroy:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1),this.scene&&!this.ignoreDestroy&&(this.emit(r.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(e,t),this.scene=void 0,this.children=void 0)}});t.exports=p},function(t,e,i){var n=i(12);t.exports=function(t,e,i,s,r,a){for(var o=n.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*s),h=i.pathData,l=i.pathIndexes,c=0;c<l.length;c+=3){var u=2*l[c],d=2*l[c+1],f=2*l[c+2],p=h[0+u]-r,g=h[1+u]-a,m=h[0+d]-r,v=h[1+d]-a,y=h[0+f]-r,_=h[1+f]-a,x=e.getX(p,g),w=e.getY(p,g),b=e.getX(m,v),E=e.getY(m,v),T=e.getX(y,_),S=e.getY(y,_);t.batchTri(i,x,w,b,E,T,S,0,0,1,1,o,o,o,2)}}},function(t,e){t.exports=function(t,e,i){var n=t.x3-t.x1,s=t.y3-t.y1,r=t.x2-t.x1,a=t.y2-t.y1,o=e-t.x1,h=i-t.y1,l=n*n+s*s,c=n*r+s*a,u=n*o+s*h,d=r*r+a*a,f=r*o+a*h,p=l*d-c*c,g=0==p?0:1/p,m=(d*u-c*f)*g,v=(l*f-c*u)*g;return 0<=m&&0<=v&&m+v<1}},function(t,e,i){var n=i(0),s=i(10),r=i(3);function a(t,e,i,n){var s=t-i,r=e-n,a=s*s+r*r;return Math.sqrt(a)}var o=new n({initialize:function(t,e,i){this.vertex1=t,this.vertex2=e,this.vertex3=i,this.bounds=new s,this._inCenter=new r},getInCenter:function(t){void 0===t&&(t=!0);var e,i,n,s,r,o=this.vertex1,h=this.vertex2,l=this.vertex3,c=t?(e=o.x,i=o.y,n=h.x,s=h.y,r=l.x,l.y):(e=o.vx,i=o.vy,n=h.vx,s=h.vy,r=l.vx,l.vy),u=a(r,c,n,s),d=a(e,i,r,c),f=a(n,s,e,i),p=u+d+f;return this._inCenter.set((e*u+n*d+r*f)/p,(i*u+s*d+c*f)/p)},contains:function(t,e,i){var n,s,r,a,o,h,l=this.vertex1,c=this.vertex2,u=this.vertex3,d=l.vx,f=l.vy,p=c.vx,g=c.vy,m=u.vx,v=u.vy;i&&(n=i.a,s=i.b,r=i.c,a=i.d,o=i.e,h=i.f,d=l.vx*n+l.vy*r+o,f=l.vx*s+l.vy*a+h,p=c.vx*n+c.vy*r+o,g=c.vx*s+c.vy*a+h,m=u.vx*n+u.vy*r+o,v=u.vx*s+u.vy*a+h);var y=m-d,_=v-f,x=p-d,w=g-f,b=t-d,E=e-f,T=y*y+_*_,S=y*x+_*w,A=y*b+_*E,O=x*x+w*w,C=x*b+w*E,P=T*O-S*S,L=0==P?0:1/P,R=(O*A-S*C)*L,I=(T*C-S*A)*L;return 0<=R&&0<=I&&R+I<1},isCounterClockwise:function(t){var e=this.vertex1,i=this.vertex2,n=this.vertex3,s=(i.vx-e.vx)*(n.vy-e.vy)-(i.vy-e.vy)*(n.vx-e.vx);return t<=0?0<=s:s<0},load:function(t,e,i,n,s){return i=this.vertex1.load(t,e,i,n,s),i=this.vertex2.load(t,e,i,n,s),this.vertex3.load(t,e,i,n,s)},transformCoordinatesLocal:function(t,e,i,n){return this.vertex1.transformCoordinatesLocal(t,e,i,n),this.vertex2.transformCoordinatesLocal(t,e,i,n),this.vertex3.transformCoordinatesLocal(t,e,i,n),this},updateBounds:function(){var t=this.vertex1,e=this.vertex2,i=this.vertex3,n=this.bounds;return n.x=Math.min(t.vx,e.vx,i.vx),n.y=Math.min(t.vy,e.vy,i.vy),n.width=Math.max(t.vx,e.vx,i.vx)-n.x,n.height=Math.max(t.vy,e.vy,i.vy)-n.y,this},isInView:function(t,e,i,n,s,r,a,o,h,l,c){var u=this.vertex1.update(s,r,a,o,h,l,c,n),d=this.vertex2.update(s,r,a,o,h,l,c,n),f=this.vertex3.update(s,r,a,o,h,l,c,n);if(u.ta<=0&&d.ta<=0&&f.ta<=0)return!1;if(e&&!this.isCounterClockwise(i))return!1;var p=this.bounds;p.x=Math.min(u.tx,d.tx,f.tx),p.y=Math.min(u.ty,d.ty,f.ty),p.width=Math.max(u.tx,d.tx,f.tx)-p.x,p.height=Math.max(u.ty,d.ty,f.ty)-p.y;var g=t.x+t.width,m=t.y+t.height;return!(p.width<=0||p.height<=0||t.width<=0||t.height<=0||p.right<t.x||p.bottom<t.y||p.x>g||p.y>m)},translate:function(t,e){void 0===e&&(e=0);var i=this.vertex1,n=this.vertex2,s=this.vertex3;return i.x+=t,i.y+=e,n.x+=t,n.y+=e,s.x+=t,s.y+=e,this},x:{get:function(){return this.getInCenter().x},set:function(t){var e=this.getInCenter();this.translate(t-e.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(t){var e=this.getInCenter();this.translate(0,t-e.y)}},alpha:{get:function(){var t=this.vertex1,e=this.vertex2,i=this.vertex3;return(t.alpha+e.alpha+i.alpha)/3},set:function(t){this.vertex1.alpha=t,this.vertex2.alpha=t,this.vertex3.alpha=t}},depth:{get:function(){var t=this.vertex1,e=this.vertex2,i=this.vertex3;return(t.vz+e.vz+i.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});t.exports=o},function(t,e,i){var n=i(0),s=i(12),r=i(39),a=new n({Extends:r,initialize:function(t,e,i,n,s,a,o,h,l,c){void 0===a&&(a=16777215),void 0===o&&(o=1),void 0===h&&(h=0),void 0===l&&(l=0),void 0===c&&(c=0),r.call(this,t,e,i),this.vx=0,this.vy=0,this.vz=0,this.nx=h,this.ny=l,this.nz=c,this.u=n,this.v=s,this.color=a,this.alpha=o,this.tx=0,this.ty=0,this.ta=0},setUVs:function(t,e){return this.u=t,this.v=e,this},transformCoordinatesLocal:function(t,e,i,n){var s=this.x,r=this.y,a=this.z,o=t.val,h=s*o[0]+r*o[4]+a*o[8]+o[12],l=s*o[1]+r*o[5]+a*o[9]+o[13],c=s*o[2]+r*o[6]+a*o[10]+o[14],u=s*o[3]+r*o[7]+a*o[11]+o[15];this.vx=h/u*e,this.vy=-l/u*i,this.vz=n<=0?c/u:-c/u},update:function(t,e,i,n,s,r,a,o){var h=this.vx*t+this.vy*i+s,l=this.vx*e+this.vy*n+r;return a&&(h=Math.round(h),l=Math.round(l)),this.tx=h,this.ty=l,this.ta=this.alpha*o,this},load:function(t,e,i,n,r){return t[++i]=this.tx,t[++i]=this.ty,t[++i]=this.u,t[++i]=this.v,t[++i]=n,t[++i]=r,e[++i]=s.getTintAppendFloatAlpha(this.color,this.ta),i}});t.exports=a},,function(t,e){t.exports=function(t,e,i){return 0<=t&&t<i.width&&0<=e&&e<i.height}},function(t,e,i){var n=i(0),s=i(29),r=i(2),a=new n({initialize:function(t){void 0===t&&(t={}),this.name=r(t,"name","layer"),this.x=r(t,"x",0),this.y=r(t,"y",0),this.width=r(t,"width",0),this.height=r(t,"height",0),this.tileWidth=r(t,"tileWidth",0),this.tileHeight=r(t,"tileHeight",0),this.baseTileWidth=r(t,"baseTileWidth",this.tileWidth),this.baseTileHeight=r(t,"baseTileHeight",this.tileHeight),this.orientation=r(t,"orientation",s.ORTHOGONAL),this.widthInPixels=r(t,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=r(t,"heightInPixels",this.height*this.baseTileHeight),this.alpha=r(t,"alpha",1),this.visible=r(t,"visible",!0),this.properties=r(t,"properties",[]),this.indexes=r(t,"indexes",[]),this.collideIndexes=r(t,"collideIndexes",[]),this.callbacks=r(t,"callbacks",[]),this.bodies=r(t,"bodies",[]),this.data=r(t,"data",[]),this.tilemapLayer=r(t,"tilemapLayer",null),this.hexSideLength=r(t,"hexSideLength",0)}});t.exports=a},function(t,e,i){var n=i(0),s=i(29),r=i(2),a=new n({initialize:function(t){void 0===t&&(t={}),this.name=r(t,"name","map"),this.width=r(t,"width",0),this.height=r(t,"height",0),this.infinite=r(t,"infinite",!1),this.tileWidth=r(t,"tileWidth",0),this.tileHeight=r(t,"tileHeight",0),this.widthInPixels=r(t,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=r(t,"heightInPixels",this.height*this.tileHeight),this.format=r(t,"format",null),this.orientation=r(t,"orientation",s.ORTHOGONAL),this.renderOrder=r(t,"renderOrder","right-down"),this.version=r(t,"version","1"),this.properties=r(t,"properties",{}),this.layers=r(t,"layers",[]),this.images=r(t,"images",[]),this.objects=r(t,"objects",{}),this.collision=r(t,"collision",{}),this.tilesets=r(t,"tilesets",[]),this.imageCollections=r(t,"imageCollections",[]),this.tiles=r(t,"tiles",[]),this.hexSideLength=r(t,"hexSideLength",0)}});t.exports=a},function(t,e,i){var n=new(i(0))({initialize:function(t,e,i,n,s,r,a,o){(void 0===i||i<=0)&&(i=32),(void 0===n||n<=0)&&(n=32),void 0===s&&(s=0),void 0===r&&(r=0),void 0===a&&(a={}),void 0===o&&(o={}),this.name=t,this.firstgid=e,this.tileWidth=i,this.tileHeight=n,this.tileMargin=s,this.tileSpacing=r,this.tileProperties=a,this.tileData=o,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(t){return this.containsTileIndex(t)?this.tileProperties[t-this.firstgid]:null},getTileData:function(t){return this.containsTileIndex(t)?this.tileData[t-this.firstgid]:null},getTileCollisionGroup:function(t){var e=this.getTileData(t);return e&&e.objectgroup?e.objectgroup:null},containsTileIndex:function(t){return t>=this.firstgid&&t<this.firstgid+this.total},getTileTextureCoordinates:function(t){return this.containsTileIndex(t)?this.texCoordinates[t-this.firstgid]:null},setImage:function(t){return this.image=t,this.glTexture=t.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(t,e){return void 0!==t&&(this.tileWidth=t),void 0!==e&&(this.tileHeight=e),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(t,e){return void 0!==t&&(this.tileMargin=t),void 0!==e&&(this.tileSpacing=e),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(t,e){var i=(e-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),n=(t-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);i%1==0&&n%1==0||console.warn("Image tile area not tile size multiple in: "+this.name),i=Math.floor(i),n=Math.floor(n),this.rows=i,this.columns=n,this.total=i*n,this.texCoordinates.length=0;for(var s=this.tileMargin,r=this.tileMargin,a=0;a<this.rows;a++){for(var o=0;o<this.columns;o++)this.texCoordinates.push({x:s,y:r}),s+=this.tileWidth+this.tileSpacing;s=this.tileMargin,r+=this.tileHeight+this.tileSpacing}return this}});t.exports=n},function(t,e){t.exports={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12}},function(t,e){t.exports=function(t,e,i){return void 0===i&&(i=1e-4),Math.abs(t-e)<i}},function(t,e,i){var n=i(0),s=i(11),r=i(15),a=i(1068),o=new n({Extends:r,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Size,s.TextureCrop,s.Tint,s.Transform,s.Visible,a],initialize:function(t,e,i,n,s){r.call(this,t,"Image"),this._crop=this.resetCropObject(),this.setTexture(n,s),this.setPosition(e,i),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});t.exports=o},function(t,e){t.exports=function(t,e){return t.hasOwnProperty(e)}},function(t,e,i){var n=i(77);t.exports=function(t,e){var i=n(t);for(var s in e)i.hasOwnProperty(s)||(i[s]=e[s]);return i}},,function(t,e,i){var n=i(35),s=i(65),r=i(66),a=i(0),o=i(11),h=i(15),l=i(10),c=i(57),u=new a({Extends:h,Mixins:[o.Depth,o.GetBounds,o.Origin,o.Transform,o.ScrollFactor,o.Visible],initialize:function(t,e,i,s,r){void 0===s&&(s=1),void 0===r&&(r=s),h.call(this,t,"Zone"),this.setPosition(e,i),this.width=s,this.height=r,this.blendMode=n.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,e,i){void 0===i&&(i=!0),this.width=t,this.height=e,this.updateDisplayOrigin();var n=this.input;return i&&n&&!n.customHitArea&&(n.hitArea.width=t,n.hitArea.height=e),this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this},setCircleDropZone:function(t){return this.setDropZone(new s(0,0,t),r)},setRectangleDropZone:function(t,e){return this.setDropZone(new l(0,0,t,e),c)},setDropZone:function(t,e){return void 0===t?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(t,e,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(t,e,i){i.addToRenderList(e)},renderWebGL:function(t,e,i){i.addToRenderList(e)}});t.exports=u},function(t,e){t.exports=function(t){return 2*(t.width+t.height)}},function(t,e){t.exports=function(t){for(var e=t.length-1;0<e;e--){var i=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[i],t[i]=n}return t}},function(t,e,i){t.exports={ADD_ANIMATION:i(724),ANIMATION_COMPLETE:i(725),ANIMATION_COMPLETE_KEY:i(726),ANIMATION_REPEAT:i(727),ANIMATION_RESTART:i(728),ANIMATION_START:i(729),ANIMATION_STOP:i(730),ANIMATION_UPDATE:i(731),PAUSE_ALL:i(732),REMOVE_ANIMATION:i(733),RESUME_ALL:i(734)}},function(t,e,i){var n=i(0),s=i(11),r=i(36),a=i(9),o=i(37),h=i(10),l=i(25),c=i(187),u=i(3),d=new n({Extends:a,Mixins:[s.Alpha,s.Visible],initialize:function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),a.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new h,this.dirty=!0,this._x=t,this._y=e,this._width=i,this._height=n,this._bounds=new h,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new l,this.transparent=!0,this.backgroundColor=c("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new u(i/2,n/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function(t){this.renderList.push(t)},setOrigin:function(t,e){return void 0===t&&(t=.5),void 0===e&&(e=t),this.originX=t,this.originY=e,this},getScroll:function(t,e,i){void 0===i&&(i=new u);var n=.5*this.width,s=.5*this.height;return i.x=t-n,i.y=e-s,this.useBounds&&(i.x=this.clampX(i.x),i.y=this.clampY(i.y)),i},centerOnX:function(t){var e=.5*this.width;return this.midPoint.x=t,this.scrollX=t-e,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(t){var e=.5*this.height;return this.midPoint.y=t,this.scrollY=t-e,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(t,e){return this.centerOnX(t),this.centerOnY(e),this},centerToBounds:function(){var t,e,i;return this.useBounds&&(t=this._bounds,e=.5*this.width,i=.5*this.height,this.midPoint.set(t.centerX,t.centerY),this.scrollX=t.centerX-e,this.scrollY=t.centerY-i),this},centerToSize:function(){return this.scrollX=.5*this.width,this.scrollY=.5*this.height,this},cull:function(t){if(this.disableCull)return t;var e=this.matrix.matrix,i=e[0],n=e[1],s=e[2],r=e[3];if(!(i*r-n*s))return t;for(var a=e[4],o=e[5],h=this.scrollX,l=this.scrollY,c=this.width,u=this.height,d=this.y,f=d+u,p=this.x,g=p+c,m=this.culledObjects,v=t.length,y=m.length=0;y<v;++y){var _,x,w,b,E=t[y];E.hasOwnProperty("width")&&!E.parentContainer?(_=E.width,x=E.height,p<((w=E.x-h*E.scrollFactorX-_*E.originX)+_)*i+((b=E.y-l*E.scrollFactorY-x*E.originY)+x)*s+a&&w*i+b*s+a<g&&d<(w+_)*n+(b+x)*r+o&&w*n+b*r+o<f&&m.push(E)):m.push(E)}return m},getWorldPoint:function(t,e,i){void 0===i&&(i=new u);var n=this.matrix.matrix,s=n[0],r=n[1],a=n[2],o=n[3],h=n[4],l=n[5],c=s*o-r*a;if(!c)return i.x=t,i.y=e,i;var d=o*(c=1/c),f=-r*c,p=-a*c,g=s*c,m=(a*l-o*h)*c,v=(r*h-s*l)*c,y=Math.cos(this.rotation),_=Math.sin(this.rotation),x=this.zoomX,w=this.zoomY,b=this.scrollX,E=this.scrollY,T=t+(b*y-E*_)*x,S=e+(b*_+E*y)*w;return i.x=T*d+S*p+m,i.y=T*f+S*g+v,i},ignore:function(t){var e=this.id;Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var n=t[i];Array.isArray(n)?this.ignore(n):n.isParent?this.ignore(n.getChildren()):n.cameraFilter|=e}return this},preRender:function(){this.renderList.length=0;var t=this.width,e=this.height,i=.5*t,n=.5*e,s=this.zoomX,r=this.zoomY,a=this.matrix,o=t*this.originX,h=e*this.originY,l=this.scrollX,c=this.scrollY;this.useBounds&&(l=this.clampX(l),c=this.clampY(c)),this.roundPixels&&(o=Math.round(o),h=Math.round(h));var u=(this.scrollX=l)+i,d=(this.scrollY=c)+n;this.midPoint.set(u,d);var f=t/s,p=e/r;this.worldView.setTo(u-f/2,d-p/2,f,p),a.applyITRS(this.x+o,this.y+h,this.rotation,s,r),a.translate(-o,-h)},clampX:function(t){var e=this._bounds,i=this.displayWidth,n=e.x+(i-this.width)/2,s=Math.max(n,n+e.width-i);return t<n?t=n:s<t&&(t=s),t},clampY:function(t){var e=this._bounds,i=this.displayHeight,n=e.y+(i-this.height)/2,s=Math.max(n,n+e.height-i);return t<n?t=n:s<t&&(t=s),t},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(t){return void 0===t&&(t=0),this.rotation=r(t),this},setBackgroundColor:function(t){return void 0===t&&(t="rgba(0,0,0,0)"),this.backgroundColor=c(t),this.transparent=0===this.backgroundColor.alpha,this},setBounds:function(t,e,i,n,s){return void 0===s&&(s=!1),this._bounds.setTo(t,e,i,n),this.dirty=!0,this.useBounds=!0,s?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(t){void 0===t&&(t=new h);var e=this._bounds;return t.setTo(e.x,e.y,e.width,e.height),t},setName:function(t){return void 0===t&&(t=""),this.name=t,this},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setRotation:function(t){return void 0===t&&(t=0),this.rotation=t,this},setRoundPixels:function(t){return this.roundPixels=t,this},setScene:function(t){this.scene&&this._customViewport&&this.sceneManager.customViewports--;var e=(this.scene=t).sys;return this.sceneManager=e.game.scene,this.scaleManager=e.scale,this.cameraManager=e.cameras,this.updateSystem(),this},setScroll:function(t,e){return void 0===e&&(e=t),this.scrollX=t,this.scrollY=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},setViewport:function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},setZoom:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),0===t&&(t=.001),0===e&&(e=.001),this.zoomX=t,this.zoomY=e,this},setMask:function(t,e){return void 0===e&&(e=!0),this.mask=t,this._maskCamera=e?this.cameraManager.default:this,this},clearMask:function(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var t={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(t.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),t},update:function(){},updateSystem:function(){var t,e;this.scaleManager&&(t=0!==this._x||0!==this._y||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,e=this.sceneManager,t&&!this._customViewport?e.customViewports++:!t&&this._customViewport&&e.customViewports--,this.dirty=!0,this._customViewport=t)},destroy:function(){this.emit(o.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(t){this._x=t,this.updateSystem()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.updateSystem()}},width:{get:function(){return this._width},set:function(t){this._width=t,this.updateSystem()}},height:{get:function(){return this._height},set:function(t){this._height=t,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(t){this._scrollX=t,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(t){this._scrollY=t,this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(t){this._zoomX=t,this._zoomY=t,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(t){this._zoomX=t,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(t){this._zoomY=t,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=t,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});t.exports=d},function(t,e,i){var n=i(334),s=i(335),r=i(336),a=i(337),o=i(338),h=i(339),l=i(340),c=i(341),u=i(342),d=i(343),f=i(344),p=i(345);t.exports={Power0:l,Power1:c.Out,Power2:a.Out,Power3:u.Out,Power4:d.Out,Linear:l,Quad:c.Out,Cubic:a.Out,Quart:u.Out,Quint:d.Out,Sine:f.Out,Expo:h.Out,Circ:r.Out,Elastic:o.Out,Back:n.Out,Bounce:s.Out,Stepped:p,"Quad.easeIn":c.In,"Cubic.easeIn":a.In,"Quart.easeIn":u.In,"Quint.easeIn":d.In,"Sine.easeIn":f.In,"Expo.easeIn":h.In,"Circ.easeIn":r.In,"Elastic.easeIn":o.In,"Back.easeIn":n.In,"Bounce.easeIn":s.In,"Quad.easeOut":c.Out,"Cubic.easeOut":a.Out,"Quart.easeOut":u.Out,"Quint.easeOut":d.Out,"Sine.easeOut":f.Out,"Expo.easeOut":h.Out,"Circ.easeOut":r.Out,"Elastic.easeOut":o.Out,"Back.easeOut":n.Out,"Bounce.easeOut":s.Out,"Quad.easeInOut":c.InOut,"Cubic.easeInOut":a.InOut,"Quart.easeInOut":u.InOut,"Quint.easeInOut":d.InOut,"Sine.easeInOut":f.InOut,"Expo.easeInOut":h.InOut,"Circ.easeInOut":r.InOut,"Elastic.easeInOut":o.InOut,"Back.easeInOut":n.InOut,"Bounce.easeInOut":s.InOut}},function(t,e){t.exports=function(t,e,i){return(e-t)*i+t}},function(t,e,i){var n,s=i(105),r={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};t.exports=(n=navigator.userAgent,/Edge\/\d+/.test(n)?r.edge=!0:/Chrome\/(\d+)/.test(n)&&!s.windowsPhone?(r.chrome=!0,r.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(n)?(r.firefox=!0,r.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(n)&&s.iOS?r.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(n)?(r.ie=!0,r.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(n)?r.opera=!0:/Safari/.test(n)&&!s.windowsPhone?r.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(n)&&(r.ie=!0,r.trident=!0,r.tridentVersion=parseInt(RegExp.$1,10),r.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(n)&&(r.silk=!0),r)},function(t,e){t.exports=function(t,e){return Math.random()*(e-t)+t}},function(t,e){t.exports=function(t,e){return 0<t&&0==(t&t-1)&&0<e&&0==(e&e-1)}},function(t,e){t.exports=function(t,e,i,n){return void 0===i&&(i=0),0===e?t:(t-=i,t=e*Math.ceil(t/e),n?(i+t)/e:i+t)}},function(t,e,i){var n=new(i(0))({initialize:function(t,e,i,n){this.x=0,this.y=0,this.z=0,this.w=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=e||0,this.z=i||0,this.w=n||0)},clone:function(){return new n(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this.w=t.w||0,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},set:function(t,e,i,n){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=e||0,this.z=i||0,this.w=n||0),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this.w+=t.w||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this.w-=t.w||0,this},scale:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function(){var t=this.x,e=this.y,i=this.z,n=this.w;return Math.sqrt(t*t+e*e+i*i+n*n)},lengthSq:function(){var t=this.x,e=this.y,i=this.z,n=this.w;return t*t+e*e+i*i+n*n},normalize:function(){var t=this.x,e=this.y,i=this.z,n=this.w,s=t*t+e*e+i*i+n*n;return 0<s&&(s=1/Math.sqrt(s),this.x=t*s,this.y=e*s,this.z=i*s,this.w=n*s),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,e){void 0===e&&(e=0);var i=this.x,n=this.y,s=this.z,r=this.w;return this.x=i+e*(t.x-i),this.y=n+e*(t.y-n),this.z=s+e*(t.z-s),this.w=r+e*(t.w-r),this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this.w*=t.w||1,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this.w/=t.w||1,this},distance:function(t){var e=t.x-this.x,i=t.y-this.y,n=t.z-this.z||0,s=t.w-this.w||0;return Math.sqrt(e*e+i*i+n*n+s*s)},distanceSq:function(t){var e=t.x-this.x,i=t.y-this.y,n=t.z-this.z||0,s=t.w-this.w||0;return e*e+i*i+n*n+s*s},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(t){var e=this.x,i=this.y,n=this.z,s=this.w,r=t.val;return this.x=r[0]*e+r[4]*i+r[8]*n+r[12]*s,this.y=r[1]*e+r[5]*i+r[9]*n+r[13]*s,this.z=r[2]*e+r[6]*i+r[10]*n+r[14]*s,this.w=r[3]*e+r[7]*i+r[11]*n+r[15]*s,this},transformQuat:function(t){var e=this.x,i=this.y,n=this.z,s=t.x,r=t.y,a=t.z,o=t.w,h=o*e+r*n-a*i,l=o*i+a*e-s*n,c=o*n+s*i-r*e,u=-s*e-r*i-a*n;return this.x=h*o+u*-s+l*-a-c*-r,this.y=l*o+u*-r+c*-s-h*-a,this.z=c*o+u*-a+h*-r-l*-s,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});n.prototype.sub=n.prototype.subtract,n.prototype.mul=n.prototype.multiply,n.prototype.div=n.prototype.divide,n.prototype.dist=n.prototype.distance,n.prototype.distSq=n.prototype.distanceSq,n.prototype.len=n.prototype.length,n.prototype.lenSq=n.prototype.lengthSq,t.exports=n},function(t,e,i){var n=i(0),s=i(91),r=new n({initialize:function(t,e,i,n,s,r,a){void 0===n&&(n=1),void 0===s&&(s=0),void 0===r&&(r=!0),void 0===a&&(a=!1),this.renderer=t,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=n,this.minFilter=s,this.autoClear=r,this.autoResize=!1,this.resize(e,i),a&&this.setAutoResize(!0)},setAutoResize:function(t){return t&&!this.autoResize?(this.renderer.on(s.RESIZE,this.resize,this),this.autoResize=!0):!t&&this.autoResize&&(this.renderer.off(s.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(t,e){var i,n=t*this.scale,s=e*this.scale;return n===this.width&&s===this.height||((i=this.renderer).deleteFramebuffer(this.framebuffer),i.deleteTexture(this.texture),t*=this.scale,e*=this.scale,(t=Math.round(t))<=0&&(t=1),(e=Math.round(e))<=0&&(e=1),this.texture=i.createTextureFromSource(null,t,e,this.minFilter),this.framebuffer=i.createFramebuffer(t,e,this.texture,!1),this.width=t,this.height=e),this},bind:function(t,e,i){var n;void 0===t&&(t=!1),t&&this.renderer.flush(),e&&i&&this.resize(e,i),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),t&&this.adjustViewport(),this.autoClear&&((n=this.renderer.gl).clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT))},adjustViewport:function(){var t=this.renderer.gl;t.viewport(0,0,this.width,this.height),t.disable(t.SCISSOR_TEST)},clear:function(){var t=this.renderer,e=t.gl;t.pushFramebuffer(this.framebuffer),e.disable(e.SCISSOR_TEST),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),t.popFramebuffer(),t.resetScissor()},unbind:function(t){void 0===t&&(t=!1);var e=this.renderer;return t&&e.flush(),e.popFramebuffer()},destroy:function(){var t=this.renderer;t.deleteFramebuffer(this.framebuffer),t.deleteTexture(this.texture),t.off(s.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});t.exports=r},function(t,e){t.exports=function(t,e){var i;if(e)"string"==typeof e?i=document.getElementById(e):"object"==typeof e&&1===e.nodeType&&(i=e);else if(t.parentElement||null===e)return t;return(i=i||document.body).appendChild(t),t}},function(t,e){t.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175}},function(t,e){t.exports={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9}},function(t,e,i){var n=i(0),s=i(77),r=i(9),a=i(70),o=i(22),h=i(1),l=i(207),c=i(428),u=new n({Extends:r,initialize:function(t){r.call(this),this.game=t,this.jsonCache=t.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,t.events.on(o.BLUR,this.onGameBlur,this),t.events.on(o.FOCUS,this.onGameFocus,this),t.events.on(o.PRE_STEP,this.update,this),t.events.once(o.DESTROY,this.destroy,this)},add:h,addAudioSprite:function(t,e){void 0===e&&(e={});var i,n,r=this.add(t,e);for(var a in r.spritemap=this.jsonCache.get(t).spritemap,r.spritemap)r.spritemap.hasOwnProperty(a)&&(i=s(e),n=r.spritemap[a],i.loop=!!n.hasOwnProperty("loop")&&n.loop,r.addMarker({name:a,start:n.start,duration:n.end-n.start,config:i}));return r},get:function(t){return c(this.sounds,"key",t)},getAll:function(t){return l(this.sounds,"key",t)},play:function(t,e){var i=this.add(t);return i.once(a.COMPLETE,i.destroy,i),e?e.name?(i.addMarker(e),i.play(e.name)):i.play(e):i.play()},playAudioSprite:function(t,e,i){var n=this.addAudioSprite(t);return n.once(a.COMPLETE,n.destroy,n),n.play(e,i)},remove:function(t){var e=this.sounds.indexOf(t);return-1!==e&&(t.destroy(),this.sounds.splice(e,1),!0)},removeAll:function(){this.sounds.forEach((function(t){t.destroy()})),this.sounds.length=0},removeByKey:function(t){for(var e=0,i=this.sounds.length-1;0<=i;i--){var n=this.sounds[i];n.key===t&&(n.destroy(),this.sounds.splice(i,1),e++)}return e},pauseAll:function(){this.forEachActiveSound((function(t){t.pause()})),this.emit(a.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound((function(t){t.resume()})),this.emit(a.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound((function(t){t.stop()})),this.emit(a.STOP_ALL,this)},stopByKey:function(t){var e=0;return this.getAll(t).forEach((function(t){t.stop()&&e++})),e},unlock:h,onBlur:h,onFocus:h,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(t,e){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(a.UNLOCKED,this));for(var i=this.sounds.length-1;0<=i;i--)this.sounds[i].pendingRemove&&this.sounds.splice(i,1);this.sounds.forEach((function(i){i.update(t,e)}))},destroy:function(){this.game.events.off(o.BLUR,this.onGameBlur,this),this.game.events.off(o.FOCUS,this.onGameFocus,this),this.game.events.off(o.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(t,e){var i=this;this.sounds.forEach((function(n,s){n&&!n.pendingRemove&&t.call(e||i,n,s,i.sounds)}))},setRate:function(t){return this.rate=t,this},rate:{get:function(){return this._rate},set:function(t){this._rate=t,this.forEachActiveSound((function(t){t.calculateRate()})),this.emit(a.GLOBAL_RATE,this,t)}},setDetune:function(t){return this.detune=t,this},detune:{get:function(){return this._detune},set:function(t){this._detune=t,this.forEachActiveSound((function(t){t.calculateRate()})),this.emit(a.GLOBAL_DETUNE,this,t)}}});t.exports=u},function(t,e,i){var n=i(0),s=i(9),r=i(70),a=i(17),o=i(1),h=new n({Extends:s,initialize:function(t,e,i){s.call(this),this.manager=t,this.key=e,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=a(this.config,i),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(t){return!(!t||!t.name||"string"!=typeof t.name||(this.markers[t.name]?(console.error("addMarker "+t.name+" already exists in Sound"),1):(t=a(!0,{name:"",start:0,duration:this.totalDuration-(t.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},t),this.markers[t.name]=t,0)))},updateMarker:function(t){return!(!t||!t.name||"string"!=typeof t.name||(this.markers[t.name]?(this.markers[t.name]=a(!0,this.markers[t.name],t),0):(console.warn("Audio Marker: "+t.name+" missing in Sound: "+this.key),1)))},removeMarker:function(t){var e=this.markers[t];return e?(this.markers[t]=null,e):null},play:function(t,e){if(void 0===t&&(t=""),"object"==typeof t&&(e=t,t=""),"string"!=typeof t)return!1;if(t){if(!this.markers[t])return console.warn("Marker: "+t+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[t],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}else this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;return this.resetConfig(),this.currentConfig=a(this.currentConfig,e),this.isPlaying=!0,!(this.isPaused=!1)},pause:function(){return!(this.isPaused||!this.isPlaying)&&(this.isPlaying=!1,this.isPaused=!0)},resume:function(){return!(!this.isPaused||this.isPlaying||(this.isPlaying=!0,this.isPaused=!1))},stop:function(){return!(!this.isPaused&&!this.isPlaying||(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),0))},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:o,calculateRate:function(){var t=this.currentConfig.detune+this.manager.detune,e=Math.pow(1.0005777895065548,t);this.totalRate=this.currentConfig.rate*this.manager.rate*e},destroy:function(){this.pendingRemove||(this.emit(r.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});t.exports=h},function(t,e,i){var n=i(209),s=i(435);t.exports=function(t,e){if(void 0===e&&(e=90),!n(t))return null;if("string"!=typeof e&&(e=(e%360+360)%360),90===e||-270===e||"rotateLeft"===e)(t=s(t)).reverse();else if(-90===e||270===e||"rotateRight"===e)t.reverse(),t=s(t);else if(180===Math.abs(e)||"rotate180"===e){for(var i=0;i<t.length;i++)t[i].reverse();t.reverse()}return t}},function(t,e,i){var n=i(0),s=i(18),r=i(11),a=i(15),o=i(1043),h=i(1044),l=i(212),c=i(10),u=i(1045),d=new n({Extends:a,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Texture,r.Tint,r.Transform,r.Visible,u],initialize:function(t,e,i,n,s,r,h){void 0===s&&(s=""),void 0===h&&(h=0),a.call(this,t,"BitmapText"),this.font=n;var l=this.scene.sys.cache.bitmapFont.get(n);l||console.warn("Invalid BitmapText key: "+n),this.fontData=l.data,this._text="",this._fontSize=r||this.fontData.size,this._letterSpacing=0,this._align=h,this._bounds=o(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=l.fromAtlas,this.setTexture(l.texture,l.frame),this.setPosition(e,i),this.setOrigin(0,0),this.initPipeline(),this.setText(s)},setLeftAlign:function(){return this._align=d.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=d.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=d.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(t){return this._fontSize=t,this._dirty=!0,this},setLetterSpacing:function(t){return void 0===t&&(t=0),this._letterSpacing=t,this._dirty=!0,this},setText:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this.text&&(this._text=t.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(t,e,i,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=.5),this.dropShadowX=t,this.dropShadowY=e,this.dropShadowColor=i,this.dropShadowAlpha=n,this},setCharacterTint:function(t,e,i,n,r,a,o){void 0===t&&(t=0),void 0===e&&(e=1),void 0===i&&(i=!1),void 0===n&&(n=-1),void 0===r&&(o=a=r=n);var h=this.text.length;-1===e&&(e=h),t<0&&(t=h+t),t=s(t,0,h-1);for(var l=s(t+e,t,h),c=this.charColors,u=t;u<l;u++){var d,f=c[u];-1===n?c[u]=null:(d=i?1:0,f?(f.tintEffect=d,f.tintTL=n,f.tintTR=r,f.tintBL=a,f.tintBR=o):c[u]={tintEffect:d,tintTL:n,tintTR:r,tintBL:a,tintBR:o})}return this},setWordTint:function(t,e,i,n,s,r,a){void 0===e&&(e=1);for(var o=this.getTextBounds().words,h="number"==typeof t,l=0,c=0;c<o.length;c++){var u=o[c];if((h&&c===t||!h&&u.word===t)&&(this.setCharacterTint(u.i,u.word.length,i,n,s,r,a),++l===e))return this}return this},getTextBounds:function(t){var e=this._bounds;return(this._dirty||t||this.scaleX!==e.scaleX||this.scaleY!==e.scaleY)&&(o(this,t,!0,e),this._dirty=!1),e},getCharacterAt:function(t,e,i){for(var n=this.getLocalPoint(t,e,null,i),s=this.getTextBounds().characters,r=new c,a=0;a<s.length;a++){var o=s[a];if(r.setTo(o.x,o.t,o.r-o.x,o.b),r.contains(n.x,n.y))return o}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(t,e,i){var n;return void 0===e&&(e=this._fontSize),void 0===i&&(i=this._align),t===this.font||(n=this.scene.sys.cache.bitmapFont.get(t))&&(this.font=t,this.fontData=n.data,this._fontSize=e,this._align=i,this.fromAtlas=!0===n.fromAtlas,this.setTexture(n.texture,n.frame),o(this,!1,!0,this._bounds)),this},setMaxWidth:function(t,e){return this._maxWidth=t,this._dirty=!0,void 0!==e&&(this.wordWrapCharCode=e),this},align:{set:function(t){this._align=t,this._dirty=!0},get:function(){return this._align}},text:{set:function(t){this.setText(t)},get:function(){return this._text}},fontSize:{set:function(t){this._fontSize=t,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(t){this._letterSpacing=t,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(t){this._maxWidth=t,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var t=r.ToJSON(this),e={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return t.data=e,t},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});d.ALIGN_LEFT=0,d.ALIGN_CENTER=1,d.ALIGN_RIGHT=2,d.ParseFromAtlas=h,d.ParseXMLBitmapFont=l,t.exports=d},function(t,e,i){var n=new(i(0))({initialize:function(t){if(this.entries=[],Array.isArray(t))for(var e=0;e<t.length;e++)this.set(t[e])},set:function(t){return-1===this.entries.indexOf(t)&&this.entries.push(t),this},get:function(t,e){for(var i=0;i<this.entries.length;i++){var n=this.entries[i];if(n[t]===e)return n}},getArray:function(){return this.entries.slice(0)},delete:function(t){var e=this.entries.indexOf(t);return-1<e&&this.entries.splice(e,1),this},dump:function(){console.group("Set");for(var t=0;t<this.entries.length;t++){var e=this.entries[t];console.log(e)}console.groupEnd()},each:function(t,e){var i,n=this.entries.slice(),s=n.length;if(e)for(i=0;i<s&&!1!==t.call(e,n[i],i);i++);else for(i=0;i<s&&!1!==t(n[i],i);i++);return this},iterate:function(t,e){var i,n=this.entries.length;if(e)for(i=0;i<n&&!1!==t.call(e,this.entries[i],i);i++);else for(i=0;i<n&&!1!==t(this.entries[i],i);i++);return this},iterateLocal:function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var n=this.entries.length;for(i=0;i<n;i++){var s=this.entries[i];s[t].apply(s,e)}return this},clear:function(){return this.entries.length=0,this},contains:function(t){return-1<this.entries.indexOf(t)},union:function(t){var e=new n;return t.entries.forEach((function(t){e.set(t)})),this.entries.forEach((function(t){e.set(t)})),e},intersect:function(t){var e=new n;return this.entries.forEach((function(i){t.contains(i)&&e.set(i)})),e},difference:function(t){var e=new n;return this.entries.forEach((function(i){t.contains(i)||e.set(i)})),e},size:{get:function(){return this.entries.length},set:function(t){return t<this.entries.length?this.entries.length=t:this.entries.length}}});t.exports=n},function(t,e,i){var n=i(0),s=i(11),r=i(15),a=i(189),o=i(92),h=i(1182),l=new n({Extends:r,Mixins:[s.AlphaSingle,s.BlendMode,s.Depth,s.GetBounds,s.Mask,s.Pipeline,s.ScrollFactor,s.Transform,s.Visible,h],initialize:function(t,e,i,n,s,h,l){void 0===n&&(n=16777215),void 0===s&&(s=128),void 0===h&&(h=1),void 0===l&&(l=.1),r.call(this,t,"PointLight"),this.initPipeline(o.POINTLIGHT_PIPELINE),this.setPosition(e,i),this.color=a(n),this.intensity=h,this.attenuation=l,this.width=2*s,this.height=2*s,this._radius=s},radius:{get:function(){return this._radius},set:function(t){this._radius=t,this.width=2*t,this.height=2*t}},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});t.exports=l},function(t,e){t.exports=function(t,e){var i=e.width/2,n=e.height/2,s=Math.abs(t.x-e.x-i),r=Math.abs(t.y-e.y-n),a=i+t.radius,o=n+t.radius;if(a<s||o<r)return!1;if(s<=i||r<=n)return!0;var h=s-i,l=r-n;return h*h+l*l<=t.radius*t.radius}},function(t,e){t.exports=function(t,e){return!(t.width<=0||t.height<=0||e.width<=0||e.height<=0||t.right<e.x||t.bottom<e.y||t.x>e.right||t.y>e.bottom)}},function(t,e,i){var n=i(6),s={},r={register:function(t,e,i,n,r){s[t]={plugin:e,mapping:i,settingsKey:n,configKey:r}},getPlugin:function(t){return s[t]},install:function(t){var e=t.scene.sys,i=e.settings.input,r=e.game.config;for(var a in s){var o=s[a].plugin,h=s[a].mapping,l=s[a].settingsKey,c=s[a].configKey;n(i,l,r[c])&&(t[h]=new o(t))}},remove:function(t){s.hasOwnProperty(t)&&delete s[t]}};t.exports=r},function(t,e,i){t.exports={ANY_KEY_DOWN:i(1323),ANY_KEY_UP:i(1324),COMBO_MATCH:i(1325),DOWN:i(1326),KEY_DOWN:i(1327),KEY_UP:i(1328),UP:i(1329)}},function(t,e){t.exports=function(t,e){return!!t.url&&(t.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?t.url:e+t.url)}},function(t,e){t.exports=function(t,e,i,n,s,r){return void 0===t&&(t=""),void 0===e&&(e=!0),void 0===i&&(i=""),void 0===n&&(n=""),void 0===s&&(s=0),void 0===r&&(r=!1),{responseType:t,async:e,user:i,password:n,timeout:s,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:r}}},function(t,e,i){var n=i(0),s=i(243),r=i(73),a=new n({Extends:r,Mixins:[s.Acceleration,s.Angular,s.Bounce,s.Debug,s.Drag,s.Enable,s.Friction,s.Gravity,s.Immovable,s.Mass,s.Pushable,s.Size,s.Velocity],initialize:function(t,e,i,n,s){r.call(this,t,e,i,n,s),this.body=null}});t.exports=a},function(t,e,i){var n=i(119);t.exports=function(t,e,i,s){if(void 0===i&&(i=!1),n(t,e,s)){var r=s.data[e][t]||null;return r&&(-1!==r.index||i)?r:null}return null}},function(t,e){t.exports=function(t,e,i,n){var s,r,a,o=t.data,h=t.width,l=t.height,c=t.tilemapLayer,u=Math.max(0,e.left),d=Math.min(h,e.right),f=Math.max(0,e.top),p=Math.min(l,e.bottom);if(0===i)for(r=f;r<p;r++)for(s=u;o[r]&&s<d;s++)(a=o[r][s])&&-1!==a.index&&a.visible&&0!==a.alpha&&n.push(a);else if(1===i)for(r=f;r<p;r++)for(s=d;o[r]&&u<=s;s--)(a=o[r][s])&&-1!==a.index&&a.visible&&0!==a.alpha&&n.push(a);else if(2===i)for(r=p;f<=r;r--)for(s=u;o[r]&&s<d;s++)(a=o[r][s])&&-1!==a.index&&a.visible&&0!==a.alpha&&n.push(a);else if(3===i)for(r=p;f<=r;r--)for(s=d;o[r]&&u<=s;s--)(a=o[r][s])&&-1!==a.index&&a.visible&&0!==a.alpha&&n.push(a);return c.tilesDrawn=n.length,c.tilesTotal=h*l,n}},function(t,e){t.exports=function(t,e,i){var n=i.collideIndexes.indexOf(t);e&&-1===n?i.collideIndexes.push(t):e||-1===n||i.collideIndexes.splice(n,1)}},function(t,e,i){var n=i(2);t.exports=function(t,e,i){if(!e)return{i:0,layers:t.layers,name:"",opacity:1,visible:!0,x:0,y:0};var s=e.x+n(e,"startx",0)*t.tilewidth+n(e,"offsetx",0),r=e.y+n(e,"starty",0)*t.tileheight+n(e,"offsety",0);return{i:0,layers:e.layers,name:i.name+e.name+"/",opacity:i.opacity*e.opacity,visible:i.visible&&e.visible,x:i.x+s,y:i.y+r}}},function(t,e){t.exports=function(t,e,i){return t.hasOwnProperty(e)?"function"==typeof t[e]?function(i,n,s,r,a,o){return t[e](i,n,s,r,a,o)}:function(){return t[e]}:"function"==typeof i?i:function(){return i}}},function(t,e,i){var n=i(265),s=i(13),r=i(99),a=i(80),o=i(162),h=i(583),l=i(263),c=i(6),u=i(264),d=i(266),f=i(268);t.exports=function(t,e,i){void 0===i&&(i=n);for(var p=i.targets?i.targets:l(e),g=h(e),m=o(e,"delay",i.delay),v=o(e,"duration",i.duration),y=c(e,"easeParams",i.easeParams),_=a(c(e,"ease",i.ease),y),x=o(e,"hold",i.hold),w=o(e,"repeat",i.repeat),b=o(e,"repeatDelay",i.repeatDelay),E=r(e,"yoyo",i.yoyo),T=r(e,"flipX",i.flipX),S=r(e,"flipY",i.flipY),A=[],O=0;O<g.length;O++)for(var C=g[O].key,P=g[O].value,L=0;L<p.length;L++){var R=u(C,P),I=f(p[L],L,C,R.getEnd,R.getStart,R.getActive,a(c(P,"ease",_),c(P,"easeParams",y)),o(P,"delay",m),o(P,"duration",v),r(P,"yoyo",E),o(P,"hold",x),o(P,"repeat",w),o(P,"repeatDelay",b),r(P,"flipX",T),r(P,"flipY",S));A.push(I)}var M=new d(t,A,p);M.offset=s(e,"offset",null),M.completeDelay=s(e,"completeDelay",0),M.loop=Math.round(s(e,"loop",0)),M.loopDelay=Math.round(s(e,"loopDelay",0)),M.paused=r(e,"paused",!1),M.useFrames=r(e,"useFrames",!1);for(var D=c(e,"callbackScope",M),k=[M,null],N=d.TYPES,F=0;F<N.length;F++){var G,B,z=N[F],U=c(e,z,!1);U&&(G=c(e,z+"Scope",D),B=c(e,z+"Params",[]),M.setCallback(z,U,k.concat(B),G))}return M}},function(t,e,i){var n=i(0),s=i(102),r=i(2),a=i(132),o=i(185),h=new n({initialize:function(t){this.parent=t,this.animationManager=t.scene.sys.anims,this.animationManager.on(a.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(t){var e=this.parent;if(void 0===t)return this.nextAnimsQueue.length=0,this.nextAnim=null,e;Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var n=t[i];null===this.nextAnim?this.nextAnim=n:this.nextAnimsQueue.push(n)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(t){this.isPlaying&&this.stop();var e,i,n,s,a,o=this.animationManager,h="string"==typeof t?t:r(t,"key",null),l=this.exists(h)?this.get(h):o.get(h);return l?(e=(this.currentAnim=l).getTotalFrames(),i=r(t,"frameRate",l.frameRate),n=r(t,"duration",l.duration),l.calculateDuration(this,e,n,i),this.delay=r(t,"delay",l.delay),this.repeat=r(t,"repeat",l.repeat),this.repeatDelay=r(t,"repeatDelay",l.repeatDelay),this.yoyo=r(t,"yoyo",l.yoyo),this.showOnStart=r(t,"showOnStart",l.showOnStart),this.hideOnComplete=r(t,"hideOnComplete",l.hideOnComplete),this.skipMissedFrames=r(t,"skipMissedFrames",l.skipMissedFrames),this.timeScale=r(t,"timeScale",this.timeScale),(s=r(t,"startFrame",0))>l.getTotalFrames()&&(s=0),a=l.frames[s],0!==s||this.forward||(a=l.getLastFrame()),this.currentFrame=a):console.warn("Missing animation: "+h),this.parent},pause:function(t){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),void 0!==t&&this.setCurrentFrame(t),this.parent},resume:function(t){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),void 0!==t&&this.setCurrentFrame(t),this.parent},playAfterDelay:function(t,e){var i,n;return this.isPlaying?(i=this.nextAnim,n=this.nextAnimsQueue,i&&n.unshift(i),this.nextAnim=t,this._pendingStop=1,this._pendingStopValue=e):(this.delayCounter=e,this.play(t,!0)),this.parent},playAfterRepeat:function(t,e){var i,n;return void 0===e&&(e=1),this.isPlaying?(i=this.nextAnim,n=this.nextAnimsQueue,i&&n.unshift(i),-1!==this.repeatCounter&&e>this.repeatCounter&&(e=this.repeatCounter),this.nextAnim=t,this._pendingStop=2,this._pendingStopValue=e):this.play(t),this.parent},play:function(t,e){void 0===e&&(e=!1);var i=this.currentAnim,n=this.parent,s="string"==typeof t?t:t.key;if(e&&this.isPlaying&&i.key===s)return n;if(i&&this.isPlaying){var r=this.animationManager.getMix(i.key,t);if(0<r)return this.playAfterDelay(t,r)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(t)},playReverse:function(t,e){void 0===e&&(e=!1);var i="string"==typeof t?t:t.key;return e&&this.isPlaying&&this.currentAnim.key===i?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(t))},startAnimation:function(t){this.load(t);var e=this.currentAnim,i=this.parent;return e&&(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat,e.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,0===this.delayCounter&&this.handleStart()),i},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(a.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(a.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(a.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(a.ANIMATION_COMPLETE,a.ANIMATION_COMPLETE_KEY)},emitEvents:function(t,e){var i=this.currentAnim,n=this.currentFrame,s=this.parent,r=n.textureFrame;s.emit(t,i,n,s,r),e&&s.emit(e+i.key,i,n,s,r)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var t=this.currentFrame;if(!t)return 0;var e=t.progress;return this.inReverse&&(e*=-1),e},setProgress:function(t){return this.forward||(t=1-t),this.setCurrentFrame(this.currentAnim.getFrameByProgress(t)),this.parent},setRepeat:function(t){return this.repeatCounter=-1===t?Number.MAX_VALUE:t,this.parent},globalRemove:function(t,e){void 0===e&&(e=this.currentAnim),this.isPlaying&&e.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var i=this.currentAnim,n=this.parent;return i?(e&&(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat),i.getFirstTick(this),this.emitEvents(a.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!t,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(i.frames[0]),this.parent):n},complete:function(){var t;return this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim&&(t=this.nextAnim,this.nextAnim=0<this.nextAnimsQueue.length?this.nextAnimsQueue.shift():null,this.play(t)),this.parent},stop:function(){var t;return this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim&&(t=this.nextAnim,this.nextAnim=this.nextAnimsQueue.shift(),this.play(t)),this.parent},stopAfterDelay:function(t){return this._pendingStop=1,this._pendingStopValue=t,this.parent},stopAfterRepeat:function(t){return void 0===t&&(t=1),-1!==this.repeatCounter&&t>this.repeatCounter&&(t=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=t,this.parent},stopOnFrame:function(t){return this._pendingStop=3,this._pendingStopValue=t,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(t,e){var i=this.currentAnim;if(this.isPlaying&&i&&!i.paused){if(this.accumulator+=e*this.timeScale,1===this._pendingStop&&(this._pendingStopValue-=e,this._pendingStopValue<=0))return this.stop();if(this.hasStarted){if(this.accumulator>=this.nextTick&&(this.forward?i.nextFrame(this):i.previousFrame(this),this.isPlaying&&0===this._pendingStop&&this.skipMissedFrames&&this.accumulator>this.nextTick))for(var n=0;this.forward?i.nextFrame(this):i.previousFrame(this),n++,this.isPlaying&&this.accumulator>this.nextTick&&n<60;);}else this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart())}},setCurrentFrame:function(t){var e=this.parent;return this.currentFrame=t,e.texture=t.frame.texture,e.frame=t.frame,e.isCropped&&e.frame.updateCropUVs(e._crop,e.flipX,e.flipY),t.setAlpha&&(e.alpha=t.alpha),e.setSizeToFrame(),e._originComponent&&(t.frame.customPivot?e.setOrigin(t.frame.pivotX,t.frame.pivotY):e.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(a.ANIMATION_UPDATE),3===this._pendingStop&&this._pendingStopValue===t&&this.stop()),e},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(t){return this.anims?this.anims.get(t):null},exists:function(t){return!!this.anims&&this.anims.has(t)},create:function(t){var e=t.key,i=!1;return e&&((i=this.get(e))||(i=new o(this,e,t),this.anims||(this.anims=new s),this.anims.set(e,i))),i},generateFrameNames:function(t,e){return this.animationManager.generateFrameNames(t,e)},generateFrameNumbers:function(t,e){return this.animationManager.generateFrameNumbers(t,e)},remove:function(t){var e=this.get(t);return e&&(this.currentAnim===e&&this.stop(),this.anims.delete(t)),e},destroy:function(){this.animationManager.off(a.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});t.exports=h},,,function(t,e,i){var n=i(175),s=i(92),r=i(74),a={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(t){void 0===t&&(t=s.MULTI_PIPELINE);var e=this.scene.sys.renderer;if(!e)return!1;var i=e.pipelines;if(this.postPipelines=[],this.pipelineData={},i){var n=i.get(t);if(n)return this.defaultPipeline=n,this.pipeline=n,!0}return!1},setPipeline:function(t,e,i){var s=this.scene.sys.renderer;if(!s)return this;var r,a=s.pipelines;return a&&((r=a.get(t))&&(this.pipeline=r),e&&(this.pipelineData=i?n(e):e)),this},setPostPipeline:function(t,e,i){var s=this.scene.sys.renderer;if(!s)return this;var r=s.pipelines;if(r){Array.isArray(t)||(t=[t]);for(var a=0;a<t.length;a++){var o=r.getPostPipeline(t[a],this);o&&this.postPipelines.push(o)}e&&(this.pipelineData=i?n(e):e)}return this.hasPostPipeline=0<this.postPipelines.length,this},setPipelineData:function(t,e){var i=this.pipelineData;return void 0===e?delete i[t]:i[t]=e,this},getPostPipeline:function(t){for(var e=this.postPipelines,i=[],n=0;n<e.length;n++){var s=e[n];("string"==typeof t&&s.name===t||s instanceof t)&&i.push(s)}return 1===i.length?i[0]:i},resetPipeline:function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),this.pipeline=this.defaultPipeline,t&&(this.postPipelines=[],this.hasPostPipeline=!1),e&&(this.pipelineData={}),null!==this.pipeline},resetPostPipeline:function(t){void 0===t&&(t=!1);for(var e=this.postPipelines,i=0;i<e.length;i++)e[i].destroy();this.postPipelines=[],this.hasPostPipeline=!1,t&&(this.pipelineData={})},removePostPipeline:function(t){for(var e=this.postPipelines,i=e.length-1;0<=i;i--){var n=e[i];("string"==typeof t&&n.name===t||"string"!=typeof t&&n instanceof t)&&(n.destroy(),r(e,i))}return this.hasPostPipeline=0<this.postPipelines.length,this},getPipelineName:function(){return this.pipeline.name}};t.exports=a},function(t,e){t.exports={DEFAULT:0,LINEAR:0,NEAREST:1}},function(t,e,i){var n=i(4);t.exports=function(t,e,i){return void 0===i&&(i=new n),i.x=t.x+t.radius*Math.cos(e),i.y=t.y+t.radius*Math.sin(e),i}},function(t,e,i){var n=i(4);t.exports=function(t,e){void 0===e&&(e=new n);var i=2*Math.PI*Math.random(),s=Math.random()+Math.random(),r=1<s?2-s:s,a=r*Math.cos(i),o=r*Math.sin(i);return e.x=t.x+a*t.radius,e.y=t.y+o*t.radius,e}},function(t,e,i){var n=i(130),s=i(4);t.exports=function(t,e,i){if(void 0===i&&(i=new s),e<=0||1<=e)return i.x=t.x,i.y=t.y,i;var r=n(t)*e;return.5<e?(r-=t.width+t.height)<=t.width?(i.x=t.right-r,i.y=t.bottom):(i.x=t.x,i.y=t.bottom-(r-t.width)):r<=t.width?(i.x=t.x+r,i.y=t.y):(i.x=t.right,i.y=t.y+(r-t.width)),i}},function(t,e,i){var n=i(67),s=i(4);t.exports=function(t,e,i,r){void 0===r&&(r=[]),!e&&0<i&&(e=n(t)/i);for(var a=t.x1,o=t.y1,h=t.x2,l=t.y2,c=0;c<e;c++){var u=c/e,d=a+(h-a)*u,f=o+(l-o)*u;r.push(new s(d,f))}return r}},function(t,e,i){var n=i(4);t.exports=function(t,e){void 0===e&&(e=new n);var i=Math.random();return e.x=t.x1+i*(t.x2-t.x1),e.y=t.y1+i*(t.y2-t.y1),e}},function(t,e,i){var n=i(4);t.exports=function(t,e){return void 0===e&&(e=new n),e.x=t.x+Math.random()*t.width,e.y=t.y+Math.random()*t.height,e}},function(t,e){var i=function(t){var e,n,s;if("object"!=typeof t||null===t)return t;for(s in e=Array.isArray(t)?[]:{},t)n=t[s],e[s]=i(n);return e};t.exports=i},function(t,e){t.exports=function(t){var e={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(e.textureKey=t.texture.key,e.frameKey=t.frame.name),e}},function(t,e,i){var n=i(3);t.exports=function(t,e,i,s,r,a,o,h){void 0===h&&(h=new n);var l=Math.sin(r),c=Math.cos(r),u=c*a,d=l*a,f=-l*o,p=c*o,g=1/(u*p+f*-d);return h.x=p*g*t+-f*g*e+(s*f-i*p)*g,h.y=u*g*e+-d*g*t+(-s*u+i*d)*g,h}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);for(var i=null,n=0;n<e;n++)i=t.shift(),t.push(i);return i}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);for(var i=null,n=0;n<e;n++)i=t.pop(),t.unshift(i);return i}},function(t,e,i){var n=i(4);t.exports=function(t,e){void 0===e&&(e=new n);var i=Math.random()*Math.PI*2,s=Math.sqrt(Math.random());return e.x=t.x+s*Math.cos(i)*t.width/2,e.y=t.y+s*Math.sin(i)*t.height/2,e}},function(t,e,i){var n=i(4);t.exports=function(t,e){void 0===e&&(e=new n);var i=t.x2-t.x1,s=t.y2-t.y1,r=t.x3-t.x1,a=t.y3-t.y1,o=Math.random(),h=Math.random();return 1<=o+h&&(o=1-o,h=1-h),e.x=t.x1+(i*o+r*h),e.y=t.y1+(s*o+a*h),e}},function(t,e){t.exports=function(t,e,i,n,s){var r=n+Math.atan2(t.y-i,t.x-e);return t.x=e+s*Math.cos(r),t.y=i+s*Math.sin(r),t}},function(t,e){t.exports=function(t,e,i){return(t=Math.max(0,Math.min(1,(t-e)/(i-e))))*t*t*(t*(6*t-15)+10)}},function(t,e){t.exports=function(t,e,i){return t<=e?0:i<=t?1:(t=(t-e)/(i-e))*t*(3-2*t)}},function(t,e,i){var n=i(18),s=i(0),r=i(132),a=i(318),o=i(319),h=i(6),l=i(320),c=new s({initialize:function(t,e,i){this.manager=t,this.key=e,this.type="frame",this.frames=this.getFrames(t.textureManager,h(i,"frames",[]),h(i,"defaultTextureKey",null),h(i,"sortFrames",!0)),this.frameRate=h(i,"frameRate",null),this.duration=h(i,"duration",null),this.msPerFrame,this.skipMissedFrames=h(i,"skipMissedFrames",!0),this.delay=h(i,"delay",0),this.repeat=h(i,"repeat",0),this.repeatDelay=h(i,"repeatDelay",0),this.yoyo=h(i,"yoyo",!1),this.showOnStart=h(i,"showOnStart",!1),this.hideOnComplete=h(i,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(r.PAUSE_ALL,this.pause,this),this.manager.on(r.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(t,e,i,n){null===i&&null===n?(t.frameRate=24,t.duration=24/e*1e3):i&&null===n?(t.duration=i,t.frameRate=e/(i/1e3)):(t.frameRate=n,t.duration=e/n*1e3),t.msPerFrame=1e3/t.frameRate},addFrame:function(t){return this.addFrameAt(this.frames.length,t)},addFrameAt:function(t,e){var i,n,s=this.getFrames(this.manager.textureManager,e);return 0<s.length&&(0===t?this.frames=s.concat(this.frames):t===this.frames.length?this.frames=this.frames.concat(s):(i=this.frames.slice(0,t),n=this.frames.slice(t),this.frames=i.concat(s,n)),this.updateFrameSequence()),this},checkFrame:function(t){return 0<=t&&t<this.frames.length},getFirstTick:function(t){t.accumulator=0,t.nextTick=t.msPerFrame+t.currentFrame.duration},getFrameAt:function(t){return this.frames[t]},getFrames:function(t,e,i,n){void 0===n&&(n=!0);var s,r,a,c=[],u=1;if("string"==typeof e&&(r=e,a=t.get(r).getFrameNames(),n&&l(a),e=[],a.forEach((function(t){e.push({key:r,frame:t})}))),!Array.isArray(e)||0===e.length)return c;for(y=0;y<e.length;y++){var d,f,p,g=e[y],m=h(g,"key",i);m&&(d=h(g,"frame",0),f=t.getFrame(m,d),(p=new o(m,d,u,f)).duration=h(g,"duration",0),p.isFirst=!s,s&&((s.nextFrame=p).prevFrame=s),c.push(p),s=p,u++)}if(0<c.length){p.isLast=!0,p.nextFrame=c[0],c[0].prevFrame=p;for(var v=1/(c.length-1),y=0;y<c.length;y++)c[y].progress=y*v}return c},getNextTick:function(t){t.accumulator-=t.nextTick,t.nextTick=t.msPerFrame+t.currentFrame.duration},getFrameByProgress:function(t){return t=n(t,0,1),a(t,this.frames,"progress")},nextFrame:function(t){var e=t.currentFrame;e.isLast?t.yoyo?this.handleYoyoFrame(t,!1):0<t.repeatCounter?t.inReverse&&t.forward?t.forward=!1:this.repeatAnimation(t):t.complete():this.updateAndGetNextTick(t,e.nextFrame)},handleYoyoFrame:function(t,e){if(e=e||!1,t.inReverse===!e&&0<t.repeatCounter)return 0!==t.repeatDelay&&!t.pendingRepeat||(t.forward=e),void this.repeatAnimation(t);var i;t.inReverse===e||0!==t.repeatCounter?(i=(t.forward=e)?t.currentFrame.nextFrame:t.currentFrame.prevFrame,this.updateAndGetNextTick(t,i)):t.complete()},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(t){var e=t.currentFrame;e.isFirst?t.yoyo?this.handleYoyoFrame(t,!0):0<t.repeatCounter?(t.inReverse&&!t.forward||(t.forward=!0),this.repeatAnimation(t)):t.complete():this.updateAndGetNextTick(t,e.prevFrame)},updateAndGetNextTick:function(t,e){t.setCurrentFrame(e),this.getNextTick(t)},removeFrame:function(t){var e=this.frames.indexOf(t);return-1!==e&&this.removeFrameAt(e),this},removeFrameAt:function(t){return this.frames.splice(t,1),this.updateFrameSequence(),this},repeatAnimation:function(t){if(2===t._pendingStop){if(0===t._pendingStopValue)return t.stop();t._pendingStopValue--}0<t.repeatDelay&&!t.pendingRepeat?(t.pendingRepeat=!0,t.accumulator-=t.nextTick,t.nextTick+=t.repeatDelay):(t.repeatCounter--,t.forward?t.setCurrentFrame(t.currentFrame.nextFrame):t.setCurrentFrame(t.currentFrame.prevFrame),t.isPlaying&&(this.getNextTick(t),t.handleRepeat()))},toJSON:function(){var t={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach((function(e){t.frames.push(e.toJSON())})),t},updateFrameSequence:function(){for(var t,e=this.frames.length,i=1/(e-1),n=0;n<e;n++)(t=this.frames[n]).index=n+1,t.isFirst=!1,t.isLast=!1,t.progress=n*i,0===n?(t.isFirst=!0,1===e?(t.isLast=!0,(t.nextFrame=t).prevFrame=t):(t.isLast=!1,t.prevFrame=this.frames[e-1],t.nextFrame=this.frames[n+1])):n===e-1&&1<e?(t.isLast=!0,t.prevFrame=this.frames[e-2],t.nextFrame=this.frames[0]):1<e&&(t.prevFrame=this.frames[n-1],t.nextFrame=this.frames[n+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(r.PAUSE_ALL,this.pause,this),this.manager.off(r.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var t=0;t<this.frames.length;t++)this.frames[t].destroy();this.frames=[],this.manager=null}});t.exports=c},function(t,e){t.exports=function(t,e,i,n){var s;if(void 0===e&&(e=0),void 0===i&&(i=" "),void 0===n&&(n=3),e+1>=(t=t.toString()).length)switch(n){case 1:t=new Array(e+1-t.length).join(i)+t;break;case 3:var r=Math.ceil((s=e-t.length)/2);t=new Array(s-r+1).join(i)+t+new Array(r+1).join(i);break;default:t+=new Array(e+1-t.length).join(i)}return t}},function(t,e,i){var n=i(327),s=i(189),r=i(331),a=i(332);t.exports=function(t){switch(typeof t){case"string":return("rgb"===t.substr(0,3).toLowerCase()?a:n)(t);case"number":return s(t);case"object":return r(t)}}},function(t,e,i){var n=i(103);function s(t,e,i,n){var s=(t+6*e)%6,r=Math.min(s,4-s,1);return Math.round(255*(n-n*i*Math.max(0,r)))}t.exports=function(t,e,i,r){void 0===e&&(e=1),void 0===i&&(i=1);var a=s(5,t,e,i),o=s(3,t,e,i),h=s(1,t,e,i);return r?r.setTo?r.setTo(a,o,h,r.alpha,!1):(r.r=a,r.g=o,r.b=h,r.color=n(a,o,h),r):{r:a,g:o,b:h,color:n(a,o,h)}}},function(t,e,i){var n=i(38),s=i(330);t.exports=function(t){var e=s(t);return new n(e.r,e.g,e.b,e.a)}},function(t,e){t.exports=function(t,e,i){return t.x=e-t.width/2,t.y=i-t.height/2,t}},function(t,e,i){var n=i(105),s=i(136),r=i(31),a={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};t.exports=function(){if("function"==typeof importScripts)return a;a.canvas=!!window.CanvasRenderingContext2D;try{a.localStorage=!!localStorage.getItem}catch(t){a.localStorage=!1}a.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),a.fileSystem=!!window.requestFileSystem;var t,e,i,o=!1;return a.webGL=function(){if(window.WebGLRenderingContext)try{var t=r.createWebGL(this),e=t.getContext("webgl")||t.getContext("experimental-webgl"),i=r.create2D(this),n=i.getContext("2d").createImageData(1,1);return o=n.data instanceof Uint8ClampedArray,r.remove(t),r.remove(i),!!e}catch(t){return!1}return!1}(),a.worker=!!window.Worker,a.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,a.getUserMedia=a.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,s.firefox&&s.firefoxVersion<21&&(a.getUserMedia=!1),!n.iOS&&(s.ie||s.firefox||s.chrome)&&(a.canvasBitBltShift=!0),(s.safari||s.mobileSafari)&&(a.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(a.vibration=!0),"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint32Array&&(a.littleEndian=(t=new ArrayBuffer(4),e=new Uint8Array(t),i=new Uint32Array(t),e[0]=161,e[1]=178,e[2]=195,e[3]=212,3569595041===i[0]||2712847316!==i[0]&&null)),a.support32bit="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof Int32Array&&null!==a.littleEndian&&o,a}()},function(t,e){var i="";function n(t){for(var e=["i","webkitI","msI","mozI","oI"],i=0;i<e.length;i++){var n=e[i]+"mageSmoothingEnabled";if(n in t)return n}return null}t.exports={disable:function(t){return""===i&&(i=n(t)),i&&(t[i]=!1),t},enable:function(t){return""===i&&(i=n(t)),i&&(t[i]=!0),t},getPrefix:n,isEnabled:function(t){return null!==i?t[i]:null}}},function(t,e,i){var n=i(14),s=i(17)(!1,s={Angle:i(812),Distance:i(821),Easing:i(826),Fuzzy:i(827),Interpolation:i(830),Pow2:i(835),Snap:i(837),RandomDataGenerator:i(839),Average:i(840),Bernstein:i(356),Between:i(195),CatmullRom:i(194),CeilTo:i(841),Clamp:i(18),DegToRad:i(36),Difference:i(842),Euler:i(843),Factorial:i(357),FloatBetween:i(137),FloorTo:i(844),FromPercent:i(98),GetSpeed:i(845),IsEven:i(846),IsEvenStrict:i(847),Linear:i(135),MaxAdd:i(848),Median:i(849),MinSub:i(850),Percent:i(851),RadToDeg:i(196),RandomXY:i(852),RandomXYZ:i(853),RandomXYZW:i(854),Rotate:i(362),RotateAround:i(308),RotateAroundDistance:i(182),RotateTo:i(855),RoundAwayFromZero:i(363),RoundTo:i(856),SinCosTableGenerator:i(857),SmootherStep:i(183),SmoothStep:i(184),ToXY:i(858),TransformXY:i(177),Within:i(859),Wrap:i(68),Vector2:i(3),Vector3:i(39),Vector4:i(140),Matrix3:i(364),Matrix4:i(69),Quaternion:i(365),RotateVec3:i(860)},n);t.exports=s},function(t,e){t.exports=function(t,e,i,n,s){var r=.5*(n-e),a=.5*(s-i),o=t*t;return(2*i-2*n+r+a)*(t*o)+(-3*i+3*n-2*r-a)*o+r*t+i}},function(t,e){t.exports=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}},function(t,e,i){var n=i(14);t.exports=function(t){return t*n.RAD_TO_DEG}},function(t,e,i){t.exports={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]}},function(t,e,i){var n=new(i(0))({initialize:function(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function(t){return this._matrix=t,this._dirty=!0,this},reset:function(){var t=this._matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=1,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=1,t[13]=0,t[14]=0,t[15]=0,t[16]=0,t[17]=0,t[18]=1,t[19]=0,this._dirty=!0,this},getData:function(){var t;return this._dirty&&((t=new Float32Array(this._matrix))[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,this._data=t,this._dirty=!1),this._data},brightness:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=!1),this.multiply([t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0],e)},saturate:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1);var i=2*t/3+1,n=-.5*(i-1);return this.multiply([i,n,n,0,0,n,i,n,0,0,n,n,i,0,0,0,0,0,1,0],e)},desaturate:function(t){return void 0===t&&(t=!1),this.saturate(-1,t)},hue:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1),t=t/180*Math.PI;var i=Math.cos(t),n=Math.sin(t);return this.multiply([.213+.787*i+-.213*n,.715+-.715*i+-.715*n,.072+-.072*i+.928*n,0,0,.213+-.213*i+.143*n,.715+i*(1-.715)+.14*n,.072+-.072*i+-.283*n,0,0,.213+-.213*i+-.787*n,.715+-.715*i+.715*n,.072+.928*i+.072*n,0,0,0,0,0,1,0],e)},grayscale:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=!1),this.saturate(-t,e)},blackWhite:function(t){return void 0===t&&(t=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},contrast:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1);var i=t+1,n=-.5*(i-1);return this.multiply([i,0,0,0,n,0,i,0,0,n,0,0,i,0,n,0,0,0,1,0],e)},negative:function(t){return void 0===t&&(t=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},desaturateLuminance:function(t){return void 0===t&&(t=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],t)},sepia:function(t){return void 0===t&&(t=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},night:function(t,e){return void 0===t&&(t=.1),void 0===e&&(e=!1),this.multiply([-2*t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0],e)},lsd:function(t){return void 0===t&&(t=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},brown:function(t){return void 0===t&&(t=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},vintagePinhole:function(t){return void 0===t&&(t=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},kodachrome:function(t){return void 0===t&&(t=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},technicolor:function(t){return void 0===t&&(t=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},polaroid:function(t){return void 0===t&&(t=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},shiftToBGR:function(t){return void 0===t&&(t=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},multiply:function(t,e){e||this.reset();for(var i=this._matrix,n=[],s=0;s<20;s++)n[s]=i[s];return i[0]=n[0]*t[0]+n[1]*t[5]+n[2]*t[10]+n[3]*t[15],i[1]=n[0]*t[1]+n[1]*t[6]+n[2]*t[11]+n[3]*t[16],i[2]=n[0]*t[2]+n[1]*t[7]+n[2]*t[12]+n[3]*t[17],i[3]=n[0]*t[3]+n[1]*t[8]+n[2]*t[13]+n[3]*t[18],i[4]=n[0]*t[4]+n[1]*t[9]+n[2]*t[14]+n[3]*t[19]+n[4],i[5]=n[5]*t[0]+n[6]*t[5]+n[7]*t[10]+n[8]*t[15],i[6]=n[5]*t[1]+n[6]*t[6]+n[7]*t[11]+n[8]*t[16],i[7]=n[5]*t[2]+n[6]*t[7]+n[7]*t[12]+n[8]*t[17],i[8]=n[5]*t[3]+n[6]*t[8]+n[7]*t[13]+n[8]*t[18],i[9]=n[5]*t[4]+n[6]*t[9]+n[7]*t[14]+n[8]*t[19]+n[9],i[10]=n[10]*t[0]+n[11]*t[5]+n[12]*t[10]+n[13]*t[15],i[11]=n[10]*t[1]+n[11]*t[6]+n[12]*t[11]+n[13]*t[16],i[12]=n[10]*t[2]+n[11]*t[7]+n[12]*t[12]+n[13]*t[17],i[13]=n[10]*t[3]+n[11]*t[8]+n[12]*t[13]+n[13]*t[18],i[14]=n[10]*t[4]+n[11]*t[9]+n[12]*t[14]+n[13]*t[19]+n[14],i[15]=n[15]*t[0]+n[16]*t[5]+n[17]*t[10]+n[18]*t[15],i[16]=n[15]*t[1]+n[16]*t[6]+n[17]*t[11]+n[18]*t[16],i[17]=n[15]*t[2]+n[16]*t[7]+n[17]*t[12]+n[18]*t[17],i[18]=n[15]*t[3]+n[16]*t[8]+n[17]*t[13]+n[18]*t[18],i[19]=n[15]*t[4]+n[16]*t[9]+n[17]*t[14]+n[18]*t[19]+n[19],this._dirty=!0,this}});t.exports=n},function(t,e,i){var n=i(10),s=i(14);t.exports=function(t,e){if(void 0===e&&(e=new n),0===t.length)return e;for(var i,r,a,o=Number.MAX_VALUE,h=Number.MAX_VALUE,l=s.MIN_SAFE_INTEGER,c=s.MIN_SAFE_INTEGER,u=0;u<t.length;u++)i=t[u],a=Array.isArray(i)?(r=i[0],i[1]):(r=i.x,i.y),o=Math.min(o,r),h=Math.min(h,a),l=Math.max(l,r),c=Math.max(c,a);return e.x=o,e.y=h,e.width=l-o,e.height=c-h,e}},function(t,e,i){var n=i(0),s=i(1),r=new n({initialize:function(t,e,i){this._rgb=[0,0,0],this.onChangeCallback=s,this.dirty=!1,this.set(t,e,i)},set:function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this._rgb=[t,e,i],this.onChange(),this},equals:function(t,e,i){var n=this._rgb;return n.r===t&&n.g===e&&n.b===i},onChange:function(){this.dirty=!0;var t=this._rgb;this.onChangeCallback.call(this,t[0],t[1],t[2])},r:{get:function(){return this._rgb[0]},set:function(t){this._rgb[0]=t,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(t){this._rgb[1]=t,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(t){this._rgb[2]=t,this.onChange()}},destroy:function(){this.onChangeCallback=null}});t.exports=r},function(t,e,i){var n={CENTER:i(403),ORIENTATION:i(404),SCALE_MODE:i(405),ZOOM:i(406)};t.exports=n},function(t,e){t.exports=function(t){t.parentNode&&t.parentNode.removeChild(t)}},function(t,e){t.exports={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8}},function(t,e,i){var n=i(0),s=i(144),r=i(197),a=i(20),o=i(419),h=i(420),l=i(33),c=i(1),u=i(421),d=new n({initialize:function(t,e){this.scene=t,this.game,this.renderer,this.config=e,this.settings=u.create(e),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=c},init:function(t){this.settings.status=s.INIT,this.sceneUpdate=c,this.game=t,this.renderer=t.renderer,this.canvas=t.canvas,this.context=t.context;var e=t.plugins;(this.plugins=e).addToScene(this,r.Global,[r.CoreScene,h(this),o(this)]),this.events.emit(a.BOOT,this),this.settings.isBooted=!0},step:function(t,e){var i=this.events;i.emit(a.PRE_UPDATE,t,e),i.emit(a.UPDATE,t,e),this.sceneUpdate.call(this.scene,t,e),i.emit(a.POST_UPDATE,t,e)},render:function(t){var e=this.displayList;e.depthSort(),this.events.emit(a.PRE_RENDER,t),this.cameras.render(t,e),this.events.emit(a.RENDER,t)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(t){var e=this.events,i=this.settings;return this.settings.active&&(i.status=s.PAUSED,i.active=!1,e.emit(a.PAUSE,this,t)),this},resume:function(t){var e=this.events,i=this.settings;return this.settings.active||(i.status=s.RUNNING,i.active=!0,e.emit(a.RESUME,this,t)),this},sleep:function(t){var e=this.events,i=this.settings;return i.status=s.SLEEPING,i.active=!1,i.visible=!1,e.emit(a.SLEEP,this,t),this},wake:function(t){var e=this.events,i=this.settings;return i.status=s.RUNNING,i.active=!0,i.visible=!0,e.emit(a.WAKE,this,t),i.isTransition&&e.emit(a.TRANSITION_WAKE,i.transitionFrom,i.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===s.SLEEPING},isActive:function(){return this.settings.status===s.RUNNING},isPaused:function(){return this.settings.status===s.PAUSED},isTransitioning:function(){return this.settings.isTransition||null!==this.scenePlugin._target},isTransitionOut:function(){return null!==this.scenePlugin._target&&0<this.scenePlugin._duration},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(t){return this.settings.visible=t,this},setActive:function(t,e){return t?this.resume(e):this.pause(e)},start:function(t){var e=this.events,i=this.settings;t&&(i.data=t),i.status=s.START,i.active=!0,i.visible=!0,e.emit(a.START,this),e.emit(a.READY,this,t)},shutdown:function(t){var e=this.events,i=this.settings;e.off(a.TRANSITION_INIT),e.off(a.TRANSITION_START),e.off(a.TRANSITION_COMPLETE),e.off(a.TRANSITION_OUT),i.status=s.SHUTDOWN,i.active=!1,i.visible=!1,this.renderer===l.WEBGL&&this.renderer.resetTextures(!0),e.emit(a.SHUTDOWN,this,t)},destroy:function(){var t=this.events,e=this.settings;e.status=s.DESTROYED,e.active=!1,e.visible=!1,t.emit(a.DESTROY,this),t.removeAllListeners();for(var i=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],n=0;n<i.length;n++)this[i[n]]=null}});t.exports=d},function(t,e){t.exports=function(t){return t&&t[0].toUpperCase()+t.slice(1)}},function(t,e,i){var n=i(33),s=i(0),r=i(109),a=i(424),o="Texture.frame missing: ",h=new s({initialize:function(t,e,i,n,s){Array.isArray(i)||(i=[i]),this.manager=t,this.key=e,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE";for(var r=this.frameTotal=0;r<i.length;r++)this.source.push(new a(this,i[r],n,s))},add:function(t,e,i,n,s,a){if(this.has(t))return null;var o=new r(this,t,e,i,n,s,a);return this.frames[t]=o,"__BASE"===this.firstFrame&&(this.firstFrame=t),this.frameTotal++,o},remove:function(t){return!!this.has(t)&&(this.get(t).destroy(),delete this.frames[t],!0)},has:function(t){return this.frames[t]},get:function(t){t=t||this.firstFrame;var e=this.frames[t];return e||(console.warn(o+t),e=this.frames[this.firstFrame]),e},getTextureSourceIndex:function(t){for(var e=0;e<this.source.length;e++)if(this.source[e]===t)return e;return-1},getFramesFromTextureSource:function(t,e){void 0===e&&(e=!1);var i,n=[];for(var s in this.frames)"__BASE"===s&&!e||(i=this.frames[s]).sourceIndex===t&&n.push(i);return n},getFrameNames:function(t){void 0===t&&(t=!1);var e,i=Object.keys(this.frames);return t||-1!==(e=i.indexOf("__BASE"))&&i.splice(e,1),i},getSourceImage:function(t){null!=t&&1!==this.frameTotal||(t="__BASE");var e=this.frames[t];return e?e.source.image:(console.warn(o+t),this.frames.__BASE.source.image)},getDataSourceImage:function(t){null!=t&&1!==this.frameTotal||(t="__BASE");var e=this.frames[t],i=e?e.sourceIndex:(console.warn(o+t),this.frames.__BASE.sourceIndex);return this.dataSource[i].image},setDataSource:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=this.source[e];this.dataSource.push(new a(this,t[e],i.width,i.height))}},setFilter:function(t){for(var e=0;e<this.source.length;e++)this.source[e].setFilter(t);for(e=0;e<this.dataSource.length;e++)this.dataSource[e].setFilter(t)},destroy:function(){for(var t=0;t<this.source.length;t++)this.source[t].destroy();for(t=0;t<this.dataSource.length;t++)this.dataSource[t].destroy();for(var e in this.frames)this.frames[e].destroy();this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var i=this.manager.game.renderer;i&&i.type===n.WEBGL&&i.resetTextures(!0),this.manager=null}});t.exports=h},function(t,e,i){var n=i(78);t.exports=function(t,e,i,s,r){void 0===s&&(s=0),void 0===r&&(r=t.length);var a=[];if(n(t,s,r))for(var o=s;o<r;o++){var h=t[o];(!e||e&&void 0===i&&h.hasOwnProperty(e)||e&&void 0!==i&&h[e]===i)&&a.push(h)}return a}},function(t,e,i){t.exports={Matrix:i(1013),Add:i(1021),AddAt:i(1022),BringToTop:i(1023),CountAllMatching:i(1024),Each:i(1025),EachInRange:i(1026),FindClosestInSorted:i(318),GetAll:i(207),GetFirst:i(428),GetRandom:i(210),MoveDown:i(1027),MoveTo:i(1028),MoveUp:i(1029),MoveAbove:i(1030),MoveBelow:i(1031),NumberArray:i(322),NumberArrayStep:i(1032),QuickSelect:i(436),Range:i(437),Remove:i(93),RemoveAt:i(1033),RemoveBetween:i(1034),RemoveRandomElement:i(1035),Replace:i(1036),RotateLeft:i(178),RotateRight:i(179),SafeRange:i(78),SendToBack:i(1037),SetAll:i(1038),Shuffle:i(131),SortByDigits:i(320),SpliceOne:i(74),StableSort:i(79),Swap:i(1039)}},function(t,e){t.exports=function(t){if(!Array.isArray(t)||t.length<2||!Array.isArray(t[0]))return!1;for(var e=t[0].length,i=1;i<t.length;i++)if(t[i].length!==e)return!1;return!0}},function(t,e){t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=t.length);var n=e+Math.floor(Math.random()*i);return void 0===t[n]?null:t[n]}},function(t,e,i){var n=i(0),s=i(9),r=i(438),a=new n({Extends:s,initialize:function(){s.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function(t){return this._pending.push(t),this._toProcess++,t},remove:function(t){return this._destroy.push(t),this._toProcess++,t},removeAll:function(){for(var t=this._active,e=this._destroy,i=t.length;i--;)e.push(t[i]),this._toProcess++;return this},update:function(){if(0===this._toProcess)return this._active;for(var t,e=this._destroy,i=this._active,n=0;n<e.length;n++){t=e[n];var s=i.indexOf(t);-1!==s&&(i.splice(s,1),this.emit(r.PROCESS_QUEUE_REMOVE,t))}for(e.length=0,e=this._pending,n=0;n<e.length;n++)t=e[n],(!this.checkQueue||this.checkQueue&&-1===i.indexOf(t))&&(i.push(t),this.emit(r.PROCESS_QUEUE_ADD,t));return e.length=0,this._toProcess=0,i},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});t.exports=a},function(t,e){function i(t,e){return parseInt(t.getAttribute(e),10)}t.exports=function(t,e,n,s,r){void 0===n&&(n=0),void 0===s&&(s=0);var a=e.cutX,o=e.cutY,h=e.source.width,l=e.source.height,c=e.sourceIndex,u={},d=t.getElementsByTagName("info")[0],f=t.getElementsByTagName("common")[0];u.font=d.getAttribute("face"),u.size=i(d,"size"),u.lineHeight=i(f,"lineHeight")+s,u.chars={};var p,g,m=t.getElementsByTagName("char"),v=void 0!==e&&e.trimmed;v&&(p=e.height,g=e.width);for(var y=0;y<m.length;y++){var _=m[y],x=i(_,"id"),w=String.fromCharCode(x),b=i(_,"x"),E=i(_,"y"),T=i(_,"width"),S=i(_,"height");v&&(b<g&&(g=b),E<p&&(p=E)),v&&0!==p&&0!==g&&(b-=e.x,E-=e.y);var A,O=(a+b)/h,C=(o+E)/l,P=(a+b+T)/h,L=(o+E+S)/l;u.chars[x]={x:b,y:E,width:T,height:S,centerX:Math.floor(T/2),centerY:Math.floor(S/2),xOffset:i(_,"xoffset"),yOffset:i(_,"yoffset"),xAdvance:i(_,"xadvance")+n,data:{},kerning:{},u0:O,v0:C,u1:P,v1:L},!r||0===T||0===S||(A=r.add(w,c,b,E,T,S))&&A.setUVs(T,S,O,C,P,L)}var R=t.getElementsByTagName("kerning");for(y=0;y<R.length;y++){var I=R[y],M=i(I,"first"),D=i(I,"second"),k=i(I,"amount");u.chars[D].kerning[M]=k}return u}},function(t,e,i){var n=i(1049),s=i(440),r=i(0),a=i(11),o=i(109),h=i(15),l=i(110),c=new r({Extends:h,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Mask,a.Pipeline,a.ScrollFactor,a.Size,a.Texture,a.Transform,a.Visible,n],initialize:function(t,e,i,n,s){h.call(this,t,"Blitter"),this.setTexture(n,s),this.setPosition(e,i),this.initPipeline(),this.children=new l,this.renderList=[],this.dirty=!1},create:function(t,e,i,n,r){void 0===n&&(n=!0),void 0===r&&(r=this.children.length),void 0===i?i=this.frame:i instanceof o||(i=this.texture.get(i));var a=new s(this,t,e,i,n);return this.children.addAt(a,r,!1),this.dirty=!0,a},createFromCallback:function(t,e,i,n){for(var s=this.createMultiple(e,i,n),r=0;r<s.length;r++){var a=s[r];t.call(this,a,r)}return s},createMultiple:function(t,e,i){void 0===e&&(e=this.frame.name),void 0===i&&(i=!0),Array.isArray(e)||(e=[e]);var n=[],s=this;return e.forEach((function(e){for(var r=0;r<t;r++)n.push(s.create(0,0,e,i))})),n},childCanRender:function(t){return t.visible&&0<t.alpha},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});t.exports=c},function(t,e,i){var n=i(208),s=i(35),r=i(0),a=i(11),o=i(75),h=i(15),l=i(10),c=i(1052),u=i(441),d=i(3),f=new r({Extends:h,Mixins:[a.AlphaSingle,a.BlendMode,a.ComputedSize,a.Depth,a.Mask,a.Pipeline,a.Transform,a.Visible,c],initialize:function(t,e,i,n){h.call(this,t,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new a.TransformMatrix,this.tempTransformMatrix=new a.TransformMatrix,this._sortKey="",this._sysEvents=t.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(e,i),this.clearAlpha(),this.setBlendMode(s.SKIP_CHECK),n&&this.add(n)},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return.5*this.width}},displayOriginY:{get:function(){return.5*this.height}},setExclusive:function(t){return void 0===t&&(t=!0),this.exclusive=t,this},getBounds:function(t){var e;if(void 0===t&&(t=new l),t.setTo(this.x,this.y,0,0),this.parentContainer&&(e=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y),t.setTo(e.x,e.y,0,0)),0<this.list.length){var i=this.list,n=new l,s=!1;t.setEmpty();for(var r=0;r<i.length;r++){var a=i[r];a.getBounds&&(a.getBounds(n),s?u(n,t,t):(t.setTo(n.x,n.y,n.width,n.height),s=!0))}}return t},addHandler:function(t){t.once(o.DESTROY,this.remove,this),this.exclusive&&(t.parentContainer&&t.parentContainer.remove(t),t.removeFromDisplayList(),t.parentContainer=this)},removeHandler:function(t){t.off(o.DESTROY,this.remove),this.exclusive&&(t.parentContainer=null,t.addToDisplayList())},pointToContainer:function(t,e){void 0===e&&(e=new d),this.parentContainer?this.parentContainer.pointToContainer(t,e):e=new d(t.x,t.y);var i=this.tempTransformMatrix;return i.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),i.invert(),i.transformPoint(t.x,t.y,e),e},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(t){return n.Add(this.list,t,this.maxSize,this.addHandler,this),this},addAt:function(t,e){return n.AddAt(this.list,t,e,this.maxSize,this.addHandler,this),this},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t,e){return t&&(void 0===e&&(e=function(e,i){return e[t]-i[t]}),n.StableSort(this.list,e)),this},getByName:function(t){return n.GetFirst(this.list,"name",t)},getRandom:function(t,e){return n.GetRandom(this.list,t,e)},getFirst:function(t,e,i,s){return n.GetFirst(this.list,t,e,i,s)},getAll:function(t,e,i,s){return n.GetAll(this.list,t,e,i,s)},count:function(t,e,i,s){return n.CountAllMatching(this.list,t,e,i,s)},swap:function(t,e){return n.Swap(this.list,t,e),this},moveTo:function(t,e){return n.MoveTo(this.list,t,e),this},moveAbove:function(t,e){return n.MoveAbove(this.list,t,e),this},moveBelow:function(t,e){return n.MoveBelow(this.list,t,e),this},remove:function(t,e){var i=n.Remove(this.list,t,this.removeHandler,this);if(e&&i){Array.isArray(i)||(i=[i]);for(var s=0;s<i.length;s++)i[s].destroy()}return this},removeAt:function(t,e){var i=n.RemoveAt(this.list,t,this.removeHandler,this);return e&&i&&i.destroy(),this},removeBetween:function(t,e,i){var s=n.RemoveBetween(this.list,t,e,this.removeHandler,this);if(i)for(var r=0;r<s.length;r++)s[r].destroy();return this},removeAll:function(t){var e=n.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(t)for(var i=0;i<e.length;i++)e[i].destroy();return this},bringToTop:function(t){return n.BringToTop(this.list,t),this},sendToBack:function(t){return n.SendToBack(this.list,t),this},moveUp:function(t){return n.MoveUp(this.list,t),this},moveDown:function(t){return n.MoveDown(this.list,t),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return n.Shuffle(this.list),this},replace:function(t,e,i){return n.Replace(this.list,t,e)&&(this.addHandler(e),this.removeHandler(t),i&&t.destroy()),this},exists:function(t){return-1<this.list.indexOf(t)},setAll:function(t,e,i,s){return n.SetAll(this.list,t,e,i,s),this},each:function(t,e){for(var i=[null],n=this.list.slice(),s=n.length,r=2;r<arguments.length;r++)i.push(arguments[r]);for(r=0;r<s;r++)i[0]=n[r],t.apply(e,i);return this},iterate:function(t,e){for(var i=[null],n=2;n<arguments.length;n++)i.push(arguments[n]);for(n=0;n<this.list.length;n++)i[0]=this.list[n],t.apply(e,i);return this},setScrollFactor:function(t,e,i){return void 0===e&&(e=t),void 0===i&&(i=!1),this.scrollFactorX=t,this.scrollFactorY=e,i&&(n.SetAll(this.list,"scrollFactorX",t),n.SetAll(this.list,"scrollFactorY",e)),this},length:{get:function(){return this.list.length}},first:{get:function(){return(this.position=0)<this.list.length?this.list[0]:null}},last:{get:function(){return 0<this.list.length?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return 0<this.position?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});t.exports=f},function(t,e,i){var n=i(148),s=i(0),r=i(1057),a=new s({Extends:n,Mixins:[r],initialize:function(t,e,i,s,r,a,o){n.call(this,t,e,i,s,r,a,o),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(t,e){return this.cropWidth=t,this.cropHeight=e,this},setDisplayCallback:function(t){return this.displayCallback=t,this},setScrollX:function(t){return this.scrollX=t,this},setScrollY:function(t){return this.scrollY=t,this}});t.exports=a},function(t,e,i){var n=i(133),s=i(0),r=i(217),a=i(303),o=i(304),h=i(305),l=i(309),c=i(167),u=i(312),d=i(313),f=i(314),p=i(111),g=i(15),m=i(2),v=i(6),y=i(14),_=i(1063),x=new s({Extends:g,Mixins:[a,o,h,l,c,d,f,u,_],initialize:function(t,e){var i=v(e,"x",0),n=v(e,"y",0);g.call(this,t,"Graphics"),this.setPosition(i,n),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(e)},setDefaultStyles:function(t){return v(t,"lineStyle",null)&&(this.defaultStrokeWidth=v(t,"lineStyle.width",1),this.defaultStrokeColor=v(t,"lineStyle.color",16777215),this.defaultStrokeAlpha=v(t,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),v(t,"fillStyle",null)&&(this.defaultFillColor=v(t,"fillStyle.color",16777215),this.defaultFillAlpha=v(t,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(t,e,i){return void 0===i&&(i=1),this.commandBuffer.push(r.LINE_STYLE,t,e,i),this._lineWidth=t,this},fillStyle:function(t,e){return void 0===e&&(e=1),this.commandBuffer.push(r.FILL_STYLE,t,e),this},fillGradientStyle:function(t,e,i,n,s,a,o,h){return void 0===s&&(s=1),void 0===a&&(a=s),void 0===o&&(o=s),void 0===h&&(h=s),this.commandBuffer.push(r.GRADIENT_FILL_STYLE,s,a,o,h,t,e,i,n),this},lineGradientStyle:function(t,e,i,n,s,a){return void 0===a&&(a=1),this.commandBuffer.push(r.GRADIENT_LINE_STYLE,t,a,e,i,n,s),this},beginPath:function(){return this.commandBuffer.push(r.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(r.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(r.FILL_PATH),this},fill:function(){return this.commandBuffer.push(r.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(r.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(r.STROKE_PATH),this},fillCircleShape:function(t){return this.fillCircle(t.x,t.y,t.radius)},strokeCircleShape:function(t){return this.strokeCircle(t.x,t.y,t.radius)},fillCircle:function(t,e,i){return this.beginPath(),this.arc(t,e,i,0,y.PI2),this.fillPath(),this},strokeCircle:function(t,e,i){return this.beginPath(),this.arc(t,e,i,0,y.PI2),this.strokePath(),this},fillRectShape:function(t){return this.fillRect(t.x,t.y,t.width,t.height)},strokeRectShape:function(t){return this.strokeRect(t.x,t.y,t.width,t.height)},fillRect:function(t,e,i,n){return this.commandBuffer.push(r.FILL_RECT,t,e,i,n),this},strokeRect:function(t,e,i,n){var s=this._lineWidth/2,r=t-s,a=t+s;return this.beginPath(),this.moveTo(t,e),this.lineTo(t,e+n),this.strokePath(),this.beginPath(),this.moveTo(t+i,e),this.lineTo(t+i,e+n),this.strokePath(),this.beginPath(),this.moveTo(r,e),this.lineTo(a+i,e),this.strokePath(),this.beginPath(),this.moveTo(r,e+n),this.lineTo(a+i,e+n),this.strokePath(),this},fillRoundedRect:function(t,e,i,n,s){void 0===s&&(s=20);var r=s,a=s,o=s,h=s;return"number"!=typeof s&&(r=m(s,"tl",20),a=m(s,"tr",20),o=m(s,"bl",20),h=m(s,"br",20)),this.beginPath(),this.moveTo(t+r,e),this.lineTo(t+i-a,e),this.arc(t+i-a,e+a,a,-y.TAU,0),this.lineTo(t+i,e+n-h),this.arc(t+i-h,e+n-h,h,0,y.TAU),this.lineTo(t+o,e+n),this.arc(t+o,e+n-o,o,y.TAU,Math.PI),this.lineTo(t,e+r),this.arc(t+r,e+r,r,-Math.PI,-y.TAU),this.fillPath(),this},strokeRoundedRect:function(t,e,i,n,s){void 0===s&&(s=20);var r=s,a=s,o=s,h=s;return"number"!=typeof s&&(r=m(s,"tl",20),a=m(s,"tr",20),o=m(s,"bl",20),h=m(s,"br",20)),this.beginPath(),this.moveTo(t+r,e),this.lineTo(t+i-a,e),this.moveTo(t+i-a,e),this.arc(t+i-a,e+a,a,-y.TAU,0),this.lineTo(t+i,e+n-h),this.moveTo(t+i,e+n-h),this.arc(t+i-h,e+n-h,h,0,y.TAU),this.lineTo(t+o,e+n),this.moveTo(t+o,e+n),this.arc(t+o,e+n-o,o,y.TAU,Math.PI),this.lineTo(t,e+r),this.moveTo(t,e+r),this.arc(t+r,e+r,r,-Math.PI,-y.TAU),this.strokePath(),this},fillPointShape:function(t,e){return this.fillPoint(t.x,t.y,e)},fillPoint:function(t,e,i){return!i||i<1?i=1:(t-=i/2,e-=i/2),this.commandBuffer.push(r.FILL_RECT,t,e,i,i),this},fillTriangleShape:function(t){return this.fillTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},strokeTriangleShape:function(t){return this.strokeTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},fillTriangle:function(t,e,i,n,s,a){return this.commandBuffer.push(r.FILL_TRIANGLE,t,e,i,n,s,a),this},strokeTriangle:function(t,e,i,n,s,a){return this.commandBuffer.push(r.STROKE_TRIANGLE,t,e,i,n,s,a),this},strokeLineShape:function(t){return this.lineBetween(t.x1,t.y1,t.x2,t.y2)},lineBetween:function(t,e,i,n){return this.beginPath(),this.moveTo(t,e),this.lineTo(i,n),this.strokePath(),this},lineTo:function(t,e){return this.commandBuffer.push(r.LINE_TO,t,e),this},moveTo:function(t,e){return this.commandBuffer.push(r.MOVE_TO,t,e),this},strokePoints:function(t,e,i,n){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===n&&(n=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var s=1;s<n;s++)this.lineTo(t[s].x,t[s].y);return e&&this.lineTo(t[0].x,t[0].y),i&&this.closePath(),this.strokePath(),this},fillPoints:function(t,e,i,n){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===n&&(n=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var s=1;s<n;s++)this.lineTo(t[s].x,t[s].y);return e&&this.lineTo(t[0].x,t[0].y),i&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(t,e){void 0===e&&(e=32);var i=t.getPoints(e);return this.strokePoints(i,!0)},strokeEllipse:function(t,e,i,n,s){void 0===s&&(s=32);var r=new p(t,e,i,n).getPoints(s);return this.strokePoints(r,!0)},fillEllipseShape:function(t,e){void 0===e&&(e=32);var i=t.getPoints(e);return this.fillPoints(i,!0)},fillEllipse:function(t,e,i,n,s){void 0===s&&(s=32);var r=new p(t,e,i,n).getPoints(s);return this.fillPoints(r,!0)},arc:function(t,e,i,n,s,a,o){return void 0===a&&(a=!1),void 0===o&&(o=0),this.commandBuffer.push(r.ARC,t,e,i,n,s,a,o),this},slice:function(t,e,i,n,s,a,o){return void 0===a&&(a=!1),void 0===o&&(o=0),this.commandBuffer.push(r.BEGIN_PATH),this.commandBuffer.push(r.MOVE_TO,t,e),this.commandBuffer.push(r.ARC,t,e,i,n,s,a,o),this.commandBuffer.push(r.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(r.SAVE),this},restore:function(){return this.commandBuffer.push(r.RESTORE),this},translateCanvas:function(t,e){return this.commandBuffer.push(r.TRANSLATE,t,e),this},scaleCanvas:function(t,e){return this.commandBuffer.push(r.SCALE,t,e),this},rotateCanvas:function(t){return this.commandBuffer.push(r.ROTATE,t),this},clear:function(){return this.commandBuffer.length=0,-1<this.defaultFillColor&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),-1<this.defaultStrokeColor&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(t,e,i){var n,s,r,a=this.scene.sys,o=a.game.renderer;return void 0===e&&(e=a.scale.width),void 0===i&&(i=a.scale.height),x.TargetCamera.setScene(this.scene),x.TargetCamera.setViewport(0,0,e,i),x.TargetCamera.scrollX=this.x,x.TargetCamera.scrollY=this.y,"string"==typeof t?a.textures.exists(t)?(r=(n=a.textures.get(t)).getSourceImage())instanceof HTMLCanvasElement&&(s=r.getContext("2d")):s=(n=a.textures.createCanvas(t,e,i)).getSourceImage().getContext("2d"):t instanceof HTMLCanvasElement&&(s=t.getContext("2d")),s&&(this.renderCanvas(o,this,x.TargetCamera,null,s,!1),n&&n.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});x.TargetCamera=new n,t.exports=x},function(t,e){t.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(t,e,i){var n=i(4);t.exports=function(t,e,i){void 0===i&&(i=new n);var s=t.width/2,r=t.height/2;return i.x=t.x+s*Math.cos(e),i.y=t.y+r*Math.sin(e),i}},function(t,e,i){var n=i(35),s=i(0),r=i(11),a=i(176),o=i(101),h=i(9),l=i(75),c=i(110),u=i(1071),d=i(20),f=i(79),p=new s({Extends:c,Mixins:[r.AlphaSingle,r.BlendMode,r.Depth,r.Mask,r.Pipeline,r.Visible,h,u],initialize:function(t,e){c.call(this,t),h.call(this),this.scene=t,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=t.sys,this.events=t.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(n.SKIP_CHECK),e&&this.add(e),t.sys.queueDepthSort()},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},setState:function(t){return this.state=t,this},setDataEnabled:function(){return this.data||(this.data=new o(this)),this},setData:function(t,e){return this.data||(this.data=new o(this)),this.data.set(t,e),this},incData:function(t,e){return this.data||(this.data=new o(this)),this.data.inc(t,e),this},toggleData:function(t){return this.data||(this.data=new o(this)),this.data.toggle(t),this},getData:function(t){return this.data||(this.data=new o(this)),this.data.get(t)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return a(this)},willRender:function(t){return!(15!==this.renderFlags||0===this.list.length||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function(){for(var t=this,e=this.parentContainer,i=[];e&&(i.unshift(e.getIndex(t)),(t=e).parentContainer);)e=e.parentContainer;return i.unshift(this.displayList.getIndex(t)),i},addChildCallback:function(t){t.displayList&&t.displayList!==this&&t.removeFromDisplayList(),t.displayList||(this.queueDepthSort(),t.displayList=this,t.emit(l.ADDED_TO_SCENE,t,this.scene),this.events.emit(d.ADDED_TO_SCENE,t,this.scene))},removeChildCallback:function(t){this.queueDepthSort(),t.displayList=null,t.emit(l.REMOVED_FROM_SCENE,t,this.scene),this.events.emit(d.REMOVED_FROM_SCENE,t,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(f(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(t,e){return t._depth-e._depth},getChildren:function(){return this.list},destroy:function(){if(this.scene&&!this.ignoreDestroy){this.emit(l.DESTROY,this);for(var t=this.list.length;t--;)this.list[t].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});t.exports=p},function(t,e,i){var n=i(0),s=i(11),r=i(15),a=i(450),o=i(110),h=i(452),l=i(1075),c=new n({Extends:r,Mixins:[s.Depth,s.Mask,s.Pipeline,s.Transform,s.Visible,l],initialize:function(t,e,i,n){if(r.call(this,t,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],null===i||"object"!=typeof i&&!Array.isArray(i)||(n=i,i=null),this.setTexture(e,i),this.initPipeline(),this.emitters=new o(this),this.wells=new o(this),n){Array.isArray(n)||(n=[n]);for(var s=0;s<n.length;s++)this.createEmitter(n[s])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t){this.frame=this.texture.get(t);var e=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),i=[];return e.forEach((function(t){i.push(t.name)})),this.frameNames=i,this.defaultFrame=this.frame,this},setEmitterFrames:function(t,e){Array.isArray(t)||(t=[t]);for(var i=e.frames,n=i.length=0;n<t.length;n++){var s=t[n];-1!==this.frameNames.indexOf(s)&&i.push(this.texture.get(s))}return 0<i.length?e.defaultFrame=i[0]:e.defaultFrame=this.defaultFrame,this},addEmitter:function(t){return this.emitters.add(t)},createEmitter:function(t){return this.addEmitter(new h(this,t))},removeEmitter:function(t){return this.emitters.remove(t,!0)},addGravityWell:function(t){return this.wells.add(t)},createGravityWell:function(t){return this.addGravityWell(new a(t))},emitParticle:function(t,e,i){for(var n=this.emitters.list,s=0;s<n.length;s++){var r=n[s];r.active&&r.emitParticle(t,e,i)}return this},emitParticleAt:function(t,e,i){return this.emitParticle(i,t,e)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(t,e){e*=this.timeScale;for(var i=this.emitters.list,n=0;n<i.length;n++){var s=i[n];s.active&&s.preUpdate(t,e)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});t.exports=c},function(t,e,i){var n=i(35),s=i(133),r=i(31),a=i(0),o=i(11),h=i(33),l=i(109),c=i(15),u=i(1),d=i(92),f=i(1079),p=i(141),g=i(12),m=i(222),v=new a({Extends:c,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Crop,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.ScrollFactor,o.Tint,o.Transform,o.Visible,f],initialize:function(t,e,i,n,a,o,l){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=32),void 0===a&&(a=32),c.call(this,t,"RenderTexture"),this.renderer=t.sys.renderer,this.textureManager=t.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,void 0===o?(this.canvas=r.create2D(this,n,a),this.texture=t.sys.textures.addCanvas(m(),this.canvas),this.frame=this.texture.get()):(this.texture=t.sys.textures.get(o),this.frame=this.texture.get(l),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new s(0,0,n,a),this.renderTarget=null;var f=this.renderer;f?f.type===h.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new p(f,n,a,1,0,!1)):f.type===h.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=u,this.camera.setScene(t),this.setPosition(e,i),void 0===o&&this.setSize(n,a),this.setOrigin(0,0),this.initPipeline(d.SINGLE_PIPELINE)},setSize:function(t,e){return this.resize(t,e)},resize:function(t,e){void 0===e&&(e=t);var i,n,s=this.frame;t!==this.width||e!==this.height?"__BASE"===s.name&&(this.canvas.width=t,this.canvas.height=e,this.texture.width=t,this.texture.height=e,(i=this.renderTarget)&&(i.resize(t,e),s.glTexture=i.texture,s.source.isRenderTexture=!0,s.source.isGLTexture=!0,s.source.glTexture=i.texture),this.camera.setSize(t,e),s.source.width=t,s.source.height=e,s.setSize(t,e),this.width=t,this.height=e):(n=this.texture.getSourceImage(),s.cutX+t>n.width&&(t=n.width-s.cutX),s.cutY+e>n.height&&(e=n.height-s.cutY),s.setSize(t,e,s.cutX,s.cutY)),this.updateDisplayOrigin();var r=this.input;return r&&!r.customHitArea&&(r.hitArea.width=t,r.hitArea.height=e),this},setGlobalTint:function(t){return this.globalTint=t,this},setGlobalAlpha:function(t){return this.globalAlpha=t,this},saveTexture:function(t){return this.textureManager.renameTexture(this.texture.key,t),this._saved=!0,this.texture},fill:function(t,e,i,n,s,r){var a=this.frame,o=this.camera,h=this.renderer;void 0===e&&(e=1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=a.cutWidth),void 0===r&&(r=a.cutHeight);var l,c,u,d,f,p,m=(t>>16&255)/255,v=(t>>8&255)/255,y=(255&t)/255,_=this.renderTarget;return o.preRender(),_?(_.bind(!0),(l=this.pipeline).manager.set(l),c=_.width,u=_.height,d=h.width/c,f=h.height/u,l.drawFillRect(i*d,n*f,s*d,r*f,g.getTintFromFloats(y,v,m,1),e),_.unbind(!0)):(p=this.context,h.setContext(p),p.fillStyle="rgba("+m+","+v+","+y+","+e+")",p.fillRect(i+a.cutX,n+a.cutY,s,r),h.setContext()),this.dirty=!0,this},clear:function(){var t,e;return this.dirty&&((t=this.renderTarget)?t.clear():((e=this.context).save(),e.setTransform(1,0,0,1,0,0),e.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),e.restore()),this.dirty=!1),this},erase:function(t,e,i){return this._eraseMode=!0,this.draw(t,e,i,1,16777215),this._eraseMode=!1,this},draw:function(t,e,i,n,s){return this.beginDraw(),this.batchDraw(t,e,i,n,s),this.endDraw(),this},drawFrame:function(t,e,i,n,s,r){return this.beginDraw(),this.batchDrawFrame(t,e,i,n,s,r),this.endDraw(),this},beginDraw:function(){var t=this.camera,e=this.renderer,i=this.renderTarget;return t.preRender(),i?e.beginCapture(i.width,i.height):e.setContext(this.context),this},batchDraw:function(t,e,i,n,s){return void 0===n&&(n=this.globalAlpha),s=void 0===s?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(s>>16)+(65280&s)+((255&s)<<16),Array.isArray(t)||(t=[t]),this.batchList(t,e,i,n,s),this},batchDrawFrame:function(t,e,i,n,s,r){void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=this.globalAlpha),r=void 0===r?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(r>>16)+(65280&r)+((255&r)<<16);var a=this.textureManager.getFrame(t,e);return a&&(this.renderTarget?this.pipeline.batchTextureFrame(a,i,n,r,s,this.camera.matrix,null):this.batchTextureFrame(a,i+this.frame.cutX,n+this.frame.cutY,s,r)),this},endDraw:function(t){void 0===t&&(t=this._eraseMode);var e,i=this.renderer,n=this.renderTarget;return n?(e=i.endCapture(),i.pipelines.setUtility().blitFrame(e,n,1,!1,!1,t),i.resetScissor(),i.resetViewport()):i.setContext(),this.dirty=!0,this},batchList:function(t,e,i,n,s){for(var r=0;r<t.length;r++){var a=t[r];a&&a!==this&&(a.renderWebGL||a.renderCanvas?this.drawGameObject(a,e,i):a.isParent||a.list?this.batchGroup(a.getChildren(),e,i):"string"==typeof a?this.batchTextureFrameKey(a,null,e,i,n,s):a instanceof l?this.batchTextureFrame(a,e,i,n,s):Array.isArray(a)&&this.batchList(a,e,i,n,s))}},batchGroup:function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),e+=this.frame.cutX,i+=this.frame.cutY;for(var n=0;n<t.length;n++){var s,r,a=t[n];a.willRender(this.camera)&&(s=a.x+e,r=a.y+i,this.drawGameObject(a,s,r))}},batchGameObjectWebGL:function(t,e,i){void 0===e&&(e=t.x),void 0===i&&(i=t.y);var n=t.x,s=t.y;t.setPosition(e+this.frame.cutX,i+this.frame.cutY),t.renderDirect?t.renderDirect(this.renderer,t,this.camera):t.renderWebGL(this.renderer,t,this.camera),t.setPosition(n,s)},batchGameObjectCanvas:function(t,e,i){void 0===e&&(e=t.x),void 0===i&&(i=t.y);var s,r=t.x,a=t.y;this._eraseMode&&(s=t.blendMode,t.blendMode=n.ERASE),t.setPosition(e+this.frame.cutX,i+this.frame.cutY),t.renderCanvas(this.renderer,t,this.camera,null),t.setPosition(r,a),this._eraseMode&&(t.blendMode=s)},batchTextureFrameKey:function(t,e,i,n,s,r){var a=this.textureManager.getFrame(t,e);a&&this.batchTextureFrame(a,i,n,s,r)},batchTextureFrame:function(t,e,i,n,s){var r,a,o,h;void 0===e&&(e=0),void 0===i&&(i=0),e+=this.frame.cutX,i+=this.frame.cutY,this.renderTarget?this.pipeline.batchTextureFrame(t,e,i,s,n,this.camera.matrix,null):(r=this.context,a=t.canvasData,o=t.source.image,h=this.camera.matrix,r.save(),r.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",r.globalAlpha=n,h.setToContext(r),r.drawImage(o,a.x,a.y,a.width,a.height,e,i,a.width,a.height),r.restore())},snapshotArea:function(t,e,i,n,s,r,a){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,s,!1,t,e,i,n,r,a):this.renderer.snapshotCanvas(this.canvas,s,!1,t,e,i,n,r,a),this},snapshot:function(t,e,i){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,t,!1,0,0,this.width,this.height,e,i):this.renderer.snapshotCanvas(this.canvas,t,!1,0,0,this.width,this.height,e,i),this},snapshotPixel:function(t,e,i){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,i,!0,t,e):this.renderer.snapshotCanvas(this.canvas,i,!0,t,e),this},preDestroy:function(){this._saved||(r.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});t.exports=v},function(t,e){t.exports=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}},function(t,e,i){var n=i(164),s=i(0),r=i(11),a=i(15),o=i(92),h=i(1085),l=i(3),c=new s({Extends:a,Mixins:[r.AlphaSingle,r.BlendMode,r.Depth,r.Flip,r.Mask,r.Pipeline,r.Size,r.Texture,r.Transform,r.Visible,r.ScrollFactor,h],initialize:function(t,e,i,s,r,h,c,u,d){void 0===s&&(s="__DEFAULT"),void 0===h&&(h=2),void 0===c&&(c=!0),a.call(this,t,"Rope"),this.anims=new n(this),this.points=h,this.vertices,this.uv,this.colors,this.alphas,this.tintFill="__DEFAULT"===s,this.dirty=!1,this.horizontal=c,this._flipX=!1,this._flipY=!1,this._perp=new l,this.debugCallback=null,this.debugGraphic=null,this.setTexture(s,r),this.setPosition(e,i),this.setSizeToFrame(),this.initPipeline(o.ROPE_PIPELINE),Array.isArray(h)&&this.resizeArrays(h.length),this.setPoints(h,u,d),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(t,e){var i=this.anims.currentFrame;this.anims.update(t,e),this.anims.currentFrame!==i&&(this.updateUVs(),this.updateVertices())},play:function(t,e,i){return this.anims.play(t,e,i),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(t,e,i){return void 0===t&&(t=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(t,e,i))},setVertical:function(t,e,i){return void 0===t&&(t=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(t,e,i)):this},setTintFill:function(t){return void 0===t&&(t=!1),this.tintFill=t,this},setAlphas:function(t,e){var i=this.points.length;if(i<1)return this;var n=this.alphas;void 0===t?t=[1]:Array.isArray(t)||void 0!==e||(t=[t]);var s=0;if(void 0!==e)for(a=0;a<i;a++)n[s=2*a]=t,n[s+1]=e;else if(t.length===i)for(a=0;a<i;a++)n[s=2*a]=t[a],n[s+1]=t[a];else for(var r=t[0],a=0;a<i;a++)s=2*a,t.length>s&&(r=t[s]),n[s]=r,t.length>s+1&&(r=t[s+1]),n[s+1]=r;return this},setColors:function(t){var e=this.points.length;if(e<1)return this;var i=this.colors;void 0===t?t=[16777215]:Array.isArray(t)||(t=[t]);var n=0;if(t.length===e)for(r=0;r<e;r++)i[n=2*r]=t[r],i[n+1]=t[r];else for(var s=t[0],r=0;r<e;r++)n=2*r,t.length>n&&(s=t[n]),i[n]=s,t.length>n+1&&(s=t[n+1]),i[n+1]=s;return this},setPoints:function(t,e,i){if(void 0===t&&(t=2),"number"==typeof t){var n,s,r,a=t;if(a<2&&(a=2),t=[],this.horizontal)for(r=-this.frame.halfWidth,s=this.frame.width/(a-1),n=0;n<a;n++)t.push({x:r+n*s,y:0});else for(r=-this.frame.halfHeight,s=this.frame.height/(a-1),n=0;n<a;n++)t.push({x:0,y:r+n*s})}var o=t.length,h=this.points.length;return o<1?console.warn("Rope: Not enough points given"):(1===o&&(t.unshift({x:0,y:0}),o++),h!==o&&this.resizeArrays(o),this.points=t,this.updateUVs(),null!=e&&this.setColors(e),null!=i&&this.setAlphas(i)),this},updateUVs:function(){for(var t=this.uv,e=this.points.length,i=this.frame.u0,n=this.frame.v0,s=this.frame.u1,r=this.frame.v1,a=(s-i)/(e-1),o=(r-n)/(e-1),h=0;h<e;h++){var l,c,u,d=4*h,f=this.horizontal?(u=l=this._flipX?s-h*a:i+h*a,this._flipY?(c=r,n):(c=n,r)):(u=this._flipX?(l=i,s):(l=s,i),c=this._flipY?r-h*o:n+h*o);t[0+d]=l,t[1+d]=c,t[2+d]=u,t[3+d]=f}return this},resizeArrays:function(t){var e=this.colors,i=this.alphas;this.vertices=new Float32Array(4*t),this.uv=new Float32Array(4*t),e=new Uint32Array(2*t),i=new Float32Array(2*t);for(var n=0;n<2*t;n++)e[n]=16777215,i[n]=1;return this.colors=e,this.alphas=i,this.dirty=!0,this},updateVertices:function(){var t=this._perp,e=this.points,i=this.vertices,n=e.length;if(this.dirty=!1,!(n<1)){for(var s=e[0],r=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,a=0;a<n;a++){var o=e[a],h=4*a,l=a<n-1?e[a+1]:o;t.x=l.y-s.y,t.y=-(l.x-s.x);var c=t.length();t.x/=c,t.y/=c,t.x*=r,t.y*=r,i[h]=o.x+t.x,i[1+h]=o.y+t.y,i[2+h]=o.x-t.x,i[3+h]=o.y-t.y,s=o}return this}},setDebug:function(t,e){return this.debugGraphic=t,this.debugCallback=t||e?e||this.renderDebugVerts:null,this},renderDebugVerts:function(t,e,i){var n=t.debugGraphic,s=i[0],r=i[1],a=i[2],o=i[3];n.lineBetween(s,r,a,o);for(var h=4;h<e;h+=4){var l=i[h+0],c=i[h+1],u=i[h+2],d=i[h+3];n.lineBetween(s,r,l,c),n.lineBetween(a,o,u,d),n.lineBetween(a,o,l,c),n.lineBetween(l,c,u,d),s=l,r=c,a=u,o=d}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(t){return this._flipX=t,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(t){return this._flipY=t,this.updateUVs()}}});t.exports=c},function(t,e,i){var n=i(142),s=i(31),r=i(0),a=i(11),o=i(22),h=i(15),l=i(458),c=i(6),u=i(202),d=i(1088),f=i(459),p=new r({Extends:h,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Crop,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Tint,a.Transform,a.Visible,d],initialize:function(t,e,i,n,r){void 0===e&&(e=0),void 0===i&&(i=0),h.call(this,t,"Text"),this.renderer=t.sys.renderer,this.setPosition(e,i),this.setOrigin(0,0),this.initPipeline(),this.canvas=s.create(this),this.context=this.canvas.getContext("2d"),this.style=new f(this,r),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,0===this.style.resolution&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(n),r&&r.padding&&this.setPadding(r.padding),r&&r.lineSpacing&&this.setLineSpacing(r.lineSpacing),t.sys.game.events.on(o.CONTEXT_RESTORED,(function(){this.dirty=!0}),this)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",n(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(t){var e=this.style;if(e.wordWrapCallback){var i=e.wordWrapCallback.call(e.wordWrapCallbackScope,t,this);return Array.isArray(i)&&(i=i.join("\n")),i}return e.wordWrapWidth?e.wordWrapUseAdvanced?this.advancedWordWrap(t,this.context,this.style.wordWrapWidth):this.basicWordWrap(t,this.context,this.style.wordWrapWidth):t},advancedWordWrap:function(t,e,i){for(var n="",s=t.replace(/ +/gi," ").split(this.splitRegExp),r=s.length,a=0;a<r;a++){var o="",h=(h=s[a]).replace(/^ *|\s*$/gi,"");if(e.measureText(h).width<i)n+=h+"\n";else{for(var l=i,c=h.split(" "),u=0;u<c.length;u++){var d=c[u],f=d+" ",p=e.measureText(f).width;if(l<p){if(0===u){for(var g=f;g.length&&(g=g.slice(0,-1),!((p=e.measureText(g).width)<=l)););if(!g.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var m=d.substr(g.length);c[u]=m,o+=g}var v=c[u].length?u:u+1,y=c.slice(v).join(" ").replace(/[ \n]*$/gi,"");s[a+1]=y+" "+(s[a+1]||""),r=s.length;break}o+=f,l-=p}n+=o.replace(/[ \n]*$/gi,"")+"\n"}}return n.replace(/[\s|\n]*$/gi,"")},basicWordWrap:function(t,e,i){for(var n="",s=t.split(this.splitRegExp),r=s.length-1,a=e.measureText(" ").width,o=0;o<=r;o++){for(var h=i,l=s[o].split(" "),c=l.length-1,u=0;u<=c;u++){var d=l[u],f=e.measureText(d).width,p=f;u<c&&(p+=a),h<p&&0<u&&(n+="\n",h=i),n+=d,u<c?(n+=" ",h-=p):h-=f}o<r&&(n+="\n")}return n},getWrappedText:function(t){return void 0===t&&(t=this._text),this.style.syncFont(this.canvas,this.context),this.runWordWrap(t).split(this.splitRegExp)},setText:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this._text&&(this._text=t.toString(),this.updateText()),this},setStyle:function(t){return this.style.setStyle(t)},setFont:function(t){return this.style.setFont(t)},setFontFamily:function(t){return this.style.setFontFamily(t)},setFontSize:function(t){return this.style.setFontSize(t)},setFontStyle:function(t){return this.style.setFontStyle(t)},setFixedSize:function(t,e){return this.style.setFixedSize(t,e)},setBackgroundColor:function(t){return this.style.setBackgroundColor(t)},setFill:function(t){return this.style.setFill(t)},setColor:function(t){return this.style.setColor(t)},setStroke:function(t,e){return this.style.setStroke(t,e)},setShadow:function(t,e,i,n,s,r){return this.style.setShadow(t,e,i,n,s,r)},setShadowOffset:function(t,e){return this.style.setShadowOffset(t,e)},setShadowColor:function(t){return this.style.setShadowColor(t)},setShadowBlur:function(t){return this.style.setShadowBlur(t)},setShadowStroke:function(t){return this.style.setShadowStroke(t)},setShadowFill:function(t){return this.style.setShadowFill(t)},setWordWrapWidth:function(t,e){return this.style.setWordWrapWidth(t,e)},setWordWrapCallback:function(t,e){return this.style.setWordWrapCallback(t,e)},setAlign:function(t){return this.style.setAlign(t)},setResolution:function(t){return this.style.setResolution(t)},setLineSpacing:function(t){return this.lineSpacing=t,this.updateText()},setPadding:function(t,e,i,n){var s,r,a;return"object"==typeof t?(i=null!==(r=c(s=t,"x",null))?t=r:(t=c(s,"left",0),c(s,"right",t)),n=null!==(a=c(s,"y",null))?e=a:(e=c(s,"top",0),c(s,"bottom",e))):(void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=t),void 0===n&&(n=e)),this.padding.left=t,this.padding.top=e,this.padding.right=i,this.padding.bottom=n,this.updateText()},setMaxLines:function(t){return this.style.setMaxLines(t)},updateText:function(){var t=this.canvas,e=this.context,i=this.style,n=i.resolution,s=i.metrics;i.syncFont(t,e);var r=this._text;(i.wordWrapWidth||i.wordWrapCallback)&&(r=this.runWordWrap(this._text));var a,o=r.split(this.splitRegExp),h=l(this,s,o),c=this.padding;0===i.fixedWidth?(this.width=h.width+c.left+c.right,a=h.width):(this.width=i.fixedWidth,(a=this.width-c.left-c.right)<h.width&&(a=h.width)),0===i.fixedHeight?this.height=h.height+c.top+c.bottom:this.height=i.fixedHeight;var u,d,f=this.width,p=this.height;this.updateDisplayOrigin(),f*=n,p*=n,f=Math.max(f,1),p=Math.max(p,1),t.width!==f||t.height!==p?(t.width=f,t.height=p,this.frame.setSize(f,p),i.syncFont(t,e)):e.clearRect(0,0,f,p),e.save(),e.scale(n,n),i.backgroundColor&&(e.fillStyle=i.backgroundColor,e.fillRect(0,0,f,p)),i.syncStyle(t,e),e.textBaseline="alphabetic",e.translate(c.left,c.top);for(var g=0;g<h.lines;g++){if(u=i.strokeThickness/2,d=i.strokeThickness/2+g*h.lineHeight+s.ascent,0<g&&(d+=h.lineSpacing*g),i.rtl)u=f-u;else if("right"===i.align)u+=a-h.lineWidths[g];else if("center"===i.align)u+=(a-h.lineWidths[g])/2;else if("justify"===i.align&&.85<=h.lineWidths[g]/h.width){var m=h.width-h.lineWidths[g],v=e.measureText(" ").width,y=o[g].trim(),_=y.split(" ");m+=(o[g].length-y.length)*v;for(var x=Math.floor(m/v),w=0;0<x;)_[w]+=" ",w=(w+1)%(_.length-1||1),--x;o[g]=_.join(" ")}this.autoRound&&(u=Math.round(u),d=Math.round(d)),i.strokeThickness&&(this.style.syncShadow(e,i.shadowStroke),e.strokeText(o[g],u,d)),i.color&&(this.style.syncShadow(e,i.shadowFill),e.fillText(o[g],u,d))}e.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(t,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var b=this.input;return b&&!b.customHitArea&&(b.hitArea.width=this.width,b.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(t){this.setText(t)}},toJSON:function(){var t=a.ToJSON(this),e={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=e,t},preDestroy:function(){this.style.rtl&&u(this.canvas),s.remove(this.canvas),this.texture.destroy()}});t.exports=p},function(t,e,i){var n=i(31),s=i(0),r=i(11),a=i(22),o=i(15),h=i(361),l=i(192),c=i(1091),u=i(3),d=new s({Extends:o,Mixins:[r.Alpha,r.BlendMode,r.ComputedSize,r.Crop,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Tint,r.Transform,r.Visible,c],initialize:function(t,e,i,s,r,l,c){var d=t.sys.renderer;o.call(this,t,"TileSprite");var f=t.sys.textures.get(l),p=f.get(c);r=s&&r?(s=Math.floor(s),Math.floor(r)):(s=p.width,p.height),this._tilePosition=new u,this._tileScale=new u(1,1),this.dirty=!1,this.renderer=d,this.canvas=n.create(this,s,r),this.context=this.canvas.getContext("2d"),this.displayTexture=f,this.displayFrame=p,this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=h(p.width),this.potHeight=h(p.height),this.fillCanvas=n.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(e,i),this.setSize(s,r),this.setFrame(c),this.setOriginFromFrame(),this.initPipeline(),t.sys.game.events.on(a.CONTEXT_RESTORED,(function(t){var e;t&&(e=t.gl,this.dirty=!0,this.fillPattern=null,this.fillPattern=t.createTexture2D(0,e.LINEAR,e.LINEAR,e.REPEAT,e.REPEAT,e.RGBA,this.fillCanvas,this.potWidth,this.potHeight))}),this)},setTexture:function(t,e){return this.displayTexture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t){var e=this.displayTexture.get(t);return this.potWidth=h(e.width),this.potHeight=h(e.height),this.canvas.width=0,e.cutWidth&&e.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this.displayFrame=e,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(t,e){return void 0!==t&&(this.tilePositionX=t),void 0!==e&&(this.tilePositionY=e),this},setTileScale:function(t,e){return void 0===t&&(t=this.tileScaleX),void 0===e&&(e=t),this.tileScaleX=t,this.tileScaleY=e,this},updateTileTexture:function(){if(this.dirty&&this.renderer){var t=this.displayFrame;if(t.source.isRenderTexture||t.source.isGLTexture)return console.warn("TileSprites can only use Image or Canvas based textures"),void(this.dirty=!1);var e=this.fillContext,i=this.fillCanvas,n=this.potWidth,s=this.potHeight;this.renderer&&this.renderer.gl||(n=t.cutWidth,s=t.cutHeight),e.clearRect(0,0,n,s),i.width=n,i.height=s,e.drawImage(t.source.image,t.cutX,t.cutY,t.cutWidth,t.cutHeight,0,0,n,s),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(i,this.fillPattern):this.fillPattern=e.createPattern(i,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var t,e,i,n,s,r=this.canvas;r.width===this.width&&r.height===this.height||(r.width=this.width,r.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl||(t=this.context,this.scene.sys.game.config.antialias||l.disable(t),e=this._tileScale.x,i=this._tileScale.y,n=this._tilePosition.x,s=this._tilePosition.y,t.clearRect(0,0,this.width,this.height),t.save(),t.scale(e,i),t.translate(-n,-s),t.fillStyle=this.fillPattern,t.fillRect(n,s,this.width/e,this.height/i),t.restore()),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),n.remove(this.canvas),n.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(t){this._tilePosition.x=t,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(t){this._tilePosition.y=t,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(t){this._tileScale.x=t,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(t){this._tileScale.y=t,this.dirty=!0}}});t.exports=d},function(t,e,i){var n=i(0),s=i(18),r=i(11),a=i(75),o=i(22),h=i(51),l=i(15),c=i(70),u=i(222),d=i(1094),f=i(14),p=new n({Extends:l,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Size,r.TextureCrop,r.Tint,r.Transform,r.Visible,d],initialize:function(t,e,i,n){l.call(this,t,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=u(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=f.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(e,i),this.initPipeline(),n&&this.changeSource(n,!1);var s=t.sys.game.events;s.on(o.PAUSE,this.globalPause,this),s.on(o.RESUME,this.globalResume,this);var r=t.sys.sound;r&&r.on(c.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(t,e,i){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var n=this.video;if(!n)return console.warn("Video not loaded"),this;void 0===t&&(t=n.loop);var s=this.scene.sys.sound;s&&s.mute&&this.setMute(!0),isNaN(e)||(this._markerIn=e),!isNaN(i)&&e<i&&(this._markerOut=i),n.loop=t;var r=this._callbacks,a=n.play();return void 0!==a?a.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(n.addEventListener("playing",r.play,!0),n.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),n.addEventListener("ended",r.end,!0),n.addEventListener("timeupdate",r.time,!0),n.addEventListener("seeking",r.seeking,!0),n.addEventListener("seeked",r.seeked,!0),this},changeSource:function(t,e,i,n,s){void 0===e&&(e=!0),this.video&&this.stop();var r=this.scene.sys.cache.video.get(t);return r?(this.video=r,this._cacheKey=t,this._codePaused=r.paused,this._codeMuted=r.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,r,r.videoWidth,r.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,r.videoWidth,r.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(a.VIDEO_CREATED,this,r.videoWidth,r.videoHeight)):this.updateTexture(),r.currentTime=0,this._lastUpdate=0,e&&this.play(i,n,s)):this.video=null,this},addMarker:function(t,e,i){return!isNaN(e)&&0<=e&&!isNaN(i)&&(this.markers[t]=[e,i]),this},playMarker:function(t,e){var i=this.markers[t];return i&&this.play(e,i[0],i[1]),this},removeMarker:function(t){return delete this.markers[t],this},snapshot:function(t,e){return void 0===t&&(t=this.width),void 0===e&&(e=this.height),this.snapshotArea(0,0,this.width,this.height,t,e)},snapshotArea:function(t,e,i,n,s,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.width),void 0===n&&(n=this.height),void 0===s&&(s=i),void 0===r&&(r=n);var a=this.video,o=this.snapshotTexture;return o?o.setSize(s,r):(o=this.scene.sys.textures.createCanvas(u(),s,r),this.snapshotTexture=o),a&&o.context.drawImage(a,t,e,i,n,0,0,s,r),o.update()},saveSnapshotTexture:function(t){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,t):this.snapshotTexture=this.scene.sys.textures.createCanvas(t,this.width,this.height),this.snapshotTexture},loadURL:function(t,e,i){void 0===e&&(e="loadeddata"),void 0===i&&(i=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var n=document.createElement("video");return n.controls=!1,i&&(n.muted=!0,n.defaultMuted=!0,n.setAttribute("autoplay","autoplay")),n.setAttribute("playsinline","playsinline"),n.setAttribute("preload","auto"),n.addEventListener("error",this._callbacks.error,!0),n.src=t,n.load(),this.video=n,this},loadMediaStream:function(t,e,i){void 0===e&&(e="loadeddata"),void 0===i&&(i=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var n=document.createElement("video");n.controls=!1,i&&(n.muted=!0,n.defaultMuted=!0,n.setAttribute("autoplay","autoplay")),n.setAttribute("playsinline","playsinline"),n.setAttribute("preload","auto"),n.addEventListener("error",this._callbacks.error,!0);try{n.srcObject=t}catch(e){n.src=window.URL.createObjectURL(t)}return n.load(),this.video=n,this},playPromiseSuccessHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(a.VIDEO_PLAY,this),-1<this._markerIn&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(t){this.scene.sys.input.once(h.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(a.VIDEO_ERROR,this,t)},playHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(a.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(t){this.stop(),this.emit(a.VIDEO_ERROR,this,t)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(a.VIDEO_UNLOCKED,this),-1<this._markerIn&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(a.VIDEO_PLAY,this)},completeHandler:function(){this.emit(a.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(a.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var t,e=this.video;!e||(t=e.currentTime)!==this._lastUpdate&&(this._lastUpdate=t,this.updateTexture(),t>=this._markerOut&&(e.loop?(e.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=t,this.emit(a.VIDEO_LOOP,this)):(this.emit(a.VIDEO_COMPLETE,this),this.stop())))},checkVideoProgress:function(){2<=this.video.readyState?this.updateTexture():(this.retry--,0<this.retry?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(a.VIDEO_TIMEOUT,this))},updateTexture:function(){var t,e=this.video,i=e.videoWidth,n=e.videoHeight;this.videoTexture?((t=this.videoTextureSource).source!==e&&(t.source=e,t.width=i,t.height=n),t.update()):(this.videoTexture=this.scene.sys.textures.create(this._key,e,i,n),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,i,n),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(a.VIDEO_CREATED,this,i,n))},getVideoKey:function(){return this._cacheKey},seekTo:function(t){var e,i,n=this.video;return n&&((e=n.duration)===1/0||isNaN(e)||(i=e*t,this.setCurrentTime(i))),this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(t){var e,i,n=this.video;return n&&("string"==typeof t&&(e=t[0],i=parseFloat(t.substr(1)),"+"===e?t=n.currentTime+i:"-"===e&&(t=n.currentTime-i)),n.currentTime=t,this._lastUpdate=t),this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(a.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(a.VIDEO_SEEKED,this),this.video&&this.updateTexture()},getProgress:function(){var t=this.video;if(t){var e=t.currentTime,i=t.duration;if(i!==1/0&&!isNaN(i))return e/i}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(t){void 0===t&&(t=!0),this._codeMuted=t;var e=this.video;return e&&(e.muted=!!this._systemMuted||t),this},isMuted:function(){return this._codeMuted},globalMute:function(t,e){this._systemMuted=e;var i=this.video;i&&(i.muted=!!this._codeMuted||e)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(t){void 0===t&&(t=!0);var e=this.video;return this._codePaused=t,e&&(t?e.paused||e.pause():t||e.paused&&!this._systemPaused&&e.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(t){return void 0===t&&(t=1),this.video&&(this.video.volume=s(t,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(t){return this.video&&(this.video.playbackRate=t),this},getLoop:function(){return!!this.video&&this.video.loop},setLoop:function(t){return void 0===t&&(t=!0),this.video&&(this.video.loop=t),this},isPlaying:function(){return!!this.video&&!(this.video.paused||this.video.ended)},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(t,e){return void 0===e&&(e=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,t),this._key=t,this.flipY=e,this.videoTextureSource&&this.videoTextureSource.setFlipY(e),this.videoTexture},stop:function(){var t=this.video;if(t){var e=this._callbacks;for(var i in e)t.removeEventListener(i,e[i],!0);t.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(a.VIDEO_STOP,this),this},removeVideoElement:function(){var t=this.video;if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("autoplay"),t.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var t=this.scene.sys.game.events;t.off(o.PAUSE,this.globalPause,this),t.off(o.RESUME,this.globalResume,this);var e=this.scene.sys.sound;e&&e.off(c.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});t.exports=p},function(t,e,i){var n=i(0),s=i(228),r=i(470),a=i(56),o=new n({initialize:function(t){this.type=a.POLYGON,this.area=0,this.points=[],t&&this.setTo(t)},contains:function(t,e){return s(this,t,e)},setTo:function(t){if(this.area=0,this.points=[],"string"==typeof t&&(t=t.split(" ")),!Array.isArray(t))return this;for(var e,i=Number.MAX_VALUE,n=0;n<t.length;n++)e={x:0,y:0},"number"==typeof t[n]||"string"==typeof t[n]?(e.x=parseFloat(t[n]),e.y=parseFloat(t[n+1]),n++):Array.isArray(t[n])?(e.x=t[n][0],e.y=t[n][1]):(e.x=t[n].x,e.y=t[n].y),this.points.push(e),e.y<i&&(i=e.y);return this.calculateArea(i),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var t,e,i=0,n=0;n<this.points.length-1;n++)t=this.points[n],i+=((e=this.points[n+1]).x-t.x)*(t.y+e.y);return t=this.points[0],e=this.points[this.points.length-1],i+=(t.x-e.x)*(e.y+t.y),this.area=.5*-i,this.area},getPoints:function(t,e,i){return r(this,t,e,i)}});t.exports=o},function(t,e){t.exports=function(t,e,i){for(var n=!1,s=-1,r=t.points.length-1;++s<t.points.length;r=s){var a=t.points[s].x,o=t.points[s].y,h=t.points[r].x,l=t.points[r].y;(o<=i&&i<l||l<=i&&i<o)&&e<(h-a)*(i-o)/(l-o)+a&&(n=!n)}return n}},function(t,e,i){var n=i(0),s=i(11),r=i(15),a=i(2),o=i(17),h=i(478),l=i(1176),c=i(25),u=new n({Extends:r,Mixins:[s.ComputedSize,s.Depth,s.GetBounds,s.Mask,s.Origin,s.ScrollFactor,s.Transform,s.Visible,l],initialize:function(t,e,i,n,s,a,o,h){void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=128),void 0===a&&(a=128),r.call(this,t,"Shader"),this.blendMode=-1,this.shader;var l=t.sys.renderer;this.renderer=l,this.gl=l.gl,this.vertexData=new ArrayBuffer(2*Float32Array.BYTES_PER_ELEMENT*6),this.vertexBuffer=l.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new c,this._tempMatrix2=new c,this._tempMatrix3=new c,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=l.width,this._rendererHeight=l.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(i,n),this.setSize(s,a),this.setOrigin(.5,.5),this.setShader(e,o,h)},willRender:function(t){return!!this.renderToTexture||!(r.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},setRenderToTexture:function(t,e){var i,n,s;return void 0===e&&(e=!1),this.renderToTexture||(i=this.width,n=this.height,s=this.renderer,this.glTexture=s.createTextureFromSource(null,i,n,0),this.glTexture.flipY=e,this.framebuffer=s.createFramebuffer(i,n,this.glTexture,!1),this._rendererWidth=i,this._rendererHeight=n,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),t&&(this.texture=this.scene.sys.textures.addGLTexture(t,this.glTexture,i,n))),this.shader&&(s.pipelines.clear(),this.load(),this.flush(),s.pipelines.rebind()),this},setShader:function(t,e,i){if(void 0===e&&(e=[]),"string"==typeof t){var n=this.scene.sys.cache.shader;if(!n.has(t))return console.warn("Shader missing: "+t),this;this.shader=n.get(t)}else this.shader=t;var s=this.gl,r=this.renderer;this.program&&s.deleteProgram(this.program);var a=r.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);s.uniformMatrix4fv(s.getUniformLocation(a,"uViewMatrix"),!1,this.viewMatrix),s.uniformMatrix4fv(s.getUniformLocation(a,"uProjectionMatrix"),!1,this.projectionMatrix),s.uniform2f(s.getUniformLocation(a,"uResolution"),this.width,this.height),this.program=a;var h=new Date,l={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[h.getFullYear(),h.getMonth(),h.getDate(),60*h.getHours()*60+60*h.getMinutes()+h.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=o(!0,{},this.shader.uniforms,l):this.uniforms=l;for(var c=0;c<4;c++)e[c]&&this.setSampler2D("iChannel"+c,e[c],c,i);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(t){return this.pointer=t,this},projOrtho:function(t,e,i,n){var s=1/(t-e),r=1/(i-n),a=this.projectionMatrix;a[0]=-2*s,a[5]=-2*r,a[10]=-.001,a[12]=(t+e)*s,a[13]=(n+i)*r,a[14]=-0;var o=this.program,h=this.gl;this.renderer.setProgram(o),h.uniformMatrix4fv(h.getUniformLocation(o,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=e,this._rendererHeight=i},initUniforms:function(){var t=this.gl,e=this.renderer.glFuncMap,i=this.program;for(var n in this._textureCount=0,this.uniforms){var s=this.uniforms[n],r=s.type,a=e[r];s.uniformLocation=t.getUniformLocation(i,n),"sampler2D"!==r&&(s.glMatrix=a.matrix,s.glValueLength=a.length,s.glFunc=a.func)}},setSampler2DBuffer:function(t,e,i,n,s,r){void 0===s&&(s=0),void 0===r&&(r={});var a=this.uniforms[t];return a.value=e,r.width=i,r.height=n,a.textureData=r,this._textureCount=s,this.initSampler2D(a),this},setSampler2D:function(t,e,i,n){void 0===i&&(i=0);var s=this.scene.sys.textures;if(s.exists(e)){var r=s.getFrame(e);if(r.glTexture&&r.glTexture.isRenderTexture)return this.setSampler2DBuffer(t,r.glTexture,r.width,r.height,i,n);var a=this.uniforms[t],o=r.source;a.textureKey=e,a.source=o.image,a.value=r.glTexture,o.isGLTexture&&((n=n||{}).width=o.width,n.height=o.height),n&&(a.textureData=n),this._textureCount=i,this.initSampler2D(a)}return this},setUniform:function(t,e){return h(this.uniforms,t,e),this},getUniform:function(t){return a(this.uniforms,t,null)},setChannel0:function(t,e){return this.setSampler2D("iChannel0",t,0,e)},setChannel1:function(t,e){return this.setSampler2D("iChannel1",t,1,e)},setChannel2:function(t,e){return this.setSampler2D("iChannel2",t,2,e)},setChannel3:function(t,e){return this.setSampler2D("iChannel3",t,3,e)},initSampler2D:function(t){var e,i,n,s,r,o,h,l,c,u;t.value&&((e=this.gl).activeTexture(e.TEXTURE0+this._textureCount),e.bindTexture(e.TEXTURE_2D,t.value),(i=t.textureData)&&!t.value.isRenderTexture&&(n=e[a(i,"magFilter","linear").toUpperCase()],s=e[a(i,"minFilter","linear").toUpperCase()],r=e[a(i,"wrapS","repeat").toUpperCase()],o=e[a(i,"wrapT","repeat").toUpperCase()],h=e[a(i,"format","rgba").toUpperCase()],i.repeat&&(r=e.REPEAT,o=e.REPEAT),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!!i.flipY),i.width?(l=a(i,"width",512),c=a(i,"height",2),u=a(i,"border",0),e.texImage2D(e.TEXTURE_2D,0,h,l,c,u,h,e.UNSIGNED_BYTE,null)):e.texImage2D(e.TEXTURE_2D,0,h,e.RGBA,e.UNSIGNED_BYTE,t.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,s),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,o)),this.renderer.setProgram(this.program),e.uniform1i(t.uniformLocation,this._textureCount),this._textureCount++)},syncUniforms:function(){var t,e,i,n,s,r=this.gl,a=this.uniforms,o=0;for(var h in a)i=(t=a[h]).glFunc,e=t.glValueLength,n=t.uniformLocation,null!==(s=t.value)&&(1===e?t.glMatrix?i.call(r,n,t.transpose,s):i.call(r,n,s):2===e?i.call(r,n,s.x,s.y):3===e?i.call(r,n,s.x,s.y,s.z):4===e?i.call(r,n,s.x,s.y,s.z,s.w):"sampler2D"===t.type&&(r.activeTexture(r.TEXTURE0+o),r.bindTexture(r.TEXTURE_2D,s),r.uniform1i(n,o),o++))},load:function(t){var e,i,n=this.gl,s=this.width,r=this.height,a=this.renderer,o=this.program,h=this.viewMatrix;this.renderToTexture||(e=-this._displayOriginX,i=-this._displayOriginY,h[0]=t[0],h[1]=t[1],h[4]=t[2],h[5]=t[3],h[8]=t[4],h[9]=t[5],h[12]=h[0]*e+h[4]*i,h[13]=h[1]*e+h[5]*i),n.useProgram(o),n.uniformMatrix4fv(n.getUniformLocation(o,"uViewMatrix"),!1,h),n.uniform2f(n.getUniformLocation(o,"uResolution"),this.width,this.height);var l=this.uniforms,c=l.resolution;c.value.x=s,c.value.y=r,l.time.value=a.game.loop.getDuration();var u,d,f,p=this.pointer;p&&(u=l.mouse,d=p.x/s,f=1-p.y/r,u.value.x=d.toFixed(2),u.value.y=f.toFixed(2)),this.syncUniforms()},flush:function(){var t=this.width,e=this.height,i=this.program,n=this.gl,s=this.vertexBuffer,r=this.renderer,a=2*Float32Array.BYTES_PER_ELEMENT;this.renderToTexture&&(r.setFramebuffer(this.framebuffer),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT)),n.bindBuffer(n.ARRAY_BUFFER,s);var o=n.getAttribLocation(i,"inPosition");-1!==o&&(n.enableVertexAttribArray(o),n.vertexAttribPointer(o,2,n.FLOAT,!1,a,0));var h=this.vertexViewF32;h[3]=e,h[4]=t,h[5]=e,h[8]=t,h[9]=e,h[10]=t,n.bufferSubData(n.ARRAY_BUFFER,0,this.bytes.subarray(0,6*a)),n.drawArrays(n.TRIANGLES,0,6),this.renderToTexture&&r.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var t=this.gl;t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});t.exports=u},function(t,e,i){var n=i(0),s=i(11),r=i(36),a=i(116),o=i(15),h=i(479),l=i(480),c=i(19),u=i(69),d=i(1179),f=i(79),p=i(39),g=i(117),m=new n({Extends:o,Mixins:[s.AlphaSingle,s.BlendMode,s.Depth,s.Mask,s.Pipeline,s.Size,s.Texture,s.Transform,s.Visible,s.ScrollFactor,d],initialize:function(t,e,i,n,s,r,a,h,l,c,d,f){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n="__WHITE"),o.call(this,t,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new p,this.modelScale=new p(1,1,1),this.modelRotation=new p,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new u,this.viewPosition=new p,this.viewMatrix=new u,this.projectionMatrix=new u,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var g=t.sys.renderer;this.setPosition(e,i),this.setTexture(n,s),this.setSize(g.width,g.height),this.initPipeline(),this.setPerspective(g.width,g.height),r&&this.addVertices(r,a,h,l,c,d,f)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(t){return this.viewPosition.addScale(p.LEFT,t),this.dirtyCache[10]=1,this},panY:function(t){return this.viewPosition.y+=p.DOWN.y*t,this.dirtyCache[10]=1,this},panZ:function(t){return this.viewPosition.z+=t,this.dirtyCache[10]=1,this},setPerspective:function(t,e,i,n,s){return void 0===i&&(i=45),void 0===n&&(n=.01),void 0===s&&(s=1e3),this.projectionMatrix.perspective(r(i),t/e,n,s),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(t,e,i,n){return void 0===t&&(t=this.scene.sys.renderer.getAspectRatio()),void 0===e&&(e=1),void 0===i&&(i=-1e3),void 0===n&&(n=1e3),this.projectionMatrix.ortho(-t,t,-e,e,i,n),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach((function(t){t.destroy()})),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(t,e,i,n,s,r,a,o,h){var c=this.scene.sys.cache.obj.get(t);return c&&l(c,this,e,i,n,s,r,a,o,h),this},sortByDepth:function(t,e){return t.depth-e.depth},depthSort:function(){return f(this.faces,this.sortByDepth),this},addVertex:function(t,e,i,n,s,r,a){var o=new g(t,e,i,n,s,r,a);return this.vertices.push(o),o},addFace:function(t,e,i){var n=new a(t,e,i);return this.faces.push(n),this.dirtyCache[9]=-1,n},addVertices:function(t,e,i,n,s,r,a){var o=h(t,e,i,n,s,r,a);return o&&(this.faces=this.faces.concat(o.faces),this.vertices=this.vertices.concat(o.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(t){return this.faces[t]},getFaceAt:function(t,e,i){void 0===i&&(i=this.scene.sys.cameras.main);for(var n=c(this,i).calc,s=this.faces,r=[],a=0;a<s.length;a++){var o=s[a];o.contains(t,e,n)&&r.push(o)}return f(r,this.sortByDepth)},setDebug:function(t,e){return this.debugGraphic=t,this.debugCallback=t||e?e||this.renderDebug:null,this},isDirty:function(){var t=this.modelPosition,e=this.modelRotation,i=this.modelScale,n=this.dirtyCache,s=t.x,r=t.y,a=t.z,o=e.x,h=e.y,l=e.z,c=i.x,u=i.y,d=i.z,f=this.getFaceCount(),p=n[0],g=n[1],m=n[2],v=n[3],y=n[4],_=n[5],x=n[6],w=n[7],b=n[8],E=n[9];return n[0]=s,n[1]=r,n[2]=a,n[3]=o,n[4]=h,n[5]=l,n[6]=c,n[7]=u,n[8]=d,n[9]=f,p!==s||g!==r||m!==a||v!==o||y!==h||_!==l||x!==c||w!==u||b!==d||E!==f},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var t=this.dirtyCache;if(this.ignoreDirtyCache||t[10]||this.isDirty()){var e=this.width,i=this.height,n=this.viewMatrix,s=this.viewPosition;t[10]&&(n.identity(),n.translate(s),n.invert(),t[10]=0);var r=this.transformMatrix;r.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var a=s.z,o=this.faces,h=0;h<o.length;h++)o[h].transformCoordinatesLocal(r,e,i,a);this.depthSort()}},renderDebug:function(t,e){for(var i=t.debugGraphic,n=0;n<e.length;n++){var s=e[n],r=s.vertex1.tx,a=s.vertex1.ty,o=s.vertex2.tx,h=s.vertex2.ty,l=s.vertex3.tx,c=s.vertex3.ty;i.strokeTriangle(r,a,o,h,l,c)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});t.exports=m},function(t,e,i){var n=i(50);t.exports=function(t,e){return n(t.x,t.y,e.x,e.y)<=t.radius+e.radius}},function(t,e,i){var n=i(4),s=i(233);t.exports=function(t,e,i){var r,a,o,h,l,c,u,d,f,p,g,m,v,y,_,x,w;return void 0===i&&(i=[]),s(t,e)&&(r=t.x1,a=t.y1,o=t.x2,h=t.y2,0==(m=(g=2*((c=o-r)*(d=r-e.x)+(u=h-a)*(f=a-e.y)))*g-4*(p=c*c+u*u)*(d*d+f*f-(l=e.radius)*l))?(y=r+(v=-g/(2*p))*c,_=a+v*u,0<=v&&v<=1&&i.push(new n(y,_))):0<m&&(y=r+(x=(-g-Math.sqrt(m))/(2*p))*c,_=a+x*u,0<=x&&x<=1&&i.push(new n(y,_)),y=r+(w=(-g+Math.sqrt(m))/(2*p))*c,_=a+w*u,0<=w&&w<=1&&i.push(new n(y,_)))),i}},function(t,e,i){var n=i(66),s=new(i(4));t.exports=function(t,e,i){if(void 0===i&&(i=s),n(e,t.x1,t.y1))return i.x=t.x1,i.y=t.y1,!0;if(n(e,t.x2,t.y2))return i.x=t.x2,i.y=t.y2,!0;var r,a=t.x2-t.x1,o=t.y2-t.y1,h=e.x-t.x1,l=e.y-t.y1,c=a*a+o*o,u=a,d=o;return 0<c&&(u*=r=(h*a+l*o)/c,d*=r),i.x=t.x1+u,i.y=t.y1+d,u*u+d*d<=c&&0<=u*a+d*o&&n(e,i.x,i.y)}},function(t,e,i){var n=i(4),s=i(96),r=i(488);t.exports=function(t,e,i){if(void 0===i&&(i=[]),r(t,e))for(var a=e.getLineA(),o=e.getLineB(),h=e.getLineC(),l=e.getLineD(),c=[new n,new n,new n,new n],u=[s(a,t,c[0]),s(o,t,c[1]),s(h,t,c[2]),s(l,t,c[3])],d=0;d<4;d++)u[d]&&i.push(c[d]);return i}},function(t,e){t.exports=function(t,e,i,n){void 0===i&&(i=!1),void 0===n&&(n=[]);for(var s,r,a,o,h,l,c=t.x3-t.x1,u=t.y3-t.y1,d=t.x2-t.x1,f=t.y2-t.y1,p=c*c+u*u,g=c*d+u*f,m=d*d+f*f,v=p*m-g*g,y=0==v?0:1/v,_=t.x1,x=t.y1,w=0;w<e.length&&(r=(p*(l=d*(a=e[w].x-_)+f*(o=e[w].y-x))-g*(h=c*a+u*o))*y,!(0<=(s=(m*h-g*l)*y)&&0<=r&&s+r<1&&(n.push({x:e[w].x,y:e[w].y}),i)));w++);return n}},function(t,e){t.exports=function(t,e,i,n){var s=Math.cos(n),r=Math.sin(n),a=t.x1-e,o=t.y1-i;return t.x1=a*s-o*r+e,t.y1=a*r+o*s+i,a=t.x2-e,o=t.y2-i,t.x2=a*s-o*r+e,t.y2=a*r+o*s+i,t}},function(t,e){t.exports=function(t){return 0===t.height?NaN:t.width/t.height}},function(t,e){t.exports=function(t,e,i,n){var s=Math.cos(n),r=Math.sin(n),a=t.x1-e,o=t.y1-i;return t.x1=a*s-o*r+e,t.y1=a*r+o*s+i,a=t.x2-e,o=t.y2-i,t.x2=a*s-o*r+e,t.y2=a*r+o*s+i,a=t.x3-e,o=t.y3-i,t.x3=a*s-o*r+e,t.y3=a*r+o*s+i,t}},function(t,e,i){t.exports={BUTTON_DOWN:i(1310),BUTTON_UP:i(1311),CONNECTED:i(1312),DISCONNECTED:i(1313),GAMEPAD_BUTTON_DOWN:i(1314),GAMEPAD_BUTTON_UP:i(1315)}},function(t,e,i){var n=i(17),s=i(156);t.exports=function(t,e){var i=void 0===t?s():n({},t);if(e)for(var r in e)void 0!==e[r]&&(i[r]=e[r]);return i}},function(t,e,i){var n=i(0),s=i(21),r=i(23),a=i(8),o=i(2),h=i(7),l=i(408),c=new n({Extends:r,initialize:function(t,e,i,n){var s,a="xml";h(e)&&(e=o(s=e,"key"),i=o(s,"url"),n=o(s,"xhrSettings"),a=o(s,"extension",a));var l={type:"xml",cache:t.cacheManager.xml,extension:a,responseType:"text",key:e,url:i,xhrSettings:n};r.call(this,t,l)},onProcess:function(){this.state=s.FILE_PROCESSING,this.data=l(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});a.register("xml",(function(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new c(this,t[n]));else this.addFile(new c(this,t,e,i));return this})),t.exports=c},function(t,e,i){var n=i(0),s=i(21),r=i(23),a=i(8),o=i(2),h=i(7),l=new n({Extends:r,initialize:function(t,e,i,n){var s,a="text",l="txt",c=t.cacheManager.text;h(e)&&(e=o(s=e,"key"),i=o(s,"url"),n=o(s,"xhrSettings"),l=o(s,"extension",l),a=o(s,"type",a),c=o(s,"cache",c));var u={type:a,cache:c,extension:l,responseType:"text",key:e,url:i,xhrSettings:n};r.call(this,t,u)},onProcess:function(){this.state=s.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});a.register("text",(function(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new l(this,t[n]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},function(t,e,i){t.exports={Acceleration:i(1368),Angular:i(1369),Bounce:i(1370),Debug:i(1371),Drag:i(1372),Enable:i(1373),Friction:i(1374),Gravity:i(1375),Immovable:i(1376),Mass:i(1377),OverlapCirc:i(523),OverlapRect:i(244),Pushable:i(1378),Size:i(1379),Velocity:i(1380)}},function(t,e){t.exports=function(t,e,i,n,s,r,a){void 0===r&&(r=!0),void 0===a&&(a=!1);var o,h,l,c=[],u=[],d=t.treeMinMax;return d.minX=e,d.minY=i,d.maxX=e+n,d.maxY=i+s,a&&(u=t.staticTree.search(d)),r&&t.useTree?c=t.tree.search(d):r&&(o=t.bodies,h={position:{x:e,y:i},left:e,top:i,right:e+n,bottom:i+s,isCircle:!1},l=t.intersects,o.iterate((function(t){l(t,h)&&c.push(t)}))),u.concat(c)}},function(t,e,i){t.exports={COLLIDE:i(1381),OVERLAP:i(1382),PAUSE:i(1383),RESUME:i(1384),TILE_COLLIDE:i(1385),TILE_OVERLAP:i(1386),WORLD_BOUNDS:i(1387),WORLD_STEP:i(1388)}},function(t,e,i){var n=i(62);t.exports=function(t,e,i,s){var r=0,a=t.deltaAbsX()+e.deltaAbsX()+s;return 0===t._dx&&0===e._dx?(t.embedded=!0,e.embedded=!0):t._dx>e._dx?a<(r=t.right-e.x)&&!i||!1===t.checkCollision.right||!1===e.checkCollision.left?r=0:(t.touching.none=!1,t.touching.right=!0,e.touching.none=!1,e.touching.left=!0,e.physicsType!==n.STATIC_BODY||i||(t.blocked.none=!1,t.blocked.right=!0),t.physicsType!==n.STATIC_BODY||i||(e.blocked.none=!1,e.blocked.left=!0)):t._dx<e._dx&&(a<-(r=t.x-e.width-e.x)&&!i||!1===t.checkCollision.left||!1===e.checkCollision.right?r=0:(t.touching.none=!1,t.touching.left=!0,e.touching.none=!1,e.touching.right=!0,e.physicsType!==n.STATIC_BODY||i||(t.blocked.none=!1,t.blocked.left=!0),t.physicsType!==n.STATIC_BODY||i||(e.blocked.none=!1,e.blocked.right=!0))),t.overlapX=r,e.overlapX=r}},function(t,e,i){var n=i(62);t.exports=function(t,e,i,s){var r=0,a=t.deltaAbsY()+e.deltaAbsY()+s;return 0===t._dy&&0===e._dy?(t.embedded=!0,e.embedded=!0):t._dy>e._dy?a<(r=t.bottom-e.y)&&!i||!1===t.checkCollision.down||!1===e.checkCollision.up?r=0:(t.touching.none=!1,t.touching.down=!0,e.touching.none=!1,e.touching.up=!0,e.physicsType!==n.STATIC_BODY||i||(t.blocked.none=!1,t.blocked.down=!0),t.physicsType!==n.STATIC_BODY||i||(e.blocked.none=!1,e.blocked.up=!0)):t._dy<e._dy&&(a<-(r=t.y-e.bottom)&&!i||!1===t.checkCollision.up||!1===e.checkCollision.down?r=0:(t.touching.none=!1,t.touching.up=!0,e.touching.none=!1,e.touching.down=!0,e.physicsType!==n.STATIC_BODY||i||(t.blocked.none=!1,t.blocked.up=!0),t.physicsType!==n.STATIC_BODY||i||(e.blocked.none=!1,e.blocked.down=!0))),t.overlapY=r,e.overlapY=r}},function(t,e){t.exports=function(t,e){return!(e.right<=t.left||e.bottom<=t.top||e.position.x>=t.right||e.position.y>=t.bottom)}},,,function(t,e,i){t.exports={CalculateFacesAt:i(252),CalculateFacesWithin:i(63),CheckIsoBounds:i(541),Copy:i(1420),CreateFromTiles:i(1421),CullBounds:i(543),CullTiles:i(544),Fill:i(1422),FilterTiles:i(1423),FindByIndex:i(1424),FindTile:i(1425),ForEachTile:i(1426),GetCullTilesFunction:i(1427),GetTileAt:i(158),GetTileAtWorldXY:i(1428),GetTilesWithin:i(26),GetTilesWithinShape:i(1429),GetTilesWithinWorldXY:i(529),GetTileToWorldXFunction:i(1430),GetTileToWorldXYFunction:i(1431),GetTileToWorldYFunction:i(1432),GetWorldToTileXFunction:i(1433),GetWorldToTileXYFunction:i(1434),GetWorldToTileYFunction:i(1435),HasTileAt:i(562),HasTileAtWorldXY:i(1436),HexagonalCullBounds:i(546),HexagonalCullTiles:i(545),HexagonalTileToWorldXY:i(550),HexagonalTileToWorldY:i(554),HexagonalWorldToTileXY:i(556),HexagonalWorldToTileY:i(560),IsInLayerBounds:i(119),IsometricCullTiles:i(547),IsometricTileToWorldXY:i(551),IsometricWorldToTileXY:i(557),PutTileAt:i(257),PutTileAtWorldXY:i(1437),PutTilesAt:i(1438),Randomize:i(1439),RemoveTileAt:i(563),RemoveTileAtWorldXY:i(1440),RenderDebug:i(1441),ReplaceByIndex:i(542),RunCull:i(159),SetCollision:i(1442),SetCollisionBetween:i(1443),SetCollisionByExclusion:i(1444),SetCollisionByProperty:i(1445),SetCollisionFromCollisionGroup:i(1446),SetLayerCollisionIndex:i(160),SetTileCollision:i(72),SetTileIndexCallback:i(1447),SetTileLocationCallback:i(1448),Shuffle:i(1449),StaggeredCullBounds:i(549),StaggeredCullTiles:i(548),StaggeredTileToWorldXY:i(552),StaggeredTileToWorldY:i(555),StaggeredWorldToTileXY:i(558),StaggeredWorldToTileY:i(561),SwapByIndex:i(1450),TileToWorldX:i(253),TileToWorldXY:i(553),TileToWorldY:i(254),WeightedRandomize:i(1451),WorldToTileX:i(255),WorldToTileXY:i(559),WorldToTileY:i(256)}},function(t,e,i){var n=i(158);t.exports=function(t,e,i){var s=n(t,e,!0,i),r=n(t,e-1,!0,i),a=n(t,e+1,!0,i),o=n(t-1,e,!0,i),h=n(t+1,e,!0,i),l=s&&s.collides;return l&&(s.faceTop=!0,s.faceBottom=!0,s.faceLeft=!0,s.faceRight=!0),r&&r.collides&&(l&&(s.faceTop=!1),r.faceBottom=!l),a&&a.collides&&(l&&(s.faceBottom=!1),a.faceTop=!l),o&&o.collides&&(l&&(s.faceLeft=!1),o.faceRight=!l),h&&h.collides&&(l&&(s.faceRight=!1),h.faceLeft=!l),s&&!s.collides&&s.resetFaces(),s}},function(t,e){t.exports=function(t,e,i){var n=i.baseTileWidth,s=i.tilemapLayer,r=0;return s&&(e=e||s.scene.cameras.main,r=s.x+e.scrollX*(1-s.scrollFactorX),n*=s.scaleX),r+t*n}},function(t,e){t.exports=function(t,e,i){var n=i.baseTileHeight,s=i.tilemapLayer,r=0;return s&&(e=e||s.scene.cameras.main,r=s.y+e.scrollY*(1-s.scrollFactorY),n*=s.scaleY),r+t*n}},function(t,e){t.exports=function(t,e,i,n){void 0===e&&(e=!0);var s=n.baseTileWidth,r=n.tilemapLayer;return r&&(i=i||r.scene.cameras.main,t-=r.x+i.scrollX*(1-r.scrollFactorX),s*=r.scaleX),e?Math.floor(t/s):t/s}},function(t,e){t.exports=function(t,e,i,n){void 0===e&&(e=!0);var s=n.baseTileHeight,r=n.tilemapLayer;return r&&(i=i||r.scene.cameras.main,t-=r.y+i.scrollY*(1-r.scrollFactorY),s*=r.scaleY),e?Math.floor(t/s):t/s}},function(t,e,i){var n=i(85),s=i(119),r=i(252),a=i(72);t.exports=function(t,e,i,o,h){if(void 0===o&&(o=!0),!s(e,i,h))return null;var l,c=h.data[i][e],u=c&&c.collides;t instanceof n?(null===h.data[i][e]&&(h.data[i][e]=new n(h,t.index,e,i,h.tileWidth,h.tileHeight)),h.data[i][e].copy(t)):(l=t,null===h.data[i][e]?h.data[i][e]=new n(h,l,e,i,h.tileWidth,h.tileHeight):h.data[i][e].index=l);var d=h.data[i][e],f=-1!==h.collideIndexes.indexOf(d.index);return a(d,f),o&&u!==d.collides&&r(e,i,h),d}},function(t,e,i){var n=i(29);t.exports=function(t){return"isometric"===(t=t.toLowerCase())?n.ISOMETRIC:"staggered"===t?n.STAGGERED:"hexagonal"===t?n.HEXAGONAL:n.ORTHOGONAL}},function(t,e,i){var n=i(40),s=i(120),r=i(121),a=i(85);t.exports=function(t,e,i,o,h){for(var l=new s({tileWidth:i,tileHeight:o}),c=new r({name:t,tileWidth:i,tileHeight:o,format:n.ARRAY_2D,layers:[l]}),u=[],d=e.length,f=0,p=0;p<e.length;p++){u[p]=[];for(var g=e[p],m=0;m<g.length;m++){var v=parseInt(g[m],10);isNaN(v)||-1===v?u[p][m]=h?null:new a(l,-1,m,p,i,o):u[p][m]=new a(l,v,m,p,i,o)}0===f&&(f=g.length)}return c.width=l.width=f,c.height=l.height=d,c.widthInPixels=l.widthInPixels=f*i,c.heightInPixels=l.heightInPixels=d*o,l.data=u,c}},function(t,e,i){function n(t){return{x:t.x,y:t.y}}var s=i(571),r=i(261),a=["id","name","type","rotation","properties","visible","x","y","width","height"];t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var o,h=s(t,a);return h.x+=e,h.y+=i,t.gid?(o=r(t.gid),h.gid=o.gid,h.flippedHorizontal=o.flippedHorizontal,h.flippedVertical=o.flippedVertical,h.flippedAntiDiagonal=o.flippedAntiDiagonal):t.polyline?h.polyline=t.polyline.map(n):t.polygon?h.polygon=t.polygon.map(n):t.ellipse?h.ellipse=t.ellipse:t.text?h.text=t.text:t.point?h.point=!0:h.rectangle=!0,h}},function(t,e){t.exports=function(t){var e=Boolean(2147483648&t),i=Boolean(1073741824&t),n=Boolean(536870912&t);t&=536870911;var s=0,r=!1;return e&&i&&n?(s=Math.PI/2,r=!0):e&&i&&!n?(s=Math.PI,r=!1):e&&!i&&n?(s=Math.PI/2,r=!1):!e||i||n?!e&&i&&n?(s=3*Math.PI/2,r=!1):e||!i||n?e||i||!n?e||i||n||(s=0,r=!1):(s=3*Math.PI/2,r=!0):(s=Math.PI,r=!0):r=!(s=0),{gid:t,flippedHorizontal:e,flippedVertical:i,flippedAntiDiagonal:n,rotation:s,flipped:r}}},function(t,e,i){var n=i(40),s=i(121),r=i(564),a=i(580);t.exports=function(t,e,i,o,h,l,c,u){void 0===i&&(i=32),void 0===o&&(o=32),void 0===h&&(h=10),void 0===l&&(l=10),void 0===u&&(u=!1);var d,f=null;return Array.isArray(c)?f=r(void 0!==e?e:"map",n.ARRAY_2D,c,i,o,u):void 0!==e&&((d=t.cache.tilemap.get(e))?f=r(e,d.format,d.data,i,o,u):console.warn("No map data found for key "+e)),null===f&&(f=new s({tileWidth:i,tileHeight:o,width:h,height:l})),new a(t,f)}},function(t,e,i){var n=i(6);t.exports=function(t){var e=n(t,"targets",null);return null===e||("function"==typeof e&&(e=e.call()),Array.isArray(e)||(e=[e])),e}},function(t,e){function i(t){return!!t.getActive&&"function"==typeof t.getActive}function n(t){return!!t.getStart&&"function"==typeof t.getStart}function s(t){return!!t.getEnd&&"function"==typeof t.getEnd}var r=function(t,e){var a,o,h,l,c,u,d,f=function(t,e,i){return i},p=function(t,e,i){return i},g=null,m=typeof e;if("number"==m)f=function(){return e};else if("string"==m){var v=e[0],y=parseFloat(e.substr(2));switch(v){case"+":f=function(t,e,i){return i+y};break;case"-":f=function(t,e,i){return i-y};break;case"*":f=function(t,e,i){return i*y};break;case"/":f=function(t,e,i){return i/y};break;default:f=function(){return parseFloat(e)}}}else"function"==m?f=e:"object"==m&&(n(d=e)||s(d)||i(d)?(i(e)&&(g=e.getActive),s(e)&&(f=e.getEnd),n(e)&&(p=e.getStart)):e.hasOwnProperty("value")?u=r(t,e.value):(a=e.hasOwnProperty("to"),o=e.hasOwnProperty("from"),h=e.hasOwnProperty("start"),a&&(o||h)&&(u=r(t,e.to),h&&(l=r(t,e.start),u.getActive=l.getEnd),o&&(c=r(t,e.from),u.getStart=c.getEnd))));return u||{getActive:g,getEnd:f,getStart:p}};t.exports=r},function(t,e){t.exports={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1}},function(t,e,i){var n=i(0),s=i(9),r=i(267),a=i(16),o=i(5),h=i(100),l=i(14),c=new n({Extends:s,initialize:function(t,e,i){s.call(this),this.parent=t,this.parentIsTimeline=t.hasOwnProperty("isTimeline"),this.data=e,this.totalData=e.length,this.targets=i,this.totalTargets=i.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=h.PENDING_ADD,this._pausedState=h.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(t){return void 0===t&&(t=0),this.data[t].current},setTimeScale:function(t){return this.timeScale=t,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===h.ACTIVE},isPaused:function(){return this.state===h.PAUSED},hasTarget:function(t){return-1!==this.targets.indexOf(t)},updateTo:function(t,e,i){void 0===i&&(i=!1);for(var n=0;n<this.totalData;n++){var s=this.data[n];s.key===t&&(s.end=e,i&&(s.start=s.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===h.ACTIVE?this.seek(0):this.state===h.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===h.PENDING_ADD?this:this.play()},calcDuration:function(){for(var t=0,e=l.MAX_SAFE_INTEGER,i=this.data,n=0;n<this.totalData;n++){var s=i[n];s.t1=s.duration+s.hold,s.yoyo&&(s.t1+=s.duration),s.t2=s.t1+s.repeatDelay,s.totalDuration=s.delay+s.t1,-1===s.repeat?s.totalDuration+=999999999999*s.t2:0<s.repeat&&(s.totalDuration+=s.t2*s.repeat),s.totalDuration>t&&(t=s.totalDuration),s.delay<e&&(e=s.delay)}this.duration=Math.max(t,.001),this.loopCounter=-1===this.loop?999999999999:this.loop,0<this.loopCounter?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=e},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=h.PENDING_ADD,this._pausedState=h.INIT,!1;for(var t=this.data,e=this.totalTargets,i=0;i<this.totalData;i++){var n=t[i],s=n.target,r=n.gen,a=n.key,o=n.index;n.delay=r.delay(s,a,0,o,e,this),n.duration=Math.max(r.duration(s,a,0,o,e,this),.001),n.hold=r.hold(s,a,0,o,e,this),n.repeat=r.repeat(s,a,0,o,e,this),n.repeatDelay=r.repeatDelay(s,a,0,o,e,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=h.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(r.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){0<this.loopCounter?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),0<this.loopDelay?(this.countdown=this.loopDelay,this.state=h.LOOP_DELAY):(this.state=h.ACTIVE,this.dispatchTweenEvent(r.TWEEN_LOOP,this.callbacks.onLoop))):0<this.completeDelay?(this.state=h.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=h.PENDING_REMOVE,this.dispatchTweenEvent(r.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===h.PAUSED||(this.paused=!0,this._pausedState=this.state,this.state=h.PAUSED),this},play:function(t){void 0===t&&(t=!1);var e=this.state;return e!==h.INIT||this.parentIsTimeline?e===h.ACTIVE||e===h.PENDING_ADD&&this._pausedState===h.PENDING_ADD||(this.parentIsTimeline||e!==h.PENDING_REMOVE&&e!==h.REMOVED?this.parentIsTimeline?(this.resetTweenData(t),0===this.calculatedOffset?this.state=h.ACTIVE:(this.countdown=this.calculatedOffset,this.state=h.OFFSET_DELAY)):(this.paused?this.paused=!1:(this.resetTweenData(t),this.state=h.ACTIVE),this.makeActive()):(this.seek(0),this.parent.makeActive(this))):(this.resetTweenData(!1),this.state=h.ACTIVE),this},resetTweenData:function(t){for(var e=this.data,i=this.totalData,n=this.totalTargets,s=0;s<i;s++){var r=e[s],a=r.target,o=r.key,l=r.index;r.progress=0,r.elapsed=0,r.repeatCounter=-1===r.repeat?999999999999:r.repeat,t?(r.start=r.getStartValue(a,o,r.start,l,n,this),r.end=r.getEndValue(a,o,r.end,l,n,this),r.current=r.start,r.state=h.PLAYING_FORWARD):r.state=h.PENDING_RENDER,0<r.delay&&(r.elapsed=r.delay,r.state=h.DELAY),r.getActiveValue&&(a[o]=r.getActiveValue(r.target,r.key,r.start))}},resume:function(){return this.state===h.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(t,e){void 0===e&&(e=16.6),this.state===h.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var i=this.data,n=this.totalTargets,s=0;s<this.totalData;s++){var r=i[s],a=r.target,o=r.gen,l=r.key,c=r.index;r.progress=0,r.elapsed=0,r.repeatCounter=-1===r.repeat?999999999999:r.repeat,r.delay=o.delay(a,l,0,c,n,this),r.duration=Math.max(o.duration(a,l,0,c,n,this),.001),r.hold=o.hold(a,l,0,c,n,this),r.repeat=o.repeat(a,l,0,c,n,this),r.repeatDelay=o.repeatDelay(a,l,0,c,n,this),r.current=r.start,r.state=h.PLAYING_FORWARD,this.updateTweenData(this,r,0,c,n),0<r.delay&&(r.elapsed=r.delay,r.state=h.DELAY)}this.calcDuration();var u=!1;for(this.state===h.PAUSED&&(u=!0,this.state=h.ACTIVE),this.isSeeking=!0;this.update(0,e),this.totalProgress<t;);return this.isSeeking=!1,u&&(this.state=h.PAUSED),this},setCallback:function(t,e,i,n){return this.callbacks[t]={func:e,scope:n,params:i},this},complete:function(t){return void 0===t&&(t=0),t?(this.state=h.COMPLETE_DELAY,this.countdown=t):(this.state=h.PENDING_REMOVE,this.dispatchTweenEvent(r.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(t){return this.state===h.ACTIVE&&void 0!==t&&this.seek(t),this.state!==h.REMOVED&&(this.state!==h.PAUSED&&this.state!==h.PENDING_ADD||(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(r.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=h.PENDING_REMOVE),this},update:function(t,e){if(this.state===h.PAUSED)return!1;switch(this.useFrames&&(e=+this.parent.timeScale),e*=this.timeScale,this.elapsed+=e,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=e,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case h.ACTIVE:this.hasStarted||this.isSeeking||(this.startDelay-=e,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(r.TWEEN_START,this.callbacks.onStart)));for(var i=!1,n=0;n<this.totalData;n++){var s=this.data[n];this.updateTweenData(this,s,e)&&(i=!0)}i||this.nextState();break;case h.LOOP_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=h.ACTIVE,this.dispatchTweenEvent(r.TWEEN_LOOP,this.callbacks.onLoop));break;case h.OFFSET_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=h.ACTIVE);break;case h.COMPLETE_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=h.PENDING_REMOVE,this.dispatchTweenEvent(r.TWEEN_COMPLETE,this.callbacks.onComplete))}return this.state===h.PENDING_REMOVE},dispatchTweenDataEvent:function(t,e,i){this.isSeeking||(this.emit(t,this,i.key,i.target,i.current,i.previous),e&&(e.params[1]=i.target,e.func.apply(e.scope,e.params)))},dispatchTweenEvent:function(t,e){this.isSeeking||(this.emit(t,this,this.targets),e&&(e.params[1]=this.targets,e.func.apply(e.scope,e.params)))},setStateFromEnd:function(t,e,i){return e.yoyo?(e.elapsed=i,e.progress=i/e.duration,e.flipX&&e.target.toggleFlipX(),e.flipY&&e.target.toggleFlipY(),this.dispatchTweenDataEvent(r.TWEEN_YOYO,t.callbacks.onYoyo,e),e.start=e.getStartValue(e.target,e.key,e.start,e.index,t.totalTargets,t),h.PLAYING_BACKWARD):0<e.repeatCounter?(e.repeatCounter--,e.elapsed=i,e.progress=i/e.duration,e.flipX&&e.target.toggleFlipX(),e.flipY&&e.target.toggleFlipY(),e.start=e.getStartValue(e.target,e.key,e.start,e.index,t.totalTargets,t),e.end=e.getEndValue(e.target,e.key,e.start,e.index,t.totalTargets,t),0<e.repeatDelay?(e.elapsed=e.repeatDelay-i,e.current=e.start,e.target[e.key]=e.current,h.REPEAT_DELAY):(this.dispatchTweenDataEvent(r.TWEEN_REPEAT,t.callbacks.onRepeat,e),h.PLAYING_FORWARD)):h.COMPLETE},setStateFromStart:function(t,e,i){return 0<e.repeatCounter?(e.repeatCounter--,e.elapsed=i,e.progress=i/e.duration,e.flipX&&e.target.toggleFlipX(),e.flipY&&e.target.toggleFlipY(),e.end=e.getEndValue(e.target,e.key,e.start,e.index,t.totalTargets,t),0<e.repeatDelay?(e.elapsed=e.repeatDelay-i,e.current=e.start,e.target[e.key]=e.current,h.REPEAT_DELAY):(this.dispatchTweenDataEvent(r.TWEEN_REPEAT,t.callbacks.onRepeat,e),h.PLAYING_FORWARD)):h.COMPLETE},updateTweenData:function(t,e,i){var n=e.target;switch(e.state){case h.PLAYING_FORWARD:case h.PLAYING_BACKWARD:if(!n){e.state=h.COMPLETE;break}var s=e.elapsed,a=e.duration,o=0;a<(s+=i)&&(o=s-a,s=a);var l,c=e.state===h.PLAYING_FORWARD,u=s/a;e.elapsed=s,e.progress=u,e.previous=e.current,1==u?c?(e.current=e.end,n[e.key]=e.end,0<e.hold?(e.elapsed=e.hold-o,e.state=h.HOLD_DELAY):e.state=this.setStateFromEnd(t,e,o)):(e.current=e.start,n[e.key]=e.start,e.state=this.setStateFromStart(t,e,o)):(l=c?e.ease(u):e.ease(1-u),e.current=e.start+(e.end-e.start)*l,n[e.key]=e.current),this.dispatchTweenDataEvent(r.TWEEN_UPDATE,t.callbacks.onUpdate,e);break;case h.DELAY:e.elapsed-=i,e.elapsed<=0&&(e.elapsed=Math.abs(e.elapsed),e.state=h.PENDING_RENDER);break;case h.REPEAT_DELAY:e.elapsed-=i,e.elapsed<=0&&(e.elapsed=Math.abs(e.elapsed),e.state=h.PLAYING_FORWARD,this.dispatchTweenDataEvent(r.TWEEN_REPEAT,t.callbacks.onRepeat,e));break;case h.HOLD_DELAY:e.elapsed-=i,e.elapsed<=0&&(e.state=this.setStateFromEnd(t,e,Math.abs(e.elapsed)));break;case h.PENDING_RENDER:n?(e.start=e.getStartValue(n,e.key,n[e.key],e.index,t.totalTargets,t),e.end=e.getEndValue(n,e.key,e.start,e.index,t.totalTargets,t),e.current=e.start,n[e.key]=e.start,e.state=h.PLAYING_FORWARD):e.state=h.COMPLETE}return e.state!==h.COMPLETE}});c.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],o.register("tween",(function(t){return this.scene.sys.tweens.add(t)})),a.register("tween",(function(t){return this.scene.sys.tweens.create(t)})),t.exports=c},function(t,e,i){t.exports={TIMELINE_COMPLETE:i(1466),TIMELINE_LOOP:i(1467),TIMELINE_PAUSE:i(1468),TIMELINE_RESUME:i(1469),TIMELINE_START:i(1470),TIMELINE_UPDATE:i(1471),TWEEN_ACTIVE:i(1472),TWEEN_COMPLETE:i(1473),TWEEN_LOOP:i(1474),TWEEN_REPEAT:i(1475),TWEEN_START:i(1476),TWEEN_STOP:i(1477),TWEEN_UPDATE:i(1478),TWEEN_YOYO:i(1479)}},function(t,e){t.exports=function(t,e,i,n,s,r,a,o,h,l,c,u,d,f,p){return{target:t,index:e,key:i,getActiveValue:r,getEndValue:n,getStartValue:s,ease:a,duration:0,totalDuration:0,delay:0,yoyo:l,hold:0,repeat:0,repeatDelay:0,flipX:f,flipY:p,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:o,duration:h,hold:c,repeat:u,repeatDelay:d},state:0}}},function(t,e,i){var n=i(68);t.exports=function(t){return n(t,-Math.PI,Math.PI)}},function(t,e,i){var n=i(68);t.exports=function(t){return n(t,-180,180)}},,,,,function(t,e,i){t.exports={AlignTo:i(601),Angle:i(602),Call:i(603),GetFirst:i(604),GetLast:i(605),GridAlign:i(606),IncAlpha:i(678),IncX:i(679),IncXY:i(680),IncY:i(681),PlaceOnCircle:i(682),PlaceOnEllipse:i(683),PlaceOnLine:i(684),PlaceOnRectangle:i(685),PlaceOnTriangle:i(686),PlayAnimation:i(687),PropertyValueInc:i(46),PropertyValueSet:i(27),RandomCircle:i(688),RandomEllipse:i(689),RandomLine:i(690),RandomRectangle:i(691),RandomTriangle:i(692),Rotate:i(693),RotateAround:i(694),RotateAroundDistance:i(695),ScaleX:i(696),ScaleXY:i(697),ScaleY:i(698),SetAlpha:i(699),SetBlendMode:i(700),SetDepth:i(701),SetHitArea:i(702),SetOrigin:i(703),SetRotation:i(704),SetScale:i(705),SetScaleX:i(706),SetScaleY:i(707),SetScrollFactor:i(708),SetScrollFactorX:i(709),SetScrollFactorY:i(710),SetTint:i(711),SetVisible:i(712),SetX:i(713),SetXY:i(714),SetY:i(715),ShiftPosition:i(716),Shuffle:i(717),SmootherStep:i(718),SmoothStep:i(719),Spread:i(720),ToggleVisible:i(721),WrapInRectangle:i(722)}},function(t,e,i){var n=i(123),s=[];s[n.BOTTOM_CENTER]=i(277),s[n.BOTTOM_LEFT]=i(278),s[n.BOTTOM_RIGHT]=i(279),s[n.LEFT_BOTTOM]=i(280),s[n.LEFT_CENTER]=i(281),s[n.LEFT_TOP]=i(282),s[n.RIGHT_BOTTOM]=i(283),s[n.RIGHT_CENTER]=i(284),s[n.RIGHT_TOP]=i(285),s[n.TOP_CENTER]=i(286),s[n.TOP_LEFT]=i(287),s[n.TOP_RIGHT]=i(288),t.exports=function(t,e,i,n,r){return s[i](t,e,n,r)}},function(t,e,i){var n=i(42),s=i(87),r=i(88),a=i(52);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),r(t,s(e)+i),a(t,n(e)+o),t}},function(t,e,i){var n=i(42),s=i(43),r=i(53),a=i(52);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),r(t,s(e)-i),a(t,n(e)+o),t}},function(t,e,i){var n=i(42),s=i(44),r=i(54),a=i(52);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),r(t,s(e)+i),a(t,n(e)+o),t}},function(t,e,i){var n=i(42),s=i(43),r=i(55),a=i(54);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,s(e)-i),r(t,n(e)+o),t}},function(t,e,i){var n=i(89),s=i(43),r=i(90),a=i(54);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,s(e)-i),r(t,n(e)+o),t}},function(t,e,i){var n=i(43),s=i(45),r=i(54),a=i(52);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),r(t,n(e)-i),a(t,s(e)-o),t}},function(t,e,i){var n=i(42),s=i(44),r=i(55),a=i(53);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,s(e)+i),r(t,n(e)+o),t}},function(t,e,i){var n=i(89),s=i(44),r=i(90),a=i(53);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,s(e)+i),r(t,n(e)+o),t}},function(t,e,i){var n=i(44),s=i(45),r=i(53),a=i(52);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),r(t,n(e)+i),a(t,s(e)-o),t}},function(t,e,i){var n=i(87),s=i(45),r=i(55),a=i(88);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,n(e)+i),r(t,s(e)-o),t}},function(t,e,i){var n=i(43),s=i(45),r=i(55),a=i(53);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,n(e)-i),r(t,s(e)-o),t}},function(t,e,i){var n=i(44),s=i(45),r=i(55),a=i(54);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,n(e)+i),r(t,s(e)-o),t}},function(t,e,i){var n=i(123),s=[];s[n.BOTTOM_CENTER]=i(290),s[n.BOTTOM_LEFT]=i(291),s[n.BOTTOM_RIGHT]=i(292),s[n.CENTER]=i(293),s[n.LEFT_CENTER]=i(295),s[n.RIGHT_CENTER]=i(296),s[n.TOP_CENTER]=i(297),s[n.TOP_LEFT]=i(298),s[n.TOP_RIGHT]=i(299),s[n.LEFT_BOTTOM]=s[n.BOTTOM_LEFT],s[n.LEFT_TOP]=s[n.TOP_LEFT],s[n.RIGHT_BOTTOM]=s[n.BOTTOM_RIGHT],s[n.RIGHT_TOP]=s[n.TOP_RIGHT],t.exports=function(t,e,i,n,r){return s[i](t,e,n,r)}},function(t,e,i){var n=i(42),s=i(87),r=i(55),a=i(88);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,s(e)+i),r(t,n(e)+o),t}},function(t,e,i){var n=i(42),s=i(43),r=i(55),a=i(53);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,s(e)-i),r(t,n(e)+o),t}},function(t,e,i){var n=i(42),s=i(44),r=i(55),a=i(54);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,s(e)+i),r(t,n(e)+o),t}},function(t,e,i){var n=i(294),s=i(87),r=i(89);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),n(t,s(e)+i,r(e)+a),t}},function(t,e,i){var n=i(88),s=i(90);t.exports=function(t,e,i){return n(t,e),s(t,i)}},function(t,e,i){var n=i(89),s=i(43),r=i(90),a=i(53);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,s(e)-i),r(t,n(e)+o),t}},function(t,e,i){var n=i(89),s=i(44),r=i(90),a=i(54);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,s(e)+i),r(t,n(e)+o),t}},function(t,e,i){var n=i(87),s=i(45),r=i(88),a=i(52);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),r(t,n(e)+i),a(t,s(e)-o),t}},function(t,e,i){var n=i(43),s=i(45),r=i(53),a=i(52);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),r(t,n(e)-i),a(t,s(e)-o),t}},function(t,e,i){var n=i(44),s=i(45),r=i(54),a=i(52);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),r(t,n(e)+i),a(t,s(e)-o),t}},function(t,e,i){var n=i(169),s=i(98),r=i(14),a=i(4);t.exports=function(t,e,i){void 0===i&&(i=new a);var o=s(e,0,r.PI2);return n(t,o,i)}},function(t,e,i){var n=i(302),s=i(169),r=i(98),a=i(14);t.exports=function(t,e,i,o){void 0===o&&(o=[]),!e&&0<i&&(e=n(t)/i);for(var h=0;h<e;h++){var l=r(h/e,0,a.PI2);o.push(s(t,l))}return o}},function(t,e){t.exports=function(t){return Math.PI*t.radius*2}},function(t,e,i){var n=i(18),s={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t){return void 0===t&&(t=1),this.alpha=t,this},alpha:{get:function(){return this._alpha},set:function(t){var e=n(t,0,1);0===(this._alpha=e)?this.renderFlags&=-3:this.renderFlags|=2}}};t.exports=s},function(t,e,i){var n=i(35),s={_blendMode:n.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(t){"string"==typeof t&&(t=n[t]),-1<=(t|=0)&&(this._blendMode=t)}},setBlendMode:function(t){return this.blendMode=t,this}};t.exports=s},function(t,e){t.exports={_depth:0,depth:{get:function(){return this._depth},set:function(t){this.displayList&&this.displayList.queueDepthSort(),this._depth=t}},setDepth:function(t){return void 0===t&&(t=0),this.depth=t,this}}},function(t,e,i){var n=i(171),s=i(130);t.exports=function(t,e,i,r){void 0===r&&(r=[]),!e&&0<i&&(e=s(t)/i);for(var a=0;a<e;a++){var o=a/e;r.push(n(t,o))}return r}},function(t,e,i){var n=i(4);t.exports=function(t,e,i){return void 0===i&&(i=new n),i.x=t.x1+(t.x2-t.x1)*e,i.y=t.y1+(t.y2-t.y1)*e,i}},function(t,e){t.exports=function(t,e,i,n){var s=Math.cos(n),r=Math.sin(n),a=t.x-e,o=t.y-i;return t.x=a*s-o*r+e,t.y=a*r+o*s+i,t}},function(t,e,i){var n=i(310),s=i(311),r={mask:null,setMask:function(t){return this.mask=t,this},clearMask:function(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(t){return void 0===t&&(this.texture||this.shader)&&(t=this),new n(this.scene,t)},createGeometryMask:function(t){return void 0===t&&"Graphics"===this.type&&(t=this),new s(this.scene,t)}};t.exports=r},function(t,e,i){var n=i(0),s=i(22),r=i(91),a=new n({initialize:function(t,e){var i=t.sys.renderer;this.renderer=i,this.bitmapMask=e,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),t.sys.game.events.on(s.CONTEXT_RESTORED,this.createMask,this),i&&i.on(r.RESIZE,this.createMask,this)},createMask:function(){var t,e,i,n,s,r,a=this.renderer;a&&a.gl&&(this.mainTexture&&this.clearMask(),t=a.width,e=a.height,i=0==(t&t-1)&&0==(e&e-1),n=a.gl,s=i?n.REPEAT:n.CLAMP_TO_EDGE,r=n.LINEAR,this.mainTexture=a.createTexture2D(0,r,r,s,s,n.RGBA,null,t,e),this.maskTexture=a.createTexture2D(0,r,r,s,s,n.RGBA,null,t,e),this.mainFramebuffer=a.createFramebuffer(t,e,this.mainTexture,!0),this.maskFramebuffer=a.createFramebuffer(t,e,this.maskTexture,!0))},clearMask:function(){var t=this.renderer;t&&t.gl&&this.mainTexture&&(t.deleteTexture(this.mainTexture),t.deleteTexture(this.maskTexture),t.deleteFramebuffer(this.mainFramebuffer),t.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(t){this.bitmapMask=t},preRenderWebGL:function(t,e,i){t.pipelines.BITMAPMASK_PIPELINE.beginMask(this,e,i)},postRenderWebGL:function(t,e){t.pipelines.BITMAPMASK_PIPELINE.endMask(this,e)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(r.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});t.exports=a},function(t,e,i){var n=new(i(0))({initialize:function(t,e){this.geometryMask=e,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(t){return this.geometryMask=t,this},setInvertAlpha:function(t){return void 0===t&&(t=!0),this.invertAlpha=t,this},preRenderWebGL:function(t,e,i){var n=t.gl;t.flush(),0===t.maskStack.length&&(n.enable(n.STENCIL_TEST),n.clear(n.STENCIL_BUFFER_BIT),t.maskCount=0),t.currentCameraMask.mask!==this&&(t.currentMask.mask=this),t.maskStack.push({mask:this,camera:i}),this.applyStencil(t,i,!0),t.maskCount++},applyStencil:function(t,e,i){var n=t.gl,s=this.geometryMask,r=t.maskCount;n.colorMask(!1,!1,!1,!1),i?(n.stencilFunc(n.EQUAL,r,255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)):(n.stencilFunc(n.EQUAL,r+1,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),s.renderWebGL(t,s,e),t.flush(),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),i?this.invertAlpha?n.stencilFunc(n.NOTEQUAL,r+1,255):n.stencilFunc(n.EQUAL,r+1,255):this.invertAlpha?n.stencilFunc(n.NOTEQUAL,r,255):n.stencilFunc(n.EQUAL,r,255)},postRenderWebGL:function(t){var e=t.gl;t.maskStack.pop(),t.maskCount--,t.flush();var i,n=t.currentMask;0===t.maskStack.length?(n.mask=null,e.disable(e.STENCIL_TEST)):((i=t.maskStack[t.maskStack.length-1]).mask.applyStencil(t,i.camera,!1),t.currentCameraMask.mask!==i.mask?(n.mask=i.mask,n.camera=i.camera):n.mask=null)},preRenderCanvas:function(t,e,i){var n=this.geometryMask;t.currentContext.save(),n.renderCanvas(t,n,i,null,null,!0),t.currentContext.clip()},postRenderCanvas:function(t){t.currentContext.restore()},destroy:function(){this.geometryMask=null}});t.exports=n},function(t,e){t.exports={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(t,e){return void 0===e&&(e=t),this.scrollFactorX=t,this.scrollFactorY=e,this}}},function(t,e,i){var n=i(14),s=i(25),r=i(177),a=i(269),o=i(270),h=i(3),l={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(t){this._scaleX=t,0===(this._scaleY=t)?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function(){return this._scaleX},set:function(t){0===(this._scaleX=t)?this.renderFlags&=-5:this.renderFlags|=4}},scaleY:{get:function(){return this._scaleY},set:function(t){0===(this._scaleY=t)?this.renderFlags&=-5:this.renderFlags|=4}},angle:{get:function(){return o(this._rotation*n.RAD_TO_DEG)},set:function(t){this.rotation=o(t)*n.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=a(t)}},setPosition:function(t,e,i,n){return void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=0),void 0===n&&(n=0),this.x=t,this.y=e,this.z=i,this.w=n,this},copyPosition:function(t){return void 0!==t.x&&(this.x=t.x),void 0!==t.y&&(this.y=t.y),void 0!==t.z&&(this.z=t.z),void 0!==t.w&&(this.w=t.w),this},setRandomPosition:function(t,e,i,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.scene.sys.scale.width),void 0===n&&(n=this.scene.sys.scale.height),this.x=t+Math.random()*i,this.y=e+Math.random()*n,this},setRotation:function(t){return void 0===t&&(t=0),this.rotation=t,this},setAngle:function(t){return void 0===t&&(t=0),this.angle=t,this},setScale:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),this.scaleX=t,this.scaleY=e,this},setX:function(t){return void 0===t&&(t=0),this.x=t,this},setY:function(t){return void 0===t&&(t=0),this.y=t,this},setZ:function(t){return void 0===t&&(t=0),this.z=t,this},setW:function(t){return void 0===t&&(t=0),this.w=t,this},getLocalTransformMatrix:function(t){return void 0===t&&(t=new s),t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(t,e){void 0===t&&(t=new s),void 0===e&&(e=new s);var i=this.parentContainer;if(!i)return this.getLocalTransformMatrix(t);for(t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);i;)e.applyITRS(i.x,i.y,i._rotation,i._scaleX,i._scaleY),e.multiply(t,t),i=i.parentContainer;return t},getLocalPoint:function(t,e,i,n){i=i||new h;var s=(n=n||this.scene.sys.cameras.main).scrollX,a=n.scrollY,o=t+s*this.scrollFactorX-s,l=e+a*this.scrollFactorY-a;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(o,l,i):r(o,l,this.x,this.y,this.rotation,this.scaleX,this.scaleY,i),this._originComponent&&(i.x+=this._displayOriginX,i.y+=this._displayOriginY),i},getParentRotation:function(){for(var t=0,e=this.parentContainer;e;)t+=e.rotation,e=e.parentContainer;return t}};t.exports=l},function(t,e){t.exports={_visible:!0,visible:{get:function(){return this._visible},set:function(t){t?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function(t){return this.visible=t,this}}},function(t,e,i){t.exports={CHANGE_DATA:i(638),CHANGE_DATA_KEY:i(639),DESTROY:i(640),REMOVE_DATA:i(641),SET_DATA:i(642)}},function(t,e,i){var n=i(130),s=i(4);t.exports=function(t,e,i,r){if(void 0===r&&(r=[]),!e&&!i)return r;e?i=Math.round(n(t)/e):e=n(t)/i;for(var a=t.x,o=t.y,h=0,l=0;l<i;l++)switch(r.push(new s(a,o)),h){case 0:(a+=e)>=t.right&&(h=1,o+=a-t.right,a=t.right);break;case 1:(o+=e)>=t.bottom&&(h=2,a-=o-t.bottom,o=t.bottom);break;case 2:(a-=e)<=t.left&&(h=3,o-=t.left-a,a=t.left);break;case 3:(o-=e)<=t.top&&(h=0,o=t.top)}return r}},function(t,e){t.exports=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=[]);var n=Math.round(t.x1),s=Math.round(t.y1),r=Math.round(t.x2),a=Math.round(t.y2),o=Math.abs(r-n),h=Math.abs(a-s),l=n<r?1:-1,c=s<a?1:-1,u=o-h;i.push({x:n,y:s});for(var d=1;n!==r||s!==a;){var f=u<<1;-h<f&&(u-=h,n+=l),f<o&&(u+=o,s+=c),d%e==0&&i.push({x:n,y:s}),d++}return i}},function(t,e){t.exports=function(t,e,i){if(!e.length)return NaN;if(1===e.length)return e[0];var n,s,r=1;if(i){if(t<e[0][i])return e[0];for(;e[r][i]<t;)r++}else for(;e[r]<t;)r++;return r>e.length&&(r=e.length),i?(n=e[r-1][i],(s=e[r][i])-t<=t-n?e[r]:e[r-1]):(n=e[r-1],(s=e[r])-t<=t-n?s:n)}},function(t,e,i){var n=new(i(0))({initialize:function(t,e,i,n,s){void 0===s&&(s=!1),this.textureKey=t,this.textureFrame=e,this.index=i,this.frame=n,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=s},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});t.exports=n},function(t,e){t.exports=function(t){var e=/\D/g;return t.sort((function(t,i){return parseInt(t.replace(e,""),10)-parseInt(i.replace(e,""),10)})),t}},function(t,e,i){var n=i(185),s=i(0),r=i(102),a=i(9),o=i(132),h=i(22),l=i(2),c=i(6),u=i(186),d=i(322),f=new s({Extends:a,initialize:function(t){a.call(this),this.game=t,this.textureManager=null,this.globalTimeScale=1,this.anims=new r,this.mixes=new r,this.paused=!1,this.name="AnimationManager",t.events.once(h.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(h.DESTROY,this.destroy,this)},addMix:function(t,e,i){var n,s=this.anims,r=this.mixes,a="string"==typeof t?t:t.key,o="string"==typeof e?e:e.key;return s.has(a)&&s.has(o)&&((n=(n=r.get(a))||{})[o]=i,r.set(a,n)),this},removeMix:function(t,e){var i,n=this.mixes,s="string"==typeof t?t:t.key,r=n.get(s);return r&&(e?(i="string"==typeof e?e:e.key,r.hasOwnProperty(i)&&delete r[i]):e||n.delete(s)),this},getMix:function(t,e){var i=this.mixes,n="string"==typeof t?t:t.key,s="string"==typeof e?e:e.key,r=i.get(n);return r&&r.hasOwnProperty(s)?r[s]:0},add:function(t,e){return this.anims.has(t)?console.warn("Animation key exists: "+t):(e.key=t,this.anims.set(t,e),this.emit(o.ADD_ANIMATION,t,e)),this},exists:function(t){return this.anims.has(t)},createFromAseprite:function(t,e){var i=[],n=this.game.cache.json.get(t);if(!n)return i;var s=this,r=c(n,"meta",null),a=c(n,"frames",null);return r&&a&&c(r,"frameTags",[]).forEach((function(n){var r=[],o=l(n,"name",null),h=l(n,"from",0),c=l(n,"to",0),u=l(n,"direction","forward");if(o&&(!e||e&&-1<e.indexOf(o))){for(var d=[],f=Number.MAX_SAFE_INTEGER,p=h;p<=c;p++){var g,m=p.toString(),v=a[m];v&&((g=l(v,"duration",Number.MAX_SAFE_INTEGER))<f&&(f=g),d.push({frame:m,duration:g}))}d.forEach((function(e){r.push({key:t,frame:e.frame,duration:f-e.duration})}));var y=f*r.length;"reverse"===u&&(r=r.reverse());var _={key:o,frames:r,duration:y,yoyo:"pingpong"===u},x=s.create(_);x&&i.push(x)}})),i},create:function(t){var e=t.key,i=!1;return e&&((i=this.get(e))||(i=new n(this,e,t),this.anims.set(e,i),this.emit(o.ADD_ANIMATION,e,i))),i},fromJSON:function(t,e){void 0===e&&(e=!1),e&&this.anims.clear(),"string"==typeof t&&(t=JSON.parse(t));var i=[];if(t.hasOwnProperty("anims")&&Array.isArray(t.anims)){for(var n=0;n<t.anims.length;n++)i.push(this.create(t.anims[n]));t.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=t.globalTimeScale)}else t.hasOwnProperty("key")&&"frame"===t.type&&i.push(this.create(t));return i},generateFrameNames:function(t,e){var i,n=c(e,"prefix",""),s=c(e,"start",0),r=c(e,"end",0),a=c(e,"suffix",""),o=c(e,"zeroPad",0),h=c(e,"outputArray",[]),l=c(e,"frames",!1),f=this.textureManager.get(t);if(!f)return h;if(e)for(l=l||d(s,r),i=0;i<l.length;i++){var p=n+u(l[i],o,"0",1)+a;f.has(p)?h.push({key:t,frame:p}):console.warn("generateFrameNames: Frame missing: "+p+" from texture: "+t)}else for(l=f.getFrameNames(),i=0;i<l.length;i++)h.push({key:t,frame:l[i]});return h},generateFrameNumbers:function(t,e){var i=c(e,"start",0),n=c(e,"end",-1),s=c(e,"first",!1),r=c(e,"outputArray",[]),a=c(e,"frames",!1),o=this.textureManager.get(t);if(!o)return r;s&&o.has(s)&&r.push({key:t,frame:s}),a||(-1===n&&(n=o.frameTotal-2),a=d(i,n));for(var h=0;h<a.length;h++)o.has(a[h])?r.push({key:t,frame:a[h]}):console.warn("generateFrameNumbers: Frame "+h+" missing from texture: "+t);return r},get:function(t){return this.anims.get(t)},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(o.PAUSE_ALL)),this},play:function(t,e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++)e[i].anims.play(t);return this},staggerPlay:function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=!0),Array.isArray(e)||(e=[e]);var s=e.length;n||s--;for(var r=0;r<e.length;r++){var a=i<0?Math.abs(i)*(s-r):i*r;e[r].anims.playAfterDelay(t,a)}return this},remove:function(t){var e=this.get(t);return e&&(this.emit(o.REMOVE_ANIMATION,t,e),this.anims.delete(t),this.removeMix(t)),e},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(o.RESUME_ALL)),this},toJSON:function(t){var e={anims:[],globalTimeScale:this.globalTimeScale};return void 0!==t&&""!==t?e.anims.push(this.anims.get(t).toJSON()):this.anims.each((function(t,i){e.anims.push(i.toJSON())})),e},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});t.exports=f},function(t,e){t.exports=function(t,e,i,n){var s,r=[],a=!1;if((i||n)&&(a=!0,i=i||"",n=n||""),e<t)for(s=t;e<=s;s--)a?r.push(i+s.toString()+n):r.push(s);else for(s=t;s<=e;s++)a?r.push(i+s.toString()+n):r.push(s);return r}},function(t,e,i){var n=i(0),s=i(102),r=i(9),a=i(324),o=new n({initialize:function(){this.entries=new s,this.events=new r},add:function(t,e){return this.entries.set(t,e),this.events.emit(a.ADD,this,t,e),this},has:function(t){return this.entries.has(t)},exists:function(t){return this.entries.has(t)},get:function(t){return this.entries.get(t)},remove:function(t){var e=this.get(t);return e&&(this.entries.delete(t),this.events.emit(a.REMOVE,this,t,e.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});t.exports=o},function(t,e,i){t.exports={ADD:i(736),REMOVE:i(737)}},function(t,e,i){var n=i(323),s=i(0),r=i(22),a=new s({initialize:function(t){this.game=t,this.binary=new n,this.bitmapFont=new n,this.json=new n,this.physics=new n,this.shader=new n,this.audio=new n,this.video=new n,this.text=new n,this.html=new n,this.obj=new n,this.tilemap=new n,this.xml=new n,this.custom={},this.game.events.once(r.DESTROY,this.destroy,this)},addCustom:function(t){return this.custom.hasOwnProperty(t)||(this.custom[t]=new n),this.custom[t]},destroy:function(){for(var t=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],e=0;e<t.length;e++)this[t[e]].destroy(),this[t[e]]=null;for(var i in this.custom)this.custom[i].destroy();this.custom=null,this.game=null}});t.exports=a},function(t,e,i){var n=i(133),s=i(190),r=i(18),a=i(0),o=i(11),h=i(333),l=i(37),c=i(135),u=i(10),d=i(3),f=new a({Extends:n,Mixins:[o.Flip,o.Tint,o.Pipeline],initialize:function(t,e,i,s){n.call(this,t,e,i,s),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new h.Fade(this),this.flashEffect=new h.Flash(this),this.shakeEffect=new h.Shake(this),this.panEffect=new h.Pan(this),this.rotateToEffect=new h.RotateTo(this),this.zoomEffect=new h.Zoom(this),this.lerp=new d(1,1),this.followOffset=new d,this.deadzone=null,this._follow=null},setDeadzone:function(t,e){var i,n,r,a;return void 0===t?this.deadzone=null:(this.deadzone?(this.deadzone.width=t,this.deadzone.height=e):this.deadzone=new u(0,0,t,e),this._follow&&(i=this.width/2,n=this.height/2,r=this._follow.x-this.followOffset.x,a=this._follow.y-this.followOffset.y,this.midPoint.set(r,a),this.scrollX=r-i,this.scrollY=a-n),s(this.deadzone,this.midPoint.x,this.midPoint.y)),this},fadeIn:function(t,e,i,n,s,r){return this.fadeEffect.start(!1,t,e,i,n,!0,s,r)},fadeOut:function(t,e,i,n,s,r){return this.fadeEffect.start(!0,t,e,i,n,!0,s,r)},fadeFrom:function(t,e,i,n,s,r,a){return this.fadeEffect.start(!1,t,e,i,n,s,r,a)},fade:function(t,e,i,n,s,r,a){return this.fadeEffect.start(!0,t,e,i,n,s,r,a)},flash:function(t,e,i,n,s,r,a){return this.flashEffect.start(t,e,i,n,s,r,a)},shake:function(t,e,i,n,s){return this.shakeEffect.start(t,e,i,n,s)},pan:function(t,e,i,n,s,r,a){return this.panEffect.start(t,e,i,n,s,r,a)},rotateTo:function(t,e,i,n,s,r,a){return this.rotateToEffect.start(t,e,i,n,s,r,a)},zoomTo:function(t,e,i,n,s,r){return this.zoomEffect.start(t,e,i,n,s,r)},preRender:function(){this.renderList.length=0;var t=this.width,e=this.height,i=.5*t,n=.5*e,r=this.zoom,a=this.matrix,o=t*this.originX,h=e*this.originY,u=this._follow,d=this.deadzone,f=this.scrollX,p=this.scrollY;d&&s(d,this.midPoint.x,this.midPoint.y);var g,m,v=!1;u&&!this.panEffect.isRunning&&(g=u.x-this.followOffset.x,m=u.y-this.followOffset.y,d?(g<d.x?f=c(f,f-(d.x-g),this.lerp.x):g>d.right&&(f=c(f,f+(g-d.right),this.lerp.x)),m<d.y?p=c(p,p-(d.y-m),this.lerp.y):m>d.bottom&&(p=c(p,p+(m-d.bottom),this.lerp.y))):(f=c(f,g-o,this.lerp.x),p=c(p,m-h,this.lerp.y)),v=!0),this.useBounds&&(f=this.clampX(f),p=this.clampY(p)),this.roundPixels&&(o=Math.round(o),h=Math.round(h),f=Math.round(f),p=Math.round(p));var y=(this.scrollX=f)+i,_=(this.scrollY=p)+n;this.midPoint.set(y,_);var x=t/r,w=e/r,b=y-x/2,E=_-w/2;this.roundPixels&&(b=Math.round(b),E=Math.round(E)),this.worldView.setTo(b,E,x,w),a.applyITRS(this.x+o,this.y+h,this.rotation,r,r),a.translate(-o,-h),this.shakeEffect.preRender(),v&&this.emit(l.FOLLOW_UPDATE,this,u)},setLerp:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),this.lerp.set(t,e),this},setFollowOffset:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),this.followOffset.set(t,e),this},startFollow:function(t,e,i,n,s,a){void 0===e&&(e=!1),void 0===i&&(i=1),void 0===n&&(n=i),void 0===s&&(s=0),void 0===a&&(a=s),this._follow=t,this.roundPixels=e,i=r(i,0,1),n=r(n,0,1),this.lerp.set(i,n),this.followOffset.set(s,a);var o=this.width/2,h=this.height/2,l=t.x-s,c=t.y-a;return this.midPoint.set(l,c),this.scrollX=l-o,this.scrollY=c-h,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(t,e){this.visible&&(this.rotateToEffect.update(t,e),this.panEffect.update(t,e),this.zoomEffect.update(t,e),this.shakeEffect.update(t,e),this.flashEffect.update(t,e),this.fadeEffect.update(t,e))},destroy:function(){this.resetFX(),n.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});t.exports=f},function(t,e,i){var n=i(38);t.exports=function(t){var e=new n;t=t.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,i,n){return e+e+i+i+n+n}));var i,s,r,a=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return a&&(i=parseInt(a[1],16),s=parseInt(a[2],16),r=parseInt(a[3],16),e.setTo(i,s,r)),e}},function(t,e){t.exports=function(t,e,i,n){return n<<24|t<<16|e<<8|i}},function(t,e){t.exports=function(t,e,i,n){void 0===n&&(n={h:0,s:0,v:0}),t/=255,e/=255,i/=255;var s=Math.min(t,e,i),r=Math.max(t,e,i),a=r-s,o=0,h=0===r?0:a/r,l=r;return r!==s&&(r===t?o=(e-i)/a+(e<i?6:0):r===e?o=(i-t)/a+2:r===i&&(o=(t-e)/a+4),o/=6),n.hasOwnProperty("_h")?(n._h=o,n._s=h,n._v=l):(n.h=o,n.s=h,n.v=l),n}},function(t,e){t.exports=function(t){return 16777215<t?{a:t>>>24,r:t>>16&255,g:t>>8&255,b:255&t}:{a:255,r:t>>16&255,g:t>>8&255,b:255&t}}},function(t,e,i){var n=i(38);t.exports=function(t){return new n(t.r,t.g,t.b,t.a)}},function(t,e,i){var n=i(38);t.exports=function(t){var e,i,s,r,a=new n,o=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(t.toLowerCase());return o&&(e=parseInt(o[1],10),i=parseInt(o[2],10),s=parseInt(o[3],10),r=void 0!==o[4]?parseFloat(o[4]):1,a.setTo(e,i,s,255*r)),a}},function(t,e,i){t.exports={Fade:i(761),Flash:i(762),Pan:i(763),Shake:i(796),RotateTo:i(797),Zoom:i(798)}},function(t,e,i){t.exports={In:i(764),Out:i(765),InOut:i(766)}},function(t,e,i){t.exports={In:i(767),Out:i(768),InOut:i(769)}},function(t,e,i){t.exports={In:i(770),Out:i(771),InOut:i(772)}},function(t,e,i){t.exports={In:i(773),Out:i(774),InOut:i(775)}},function(t,e,i){t.exports={In:i(776),Out:i(777),InOut:i(778)}},function(t,e,i){t.exports={In:i(779),Out:i(780),InOut:i(781)}},function(t,e,i){t.exports=i(782)},function(t,e,i){t.exports={In:i(783),Out:i(784),InOut:i(785)}},function(t,e,i){t.exports={In:i(786),Out:i(787),InOut:i(788)}},function(t,e,i){t.exports={In:i(789),Out:i(790),InOut:i(791)}},function(t,e,i){t.exports={In:i(792),Out:i(793),InOut:i(794)}},function(t,e,i){t.exports=i(795)},function(t,e,i){var n=i(0),s=i(33),r=i(347),a=i(2),o=i(6),h=i(7),l=i(193),c=i(1),u=i(197),d=i(187),f=new n({initialize:function(t){void 0===t&&(t={}),this.width=o(t,"width",1024),this.height=o(t,"height",768),this.zoom=o(t,"zoom",1),this.parent=o(t,"parent",void 0),this.scaleMode=o(t,"scaleMode",0),this.expandParent=o(t,"expandParent",!0),this.autoRound=o(t,"autoRound",!1),this.autoCenter=o(t,"autoCenter",0),this.resizeInterval=o(t,"resizeInterval",500),this.fullscreenTarget=o(t,"fullscreenTarget",null),this.minWidth=o(t,"minWidth",0),this.maxWidth=o(t,"maxWidth",0),this.minHeight=o(t,"minHeight",0),this.maxHeight=o(t,"maxHeight",0);var e=o(t,"scale",null);e&&(this.width=o(e,"width",this.width),this.height=o(e,"height",this.height),this.zoom=o(e,"zoom",this.zoom),this.parent=o(e,"parent",this.parent),this.scaleMode=o(e,"mode",this.scaleMode),this.expandParent=o(e,"expandParent",this.expandParent),this.autoRound=o(e,"autoRound",this.autoRound),this.autoCenter=o(e,"autoCenter",this.autoCenter),this.resizeInterval=o(e,"resizeInterval",this.resizeInterval),this.fullscreenTarget=o(e,"fullscreenTarget",this.fullscreenTarget),this.minWidth=o(e,"min.width",this.minWidth),this.maxWidth=o(e,"max.width",this.maxWidth),this.minHeight=o(e,"min.height",this.minHeight),this.maxHeight=o(e,"max.height",this.maxHeight)),this.renderType=o(t,"type",s.AUTO),this.canvas=o(t,"canvas",null),this.context=o(t,"context",null),this.canvasStyle=o(t,"canvasStyle",null),this.customEnvironment=o(t,"customEnvironment",!1),this.sceneConfig=o(t,"scene",null),this.seed=o(t,"seed",[(Date.now()*Math.random()).toString()]),l.RND=new l.RandomDataGenerator(this.seed),this.gameTitle=o(t,"title",""),this.gameURL=o(t,"url","https://phaser.io"),this.gameVersion=o(t,"version",""),this.autoFocus=o(t,"autoFocus",!0),this.domCreateContainer=o(t,"dom.createContainer",!1),this.domBehindCanvas=o(t,"dom.behindCanvas",!1),this.domPointerEvents=o(t,"dom.pointerEvents","none"),this.inputKeyboard=o(t,"input.keyboard",!0),this.inputKeyboardEventTarget=o(t,"input.keyboard.target",window),this.inputKeyboardCapture=o(t,"input.keyboard.capture",[]),this.inputMouse=o(t,"input.mouse",!0),this.inputMouseEventTarget=o(t,"input.mouse.target",null),this.inputMousePreventDefaultDown=o(t,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=o(t,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=o(t,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=o(t,"input.mouse.preventDefaultWheel",!0),this.inputTouch=o(t,"input.touch",r.input.touch),this.inputTouchEventTarget=o(t,"input.touch.target",null),this.inputTouchCapture=o(t,"input.touch.capture",!0),this.inputActivePointers=o(t,"input.activePointers",1),this.inputSmoothFactor=o(t,"input.smoothFactor",0),this.inputWindowEvents=o(t,"input.windowEvents",!0),this.inputGamepad=o(t,"input.gamepad",!1),this.inputGamepadEventTarget=o(t,"input.gamepad.target",window),this.disableContextMenu=o(t,"disableContextMenu",!1),this.audio=o(t,"audio",{}),this.hideBanner=!1===o(t,"banner",null),this.hidePhaser=o(t,"banner.hidePhaser",!1),this.bannerTextColor=o(t,"banner.text","#ffffff"),this.bannerBackgroundColor=o(t,"banner.background",["#ff0000","#ffff00","#00ff00","#00ffff","#000000"]),""===this.gameTitle&&this.hidePhaser&&(this.hideBanner=!0),this.fps=o(t,"fps",null);var i=o(t,"render",t);this.pipeline=o(i,"pipeline",null),this.antialias=o(i,"antialias",!0),this.antialiasGL=o(i,"antialiasGL",!0),this.mipmapFilter=o(i,"mipmapFilter","LINEAR"),this.desynchronized=o(i,"desynchronized",!1),this.roundPixels=o(i,"roundPixels",!1),this.pixelArt=o(i,"pixelArt",1!==this.zoom),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=o(i,"transparent",!1),this.clearBeforeRender=o(i,"clearBeforeRender",!0),this.preserveDrawingBuffer=o(i,"preserveDrawingBuffer",!1),this.premultipliedAlpha=o(i,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=o(i,"failIfMajorPerformanceCaveat",!1),this.powerPreference=o(i,"powerPreference","default"),this.batchSize=o(i,"batchSize",4096),this.maxTextures=o(i,"maxTextures",-1),this.maxLights=o(i,"maxLights",10);var n=o(t,"backgroundColor",0);this.backgroundColor=d(n),this.transparent&&(this.backgroundColor=d(0),this.backgroundColor.alpha=0),this.preBoot=o(t,"callbacks.preBoot",c),this.postBoot=o(t,"callbacks.postBoot",c),this.physics=o(t,"physics",{}),this.defaultPhysicsSystem=o(this.physics,"default",!1),this.loaderBaseURL=o(t,"loader.baseURL",""),this.loaderPath=o(t,"loader.path","");var f=r.os.android?6:32;this.loaderMaxParallelDownloads=o(t,"loader.maxParallelDownloads",f),this.loaderCrossOrigin=o(t,"loader.crossOrigin",void 0),this.loaderResponseType=o(t,"loader.responseType",""),this.loaderAsync=o(t,"loader.async",!0),this.loaderUser=o(t,"loader.user",""),this.loaderPassword=o(t,"loader.password",""),this.loaderTimeout=o(t,"loader.timeout",0),this.loaderWithCredentials=o(t,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var p=o(t,"plugins",null),g=u.DefaultScene;p&&(Array.isArray(p)?this.defaultPlugins=p:h(p)&&(this.installGlobalPlugins=a(p,"global",[]),this.installScenePlugins=a(p,"scene",[]),Array.isArray(p.default)?g=p.default:Array.isArray(p.defaultMerge)&&(g=g.concat(p.defaultMerge)))),this.defaultPlugins=g;var m="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=o(t,"images.default",m+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=o(t,"images.missing",m+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=o(t,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=s.WEBGL:window.FORCE_CANVAS&&(this.renderType=s.CANVAS))}});t.exports=f},function(t,e,i){t.exports={os:i(105),browser:i(136),features:i(191),input:i(808),audio:i(809),video:i(810),fullscreen:i(811),canvasFeatures:i(348)}},function(t,e,i){var n,s,r,a=i(31),o={supportInverseAlpha:!1,supportNewBlendModes:!1};t.exports=("function"!=typeof importScripts&&void 0!==document&&(o.supportNewBlendModes=(n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",s="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",(r=new Image).onload=function(){var t=new Image;t.onload=function(){var e=a.create(t,6,1).getContext("2d");if(e.globalCompositeOperation="multiply",e.drawImage(r,0,0),e.drawImage(t,2,0),!e.getImageData(2,0,1,1))return!1;var i=e.getImageData(2,0,1,1).data;a.remove(t),o.supportNewBlendModes=255===i[0]&&0===i[1]&&0===i[2]},t.src=n+"/wCKxvRF"+s},r.src=n+"AP804Oa6"+s,!1),o.supportInverseAlpha=function(){var t=a.create(this,2,1).getContext("2d");t.fillStyle="rgba(10, 20, 30, 0.5)",t.fillRect(0,0,1,1);var e=t.getImageData(0,0,1,1);if(null===e)return!1;t.putImageData(e,1,0);var i=t.getImageData(1,0,1,1);return i.data[0]===e.data[0]&&i.data[1]===e.data[1]&&i.data[2]===e.data[2]&&i.data[3]===e.data[3]}()),o)},function(t,e){t.exports=function(t,e,i,n){return Math.atan2(n-e,i-t)}},function(t,e){t.exports=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}},function(t,e){t.exports=function(t){return 0<=(t%=2*Math.PI)?t:t+2*Math.PI}},function(t,e){t.exports=function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)}},function(t,e){t.exports=function(t,e,i,n){var s=t-i,r=e-n;return s*s+r*r}},function(t,e){t.exports=function(t,e,i){return void 0===i&&(i=1e-4),e-i<t}},function(t,e){t.exports=function(t,e,i){return void 0===i&&(i=1e-4),t<e+i}},function(t,e,i){var n=i(357);t.exports=function(t,e){return n(t)/n(e)/n(t-e)}},function(t,e){t.exports=function(t){if(0===t)return 1;for(var e=t;--t;)e*=t;return e}},function(t,e){t.exports=function(t,e,i,n,s){return(l=1-t)*l*l*e+3*(h=1-(o=t))*h*o*i+3*(1-(a=t))*a*a*n+(r=t)*r*r*s;var r,a,o,h,l}},function(t,e){t.exports=function(t,e,i,n){return(a=1-t)*a*e+2*(1-(r=t))*r*i+(s=t)*s*n;var s,r,a}},function(t,e,i){var n=i(184);t.exports=function(t,e,i){return e+(i-e)*n(t,0,1)}},function(t,e){t.exports=function(t){var e=Math.log(t)/.6931471805599453;return 1<<Math.ceil(e)}},function(t,e){t.exports=function(t,e){var i=t.x,n=t.y;return t.x=i*Math.cos(e)-n*Math.sin(e),t.y=i*Math.sin(e)+n*Math.cos(e),t}},function(t,e){t.exports=function(t){return 0<t?Math.ceil(t):Math.floor(t)}},function(t,e,i){var n=new(i(0))({initialize:function(t){this.val=new Float32Array(9),t?this.copy(t):this.identity()},clone:function(){return new n(this)},set:function(t){return this.copy(t)},copy:function(t){var e=this.val,i=t.val;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this},fromMat4:function(t){var e=t.val,i=this.val;return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[4],i[4]=e[5],i[5]=e[6],i[6]=e[8],i[7]=e[9],i[8]=e[10],this},fromArray:function(t){var e=this.val;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},identity:function(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this},transpose:function(){var t=this.val,e=t[1],i=t[2],n=t[5];return t[1]=t[3],t[2]=t[6],t[3]=e,t[5]=t[7],t[6]=i,t[7]=n,this},invert:function(){var t=this.val,e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],a=t[5],o=t[6],h=t[7],l=t[8],c=l*r-a*h,u=-l*s+a*o,d=h*s-r*o,f=e*c+i*u+n*d;return f?(f=1/f,t[0]=c*f,t[1]=(-l*i+n*h)*f,t[2]=(a*i-n*r)*f,t[3]=u*f,t[4]=(l*e-n*o)*f,t[5]=(-a*e+n*s)*f,t[6]=d*f,t[7]=(-h*e+i*o)*f,t[8]=(r*e-i*s)*f,this):null},adjoint:function(){var t=this.val,e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],a=t[5],o=t[6],h=t[7],l=t[8];return t[0]=r*l-a*h,t[1]=n*h-i*l,t[2]=i*a-n*r,t[3]=a*o-s*l,t[4]=e*l-n*o,t[5]=n*s-e*a,t[6]=s*h-r*o,t[7]=i*o-e*h,t[8]=e*r-i*s,this},determinant:function(){var t=this.val,e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],a=t[5],o=t[6],h=t[7],l=t[8];return e*(l*r-a*h)+i*(-l*s+a*o)+n*(h*s-r*o)},multiply:function(t){var e=this.val,i=e[0],n=e[1],s=e[2],r=e[3],a=e[4],o=e[5],h=e[6],l=e[7],c=e[8],u=t.val,d=u[0],f=u[1],p=u[2],g=u[3],m=u[4],v=u[5],y=u[6],_=u[7],x=u[8];return e[0]=d*i+f*r+p*h,e[1]=d*n+f*a+p*l,e[2]=d*s+f*o+p*c,e[3]=g*i+m*r+v*h,e[4]=g*n+m*a+v*l,e[5]=g*s+m*o+v*c,e[6]=y*i+_*r+x*h,e[7]=y*n+_*a+x*l,e[8]=y*s+_*o+x*c,this},translate:function(t){var e=this.val,i=t.x,n=t.y;return e[6]=i*e[0]+n*e[3]+e[6],e[7]=i*e[1]+n*e[4]+e[7],e[8]=i*e[2]+n*e[5]+e[8],this},rotate:function(t){var e=this.val,i=e[0],n=e[1],s=e[2],r=e[3],a=e[4],o=e[5],h=Math.sin(t),l=Math.cos(t);return e[0]=l*i+h*r,e[1]=l*n+h*a,e[2]=l*s+h*o,e[3]=l*r-h*i,e[4]=l*a-h*n,e[5]=l*o-h*s,this},scale:function(t){var e=this.val,i=t.x,n=t.y;return e[0]=i*e[0],e[1]=i*e[1],e[2]=i*e[2],e[3]=n*e[3],e[4]=n*e[4],e[5]=n*e[5],this},fromQuat:function(t){var e=t.x,i=t.y,n=t.z,s=t.w,r=e+e,a=i+i,o=n+n,h=e*r,l=e*a,c=e*o,u=i*a,d=i*o,f=n*o,p=s*r,g=s*a,m=s*o,v=this.val;return v[0]=1-(u+f),v[3]=l+m,v[6]=c-g,v[1]=l-m,v[4]=1-(h+f),v[7]=d+p,v[2]=c+g,v[5]=d-p,v[8]=1-(h+u),this},normalFromMat4:function(t){var e=t.val,i=this.val,n=e[0],s=e[1],r=e[2],a=e[3],o=e[4],h=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],p=e[11],g=e[12],m=e[13],v=e[14],y=e[15],_=n*h-s*o,x=n*l-r*o,w=n*c-a*o,b=s*l-r*h,E=s*c-a*h,T=r*c-a*l,S=u*m-d*g,A=u*v-f*g,O=u*y-p*g,C=d*v-f*m,P=d*y-p*m,L=f*y-p*v,R=_*L-x*P+w*C+b*O-E*A+T*S;return R?(R=1/R,i[0]=(h*L-l*P+c*C)*R,i[1]=(l*O-o*L-c*A)*R,i[2]=(o*P-h*O+c*S)*R,i[3]=(r*P-s*L-a*C)*R,i[4]=(n*L-r*O+a*A)*R,i[5]=(s*O-n*P-a*S)*R,i[6]=(m*T-v*E+y*b)*R,i[7]=(v*w-g*T-y*x)*R,i[8]=(g*E-m*w+y*_)*R,this):null}});t.exports=n},function(t,e,i){var n=i(0),s=i(364),r=i(1),a=i(39),o=new Int8Array([1,2,0]),h=new Float32Array([0,0,0]),l=new a(1,0,0),c=new a(0,1,0),u=new a,d=new s,f=new n({initialize:function(t,e,i,n){this.onChangeCallback=r,this.set(t,e,i,n)},x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback(this)}},copy:function(t){return this.set(t)},set:function(t,e,i,n,s){return void 0===s&&(s=!0),"object"==typeof t?(this._x=t.x||0,this._y=t.y||0,this._z=t.z||0,this._w=t.w||0):(this._x=t||0,this._y=e||0,this._z=i||0,this._w=n||0),s&&this.onChangeCallback(this),this},add:function(t){return this._x+=t.x,this._y+=t.y,this._z+=t.z,this._w+=t.w,this.onChangeCallback(this),this},subtract:function(t){return this._x-=t.x,this._y-=t.y,this._z-=t.z,this._w-=t.w,this.onChangeCallback(this),this},scale:function(t){return this._x*=t,this._y*=t,this._z*=t,this._w*=t,this.onChangeCallback(this),this},length:function(){var t=this.x,e=this.y,i=this.z,n=this.w;return Math.sqrt(t*t+e*e+i*i+n*n)},lengthSq:function(){var t=this.x,e=this.y,i=this.z,n=this.w;return t*t+e*e+i*i+n*n},normalize:function(){var t=this.x,e=this.y,i=this.z,n=this.w,s=t*t+e*e+i*i+n*n;return 0<s&&(s=1/Math.sqrt(s),this._x=t*s,this._y=e*s,this._z=i*s,this._w=n*s),this.onChangeCallback(this),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,e){void 0===e&&(e=0);var i=this.x,n=this.y,s=this.z,r=this.w;return this.set(i+e*(t.x-i),n+e*(t.y-n),s+e*(t.z-s),r+e*(t.w-r))},rotationTo:function(t,e){var i=t.x*e.x+t.y*e.y+t.z*e.z;return i<-.999999?(u.copy(l).cross(t).length()<1e-6&&u.copy(c).cross(t),u.normalize(),this.setAxisAngle(u,Math.PI)):.999999<i?this.set(0,0,0,1):(u.copy(t).cross(e),this._x=u.x,this._y=u.y,this._z=u.z,this._w=1+i,this.normalize())},setAxes:function(t,e,i){var n=d.val;return n[0]=e.x,n[3]=e.y,n[6]=e.z,n[1]=i.x,n[4]=i.y,n[7]=i.z,n[2]=-t.x,n[5]=-t.y,n[8]=-t.z,this.fromMat3(d).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(t,e){e*=.5;var i=Math.sin(e);return this.set(i*t.x,i*t.y,i*t.z,Math.cos(e))},multiply:function(t){var e=this.x,i=this.y,n=this.z,s=this.w,r=t.x,a=t.y,o=t.z,h=t.w;return this.set(e*h+s*r+i*o-n*a,i*h+s*a+n*r-e*o,n*h+s*o+e*a-i*r,s*h-e*r-i*a-n*o)},slerp:function(t,e){var i=this.x,n=this.y,s=this.z,r=this.w,a=t.x,o=t.y,h=t.z,l=t.w,c=i*a+n*o+s*h+r*l;c<0&&(c=-c,a=-a,o=-o,h=-h,l=-l);var u,d,f=1-e,p=e;return 1e-6<1-c&&(u=Math.acos(c),d=Math.sin(u),f=Math.sin((1-e)*u)/d,p=Math.sin(e*u)/d),this.set(f*i+p*a,f*n+p*o,f*s+p*h,f*r+p*l)},invert:function(){var t=this.x,e=this.y,i=this.z,n=this.w,s=t*t+e*e+i*i+n*n,r=s?1/s:0;return this.set(-t*r,-e*r,-i*r,n*r)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(t){t*=.5;var e=this.x,i=this.y,n=this.z,s=this.w,r=Math.sin(t),a=Math.cos(t);return this.set(e*a+s*r,i*a+n*r,n*a-i*r,s*a-e*r)},rotateY:function(t){t*=.5;var e=this.x,i=this.y,n=this.z,s=this.w,r=Math.sin(t),a=Math.cos(t);return this.set(e*a-n*r,i*a+s*r,n*a+e*r,s*a-i*r)},rotateZ:function(t){t*=.5;var e=this.x,i=this.y,n=this.z,s=this.w,r=Math.sin(t),a=Math.cos(t);return this.set(e*a+i*r,i*a-e*r,n*a+s*r,s*a-n*r)},calculateW:function(){var t=this.x,e=this.y,i=this.z;return this.w=-Math.sqrt(1-t*t-e*e-i*i),this},setFromEuler:function(t,e){var i=t.x/2,n=t.y/2,s=t.z/2,r=Math.cos(i),a=Math.cos(n),o=Math.cos(s),h=Math.sin(i),l=Math.sin(n),c=Math.sin(s);switch(t.order){case"XYZ":this.set(h*a*o+r*l*c,r*l*o-h*a*c,r*a*c+h*l*o,r*a*o-h*l*c,e);break;case"YXZ":this.set(h*a*o+r*l*c,r*l*o-h*a*c,r*a*c-h*l*o,r*a*o+h*l*c,e);break;case"ZXY":this.set(h*a*o-r*l*c,r*l*o+h*a*c,r*a*c+h*l*o,r*a*o-h*l*c,e);break;case"ZYX":this.set(h*a*o-r*l*c,r*l*o+h*a*c,r*a*c-h*l*o,r*a*o+h*l*c,e);break;case"YZX":this.set(h*a*o+r*l*c,r*l*o+h*a*c,r*a*c-h*l*o,r*a*o-h*l*c,e);break;case"XZY":this.set(h*a*o-r*l*c,r*l*o-h*a*c,r*a*c+h*l*o,r*a*o+h*l*c,e)}return this},setFromRotationMatrix:function(t){var e,i=t.val,n=i[0],s=i[4],r=i[8],a=i[1],o=i[5],h=i[9],l=i[2],c=i[6],u=i[10],d=n+o+u;return 0<d?(e=.5/Math.sqrt(d+1),this.set((c-h)*e,(r-l)*e,(a-s)*e,.25/e)):o<n&&u<n?(e=2*Math.sqrt(1+n-o-u),this.set(.25*e,(s+a)/e,(r+l)/e,(c-h)/e)):u<o?(e=2*Math.sqrt(1+o-n-u),this.set((s+a)/e,.25*e,(h+c)/e,(r-l)/e)):(e=2*Math.sqrt(1+u-n-o),this.set((r+l)/e,(h+c)/e,.25*e,(a-s)/e)),this},fromMat3:function(t){var e,i,n,s,r=t.val,a=r[0]+r[4]+r[8];return 0<a?(s=Math.sqrt(a+1),this.w=.5*s,s=.5/s,this._x=(r[7]-r[5])*s,this._y=(r[2]-r[6])*s,this._z=(r[3]-r[1])*s):(e=0,r[4]>r[0]&&(e=1),r[8]>r[3*e+e]&&(e=2),i=o[e],n=o[i],s=Math.sqrt(r[3*e+e]-r[3*i+i]-r[3*n+n]+1),h[e]=.5*s,s=.5/s,h[i]=(r[3*i+e]+r[3*e+i])*s,h[n]=(r[3*n+e]+r[3*e+n])*s,this._x=h[0],this._y=h[1],this._z=h[2],this._w=(r[3*n+i]-r[3*i+n])*s),this.onChangeCallback(this),this}});t.exports=f},function(t,e,i){var n=i(367),s=i(31),r=i(33),a=i(191);t.exports=function(t){var e=t.config;if((e.customEnvironment||e.canvas)&&e.renderType===r.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!e.customEnvironment&&!e.canvas&&e.renderType!==r.HEADLESS)if(e.renderType===r.CANVAS||e.renderType!==r.CANVAS&&!a.webGL){if(!a.canvas)throw new Error("Cannot create Canvas or WebGL context, aborting.");e.renderType=r.CANVAS}else e.renderType=r.WEBGL;e.antialias||s.disableSmoothing();var o,h,l=t.scale.baseSize,c=l.width,u=l.height;e.canvas?(t.canvas=e.canvas,t.canvas.width=c,t.canvas.height=u):t.canvas=s.create(t,c,u,e.renderType),e.canvasStyle&&(t.canvas.style=e.canvasStyle),e.antialias||n.setCrisp(t.canvas),e.renderType!==r.HEADLESS&&(o=i(368),h=i(371),e.renderType===r.WEBGL?t.renderer=new h(t):(t.renderer=new o(t),t.context=t.renderer.gameContext))}},function(t,e){t.exports={setCrisp:function(t){return["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"].forEach((function(e){t.style["image-rendering"]=e})),t.style.msInterpolationMode="nearest-neighbor",t},setBicubic:function(t){return t.style["image-rendering"]="auto",t.style.msInterpolationMode="bicubic",t}}},function(t,e,i){var n=i(37),s=i(369),r=i(0),a=i(33),o=i(9),h=i(91),l=i(370),c=i(104),u=i(106),d=i(25),f=new r({Extends:o,initialize:function(t){o.call(this);var e=t.config;this.config={clearBeforeRender:e.clearBeforeRender,backgroundColor:e.backgroundColor,antialias:e.antialias,roundPixels:e.roundPixels},this.game=t,this.type=a.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=t.canvas;var i={alpha:t.config.transparent,desynchronized:t.config.desynchronized};this.gameContext=e.context?e.context:this.gameCanvas.getContext("2d",i),this.currentContext=this.gameContext,this.antialias=t.config.antialias,this.blendModes=l(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new d,this._tempMatrix2=new d,this._tempMatrix3=new d,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(u.READY,this.boot,this)},boot:function(){var t=this.game,e=t.scale.baseSize;this.width=e.width,this.height=e.height,this.isBooted=!0,t.scale.on(c.RESIZE,this.onResize,this),this.resize(e.width,e.height)},onResize:function(t,e){e.width===this.width&&e.height===this.height||this.resize(e.width,e.height)},resize:function(t,e){this.width=t,this.height=e,this.emit(h.RESIZE,t,e)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(t){return this.currentContext.globalCompositeOperation=t,this},setContext:function(t){return this.currentContext=t||this.gameContext,this},setAlpha:function(t){return this.currentContext.globalAlpha=t,this},preRender:function(){var t=this.gameContext,e=this.config,i=this.width,n=this.height;t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),e.clearBeforeRender&&(t.clearRect(0,0,i,n),e.transparent||(t.fillStyle=e.backgroundColor.rgba,t.fillRect(0,0,i,n))),t.save(),this.drawCount=0,this.emit(h.PRE_RENDER)},render:function(t,e,i){var s=e.length;this.emit(h.RENDER,t,i);var r=i.x,a=i.y,o=i.width,l=i.height,c=i.renderToTexture?i.context:t.sys.context;c.save(),this.game.scene.customViewports&&(c.beginPath(),c.rect(r,a,o,l),c.clip()),this.currentContext=c;var u=i.mask;u&&u.preRenderCanvas(this,null,i._maskCamera),i.transparent||(c.fillStyle=i.backgroundColor.rgba,c.fillRect(r,a,o,l)),c.globalAlpha=i.alpha,c.globalCompositeOperation="source-over",this.drawCount+=s,i.renderToTexture&&i.emit(n.PRE_RENDER,i),i.matrix.copyToContext(c);for(var d=0;d<s;d++){var f=e[d];f.mask&&f.mask.preRenderCanvas(this,f,i),f.renderCanvas(this,f,i),f.mask&&f.mask.postRenderCanvas(this,f,i)}c.setTransform(1,0,0,1,0,0),c.globalCompositeOperation="source-over",c.globalAlpha=1,i.flashEffect.postRenderCanvas(c),i.fadeEffect.postRenderCanvas(c),i.dirty=!1,u&&u.postRenderCanvas(this),c.restore(),i.renderToTexture&&(i.emit(n.POST_RENDER,i),i.renderToGame&&t.sys.context.drawImage(i.canvas,r,a))},postRender:function(){this.gameContext.restore(),this.emit(h.POST_RENDER);var t=this.snapshotState;t.callback&&(s(this.gameCanvas,t),t.callback=null)},snapshotCanvas:function(t,e,i,n,r,a,o,h,l){void 0===i&&(i=!1),this.snapshotArea(n,r,a,o,e,h,l);var c=this.snapshotState;return c.getPixel=i,s(this.canvas,c),c.callback=null,this},snapshot:function(t,e,i){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,t,e,i)},snapshotArea:function(t,e,i,n,s,r,a){var o=this.snapshotState;return o.callback=s,o.type=r,o.encoder=a,o.getPixel=!1,o.x=t,o.y=e,o.width=Math.min(i,this.gameCanvas.width),o.height=Math.min(n,this.gameCanvas.height),this},snapshotPixel:function(t,e,i){return this.snapshotArea(t,e,1,1,i),this.snapshotState.getPixel=!0,this},batchSprite:function(t,e,i,n){var s,r,a,o,h,l,c,u,d,f,p,g,m,v,y,_,x,w=i.alpha*t.alpha;0!=w&&(s=this.currentContext,r=this._tempMatrix1,a=this._tempMatrix2,h=(o=e.canvasData).x,l=o.y,c=e.cutWidth,u=e.cutHeight,d=e.customPivot,f=e.source.resolution,p=t.displayOriginX,g=t.displayOriginY,m=-p+e.x,v=-g+e.y,t.isCropped&&((y=t._crop).flipX===t.flipX&&y.flipY===t.flipY||e.updateCropUVs(y,t.flipX,t.flipY),c=y.cw,u=y.ch,h=y.cx,l=y.cy,m=-p+y.x,v=-g+y.y,t.flipX&&(0<=m?m=-(m+c):m<0&&(m=Math.abs(m)-c)),t.flipY&&(0<=v?v=-(v+u):v<0&&(v=Math.abs(v)-u))),x=_=1,t.flipX&&(d||(m+=-e.realWidth+2*p),_=-1),t.flipY&&(d||(v+=-e.realHeight+2*g),x=-1),a.applyITRS(t.x,t.y,t.rotation,t.scaleX*_,t.scaleY*x),r.copyFrom(i.matrix),n?(r.multiplyWithOffset(n,-i.scrollX*t.scrollFactorX,-i.scrollY*t.scrollFactorY),a.e=t.x,a.f=t.y):(a.e-=i.scrollX*t.scrollFactorX,a.f-=i.scrollY*t.scrollFactorY),r.multiply(a),s.save(),r.setToContext(s),s.globalCompositeOperation=this.blendModes[t.blendMode],s.globalAlpha=w,s.imageSmoothingEnabled=!(!this.antialias||e.source.scaleMode),t.mask&&t.mask.preRenderCanvas(this,t,i),s.drawImage(e.source.image,h,l,c,u,m,v,c/f,u/f),t.mask&&t.mask.postRenderCanvas(this,t,i),s.restore())},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});t.exports=f},function(t,e,i){var n=i(31),s=i(38),r=i(2);t.exports=function(t,e){var i,a,o,h,l=r(e,"callback"),c=r(e,"type","image/png"),u=r(e,"encoder",.92),d=Math.abs(Math.round(r(e,"x",0))),f=Math.abs(Math.round(r(e,"y",0))),p=r(e,"width",t.width),g=r(e,"height",t.height);r(e,"getPixel",!1)?(i=t.getContext("2d").getImageData(d,f,1,1).data,l.call(null,new s(i[0],i[1],i[2],i[3]/255))):0!==d||0!==f||p!==t.width||g!==t.height?((a=n.createWebGL(this,p,g)).getContext("2d").drawImage(t,d,f,p,g,0,0,p,g),(o=new Image).onerror=function(){l.call(null),n.remove(a)},o.onload=function(){l.call(null,o),n.remove(a)},o.src=a.toDataURL(c,u)):((h=new Image).onerror=function(){l.call(null)},h.onload=function(){l.call(null,h)},h.src=t.toDataURL(c,u))}},function(t,e,i){var n=i(35),s=i(348);t.exports=function(){var t=[],e=s.supportNewBlendModes,i="source-over";return t[n.NORMAL]=i,t[n.ADD]="lighter",t[n.MULTIPLY]=e?"multiply":i,t[n.SCREEN]=e?"screen":i,t[n.OVERLAY]=e?"overlay":i,t[n.DARKEN]=e?"darken":i,t[n.LIGHTEN]=e?"lighten":i,t[n.COLOR_DODGE]=e?"color-dodge":i,t[n.COLOR_BURN]=e?"color-burn":i,t[n.HARD_LIGHT]=e?"hard-light":i,t[n.SOFT_LIGHT]=e?"soft-light":i,t[n.DIFFERENCE]=e?"difference":i,t[n.EXCLUSION]=e?"exclusion":i,t[n.HUE]=e?"hue":i,t[n.SATURATION]=e?"saturation":i,t[n.COLOR]=e?"color":i,t[n.LUMINOSITY]=e?"luminosity":i,t[n.ERASE]="destination-out",t[n.SOURCE_IN]="source-in",t[n.SOURCE_OUT]="source-out",t[n.SOURCE_ATOP]="source-atop",t[n.DESTINATION_OVER]="destination-over",t[n.DESTINATION_IN]="destination-in",t[n.DESTINATION_OUT]="destination-out",t[n.DESTINATION_ATOP]="destination-atop",t[n.LIGHTER]="lighter",t[n.COPY]="copy",t[n.XOR]="xor",t}},function(t,e,i){var n=i(93),s=i(37),r=i(0),a=i(33),o=i(9),h=i(91),l=i(22),c=i(138),u=i(69),d=i(1),f=i(372),p=i(141),g=i(104),m=i(106),v=i(12),y=i(383),_=new r({Extends:o,initialize:function(t){o.call(this);var e=t.config,i={alpha:e.transparent,desynchronized:e.desynchronized,depth:!1,antialias:e.antialiasGL,premultipliedAlpha:e.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:e.failIfMajorPerformanceCaveat,powerPreference:e.powerPreference,preserveDrawingBuffer:e.preserveDrawingBuffer};this.config={clearBeforeRender:e.clearBeforeRender,antialias:e.antialias,backgroundColor:e.backgroundColor,contextCreation:i,roundPixels:e.roundPixels,maxTextures:e.maxTextures,maxTextureSize:e.maxTextureSize,batchSize:e.batchSize,maxLights:e.maxLights,mipmapFilter:e.mipmapFilter},this.game=t,this.type=a.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=t.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=d,this.contextRestoredHandler=d,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function(t){var e=this.game,i=this.canvas,n=t.backgroundColor,s=e.config.context?e.config.context:i.getContext("webgl",t.contextCreation)||i.getContext("experimental-webgl",t.contextCreation);if(!s||s.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=s;var r=this;this.contextLostHandler=function(t){r.contextLost=!0,r.game.events.emit(l.CONTEXT_LOST,r),t.preventDefault()},this.contextRestoredHandler=function(){r.contextLost=!1,r.init(r.config),r.game.events.emit(l.CONTEXT_RESTORED,r)},i.addEventListener("webglcontextlost",this.contextLostHandler,!1),i.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),e.context=s;for(var o=0;o<=27;o++)this.blendModes.push({func:[s.ONE,s.ONE_MINUS_SRC_ALPHA],equation:s.FUNC_ADD});this.blendModes[1].func=[s.ONE,s.DST_ALPHA],this.blendModes[2].func=[s.DST_COLOR,s.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[s.ONE,s.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[s.ZERO,s.ONE_MINUS_SRC_ALPHA],equation:s.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=s.BYTE,this.glFormats[1]=s.SHORT,this.glFormats[2]=s.UNSIGNED_BYTE,this.glFormats[3]=s.UNSIGNED_SHORT,this.glFormats[4]=s.FLOAT,this.glFuncMap={mat2:{func:s.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:s.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:s.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:s.uniform1f,length:1},"1fv":{func:s.uniform1fv,length:1},"1i":{func:s.uniform1i,length:1},"1iv":{func:s.uniform1iv,length:1},"2f":{func:s.uniform2f,length:2},"2fv":{func:s.uniform2fv,length:1},"2i":{func:s.uniform2i,length:2},"2iv":{func:s.uniform2iv,length:1},"3f":{func:s.uniform3f,length:3},"3fv":{func:s.uniform3fv,length:1},"3i":{func:s.uniform3i,length:3},"3iv":{func:s.uniform3iv,length:1},"4f":{func:s.uniform4f,length:4},"4fv":{func:s.uniform4fv,length:1},"4i":{func:s.uniform4i,length:4},"4iv":{func:s.uniform4iv,length:1}};var h=s.getSupportedExtensions();t.maxTextures&&-1!==t.maxTextures||(t.maxTextures=s.getParameter(s.MAX_TEXTURE_IMAGE_UNITS)),t.maxTextureSize||(t.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE));var c="WEBGL_compressed_texture_",d="WEBKIT_"+c;this.compression.ETC1=s.getExtension(c+"etc1")||s.getExtension(d+"etc1"),this.compression.PVRTC=s.getExtension(c+"pvrtc")||s.getExtension(d+"pvrtc"),this.compression.S3TC=s.getExtension(c+"s3tc")||s.getExtension(d+"s3tc"),this.supportedExtensions=h;var p="ANGLE_instanced_arrays";this.instancedArraysExtension=-1<h.indexOf(p)?s.getExtension(p):null;var g="OES_vertex_array_object";this.vaoExtension=-1<h.indexOf(g)?s.getExtension(g):null,s.disable(s.DEPTH_TEST),s.disable(s.CULL_FACE),s.enable(s.BLEND),s.clearColor(n.redGL,n.greenGL,n.blueGL,n.alphaGL),this.mipmapFilter=s[t.mipmapFilter],this.maxTextures=v.checkShaderMax(s,t.maxTextures),this.textureIndexes=[];var y=this.tempTextures;if(Array.isArray(y))for(var _=0;o<this.maxTextures;_++)s.deleteTexture(y[_]);else y=new Array(this.maxTextures);for(var x=0;x<this.maxTextures;x++){var w=s.createTexture();s.activeTexture(s.TEXTURE0+x),s.bindTexture(s.TEXTURE_2D,w),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,1,1,0,s.RGBA,s.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),y[x]=w,this.textureIndexes.push(x)}return this.tempTextures=y,this.currentActiveTexture=1,this.startActiveTexture++,s.activeTexture(s.TEXTURE1),this.pipelines=new f(this),this.setBlendMode(a.BlendModes.NORMAL),this.projectionMatrix=(new u).identity(),e.textures.once(m.READY,this.boot,this),this},boot:function(){var t=this.game,e=this.pipelines,i=t.scale.baseSize;this.width=i.width,this.height=i.height,this.isBooted=!0,this.renderTarget=new p(this,this.width,this.height,1,0,!0,!0),e.boot(t.config.pipeline),this.blankTexture=t.textures.getFrame("__DEFAULT"),this.whiteTexture=t.textures.getFrame("__WHITE");var n=this.gl;n.bindFramebuffer(n.FRAMEBUFFER,null),n.enable(n.SCISSOR_TEST),t.scale.on(g.RESIZE,this.onResize,this),this.resize(i.width,i.height)},onResize:function(t,e){e.width===this.width&&e.height===this.height||this.resize(e.width,e.height)},beginCapture:function(t,e){void 0===t&&(t=this.width),void 0===e&&(e=this.height),this.renderTarget.bind(!0,t,e),this.setProjectionMatrix(t,e),this.resetTextures()},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(t,e){var i=this.gl;return this.width=t,this.height=e,this.setProjectionMatrix(t,e),i.viewport(0,0,t,e),this.drawingBufferHeight=i.drawingBufferHeight,i.scissor(0,i.drawingBufferHeight-e,t,e),this.defaultScissor[2]=t,this.defaultScissor[3]=e,this.emit(h.RESIZE,t,e),this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(t,e){return t===this.projectionWidth&&e===this.projectionHeight||(this.projectionWidth=t,this.projectionHeight=e,this.projectionMatrix.ortho(0,t,e,0,-1e3,1e3)),this},resetProjectionMatrix:function(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function(t){return!!this.supportedExtensions&&this.supportedExtensions.indexOf(t)},getExtension:function(t){return this.hasExtension(t)?(t in this.extensions||(this.extensions[t]=this.gl.getExtension(t)),this.extensions[t]):null},flush:function(){this.pipelines.flush()},pushScissor:function(t,e,i,n,s){void 0===s&&(s=this.drawingBufferHeight);var r=[t,e,i,n];return this.scissorStack.push(r),this.setScissor(t,e,i,n,s),this.currentScissor=r},setScissor:function(t,e,i,n,s){void 0===s&&(s=this.drawingBufferHeight);var r,a,o,h,l=this.gl,c=this.currentScissor,u=0<i&&0<n;c&&u&&(r=c[0],a=c[1],o=c[2],h=c[3],u=r!==t||a!==e||o!==i||h!==n),u&&(this.flush(),l.scissor(t,s-e-n,i,n))},resetScissor:function(){var t=this.gl;t.enable(t.SCISSOR_TEST);var e,i,n,s,r=this.currentScissor;r&&(e=r[0],i=r[1],n=r[2],s=r[3],0<n&&0<s&&t.scissor(e,this.drawingBufferHeight-i-s,n,s))},popScissor:function(){var t=this.scissorStack;t.pop();var e=t[t.length-1];e&&this.setScissor(e[0],e[1],e[2],e[3]),this.currentScissor=e},hasActiveStencilMask:function(){var t=this.currentMask.mask,e=this.currentCameraMask.mask;return t&&t.isStencil||e&&e.isStencil},resetViewport:function(){var t=this.gl;t.viewport(0,0,this.width,this.height),this.drawingBufferHeight=t.drawingBufferHeight},setBlendMode:function(t,e){void 0===e&&(e=!1);var i=this.gl,n=this.blendModes[t];return!!(e||t!==a.BlendModes.SKIP_CHECK&&this.currentBlendMode!==t)&&(this.flush(),i.enable(i.BLEND),i.blendEquation(n.equation),2<n.func.length?i.blendFuncSeparate(n.func[0],n.func[1],n.func[2],n.func[3]):i.blendFunc(n.func[0],n.func[1]),this.currentBlendMode=t,!0)},addBlendMode:function(t,e){return this.blendModes.push({func:t,equation:e})-1},updateBlendMode:function(t,e,i){return this.blendModes[t]&&(this.blendModes[t].func=e,i&&(this.blendModes[t].equation=i)),this},removeBlendMode:function(t){return 17<t&&this.blendModes[t]&&this.blendModes.splice(t,1),this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function(t){if(this.pipelines.forceZero())return this.setTextureZero(t.glTexture,!0),0;var e=this.gl,i=this.currentActiveTexture;return t.glIndexCounter<this.startActiveTexture&&(t.glIndexCounter=this.startActiveTexture,i<this.maxTextures?(t.glIndex=i,e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,t.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,t.glIndexCounter=this.startActiveTexture,t.glIndex=1,e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,t.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,t.glIndex},isNewNormalMap:function(t,e){return this.textureZero!==t||this.normalTexture!==e},setTextureZero:function(t,e){var i;this.textureZero!==t&&(e&&this.flush(),(i=this.gl).activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,t),this.textureZero=t)},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(t){var e;this.normalTexture!==t&&((e=this.gl).activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,t),this.normalTexture=t,1===this.currentActiveTexture&&(this.currentActiveTexture=2))},clearNormalMap:function(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function(){for(var t=this.gl,e=this.tempTextures,i=0;i<e.length;i++)t.activeTexture(t.TEXTURE0+i),t.bindTexture(t.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function(t){if(void 0===t&&(t=!1),!this.isTextureClean){this.flush();var e=this.gl,i=this.tempTextures;if(t){for(var n=0;n<i.length;n++)e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_2D,i[n]);e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,i[1]),this.isTextureClean=!0}else e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,i[0]),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,i[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function(t){if(this.pipelines.forceZero())return this.setTextureZero(t,!0),0;var e=this.gl,i=this.currentActiveTexture;return t.glIndexCounter<this.startActiveTexture&&(t.glIndexCounter=this.startActiveTexture,i<this.maxTextures?(t.glIndex=i,e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,t),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,t.glIndexCounter=this.startActiveTexture,t.glIndex=1,e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,t),this.currentActiveTexture=2)),this.isTextureClean=!1,t.glIndex},pushFramebuffer:function(t,e,i,n){return t===this.currentFramebuffer?this:(this.fboStack.push(t),this.setFramebuffer(t,e,i,n))},setFramebuffer:function(t,e,i,n){if(void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===n&&(n=!0),t===this.currentFramebuffer)return this;var s=this.gl,r=this.width,a=this.height;return t&&t.renderTexture&&n?(r=t.renderTexture.width,a=t.renderTexture.height):this.flush(),s.bindFramebuffer(s.FRAMEBUFFER,t),n&&s.viewport(0,0,r,a),e&&(t?(this.drawingBufferHeight=a,this.pushScissor(0,0,r,a)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=t,i&&this.resetTextures(),this},popFramebuffer:function(t,e,i){void 0===t&&(t=!1),void 0===e&&(e=!1),void 0===i&&(i=!0);var n=this.fboStack;n.pop();var s=(s=n[n.length-1])||null;return this.setFramebuffer(s,t,e,i),s},setProgram:function(t){return t!==this.currentProgram&&(this.flush(),this.gl.useProgram(t),this.currentProgram=t,!0)},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(t,e,i,n){var s=this.gl,r=s.NEAREST,o=s.NEAREST,h=s.CLAMP_TO_EDGE;e=t?t.width:e,i=t?t.height:i;var l=c(e,i);return l&&(h=s.REPEAT),n===a.ScaleModes.LINEAR&&this.config.antialias&&(r=l?this.mipmapFilter:s.LINEAR,o=s.LINEAR),t||"number"!=typeof e||"number"!=typeof i?this.createTexture2D(0,r,o,h,h,s.RGBA,t):this.createTexture2D(0,r,o,h,h,s.RGBA,null,e,i)},createTexture2D:function(t,e,i,n,s,r,a,o,h,l,u,d){l=null==l||l,void 0===u&&(u=!1),void 0===d&&(d=!1);var f=this.gl,p=f.createTexture();f.activeTexture(f.TEXTURE0);var g=f.getParameter(f.TEXTURE_BINDING_2D);return f.bindTexture(f.TEXTURE_2D,p),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,e),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,i),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,s),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,n),f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,d),null==a?f.texImage2D(f.TEXTURE_2D,t,r,o,h,0,r,f.UNSIGNED_BYTE,null):(u||(o=a.width,h=a.height),f.texImage2D(f.TEXTURE_2D,t,r,r,f.UNSIGNED_BYTE,a)),c(o,h)&&f.generateMipmap(f.TEXTURE_2D),g&&f.bindTexture(f.TEXTURE_2D,g),p.isAlphaPremultiplied=l,p.isRenderTexture=!1,p.width=o,p.height=h,p.glIndex=0,p.glIndexCounter=-1,p},createFramebuffer:function(t,e,i,n){var s,r,a=this.gl,o=a.createFramebuffer();if(this.setFramebuffer(o),n&&(r=a.createRenderbuffer(),a.bindRenderbuffer(a.RENDERBUFFER,r),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,t,e),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,r)),i.isRenderTexture=!0,i.isAlphaPremultiplied=!1,a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,i,0),(s=a.checkFramebufferStatus(a.FRAMEBUFFER))===a.FRAMEBUFFER_COMPLETE)return o.renderTexture=i,this.setFramebuffer(null),this.resetTextures(),o;throw new Error("Framebuffer status: "+{36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"}[s])},createProgram:function(t,e){var i=this.gl,n=i.createProgram(),s=i.createShader(i.VERTEX_SHADER),r=i.createShader(i.FRAGMENT_SHADER);if(i.shaderSource(s,t),i.shaderSource(r,e),i.compileShader(s),i.compileShader(r),!i.getShaderParameter(s,i.COMPILE_STATUS))throw new Error("Vertex Shader failed:\n"+i.getShaderInfoLog(s));if(!i.getShaderParameter(r,i.COMPILE_STATUS))throw new Error("Fragment Shader failed:\n"+i.getShaderInfoLog(r));if(i.attachShader(n,s),i.attachShader(n,r),i.linkProgram(n),!i.getProgramParameter(n,i.LINK_STATUS))throw new Error("Link Program failed:\n"+i.getProgramInfoLog(n));return i.useProgram(n),n},createVertexBuffer:function(t,e){var i=this.gl,n=i.createBuffer();return i.bindBuffer(i.ARRAY_BUFFER,n),i.bufferData(i.ARRAY_BUFFER,t,e),i.bindBuffer(i.ARRAY_BUFFER,null),n},createIndexBuffer:function(t,e){var i=this.gl,n=i.createBuffer();return i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,n),i.bufferData(i.ELEMENT_ARRAY_BUFFER,t,e),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null),n},deleteTexture:function(t,e){return e&&this.resetTextures(!0),t&&this.gl.deleteTexture(t),this},deleteFramebuffer:function(t){return t&&(this.gl.deleteFramebuffer(t),n(this.fboStack,t),this.currentFramebuffer===t&&(this.currentFramebuffer=null)),this},deleteProgram:function(t){return t&&this.gl.deleteProgram(t),this},deleteBuffer:function(t){return this.gl.deleteBuffer(t),this},preRenderCamera:function(t){var e=t.x,i=t.y,n=t.width,r=t.height,a=t.backgroundColor;t.emit(s.PRE_RENDER,t),this.pipelines.preBatchCamera(t),this.pushScissor(e,i,n,r),t.mask&&(this.currentCameraMask.mask=t.mask,this.currentCameraMask.camera=t._maskCamera,t.mask.preRenderWebGL(this,t,t._maskCamera)),0<a.alphaGL&&this.pipelines.setMulti().drawFillRect(e,i,n,r,v.getTintFromFloats(a.blueGL,a.greenGL,a.redGL,1),a.alphaGL)},getCurrentStencilMask:function(){var t=null,e=this.maskStack,i=this.currentCameraMask;return 0<e.length?t=e[e.length-1]:i.mask&&i.mask.isStencil&&(t=i),t},postRenderCamera:function(t){var e,i=t.flashEffect,n=t.fadeEffect;(i.isRunning||n.isRunning||n.isComplete)&&(e=this.pipelines.setMulti(),i.postRenderWebGL(e,v.getTintFromFloats),n.postRenderWebGL(e,v.getTintFromFloats)),t.dirty=!1,this.popScissor(),t.mask&&(this.currentCameraMask.mask=null,t.mask.postRenderWebGL(this,t._maskCamera)),this.pipelines.postBatchCamera(t),t.emit(s.POST_RENDER,t)},preRender:function(){var t,e;this.contextLost||((t=this.gl).bindFramebuffer(t.FRAMEBUFFER,null),this.config.clearBeforeRender&&(e=this.config.backgroundColor,t.clearColor(e.redGL,e.greenGL,e.blueGL,e.alphaGL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT)),t.enable(t.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&t.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(h.PRE_RENDER))},render:function(t,e,i){if(!this.contextLost){var n=e.length;if(this.emit(h.RENDER,t,i),this.preRenderCamera(i),0===n)return this.setBlendMode(a.BlendModes.NORMAL),void this.postRenderCamera(i);this.currentType="";for(var s=this.currentMask,r=0;r<n;r++){this.finalType=r===n-1;var o=e[r],l=o.mask;(s=this.currentMask).mask&&s.mask!==l&&s.mask.postRenderWebGL(this,s.camera),l&&s.mask!==l&&l.preRenderWebGL(this,o,i),o.blendMode!==this.currentBlendMode&&this.setBlendMode(o.blendMode);var c=o.type;c!==this.currentType&&(this.newType=!0,this.currentType=c),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=e[r+1].type===this.currentType,o.renderWebGL(this,o,i),this.newType=!1}(s=this.currentMask).mask&&s.mask.postRenderWebGL(this,s.camera),this.setBlendMode(a.BlendModes.NORMAL),this.postRenderCamera(i)}},postRender:function(){var t;this.contextLost||(this.flush(),this.emit(h.POST_RENDER),(t=this.snapshotState).callback&&(y(this.canvas,t),t.callback=null),0<this.textureFlush&&(this.startActiveTexture++,this.currentActiveTexture=1))},snapshot:function(t,e,i){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,t,e,i)},snapshotArea:function(t,e,i,n,s,r,a){var o=this.snapshotState;return o.callback=s,o.type=r,o.encoder=a,o.getPixel=!1,o.x=t,o.y=e,o.width=Math.min(i,this.gl.drawingBufferWidth),o.height=Math.min(n,this.gl.drawingBufferHeight),this},snapshotPixel:function(t,e,i){return this.snapshotArea(t,e,1,1,i),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(t,e,i,n,s,r,a,o,h,l,c){void 0===s&&(s=!1),void 0===r&&(r=0),void 0===a&&(a=0),void 0===o&&(o=e),void 0===h&&(h=i);var u=this.currentFramebuffer;this.snapshotArea(r,a,o,h,n,l,c);var d=this.snapshotState;return d.getPixel=s,d.isFramebuffer=!0,d.bufferWidth=e,d.bufferHeight=i,this.setFramebuffer(t),y(this.canvas,d),this.setFramebuffer(u),d.callback=null,d.isFramebuffer=!1,this},canvasToTexture:function(t,e,i,n){return void 0===i&&(i=!1),void 0===n&&(n=!1),e?this.updateCanvasTexture(t,e,n):this.createCanvasTexture(t,i,n)},createCanvasTexture:function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var n=this.gl,s=n.NEAREST,r=n.NEAREST,a=t.width,o=t.height,h=n.CLAMP_TO_EDGE,l=c(a,o);return!e&&l&&(h=n.REPEAT),this.config.antialias&&(s=l?this.mipmapFilter:n.LINEAR,r=n.LINEAR),this.createTexture2D(0,s,r,h,h,n.RGBA,t,a,o,!0,!1,i)},updateCanvasTexture:function(t,e,i){void 0===i&&(i=!1);var n,s=this.gl,r=t.width,a=t.height;return 0<r&&0<a&&(s.activeTexture(s.TEXTURE0),n=s.getParameter(s.TEXTURE_BINDING_2D),s.bindTexture(s.TEXTURE_2D,e),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,i),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,t),e.width=r,e.height=a,n&&s.bindTexture(s.TEXTURE_2D,n)),e},createVideoTexture:function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var n=this.gl,s=n.NEAREST,r=n.NEAREST,a=t.videoWidth,o=t.videoHeight,h=n.CLAMP_TO_EDGE,l=c(a,o);return!e&&l&&(h=n.REPEAT),this.config.antialias&&(s=l?this.mipmapFilter:n.LINEAR,r=n.LINEAR),this.createTexture2D(0,s,r,h,h,n.RGBA,t,a,o,!0,!0,i)},updateVideoTexture:function(t,e,i){void 0===i&&(i=!1);var n,s=this.gl,r=t.videoWidth,a=t.videoHeight;return 0<r&&0<a&&(s.activeTexture(s.TEXTURE0),n=s.getParameter(s.TEXTURE_BINDING_2D),s.bindTexture(s.TEXTURE_2D,e),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,i),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,t),e.width=r,e.height=a,n&&s.bindTexture(s.TEXTURE_2D,n)),e},setTextureFilter:function(t,e){var i=this.gl,n=[i.LINEAR,i.NEAREST][e];i.activeTexture(i.TEXTURE0);var s=i.getParameter(i.TEXTURE_BINDING_2D);return i.bindTexture(i.TEXTURE_2D,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,n),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,n),s&&i.bindTexture(i.TEXTURE_2D,s),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var t=this.gl,e=this.tempTextures,i=0;i<e.length;i++)t.deleteTexture(e[i]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});t.exports=_},function(t,e,i){var n=i(0),s=i(92),r=i(102),a=i(373),o=i(376),h=i(377),l=i(108),c=i(378),u=i(379),d=i(380),f=i(381),p=new n({initialize:function(t){this.game=t.game,this.renderer=t,this.classes=new r([[s.UTILITY_PIPELINE,f],[s.MULTI_PIPELINE,l],[s.BITMAPMASK_PIPELINE,a],[s.SINGLE_PIPELINE,d],[s.ROPE_PIPELINE,u],[s.LIGHT_PIPELINE,h],[s.POINTLIGHT_PIPELINE,c],[s.GRAPHICS_PIPELINE,o]]),this.postPipelineClasses=new r,this.pipelines=new r,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(t){var e,i=this,n=this.game;if(this.classes.each((function(t,e){r=i.add(t,new e({game:n})),t===s.UTILITY_PIPELINE&&(i.UTILITY_PIPELINE=r,i.fullFrame1=r.fullFrame1,i.fullFrame2=r.fullFrame2,i.halfFrame1=r.halfFrame1,i.halfFrame2=r.halfFrame2)})),this.MULTI_PIPELINE=this.get(s.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(s.BITMAPMASK_PIPELINE),t)for(e in t){var r,a=t[e];(r=new a(n)).isPostFX?this.postPipelineClasses.set(e,a):this.has(e)||(this.classes.set(e,a),this.add(e,r))}},add:function(t,e){if(!e.isPostFX){var i=this.pipelines,n=this.renderer;return i.has(t)?console.warn("Pipeline exists: "+t):(e.name=t,e.manager=this,i.set(t,e)),e.hasBooted||e.boot(),0!==n.width&&0!==n.height&&e.resize(n.width,n.height),e}console.warn(t+" is a Post Pipeline. Use `addPostPipeline` instead")},addPostPipeline:function(t,e){this.postPipelineClasses.has(t)||this.postPipelineClasses.set(t,e)},flush:function(){this.current&&this.current.flush()},has:function(t){var e=this.pipelines;return"string"==typeof t?e.has(t):!!e.contains(t)},get:function(t){var e=this.pipelines;return"string"==typeof t?e.get(t):e.contains(t)?t:void 0},getPostPipeline:function(t,e){var i,n=this.postPipelineClasses;if("string"==typeof t?i=n.get(t):"function"==typeof t?n.contains(t)&&(i=t):"object"==typeof t&&(i=n.get(t.name)),i){var s=new i(this.game);return e&&(s.gameObject=e),s}},remove:function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),this.pipelines.delete(t),e&&this.classes.delete(t),i&&this.postPipelineClasses.delete(t)},set:function(t,e,i){if(!t.isPostFX)return this.isCurrent(t,i)||(this.flush(),this.current&&this.current.unbind(),(this.current=t).bind(i)),t.updateProjectionMatrix(),t.onBind(e),t},preBatch:function(t){if(t.hasPostPipeline){this.flush();for(var e=t.postPipelines,i=e.length-1;0<=i;i--){var n=e[i];n.active&&n.preBatch(t)}}},postBatch:function(t){if(t.hasPostPipeline){this.flush();for(var e=t.postPipelines,i=0;i<e.length;i++){var n=e[i];n.active&&n.postBatch(t)}}},preBatchCamera:function(t){if(t.hasPostPipeline){this.flush();for(var e=t.postPipelines,i=e.length-1;0<=i;i--){var n=e[i];n.active&&n.preBatch(t)}}},postBatchCamera:function(t){if(t.hasPostPipeline){this.flush();for(var e=t.postPipelines,i=0;i<e.length;i++){var n=e[i];n.active&&n.postBatch(t)}}},isCurrent:function(t,e){var i=this.renderer,n=this.current;return n&&!e&&(e=n.currentShader),!(n!==t||e.program!==i.currentProgram)},copyFrame:function(t,e,i,n,s){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(t,e,i,n,s),this},copyToGame:function(t){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(t),this},drawFrame:function(t,e,i,n){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(t,e,i,n),this},blendFrames:function(t,e,i,n,s){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(t,e,i,n,s),this},blendFramesAdditive:function(t,e,i,n,s){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(t,e,i,n,s),this},clearFrame:function(t,e){return this.UTILITY_PIPELINE.clearFrame(t,e),this},blitFrame:function(t,e,i,n,s,r){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(t,e,i,n,s,r),this},copyFrameRect:function(t,e,i,n,s,r,a,o){return this.UTILITY_PIPELINE.copyFrameRect(t,e,i,n,s,r,a,o),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(t){return this.UTILITY_PIPELINE.bind(t)},rebind:function(t){void 0===t&&this.previous&&(t=this.previous);var e=this.renderer,i=e.gl;i.disable(i.DEPTH_TEST),i.disable(i.CULL_FACE),e.hasActiveStencilMask()?i.clear(i.DEPTH_BUFFER_BIT):(i.disable(i.STENCIL_TEST),i.clear(i.DEPTH_BUFFER_BIT|i.STENCIL_BUFFER_BIT)),i.viewport(0,0,e.width,e.height),e.currentProgram=null,e.setBlendMode(0,!0);var n=this.pipelines.entries;for(var s in n)n[s].glReset=!0;t&&(this.current=t).rebind(),e.resetTextures()},clear:function(){var t=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,t.currentProgram=null,t.setBlendMode(0,!0)},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});t.exports=p},function(t,e,i){var n=i(0),s=i(2),r=i(866),a=i(867),o=i(107),h=i(58),l=new n({Extends:h,initialize:function(t){t.fragShader=s(t,"fragShader",r),t.vertShader=s(t,"vertShader",a),t.batchSize=s(t,"batchSize",1),t.vertices=s(t,"vertices",[-1,1,-1,-7,7,1]),t.attributes=s(t,"attributes",[{name:"inPosition",size:2,type:o.FLOAT}]),h.call(this,t)},boot:function(){h.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(t,e){h.prototype.resize.call(this,t,e),this.set2f("uResolution",t,e)},beginMask:function(t,e,i){var n,s=this.gl;t.bitmapMask&&s&&((n=this.renderer).flush(),n.pushFramebuffer(t.mainFramebuffer),s.disable(s.STENCIL_TEST),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT),n.currentCameraMask.mask!==t&&(n.currentMask.mask=t,n.currentMask.camera=i))},endMask:function(t,e){var i,n=this.gl,s=this.renderer,r=t.bitmapMask;r&&n&&(s.flush(),s.pushFramebuffer(t.maskFramebuffer),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),s.setBlendMode(0,!0),r.renderWebGL(s,r,e),s.flush(),s.popFramebuffer(),s.popFramebuffer(),(i=s.getCurrentStencilMask())?(n.enable(n.STENCIL_TEST),i.mask.applyStencil(s,i.camera,!0)):s.currentMask.mask=null,s.pipelines.set(this),n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,t.maskTexture),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,t.mainTexture),this.set1i("uInvertMaskAlpha",t.invertAlpha),n.drawArrays(this.topology,0,3),s.resetTextures())}});t.exports=l},function(t,e,i){t.exports={AFTER_FLUSH:i(868),BEFORE_FLUSH:i(869),BIND:i(870),BOOT:i(871),DESTROY:i(872),REBIND:i(873),RESIZE:i(874)}},function(t,e,i){var n=i(0),s=i(2),r=i(107),a=new n({initialize:function(t,e,i,n,s){this.pipeline=t,this.name=e,this.renderer=t.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(i,n),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(s),this.createUniforms()},createAttributes:function(t){for(var e=0,i=0,n=[],a=this.vertexComponentCount=0;a<t.length;a++){var o=t[a],h=o.name,l=s(o,"size",1),c=s(o,"type",r.FLOAT),u=c.enum,d=c.size,f=!!o.normalized;n.push({name:h,size:l,type:u,normalized:f,offset:i,enabled:!1,location:-1}),4===d?e+=l:e++,i+=l*d}this.vertexSize=i,this.vertexComponentCount=e,this.attributes=n},bind:function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),e&&this.pipeline.flush(),this.renderer.setProgram(this.program),t&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(t){void 0===t&&(t=!1);for(var e=this.gl,i=this.vertexSize,n=this.attributes,s=this.program,r=0;r<n.length;r++){var a,o=n[r],h=o.size,l=o.type,c=o.offset,u=o.enabled,d=o.location,f=!!o.normalized;t?0<=(a=e.getAttribLocation(s,o.name))?(e.enableVertexAttribArray(a),e.vertexAttribPointer(a,h,l,f,i,c),o.enabled=!0,o.location=a):-1!==a&&e.disableVertexAttribArray(a):u?e.vertexAttribPointer(d,h,l,f,i,c):!u&&-1<d&&(e.disableVertexAttribArray(d),o.location=-1)}return this},createUniforms:function(){for(var t,e,i=this.gl,n=this.program,s=this.uniforms,r=i.getProgramParameter(n,i.ACTIVE_UNIFORMS),a=0;a<r;a++){var o,h=i.getActiveUniform(n,a);h&&(t=h.name,null!==(e=i.getUniformLocation(n,t))&&(s[t]={name:t,location:e,value1:null,value2:null,value3:null,value4:null}),0<(o=t.indexOf("["))&&(t=t.substr(0,o),s.hasOwnProperty(t)||null!==(e=i.getUniformLocation(n,t))&&(s[t]={name:t,location:e,value1:null,value2:null,value3:null,value4:null})))}return this},hasUniform:function(t){return this.uniforms.hasOwnProperty(t)},resetUniform:function(t){var e=this.uniforms[t];return e&&(e.value1=null,e.value2=null,e.value3=null,e.value4=null),this},setUniform1:function(t,e,i,n){var s=this.uniforms[e];return s&&(!n&&s.value1===i||(s.value1=i,this.renderer.setProgram(this.program),t.call(this.gl,s.location,i),this.pipeline.currentShader=this)),this},setUniform2:function(t,e,i,n,s){var r=this.uniforms[e];return r&&(!s&&r.value1===i&&r.value2===n||(r.value1=i,r.value2=n,this.renderer.setProgram(this.program),t.call(this.gl,r.location,i,n),this.pipeline.currentShader=this)),this},setUniform3:function(t,e,i,n,s,r){var a=this.uniforms[e];return a&&(!r&&a.value1===i&&a.value2===n&&a.value3===s||(a.value1=i,a.value2=n,a.value3=s,this.renderer.setProgram(this.program),t.call(this.gl,a.location,i,n,s),this.pipeline.currentShader=this)),this},setUniform4:function(t,e,i,n,s,r,a){var o=this.uniforms[e];return o&&(!a&&o.value1===i&&o.value2===n&&o.value3===s&&o.value4===r||(o.value1=i,o.value2=n,o.value3=s,o.value4=r,this.renderer.setProgram(this.program),t.call(this.gl,o.location,i,n,s,r),this.pipeline.currentShader=this)),this},set1f:function(t,e){return this.setUniform1(this.gl.uniform1f,t,e)},set2f:function(t,e,i){return this.setUniform2(this.gl.uniform2f,t,e,i)},set3f:function(t,e,i,n){return this.setUniform3(this.gl.uniform3f,t,e,i,n)},set4f:function(t,e,i,n,s){return this.setUniform4(this.gl.uniform4f,t,e,i,n,s)},set1fv:function(t,e){return this.setUniform1(this.gl.uniform1fv,t,e,!0)},set2fv:function(t,e){return this.setUniform1(this.gl.uniform2fv,t,e,!0)},set3fv:function(t,e){return this.setUniform1(this.gl.uniform3fv,t,e,!0)},set4fv:function(t,e){return this.setUniform1(this.gl.uniform4fv,t,e,!0)},set1iv:function(t,e){return this.setUniform1(this.gl.uniform1iv,t,e,!0)},set2iv:function(t,e){return this.setUniform1(this.gl.uniform2iv,t,e,!0)},set3iv:function(t,e){return this.setUniform1(this.gl.uniform3iv,t,e,!0)},set4iv:function(t,e){return this.setUniform1(this.gl.uniform4iv,t,e,!0)},set1i:function(t,e){return this.setUniform1(this.gl.uniform1i,t,e)},set2i:function(t,e,i){return this.setUniform2(this.gl.uniform2i,t,e,i)},set3i:function(t,e,i,n){return this.setUniform3(this.gl.uniform3i,t,e,i,n)},set4i:function(t,e,i,n,s){return this.setUniform4(this.gl.uniform4i,t,e,i,n,s)},setMatrix2fv:function(t,e,i){return this.setUniform2(this.gl.uniformMatrix2fv,t,e,i,!0)},setMatrix3fv:function(t,e,i){return this.setUniform2(this.gl.uniformMatrix3fv,t,e,i,!0)},setMatrix4fv:function(t,e,i){return this.setUniform2(this.gl.uniformMatrix4fv,t,e,i,!0)},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});t.exports=a},function(t,e,i){var n=i(0),s=i(59),r=i(2),a=i(875),o=i(876),h=i(25),l=i(107),c=i(58),u=new n({Extends:c,initialize:function(t){t.fragShader=r(t,"fragShader",a),t.vertShader=r(t,"vertShader",o),t.attributes=r(t,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:l.UNSIGNED_BYTE,normalized:!0}]),c.call(this,t),this.calcMatrix=new h,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function(t,e,i,n,s,r){this.renderer.pipelines.set(this);var a=this.calcMatrix;r&&r.multiply(s,a);var o=t+i,h=e+n,l=a.getX(t,e),c=a.getY(t,e),u=a.getX(t,h),d=a.getY(t,h),f=a.getX(o,h),p=a.getY(o,h),g=a.getX(o,e),m=a.getY(o,e),v=this.fillTint;this.batchQuad(l,c,u,d,f,p,g,m,v.TL,v.TR,v.BL,v.BR)},batchFillTriangle:function(t,e,i,n,s,r,a,o){this.renderer.pipelines.set(this);var h=this.calcMatrix;o&&o.multiply(a,h);var l=h.getX(t,e),c=h.getY(t,e),u=h.getX(i,n),d=h.getY(i,n),f=h.getX(s,r),p=h.getY(s,r),g=this.fillTint;this.batchTri(l,c,u,d,f,p,g.TL,g.TR,g.BL)},batchStrokeTriangle:function(t,e,i,n,s,r,a,o,h){var l=this.tempTriangle;l[0].x=t,l[0].y=e,l[0].width=a,l[1].x=i,l[1].y=n,l[1].width=a,l[2].x=s,l[2].y=r,l[2].width=a,l[3].x=t,l[3].y=e,l[3].width=a,this.batchStrokePath(l,a,!1,o,h)},batchFillPath:function(t,e,i){this.renderer.pipelines.set(this);var n=this.calcMatrix;i&&i.multiply(e,n);for(var r,a,o=t.length,h=this.polygonCache,l=this.fillTint.TL,c=this.fillTint.TR,u=this.fillTint.BL,d=0;d<o;++d)a=t[d],h.push(a.x,a.y);o=(r=s(h)).length;for(var f=0;f<o;f+=3){var p=2*r[f+0],g=2*r[f+1],m=2*r[f+2],v=h[0+p],y=h[1+p],_=h[0+g],x=h[1+g],w=h[0+m],b=h[1+m],E=n.getX(v,y),T=n.getY(v,y),S=n.getX(_,x),A=n.getY(_,x),O=n.getX(w,b),C=n.getY(w,b);this.batchTri(E,T,S,A,O,C,l,c,u)}h.length=0},batchStrokePath:function(t,e,i,n,s){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var r=t.length-1,a=0;a<r;a++){var o=t[a],h=t[a+1];this.batchLine(o.x,o.y,h.x,h.y,o.width/2,h.width/2,e,a,!i&&a===r-1,n,s)}},batchLine:function(t,e,i,n,s,r,a,o,h,l,c){this.renderer.pipelines.set(this);var u=this.calcMatrix;c&&c.multiply(l,u);var d,f,p=i-t,g=n-e,m=Math.sqrt(p*p+g*g),v=s*(n-e)/m,y=s*(t-i)/m,_=r*(n-e)/m,x=r*(t-i)/m,w=i-_,b=n-x,E=t-v,T=e-y,S=i+_,A=n+x,O=t+v,C=e+y,P=u.getX(w,b),L=u.getY(w,b),R=u.getX(E,T),I=u.getY(E,T),M=u.getX(S,A),D=u.getY(S,A),k=u.getX(O,C),N=u.getY(O,C),F=this.strokeTint,G=F.TL,B=F.TR,z=F.BL,U=F.BR;this.batchQuad(k,N,R,I,P,L,M,D,G,B,z,U),a<=2||(d=this.prevQuad,f=this.firstQuad,0<o&&d[4]?this.batchQuad(k,N,R,I,d[0],d[1],d[2],d[3],G,B,z,U):(f[0]=k,f[1]=N,f[2]=R,f[3]=I,f[4]=1),h&&f[4]?this.batchQuad(P,L,M,D,f[0],f[1],f[2],f[3],G,B,z,U):(d[0]=P,d[1]=L,d[2]=M,d[3]=D,d[4]=1))},batchVert:function(t,e,i){var n=this.vertexViewF32,s=this.vertexViewU32,r=this.vertexCount*this.currentShader.vertexComponentCount-1;n[++r]=t,n[++r]=e,s[++r]=i,this.vertexCount++},batchQuad:function(t,e,i,n,s,r,a,o,h,l,c,u){var d=!1;return this.shouldFlush(6)&&(this.flush(),d=!0),this.batchVert(t,e,h),this.batchVert(i,n,c),this.batchVert(s,r,u),this.batchVert(t,e,h),this.batchVert(s,r,u),this.batchVert(a,o,l),d},batchTri:function(t,e,i,n,s,r,a,o,h){var l=!1;return this.shouldFlush(3)&&(this.flush(),l=!0),this.batchVert(t,e,a),this.batchVert(i,n,o),this.batchVert(s,r,h),l},destroy:function(){return c.prototype.destroy.call(this),this.polygonCache=null,this}});t.exports=u},function(t,e,i){var n=i(0),s=i(2),r=i(877),a=i(108),o=i(3),h=i(58),l=10,c=new o,u=new n({Extends:a,initialize:function(t){l=t.game.renderer.config.maxLights;for(var e=s(t,"fragShader",r),i=[],n=1;n<=l;n++)i.push({name:"lights"+n,fragShader:e.replace("%LIGHT_COUNT%",n.toString())});t.shaders=i,a.call(this,t),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function(){h.prototype.boot.call(this);var t=this.gl,e=t.createTexture();t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:e};for(var i=0;i<this.shaders.length;i++)this["lightShader"+(i+1)]=this.shaders[i]},onRender:function(t,e){var i=t.sys.lights;if(this.lightsActive=!1,i&&i.active){var n,s=i.getLights(e),r=s.length;if(0!==r){this.lightsActive=!0,this.setShader(this["lightShader"+r],!0);var a=this.renderer.height,o=e.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",e.x,e.y,e.rotation,e.zoom),this.set3f("uAmbientLightColor",i.ambientColor.r,i.ambientColor.g,i.ambientColor.b),n=0;n<r;n++){var h=s[n].light,l=h.color,u="uLights["+n+"].";o.transformPoint(h.x,h.y,c),this.set2f(u+"position",c.x-e.scrollX*h.scrollFactorX*e.zoom,a-(c.y-e.scrollY*h.scrollFactorY*e.zoom)),this.set3f(u+"color",l.r,l.g,l.b),this.set1f(u+"intensity",h.intensity),this.set1f(u+"radius",h.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(t){var e,i,n,s;t===this.currentNormalMapRotation&&0!==this.vertexCount||(0<this.vertexCount&&this.flush(),e=this.inverseRotationMatrix,t?(i=-t,n=Math.cos(i),s=Math.sin(i),e[1]=s,e[3]=-s,e[0]=e[4]=n):(e[0]=e[4]=1,e[1]=e[3]=0),this.setMatrix3fv("uInverseRotationMatrix",!1,e),this.currentNormalMapRotation=t)},setTexture2D:function(t,e){var i=this.renderer;void 0===t&&(t=i.tempTextures[0]);var n=this.getNormalMap(e);i.isNewNormalMap(t,n)&&(this.flush(),i.setTextureZero(t),i.setNormalMap(n));var s=e?e.rotation:0;return this.setNormalMapRotation(s),this.currentUnit=0},setGameObject:function(t,e){void 0===e&&(e=t.frame);var i=this.renderer,n=e.glTexture,s=this.getNormalMap(t);return i.isNewNormalMap()&&(this.flush(),i.setTextureZero(n),i.setNormalMap(s)),this.setNormalMapRotation(t.rotation),this.currentUnit=0},getNormalMap:function(t){var e;return t?t.displayTexture?e=t.displayTexture.dataSource[t.displayFrame.sourceIndex]:t.texture?e=t.texture.dataSource[t.frame.sourceIndex]:t.tileset&&(e=Array.isArray(t.tileset)?t.tileset[0].image.dataSource[0]:t.tileset.image.dataSource[0]):e=this.defaultNormalMap,(e=e||this.defaultNormalMap).glTexture},batchSprite:function(t,e,i){this.lightsActive&&a.prototype.batchSprite.call(this,t,e,i)},batchTexture:function(t,e,i,n,s,r,o,h,l,c,u,d,f,p,g,m,v,y,_,x,w,b,E,T,S,A,O,C,P,L,R,I){this.lightsActive&&a.prototype.batchTexture.call(this,t,e,i,n,s,r,o,h,l,c,u,d,f,p,g,m,v,y,_,x,w,b,E,T,S,A,O,C,P,L,R,I)},batchTextureFrame:function(t,e,i,n,s,r,o){this.lightsActive&&a.prototype.batchTextureFrame.call(this,t,e,i,n,s,r,o)}});u.LIGHT_COUNT=l,t.exports=u},function(t,e,i){var n=i(0),s=i(2),r=i(880),a=i(881),o=i(58),h=new n({Extends:o,initialize:function(t){t.vertShader=s(t,"vertShader",a),t.fragShader=s(t,"fragShader",r),t.attributes=s(t,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),o.call(this,t)},onRender:function(t,e){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",e.zoom)},batchPointLight:function(t,e,i,n,s,r,a,o,h,l,c,u){var d=t.color,f=t.intensity,p=t.radius,g=t.attenuation,m=d.r*f,v=d.g*f,y=d.b*f,_=e.alpha*t.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(i,n,c,u,p,g,m,v,y,_),this.batchLightVert(s,r,c,u,p,g,m,v,y,_),this.batchLightVert(a,o,c,u,p,g,m,v,y,_),this.batchLightVert(i,n,c,u,p,g,m,v,y,_),this.batchLightVert(a,o,c,u,p,g,m,v,y,_),this.batchLightVert(h,l,c,u,p,g,m,v,y,_)},batchLightVert:function(t,e,i,n,s,r,a,o,h,l){var c=this.vertexViewF32,u=this.vertexCount*this.currentShader.vertexComponentCount-1;c[++u]=t,c[++u]=e,c[++u]=i,c[++u]=n,c[++u]=s,c[++u]=r,c[++u]=a,c[++u]=o,c[++u]=h,c[++u]=l,this.vertexCount++}});t.exports=h},function(t,e,i){var n=i(0),s=i(2),r=i(108),a=new n({Extends:r,initialize:function(t){t.topology=5,t.batchSize=s(t,"batchSize",256),r.call(this,t)}});t.exports=a},function(t,e,i){var n=i(0),s=i(2),r=i(108),a=i(882),o=i(883),h=i(58),l=new n({Extends:r,initialize:function(t){t.fragShader=s(t,"fragShader",a),t.vertShader=s(t,"vertShader",o),t.forceZero=!0,r.call(this,t)},boot:function(){h.prototype.boot.call(this),this.set1i("uMainSampler",0)}});t.exports=l},function(t,e,i){var n=i(884),s=i(35),r=i(0),a=i(198),o=i(885),h=i(886),l=i(2),c=i(887),u=i(382),d=i(58),f=new r({Extends:d,initialize:function(t){t.renderTarget=l(t,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),t.vertShader=l(t,"vertShader",u),t.shaders=l(t,"shaders",[{name:"Copy",fragShader:h},{name:"AddBlend",fragShader:n},{name:"LinearBlend",fragShader:c},{name:"ColorMatrix",fragShader:o}]),t.attributes=l(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),t.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],t.batchSize=1,d.call(this,t),this.colorMatrix=new a,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){d.prototype.boot.call(this);var t=this.shaders,e=this.renderTargets;this.copyShader=t[0],this.addShader=t[1],this.linearShader=t[2],this.colorMatrixShader=t[3],this.fullFrame1=e[0],this.fullFrame2=e[1],this.halfFrame1=e[2],this.halfFrame2=e[3]},copyFrame:function(t,e,i,n,s){void 0===i&&(i=1),void 0===n&&(n=!0),void 0===s&&(s=!0);var r=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",i),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,t.texture),e?(r.viewport(0,0,e.width,e.height),r.bindFramebuffer(r.FRAMEBUFFER,e.framebuffer),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e.texture,0)):r.viewport(0,0,t.width,t.height),n&&(s?r.clearColor(0,0,0,0):r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT)),r.bufferData(r.ARRAY_BUFFER,this.vertexData,r.STATIC_DRAW),r.drawArrays(r.TRIANGLES,0,6),r.bindFramebuffer(r.FRAMEBUFFER,null),r.bindTexture(r.TEXTURE_2D,null)},blitFrame:function(t,e,i,n,r,a){void 0===i&&(i=1),void 0===n&&(n=!0),void 0===r&&(r=!0),void 0===a&&(a=!1);var o,h,l=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",i),l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,t.texture),t.height>e.height?(l.viewport(0,0,t.width,t.height),this.setTargetUVs(t,e)):(o=e.height-t.height,l.viewport(0,o,t.width,t.height)),l.bindFramebuffer(l.FRAMEBUFFER,e.framebuffer),l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,e.texture,0),n&&(r?l.clearColor(0,0,0,0):l.clearColor(0,0,0,1),l.clear(l.COLOR_BUFFER_BIT)),a&&(h=this.renderer.currentBlendMode,this.renderer.setBlendMode(s.ERASE)),l.bufferData(l.ARRAY_BUFFER,this.vertexData,l.STATIC_DRAW),l.drawArrays(l.TRIANGLES,0,6),a&&this.renderer.setBlendMode(h),l.bindFramebuffer(l.FRAMEBUFFER,null),l.bindTexture(l.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(t,e,i,n,s,r,a,o){void 0===a&&(a=!0),void 0===o&&(o=!0);var h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,t.framebuffer),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,t.texture,0),a&&(o?h.clearColor(0,0,0,0):h.clearColor(0,0,0,1),h.clear(h.COLOR_BUFFER_BIT)),h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,e.texture),h.copyTexSubImage2D(h.TEXTURE_2D,0,0,0,i,n,s,r),h.bindFramebuffer(h.FRAMEBUFFER,null),h.bindTexture(h.TEXTURE_2D,null)},copyToGame:function(t){var e=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t.texture),e.bufferData(e.ARRAY_BUFFER,this.vertexData,e.STATIC_DRAW),e.drawArrays(e.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function(t,e,i,n){void 0===i&&(i=!0),void 0===n&&(n=this.colorMatrix);var s=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",n.getData()),this.set1f("uAlpha",n.alpha),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,t.texture),e?(s.viewport(0,0,e.width,e.height),s.bindFramebuffer(s.FRAMEBUFFER,e.framebuffer),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,e.texture,0)):s.viewport(0,0,t.width,t.height),i?s.clearColor(0,0,0,0):s.clearColor(0,0,0,1),s.clear(s.COLOR_BUFFER_BIT),s.bufferData(s.ARRAY_BUFFER,this.vertexData,s.STATIC_DRAW),s.drawArrays(s.TRIANGLES,0,6),s.bindFramebuffer(s.FRAMEBUFFER,null),s.bindTexture(s.TEXTURE_2D,null)},blendFrames:function(t,e,i,n,s,r){void 0===n&&(n=1),void 0===s&&(s=!0),void 0===r&&(r=this.linearShader);var a=this.gl;this.setShader(r),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",n),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,t.texture),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,e.texture),i?(a.bindFramebuffer(a.FRAMEBUFFER,i.framebuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,i.texture,0),a.viewport(0,0,i.width,i.height)):a.viewport(0,0,t.width,t.height),s?a.clearColor(0,0,0,0):a.clearColor(0,0,0,1),a.clear(a.COLOR_BUFFER_BIT),a.bufferData(a.ARRAY_BUFFER,this.vertexData,a.STATIC_DRAW),a.drawArrays(a.TRIANGLES,0,6),a.bindFramebuffer(a.FRAMEBUFFER,null),a.bindTexture(a.TEXTURE_2D,null)},blendFramesAdditive:function(t,e,i,n,s){this.blendFrames(t,e,i,n,s,this.addShader)},clearFrame:function(t,e){void 0===e&&(e=!0);var i=this.gl;i.viewport(0,0,t.width,t.height),i.bindFramebuffer(i.FRAMEBUFFER,t.framebuffer),e?i.clearColor(0,0,0,0):i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT);var n=this.renderer.currentFramebuffer;i.bindFramebuffer(i.FRAMEBUFFER,n)},setUVs:function(t,e,i,n,s,r,a,o){var h=this.vertexViewF32;h[2]=t,h[3]=e,h[6]=i,h[7]=n,h[10]=s,h[11]=r,h[14]=t,h[15]=e,h[18]=s,h[19]=r,h[22]=a,h[23]=o},setTargetUVs:function(t,e){var i=.5<(i=e.height/t.height)?.5-(i-.5):.5-i+.5;this.setUVs(0,i,0,1+i,1,1+i,1,i)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});t.exports=f},function(t,e){t.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join("\n")},function(t,e,i){var n=i(31),s=i(38),r=i(2);t.exports=function(t,e){var i=t.getContext("experimental-webgl"),a=r(e,"callback"),o=r(e,"type","image/png"),h=r(e,"encoder",.92),l=r(e,"x",0),c=r(e,"y",0),u=r(e,"getPixel",!1),d=r(e,"isFramebuffer",!1),f=d?r(e,"bufferWidth",1):i.drawingBufferWidth,p=d?r(e,"bufferHeight",1):i.drawingBufferHeight;if(u){var g=new Uint8Array(4),m=d?c:p-c;i.readPixels(l,m,1,1,i.RGBA,i.UNSIGNED_BYTE,g),a.call(null,new s(g[0],g[1],g[2],g[3]/255))}else{var v=r(e,"width",f),y=r(e,"height",p),_=new Uint8Array(v*y*4);i.readPixels(l,p-c-y,v,y,i.RGBA,i.UNSIGNED_BYTE,_);for(var x=n.createWebGL(this,v,y),w=x.getContext("2d"),b=w.getImageData(0,0,v,y),E=b.data,T=0;T<y;T++)for(var S=0;S<v;S++){var A=4*((y-T-1)*v+S),O=4*(T*v+S);E[0+O]=_[0+A],E[1+O]=_[1+A],E[2+O]=_[2+A],E[3+O]=_[3+A]}w.putImageData(b,0,0);var C=new Image;C.onerror=function(){a.call(null),n.remove(x)},C.onload=function(){a.call(null,C),n.remove(x)},C.src=x.toDataURL(o,h)}}},function(t,e,i){var n=i(33);t.exports=function(t){var e,i,s,r,a,o,h,l=t.config;l.hideBanner||(e="WebGL",l.renderType===n.CANVAS?e="Canvas":l.renderType===n.HEADLESS&&(e="Headless"),i=l.audio,h=(s=t.device.audio).webAudio&&!i.disableWebAudio?"Web Audio":i.noAudio||!s.webAudio&&!s.audioData?"No Audio":"HTML5 Audio",t.device.browser.ie?window.console&&console.log("Phaser v"+n.VERSION+" / https://phaser.io"):(a=[r=""],Array.isArray(l.bannerBackgroundColor)?(l.bannerBackgroundColor.forEach((function(t){r=r.concat("%c "),a.push("background: "+t),o=t})),a[a.length-1]="color: "+l.bannerTextColor+"; background: "+o):(r=r.concat("%c "),a.push("color: "+l.bannerTextColor+"; background: "+l.bannerBackgroundColor)),a.push("background: transparent"),l.gameTitle&&(r=r.concat(l.gameTitle),l.gameVersion&&(r=r.concat(" v"+l.gameVersion)),l.hidePhaser||(r=r.concat(" / "))),l.hidePhaser||(r=r.concat("Phaser v"+n.VERSION+" ("+e+" | "+h+")")),r=r.concat(" %c "+l.gameURL),a[0]=r,console.log.apply(console,a)))}},function(t,e,i){var n=i(0),s=i(6),r=i(1),a=i(386),o=new n({initialize:function(t,e){this.game=t,this.raf=new a,this.started=!1,this.running=!1,this.minFps=s(e,"min",5),this.targetFps=s(e,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=r,this.forceSetTimeOut=s(e,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=s(e,"deltaHistory",10),this.panicMax=s(e,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=s(e,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var t=window.performance.now();this.time=t,this.lastTime=t,this.nextFpsUpdate=t+1e3;for(var e=this.framesThisSecond=0;e<this.deltaSmoothingMax;e++)this.deltaHistory[e]=Math.min(this._target,this.deltaHistory[e]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(t){if(this.started)return this;this.started=!0,this.running=!0;for(var e=0;e<this.deltaSmoothingMax;e++)this.deltaHistory[e]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=t,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var t=window.performance.now(),e=(this.now=t)-this.lastTime;e<0&&(e=0),this.rawDelta=e;var i=this.deltaIndex,n=this.deltaHistory,s=this.deltaSmoothingMax,r=e,a=e;if(this.smoothStep){(0<this._coolDown||!this.inFocus)&&(this._coolDown--,r=Math.min(r,this._target)),r>this._min&&(r=n[i],r=Math.min(r,this._min)),n[i]=r,this.deltaIndex++,this.deltaIndex>s&&(this.deltaIndex=0);for(var o=a=0;o<s;o++)a+=n[o];a/=s}this.delta=a,this.time+=this.rawDelta,t>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0),this.framesThisSecond++;var h=a/this._target;this.callback(t,a,h),this.lastTime=t,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(t){this.running||(t&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=r,this.raf=null,this.game=null}});t.exports=o},function(t,e,i){var n=i(0),s=i(1),r=new n({initialize:function(){this.isRunning=!1,this.callback=s,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var t=this;this.step=function e(){var i=window.performance.now();t.lastTime=t.tick,t.tick=i,t.callback(i),t.timeOutID=window.requestAnimationFrame(e)},this.stepTimeout=function e(){var i=Date.now(),n=Math.min(Math.max(2*t.target+t.tick-i,0),t.target);t.lastTime=t.tick,t.tick=i,t.callback(i),t.timeOutID=window.setTimeout(e,n)}},start:function(t,e,i){this.isRunning||(this.callback=t,this.isSetTimeOut=e,this.target=i,this.isRunning=!0,this.timeOutID=e?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=s}});t.exports=r},function(t,e,i){var n=i(22);t.exports=function(t){var e,i=t.events;void 0!==document.hidden?e="visibilitychange":["webkit","moz","ms"].forEach((function(t){void 0!==document[t+"Hidden"]&&(document.hidden=function(){return document[t+"Hidden"]},e=t+"visibilitychange")})),e&&document.addEventListener(e,(function(t){document.hidden||"pause"===t.type?i.emit(n.HIDDEN):i.emit(n.VISIBLE)}),!1),window.onblur=function(){i.emit(n.BLUR)},window.onfocus=function(){i.emit(n.FOCUS)},window.focus&&t.config.autoFocus&&window.focus()}},function(t,e,i){var n=i(389),s=i(31),r=i(6);t.exports=function(t){var e=r(t,"data",[]),i=r(t,"canvas",null),a=r(t,"palette",n),o=r(t,"pixelWidth",1),h=r(t,"pixelHeight",o),l=r(t,"resizeCanvas",!0),c=r(t,"clearCanvas",!0),u=r(t,"preRender",null),d=r(t,"postRender",null),f=Math.floor(Math.abs(e[0].length*o)),p=Math.floor(Math.abs(e.length*h));i||(i=s.create2D(this,f,p),c=l=!1),l&&(i.width=f,i.height=p);var g=i.getContext("2d");c&&g.clearRect(0,0,f,p),u&&u(i,g);for(var m=0;m<e.length;m++)for(var v=e[m],y=0;y<v.length;y++){var _=v[y];"."!==_&&" "!==_&&(g.fillStyle=a[_],g.fillRect(y*o,m*h,o,h))}return d&&d(i,g),i}},function(t,e){t.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(t,e,i){var n=i(0),s=i(358),r=i(94),a=i(3),o=new n({Extends:r,initialize:function(t,e,i,n){r.call(this,"CubicBezierCurve"),Array.isArray(t)&&(n=new a(t[6],t[7]),i=new a(t[4],t[5]),e=new a(t[2],t[3]),t=new a(t[0],t[1])),this.p0=t,this.p1=e,this.p2=i,this.p3=n},getStartPoint:function(t){return void 0===t&&(t=new a),t.copy(this.p0)},getResolution:function(t){return t},getPoint:function(t,e){void 0===e&&(e=new a);var i=this.p0,n=this.p1,r=this.p2,o=this.p3;return e.set(s(t,i.x,n.x,r.x,o.x),s(t,i.y,n.y,r.y,o.y))},draw:function(t,e){void 0===e&&(e=32);var i=this.getPoints(e);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var n=1;n<i.length;n++)t.lineTo(i[n].x,i[n].y);return t.strokePath(),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});o.fromJSON=function(t){var e=t.points,i=new a(e[0],e[1]),n=new a(e[2],e[3]),s=new a(e[4],e[5]),r=new a(e[6],e[7]);return new o(i,n,s,r)},t.exports=o},function(t,e,i){var n=i(0),s=i(94),r=i(36),a=i(6),o=i(196),h=i(3),l=new n({Extends:s,initialize:function(t,e,i,n,o,l,c,u){var d;"object"==typeof t?(t=a(d=t,"x",0),e=a(d,"y",0),i=a(d,"xRadius",0),n=a(d,"yRadius",i),o=a(d,"startAngle",0),l=a(d,"endAngle",360),c=a(d,"clockwise",!1),u=a(d,"rotation",0)):(void 0===n&&(n=i),void 0===o&&(o=0),void 0===l&&(l=360),void 0===c&&(c=!1),void 0===u&&(u=0)),s.call(this,"EllipseCurve"),this.p0=new h(t,e),this._xRadius=i,this._yRadius=n,this._startAngle=r(o),this._endAngle=r(l),this._clockwise=c,this._rotation=r(u)},getStartPoint:function(t){return void 0===t&&(t=new h),this.getPoint(0,t)},getResolution:function(t){return 2*t},getPoint:function(t,e){void 0===e&&(e=new h);for(var i=2*Math.PI,n=this._endAngle-this._startAngle,s=Math.abs(n)<Number.EPSILON;n<0;)n+=i;for(;i<n;)n-=i;n<Number.EPSILON&&(n=s?0:i),this._clockwise&&!s&&(n===i?n=-i:n-=i);var r,a,o,l,c=this._startAngle+t*n,u=this.p0.x+this._xRadius*Math.cos(c),d=this.p0.y+this._yRadius*Math.sin(c);return 0!==this._rotation&&(r=Math.cos(this._rotation),a=Math.sin(this._rotation),u=(o=u-this.p0.x)*r-(l=d-this.p0.y)*a+this.p0.x,d=o*a+l*r+this.p0.y),e.set(u,d)},setXRadius:function(t){return this.xRadius=t,this},setYRadius:function(t){return this.yRadius=t,this},setWidth:function(t){return this.xRadius=t/2,this},setHeight:function(t){return this.yRadius=t/2,this},setStartAngle:function(t){return this.startAngle=t,this},setEndAngle:function(t){return this.endAngle=t,this},setClockwise:function(t){return this.clockwise=t,this},setRotation:function(t){return this.rotation=t,this},x:{get:function(){return this.p0.x},set:function(t){this.p0.x=t}},y:{get:function(){return this.p0.y},set:function(t){this.p0.y=t}},xRadius:{get:function(){return this._xRadius},set:function(t){this._xRadius=t}},yRadius:{get:function(){return this._yRadius},set:function(t){this._yRadius=t}},startAngle:{get:function(){return o(this._startAngle)},set:function(t){this._startAngle=r(t)}},endAngle:{get:function(){return o(this._endAngle)},set:function(t){this._endAngle=r(t)}},clockwise:{get:function(){return this._clockwise},set:function(t){this._clockwise=t}},angle:{get:function(){return o(this._rotation)},set:function(t){this._rotation=r(t)}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=t}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:o(this._startAngle),endAngle:o(this._endAngle),clockwise:this._clockwise,rotation:o(this._rotation)}}});l.fromJSON=function(t){return new l(t)},t.exports=l},function(t,e,i){var n=i(0),s=i(94),r=i(199),a=i(10),o=i(3),h=new n({Extends:s,initialize:function(t,e){s.call(this,"LineCurve"),Array.isArray(t)&&(e=new o(t[2],t[3]),t=new o(t[0],t[1])),this.p0=t,this.p1=e,this.arcLengthDivisions=1},getBounds:function(t){return void 0===t&&(t=new a),r([this.p0,this.p1],t)},getStartPoint:function(t){return void 0===t&&(t=new o),t.copy(this.p0)},getResolution:function(t){return void 0===t&&(t=1),t},getPoint:function(t,e){return void 0===e&&(e=new o),1===t?e.copy(this.p1):(e.copy(this.p1).subtract(this.p0).scale(t).add(this.p0),e)},getPointAt:function(t,e){return this.getPoint(t,e)},getTangent:function(t,e){return void 0===e&&(e=new o),e.copy(this.p1).subtract(this.p0).normalize(),e},getUtoTmapping:function(t,e,i){var n,s;return e?(s=(n=this.getLengths(i))[n.length-1],Math.min(e,s)/s):t},draw:function(t){return t.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});h.fromJSON=function(t){var e=t.points,i=new o(e[0],e[1]),n=new o(e[2],e[3]);return new h(i,n)},t.exports=h},function(t,e,i){var n=i(0),s=i(3),r=new n({initialize:function(t,e){this.active=!1,this.p0=new s(t,e)},getPoint:function(t,e){return void 0===e&&(e=new s),e.copy(this.p0)},getPointAt:function(t,e){return this.getPoint(t,e)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});t.exports=r},function(t,e,i){var n=i(0),s=i(94),r=i(359),a=i(3),o=new n({Extends:s,initialize:function(t,e,i){s.call(this,"QuadraticBezier"),Array.isArray(t)&&(i=new a(t[4],t[5]),e=new a(t[2],t[3]),t=new a(t[0],t[1])),this.p0=t,this.p1=e,this.p2=i},getStartPoint:function(t){return void 0===t&&(t=new a),t.copy(this.p0)},getResolution:function(t){return t},getPoint:function(t,e){void 0===e&&(e=new a);var i=this.p0,n=this.p1,s=this.p2;return e.set(r(t,i.x,n.x,s.x),r(t,i.y,n.y,s.y))},draw:function(t,e){void 0===e&&(e=32);var i=this.getPoints(e);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var n=1;n<i.length;n++)t.lineTo(i[n].x,i[n].y);return t.strokePath(),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});o.fromJSON=function(t){var e=t.points,i=new a(e[0],e[1]),n=new a(e[2],e[3]),s=new a(e[4],e[5]);return new o(i,n,s)},t.exports=o},function(t,e,i){var n=i(194),s=i(0),r=i(94),a=i(3),o=new s({Extends:r,initialize:function(t){void 0===t&&(t=[]),r.call(this,"SplineCurve"),this.points=[],this.addPoints(t)},addPoints:function(t){for(var e=0;e<t.length;e++){var i=new a;"number"==typeof t[e]?(i.x=t[e],i.y=t[e+1],e++):Array.isArray(t[e])?(i.x=t[e][0],i.y=t[e][1]):(i.x=t[e].x,i.y=t[e].y),this.points.push(i)}return this},addPoint:function(t,e){var i=new a(t,e);return this.points.push(i),i},getStartPoint:function(t){return void 0===t&&(t=new a),t.copy(this.points[0])},getResolution:function(t){return t*this.points.length},getPoint:function(t,e){void 0===e&&(e=new a);var i=this.points,s=(i.length-1)*t,r=Math.floor(s),o=s-r,h=i[0===r?r:r-1],l=i[r],c=i[r>i.length-2?i.length-1:r+1],u=i[r>i.length-3?i.length-1:r+2];return e.set(n(o,h.x,l.x,c.x,u.x),n(o,h.y,l.y,c.y,u.y))},toJSON:function(){for(var t=[],e=0;e<this.points.length;e++)t.push(this.points[e].x),t.push(this.points[e].y);return{type:this.type,points:t}}});o.fromJSON=function(t){return new o(t.points)},t.exports=o},function(t,e,i){var n=new(i(0))({initialize:function(t,e,i,n){e&&""!==e||(e=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join("\n")),i&&""!==i||(i=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join("\n")),void 0===n&&(n=null),this.key=t,this.fragmentSrc=e,this.vertexSrc=i,this.uniforms=n}});t.exports=n},function(t,e,i){var n=i(38);n.ColorSpectrum=i(909),n.ColorToRGBA=i(910),n.ComponentToHex=i(398),n.GetColor=i(103),n.GetColor32=i(328),n.HexStringToColor=i(327),n.HSLToColor=i(911),n.HSVColorWheel=i(912),n.HSVToRGB=i(188),n.HueToComponent=i(399),n.IntegerToColor=i(189),n.IntegerToRGB=i(330),n.Interpolate=i(913),n.ObjectToColor=i(331),n.RandomRGB=i(914),n.RGBStringToColor=i(332),n.RGBToHSV=i(329),n.RGBToString=i(915),n.ValueToColor=i(187),t.exports=n},function(t,e){t.exports=function(t){var e=t.toString(16);return 1===e.length?"0"+e:e}},function(t,e){t.exports=function(t,e,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}},function(t,e,i){var n=i(105);t.exports=function(t){var e;"complete"!==document.readyState&&"interactive"!==document.readyState?(e=function(){document.removeEventListener("deviceready",e,!0),document.removeEventListener("DOMContentLoaded",e,!0),window.removeEventListener("load",e,!0),t()},document.body?n.cordova?document.addEventListener("deviceready",e,!1):(document.addEventListener("DOMContentLoaded",e,!0),window.addEventListener("load",e,!0)):window.setTimeout(e,20)):t()}},function(t,e){t.exports=function(t){if(!t)return window.innerHeight;var e=Math.abs(window.orientation),i={w:0,h:0},n=document.createElement("div");return n.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(n),i.w=90===e?n.offsetHeight:window.innerWidth,i.h=90===e?window.innerWidth:n.offsetHeight,document.documentElement.removeChild(n),n=null,90!==Math.abs(window.orientation)?i.h:i.w}},function(t,e,i){var n=i(201);t.exports=function(t,e){var i=window.screen,s=!!i&&(i.orientation||i.mozOrientation||i.msOrientation);return s&&"string"==typeof s.type?s.type:"string"==typeof s?s:"number"==typeof window.orientation?0===window.orientation||180===window.orientation?n.ORIENTATION.PORTRAIT:n.ORIENTATION.LANDSCAPE:window.matchMedia?window.matchMedia("(orientation: portrait)").matches?n.ORIENTATION.PORTRAIT:window.matchMedia("(orientation: landscape)").matches?n.ORIENTATION.LANDSCAPE:void 0:t<e?n.ORIENTATION.PORTRAIT:n.ORIENTATION.LANDSCAPE}},function(t,e){t.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(t,e){t.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(t,e){t.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(t,e){t.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(t,e){t.exports=function(t){var e;return""!==t&&("string"==typeof t?e=document.getElementById(t):t&&1===t.nodeType&&(e=t)),e||document.body}},function(t,e){t.exports=function(t){var e="";try{window.DOMParser?e=(new DOMParser).parseFromString(t,"text/xml"):(e=new ActiveXObject("Microsoft.XMLDOM")).loadXML(t)}catch(t){e=null}return e&&e.documentElement&&!e.getElementsByTagName("parsererror").length?e:null}},function(t,e,i){var n=i(0),s=i(203),r=i(9),a=i(51),o=i(22),h=i(410),l=i(411),c=i(412),u=i(413),d=i(25),f=i(177),p=new n({initialize:function(t,e){this.game=t,this.scaleManager,this.canvas,this.config=e,this.enabled=!0,this.events=new r,this.isOver=!0,this.defaultCursor="",this.keyboard=e.inputKeyboard?new h(this):null,this.mouse=e.inputMouse?new l(this):null,this.touch=e.inputTouch?new u(this):null,this.pointers=[],this.pointersTotal=e.inputActivePointers,e.inputTouch&&1===this.pointersTotal&&(this.pointersTotal=2);for(var i=0;i<=this.pointersTotal;i++){var n=new c(this,i);n.smoothFactor=e.inputSmoothFactor,this.pointers.push(n)}this.mousePointer=e.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new d,this._tempMatrix2=new d,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],t.events.once(o.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(a.MANAGER_BOOT),this.game.events.on(o.PRE_RENDER,this.preRender,this),this.game.events.once(o.DESTROY,this.destroy,this)},setCanvasOver:function(t){this.isOver=!0,this.events.emit(a.GAME_OVER,t)},setCanvasOut:function(t){this.isOver=!1,this.events.emit(a.GAME_OUT,t)},preRender:function(){var t=this.game.loop.now,e=this.game.loop.delta,i=this.game.scene.getScenes(!0,!0);this.time=t,this.events.emit(a.MANAGER_UPDATE);for(var n=0;n<i.length;n++){var s=i[n];if(s.sys.input&&s.sys.input.updatePoll(t,e)&&this.globalTopOnly)return}},setDefaultCursor:function(t){this.defaultCursor=t,this.canvas.style.cursor!==t&&(this.canvas.style.cursor=t)},setCursor:function(t){t.cursor&&(this.canvas.style.cursor=t.cursor)},resetCursor:function(t){t.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(t){void 0===t&&(t=1);var e=[];10<this.pointersTotal+t&&(t=10-this.pointersTotal);for(var i=0;i<t;i++){var n=this.pointers.length,s=new c(this,n);s.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(s),this.pointersTotal++,e.push(s)}return e},updateInputPlugins:function(t,e){var i=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var n=0;n<i.length;n++){var s=i[n];if(s.sys.input&&(s.sys.input.update(t,e)&&this.globalTopOnly||this._tempSkip))return}},onTouchStart:function(t){for(var e=this.pointers,i=[],n=0;n<t.changedTouches.length;n++)for(var r=t.changedTouches[n],a=1;a<this.pointersTotal;a++){var o=e[a];if(!o.active){o.touchstart(r,t),this.activePointer=o,i.push(o);break}}this.updateInputPlugins(s.TOUCH_START,i)},onTouchMove:function(t){for(var e=this.pointers,i=[],n=0;n<t.changedTouches.length;n++)for(var r=t.changedTouches[n],a=1;a<this.pointersTotal;a++){var o=e[a];if(o.active&&o.identifier===r.identifier){o.touchmove(r,t),this.activePointer=o,i.push(o);break}}this.updateInputPlugins(s.TOUCH_MOVE,i)},onTouchEnd:function(t){for(var e=this.pointers,i=[],n=0;n<t.changedTouches.length;n++)for(var r=t.changedTouches[n],a=1;a<this.pointersTotal;a++){var o=e[a];if(o.active&&o.identifier===r.identifier){o.touchend(r,t),i.push(o);break}}this.updateInputPlugins(s.TOUCH_END,i)},onTouchCancel:function(t){for(var e=this.pointers,i=[],n=0;n<t.changedTouches.length;n++)for(var r=t.changedTouches[n],a=1;a<this.pointersTotal;a++){var o=e[a];if(o.active&&o.identifier===r.identifier){o.touchcancel(r,t),i.push(o);break}}this.updateInputPlugins(s.TOUCH_CANCEL,i)},onMouseDown:function(t){var e=this.mousePointer;e.down(t),e.updateMotion(),this.activePointer=e,this.updateInputPlugins(s.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(t){var e=this.mousePointer;e.move(t),e.updateMotion(),this.activePointer=e,this.updateInputPlugins(s.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(t){var e=this.mousePointer;e.up(t),e.updateMotion(),this.activePointer=e,this.updateInputPlugins(s.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(t){var e=this.mousePointer;e.wheel(t),this.activePointer=e,this.updateInputPlugins(s.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(t){var e=this.mouse.locked;this.mousePointer.locked=e,this.events.emit(a.POINTERLOCK_CHANGE,t,e)},inputCandidate:function(t,e){var i=t.input;if(!i||!i.enabled||!i.alwaysEnabled&&!t.willRender(e))return!1;var n=!0,s=t.parentContainer;if(s)do{if(!s.willRender(e)){n=!1;break}s=s.parentContainer}while(s);return n},hitTest:function(t,e,i,n){void 0===n&&(n=this._tempHitTest);var s=this._tempPoint,r=i.scrollX,a=i.scrollY;n.length=0;var o=t.x,h=t.y;i.getWorldPoint(o,h,s),t.worldX=s.x,t.worldY=s.y;for(var l={x:0,y:0},c=this._tempMatrix,u=this._tempMatrix2,d=0;d<e.length;d++){var p,g,m=e[d];this.inputCandidate(m,i)&&(p=s.x+r*m.scrollFactorX-r,g=s.y+a*m.scrollFactorY-a,m.parentContainer?(m.getWorldTransformMatrix(c,u),c.applyInverse(p,g,l)):f(p,g,m.x,m.y,m.rotation,m.scaleX,m.scaleY,l),this.pointWithinHitArea(m,l.x,l.y)&&n.push(m))}return n},pointWithinHitArea:function(t,e,i){e+=t.displayOriginX,i+=t.displayOriginY;var n=t.input;return!(!n||!n.hitAreaCallback(n.hitArea,e,i,t)||(n.localX=e,n.localY=i,0))},pointWithinInteractiveObject:function(t,e,i){return!!t.hitArea&&(e+=t.gameObject.displayOriginX,i+=t.gameObject.displayOriginY,t.localX=e,t.localY=i,t.hitAreaCallback(t.hitArea,e,i,t))},transformPointer:function(t,e,i,n){var s=t.position,r=t.prevPosition;r.x=s.x,r.y=s.y;var a=this.scaleManager.transformX(e),o=this.scaleManager.transformY(i),h=t.smoothFactor;n&&0!==h?(s.x=a*h+r.x*(1-h),s.y=o*h+r.y*(1-h)):(s.x=a,s.y=o)},destroy:function(){this.events.removeAllListeners(),this.game.events.off(o.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var t=0;t<this.pointers.length;t++)this.pointers[t].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});t.exports=p},function(t,e,i){var n=i(93),s=i(0),r=i(22),a=i(51),o=i(143),h=i(1),l=new s({initialize:function(t){this.manager=t,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=h,this.onKeyUp=h,t.events.once(a.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputKeyboard,this.target=t.inputKeyboardEventTarget,this.addCapture(t.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(r.POST_STEP,this.postUpdate,this)},startListeners:function(){var t=this;this.onKeyDown=function(e){var i;!e.defaultPrevented&&t.enabled&&t.manager&&(t.queue.push(e),t.manager.events.emit(a.MANAGER_PROCESS),i=e.altKey||e.ctrlKey||e.shiftKey||e.metaKey,t.preventDefault&&!i&&-1<t.captures.indexOf(e.keyCode)&&e.preventDefault())},this.onKeyUp=function(e){var i;!e.defaultPrevented&&t.enabled&&t.manager&&(t.queue.push(e),t.manager.events.emit(a.MANAGER_PROCESS),i=e.altKey||e.ctrlKey||e.shiftKey||e.metaKey,t.preventDefault&&!i&&-1<t.captures.indexOf(e.keyCode)&&e.preventDefault())};var e=this.target;e&&(e.addEventListener("keydown",this.onKeyDown,!1),e.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var t=this.target;t.removeEventListener("keydown",this.onKeyDown,!1),t.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(t){"string"==typeof t&&(t=t.split(",")),Array.isArray(t)||(t=[t]);for(var e=this.captures,i=0;i<t.length;i++){var n=t[i];"string"==typeof n&&(n=o[n.trim().toUpperCase()]),-1===e.indexOf(n)&&e.push(n)}this.preventDefault=0<e.length},removeCapture:function(t){"string"==typeof t&&(t=t.split(",")),Array.isArray(t)||(t=[t]);for(var e=this.captures,i=0;i<t.length;i++){var s=t[i];"string"==typeof s&&(s=o[s.toUpperCase()]),n(e,s)}this.preventDefault=0<e.length},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(r.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});t.exports=l},function(t,e,i){var n=i(0),s=i(191),r=i(51),a=i(1),o=new n({initialize:function(t){this.manager=t,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=a,this.onMouseDown=a,this.onMouseUp=a,this.onMouseDownWindow=a,this.onMouseUpWindow=a,this.onMouseOver=a,this.onMouseOut=a,this.onMouseWheel=a,this.pointerLockChange=a,this.isTop=!0,t.events.once(r.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputMouse,this.target=t.inputMouseEventTarget,this.passive=t.inputMousePassive,this.preventDefaultDown=t.inputMousePreventDefaultDown,this.preventDefaultUp=t.inputMousePreventDefaultUp,this.preventDefaultMove=t.inputMousePreventDefaultMove,this.preventDefaultWheel=t.inputMousePreventDefaultWheel,this.target?"string"==typeof this.target&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,t.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),this},requestPointerLock:function(){var t;s.pointerLock&&((t=this.target).requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,t.requestPointerLock())},releasePointerLock:function(){s.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var t=this.target;if(t){var e=this,i=this.manager,n=i.canvas,r=window&&window.focus&&i.game.config.autoFocus;this.onMouseMove=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&(i.onMouseMove(t),e.preventDefaultMove&&t.preventDefault())},this.onMouseDown=function(t){r&&window.focus(),!t.defaultPrevented&&e.enabled&&i&&i.enabled&&(i.onMouseDown(t),e.preventDefaultDown&&t.target===n&&t.preventDefault())},this.onMouseDownWindow=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&t.target!==n&&i.onMouseDown(t)},this.onMouseUp=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&(i.onMouseUp(t),e.preventDefaultUp&&t.target===n&&t.preventDefault())},this.onMouseUpWindow=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&t.target!==n&&i.onMouseUp(t)},this.onMouseOver=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&i.setCanvasOver(t)},this.onMouseOut=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&i.setCanvasOut(t)},this.onMouseWheel=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&i.onMouseWheel(t),e.preventDefaultWheel&&t.target===n&&t.preventDefault()};var a={passive:!0};if(t.addEventListener("mousemove",this.onMouseMove),t.addEventListener("mousedown",this.onMouseDown),t.addEventListener("mouseup",this.onMouseUp),t.addEventListener("mouseover",this.onMouseOver,a),t.addEventListener("mouseout",this.onMouseOut,a),this.preventDefaultWheel?t.addEventListener("wheel",this.onMouseWheel,{passive:!1}):t.addEventListener("wheel",this.onMouseWheel,a),window&&i.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,a),window.top.addEventListener("mouseup",this.onMouseUpWindow,a)}catch(t){window.addEventListener("mousedown",this.onMouseDownWindow,a),window.addEventListener("mouseup",this.onMouseUpWindow,a),this.isTop=!1}s.pointerLock&&(this.pointerLockChange=function(t){var n=e.target;e.locked=document.pointerLockElement===n||document.mozPointerLockElement===n||document.webkitPointerLockElement===n,i.onPointerLockChange(t)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var t=this.target;t.removeEventListener("mousemove",this.onMouseMove),t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("mouseover",this.onMouseOver),t.removeEventListener("mouseout",this.onMouseOut),window&&((t=this.isTop?window.top:window).removeEventListener("mousedown",this.onMouseDownWindow),t.removeEventListener("mouseup",this.onMouseUpWindow)),s.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});t.exports=o},function(t,e,i){var n=i(349),s=i(0),r=i(50),a=i(124),o=i(360),h=i(3),l=i(105),c=new s({initialize:function(t,e){this.manager=t,this.id=e,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new h,this.prevPosition=new h,this.midPoint=new h(-1,-1),this.velocity=new h,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=0===e,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(t){var e=t.getWorldPoint(this.x,this.y);return this.worldX=e.x,this.worldY=e.y,this},positionToCamera:function(t,e){return t.getWorldPoint(this.x,this.y,e)},updateMotion:function(){var t,e,i,s,r=this.position.x,h=this.position.y,l=this.midPoint.x,c=this.midPoint.y;r===l&&h===c||(t=o(this.motionFactor,l,r),e=o(this.motionFactor,c,h),a(t,r,.1)&&(t=r),a(e,h,.1)&&(e=h),this.midPoint.set(t,e),i=r-t,s=h-e,this.velocity.set(i,s),this.angle=n(t,e,r,h),this.distance=Math.sqrt(i*i+s*s))},up:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.button=t.button,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),0===t.button&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),0===this.buttons&&(this.isDown=!1,this.upTime=t.timeStamp,this.wasTouch=!1)},down:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.button=t.button,this.downElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),0===t.button&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),l.macOS&&t.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=t.timeStamp),this.wasTouch=!1},move:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.manager.transformPointer(this,t.pageX,t.pageY,!0),this.locked&&(this.movementX=t.movementX||t.mozMovementX||t.webkitMovementX||0,this.movementY=t.movementY||t.mozMovementY||t.webkitMovementY||0),this.moveTime=t.timeStamp,this.wasTouch=!1},wheel:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.deltaX=t.deltaX,this.deltaY=t.deltaY,this.deltaZ=t.deltaZ,this.wasTouch=!1},touchstart:function(t,e){t.pointerId&&(this.pointerId=t.pointerId),this.identifier=t.identifier,this.target=t.target,this.active=!0,this.buttons=1,this.event=e,this.downElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=e.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(t,e){this.event=e,this.manager.transformPointer(this,t.pageX,t.pageY,!0),this.moveTime=e.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(t,e){this.buttons=0,this.event=e,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=e.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(t,e){this.buttons=0,this.event=e,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=e.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return 0===this.buttons},leftButtonDown:function(){return!!(1&this.buttons)},rightButtonDown:function(){return!!(2&this.buttons)},middleButtonDown:function(){return!!(4&this.buttons)},backButtonDown:function(){return!!(8&this.buttons)},forwardButtonDown:function(){return!!(16&this.buttons)},leftButtonReleased:function(){return 0===this.button&&!this.isDown},rightButtonReleased:function(){return 2===this.button&&!this.isDown},middleButtonReleased:function(){return 1===this.button&&!this.isDown},backButtonReleased:function(){return 3===this.button&&!this.isDown},forwardButtonReleased:function(){return 4===this.button&&!this.isDown},getDistance:function(){return this.isDown?r(this.downX,this.downY,this.x,this.y):r(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?n(this.downX,this.downY,this.x,this.y):n(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(t,e){void 0===t&&(t=10),void 0===e&&(e=[]);for(var i=this.prevPosition.x,n=this.prevPosition.y,s=this.position.x,r=this.position.y,a=0;a<t;a++){var h=1/t*a;e[a]={x:o(h,i,s),y:o(h,n,r)}}return e},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},time:{get:function(){return this.event?this.event.timeStamp:0}}});t.exports=c},function(t,e,i){var n=i(0),s=i(51),r=i(1),a=new n({initialize:function(t){this.manager=t,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=r,this.onTouchStartWindow=r,this.onTouchMove=r,this.onTouchEnd=r,this.onTouchEndWindow=r,this.onTouchCancel=r,this.onTouchCancelWindow=r,this.onTouchOver=r,this.onTouchOut=r,t.events.once(s.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputTouch,this.target=t.inputTouchEventTarget,this.capture=t.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),t.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),this},startListeners:function(){var t=this,e=this.manager.canvas,i=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(n){i&&window.focus(),!n.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchStart(n),t.capture&&n.cancelable&&n.target===e&&n.preventDefault())},this.onTouchStartWindow=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&i.target!==e&&t.manager.onTouchStart(i)},this.onTouchMove=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchMove(e),t.capture&&e.cancelable&&e.preventDefault())},this.onTouchEnd=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchEnd(i),t.capture&&i.cancelable&&i.target===e&&i.preventDefault())},this.onTouchEndWindow=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&i.target!==e&&t.manager.onTouchEnd(i)},this.onTouchCancel=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchCancel(e),t.capture&&e.preventDefault())},this.onTouchCancelWindow=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.onTouchCancel(e)},this.onTouchOver=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.setCanvasOver(e)},this.onTouchOut=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.setCanvasOut(e)};var n,s,r=this.target;r&&(s={passive:!(n={passive:!0})},r.addEventListener("touchstart",this.onTouchStart,this.capture?s:n),r.addEventListener("touchmove",this.onTouchMove,this.capture?s:n),r.addEventListener("touchend",this.onTouchEnd,this.capture?s:n),r.addEventListener("touchcancel",this.onTouchCancel,this.capture?s:n),r.addEventListener("touchover",this.onTouchOver,this.capture?s:n),r.addEventListener("touchout",this.onTouchOut,this.capture?s:n),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,s),window.addEventListener("touchend",this.onTouchEndWindow,s),window.addEventListener("touchcancel",this.onTouchCancelWindow,s)),this.enabled=!0)},stopListeners:function(){var t=this.target;t.removeEventListener("touchstart",this.onTouchStart),t.removeEventListener("touchmove",this.onTouchMove),t.removeEventListener("touchend",this.onTouchEnd),t.removeEventListener("touchcancel",this.onTouchCancel),t.removeEventListener("touchover",this.onTouchOver),t.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});t.exports=a},function(t,e,i){var n=i(0),s=i(22),r=i(9),a=i(8),o=i(16),h=i(5),l=i(2),c=i(24),u=i(93),d=new n({Extends:r,initialize:function(t){r.call(this),this.game=t,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],t.isBooted?this.boot():t.events.once(s.BOOT,this.boot,this)},boot:function(){for(var t,e,i,n,r,a,o=this.game.config,h=(h=o.installGlobalPlugins).concat(this._pendingGlobal),c=0;c<h.length;c++)t=h[c],e=l(t,"key",null),i=l(t,"plugin",null),n=l(t,"start",!1),r=l(t,"mapping",null),a=l(t,"data",null),e&&(i?this.install(e,i,n,r,a):console.warn("Missing `plugin` for key: "+e));for(h=(h=o.installScenePlugins).concat(this._pendingScene),c=0;c<h.length;c++)t=h[c],e=l(t,"key",null),i=l(t,"plugin",null),r=l(t,"mapping",null),e&&(i?this.installScenePlugin(e,i,r):console.warn("Missing `plugin` for key: "+e));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(s.DESTROY,this.destroy,this)},addToScene:function(t,e,i){for(var n,s=this.game,r=t.scene,a=t.settings.map,o=t.settings.isBooted,h=0;h<e.length;h++)s[p=e[h]]?(t[p]=s[p],a.hasOwnProperty(p)&&(r[a[p]]=t[p])):"game"===p&&a.hasOwnProperty(p)&&(r[a[p]]=s);for(var l=0;l<i.length;l++)for(n=i[l],h=0;h<n.length;h++){var u,d,f,p=n[h];c.hasCore(p)&&(d=(u=c.getCore(p)).mapping,f=new u.plugin(r,this,d),t[d]=f,u.custom?r[d]=f:a.hasOwnProperty(d)&&(r[a[d]]=f),o&&f.boot())}for(n=this.plugins,h=0;h<n.length;h++){var g=n[h];g.mapping&&(r[g.mapping]=g.plugin)}},getDefaultScenePlugins:function(){return this.game.config.defaultPlugins.concat(this.scenePlugins)},installScenePlugin:function(t,e,i,n,s){if(void 0===s&&(s=!1),"function"==typeof e){if(c.hasCore(t)){if(!s&&c.hasCore(t))return void console.warn("Scene Plugin key in use: "+t)}else c.register(t,e,i,!0),this.scenePlugins.push(t);var r;n&&(r=new e(n,this,t),n.sys[t]=r,i&&""!==i&&(n[i]=r),r.boot())}else console.warn("Invalid Scene Plugin: "+t)},install:function(t,e,i,n,s){if(void 0===i&&(i=!1),void 0===n&&(n=null),void 0===s&&(s=null),"function"!=typeof e)return console.warn("Invalid Plugin: "+t),null;if(c.hasCustom(t))return console.warn("Plugin key in use: "+t),null;if(null!==n&&(i=!0),this.game.isBooted){if(c.registerCustom(t,e,n,s),i)return this.start(t)}else this._pendingGlobal.push({key:t,plugin:e,start:i,mapping:n,data:s});return null},getIndex:function(t){for(var e=this.plugins,i=0;i<e.length;i++)if(e[i].key===t)return i;return-1},getEntry:function(t){var e=this.getIndex(t);if(-1!==e)return this.plugins[e]},isActive:function(t){var e=this.getEntry(t);return e&&e.active},start:function(t,e){void 0===e&&(e=t);var i=this.getEntry(e);return i&&!i.active?(i.active=!0,i.plugin.start()):i=i||this.createEntry(t,e),i?i.plugin:null},createEntry:function(t,e){var i,n=c.getCustom(t);return n&&(n={key:e,plugin:i=new n.plugin(this),active:!0,mapping:n.mapping,data:n.data},this.plugins.push(n),i.init(n.data),i.start()),n},stop:function(t){var e=this.getEntry(t);return e&&e.active&&(e.active=!1,e.plugin.stop()),this},get:function(t,e){void 0===e&&(e=!0);var i=this.getEntry(t);if(i)return i.plugin;var n=this.getClass(t);return n&&e?(i=this.createEntry(t,t))?i.plugin:null:n||null},getClass:function(t){return c.getCustomClass(t)},removeGlobalPlugin:function(t){var e=this.getEntry(t);e&&u(this.plugins,e),c.removeCustom(t)},removeScenePlugin:function(t){u(this.scenePlugins,t),c.remove(t)},registerGameObject:function(t,e,i){return e&&h.register(t,e),i&&o.register(t,i),this},removeGameObject:function(t,e,i){return void 0===e&&(e=!0),void 0===i&&(i=!0),e&&h.remove(t),i&&o.remove(t),this},registerFileType:function(t,e,i){a.register(t,e),i&&i.sys.load&&(i.sys.load[t]=e)},destroy:function(){for(var t=0;t<this.plugins.length;t++)this.plugins[t].plugin.destroy();c.destroyCustomPlugins(),this.game.noReturn&&c.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});t.exports=d},function(t,e,i){var n=i(201),s=i(0),r=i(9),a=i(104),o=i(22),h=i(401),l=i(407),c=i(402),u=i(1),d=i(10),f=i(416),p=i(76),g=i(3),m=new s({Extends:r,initialize:function(t){r.call(this),this.game=t,this.canvas,this.canvasBounds=new d,this.parent=null,this.parentIsWindow=!1,this.parentSize=new f,this.gameSize=new f,this.baseSize=new f,this.displaySize=new f,this.scaleMode=n.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new g(1,1),this.autoRound=!1,this.autoCenter=n.CENTER.NO_CENTER,this.orientation=n.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:u,windowResize:u,fullScreenChange:u,fullScreenError:u}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(o.BOOT,this.boot,this)},boot:function(){var t=this.game;this.canvas=t.canvas,this.fullscreen=t.device.fullscreen,this.scaleMode!==n.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===n.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),0<this.parentSize.width&&0<this.parentSize.height&&this.displaySize.setParent(this.parentSize),this.refresh()),t.events.on(o.PRE_STEP,this.step,this),t.events.once(o.READY,this.refresh,this),t.events.once(o.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(t){this.getParent(t),this.getParentBounds();var e,i,s,r,a=t.width,o=t.height,h=t.scaleMode,l=t.zoom,u=t.autoRound;"string"==typeof a&&(0===(e=this.parentSize.width)&&(e=window.innerWidth),i=parseInt(a,10)/100,a=Math.floor(e*i)),"string"==typeof o&&(0===(s=this.parentSize.height)&&(s=window.innerHeight),r=parseInt(o,10)/100,o=Math.floor(s*r)),this.scaleMode=h,this.autoRound=u,this.autoCenter=t.autoCenter,this.resizeInterval=t.resizeInterval,u&&(a=Math.floor(a),o=Math.floor(o)),this.gameSize.setSize(a,o),l===n.ZOOM.MAX_ZOOM&&(l=this.getMaxZoom()),1!==(this.zoom=l)&&(this._resetZoom=!0),this.baseSize.setSize(a,o),u&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),0<t.minWidth&&this.displaySize.setMin(t.minWidth*l,t.minHeight*l),0<t.maxWidth&&this.displaySize.setMax(t.maxWidth*l,t.maxHeight*l),this.displaySize.setSize(a,o),this.orientation=c(a,o)},getParent:function(t){var e,i=t.parent;null!==i&&(this.parent=l(i),this.parentIsWindow=this.parent===document.body,t.expandParent&&t.scaleMode!==n.SCALE_MODE.NONE&&(e=this.parent.getBoundingClientRect(),!this.parentIsWindow&&0!==e.height||(document.documentElement.style.height="100%",document.body.style.height="100%",e=this.parent.getBoundingClientRect(),this.parentIsWindow||0!==e.height||(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))),t.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=l(t.fullscreenTarget)))},getParentBounds:function(){if(!this.parent)return!1;var t=this.parentSize,e=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(e.height=h(!0));var i=e.width,n=e.height;return(t.width!==i||t.height!==n)&&(t.setSize(i,n),!0)},lockOrientation:function(t){var e=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return!!e&&e.call(screen,t)},setParentSize:function(t,e){return this.parentSize.setSize(t,e),this.refresh()},setGameSize:function(t,e){var i=this.autoRound;i&&(t=Math.floor(t),e=Math.floor(e));var n=this.width,s=this.height;return this.gameSize.resize(t,e),this.baseSize.resize(t,e),i&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(t/e),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(n,s)},resize:function(t,e){var i=this.zoom,n=this.autoRound;n&&(t=Math.floor(t),e=Math.floor(e));var s=this.width,r=this.height;this.gameSize.resize(t,e),this.baseSize.resize(t,e),n&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(t*i,e*i),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var a=this.canvas.style,o=t*i,h=e*i;return n&&(o=Math.floor(o),h=Math.floor(h)),o===t&&h===e||(a.width=o+"px",a.height=h+"px"),this.refresh(s,r)},setZoom:function(t){return this.zoom=t,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(t,e){void 0===t&&(t=this.width),void 0===e&&(e=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var i,n,s=this.game.domContainer;return s&&(this.baseSize.setCSS(s),i=this.canvas.style,(n=s.style).transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",n.marginLeft=i.marginLeft,n.marginTop=i.marginTop),this.emit(a.RESIZE,this.gameSize,this.baseSize,this.displaySize,t,e),this},updateOrientation:function(){var t;this._checkOrientation&&(this._checkOrientation=!1,(t=c(this.width,this.height))!==this.orientation&&(this.orientation=t,this.emit(a.ORIENTATION_CHANGE,t)))},updateScale:function(){var t,e,i=this.canvas.style,s=this.gameSize.width,r=this.gameSize.height,a=this.zoom,o=this.autoRound;this.scaleMode===n.SCALE_MODE.NONE?(this.displaySize.setSize(s*a,r*a),t=this.displaySize.width,e=this.displaySize.height,o&&(t=Math.floor(t),e=Math.floor(e)),this._resetZoom&&(i.width=t+"px",i.height=e+"px",this._resetZoom=!1)):this.scaleMode===n.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),t=this.displaySize.width,e=this.displaySize.height,o&&(t=Math.floor(t),e=Math.floor(e)),this.canvas.width=t,this.canvas.height=e):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),t=this.displaySize.width,e=this.displaySize.height,o&&(t=Math.floor(t),e=Math.floor(e)),i.width=t+"px",i.height=e+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var t=p(this.parentSize.width,this.gameSize.width,0,!0),e=p(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(t,e),1)},updateCenter:function(){var t,e,i,s,r,a,o,h=this.autoCenter;h!==n.CENTER.NO_CENTER&&(e=(t=this.canvas).style,s=(i=t.getBoundingClientRect()).width,r=i.height,a=Math.floor((this.parentSize.width-s)/2),o=Math.floor((this.parentSize.height-r)/2),h===n.CENTER.CENTER_HORIZONTALLY?o=0:h===n.CENTER.CENTER_VERTICALLY&&(a=0),e.marginLeft=a+"px",e.marginTop=o+"px")},updateBounds:function(){var t=this.canvasBounds,e=this.canvas.getBoundingClientRect();t.x=e.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),t.y=e.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),t.width=e.width,t.height=e.height},transformX:function(t){return(t-this.canvasBounds.left)*this.displayScale.x},transformY:function(t){return(t-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(t){void 0===t&&(t={navigationUI:"hide"});var e,i=this.fullscreen;i.available?i.active||(e=this.getFullscreenTarget(),i.keyboard?e[i.request](Element.ALLOW_KEYBOARD_INPUT):e[i.request](t)):this.emit(a.FULLSCREEN_UNSUPPORTED)},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(a.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(t){this.removeFullscreenTarget(),this.emit(a.FULLSCREEN_FAILED,t)},getFullscreenTarget:function(){var t;return this.fullscreenTarget||((t=document.createElement("div")).style.margin="0",t.style.padding="0",t.style.width="100%",t.style.height="100%",this.fullscreenTarget=t,this._createdFullscreenTarget=!0),this._createdFullscreenTarget&&(this.canvas.parentNode.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)),this.fullscreenTarget},removeFullscreenTarget:function(){var t,e;!this._createdFullscreenTarget||(t=this.fullscreenTarget)&&t.parentNode&&((e=t.parentNode).insertBefore(this.canvas,t),e.removeChild(t))},stopFullscreen:function(){var t=this.fullscreen;if(!t.available)return this.emit(a.FULLSCREEN_UNSUPPORTED),!1;t.active&&document[t.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(a.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(t){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(t)},startListeners:function(){var t=this,e=this.listeners;e.orientationChange=function(){t.updateBounds(),t._checkOrientation=!0,t.dirty=!0},e.windowResize=function(){t.updateBounds(),t.dirty=!0},window.addEventListener("orientationchange",e.orientationChange,!1),window.addEventListener("resize",e.windowResize,!1),this.fullscreen.available&&(e.fullScreenChange=function(e){return t.onFullScreenChange(e)},e.fullScreenError=function(e){return t.onFullScreenError(e)},["webkit","moz",""].forEach((function(t){document.addEventListener(t+"fullscreenchange",e.fullScreenChange,!1),document.addEventListener(t+"fullscreenerror",e.fullScreenError,!1)})),document.addEventListener("MSFullscreenChange",e.fullScreenChange,!1),document.addEventListener("MSFullscreenError",e.fullScreenError,!1))},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(t,e){this.parent&&(this._lastCheck+=e,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var t=this.listeners;window.removeEventListener("orientationchange",t.orientationChange,!1),window.removeEventListener("resize",t.windowResize,!1),["webkit","moz",""].forEach((function(e){document.removeEventListener(e+"fullscreenchange",t.fullScreenChange,!1),document.removeEventListener(e+"fullscreenerror",t.fullScreenError,!1)})),document.removeEventListener("MSFullscreenChange",t.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",t.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===n.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===n.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});t.exports=m},function(t,e,i){var n=i(18),s=i(0),r=i(76),a=i(3),o=new s({initialize:function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=0),void 0===n&&(n=null),this._width=t,this._height=e,this._parent=n,this.aspectMode=i,this.aspectRatio=0===e?1:t/e,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new a},setAspectMode:function(t){return void 0===t&&(t=0),this.aspectMode=t,this.setSize(this._width,this._height)},setSnap:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.snapTo.set(t,e),this.setSize(this._width,this._height)},setParent:function(t){return this._parent=t,this.setSize(this._width,this._height)},setMin:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.minWidth=n(t,0,this.maxWidth),this.minHeight=n(e,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(t,e){return void 0===t&&(t=Number.MAX_VALUE),void 0===e&&(e=t),this.maxWidth=n(t,this.minWidth,Number.MAX_VALUE),this.maxHeight=n(e,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(t,e){switch(void 0===t&&(t=0),void 0===e&&(e=t),this.aspectMode){case o.NONE:this._width=this.getNewWidth(r(t,this.snapTo.x)),this._height=this.getNewHeight(r(e,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height;break;case o.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(r(t,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case o.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(r(e,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case o.FIT:this.constrain(t,e,!0);break;case o.ENVELOP:this.constrain(t,e,!1)}return this},setAspectRatio:function(t){return this.aspectRatio=t,this.setSize(this._width,this._height)},resize:function(t,e){return this._width=this.getNewWidth(r(t,this.snapTo.x)),this._height=this.getNewHeight(r(e,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height,this},getNewWidth:function(t,e){return void 0===e&&(e=!0),t=n(t,this.minWidth,this.maxWidth),e&&this._parent&&t>this._parent.width&&(t=Math.max(this.minWidth,this._parent.width)),t},getNewHeight:function(t,e){return void 0===e&&(e=!0),t=n(t,this.minHeight,this.maxHeight),e&&this._parent&&t>this._parent.height&&(t=Math.max(this.minHeight,this._parent.height)),t},constrain:function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=!0),t=this.getNewWidth(t),e=this.getNewHeight(e);var n=this.snapTo,s=0===e?1:t/e;return i&&this.aspectRatio>s||!i&&this.aspectRatio<s?(e=(t=r(t,n.x))/this.aspectRatio,0<n.y&&(t=(e=r(e,n.y))*this.aspectRatio)):(i&&this.aspectRatio<s||!i&&this.aspectRatio>s)&&(t=(e=r(e,n.y))*this.aspectRatio,0<n.x&&(e=(t=r(t,n.x))*(1/this.aspectRatio))),this._width=t,this._height=e,this},fitTo:function(t,e){return this.constrain(t,e,!0)},envelop:function(t,e){return this.constrain(t,e,!1)},setWidth:function(t){return this.setSize(t,this._height)},setHeight:function(t){return this.setSize(this._width,t)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(t){t&&t.style&&(t.style.width=this._width+"px",t.style.height=this._height+"px")},copy:function(t){return t.setAspectMode(this.aspectMode),t.aspectRatio=this.aspectRatio,t.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(t){this.setSize(t,this._height)}},height:{get:function(){return this._height},set:function(t){this.setSize(this._width,t)}}});o.NONE=0,o.WIDTH_CONTROLS_HEIGHT=1,o.HEIGHT_CONTROLS_WIDTH=2,o.FIT=3,o.ENVELOP=4,t.exports=o},function(t,e,i){var n=i(0),s=i(144),r=i(20),a=i(22),o=i(6),h=i(95),l=i(1),c=i(418),u=i(204),d=new n({initialize:function(t,e){if(this.game=t,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++)this._pending.push({key:"default",scene:e[i],autoStart:0===i,data:{}})}t.events.once(a.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){for(var t=0;t<this._pending.length;t++){var e,i,n,s=(i=this._pending[t]).key;(n=i.scene)instanceof c?e=this.createSceneFromInstance(s,n):"object"==typeof n?e=this.createSceneFromObject(s,n):"function"==typeof n&&(e=this.createSceneFromFunction(s,n)),s=e.sys.settings.key,this.keys[s]=e,this.scenes.push(e),this._data[s]&&(e.sys.settings.data=this._data[s].data,this._data[s].autoStart&&(i.autoStart=!0)),(i.autoStart||e.sys.settings.active)&&this._start.push(s)}for(this._pending.length=0,this._data={},this.isBooted=!0,t=0;t<this._start.length;t++)i=this._start[t],this.start(i);this._start.length=0}},processQueue:function(){var t,e,i=this._pending.length,n=this._queue.length;if(0!==i||0!==n){if(i){for(t=0;t<i;t++)e=this._pending[t],this.add(e.key,e.scene,e.autoStart,e.data);for(t=0;t<this._start.length;t++)e=this._start[t],this.start(e);return this._start.length=0,void(this._pending.length=0)}for(t=0;t<this._queue.length;t++)this[(e=this._queue[t]).op](e.keyA,e.keyB);this._queue.length=0}},add:function(t,e,i,n){return void 0===i&&(i=!1),void 0===n&&(n={}),this.isProcessing||!this.isBooted?(this._pending.push({key:t,scene:e,autoStart:i,data:n}),this.isBooted||(this._data[t]={data:n}),null):(t=this.getKey(t,e),e instanceof c?s=this.createSceneFromInstance(t,e):"object"==typeof e?(e.key=t,s=this.createSceneFromObject(t,e)):"function"==typeof e&&(s=this.createSceneFromFunction(t,e)),s.sys.settings.data=n,t=s.sys.settings.key,this.keys[t]=s,this.scenes.push(s),(i||s.sys.settings.active)&&(this._pending.length?this._start.push(t):this.start(t)),s);var s},remove:function(t){if(this.isProcessing)this._queue.push({op:"remove",keyA:t,keyB:null});else{var e=this.getScene(t);if(!e||e.sys.isTransitioning())return this;var i=this.scenes.indexOf(e),n=e.sys.settings.key;-1<i&&(delete this.keys[n],this.scenes.splice(i,1),-1<this._start.indexOf(n)&&(i=this._start.indexOf(n),this._start.splice(i,1)),e.sys.destroy())}return this},bootScene:function(t){var e,i=t.sys,n=i.settings;i.sceneUpdate=l,t.init&&(t.init.call(t,n.data),n.status=s.INIT,n.isTransition&&i.events.emit(r.TRANSITION_INIT,n.transitionFrom,n.transitionDuration)),i.load&&(e=i.load).reset(),e&&t.preload?(t.preload.call(t),0===e.list.size?this.create(t):(n.status=s.LOADING,e.once(h.COMPLETE,this.loadComplete,this),e.start())):this.create(t)},loadComplete:function(t){this.create(t.scene)},payloadComplete:function(t){this.bootScene(t.scene)},update:function(t,e){this.processQueue(),this.isProcessing=!0;for(var i=this.scenes.length-1;0<=i;i--){var n=this.scenes[i].sys;n.settings.status>s.START&&n.settings.status<=s.RUNNING&&n.step(t,e)}},render:function(t){for(var e=0;e<this.scenes.length;e++){var i=this.scenes[e].sys;i.settings.visible&&i.settings.status>=s.LOADING&&i.settings.status<s.SLEEPING&&i.render(t)}this.isProcessing=!1},create:function(t){var e=t.sys,i=e.settings;t.create&&(i.status=s.CREATING,t.create.call(t,i.data),i.status===s.DESTROYED)||(i.isTransition&&e.events.emit(r.TRANSITION_START,i.transitionFrom,i.transitionDuration),t.update&&(e.sceneUpdate=t.update),i.status=s.RUNNING,e.events.emit(r.CREATE,t))},createSceneFromFunction:function(t,e){var i=new e;if(i instanceof c){var n=i.sys.settings.key;if(""!==n&&(t=n),this.keys.hasOwnProperty(t))throw new Error("Cannot add a Scene with duplicate key: "+t);return this.createSceneFromInstance(t,i)}return i.sys=new u(i),i.sys.settings.key=t,i.sys.init(this.game),i},createSceneFromInstance:function(t,e){return""===e.sys.settings.key&&(e.sys.settings.key=t),e.sys.init(this.game),e},createSceneFromObject:function(t,e){var i=new c(e),n=i.sys.settings.key;""!==n?t=n:i.sys.settings.key=t,i.sys.init(this.game);for(var s,r=["init","preload","create","update","render"],a=0;a<r.length;a++){var h=o(e,r[a],null);h&&(i[r[a]]=h)}if(e.hasOwnProperty("extend"))for(var l in e.extend)e.extend.hasOwnProperty(l)&&(s=e.extend[l],"data"===l&&i.hasOwnProperty("data")&&"object"==typeof s?i.data.merge(s):"sys"!==l&&(i[l]=s));return i},getKey:function(t,e){if(t=t||"default","function"==typeof e)return t;if(e instanceof c?t=e.sys.settings.key:"object"==typeof e&&e.hasOwnProperty("key")&&(t=e.key),this.keys.hasOwnProperty(t))throw new Error("Cannot add a Scene with duplicate key: "+t);return t},getScenes:function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!1);for(var i=[],n=this.scenes,s=0;s<n.length;s++){var r=n[s];r&&(!t||t&&r.sys.isActive())&&i.push(r)}return e?i.reverse():i},getScene:function(t){if("string"==typeof t){if(this.keys[t])return this.keys[t]}else for(var e=0;e<this.scenes.length;e++)if(t===this.scenes[e])return t;return null},isActive:function(t){var e=this.getScene(t);return e?e.sys.isActive():null},isPaused:function(t){var e=this.getScene(t);return e?e.sys.isPaused():null},isVisible:function(t){var e=this.getScene(t);return e?e.sys.isVisible():null},isSleeping:function(t){var e=this.getScene(t);return e?e.sys.isSleeping():null},pause:function(t,e){var i=this.getScene(t);return i&&i.sys.pause(e),this},resume:function(t,e){var i=this.getScene(t);return i&&i.sys.resume(e),this},sleep:function(t,e){var i=this.getScene(t);return i&&!i.sys.isTransitioning()&&i.sys.sleep(e),this},wake:function(t,e){var i=this.getScene(t);return i&&i.sys.wake(e),this},run:function(t,e){var i=this.getScene(t);if(!i){for(var n=0;n<this._pending.length;n++)if(this._pending[n].key===t){this.queueOp("start",t,e);break}return this}i.sys.isSleeping()?i.sys.wake(e):i.sys.isPaused()?i.sys.resume(e):this.start(t,e)},start:function(t,e){if(!this.isBooted)return this._data[t]={autoStart:!0,data:e},this;var i=this.getScene(t);if(i){var n,r=i.sys;if(r.isActive()||r.isPaused())r.shutdown(),r.sceneUpdate=l,r.start(e);else if(r.sceneUpdate=l,r.start(e),r.load&&(n=r.load),n&&r.settings.hasOwnProperty("pack")&&(n.reset(),n.addPack({payload:r.settings.pack})))return r.settings.status=s.LOADING,n.once(h.COMPLETE,this.payloadComplete,this),n.start(),this;this.bootScene(i)}return this},stop:function(t,e){var i=this.getScene(t);return i&&!i.sys.isTransitioning()&&i.sys.shutdown(e),this},switch:function(t,e){var i=this.getScene(t),n=this.getScene(e);return i&&n&&i!==n&&(this.sleep(t),this.isSleeping(e)?this.wake(e):this.start(e)),this},getAt:function(t){return this.scenes[t]},getIndex:function(t){var e=this.getScene(t);return this.scenes.indexOf(e)},bringToTop:function(t){var e,i;return this.isProcessing?this._queue.push({op:"bringToTop",keyA:t,keyB:null}):-1!==(e=this.getIndex(t))&&e<this.scenes.length&&(i=this.getScene(t),this.scenes.splice(e,1),this.scenes.push(i)),this},sendToBack:function(t){var e,i;return this.isProcessing?this._queue.push({op:"sendToBack",keyA:t,keyB:null}):-1!==(e=this.getIndex(t))&&0<e&&(i=this.getScene(t),this.scenes.splice(e,1),this.scenes.unshift(i)),this},moveDown:function(t){var e,i,n,s;return this.isProcessing?this._queue.push({op:"moveDown",keyA:t,keyB:null}):0<(e=this.getIndex(t))&&(i=e-1,n=this.getScene(t),s=this.getAt(i),this.scenes[e]=s,this.scenes[i]=n),this},moveUp:function(t){var e,i,n,s;return this.isProcessing?this._queue.push({op:"moveUp",keyA:t,keyB:null}):(e=this.getIndex(t))<this.scenes.length-1&&(i=e+1,n=this.getScene(t),s=this.getAt(i),this.scenes[e]=s,this.scenes[i]=n),this},moveAbove:function(t,e){return t===e||(this.isProcessing?this._queue.push({op:"moveAbove",keyA:t,keyB:e}):(i=this.getIndex(t),n=this.getIndex(e),-1!==i&&-1!==n&&(s=this.getAt(n),this.scenes.splice(n,1),this.scenes.splice(i+1,0,s)))),this;var i,n,s},moveBelow:function(t,e){return t===e||(this.isProcessing?this._queue.push({op:"moveBelow",keyA:t,keyB:e}):(i=this.getIndex(t),n=this.getIndex(e),-1!==i&&-1!==n&&(s=this.getAt(n),this.scenes.splice(n,1),0===i?this.scenes.unshift(s):this.scenes.splice(i,0,s)))),this;var i,n,s},queueOp:function(t,e,i){return this._queue.push({op:t,keyA:e,keyB:i}),this},swapPosition:function(t,e){return t===e||(this.isProcessing?this._queue.push({op:"swapPosition",keyA:t,keyB:e}):(i=this.getIndex(t))!==(n=this.getIndex(e))&&-1!==i&&-1!==n&&(s=this.getAt(i),this.scenes[i]=this.scenes[n],this.scenes[n]=s)),this;var i,n,s},dump:function(){for(var t=[],e=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],i=0;i<this.scenes.length;i++){var n=this.scenes[i].sys,r=!n.settings.visible||n.settings.status!==s.RUNNING&&n.settings.status!==s.PAUSED?"[-] ":"[*] ";r+=n.settings.key+" ("+e[n.settings.status]+")",t.push(r)}console.log(t.join("\n"))},destroy:function(){for(var t=0;t<this.scenes.length;t++)this.scenes[t].sys.destroy();this.update=l,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});t.exports=d},function(t,e,i){var n=i(0),s=i(204),r=new n({initialize:function(t){this.sys=new s(this,t),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});t.exports=r},function(t,e,i){var n=i(2),s=i(205);t.exports=function(t){var e=t.game.config.defaultPhysicsSystem,i=n(t.settings,"physics",!1);if(e||i){var r=[];if(e&&r.push(s(e+"Physics")),i)for(var a in i)a=s(a.concat("Physics")),-1===r.indexOf(a)&&r.push(a);return r}}},function(t,e,i){var n=i(2);t.exports=function(t){var e=t.plugins.getDefaultScenePlugins(),i=n(t.settings,"plugins",!1);return Array.isArray(i)?i:e||[]}},function(t,e,i){var n=i(144),s=i(6),r=i(127),a=i(978),o={create:function(t){return"string"==typeof t?t={key:t}:void 0===t&&(t={}),{status:n.PENDING,key:s(t,"key",""),active:s(t,"active",!1),visible:s(t,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:s(t,"pack",!1),cameras:s(t,"cameras",null),map:s(t,"map",r(a,s(t,"mapAdd",{}))),physics:s(t,"physics",{}),loader:s(t,"loader",{}),plugins:s(t,"plugins",!1),input:s(t,"input",{})}}};t.exports=o},function(t,e,i){var n=i(31),s=i(423),r=i(0),a=i(38),o=i(33),h=i(9),l=i(106),c=i(22),u=i(388),d=i(6),f=i(425),p=i(206),g=new r({Extends:h,initialize:function(t){h.call(this),this.game=t,this.name="TextureManager",this.list={},this._tempCanvas=n.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,t.events.once(c.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(l.LOAD,this.updatePending,this),this.on(l.ERROR,this.updatePending,this);var t=this.game.config;this.addBase64("__DEFAULT",t.defaultImage),this.addBase64("__MISSING",t.missingImage),this.addBase64("__WHITE",t.whiteImage),this.game.events.once(c.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,0===this._pending&&(this.off(l.LOAD),this.off(l.ERROR),this.emit(l.READY))},checkKey:function(t){return!this.exists(t)||(console.error("Texture key already in use: "+t),!1)},remove:function(t){if("string"==typeof t){if(!this.exists(t))return console.warn("No texture found matching key: "+t),this;t=this.get(t)}return this.list.hasOwnProperty(t.key)&&(t.destroy(),this.emit(l.REMOVE,t.key)),this},removeKey:function(t){return this.list.hasOwnProperty(t)&&delete this.list[t],this},addBase64:function(t,e){var i,n;return this.checkKey(t)&&(i=this,(n=new Image).onerror=function(){i.emit(l.ERROR,t)},n.onload=function(){var e=i.create(t,n);f.Image(e,0),i.emit(l.ADD,t,e),i.emit(l.LOAD,t,e)},n.src=e),this},getBase64:function(t,e,i,s){void 0===i&&(i="image/png"),void 0===s&&(s=.92);var r,a,o="",h=this.getFrame(t,e);return h&&(h.source.isRenderTexture||h.source.isGLTexture)?console.warn("Cannot getBase64 from WebGL Texture"):h&&(r=h.canvasData,(a=n.create2D(this,r.width,r.height)).getContext("2d").drawImage(h.source.image,r.x,r.y,r.width,r.height,0,0,r.width,r.height),o=a.toDataURL(i,s),n.remove(a)),o},addImage:function(t,e,i){var n=null;return this.checkKey(t)&&(n=this.create(t,e),f.Image(n,0),i&&n.setDataSource(i),this.emit(l.ADD,t,n)),n},addGLTexture:function(t,e,i,n){var s=null;return this.checkKey(t)&&(void 0===i&&(i=e.width),void 0===n&&(n=e.height),(s=this.create(t,e,i,n)).add("__BASE",0,0,0,i,n),this.emit(l.ADD,t,s)),s},addRenderTexture:function(t,e){var i=null;return this.checkKey(t)&&((i=this.create(t,e)).add("__BASE",0,0,0,e.width,e.height),this.emit(l.ADD,t,i)),i},generate:function(t,e){if(this.checkKey(t)){var i=n.create(this,1,1);return e.canvas=i,u(e),this.addCanvas(t,i)}return null},createCanvas:function(t,e,i){if(void 0===e&&(e=256),void 0===i&&(i=256),this.checkKey(t)){var s=n.create(this,e,i,o.CANVAS,!0);return this.addCanvas(t,s)}return null},addCanvas:function(t,e,i){void 0===i&&(i=!1);var n=null;return i?n=new s(this,t,e,e.width,e.height):this.checkKey(t)&&(n=new s(this,t,e,e.width,e.height),this.list[t]=n,this.emit(l.ADD,t,n)),n},addAtlas:function(t,e,i,n){return Array.isArray(i.textures)||Array.isArray(i.frames)?this.addAtlasJSONArray(t,e,i,n):this.addAtlasJSONHash(t,e,i,n)},addAtlasJSONArray:function(t,e,i,n){var s=null;if(this.checkKey(t)){if(s=this.create(t,e),Array.isArray(i))for(var r=1===i.length,a=0;a<s.source.length;a++){var o=r?i[0]:i[a];f.JSONArray(s,a,o)}else f.JSONArray(s,0,i);n&&s.setDataSource(n),this.emit(l.ADD,t,s)}return s},addAtlasJSONHash:function(t,e,i,n){var s=null;if(this.checkKey(t)){if(s=this.create(t,e),Array.isArray(i))for(var r=0;r<i.length;r++)f.JSONHash(s,r,i[r]);else f.JSONHash(s,0,i);n&&s.setDataSource(n),this.emit(l.ADD,t,s)}return s},addAtlasXML:function(t,e,i,n){var s=null;return this.checkKey(t)&&(s=this.create(t,e),f.AtlasXML(s,0,i),n&&s.setDataSource(n),this.emit(l.ADD,t,s)),s},addUnityAtlas:function(t,e,i,n){var s=null;return this.checkKey(t)&&(s=this.create(t,e),f.UnityYAML(s,0,i),n&&s.setDataSource(n),this.emit(l.ADD,t,s)),s},addSpriteSheet:function(t,e,i){var n,s,r=null;return this.checkKey(t)&&(n=(r=this.create(t,e)).source[0].width,s=r.source[0].height,f.SpriteSheet(r,0,0,0,n,s,i),this.emit(l.ADD,t,r)),r},addSpriteSheetFromAtlas:function(t,e){if(!this.checkKey(t))return null;var i=d(e,"atlas",null),n=d(e,"frame",null);if(i&&n){var s=this.get(i).get(n);if(s){var r=this.create(t,s.source.image);return s.trimmed?f.SpriteSheetFromAtlas(r,s,e):f.SpriteSheet(r,0,s.cutX,s.cutY,s.cutWidth,s.cutHeight,e),this.emit(l.ADD,t,r),r}}},create:function(t,e,i,n){var s=null;return this.checkKey(t)&&(s=new p(this,t,e,i,n),this.list[t]=s),s},exists:function(t){return this.list.hasOwnProperty(t)},get:function(t){return void 0===t&&(t="__DEFAULT"),this.list[t]?this.list[t]:t instanceof p?t:this.list.__MISSING},cloneFrame:function(t,e){if(this.list[t])return this.list[t].get(e).clone()},getFrame:function(t,e){if(this.list[t])return this.list[t].get(e)},getTextureKeys:function(){var t=[];for(var e in this.list)"__DEFAULT"!==e&&"__MISSING"!==e&&t.push(e);return t},getPixel:function(t,e,i,n){var s=this.getFrame(i,n);if(s){t-=s.x,e-=s.y;var r=s.data.cut;if(t+=r.x,e+=r.y,t>=r.x&&t<r.r&&e>=r.y&&e<r.b){var o=this._tempContext;o.clearRect(0,0,1,1),o.drawImage(s.source.image,t,e,1,1,0,0,1,1);var h=o.getImageData(0,0,1,1);return new a(h.data[0],h.data[1],h.data[2],h.data[3])}}return null},getPixelAlpha:function(t,e,i,n){var s=this.getFrame(i,n);if(s){t-=s.x,e-=s.y;var r=s.data.cut;if(t+=r.x,e+=r.y,t>=r.x&&t<r.r&&e>=r.y&&e<r.b){var a=this._tempContext;return a.clearRect(0,0,1,1),a.drawImage(s.source.image,t,e,1,1,0,0,1,1),a.getImageData(0,0,1,1).data[3]}}return null},setTexture:function(t,e,i){return this.list[e]&&(t.texture=this.list[e],t.frame=t.texture.get(i)),t},renameTexture:function(t,e){var i=this.get(t);return!(!i||t===e||(i.key=e,this.list[e]=i,delete this.list[t],0))},each:function(t,e){for(var i=[null],n=1;n<arguments.length;n++)i.push(arguments[n]);for(var s in this.list)i[0]=this.list[s],t.apply(e,i)},destroy:function(){for(var t in this.list)this.list[t].destroy();this.list={},this.game=null,n.remove(this._tempCanvas)}});t.exports=g},function(t,e,i){var n=i(0),s=i(18),r=i(38),a=i(33),o=i(138),h=i(206),l=new n({Extends:h,initialize:function(t,e,i,n,s){h.call(this,t,e,i,n,s),this.add("__BASE",0,0,0,n,s),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=n,this.height=s,this.imageData=this.context.getImageData(0,0,n,s),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===a.WEBGL&&this.refresh(),this},draw:function(t,e,i){return this.context.drawImage(i,t,e),this.update()},drawFrame:function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var s=this.manager.getFrame(t,e);if(s){var r=s.canvasData,a=s.cutWidth,o=s.cutHeight,h=s.source.resolution;return this.context.drawImage(s.source.image,r.x,r.y,a,o,i,n,a/h,o/h),this.update()}return this},setPixel:function(t,e,i,n,s,r){var a;return void 0===r&&(r=255),t=Math.abs(Math.floor(t)),e=Math.abs(Math.floor(e)),-1<this.getIndex(t,e)&&((a=this.context.getImageData(t,e,1,1)).data[0]=i,a.data[1]=n,a.data[2]=s,a.data[3]=r,this.context.putImageData(a,t,e)),this},putData:function(t,e,i,n,s,r,a){return void 0===n&&(n=0),void 0===s&&(s=0),void 0===r&&(r=t.width),void 0===a&&(a=t.height),this.context.putImageData(t,e,i,n,s,r,a),this},getData:function(t,e,i,n){return t=s(Math.floor(t),0,this.width-1),e=s(Math.floor(e),0,this.height-1),i=s(i,1,this.width-t),n=s(n,1,this.height-e),this.context.getImageData(t,e,i,n)},getPixel:function(t,e,i){i=i||new r;var n,s,a,o,h,l=this.getIndex(t,e);return-1<l&&(s=(n=this.data)[l+0],a=n[l+1],o=n[l+2],h=n[l+3],i.setTo(s,a,o,h)),i},getPixels:function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.width),void 0===n&&(n=i),t=Math.abs(Math.round(t)),e=Math.abs(Math.round(e));for(var a=s(t,0,this.width),o=s(t+i,0,this.width),h=s(e,0,this.height),l=s(e+n,0,this.height),c=new r,u=[],d=h;d<l;d++){for(var f=[],p=a;p<o;p++)c=this.getPixel(p,d,c),f.push({x:p,y:d,color:c.color,alpha:c.alphaGL});u.push(f)}return u},getIndex:function(t,e){return t=Math.abs(Math.round(t)),e=Math.abs(Math.round(e)),t<this.width&&e<this.height?4*(t+e*this.width):-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(t,e,i,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.width),void 0===n&&(n=this.height),this.context.clearRect(t,e,i,n),this.update()},setSize:function(t,e){return void 0===e&&(e=t),t===this.width&&e===this.height||(this.canvas.width=t,this.canvas.height=e,this._source.width=t,this._source.height=e,this._source.isPowerOf2=o(t,e),this.frames.__BASE.setSize(t,e,0,0),this.width=t,this.height=e,this.refresh()),this},destroy:function(){h.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});t.exports=l},function(t,e,i){var n=i(31),s=i(0),r=i(138),a=i(168),o=new s({initialize:function(t,e,i,n,s){void 0===s&&(s=!1);var o=t.manager.game;this.renderer=o.renderer,this.texture=t,this.source=e,this.image=e,this.compressionAlgorithm=null,this.resolution=1,this.width=i||e.naturalWidth||e.videoWidth||e.width||0,this.height=n||e.naturalHeight||e.videoHeight||e.height||0,this.scaleMode=a.DEFAULT,this.isCanvas=e instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&e instanceof HTMLVideoElement,this.isRenderTexture="RenderTexture"===e.type,this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&e instanceof WebGLTexture,this.isPowerOf2=r(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=s,this.init(o)},init:function(t){var e=this.renderer;e&&(e.gl?this.isCanvas?this.glTexture=e.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=e.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=e.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=e.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),t.config.antialias||this.setFilter(1)},setFilter:function(t){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,t),this.scaleMode=t},setFlipY:function(t){return void 0===t&&(t=!0),this.flipY=t,this},update:function(){var t=this.renderer.gl;t&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):t&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&n.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});t.exports=o},function(t,e,i){t.exports={AtlasXML:i(979),Canvas:i(980),Image:i(981),JSONArray:i(982),JSONHash:i(983),SpriteSheet:i(984),SpriteSheetFromAtlas:i(985),UnityYAML:i(986)}},function(t,e,i){var n=i(427),s=i(430),r=i(432),a={create:function(t){var e=t.config.audio,i=t.device.audio;return new(e.noAudio||!i.webAudio&&!i.audioData?s:i.webAudio&&!e.disableWebAudio?r:n)(t)}};t.exports=a},function(t,e,i){var n=i(145),s=i(0),r=i(70),a=i(429),o=new s({Extends:n,initialize:function(t){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,n.call(this,t)},add:function(t,e){var i=new a(this,t,e);return this.sounds.push(i),i},unlock:function(){this.locked=!1;var t,e,i,n=this;this.game.cache.audio.entries.each((function(t,e){for(var i=0;i<e.length;i++)if("true"===e[i].dataset.locked)return!(n.locked=!0);return!0})),this.locked&&(t=!1,e=function(){t=!0},i=function(){var s,r;t?t=!1:(document.body.removeEventListener("touchmove",e),document.body.removeEventListener("touchend",i),s=[],n.game.cache.audio.entries.each((function(t,e){for(var i=0;i<e.length;i++){var n=e[i];"true"===n.dataset.locked&&s.push(n)}return!0})),0!==s.length&&((r=s[s.length-1]).oncanplaythrough=function(){r.oncanplaythrough=null,s.forEach((function(t){t.dataset.locked="false"})),n.unlocked=!0},s.forEach((function(t){t.load()}))))},this.once(r.UNLOCKED,(function(){for(this.forEachActiveSound((function(t){null===t.currentMarker&&0===t.duration&&(t.duration=t.tags[0].duration),t.totalDuration=t.tags[0].duration}));this.lockedActionsQueue.length;){var t=this.lockedActionsQueue.shift();t.sound[t.prop].apply?t.sound[t.prop].apply(t.sound,t.value||[]):t.sound[t.prop]=t.value}}),this),document.body.addEventListener("touchmove",e,!1),document.body.addEventListener("touchend",i,!1))},onBlur:function(){this.forEachActiveSound((function(t){t.isPlaying&&(this.onBlurPausedSounds.push(t),t.onBlur())}))},onFocus:function(){this.onBlurPausedSounds.forEach((function(t){t.onFocus()})),this.onBlurPausedSounds.length=0},destroy:function(){n.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(t,e,i){return"true"===t.tags[0].dataset.locked&&(this.lockedActionsQueue.push({sound:t,prop:e,value:i}),!0)},setMute:function(t){return this.mute=t,this},mute:{get:function(){return this._mute},set:function(t){this._mute=t,this.forEachActiveSound((function(t){t.updateMute()})),this.emit(r.GLOBAL_MUTE,this,t)}},setVolume:function(t){return this.volume=t,this},volume:{get:function(){return this._volume},set:function(t){this._volume=t,this.forEachActiveSound((function(t){t.updateVolume()})),this.emit(r.GLOBAL_VOLUME,this,t)}}});t.exports=o},function(t,e,i){var n=i(78);t.exports=function(t,e,i,s,r){if(void 0===s&&(s=0),void 0===r&&(r=t.length),n(t,s,r))for(var a=s;a<r;a++){var o=t[a];if(!e||e&&void 0===i&&o.hasOwnProperty(e)||e&&void 0!==i&&o[e]===i)return o}return null}},function(t,e,i){var n=i(146),s=i(0),r=i(70),a=i(18),o=new s({Extends:n,initialize:function(t,e,i){if(void 0===i&&(i={}),this.tags=t.game.cache.audio.get(e),!this.tags)throw new Error('There is no audio asset with key "'+e+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,n.call(this,t,e,i)},play:function(t,e){return!(this.manager.isLocked(this,"play",[t,e])||!n.prototype.play.call(this,t,e)||!this.pickAndPlayAudioTag()||(this.emit(r.PLAY,this),0))},pause:function(){return!(this.manager.isLocked(this,"pause")||0<this.startTime||!n.prototype.pause.call(this)||(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(r.PAUSE,this),0))},resume:function(){return!(this.manager.isLocked(this,"resume")||0<this.startTime||!n.prototype.resume.call(this)||!this.pickAndPlayAudioTag()||(this.emit(r.RESUME,this),0))},stop:function(){return!this.manager.isLocked(this,"stop")&&!!n.prototype.stop.call(this)&&(this.stopAndReleaseAudioTag(),this.emit(r.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var t=this.currentConfig.seek,e=this.currentConfig.delay,i=(this.currentMarker?this.currentMarker.start:0)+t;return this.previousTime=i,this.audio.currentTime=i,this.applyConfig(),0===e?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+1e3*e,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var t=0;t<this.tags.length;t++){var e=this.tags[t];if("false"===e.dataset.used)return e.dataset.used="true",this.audio=e,!0}if(!this.manager.override)return!1;var i=[];this.manager.forEachActiveSound((function(t){t.key===this.key&&t.audio&&i.push(t)}),this),i.sort((function(t,e){return t.loop===e.loop?e.seek/e.duration-t.seek/t.duration:t.loop?1:-1}));var n=i[0];return this.audio=n.audio,n.reset(),n.audio=null,n.startTime=0,!(n.previousTime=0)},playCatchPromise:function(){var t=this.audio.play();t&&t.catch((function(t){console.warn(t)}))},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){n.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(t){if(this.isPlaying)if(0<this.startTime)this.startTime<t-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,t-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());else{var e=this.currentMarker?this.currentMarker.start:0,i=e+this.duration,n=this.audio.currentTime;if(this.currentConfig.loop)n>=i-this.manager.loopEndOffset?(this.audio.currentTime=e+Math.max(0,n-i),n=this.audio.currentTime):n<e&&(this.audio.currentTime+=e,n=this.audio.currentTime),n<this.previousTime&&this.emit(r.LOOPED,this);else if(i<=n)return this.reset(),this.stopAndReleaseAudioTag(),void this.emit(r.COMPLETE,this);this.previousTime=n}},destroy:function(){n.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=a(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){n.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(t){this.currentConfig.mute=t,this.manager.isLocked(this,"mute",t)||(this.updateMute(),this.emit(r.MUTE,this,t))}},setMute:function(t){return this.mute=t,this},volume:{get:function(){return this.currentConfig.volume},set:function(t){this.currentConfig.volume=t,this.manager.isLocked(this,"volume",t)||(this.updateVolume(),this.emit(r.VOLUME,this,t))}},setVolume:function(t){return this.volume=t,this},rate:{get:function(){return this.currentConfig.rate},set:function(t){this.currentConfig.rate=t,this.manager.isLocked(this,r.RATE,t)||(this.calculateRate(),this.emit(r.RATE,this,t))}},setRate:function(t){return this.rate=t,this},detune:{get:function(){return this.currentConfig.detune},set:function(t){this.currentConfig.detune=t,this.manager.isLocked(this,r.DETUNE,t)||(this.calculateRate(),this.emit(r.DETUNE,this,t))}},setDetune:function(t){return this.detune=t,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(t){this.manager.isLocked(this,"seek",t)||0<this.startTime||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.isPlaying?(this.previousTime=t,this.audio.currentTime=t):this.isPaused&&(this.currentConfig.seek=t),this.emit(r.SEEK,this,t))}},setSeek:function(t){return this.seek=t,this},loop:{get:function(){return this.currentConfig.loop},set:function(t){this.currentConfig.loop=t,this.manager.isLocked(this,"loop",t)||(this.audio&&(this.audio.loop=t),this.emit(r.LOOP,this,t))}},setLoop:function(t){return this.loop=t,this},pan:{get:function(){return this.currentConfig.pan},set:function(t){this.currentConfig.pan=t,this.emit(r.PAN,this,t)}},setPan:function(t){return this.pan=t,this}});t.exports=o},function(t,e,i){var n=i(145),s=i(0),r=i(9),a=i(431),o=i(1),h=new s({Extends:r,initialize:function(t){r.call(this),this.game=t,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(t,e){var i=new a(this,t,e);return this.sounds.push(i),i},addAudioSprite:function(t,e){var i=this.add(t,e);return i.spritemap={},i},play:function(t,e){return!1},playAudioSprite:function(t,e,i){return!1},remove:function(t){return n.prototype.remove.call(this,t)},removeByKey:function(t){return n.prototype.removeByKey.call(this,t)},pauseAll:o,resumeAll:o,stopAll:o,update:o,setRate:o,setDetune:o,setMute:o,setVolume:o,forEachActiveSound:function(t,e){n.prototype.forEachActiveSound.call(this,t,e)},destroy:function(){n.prototype.destroy.call(this)}});t.exports=h},function(t,e,i){function n(){return!1}function s(){return this}var r=i(146),a=i(0),o=i(9),h=i(17),l=new a({Extends:o,initialize:function(t,e,i){void 0===i&&(i={}),o.call(this),this.manager=t,this.key=e,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=h({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},i),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:n,updateMarker:n,removeMarker:function(){return null},play:n,pause:n,resume:n,stop:n,destroy:function(){r.prototype.destroy.call(this)},setMute:s,setVolume:s,setRate:s,setDetune:s,setSeek:s,setLoop:s,setPan:s});t.exports=l},function(t,e,i){var n=i(433),s=i(145),r=i(0),a=i(70),o=i(22),h=i(434),l=new r({Extends:s,initialize:function(t){this.context=this.createAudioContext(t),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked="suspended"===this.context.state&&("ontouchstart"in window||"onclick"in window),s.call(this,t),this.locked&&t.isBooted?this.unlock():t.events.once(o.BOOT,this.unlock,this)},createAudioContext:function(t){var e=t.config.audio;return e.context?(e.context.resume(),e.context):window.hasOwnProperty("AudioContext")?new AudioContext:window.hasOwnProperty("webkitAudioContext")?new window.webkitAudioContext:void 0},setAudioContext:function(t){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=t,this.masterMuteNode=t.createGain(),this.masterVolumeNode=t.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(t.destination),this.destination=this.masterMuteNode,this},add:function(t,e){var i=new h(this,t,e);return this.sounds.push(i),i},decodeAudio:function(t,e){for(var i=Array.isArray(t)?t:[{key:t,data:e}],s=this.game.cache.audio,r=i.length,o=0;o<i.length;o++){var h=i[o],l=h.key,c=h.data;"string"==typeof c&&(c=n(c));var u=function(t,e){s.add(t,e),this.emit(a.DECODED,t),0==--r&&this.emit(a.DECODED_ALL)}.bind(this,l),d=function(t,e){console.error("Error decoding audio: "+t+" - ",e?e.message:""),0==--r&&this.emit(a.DECODED_ALL)}.bind(this,l);this.context.decodeAudioData(c,u,d)}},unlock:function(){function t(){var n;e.context&&i&&(n=i.removeEventListener,e.context.resume().then((function(){n("touchstart",t),n("touchend",t),n("click",t),n("keydown",t),e.unlocked=!0}),(function(){n("touchstart",t),n("touchend",t),n("click",t),n("keydown",t)})))}var e=this,i=document.body;i&&(i.addEventListener("touchstart",t,!1),i.addEventListener("touchend",t,!1),i.addEventListener("click",t,!1),i.addEventListener("keydown",t,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var t=this.context;"suspended"!==t.state&&"interrupted"!==t.state||this.locked||t.resume()},update:function(t,e){s.prototype.update.call(this,t,e);var i=this.context;i&&"interrupted"===i.state&&i.resume()},destroy:function(){var t;this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context?this.context.suspend():(t=this).context.close().then((function(){t.context=null})),s.prototype.destroy.call(this)},setMute:function(t){return this.mute=t,this},mute:{get:function(){return 0===this.masterMuteNode.gain.value},set:function(t){this.masterMuteNode.gain.setValueAtTime(t?0:1,0),this.emit(a.GLOBAL_MUTE,this,t)}},setVolume:function(t){return this.volume=t,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(t){this.masterVolumeNode.gain.setValueAtTime(t,0),this.emit(a.GLOBAL_VOLUME,this,t)}}});t.exports=l},function(t,e){for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),s=0;s<i.length;s++)n[i.charCodeAt(s)]=s;t.exports=function(t){var e,i,s,r,a=(t=t.substr(t.indexOf(",")+1)).length,o=.75*a,h=0;"="===t[a-1]&&(o--,"="===t[a-2]&&o--);for(var l=new ArrayBuffer(o),c=new Uint8Array(l),u=0;u<a;u+=4)e=n[t.charCodeAt(u)],i=n[t.charCodeAt(u+1)],s=n[t.charCodeAt(u+2)],r=n[t.charCodeAt(u+3)],c[h++]=e<<2|i>>4,c[h++]=(15&i)<<4|s>>2,c[h++]=(3&s)<<6|63&r;return l}},function(t,e,i){var n=i(146),s=i(0),r=i(70),a=new s({Extends:n,initialize:function(t,e,i){if(void 0===i&&(i={}),this.audioBuffer=t.game.cache.audio.get(e),!this.audioBuffer)throw new Error('Audio key "'+e+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=t.context.createGain(),this.volumeNode=t.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),t.context.createStereoPanner?(this.pannerNode=t.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(t.destination)):this.volumeNode.connect(t.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,n.call(this,t,e,i)},play:function(t,e){return!!n.prototype.play.call(this,t,e)&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(r.PLAY,this),!0)},pause:function(){return!(this.manager.context.currentTime<this.startTime||!n.prototype.pause.call(this)||(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(r.PAUSE,this),0))},resume:function(){return!(this.manager.context.currentTime<this.startTime||!n.prototype.resume.call(this)||(this.createAndStartBufferSource(),this.emit(r.RESUME,this),0))},stop:function(){return!!n.prototype.stop.call(this)&&(this.stopAndRemoveBufferSource(),this.emit(r.STOP,this),!0)},createAndStartBufferSource:function(){var t=this.currentConfig.seek,e=this.currentConfig.delay,i=this.manager.context.currentTime+e,n=(this.currentMarker?this.currentMarker.start:0)+t,s=this.duration-t;this.playTime=i-t,this.startTime=i,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,i),Math.max(0,n),Math.max(0,s)),this.resetConfig()},createAndStartLoopBufferSource:function(){var t=this.getLoopTime(),e=this.currentMarker?this.currentMarker.start:0,i=this.duration;this.loopTime=t,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,t),Math.max(0,e),Math.max(0,i))},createBufferSource:function(){var t=this,e=this.manager.context.createBufferSource();return e.buffer=this.audioBuffer,e.connect(this.muteNode),e.onended=function(e){e.target===t.source&&(t.currentConfig.loop?t.hasLooped=!0:t.hasEnded=!0)},e},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),n.prototype.applyConfig.call(this)},update:function(){this.hasEnded?(this.hasEnded=!1,n.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(r.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(r.LOOPED,this))},destroy:function(){n.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){n.prototype.calculateRate.call(this);var t=this.manager.context.currentTime;this.source&&"number"==typeof this.totalRate&&this.source.playbackRate.setValueAtTime(this.totalRate,t),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,t)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var t=0,e=0;e<this.rateUpdates.length;e++)t+=((e<this.rateUpdates.length-1?this.rateUpdates[e+1].time:this.manager.context.currentTime-this.playTime)-this.rateUpdates[e].time)*this.rateUpdates[e].rate;return t},getLoopTime:function(){for(var t=0,e=0;e<this.rateUpdates.length-1;e++)t+=(this.rateUpdates[e+1].time-this.rateUpdates[e].time)*this.rateUpdates[e].rate;var i=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+i.time+(this.duration-t)/i.rate},rate:{get:function(){return this.currentConfig.rate},set:function(t){this.currentConfig.rate=t,this.calculateRate(),this.emit(r.RATE,this,t)}},setRate:function(t){return this.rate=t,this},detune:{get:function(){return this.currentConfig.detune},set:function(t){this.currentConfig.detune=t,this.calculateRate(),this.emit(r.DETUNE,this,t)}},setDetune:function(t){return this.detune=t,this},mute:{get:function(){return 0===this.muteNode.gain.value},set:function(t){this.currentConfig.mute=t,this.muteNode.gain.setValueAtTime(t?0:1,0),this.emit(r.MUTE,this,t)}},setMute:function(t){return this.mute=t,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(t){this.currentConfig.volume=t,this.volumeNode.gain.setValueAtTime(t,0),this.emit(r.VOLUME,this,t)}},setVolume:function(t){return this.volume=t,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(t){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.currentConfig.seek=t,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(r.SEEK,this,t))}},setSeek:function(t){return this.seek=t,this},loop:{get:function(){return this.currentConfig.loop},set:function(t){this.currentConfig.loop=t,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),t&&this.createAndStartLoopBufferSource()),this.emit(r.LOOP,this,t)}},setLoop:function(t){return this.loop=t,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(t){this.currentConfig.pan=t,this.pannerNode&&this.pannerNode.pan.setValueAtTime(t,this.manager.context.currentTime),this.emit(r.PAN,this,t)}},setPan:function(t){return this.pan=t,this}});t.exports=a},function(t,e){t.exports=function(t){for(var e=t.length,i=t[0].length,n=new Array(i),s=0;s<i;s++){n[s]=new Array(e);for(var r=e-1;-1<r;r--)n[s][r]=t[r][s]}return n}},function(t,e){function i(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function n(t,e){return t<e?-1:e<t?1:0}var s=function(t,e,r,a,o){for(void 0===r&&(r=0),void 0===a&&(a=t.length-1),void 0===o&&(o=n);r<a;){var h,l,c,u,d,f,p;600<a-r&&(h=a-r+1,l=e-r+1,c=Math.log(h),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(h-u)/h)*(l-h/2<0?-1:1),f=Math.max(r,Math.floor(e-l*u/h+d)),p=Math.min(a,Math.floor(e+(h-l)*u/h+d)),s(t,e,f,p,o));var g=t[e],m=r,v=a;for(i(t,r,e),0<o(t[a],g)&&i(t,r,a);m<v;){for(i(t,m,v),m++,v--;o(t[m],g)<0;)m++;for(;0<o(t[v],g);)v--}0===o(t[r],g)?i(t,r,v):i(t,++v,a),v<=e&&(r=v+1),e<=v&&(a=v-1)}};t.exports=s},function(t,e,i){var n=i(6),s=i(131);t.exports=function(t,e,i){var r,a=n(i,"max",0),o=n(i,"qty",1),h=n(i,"random",!1),l=n(i,"randomB",!1),c=n(i,"repeat",0),u=n(i,"yoyo",!1),d=[];l&&s(e),-1===c&&(c=0===a?0:(r=t.length*e.length*o,u&&(r*=2),Math.ceil(a/r)));for(var f=0;f<=c;f++){var p=function(t,e,i){for(var n=[],s=0;s<t.length;s++)for(var r=0;r<e.length;r++)for(var a=0;a<i;a++)n.push({a:t[s],b:e[r]});return n}(t,e,o);h&&s(p),d=d.concat(p),u&&(p.reverse(),d=d.concat(p))}return a&&d.splice(a),d}},function(t,e,i){t.exports={PROCESS_QUEUE_ADD:i(1041),PROCESS_QUEUE_REMOVE:i(1042)}},function(t,e,i){var n=i(13);t.exports=function(t,e){var i,s,r,a,o,h,l,c,u,d,f=n(e,"anims",null);return null===f||("string"==typeof f?t.anims.play(f):"object"==typeof f&&(i=t.anims,(s=n(f,"key",void 0))&&(r=n(f,"startFrame",void 0),a=n(f,"delay",0),o=n(f,"repeat",0),h=n(f,"repeatDelay",0),l=n(f,"yoyo",!1),c=n(f,"play",!1),u=n(f,"delayedPlay",0),d={key:s,delay:a,repeat:o,repeatDelay:h,yoyo:l,startFrame:r},c?i.play(d):0<u?i.playAfterDelay(d,u):i.load(d)))),t}},function(t,e,i){var n=i(0),s=i(109),r=new n({initialize:function(t,e,i,n,s){this.parent=t,this.x=e,this.y=i,this.frame=n,this.data={},this.tint=16777215,this._visible=s,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(t){return void 0===t?this.frame=this.parent.frame:t instanceof s&&t.texture===this.parent.texture?this.frame=t:this.frame=this.parent.texture.get(t),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(t,e,i){return this.x=t,this.y=e,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,i&&this.setFrame(i),this},setPosition:function(t,e){return this.x=t,this.y=e,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,e){return this.flipX=t,this.flipY=e,this},setVisible:function(t){return this.visible=t,this},setAlpha:function(t){return this.alpha=t,this},setTint:function(t){return this.tint=t,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(t){this.parent.dirty|=this._visible!==t,this._visible=t}},alpha:{get:function(){return this._alpha},set:function(t){this.parent.dirty|=0<this._alpha!=0<t,this._alpha=t}}});t.exports=r},function(t,e,i){var n=i(10);t.exports=function(t,e,i){void 0===i&&(i=new n);var s=Math.min(t.x,e.x),r=Math.min(t.y,e.y),a=Math.max(t.right,e.right)-s,o=Math.max(t.bottom,e.bottom)-r;return i.setTo(s,r,a,o)}},function(t,e,i){var n=i(0),s=i(11),r=i(1055),a=i(15),o=i(7),h=i(202),l=i(20),c=i(140),u=new n({Extends:a,Mixins:[s.AlphaSingle,s.BlendMode,s.Depth,s.Origin,s.ScrollFactor,s.Transform,s.Visible,r],initialize:function(t,e,i,n,s,r){a.call(this,t,"DOMElement"),this.parent=t.sys.game.domContainer,this.cache=t.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new c,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(e,i),"string"==typeof n?"#"===n[0]?this.setElement(n.substr(1),s,r):this.createElement(n,s,r):n&&this.setElement(n,s,r),t.sys.events.on(l.SLEEP,this.handleSceneEvent,this),t.sys.events.on(l.WAKE,this.handleSceneEvent,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function(t){var e=this.node,i=e.style;e&&(i.display=t.settings.visible?"block":"none")},setSkew:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.skewX=t,this.skewY=e,this},setPerspective:function(t){return this.parent.style.perspective=t+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(t){this.parent.style.perspective=t+"px"}},addListener:function(t){if(this.node){t=t.split(" ");for(var e=0;e<t.length;e++)this.node.addEventListener(t[e],this.handler,!1)}return this},removeListener:function(t){if(this.node){t=t.split(" ");for(var e=0;e<t.length;e++)this.node.removeEventListener(t[e],this.handler)}return this},dispatchNativeEvent:function(t){this.emit(t.type,t)},createElement:function(t,e,i){return this.setElement(document.createElement(t),e,i)},setElement:function(t,e,i){var n;if(this.removeElement(),"string"==typeof t?("#"===t[0]&&(t=t.substr(1)),n=document.getElementById(t)):"object"==typeof t&&1===t.nodeType&&(n=t),!n)return this;if(this.node=n,e&&o(e))for(var s in e)n.style[s]=e[s];else"string"==typeof e&&(n.style=e);return n.style.zIndex="0",n.style.display="inline",n.style.position="absolute",(n.phaser=this).parent&&this.parent.appendChild(n),i&&(n.innerText=i),this.updateSize()},createFromCache:function(t,e){var i=this.cache.get(t);return i&&this.createFromHTML(i,e),this},createFromHTML:function(t,e){void 0===e&&(e="div"),this.removeElement();var i=document.createElement(e);return(this.node=i).style.zIndex="0",i.style.display="inline",i.style.position="absolute",(i.phaser=this).parent&&this.parent.appendChild(i),i.innerHTML=t,this.updateSize()},removeElement:function(){return this.node&&(h(this.node),this.node=null),this},updateSize:function(){var t=this.node,e=t.getBoundingClientRect();return this.width=t.clientWidth,this.height=t.clientHeight,this.displayWidth=e.width||0,this.displayHeight=e.height||0,this},getChildByProperty:function(t,e){if(this.node)for(var i=this.node.querySelectorAll("*"),n=0;n<i.length;n++)if(i[n][t]===e)return i[n];return null},getChildByID:function(t){return this.getChildByProperty("id",t)},getChildByName:function(t){return this.getChildByProperty("name",t)},setClassName:function(t){return this.node&&(this.node.className=t,this.updateSize()),this},setText:function(t){return this.node&&(this.node.innerText=t,this.updateSize()),this},setHTML:function(t){return this.node&&(this.node.innerHTML=t,this.updateSize()),this},preUpdate:function(){var t=this.parentContainer,e=this.node;e&&t&&!t.willRender()&&(e.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(l.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(l.WAKE,this.handleSceneEvent,this)}});t.exports=u},function(t,e,i){var n=i(1056),s=i(15),r=i(25),a=new r,o=new r,h=new r;t.exports=function(t,e,i,r){var l,c,u,d,f,p,g,m,v,y,_;e.node&&(l=e.node.style,c=e.scene.sys.settings,!l||!c.visible||s.RENDER_MASK!==e.renderFlags||0!==e.cameraFilter&&e.cameraFilter&i.id||e.parentContainer&&!e.parentContainer.willRender()?l.display="none":(u=e.parentContainer,d=i.alpha*e.alpha,u&&(d*=u.alpha),f=a,p=o,g=h,v=m=0,_=y="0%",r?(m=e.width*e.scaleX*e.originX,v=e.height*e.scaleY*e.originY,p.applyITRS(e.x-m,e.y-v,e.rotation,e.scaleX,e.scaleY),f.copyFrom(i.matrix),f.multiplyWithOffset(r,-i.scrollX*e.scrollFactorX,-i.scrollY*e.scrollFactorY),p.e=e.x-m,p.f=e.y-v):(m=e.width*e.originX,v=e.height*e.originY,p.applyITRS(e.x-m,e.y-v,e.rotation,e.scaleX,e.scaleY),f.copyFrom(i.matrix),y=100*e.originX+"%",_=100*e.originY+"%",p.e-=i.scrollX*e.scrollFactorX,p.f-=i.scrollY*e.scrollFactorY),f.multiply(p,g),e.transformOnly||(l.display="block",l.opacity=d,l.zIndex=e._depth,l.pointerEvents=e.pointerEvents,l.mixBlendMode=n[e._blendMode]),l.transform=g.getCSSMatrix()+" skew("+e.skewX+"rad, "+e.skewY+"rad) rotate3d("+e.rotate3d.x+","+e.rotate3d.y+","+e.rotate3d.z+","+e.rotate3d.w+e.rotate3dAngle+")",l.transformOrigin=y+" "+_))}},function(t,e,i){var n=i(0),s=i(11),r=i(15),a=i(1060),o=new n({Extends:r,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.Flip,s.Origin,s.ScrollFactor,s.Size,s.Texture,s.Tint,s.Transform,s.Visible,a],initialize:function(t){r.call(this,t,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});t.exports=o},function(t,e,i){var n=i(218),s=i(98),r=i(14),a=i(4);t.exports=function(t,e,i){void 0===i&&(i=new a);var o=s(e,0,r.PI2);return n(t,o,i)}},function(t,e,i){var n=i(447),s=i(218),r=i(98),a=i(14);t.exports=function(t,e,i,o){void 0===o&&(o=[]),!e&&0<i&&(e=n(t)/i);for(var h=0;h<e;h++){var l=r(h/e,0,a.PI2);o.push(s(t,l))}return o}},function(t,e){t.exports=function(t){var e=t.width/2,i=t.height/2,n=Math.pow(e-i,2)/Math.pow(e+i,2);return Math.PI*(e+i)*(1+3*n/(10+Math.sqrt(4-3*n)))}},function(t,e,i){var n=i(217),s=i(30);t.exports=function(t,e,i,r,a,o){var h=e.commandBuffer,l=h.length,c=a||t.currentContext;if(0!==l&&s(t,c,e,i,r)){i.addToRenderList(e);var u,d,f,p,g,m=0,v=0,y=0;c.beginPath();for(var _=0;_<l;++_)switch(h[_]){case n.ARC:c.arc(h[_+1],h[_+2],h[_+3],h[_+4],h[_+5],h[_+6]),_+=7;break;case n.LINE_STYLE:g=h[_+1],f=h[_+2],u=h[_+3],m=(16711680&f)>>>16,v=(65280&f)>>>8,y=255&f,c.strokeStyle="rgba("+m+","+v+","+y+","+u+")",c.lineWidth=g,_+=3;break;case n.FILL_STYLE:p=h[_+1],d=h[_+2],m=(16711680&p)>>>16,v=(65280&p)>>>8,y=255&p,c.fillStyle="rgba("+m+","+v+","+y+","+d+")",_+=2;break;case n.BEGIN_PATH:c.beginPath();break;case n.CLOSE_PATH:c.closePath();break;case n.FILL_PATH:o||c.fill();break;case n.STROKE_PATH:o||c.stroke();break;case n.FILL_RECT:o?c.rect(h[_+1],h[_+2],h[_+3],h[_+4]):c.fillRect(h[_+1],h[_+2],h[_+3],h[_+4]),_+=4;break;case n.FILL_TRIANGLE:c.beginPath(),c.moveTo(h[_+1],h[_+2]),c.lineTo(h[_+3],h[_+4]),c.lineTo(h[_+5],h[_+6]),c.closePath(),o||c.fill(),_+=6;break;case n.STROKE_TRIANGLE:c.beginPath(),c.moveTo(h[_+1],h[_+2]),c.lineTo(h[_+3],h[_+4]),c.lineTo(h[_+5],h[_+6]),c.closePath(),o||c.stroke(),_+=6;break;case n.LINE_TO:c.lineTo(h[_+1],h[_+2]),_+=2;break;case n.MOVE_TO:c.moveTo(h[_+1],h[_+2]),_+=2;break;case n.LINE_FX_TO:c.lineTo(h[_+1],h[_+2]),_+=5;break;case n.MOVE_FX_TO:c.moveTo(h[_+1],h[_+2]),_+=5;break;case n.SAVE:c.save();break;case n.RESTORE:c.restore();break;case n.TRANSLATE:c.translate(h[_+1],h[_+2]),_+=2;break;case n.SCALE:c.scale(h[_+1],h[_+2]),_+=2;break;case n.ROTATE:c.rotate(h[_+1]),_+=1;break;case n.GRADIENT_FILL_STYLE:_+=5;break;case n.GRADIENT_LINE_STYLE:_+=6}c.restore()}}},function(t,e,i){var n=i(0),s=i(137),r=i(80),a=i(2),o=i(68),h=new n({initialize:function(t,e,i,n){void 0===n&&(n=!1),this.propertyKey=e,this.propertyValue=i,this.defaultValue=i,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=n,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(t)},loadConfig:function(t,e){void 0===t&&(t={}),e&&(this.propertyKey=e),this.propertyValue=a(t,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(t){return this.propertyValue=t,this.setMethods()},setMethods:function(){var t,e,i,n=this.propertyValue,s=typeof n;return this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,"number"==s?(this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate):Array.isArray(n)?this.onEmit=this.randomStaticValueEmit:"function"==s?this.emitOnly?this.onEmit=n:this.onUpdate=n:"object"==s&&this.hasBoth(n,"start","end")?(this.start=n.start,this.end=n.end,(t=this.has(n,"random"))&&(this.onEmit=this.randomRangedValueEmit),this.has(n,"steps")?(this.steps=n.steps,this.counter=this.start,this.onEmit=this.steppedEmit):(e=this.has(n,"ease")?n.ease:"Linear",this.ease=r(e,n.easeParams),t||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate)):"object"==s&&this.hasBoth(n,"min","max")?(this.start=n.min,this.end=n.max,this.onEmit=this.randomRangedValueEmit):"object"==s&&this.has(n,"random")?(i=n.random,Array.isArray(i)&&(this.start=i[0],this.end=i[1]),this.onEmit=this.randomRangedValueEmit):"object"==s&&this.hasEither(n,"onEmit","onUpdate")&&(this.has(n,"onEmit")&&(this.onEmit=n.onEmit),this.has(n,"onUpdate")&&(this.onUpdate=n.onUpdate)),this},has:function(t,e){return t.hasOwnProperty(e)},hasBoth:function(t,e,i){return t.hasOwnProperty(e)&&t.hasOwnProperty(i)},hasEither:function(t,e,i){return t.hasOwnProperty(e)||t.hasOwnProperty(i)},defaultEmit:function(t,e,i){return i},defaultUpdate:function(t,e,i,n){return n},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var t=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[t]},randomRangedValueEmit:function(t,e){var i=s(this.start,this.end);return t&&t.data[e]&&(t.data[e].min=i),i},steppedEmit:function(){var t=this.counter,e=this.counter+(this.end-this.start)/this.steps;return this.counter=o(e,this.start,this.end),t},easedValueEmit:function(t,e){var i;return t&&t.data[e]&&((i=t.data[e]).min=this.start,i.max=this.end),this.start},easeValueUpdate:function(t,e,i){var n=t.data[e];return(n.max-n.min)*this.ease(i)+n.min}});t.exports=h},function(t,e,i){var n=i(0),s=i(2),r=new n({initialize:function(t,e,i,n,r){var a;"object"==typeof t?(t=s(a=t,"x",0),e=s(a,"y",0),i=s(a,"power",0),n=s(a,"epsilon",100),r=s(a,"gravity",50)):(void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=100),void 0===r&&(r=50)),this.x=t,this.y=e,this.active=!0,this._gravity=r,this._power=0,this._epsilon=0,this.power=i,this.epsilon=n},update:function(t,e){var i,n,s=this.x-t.x,r=this.y-t.y,a=s*s+r*r;0!==a&&(i=Math.sqrt(a),a<this._epsilon&&(a=this._epsilon),n=this._power*e/(a*i)*100,t.velocityX+=s*n,t.velocityY+=r*n)},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(t){this._epsilon=t*t}},power:{get:function(){return this._power/this._gravity},set:function(t){this._power=t*this._gravity}},gravity:{get:function(){return this._gravity},set:function(t){var e=this.power;this._gravity=t,this.power=e}}});t.exports=r},function(t,e,i){var n=i(0),s=i(36),r=i(50),a=new n({initialize:function(t){this.emitter=t,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return 0<this.lifeCurrent},resetPosition:function(){this.x=0,this.y=0},fire:function(t,e){var i=this.emitter;this.frame=i.getFrame(),i.emitZone&&i.emitZone.getPoint(this),this.x+=void 0===t?i.x.onEmit(this,"x"):t,this.y+=void 0===e?i.y.onEmit(this,"y"):e,this.life=i.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var n,a,o,h,l,c=i.speedX.onEmit(this,"speedX"),u=i.speedY?i.speedY.onEmit(this,"speedY"):c;i.radial?(n=s(i.angle.onEmit(this,"angle")),this.velocityX=Math.cos(n)*Math.abs(c),this.velocityY=Math.sin(n)*Math.abs(u)):i.moveTo?(a=i.moveToX.onEmit(this,"moveToX"),o=i.moveToY?i.moveToY.onEmit(this,"moveToY"):a,h=Math.atan2(o-this.y,a-this.x),l=r(this.x,this.y,a,o)/(this.life/1e3),this.velocityX=Math.cos(h)*l,this.velocityY=Math.sin(h)*l):(this.velocityX=c,this.velocityY=u),i.acceleration&&(this.accelerationX=i.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=i.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=i.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=i.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=i.delay.onEmit(this,"delay"),this.scaleX=i.scaleX.onEmit(this,"scaleX"),this.scaleY=i.scaleY?i.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=i.rotate.onEmit(this,"rotate"),this.rotation=s(this.angle),this.bounce=i.bounce.onEmit(this,"bounce"),this.alpha=i.alpha.onEmit(this,"alpha"),this.tint=i.tint.onEmit(this,"tint")},computeVelocity:function(t,e,i,n){var s=this.velocityX,r=this.velocityY,a=this.accelerationX,o=this.accelerationY,h=this.maxVelocityX,l=this.maxVelocityY;s+=t.gravityX*i,r+=t.gravityY*i,a&&(s+=a*i),o&&(r+=o*i),h<s?s=h:s<-h&&(s=-h),l<r?r=l:r<-l&&(r=-l),this.velocityX=s,this.velocityY=r;for(var c=0;c<n.length;c++)n[c].update(this,e,i)},checkBounds:function(t){var e=t.bounds,i=-this.bounce;this.x<e.x&&t.collideLeft?(this.x=e.x,this.velocityX*=i):this.x>e.right&&t.collideRight&&(this.x=e.right,this.velocityX*=i),this.y<e.y&&t.collideTop?(this.y=e.y,this.velocityY*=i):this.y>e.bottom&&t.collideBottom&&(this.y=e.bottom,this.velocityY*=i)},update:function(t,e,i){if(0<this.delayCurrent)return this.delayCurrent-=t,!1;var n=this.emitter,r=1-this.lifeCurrent/this.life;return this.lifeT=r,this.computeVelocity(n,t,e,i),this.x+=this.velocityX*e,this.y+=this.velocityY*e,n.bounds&&this.checkBounds(n),n.deathZone&&n.deathZone.willKill(this)?!(this.lifeCurrent=0):(this.scaleX=n.scaleX.onUpdate(this,"scaleX",r,this.scaleX),n.scaleY?this.scaleY=n.scaleY.onUpdate(this,"scaleY",r,this.scaleY):this.scaleY=this.scaleX,this.angle=n.rotate.onUpdate(this,"rotate",r,this.angle),this.rotation=s(this.angle),this.alpha=n.alpha.onUpdate(this,"alpha",r,this.alpha),this.tint=n.tint.onUpdate(this,"tint",r,this.tint),this.lifeCurrent-=t,this.lifeCurrent<=0)}});t.exports=a},function(t,e,i){var n=i(35),s=i(0),r=i(11),a=i(453),o=i(454),h=i(449),l=i(2),c=i(210),u=i(455),d=i(126),f=i(451),p=i(456),g=i(10),m=i(79),v=i(3),y=i(68),_=new s({Mixins:[r.BlendMode,r.Mask,r.ScrollFactor,r.Visible],initialize:function(t,e){this.manager=t,this.texture=t.texture,this.frames=[t.defaultFrame],this.defaultFrame=t.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=f,this.x=new h(e,"x",0,!0),this.y=new h(e,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new h(e,"accelerationX",0,!0),this.accelerationY=new h(e,"accelerationY",0,!0),this.maxVelocityX=new h(e,"maxVelocityX",1e4,!0),this.maxVelocityY=new h(e,"maxVelocityY",1e4,!0),this.speedX=new h(e,"speedX",0,!0),this.speedY=new h(e,"speedY",0,!0),this.moveTo=!1,this.moveToX=new h(e,"moveToX",0,!0),this.moveToY=new h(e,"moveToY",0,!0),this.bounce=new h(e,"bounce",0,!0),this.scaleX=new h(e,"scaleX",1),this.scaleY=new h(e,"scaleY",1),this.tint=new h(e,"tint",16777215),this.alpha=new h(e,"alpha",1),this.lifespan=new h(e,"lifespan",1e3,!0),this.angle=new h(e,"angle",{min:0,max:360},!0),this.rotate=new h(e,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new h(e,"quantity",1,!0),this.delay=new h(e,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=n.NORMAL,this.follow=null,this.followOffset=new v,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,e&&this.fromJSON(e)},fromJSON:function(t){if(!t)return this;var e,i=0,n="";for(i=0;i<this.configFastMap.length;i++)n=this.configFastMap[i],d(t,n)&&(this[n]=l(t,n));for(i=0;i<this.configOpMap.length;i++)n=this.configOpMap[i],d(t,n)&&this[n].loadConfig(t);return this.acceleration=0!==this.accelerationX.propertyValue||0!==this.accelerationY.propertyValue,this.moveTo=0!==this.moveToX.propertyValue||0!==this.moveToY.propertyValue,d(t,"speed")&&(this.speedX.loadConfig(t,"speed"),this.speedY=null),(u(t,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),d(t,"scale")&&(this.scaleX.loadConfig(t,"scale"),this.scaleY=null),d(t,"callbackScope")&&(e=l(t,"callbackScope",null),this.emitCallbackScope=e,this.deathCallbackScope=e),d(t,"emitZone")&&this.setEmitZone(t.emitZone),d(t,"deathZone")&&this.setDeathZone(t.deathZone),d(t,"bounds")&&this.setBounds(t.bounds),d(t,"followOffset")&&this.followOffset.setFromObject(l(t,"followOffset",0)),d(t,"frame")&&this.setFrame(t.frame),d(t,"reserve")&&this.reserve(t.reserve),this},toJSON:function(t){void 0===t&&(t={});var e=0,i="";for(e=0;e<this.configFastMap.length;e++)t[i=this.configFastMap[e]]=this[i];for(e=0;e<this.configOpMap.length;e++)this[i=this.configOpMap[e]]&&(t[i]=this[i].toJSON());return this.speedY||(delete t.speedX,t.speed=this.speedX.toJSON()),this.scaleY||(delete t.scaleX,t.scale=this.scaleX.toJSON()),t},startFollow:function(t,e,i,n){return void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=!1),this.follow=t,this.followOffset.set(e,i),this.trackVisible=n,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(1===this.frames.length)return this.defaultFrame;if(this.randomFrame)return c(this.frames);var t=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=y(this.currentFrame+1,0,this._frameLength)),t},setFrame:function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=1),this.randomFrame=e,this.frameQuantity=i,this.currentFrame=0,this._frameCounter=0;var n,s,r=typeof t;return Array.isArray(t)||"string"==r||"number"==r?this.manager.setEmitterFrames(t,this):"object"==r&&((t=l(n=t,"frames",null))&&this.manager.setEmitterFrames(t,this),s=l(n,"cycle",!1),this.randomFrame=!s,this.frameQuantity=l(n,"quantity",i)),this._frameLength=this.frames.length,1===this._frameLength&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(t){return void 0===t&&(t=!0),this.radial=t,this},setPosition:function(t,e){return this.x.onChange(t),this.y.onChange(e),this},setBounds:function(t,e,i,n){var s;return"object"==typeof t&&(t=(s=t).x,e=s.y,i=d(s,"w")?s.w:s.width,n=d(s,"h")?s.h:s.height),this.bounds?this.bounds.setTo(t,e,i,n):this.bounds=new g(t,e,i,n),this},setSpeedX:function(t){return this.speedX.onChange(t),this.radial=!1,this},setSpeedY:function(t){return this.speedY&&(this.speedY.onChange(t),this.radial=!1),this},setSpeed:function(t){return this.speedX.onChange(t),this.speedY=null,this.radial=!0,this},setScaleX:function(t){return this.scaleX.onChange(t),this},setScaleY:function(t){return this.scaleY.onChange(t),this},setScale:function(t){return this.scaleX.onChange(t),this.scaleY=null,this},setGravityX:function(t){return this.gravityX=t,this},setGravityY:function(t){return this.gravityY=t,this},setGravity:function(t,e){return this.gravityX=t,this.gravityY=e,this},setAlpha:function(t){return this.alpha.onChange(t),this},setTint:function(t){return this.tint.onChange(t),this},setEmitterAngle:function(t){return this.angle.onChange(t),this},setAngle:function(t){return this.angle.onChange(t),this},setLifespan:function(t){return this.lifespan.onChange(t),this},setQuantity:function(t){return this.quantity.onChange(t),this},setFrequency:function(t,e){return this.frequency=t,this._counter=0,e&&this.quantity.onChange(e),this},setEmitZone:function(t){if(void 0===t)this.emitZone=null;else{var e=l(t,"type","random"),i=l(t,"source",null);switch(e){case"random":this.emitZone=new p(i);break;case"edge":var n=l(t,"quantity",1),s=l(t,"stepRate",0),r=l(t,"yoyo",!1),a=l(t,"seamless",!0);this.emitZone=new o(i,n,s,r,a)}}return this},setDeathZone:function(t){var e,i,n;return void 0===t?this.deathZone=null:(e=l(t,"type","onEnter"),(i=l(t,"source",null))&&"function"==typeof i.contains&&(n="onEnter"===e,this.deathZone=new a(i,n))),this},reserve:function(t){for(var e=this.dead,i=0;i<t;i++)e.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return 0<this.maxParticles&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(t,e){return void 0===t?(this.emitCallback=null,this.emitCallbackScope=null):"function"==typeof t&&(this.emitCallback=t,e&&(this.emitCallbackScope=e)),this},onParticleDeath:function(t,e){return void 0===t?(this.deathCallback=null,this.deathCallbackScope=null):"function"==typeof t&&(this.deathCallback=t,e&&(this.deathCallbackScope=e)),this},killAll:function(){for(var t=this.dead,e=this.alive;0<e.length;)t.push(e.pop());return this},forEachAlive:function(t,e){for(var i=this.alive,n=i.length,s=0;s<n;++s)t.call(e,i[s],this);return this},forEachDead:function(t,e){for(var i=this.dead,n=i.length,s=0;s<n;++s)t.call(e,i[s],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return m(this.alive,this.depthSortCallback),this},flow:function(t,e){return void 0===e&&(e=1),this.frequency=t,this.quantity.onChange(e),this.start()},explode:function(t,e,i){return this.frequency=-1,this.emitParticle(t,e,i)},emitParticleAt:function(t,e,i){return this.emitParticle(i,t,e)},emitParticle:function(t,e,i){if(!this.atLimit()){void 0===t&&(t=this.quantity.onEmit());for(var n=this.dead,s=this.follow?this.follow.x+this.followOffset.x:e,r=this.follow?this.follow.y+this.followOffset.y:i,a=0;a<t;a++){var o=n.pop();if((o=o||new this.particleClass(this)).fire(s,r),this.particleBringToTop?this.alive.push(o):this.alive.unshift(o),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,o,this),this.atLimit())break}return o}},preUpdate:function(t,e){var i=(e*=this.timeScale)/1e3;this.trackVisible&&(this.visible=this.follow.visible);var n=this.manager.getProcessors(),s=this.alive,r=this.dead,a=0,o=[],h=s.length;for(a=0;a<h;a++){var l=s[a];l.update(e,i,n)&&o.push({index:a,particle:l})}if(0<(h=o.length)){var c=this.deathCallback,u=this.deathCallbackScope;for(a=h-1;0<=a;a--){var d=o[a];s.splice(d.index,1),r.push(d.particle),c&&c.call(u,d.particle),d.particle.resetPosition()}}this.on&&(0===this.frequency?this.emitParticle():0<this.frequency&&(this._counter-=e,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(t,e){return t.y-e.y}});t.exports=_},function(t,e,i){var n=new(i(0))({initialize:function(t,e){this.source=t,this.killOnEnter=e},willKill:function(t){var e=this.source.contains(t.x,t.y);return e&&this.killOnEnter||!e&&!this.killOnEnter}});t.exports=n},function(t,e,i){var n=new(i(0))({initialize:function(t,e,i,n,s){void 0===n&&(n=!1),void 0===s&&(s=!0),this.source=t,this.points=[],this.quantity=e,this.stepRate=i,this.yoyo=n,this.counter=-1,this.seamless=s,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){var t,e;this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless&&(t=this.points[0],e=this.points[this.points.length-1],t.x===e.x&&t.y===e.y&&this.points.pop());var i=this._length;return this._length=this.points.length,this._length<i&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(t){return this.source=t,this.updateSource()},getPoint:function(t){0===this._direction?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,-1===this.counter&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var e=this.points[this.counter];e&&(t.x=e.x,t.y=e.y)}});t.exports=n},function(t,e){t.exports=function(t,e){for(var i=0;i<e.length;i++)if(t.hasOwnProperty(e[i]))return!0;return!1}},function(t,e,i){var n=i(0),s=i(3),r=new n({initialize:function(t){this.source=t,this._tempVec=new s},getPoint:function(t){var e=this._tempVec;this.source.getRandomPoint(e),t.x=e.x,t.y=e.y}});t.exports=r},function(t,e,i){var n=i(0),s=i(11),r=i(73),a=new n({Extends:r,Mixins:[s.PathFollower],initialize:function(t,e,i,n,s,a){r.call(this,t,i,n,s,a),this.path=e},preUpdate:function(t,e){this.anims.update(t,e),this.pathUpdate(t)}});t.exports=a},function(t,e){t.exports=function(t,e,i){var n=t.canvas,s=t.context,r=t.style,a=[],o=0,h=i.length;0<r.maxLines&&r.maxLines<i.length&&(h=r.maxLines),r.syncFont(n,s);for(var l=0;l<h;l++){var c=r.strokeThickness;c+=s.measureText(i[l]).width,r.wordWrap&&(c-=s.measureText(" ").width),a[l]=Math.ceil(c),o=Math.max(o,a[l])}var u=e.fontSize+r.strokeThickness,d=u*h,f=t.lineSpacing;return 1<h&&(d+=f*(h-1)),{width:o,height:d,lines:h,lineWidths:a,lineSpacing:f,lineHeight:u}}},function(t,e,i){var n=i(0),s=i(13),r=i(6),a=i(460),o={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|MÃ‰qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},h=new n({initialize:function(t,e){this.parent=t,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(e,!1,!0);var i=r(e,"metrics",!1);this.metrics=i?{ascent:r(i,"ascent",0),descent:r(i,"descent",0),fontSize:r(i,"fontSize",0)}:a(this)},setStyle:function(t,e,i){for(var n in void 0===e&&(e=!0),void 0===i&&(i=!1),t&&t.hasOwnProperty("fontSize")&&"number"==typeof t.fontSize&&(t.fontSize=t.fontSize.toString()+"px"),o){var a=i?o[n][1]:this[n];this[n]=("wordWrapCallback"===n||"wordWrapCallbackScope"===n?r:s)(t,o[n][0],a)}var h=r(t,"font",null);null!==h&&this.setFont(h,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var l=r(t,"fill",null);return null!==l&&(this.color=l),e?this.update(!0):this.parent},syncFont:function(t,e){e.font=this._font},syncStyle:function(t,e){e.textBaseline="alphabetic",e.fillStyle=this.color,e.strokeStyle=this.stroke,e.lineWidth=this.strokeThickness,e.lineCap="round",e.lineJoin="round"},syncShadow:function(t,e){e?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)},update:function(t){return t&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=a(this)),this.parent.updateText()},setFont:function(t,e){void 0===e&&(e=!0);var i,n,s=t,a="",o="";return"string"!=typeof t?(s=r(t,"fontFamily","Courier"),a=r(t,"fontSize","16px"),o=r(t,"fontStyle","")):(n=0,o=2<(i=t.split(" ")).length?i[n++]:"",a=i[n++]||"16px",s=i[n++]||"Courier"),s===this.fontFamily&&a===this.fontSize&&o===this.fontStyle||(this.fontFamily=s,this.fontSize=a,this.fontStyle=o,e&&this.update(!0)),this.parent},setFontFamily:function(t){return this.fontFamily!==t&&(this.fontFamily=t,this.update(!0)),this.parent},setFontStyle:function(t){return this.fontStyle!==t&&(this.fontStyle=t,this.update(!0)),this.parent},setFontSize:function(t){return"number"==typeof t&&(t=t.toString()+"px"),this.fontSize!==t&&(this.fontSize=t,this.update(!0)),this.parent},setTestString:function(t){return this.testString=t,this.update(!0)},setFixedSize:function(t,e){return this.fixedWidth=t,this.fixedHeight=e,t&&(this.parent.width=t),e&&(this.parent.height=e),this.update(!1)},setBackgroundColor:function(t){return this.backgroundColor=t,this.update(!1)},setFill:function(t){return this.color=t,this.update(!1)},setColor:function(t){return this.color=t,this.update(!1)},setResolution:function(t){return this.resolution=t,this.update(!1)},setStroke:function(t,e){return void 0===e&&(e=this.strokeThickness),void 0===t&&0!==this.strokeThickness?(this.strokeThickness=0,this.update(!0)):this.stroke===t&&this.strokeThickness===e||(this.stroke=t,this.strokeThickness=e,this.update(!0)),this.parent},setShadow:function(t,e,i,n,s,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i="#000"),void 0===n&&(n=0),void 0===s&&(s=!1),void 0===r&&(r=!0),this.shadowOffsetX=t,this.shadowOffsetY=e,this.shadowColor=i,this.shadowBlur=n,this.shadowStroke=s,this.shadowFill=r,this.update(!1)},setShadowOffset:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.shadowOffsetX=t,this.shadowOffsetY=e,this.update(!1)},setShadowColor:function(t){return void 0===t&&(t="#000"),this.shadowColor=t,this.update(!1)},setShadowBlur:function(t){return void 0===t&&(t=0),this.shadowBlur=t,this.update(!1)},setShadowStroke:function(t){return this.shadowStroke=t,this.update(!1)},setShadowFill:function(t){return this.shadowFill=t,this.update(!1)},setWordWrapWidth:function(t,e){return void 0===e&&(e=!1),this.wordWrapWidth=t,this.wordWrapUseAdvanced=e,this.update(!1)},setWordWrapCallback:function(t,e){return void 0===e&&(e=null),this.wordWrapCallback=t,this.wordWrapCallbackScope=e,this.update(!1)},setAlign:function(t){return void 0===t&&(t="left"),this.align=t,this.update(!1)},setMaxLines:function(t){return void 0===t&&(t=0),this.maxLines=t,this.update(!1)},getTextMetrics:function(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}},toJSON:function(){var t={};for(var e in o)t[e]=this[e];return t.metrics=this.getTextMetrics(),t},destroy:function(){this.parent=void 0}});t.exports=h},function(t,e,i){var n=i(31);t.exports=function(t){var e=n.create(this),i=e.getContext("2d");t.syncFont(e,i);var s=i.measureText(t.testString);if("actualBoundingBoxAscent"in s){var r=s.actualBoundingBoxAscent,a=s.actualBoundingBoxDescent;return n.remove(e),{ascent:r,descent:a,fontSize:r+a}}var o=Math.ceil(s.width*t.baselineX),h=2*(l=o),l=l*t.baselineY|0;e.width=o,e.height=h,i.fillStyle="#f00",i.fillRect(0,0,o,h),i.font=t._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(t.testString,0,l);var c={ascent:0,descent:0,fontSize:0},u=i.getImageData(0,0,o,h);if(!u)return c.ascent=l,c.descent=6+l,c.fontSize=c.ascent+c.descent,n.remove(e),c;for(var d,f=u.data,p=f.length,g=4*o,m=0,v=!1,y=0;y<l;y++){for(d=0;d<g;d+=4)if(255!==f[m+d]){v=!0;break}if(v)break;m+=g}for(c.ascent=l-y,m=p-g,v=!1,y=h;l<y;y--){for(d=0;d<g;d+=4)if(255!==f[m+d]){v=!0;break}if(v)break;m-=g}return c.descent=y-l,c.fontSize=c.ascent+c.descent,n.remove(e),c}},function(t,e,i){var n=i(1097),s=i(0),r=i(36),a=i(59),o=i(65),h=i(14),l=i(34),c=new s({Extends:l,Mixins:[n],initialize:function(t,e,i,n,s,r,a,h,c){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=128),void 0===s&&(s=0),void 0===r&&(r=360),void 0===a&&(a=!1),l.call(this,t,"Arc",new o(0,0,n)),this._startAngle=s,this._endAngle=r,this._anticlockwise=a,this._iterations=.01,this.setPosition(e,i);var u=2*this.geom.radius;this.setSize(u,u),void 0!==h&&this.setFillStyle(h,c),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(t){this._iterations=t,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(t){var e=2*(this.geom.radius=t);this.setSize(e,e),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(t){this._startAngle=t,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(t){this._endAngle=t,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(t){this._anticlockwise=t,this.updateData()}},setRadius:function(t){return this.radius=t,this},setIterations:function(t){return void 0===t&&(t=.01),this.iterations=t,this},setStartAngle:function(t,e){return this._startAngle=t,void 0!==e&&(this._anticlockwise=e),this.updateData()},setEndAngle:function(t,e){return this._endAngle=t,void 0!==e&&(this._anticlockwise=e),this.updateData()},updateData:function(){var t=this._iterations,e=t,i=this.geom.radius,n=r(this._startAngle),s=r(this._endAngle),o=i,l=i;s-=n,this._anticlockwise?s<-h.PI2?s=-h.PI2:0<s&&(s=-h.PI2+s%h.PI2):s>h.PI2?s=h.PI2:s<0&&(s=h.PI2+s%h.PI2);for(var c,u=[o+Math.cos(n)*i,l+Math.sin(n)*i];e<1;)c=s*e+n,u.push(o+Math.cos(c)*i,l+Math.sin(c)*i),e+=t;return c=s+n,u.push(o+Math.cos(c)*i,l+Math.sin(c)*i),u.push(o+Math.cos(n)*i,l+Math.sin(n)*i),this.pathIndexes=a(u),this.pathData=u,this}});t.exports=c},function(t,e,i){var n=i(0),s=i(1100),r=i(59),a=i(10),o=i(34),h=new n({Extends:o,Mixins:[s],initialize:function(t,e,i,n,s,r){void 0===e&&(e=0),void 0===i&&(i=0),o.call(this,t,"Curve",n),this._smoothness=32,this._curveBounds=new a,this.closePath=!1,this.setPosition(e,i),void 0!==s&&this.setFillStyle(s,r),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(t){this._smoothness=t,this.updateData()}},setSmoothness:function(t){return this._smoothness=t,this.updateData()},updateData:function(){var t=this._curveBounds,e=this._smoothness;this.geom.getBounds(t,e),this.setSize(t.width,t.height),this.updateDisplayOrigin();for(var i=[],n=this.geom.getPoints(e),s=0;s<n.length;s++)i.push(n[s].x,n[s].y);return i.push(n[0].x,n[0].y),this.pathIndexes=r(i),this.pathData=i,this}});t.exports=h},function(t,e,i){var n=i(0),s=i(59),r=i(1103),a=i(111),o=i(34),h=new n({Extends:o,Mixins:[r],initialize:function(t,e,i,n,s,r,h){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=128),void 0===s&&(s=128),o.call(this,t,"Ellipse",new a(n/2,s/2,n,s)),this._smoothness=64,this.setPosition(e,i),this.width=n,this.height=s,void 0!==r&&this.setFillStyle(r,h),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(t){this._smoothness=t,this.updateData()}},setSize:function(t,e){return this.width=t,this.height=e,this.geom.setPosition(t/2,e/2),this.geom.setSize(t,e),this.updateData()},setSmoothness:function(t){return this._smoothness=t,this.updateData()},updateData:function(){for(var t=[],e=this.geom.getPoints(this._smoothness),i=0;i<e.length;i++)t.push(e[i].x,e[i].y);return t.push(e[0].x,e[0].y),this.pathIndexes=s(t),this.pathData=t,this}});t.exports=h},function(t,e,i){var n=i(0),s=i(34),r=i(1106),a=new n({Extends:s,Mixins:[r],initialize:function(t,e,i,n,r,a,o,h,l,c,u){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=128),void 0===r&&(r=128),void 0===a&&(a=32),void 0===o&&(o=32),s.call(this,t,"Grid",null),this.cellWidth=a,this.cellHeight=o,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(e,i),this.setSize(n,r),this.setFillStyle(h,l),void 0!==c&&this.setOutlineStyle(c,u),this.updateDisplayOrigin()},setFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.showCells=!1:(this.fillColor=t,this.fillAlpha=e,this.showCells=!0),this},setAltFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.showAltCells=!1:(this.altFillColor=t,this.altFillAlpha=e,this.showAltCells=!0),this},setOutlineStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.showOutline=!1:(this.outlineFillColor=t,this.outlineFillAlpha=e,this.showOutline=!0),this}});t.exports=a},function(t,e,i){var n=i(1109),s=i(0),r=i(34),a=new s({Extends:r,Mixins:[n],initialize:function(t,e,i,n,s,a,o,h){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=48),void 0===s&&(s=32),void 0===a&&(a=15658734),void 0===o&&(o=10066329),void 0===h&&(h=13421772),r.call(this,t,"IsoBox",null),this.projection=4,this.fillTop=a,this.fillLeft=o,this.fillRight=h,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(e,i),this.setSize(n,s),this.updateDisplayOrigin()},setProjection:function(t){return this.projection=t,this},setFaces:function(t,e,i){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),this.showTop=t,this.showLeft=e,this.showRight=i,this},setFillStyle:function(t,e,i){return this.fillTop=t,this.fillLeft=e,this.fillRight=i,this.isFilled=!0,this}});t.exports=a},function(t,e,i){var n=i(0),s=i(1112),r=i(34),a=new n({Extends:r,Mixins:[s],initialize:function(t,e,i,n,s,a,o,h,l){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=48),void 0===s&&(s=32),void 0===a&&(a=!1),void 0===o&&(o=15658734),void 0===h&&(h=10066329),void 0===l&&(l=13421772),r.call(this,t,"IsoTriangle",null),this.projection=4,this.fillTop=o,this.fillLeft=h,this.fillRight=l,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=a,this.isFilled=!0,this.setPosition(e,i),this.setSize(n,s),this.updateDisplayOrigin()},setProjection:function(t){return this.projection=t,this},setReversed:function(t){return this.isReversed=t,this},setFaces:function(t,e,i){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),this.showTop=t,this.showLeft=e,this.showRight=i,this},setFillStyle:function(t,e,i){return this.fillTop=t,this.fillLeft=e,this.fillRight=i,this.isFilled=!0,this}});t.exports=a},function(t,e,i){var n=i(0),s=i(34),r=i(47),a=i(1115),o=new n({Extends:s,Mixins:[a],initialize:function(t,e,i,n,a,o,h,l,c){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===a&&(a=0),void 0===o&&(o=128),void 0===h&&(h=0),s.call(this,t,"Line",new r(n,a,o,h));var u=Math.max(1,this.geom.right-this.geom.left),d=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(e,i),this.setSize(u,d),void 0!==l&&this.setStrokeStyle(1,l,c),this.updateDisplayOrigin()},setLineWidth:function(t,e){return void 0===e&&(e=t),this._startWidth=t,this._endWidth=e,this.lineWidth=t,this},setTo:function(t,e,i,n){return this.geom.setTo(t,e,i,n),this}});t.exports=o},function(t,e,i){var n=i(1118),s=i(0),r=i(59),a=i(469),o=i(227),h=i(34),l=i(472),c=new s({Extends:h,Mixins:[n],initialize:function(t,e,i,n,s,r){void 0===e&&(e=0),void 0===i&&(i=0),h.call(this,t,"Polygon",new o(n));var l=a(this.geom);this.setPosition(e,i),this.setSize(l.width,l.height),void 0!==s&&this.setFillStyle(s,r),this.updateDisplayOrigin(),this.updateData()},smooth:function(t){void 0===t&&(t=1);for(var e=0;e<t;e++)l(this.geom);return this.updateData()},updateData:function(){for(var t=[],e=this.geom.points,i=0;i<e.length;i++)t.push(e[i].x,e[i].y);return t.push(e[0].x,e[0].y),this.pathIndexes=r(t),this.pathData=t,this}});t.exports=c},function(t,e,i){var n=i(10);t.exports=function(t,e){void 0===e&&(e=new n);for(var i,s=1/0,r=1/0,a=-s,o=-r,h=0;h<t.points.length;h++)i=t.points[h],s=Math.min(s,i.x),r=Math.min(r,i.y),a=Math.max(a,i.x),o=Math.max(o,i.y);return e.x=s,e.y=r,e.width=a-s,e.height=o-r,e}},function(t,e,i){var n=i(67),s=i(47),r=i(471);t.exports=function(t,e,i,a){void 0===a&&(a=[]);var o=t.points,h=r(t);!e&&0<i&&(e=h/i);for(var l=0;l<e;l++)for(var c=h*(l/e),u=0,d=0;d<o.length;d++){var f=o[d],p=o[(d+1)%o.length],g=new s(f.x,f.y,p.x,p.y),m=n(g);if(!(c<u||u+m<c)){var v=g.getPoint((c-u)/m);a.push(v);break}u+=m}return a}},function(t,e,i){var n=i(67),s=i(47);t.exports=function(t){for(var e=t.points,i=0,r=0;r<e.length;r++){var a=e[r],o=e[(r+1)%e.length],h=new s(a.x,a.y,o.x,o.y);i+=n(h)}return i}},function(t,e){function i(t,e){return t[0]=e[0],t[1]=e[1],t}t.exports=function(t){for(var e=[],n=t.points,s=0;s<n.length;s++)e.push([n[s].x,n[s].y]);var r=[];for(0<e.length&&r.push(i([0,0],e[0])),s=0;s<e.length-1;s++){var a=e[s],o=e[s+1],h=a[0],l=a[1],c=o[0],u=o[1];r.push([.85*h+.15*c,.85*l+.15*u]),r.push([.15*h+.85*c,.15*l+.85*u])}return 1<e.length&&r.push(i([0,0],e[e.length-1])),t.setTo(r)}},function(t,e,i){var n=i(0),s=i(10),r=i(34),a=i(1121),o=new n({Extends:r,Mixins:[a],initialize:function(t,e,i,n,a,o,h){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=128),void 0===a&&(a=128),r.call(this,t,"Rectangle",new s(0,0,n,a)),this.setPosition(e,i),this.setSize(n,a),void 0!==o&&this.setFillStyle(o,h),this.updateDisplayOrigin(),this.updateData()},setSize:function(t,e){return this.width=t,this.height=e,this.geom.setSize(t,e),this.updateData(),this},updateData:function(){var t=[],e=this.geom,i=this._tempLine;return e.getLineA(i),t.push(i.x1,i.y1,i.x2,i.y2),e.getLineB(i),t.push(i.x2,i.y2),e.getLineC(i),t.push(i.x2,i.y2),e.getLineD(i),t.push(i.x2,i.y2),this.pathData=t,this}});t.exports=o},function(t,e,i){var n=i(1124),s=i(0),r=i(59),a=i(34),o=new s({Extends:a,Mixins:[n],initialize:function(t,e,i,n,s,r,o,h){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=5),void 0===s&&(s=32),void 0===r&&(r=64),a.call(this,t,"Star",null),this._points=n,this._innerRadius=s,this._outerRadius=r,this.setPosition(e,i),this.setSize(2*r,2*r),void 0!==o&&this.setFillStyle(o,h),this.updateDisplayOrigin(),this.updateData()},setPoints:function(t){return this._points=t,this.updateData()},setInnerRadius:function(t){return this._innerRadius=t,this.updateData()},setOuterRadius:function(t){return this._outerRadius=t,this.updateData()},points:{get:function(){return this._points},set:function(t){this._points=t,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(t){this._innerRadius=t,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(t){this._outerRadius=t,this.updateData()}},updateData:function(){var t=[],e=this._points,i=this._innerRadius,n=this._outerRadius,s=Math.PI/2*3,a=Math.PI/e,o=n,h=n;t.push(o,h+-n);for(var l=0;l<e;l++)t.push(o+Math.cos(s)*n,h+Math.sin(s)*n),s+=a,t.push(o+Math.cos(s)*i,h+Math.sin(s)*i),s+=a;return t.push(o,h+-n),this.pathIndexes=r(t),this.pathData=t,this}});t.exports=o},function(t,e,i){var n=i(0),s=i(34),r=i(82),a=i(1127),o=new n({Extends:s,Mixins:[a],initialize:function(t,e,i,n,a,o,h,l,c,u,d){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===a&&(a=128),void 0===o&&(o=64),void 0===h&&(h=0),void 0===l&&(l=128),void 0===c&&(c=128),s.call(this,t,"Triangle",new r(n,a,o,h,l,c));var f=this.geom.right-this.geom.left,p=this.geom.bottom-this.geom.top;this.setPosition(e,i),this.setSize(f,p),void 0!==u&&this.setFillStyle(u,d),this.updateDisplayOrigin(),this.updateData()},setTo:function(t,e,i,n,s,r){return this.geom.setTo(t,e,i,n,s,r),this.updateData()},updateData:function(){var t=[],e=this.geom,i=this._tempLine;return e.getLineA(i),t.push(i.x1,i.y1,i.x2,i.y2),e.getLineB(i),t.push(i.x2,i.y2),e.getLineC(i),t.push(i.x2,i.y2),this.pathData=t,this}});t.exports=o},function(t,e,i){var n=i(4),s=i(67);t.exports=function(t,e,i){void 0===i&&(i=new n);var r=t.getLineA(),a=t.getLineB(),o=t.getLineC();if(e<=0||1<=e)return i.x=r.x1,i.y=r.y1,i;var h=s(r),l=s(a),c=s(o),u=(h+l+c)*e,d=0;return u<h?(d=u/h,i.x=r.x1+(r.x2-r.x1)*d,i.y=r.y1+(r.y2-r.y1)*d):h+l<u?(d=(u-=h+l)/c,i.x=o.x1+(o.x2-o.x1)*d,i.y=o.y1+(o.y2-o.y1)*d):(d=(u-=h)/l,i.x=a.x1+(a.x2-a.x1)*d,i.y=a.y1+(a.y2-a.y1)*d),i}},function(t,e,i){var n=i(67),s=i(4);t.exports=function(t,e,i,r){void 0===r&&(r=[]);var a=t.getLineA(),o=t.getLineB(),h=t.getLineC(),l=n(a),c=n(o),u=n(h),d=l+c+u;!e&&0<i&&(e=d/i);for(var f=0;f<e;f++){var p=d*(f/e),g=0,m=new s;p<l?(g=p/l,m.x=a.x1+(a.x2-a.x1)*g,m.y=a.y1+(a.y2-a.y1)*g):l+c<p?(g=(p-=l+c)/u,m.x=h.x1+(h.x2-h.x1)*g,m.y=h.y1+(h.y2-h.y1)*g):(g=(p-=l)/c,m.x=o.x1+(o.x2-o.x1)*g,m.y=o.y1+(o.y2-o.y1)*g),r.push(m)}return r}},function(t,e){t.exports=function(t,e,i){if(!t||"number"==typeof t)return!1;if(t.hasOwnProperty(e))return t[e]=i,!0;if(-1===e.indexOf("."))return!1;for(var n=e.split("."),s=t,r=t,a=0;a<n.length;a++){if(!s.hasOwnProperty(n[a]))return!1;s=(r=s)[n[a]]}return r[n[n.length-1]]=i,!0}},function(t,e,i){var n=i(116),s=i(117);t.exports=function(t,e,i,r,a,o,h){if(void 0===r&&(r=!1),void 0===o&&(o=16777215),void 0===h&&(h=1),t.length===e.length){var l={faces:[],vertices:[]},c=r?3:2,u=Array.isArray(o),d=Array.isArray(h);if(Array.isArray(i)&&0<i.length)for(C=0;C<i.length;C++){var f=i[C],p=2*i[C],g=i[C]*c,m=t[g],v=t[1+g],y=r?t[2+g]:0,_=e[p],x=e[1+p],w=u?o[f]:o,b=d?h[f]:h,E=0,T=0,S=0;a&&(E=a[g],T=a[1+g],S=r?a[2+g]:0),l.vertices.push(new s(m,v,y,_,x,w,b,E,T,S))}else for(var A=0,O=0,C=0;C<t.length;C+=c)m=t[C],v=t[C+1],y=r?t[C+2]:0,_=e[A],x=e[A+1],w=u?o[O]:o,b=d?h[O]:h,S=T=E=0,a&&(E=a[C],T=a[C+1],S=r?a[C+2]:0),l.vertices.push(new s(m,v,y,_,x,w,b,E,T,S)),A+=2,O++;for(C=0;C<l.vertices.length;C+=3){var P=l.vertices[C],L=l.vertices[C+1],R=l.vertices[C+2];l.faces.push(new n(P,L,R))}return l}console.warn("GenerateVerts: vertices and uvs count not equal")}},function(t,e,i){var n=i(116),s=i(69),r=i(39),a=i(117),o=new r,h=new r,l=new s;t.exports=function(t,e,i,s,r,c,u,d,f,p){void 0===i&&(i=1),void 0===s&&(s=0),void 0===r&&(r=0),void 0===c&&(c=0),void 0===u&&(u=0),void 0===d&&(d=0),void 0===f&&(f=0),void 0===p&&(p=!0);var g={faces:[],verts:[]},m=t.materials;o.set(s,r,c),h.set(u,d,f),l.fromRotationXYTranslation(h,o,p);for(var v=0;v<t.models.length;v++)for(var y=t.models[v],_=y.vertices,x=y.textureCoords,w=y.faces,b=0;b<w.length;b++){var E=w[b],T=E.vertices[0],S=E.vertices[1],A=E.vertices[2],O=_[T.vertexIndex],C=_[S.vertexIndex],P=_[A.vertexIndex],L=T.textureCoordsIndex,R=S.textureCoordsIndex,I=A.textureCoordsIndex,M=-1===L?{u:0,v:1}:x[L],D=-1===R?{u:0,v:0}:x[R],k=-1===I?{u:1,v:1}:x[I],N=16777215;""!==E.material&&m[E.material]&&(N=m[E.material]);var F=new a(O.x*i,O.y*i,O.z*i,M.u,M.v,N).transformMat4(l),G=new a(C.x*i,C.y*i,C.z*i,D.u,D.v,N).transformMat4(l),B=new a(P.x*i,P.y*i,P.z*i,k.u,k.v,N).transformMat4(l);g.verts.push(F,G,B),g.faces.push(new n(F,G,B))}return e&&(e.faces=e.faces.concat(g.faces),e.vertices=e.vertices.concat(g.verts)),g}},function(t,e,i){var n=i(65),s=i(0),r=i(11),a=i(200),o=i(12),h=new s({Extends:n,Mixins:[r.ScrollFactor,r.Visible],initialize:function(t,e,i,s,r,o,h){n.call(this,t,e,i),this.color=new a(s,r,o),this.intensity=h,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function(t){return!(h.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},setColor:function(t){var e=o.getFloatsFromUintRGB(t);return this.color.set(e[0],e[1],e[2]),this},setIntensity:function(t){return this.intensity=t,this},setRadius:function(t){return this.radius=t,this}});h.RENDER_MASK=15,t.exports=h},function(t,e,i){var n=i(151),s=i(0),r=i(50),a=i(481),o=i(150),h=i(200),l=i(74),c=i(79),u=i(12),d=new s({initialize:function(){this.lights=[],this.ambientColor=new h(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(t,e,i,n,s,r){return this.systems.displayList.add(new o(this.scene,t,e,i,n,s,r))},enable:function(){return-1===this.maxLights&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(t){for(var e=this.lights,i=t.worldView,s=[],a=0;a<e.length;a++){var o=e[a];o.willRender(t)&&n(o,i)&&s.push({light:o,distance:r(o.x,o.y,i.centerX,i.centerY)})}return s.length>this.maxLights&&(c(s,this.sortByDistance),s=s.slice(0,this.maxLights)),this.visibleLights=s.length,s},sortByDistance:function(t,e){return t.distance>=e.distance},setAmbientColor:function(t){var e=u.getFloatsFromUintRGB(t);return this.ambientColor.set(e[0],e[1],e[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(t,e,i,n,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=128),void 0===n&&(n=16777215),void 0===s&&(s=1);var r=u.getFloatsFromUintRGB(n),o=new a(t,e,i,r[0],r[1],r[2],s);return this.lights.push(o),o},removeLight:function(t){var e=this.lights.indexOf(t);return 0<=e&&l(this.lights,e),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});t.exports=d},function(t,e,i){var n=i(56),s=i(17)(!1,s={Circle:i(1191),Ellipse:i(1201),Intersects:i(484),Line:i(1221),Mesh:i(1243),Point:i(1246),Polygon:i(1260),Rectangle:i(502),Triangle:i(1293)},n);t.exports=s},function(t,e,i){t.exports={CircleToCircle:i(231),CircleToRectangle:i(151),GetCircleToCircle:i(1211),GetCircleToRectangle:i(1212),GetLineToCircle:i(232),GetLineToLine:i(485),GetLineToPoints:i(486),GetLineToPolygon:i(487),GetLineToRectangle:i(234),GetRaysFromPointToPolygon:i(1213),GetRectangleIntersection:i(1214),GetRectangleToRectangle:i(1215),GetRectangleToTriangle:i(1216),GetTriangleToCircle:i(1217),GetTriangleToLine:i(492),GetTriangleToTriangle:i(1218),LineToCircle:i(233),LineToLine:i(96),LineToRectangle:i(488),PointToLine:i(496),PointToLineSegment:i(1219),RectangleToRectangle:i(152),RectangleToTriangle:i(489),RectangleToValues:i(1220),TriangleToCircle:i(491),TriangleToLine:i(493),TriangleToTriangle:i(494)}},function(t,e,i){var n=i(39);t.exports=function(t,e,i){var s=t.x1,r=t.y1,a=t.x2,o=t.y2,h=e.x1,l=e.y1,c=a-s,u=o-r,d=e.x2-h,f=e.y2-l;if(0==c||0==f*c-d*u)return!1;var p=(c*(l-r)+u*(s-h))/(d*u-f*c),g=(h+d*p-s)/c;return g<0||p<0||1<p?null:(void 0===i&&(i=new n),i.set(s+c*g,r+u*g,g))}},function(t,e,i){var n=i(39),s=i(485),r=new(i(47)),a=new n;t.exports=function(t,e,i){void 0===i&&(i=new n);var o=!1;i.set(),a.set();for(var h=e[0],l=1;l<e.length;l++){var c=e[l];r.setTo(h.x,h.y,c.x,c.y),h=c,s(t,r,a)&&(!o||a.z<i.z)&&(i.copy(a),o=!0)}return o?i:null}},function(t,e,i){var n=i(39),s=i(140),r=i(486),a=new n;t.exports=function(t,e,i){void 0===i&&(i=new s),Array.isArray(e)||(e=[e]);var n=!1;i.set(),a.set();for(var o=0;o<e.length;o++)r(t,e[o].points,a)&&(!n||a.z<i.z)&&(i.set(a.x,a.y,a.z,o),n=!0);return n?i:null}},function(t,e){t.exports=function(t,e){var i=t.x1,n=t.y1,s=t.x2,r=t.y2,a=e.x,o=e.y,h=e.right,l=e.bottom,c=0;if(a<=i&&i<=h&&o<=n&&n<=l||a<=s&&s<=h&&o<=r&&r<=l)return!0;if(i<a&&a<=s){if(o<(c=n+(r-n)*(a-i)/(s-i))&&c<=l)return!0}else if(h<i&&s<=h&&o<=(c=n+(r-n)*(h-i)/(s-i))&&c<=l)return!0;if(n<o&&o<=r){if(a<=(c=i+(s-i)*(o-n)/(r-n))&&c<=h)return!0}else if(l<n&&r<=l&&a<=(c=i+(s-i)*(l-n)/(r-n))&&c<=h)return!0;return!1}},function(t,e,i){var n=i(96),s=i(57),r=i(235),a=i(490);t.exports=function(t,e){if(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)return!1;var i=e.getLineA(),o=e.getLineB(),h=e.getLineC();if(s(t,i.x1,i.y1)||s(t,i.x2,i.y2))return!0;if(s(t,o.x1,o.y1)||s(t,o.x2,o.y2))return!0;if(s(t,h.x1,h.y1)||s(t,h.x2,h.y2))return!0;var l=t.getLineA(),c=t.getLineB(),u=t.getLineC(),d=t.getLineD();if(n(i,l)||n(i,c)||n(i,u)||n(i,d))return!0;if(n(o,l)||n(o,c)||n(o,u)||n(o,d))return!0;if(n(h,l)||n(h,c)||n(h,u)||n(h,d))return!0;var f=a(t);return 0<r(e,f,!0).length}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=[]),e.push({x:t.x,y:t.y}),e.push({x:t.right,y:t.y}),e.push({x:t.right,y:t.bottom}),e.push({x:t.x,y:t.bottom}),e}},function(t,e,i){var n=i(233),s=i(115);t.exports=function(t,e){return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top||!s(t,e.x,e.y)&&!n(t.getLineA(),e)&&!n(t.getLineB(),e)&&!n(t.getLineC(),e))}},function(t,e,i){var n=i(4),s=i(493),r=i(96);t.exports=function(t,e,i){if(void 0===i&&(i=[]),s(t,e))for(var a=t.getLineA(),o=t.getLineB(),h=t.getLineC(),l=[new n,new n,new n],c=[r(a,e,l[0]),r(o,e,l[1]),r(h,e,l[2])],u=0;u<3;u++)c[u]&&i.push(l[u]);return i}},function(t,e,i){var n=i(96);t.exports=function(t,e){return!!(t.contains(e.x1,e.y1)||t.contains(e.x2,e.y2)||n(t.getLineA(),e)||n(t.getLineB(),e)||n(t.getLineC(),e))}},function(t,e,i){var n=i(235),s=i(495),r=i(96);t.exports=function(t,e){if(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)return!1;var i=t.getLineA(),a=t.getLineB(),o=t.getLineC(),h=e.getLineA(),l=e.getLineB(),c=e.getLineC();if(r(i,h)||r(i,l)||r(i,c))return!0;if(r(a,h)||r(a,l)||r(a,c))return!0;if(r(o,h)||r(o,l)||r(o,c))return!0;var u=s(t);return 0<n(e,u,!0).length||(u=s(e),0<n(t,u,!0).length)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=[]),e.push({x:t.x1,y:t.y1}),e.push({x:t.x2,y:t.y2}),e.push({x:t.x3,y:t.y3}),e}},function(t,e){t.exports=function(t,e,i){void 0===i&&(i=1);var n=e.x1,s=e.y1,r=e.x2,a=e.y2,o=t.x,h=t.y,l=(r-n)*(r-n)+(a-s)*(a-s);if(0==l)return!1;var c=((o-n)*(r-n)+(h-s)*(a-s))/l;if(c<0)return Math.sqrt((n-o)*(n-o)+(s-h)*(s-h))<=i;if(0<=c&&c<=1){var u=((s-h)*(r-n)-(n-o)*(a-s))/l;return Math.abs(u)*Math.sqrt(l)<=i}return Math.sqrt((r-o)*(r-o)+(a-h)*(a-h))<=i}},function(t,e,i){var n=i(14),s=i(68),r=i(97);t.exports=function(t){var e=r(t)-n.TAU;return s(e,-Math.PI,Math.PI)}},function(t,e){var i=!0,n="untitled",s="",r="";function a(t){return 0===t.models.length&&t.models.push({faces:[],name:n,textureCoords:[],vertexNormals:[],vertices:[]}),s="",t.models[t.models.length-1]}t.exports=function(t,e){void 0===e&&(e=!0),i=e;var o={materials:{},materialLibraries:[],models:[]};r=s="";for(var h,l,c,u,d,f,p,g,m,v,y,_,x,w,b,E,T,S,A,O,C,P,L,R,I,M,D,k=t.split("\n"),N=0;N<k.length;N++){var F=(M=k[N],-1<(D=M.indexOf("#"))?M.substring(0,D):M).replace(/\s\s+/g," ").trim().split(" ");switch(F[0].toLowerCase()){case"o":R=o,I=2<=(L=F).length?L[1]:n,R.models.push({faces:[],name:I,textureCoords:[],vertexNormals:[],vertices:[]}),s="";break;case"g":2===(P=F).length&&(s=P[1]);break;case"v":T=o,A=2<=(S=(E=F).length)?parseFloat(E[1]):0,O=3<=S?parseFloat(E[2]):0,C=4<=S?parseFloat(E[3]):0,a(T).vertices.push({x:A,y:O,z:C});break;case"vt":y=o,b=w=x=void 0,x=2<=(_=(v=F).length)?parseFloat(v[1]):0,w=3<=_?parseFloat(v[2]):0,b=4<=_?parseFloat(v[3]):0,isNaN(x)&&(x=0),isNaN(w)&&(w=0),isNaN(b)&&(b=0),i&&(w=1-w),a(y).textureCoords.push({u:x,v:w,w:b});break;case"vn":d=o,p=2<=(f=(u=F).length)?parseFloat(u[1]):0,g=3<=f?parseFloat(u[2]):0,m=4<=f?parseFloat(u[3]):0,a(d).vertexNormals.push({x:p,y:g,z:m});break;case"f":!function(t,e){var i=t.length-1;if(!(i<3)){for(var n={group:s,material:r,vertices:[]},o=0;o<i;o++){var h,l,c,u=t[o+1].split("/"),d=u.length;d<1||3<d||(l=h=c=0,c=parseInt(u[0],10),1<d&&""!==u[1]&&(h=parseInt(u[1],10)),2<d&&(l=parseInt(u[2],10)),0!==c&&(c<0&&(c=a(e).vertices.length+1+c),--h,--c,--l,n.vertices.push({textureCoordsIndex:h,vertexIndex:c,vertexNormalIndex:l})))}a(e).faces.push(n)}}(F,o);break;case"mtllib":c=o,2<=(l=F).length&&c.materialLibraries.push(l[1]);break;case"usemtl":2<=(h=F).length&&(r=h[1])}}return o}},function(t,e,i){var n=i(103);t.exports=function(t){for(var e={},i=t.split("\n"),s="",r=0;r<i.length;r++){var a=i[r].trim();if(0!==a.indexOf("#")&&""!==a){var o=a.replace(/\s\s+/g," ").trim().split(" ");switch(o[0].toLowerCase()){case"newmtl":s=o[1];break;case"kd":var h=Math.floor(255*o[1]),l=2<=o.length?Math.floor(255*o[2]):h,c=3<=o.length?Math.floor(255*o[3]):h;e[s]=n(h,l,c)}}}return e}},function(t,e){t.exports=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)}},function(t,e){t.exports=function(t){return t.x*t.x+t.y*t.y}},function(t,e,i){var n=i(10);n.Area=i(1267),n.Ceil=i(1268),n.CeilAll=i(1269),n.CenterOn=i(190),n.Clone=i(1270),n.Contains=i(57),n.ContainsPoint=i(1271),n.ContainsRect=i(503),n.CopyFrom=i(1272),n.Decompose=i(490),n.Equals=i(1273),n.FitInside=i(1274),n.FitOutside=i(1275),n.Floor=i(1276),n.FloorAll=i(1277),n.FromPoints=i(199),n.FromXY=i(1278),n.GetAspectRatio=i(237),n.GetCenter=i(1279),n.GetPoint=i(171),n.GetPoints=i(306),n.GetSize=i(1280),n.Inflate=i(1281),n.Intersection=i(1282),n.MarchingAnts=i(316),n.MergePoints=i(1283),n.MergeRect=i(1284),n.MergeXY=i(1285),n.Offset=i(1286),n.OffsetPoint=i(1287),n.Overlaps=i(1288),n.Perimeter=i(130),n.PerimeterPoint=i(1289),n.Random=i(174),n.RandomOutside=i(1290),n.SameDimensions=i(1291),n.Scale=i(1292),n.Union=i(441),t.exports=n},function(t,e){t.exports=function(t,e){return!(e.width*e.height>t.width*t.height)&&e.x>t.x&&e.x<t.right&&e.right>t.x&&e.right<t.right&&e.y>t.y&&e.y<t.bottom&&e.bottom>t.y&&e.bottom<t.bottom}},function(t,e,i){var n=i(4);t.exports=function(t,e){return void 0===e&&(e=new n),e.x=(t.x1+t.x2+t.x3)/3,e.y=(t.y1+t.y2+t.y3)/3,e}},function(t,e){t.exports=function(t,e,i){return t.x1+=e,t.y1+=i,t.x2+=e,t.y2+=i,t.x3+=e,t.y3+=i,t}},function(t,e,i){var n=i(4);function s(t,e,i,n){var s=t-i,r=e-n,a=s*s+r*r;return Math.sqrt(a)}t.exports=function(t,e){void 0===e&&(e=new n);var i=t.x1,r=t.y1,a=t.x2,o=t.y2,h=t.x3,l=t.y3,c=s(h,l,a,o),u=s(i,r,h,l),d=s(a,o,i,r),f=c+u+d;return e.x=(i*c+a*u+h*d)/f,e.y=(r*c+o*u+l*d)/f,e}},function(t,e){t.exports=function(t,e){return function(i,n,s,r){var a=t.getPixelAlpha(n,s,r.texture.key,r.frame.name);return a&&e<=a}}},function(t,e){t.exports=function(t,e,i){return{gameObject:t,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:e,hitAreaCallback:i,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}}},function(t,e,i){var n=new(i(0))({initialize:function(t,e){this.pad=t,this.events=t.events,this.index=e,this.value=0,this.threshold=.1},update:function(t){this.value=t},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});t.exports=n},function(t,e,i){var n=i(0),s=i(239),r=new n({initialize:function(t,e){this.pad=t,this.events=t.manager,this.index=e,this.value=0,this.threshold=1,this.pressed=!1},update:function(t){this.value=t;var e=this.pad,i=this.index;t>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(s.BUTTON_DOWN,e,this,t),this.pad.emit(s.GAMEPAD_BUTTON_DOWN,i,t,this)):this.pressed&&(this.pressed=!1,this.events.emit(s.BUTTON_UP,e,this,t),this.pad.emit(s.GAMEPAD_BUTTON_UP,i,t,this))},destroy:function(){this.pad=null,this.events=null}});t.exports=r},function(t,e,i){var n=i(509),s=i(510),r=i(0),a=i(9),o=i(3),h=new r({Extends:a,initialize:function(t,e){a.call(this),this.manager=t,this.pad=e,this.id=e.id,this.index=e.index;for(var i=[],r=0;r<e.buttons.length;r++)i.push(new s(this,r));this.buttons=i;var h=[];for(r=0;r<e.axes.length;r++)h.push(new n(this,r));this.axes=h,this.vibration=e.vibrationActuator;var l={value:0,pressed:!1};this._LCLeft=i[14]?i[14]:l,this._LCRight=i[15]?i[15]:l,this._LCTop=i[12]?i[12]:l,this._LCBottom=i[13]?i[13]:l,this._RCLeft=i[2]?i[2]:l,this._RCRight=i[1]?i[1]:l,this._RCTop=i[3]?i[3]:l,this._RCBottom=i[0]?i[0]:l,this._FBLeftTop=i[4]?i[4]:l,this._FBLeftBottom=i[6]?i[6]:l,this._FBRightTop=i[5]?i[5]:l,this._FBRightBottom=i[7]?i[7]:l;var c={value:0};this._HAxisLeft=h[0]?h[0]:c,this._VAxisLeft=h[1]?h[1]:c,this._HAxisRight=h[2]?h[2]:c,this._VAxisRight=h[3]?h[3]:c,this.leftStick=new o,this.rightStick=new o,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(t){return this.axes[t].getValue()},setAxisThreshold:function(t){for(var e=0;e<this.axes.length;e++)this.axes[e].threshold=t},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(t){return this.buttons[t].value},isButtonDown:function(t){return this.buttons[t].pressed},update:function(t){if(!(t.timestamp<this._created)){for(var e=this.buttons,i=t.buttons,n=e.length,s=0;s<n;s++)e[s].update(i[s].value);var r=this.axes,a=t.axes;for(n=r.length,s=0;s<n;s++)r[s].update(a[s]);2<=n&&(this.leftStick.set(r[0].getValue(),r[1].getValue()),4<=n&&this.rightStick.set(r[2].getValue(),r[3].getValue()))}},destroy:function(){var t;for(this.removeAllListeners(),this.manager=null,this.pad=null,t=0;t<this.buttons.length;t++)this.buttons[t].destroy();for(t=0;t<this.axes.length;t++)this.axes[t].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});t.exports=h},function(t,e,i){var n=i(0),s=i(9),r=i(154),a=new n({Extends:s,initialize:function(t,e){s.call(this),this.plugin=t,this.keyCode=e,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(t){return this.emitOnRepeat=t,this},onDown:function(t){this.originalEvent=t,this.enabled&&(this.altKey=t.altKey,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.location=t.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(r.DOWN,this,t):(this.isDown=!0,this.isUp=!1,this.timeDown=t.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(r.DOWN,this,t)))},onUp:function(t){this.originalEvent=t,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=t.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(r.UP,this,t))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});t.exports=a},function(t,e,i){var n=i(0),s=i(154),r=i(2),a=i(514),o=i(516),h=new n({initialize:function(t,e,i){if(void 0===i&&(i={}),e.length<2)return!1;this.manager=t,this.enabled=!0,this.keyCodes=[];for(var n=0;n<e.length;n++){var h=e[n];"string"==typeof h?this.keyCodes.push(h.toUpperCase().charCodeAt(0)):"number"==typeof h?this.keyCodes.push(h):h.hasOwnProperty("keyCode")&&this.keyCodes.push(h.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=r(i,"resetOnWrongKey",!0),this.maxKeyDelay=r(i,"maxKeyDelay",0),this.resetOnMatch=r(i,"resetOnMatch",!1),this.deleteOnMatch=r(i,"deleteOnMatch",!1);var l=this;this.onKeyDown=function(t){!l.matched&&l.enabled&&a(t,l)&&(l.manager.emit(s.COMBO_MATCH,l,t),l.resetOnMatch?o(l):l.deleteOnMatch&&l.destroy())},this.manager.on(s.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(s.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});t.exports=h},function(t,e,i){var n=i(515);t.exports=function(t,e){if(e.matched)return!0;var i,s=!1,r=!1;return t.keyCode===e.current&&(0<e.index&&0<e.maxKeyDelay?(i=e.timeLastMatched+e.maxKeyDelay,t.timeStamp<=i&&(r=!0,s=n(t,e))):(r=!0,s=n(t,e))),!r&&e.resetOnWrongKey&&(e.index=0,e.current=e.keyCodes[0]),s&&(e.timeLastMatched=t.timeStamp,e.matched=!0,e.timeMatched=t.timeStamp),s}},function(t,e){t.exports=function(t,e){return e.timeLastMatched=t.timeStamp,e.index++,e.index===e.size||(e.current=e.keyCodes[e.index],!1)}},function(t,e){t.exports=function(t){return t.current=t.keyCodes[0],t.index=0,t.timeLastMatched=0,t.matched=!1,t.timeMatched=0,t}},function(t,e,i){var n=i(240);t.exports=function(t,e){var i=n(e,t.xhrSettings),s=new XMLHttpRequest;if(s.open("GET",t.src,i.async,i.user,i.password),s.responseType=t.xhrSettings.responseType,s.timeout=i.timeout,i.headers)for(var r in i.headers)s.setRequestHeader(r,i.headers[r]);return i.header&&i.headerValue&&s.setRequestHeader(i.header,i.headerValue),i.requestedWith&&s.setRequestHeader("X-Requested-With",i.requestedWith),i.overrideMimeType&&s.overrideMimeType(i.overrideMimeType),i.withCredentials&&(s.withCredentials=!0),s.onload=t.onLoad.bind(t,s),s.onerror=t.onError.bind(t,s),s.onprogress=t.onProgress.bind(t),s.send(),s}},function(t,e,i){var n=i(0),s=i(21),r=i(23),a=i(8),o=i(2),h=i(519),l=i(7),c=new n({Extends:r,initialize:function(t,e,i,n,s){var a;l(e)&&(e=o(a=e,"key"),n=o(a,"xhrSettings"),s=o(a,"context",s));var h={type:"audio",cache:t.cacheManager.audio,extension:i.type,responseType:"arraybuffer",key:e,url:i.url,xhrSettings:n,config:{context:s}};r.call(this,t,h)},onProcess:function(){this.state=s.FILE_PROCESSING;var t=this;this.config.context.decodeAudioData(this.xhrLoader.response,(function(e){t.data=e,t.onProcessComplete()}),(function(e){console.error("Error decoding audio: "+t.key+" - ",e?e.message:null),t.onProcessError()})),this.config.context=null}});c.create=function(t,e,i,n,s){var r=t.systems.game,a=r.config.audio,u=r.device.audio;l(e)&&(i=o(e,"url",[]),n=o(e,"config",{}));var d=c.getAudioURL(r,i);return d?u.webAudio&&!a.disableWebAudio?new c(t,e,d,s,r.sound.context):new h(t,e,d,n):null},c.getAudioURL=function(t,e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var n=o(e[i],"url",e[i]);if(0===n.indexOf("blob:")||0===n.indexOf("data:"))return{url:n,type:""};var s=n.match(/\.([a-zA-Z0-9]+)($|\?)/);if(s=o(e[i],"type",s?s[1]:"").toLowerCase(),t.device.audio[s])return{url:n,type:s}}return null},a.register("audio",(function(t,e,i,n){var s,r=this.systems.game,a=r.config.audio,o=r.device.audio;if(a.noAudio||!o.webAudio&&!o.audioData)return this;if(Array.isArray(t))for(var h=0;h<t.length;h++)(s=c.create(this,t[h]))&&this.addFile(s);else(s=c.create(this,t,e,i,n))&&this.addFile(s);return this})),t.exports=c},function(t,e,i){var n=i(0),s=i(95),r=i(23),a=i(2),o=i(155),h=i(7),l=new n({Extends:r,initialize:function(t,e,i,n){var s;h(e)&&(e=a(s=e,"key"),n=a(s,"config",n));var o={type:"audio",cache:t.cacheManager.audio,extension:i.type,key:e,url:i.url,config:n};r.call(this,t,o),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var t=0;t<this.data.length;t++){var e=this.data[t];e.oncanplaythrough=null,e.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(t){var e=t.target;e.oncanplaythrough=null,e.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(s.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var t=this.config&&this.config.instances||1;this.filesTotal=t,this.filesLoaded=0;for(var e=this.percentComplete=0;e<t;e++){var i=new Audio;i.dataset||(i.dataset={}),i.dataset.name=this.key+("0"+e).slice(-2),i.dataset.used="false",this.locked?i.dataset.locked="true":(i.dataset.locked="false",i.preload="auto",i.oncanplaythrough=this.onProgress.bind(this),i.onerror=this.onError.bind(this)),this.data.push(i)}for(e=0;e<this.data.length;e++)(i=this.data[e]).src=o(this,this.loader.baseURL),this.locked||i.load();this.locked&&setTimeout(this.onLoad.bind(this))}});t.exports=l},function(t,e,i){var n=i(0),s=i(21),r=i(23),a=i(8),o=i(2),h=i(7),l=new n({Extends:r,initialize:function(t,e,i,n){var s,a="js";h(e)&&(e=o(s=e,"key"),i=o(s,"url"),n=o(s,"xhrSettings"),a=o(s,"extension",a));var l={type:"script",cache:!1,extension:a,responseType:"text",key:e,url:i,xhrSettings:n};r.call(this,t,l)},onProcess:function(){this.state=s.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});a.register("script",(function(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new l(this,t[n]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},function(t,e,i){var n=i(522),s=i(157),r=i(0),a=i(62),o=i(524),h=i(525),l=new r({initialize:function(t){this.world=t,this.scene=t.scene,this.sys=t.scene.sys},collider:function(t,e,i,n,s){return this.world.addCollider(t,e,i,n,s)},overlap:function(t,e,i,n,s){return this.world.addOverlap(t,e,i,n,s)},existing:function(t,e){var i=e?a.STATIC_BODY:a.DYNAMIC_BODY;return this.world.enableBody(t,i),t},staticImage:function(t,e,i,s){var r=new n(this.scene,t,e,i,s);return this.sys.displayList.add(r),this.world.enableBody(r,a.STATIC_BODY),r},image:function(t,e,i,s){var r=new n(this.scene,t,e,i,s);return this.sys.displayList.add(r),this.world.enableBody(r,a.DYNAMIC_BODY),r},staticSprite:function(t,e,i,n){var r=new s(this.scene,t,e,i,n);return this.sys.displayList.add(r),this.sys.updateList.add(r),this.world.enableBody(r,a.STATIC_BODY),r},sprite:function(t,e,i,n){var r=new s(this.scene,t,e,i,n);return this.sys.displayList.add(r),this.sys.updateList.add(r),this.world.enableBody(r,a.DYNAMIC_BODY),r},staticGroup:function(t,e){return this.sys.updateList.add(new h(this.world,this.world.scene,t,e))},group:function(t,e){return this.sys.updateList.add(new o(this.world,this.world.scene,t,e))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});t.exports=l},function(t,e,i){var n=i(0),s=i(243),r=i(125),a=new n({Extends:r,Mixins:[s.Acceleration,s.Angular,s.Bounce,s.Debug,s.Drag,s.Enable,s.Friction,s.Gravity,s.Immovable,s.Mass,s.Pushable,s.Size,s.Velocity],initialize:function(t,e,i,n,s){r.call(this,t,e,i,n,s),this.body=null}});t.exports=a},function(t,e,i){var n=i(244),s=i(65),r=i(231),a=i(151);t.exports=function(t,e,i,o,h,l){var c=n(t,e-o,i-o,2*o,2*o,h,l);if(0===c.length)return c;for(var u=new s(e,i,o),d=new s,f=[],p=0;p<c.length;p++){var g=c[p];g.isCircle?(d.setTo(g.center.x,g.center.y,g.halfWidth),r(u,d)&&f.push(g)):a(u,g)&&f.push(g)}return f}},function(t,e,i){var n=i(157),s=i(0),r=i(62),a=i(2),o=i(113),h=i(7),l=new s({Extends:o,initialize:function(t,e,i,s){var l;i||s?h(i)?(s=i,i=null,s.internalCreateCallback=this.createCallbackHandler,s.internalRemoveCallback=this.removeCallbackHandler):Array.isArray(i)&&h(i[0])?(s=i[0],l=this,i.forEach((function(t){t.internalCreateCallback=l.createCallbackHandler,t.internalRemoveCallback=l.removeCallbackHandler})),i=null):s={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler}:s={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=t,s.classType=a(s,"classType",n),this.physicsType=r.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:a(s,"collideWorldBounds",!1),setBoundsRectangle:a(s,"customBoundsRectangle",null),setAccelerationX:a(s,"accelerationX",0),setAccelerationY:a(s,"accelerationY",0),setAllowDrag:a(s,"allowDrag",!0),setAllowGravity:a(s,"allowGravity",!0),setAllowRotation:a(s,"allowRotation",!0),setBounceX:a(s,"bounceX",0),setBounceY:a(s,"bounceY",0),setDragX:a(s,"dragX",0),setDragY:a(s,"dragY",0),setEnable:a(s,"enable",!0),setGravityX:a(s,"gravityX",0),setGravityY:a(s,"gravityY",0),setFrictionX:a(s,"frictionX",0),setFrictionY:a(s,"frictionY",0),setMaxVelocityX:a(s,"maxVelocityX",1e4),setMaxVelocityY:a(s,"maxVelocityY",1e4),setVelocityX:a(s,"velocityX",0),setVelocityY:a(s,"velocityY",0),setAngularVelocity:a(s,"angularVelocity",0),setAngularAcceleration:a(s,"angularAcceleration",0),setAngularDrag:a(s,"angularDrag",0),setMass:a(s,"mass",1),setImmovable:a(s,"immovable",!1)},o.call(this,e,i,s),this.type="PhysicsGroup"},createCallbackHandler:function(t){t.body||this.world.enableBody(t,r.DYNAMIC_BODY);var e=t.body;for(var i in this.defaults)e[i](this.defaults[i])},removeCallbackHandler:function(t){t.body&&this.world.disableBody(t)},setVelocity:function(t,e,i){void 0===i&&(i=0);for(var n=this.getChildren(),s=0;s<n.length;s++)n[s].body.velocity.set(t+s*i,e+s*i);return this},setVelocityX:function(t,e){void 0===e&&(e=0);for(var i=this.getChildren(),n=0;n<i.length;n++)i[n].body.velocity.x=t+n*e;return this},setVelocityY:function(t,e){void 0===e&&(e=0);for(var i=this.getChildren(),n=0;n<i.length;n++)i[n].body.velocity.y=t+n*e;return this}});t.exports=l},function(t,e,i){var n=i(157),s=i(0),r=i(62),a=i(2),o=i(113),h=i(7),l=new s({Extends:o,initialize:function(t,e,i,s){i||s?h(i)?(s=i,i=null,s.internalCreateCallback=this.createCallbackHandler,s.internalRemoveCallback=this.removeCallbackHandler,s.createMultipleCallback=this.createMultipleCallbackHandler,s.classType=a(s,"classType",n)):Array.isArray(i)&&h(i[0])?(s=i,i=null,s.forEach((function(t){t.internalCreateCallback=this.createCallbackHandler,t.internalRemoveCallback=this.removeCallbackHandler,t.createMultipleCallback=this.createMultipleCallbackHandler,t.classType=a(t,"classType",n)}))):s={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler}:s={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:n},this.world=t,this.physicsType=r.STATIC_BODY,o.call(this,e,i,s),this.type="StaticPhysicsGroup"},createCallbackHandler:function(t){t.body||this.world.enableBody(t,r.STATIC_BODY)},removeCallbackHandler:function(t){t.body&&this.world.disableBody(t)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var t=this.children.entries,e=0;e<t.length;e++)t[e].body.reset();return this}});t.exports=l},function(t,e,i){var n=i(350),s=i(527),r=i(18),a=i(0),o=i(528),h=i(62),l=i(50),c=i(9),u=i(245),d=i(124),f=i(354),p=i(355),g=i(246),m=i(247),v=i(529),y=i(6),_=i(14),x=i(211),w=i(530),b=i(10),E=i(531),T=i(532),S=i(537),A=i(538),O=i(149),C=i(539),P=i(248),L=i(25),R=i(3),I=i(68),M=new a({Extends:c,initialize:function(t,e){c.call(this),this.scene=t,this.bodies=new O,this.staticBodies=new O,this.pendingDestroy=new O,this.colliders=new x,this.gravity=new R(y(e,"gravity.x",0),y(e,"gravity.y",0)),this.bounds=new b(y(e,"x",0),y(e,"y",0),y(e,"width",t.sys.scale.width),y(e,"height",t.sys.scale.height)),this.checkCollision={up:y(e,"checkCollision.up",!0),down:y(e,"checkCollision.down",!0),left:y(e,"checkCollision.left",!0),right:y(e,"checkCollision.right",!0)},this.fps=y(e,"fps",60),this.fixedStep=y(e,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=y(e,"timeScale",1),this.OVERLAP_BIAS=y(e,"overlapBias",4),this.TILE_BIAS=y(e,"tileBias",16),this.forceX=y(e,"forceX",!1),this.isPaused=y(e,"isPaused",!1),this._total=0,this.drawDebug=y(e,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:y(e,"debugShowBody",!0),debugShowStaticBody:y(e,"debugShowStaticBody",!0),debugShowVelocity:y(e,"debugShowVelocity",!0),bodyDebugColor:y(e,"debugBodyColor",16711935),staticBodyDebugColor:y(e,"debugStaticBodyColor",255),velocityDebugColor:y(e,"debugVelocityColor",65280)},this.maxEntries=y(e,"maxEntries",16),this.useTree=y(e,"useTree",!0),this.tree=new E(this.maxEntries),this.staticTree=new E(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new L,this._tempMatrix2=new L,this.drawDebug&&this.createDebugGraphic()},enable:function(t,e){void 0===e&&(e=h.DYNAMIC_BODY),Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var n=t[i];if(n.isParent)for(var s=n.getChildren(),r=0;r<s.length;r++){var a=s[r];a.isParent?this.enable(a,e):this.enableBody(a,e)}else this.enableBody(n,e)}},enableBody:function(t,e){return void 0===e&&(e=h.DYNAMIC_BODY),t.body||(e===h.DYNAMIC_BODY?t.body=new s(this,t):e===h.STATIC_BODY&&(t.body=new C(this,t))),this.add(t.body),t},add:function(t){return t.physicsType===h.DYNAMIC_BODY?this.bodies.set(t):t.physicsType===h.STATIC_BODY&&(this.staticBodies.set(t),this.staticTree.insert(t)),t.enable=!0,t},disable:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=t[e];if(i.isParent)for(var n=i.getChildren(),s=0;s<n.length;s++){var r=n[s];r.isParent?this.disable(r):this.disableBody(r.body)}else this.disableBody(i.body)}},disableBody:function(t){this.remove(t),t.enable=!1},remove:function(t){t.physicsType===h.DYNAMIC_BODY?(this.tree.remove(t),this.bodies.delete(t)):t.physicsType===h.STATIC_BODY&&(this.staticBodies.delete(t),this.staticTree.remove(t))},createDebugGraphic:function(){var t=this.scene.sys.add.graphics({x:0,y:0});return t.setDepth(Number.MAX_VALUE),this.debugGraphic=t,this.drawDebug=!0,t},setBounds:function(t,e,i,n,s,r,a,o){return this.bounds.setTo(t,e,i,n),void 0!==s&&this.setBoundsCollision(s,r,a,o),this},setBoundsCollision:function(t,e,i,n){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===n&&(n=!0),this.checkCollision.left=t,this.checkCollision.right=e,this.checkCollision.up=i,this.checkCollision.down=n,this},pause:function(){return this.isPaused=!0,this.emit(u.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(u.RESUME),this},addCollider:function(t,e,i,n,s){void 0===i&&(i=null),void 0===n&&(n=null),void 0===s&&(s=i);var r=new o(this,!1,t,e,i,n,s);return this.colliders.add(r),r},addOverlap:function(t,e,i,n,s){void 0===i&&(i=null),void 0===n&&(n=null),void 0===s&&(s=i);var r=new o(this,!0,t,e,i,n,s);return this.colliders.add(r),r},removeCollider:function(t){return this.colliders.remove(t),this},setFPS:function(t){return this.fps=t,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(t,e){if(!this.isPaused&&0!==this.bodies.size){var i,n=this._frameTime,s=this._frameTimeMS*this.timeScale;this._elapsed+=e;var r=this.bodies.entries,a=this._elapsed>=s;for(this.fixedStep||(n=.001*e,a=!0,this._elapsed=0),h=0;h<r.length;h++)(i=r[h]).enable&&i.preUpdate(a,n);if(a){this._elapsed-=s,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(r));for(var o=this.colliders.update(),h=0;h<o.length;h++){var l=o[h];l.active&&l.update()}this.emit(u.WORLD_STEP,n)}for(;this._elapsed>=s;)this._elapsed-=s,this.step(n)}},step:function(t){for(var e,i=this.bodies.entries,n=i.length,s=0;s<n;s++)(e=i[s]).enable&&e.update(t);this.useTree&&(this.tree.clear(),this.tree.load(i));var r=this.colliders.update();for(s=0;s<r.length;s++){var a=r[s];a.active&&a.update()}this.emit(u.WORLD_STEP,t),this.stepsLastFrame++},postUpdate:function(){var t,e=(a=this.bodies.entries).length,i=this.bodies,n=this.staticBodies;if(this.stepsLastFrame)for(c=this.stepsLastFrame=0;c<e;c++)(t=a[c]).enable&&t.postUpdate();if(this.drawDebug){var s=this.debugGraphic;for(s.clear(),c=0;c<e;c++)(t=a[c]).willDrawDebug()&&t.drawDebug(s);for(e=(a=n.entries).length,c=0;c<e;c++)(t=a[c]).willDrawDebug()&&t.drawDebug(s)}var r=this.pendingDestroy;if(0<r.size){for(var a,o=this.tree,l=this.staticTree,c=(e=(a=r.entries).length,0);c<e;c++)(t=a[c]).physicsType===h.DYNAMIC_BODY?(o.remove(t),i.delete(t)):t.physicsType===h.STATIC_BODY&&(l.remove(t),n.delete(t)),t.world=void 0,t.gameObject=void 0;r.clear()}},updateMotion:function(t,e){t.allowRotation&&this.computeAngularVelocity(t,e),this.computeVelocity(t,e)},computeAngularVelocity:function(t,e){var i=t.angularVelocity,n=t.angularAcceleration,s=t.angularDrag,a=t.maxAngular;n?i+=n*e:t.allowDrag&&s&&(f(i-(s*=e),0,.1)?i-=s:p(i+s,0,.1)?i+=s:i=0);var o=(i=r(i,-a,a))-t.angularVelocity;t.angularVelocity+=o,t.rotation+=t.angularVelocity*e},computeVelocity:function(t,e){var i=t.velocity.x,n=t.acceleration.x,s=t.drag.x,a=t.maxVelocity.x,o=t.velocity.y,h=t.acceleration.y,l=t.drag.y,c=t.maxVelocity.y,u=t.speed,g=t.maxSpeed,m=t.allowDrag,v=t.useDamping;t.allowGravity&&(i+=(this.gravity.x+t.gravity.x)*e,o+=(this.gravity.y+t.gravity.y)*e),n?i+=n*e:m&&s&&(v?(i*=s=Math.pow(s,e),u=Math.sqrt(i*i+o*o),d(u,0,.001)&&(i=0)):f(i-(s*=e),0,.01)?i-=s:p(i+s,0,.01)?i+=s:i=0),h?o+=h*e:m&&l&&(v?(o*=l=Math.pow(l,e),u=Math.sqrt(i*i+o*o),d(u,0,.001)&&(o=0)):f(o-(l*=e),0,.01)?o-=l:p(o+l,0,.01)?o+=l:o=0),i=r(i,-a,a),o=r(o,-c,c),t.velocity.set(i,o),-1<g&&g<u&&(t.velocity.normalize().scale(g),u=g),t.speed=u},separate:function(t,e,i,n,s,r){if(!r&&!t.enable||!e.enable||t.checkCollision.none||e.checkCollision.none||!this.intersects(t,e))return!1;if(i&&!1===i.call(n,t.gameObject,e.gameObject))return!1;if(t.isCircle&&e.isCircle)return this.separateCircle(t,e,s);if(t.isCircle!==e.isCircle){var a=t.isCircle?e:t,o=t.isCircle?t:e,h=a.x,l=a.y,c=a.right,d=a.bottom,f=o.center;if((f.y<l||f.y>d)&&(f.x<h||f.x>c))return this.separateCircle(t,e,s)}var p=!1,g=!1;s?(p=S(t,e,s,this.OVERLAP_BIAS),g=A(t,e,s,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+t.gravity.y)<Math.abs(this.gravity.x+t.gravity.x)?(p=S(t,e,s,this.OVERLAP_BIAS),this.intersects(t,e)&&(g=A(t,e,s,this.OVERLAP_BIAS))):(g=A(t,e,s,this.OVERLAP_BIAS),this.intersects(t,e)&&(p=S(t,e,s,this.OVERLAP_BIAS)));var m=p||g;return m&&(s?(t.onOverlap||e.onOverlap)&&this.emit(u.OVERLAP,t.gameObject,e.gameObject,t,e):(t.onCollide||e.onCollide)&&this.emit(u.COLLIDE,t.gameObject,e.gameObject,t,e)),m},separateCircle:function(t,e,i,s){g(t,e,!1,s),m(t,e,!1,s);var r,a,o=0;if(t.isCircle!==e.isCircle?(r={x:e.isCircle?t.position.x:e.position.x,y:e.isCircle?t.position.y:e.position.y,right:e.isCircle?t.right:e.right,bottom:e.isCircle?t.bottom:e.bottom},(a={x:t.isCircle?t.center.x:e.center.x,y:t.isCircle?t.center.y:e.center.y,radius:t.isCircle?t.halfWidth:e.halfWidth}).y<r.y?a.x<r.x?o=l(a.x,a.y,r.x,r.y)-a.radius:r.right<a.x&&(o=l(a.x,a.y,r.right,r.y)-a.radius):r.bottom<a.y&&(a.x<r.x?o=l(a.x,a.y,r.x,r.bottom)-a.radius:r.right<a.x&&(o=l(a.x,a.y,r.right,r.bottom)-a.radius)),o*=-1):o=t.halfWidth+e.halfWidth-l(t.center.x,t.center.y,e.center.x,e.center.y),t.overlapR=o,e.overlapR=o,i||0===o||t.immovable&&e.immovable||t.customSeparateX||e.customSeparateX)return 0!==o&&(t.onOverlap||e.onOverlap)&&this.emit(u.OVERLAP,t.gameObject,e.gameObject,t,e),0!==o;var h=t.center.x-e.center.x,c=t.center.y-e.center.y,d=Math.sqrt(Math.pow(h,2)+Math.pow(c,2)),f=(e.center.x-t.center.x)/d||0,p=(e.center.y-t.center.y)/d||0,v=2*(t.velocity.x*f+t.velocity.y*p-e.velocity.x*f-e.velocity.y*p)/(t.mass+e.mass);(t.immovable||e.immovable)&&(v*=2),t.immovable||(t.velocity.x=t.velocity.x-v/t.mass*f,t.velocity.y=t.velocity.y-v/t.mass*p),e.immovable||(e.velocity.x=e.velocity.x+v/e.mass*f,e.velocity.y=e.velocity.y+v/e.mass*p),t.immovable||e.immovable||(o/=2);var y=n(t.center,e.center),x=(o+_.EPSILON)*Math.cos(y),w=(o+_.EPSILON)*Math.sin(y);return t.immovable||(t.x-=x,t.y-=w,t.updateCenter()),e.immovable||(e.x+=x,e.y+=w,e.updateCenter()),t.velocity.x*=t.bounce.x,t.velocity.y*=t.bounce.y,e.velocity.x*=e.bounce.x,e.velocity.y*=e.bounce.y,(t.onCollide||e.onCollide)&&this.emit(u.COLLIDE,t.gameObject,e.gameObject,t,e),!0},intersects:function(t,e){return t!==e&&(t.isCircle||e.isCircle?t.isCircle?e.isCircle?l(t.center.x,t.center.y,e.center.x,e.center.y)<=t.halfWidth+e.halfWidth:this.circleBodyIntersects(t,e):this.circleBodyIntersects(e,t):!(t.right<=e.position.x||t.bottom<=e.position.y||t.position.x>=e.right||t.position.y>=e.bottom))},circleBodyIntersects:function(t,e){var i=r(t.center.x,e.left,e.right),n=r(t.center.y,e.top,e.bottom);return(t.center.x-i)*(t.center.x-i)+(t.center.y-n)*(t.center.y-n)<=t.halfWidth*t.halfWidth},overlap:function(t,e,i,n,s){return void 0===i&&(i=null),void 0===n&&(n=null),void 0===s&&(s=i),this.collideObjects(t,e,i,n,s,!0)},collide:function(t,e,i,n,s){return void 0===i&&(i=null),void 0===n&&(n=null),void 0===s&&(s=i),this.collideObjects(t,e,i,n,s,!1)},collideObjects:function(t,e,i,n,s,r){var a;t.isParent&&void 0===t.physicsType&&(t=t.children.entries),e&&e.isParent&&void 0===e.physicsType&&(e=e.children.entries);var o=Array.isArray(t),h=Array.isArray(e);if(this._total=0,o||h)if(!o&&h)for(a=0;a<e.length;a++)this.collideHandler(t,e[a],i,n,s,r);else if(o&&!h)if(e)for(a=0;a<t.length;a++)this.collideHandler(t[a],e,i,n,s,r);else for(a=0;a<t.length;a++)for(var l=t[a],c=a+1;c<t.length;c++)a!==c&&this.collideHandler(l,t[c],i,n,s,r);else for(a=0;a<t.length;a++)for(c=0;c<e.length;c++)this.collideHandler(t[a],e[c],i,n,s,r);else this.collideHandler(t,e,i,n,s,r);return 0<this._total},collideHandler:function(t,e,i,n,s,r){if(void 0===e&&t.isParent)return this.collideGroupVsGroup(t,t,i,n,s,r);if(!t||!e)return!1;if(t.body){if(e.body)return this.collideSpriteVsSprite(t,e,i,n,s,r);if(e.isParent)return this.collideSpriteVsGroup(t,e,i,n,s,r);if(e.isTilemap)return this.collideSpriteVsTilemapLayer(t,e,i,n,s,r)}else if(t.isParent){if(e.body)return this.collideSpriteVsGroup(e,t,i,n,s,r);if(e.isParent)return this.collideGroupVsGroup(t,e,i,n,s,r);if(e.isTilemap)return this.collideGroupVsTilemapLayer(t,e,i,n,s,r)}else if(t.isTilemap){if(e.body)return this.collideSpriteVsTilemapLayer(e,t,i,n,s,r);if(e.isParent)return this.collideGroupVsTilemapLayer(e,t,i,n,s,r)}},collideSpriteVsSprite:function(t,e,i,n,s,r){return!(!t.body||!e.body||(this.separate(t.body,e.body,n,s,r)&&(i&&i.call(s,t,e),this._total++),0))},collideSpriteVsGroup:function(t,e,i,n,s,r){var a,o=t.body;if(0!==e.length&&o&&o.enable&&!o.checkCollision.none)if(this.useTree||e.physicsType===h.STATIC_BODY){var l=this.treeMinMax;l.minX=o.left,l.minY=o.top,l.maxX=o.right,l.maxY=o.bottom;for(var c=e.physicsType===h.DYNAMIC_BODY?this.tree.search(l):this.staticTree.search(l),u=c.length,d=0;d<u;d++)o!==(a=c[d])&&a.enable&&!a.checkCollision.none&&e.contains(a.gameObject)&&this.separate(o,a,n,s,r,!0)&&(i&&i.call(s,o.gameObject,a.gameObject),this._total++)}else{var f=e.getChildren(),p=e.children.entries.indexOf(t);for(u=f.length,d=0;d<u;d++)(a=f[d].body)&&d!==p&&a.enable&&this.separate(o,a,n,s,r)&&(i&&i.call(s,o.gameObject,a.gameObject),this._total++)}},collideGroupVsTilemapLayer:function(t,e,i,n,s,r){var a=t.getChildren();if(0===a.length)return!1;for(var o=!1,h=0;h<a.length;h++)a[h].body&&this.collideSpriteVsTilemapLayer(a[h],e,i,n,s,r)&&(o=!0);return o},collideTiles:function(t,e,i,n,s){return!(!t.body.enable||0===e.length)&&this.collideSpriteVsTilesHandler(t,e,i,n,s,!1,!1)},overlapTiles:function(t,e,i,n,s){return!(!t.body.enable||0===e.length)&&this.collideSpriteVsTilesHandler(t,e,i,n,s,!0,!1)},collideSpriteVsTilemapLayer:function(t,e,i,n,s,r){var a=t.body;if(!a.enable||a.checkCollision.none)return!1;var o,h=a.position.x,l=a.position.y,c=a.width,u=a.height,d=e.layer;d.tileWidth>d.baseTileWidth&&(h-=o=(d.tileWidth-d.baseTileWidth)*e.scaleX,c+=o),d.tileHeight>d.baseTileHeight&&(u+=(d.tileHeight-d.baseTileHeight)*e.scaleY);var f=v(h,l,c,u,null,e.scene.cameras.main,e.layer);return 0!==f.length&&this.collideSpriteVsTilesHandler(t,f,i,n,s,r,!0)},collideSpriteVsTilesHandler:function(t,e,i,n,s,r,a){for(var o,h,l=t.body,c={left:0,right:0,top:0,bottom:0},d=!1,f=0;f<e.length;f++){var p=(h=(o=e[f]).tilemapLayer).tileToWorldXY(o.x,o.y);c.left=p.x,c.top=p.y,o.baseHeight!==o.height&&(c.top-=(o.height-o.baseHeight)*h.scaleY),c.right=c.left+o.width*h.scaleX,c.bottom=c.top+o.height*h.scaleY,P(c,l)&&(!n||n.call(s,t,o))&&w(o,t)&&(r||T(f,l,o,c,h,this.TILE_BIAS,a))&&(this._total++,d=!0,i&&i.call(s,t,o),r&&l.onOverlap?this.emit(u.TILE_OVERLAP,t,o,l):l.onCollide&&this.emit(u.TILE_COLLIDE,t,o,l))}return d},collideGroupVsGroup:function(t,e,i,n,s,r){if(0!==t.length&&0!==e.length)for(var a=t.getChildren(),o=0;o<a.length;o++)this.collideSpriteVsGroup(a[o],e,i,n,s,r)},wrap:function(t,e){t.body?this.wrapObject(t,e):t.getChildren?this.wrapArray(t.getChildren(),e):Array.isArray(t)?this.wrapArray(t,e):this.wrapObject(t,e)},wrapArray:function(t,e){for(var i=0;i<t.length;i++)this.wrapObject(t[i],e)},wrapObject:function(t,e){void 0===e&&(e=0),t.x=I(t.x,this.bounds.left-e,this.bounds.right+e),t.y=I(t.y,this.bounds.top-e,this.bounds.bottom+e)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});t.exports=M},function(t,e,i){var n=i(0),s=i(62),r=i(245),a=i(196),o=i(10),h=i(57),l=i(3),c=new n({initialize:function(t,e){var i=e.displayWidth?e.displayWidth:64,n=e.displayHeight?e.displayHeight:64;this.world=t,this.gameObject=e,this.transform={x:e.x,y:e.y,rotation:e.angle,scaleX:e.scaleX,scaleY:e.scaleY,displayOriginX:e.displayOriginX,displayOriginY:e.displayOriginY},this.debugShowBody=t.defaults.debugShowBody,this.debugShowVelocity=t.defaults.debugShowVelocity,this.debugBodyColor=t.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new l,this.position=new l(e.x-e.scaleX*e.displayOriginX,e.y-e.scaleY*e.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=e.angle,this.preRotation=e.angle,this.width=i,this.height=n,this.sourceWidth=i,this.sourceHeight=n,e.frame&&(this.sourceWidth=e.frame.realWidth,this.sourceHeight=e.frame.realHeight),this.halfWidth=Math.abs(i/2),this.halfHeight=Math.abs(n/2),this.center=new l(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new l,this.newVelocity=new l,this.deltaMax=new l,this.acceleration=new l,this.allowDrag=!0,this.drag=new l,this.allowGravity=!0,this.gravity=new l,this.bounce=new l,this.worldBounce=null,this.customBoundsRectangle=t.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new l(1e4,1e4),this.maxSpeed=-1,this.friction=new l(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=s.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=s.DYNAMIC_BODY,this._sx=e.scaleX,this._sy=e.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new o},updateBounds:function(){var t,e=this.gameObject,i=this.transform;e.parentContainer?(t=e.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2),i.x=t.tx,i.y=t.ty,i.rotation=a(t.rotation),i.scaleX=t.scaleX,i.scaleY=t.scaleY):(i.x=e.x,i.y=e.y,i.rotation=e.angle,i.scaleX=e.scaleX,i.scaleY=e.scaleY),i.displayOriginX=e.displayOriginX,i.displayOriginY=e.displayOriginY;var n,s,r,o=!1;this.syncBounds?(n=e.getBounds(this._bounds),this.width=n.width,this.height=n.height,o=!0):(s=Math.abs(i.scaleX),r=Math.abs(i.scaleY),this._sx===s&&this._sy===r||(this.width=this.sourceWidth*s,this.height=this.sourceHeight*r,this._sx=s,this._sy=r,o=!0)),o&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var t=this.transform;this.position.x=t.x+t.scaleX*(this.offset.x-t.displayOriginX),this.position.y=t.y+t.scaleY*(this.offset.y-t.displayOriginY),this.updateCenter()},resetFlags:function(t){void 0===t&&(t=!1);var e=this.wasTouching,i=this.touching,n=this.blocked;t?(e.none=!0,e.up=!1,e.down=!1,e.left=!1,e.right=!1):(e.none=i.none,e.up=i.up,e.down=i.down,e.left=i.left,e.right=i.right),i.none=!0,i.up=!1,i.down=!1,i.left=!1,i.right=!1,n.none=!0,n.up=!1,n.down=!1,n.left=!1,n.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(t,e){t&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),t&&this.update(e)},update:function(t){var e,i;this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves&&(this.world.updateMotion(this,t),e=this.velocity.x,i=this.velocity.y,this.newVelocity.set(e*t,i*t),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(i,e),this.speed=Math.sqrt(e*e+i*i),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(r.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)),this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var t,e,i=this.position.x-this.prevFrame.x,n=this.position.y-this.prevFrame.y;this.moves&&(0!==(t=this.deltaMax.x)&&0!==i&&(i<0&&i<-t?i=-t:0<i&&t<i&&(i=t)),0!==(e=this.deltaMax.y)&&0!==n&&(n<0&&n<-e?n=-e:0<n&&e<n&&(n=e)),this.gameObject.x+=i,this.gameObject.y+=n),i<0?this.facing=s.FACING_LEFT:0<i&&(this.facing=s.FACING_RIGHT),n<0?this.facing=s.FACING_UP:0<n&&(this.facing=s.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=i,this._ty=n},setBoundsRectangle:function(t){return this.customBoundsRectangle=t||this.world.bounds,this},checkWorldBounds:function(){var t=this.position,e=this.customBoundsRectangle,i=this.world.checkCollision,n=this.worldBounce?-this.worldBounce.x:-this.bounce.x,s=this.worldBounce?-this.worldBounce.y:-this.bounce.y,r=!1;return t.x<e.x&&i.left?(t.x=e.x,this.velocity.x*=n,r=this.blocked.left=!0):this.right>e.right&&i.right&&(t.x=e.right-this.width,this.velocity.x*=n,r=this.blocked.right=!0),t.y<e.y&&i.up?(t.y=e.y,this.velocity.y*=s,r=this.blocked.up=!0):this.bottom>e.bottom&&i.down&&(t.y=e.bottom-this.height,this.velocity.y*=s,r=this.blocked.down=!0),r&&(this.blocked.none=!1,this.updateCenter()),r},setOffset:function(t,e){return void 0===e&&(e=t),this.offset.set(t,e),this},setSize:function(t,e,i){void 0===i&&(i=!0);var n,s,r=this.gameObject;return!t&&r.frame&&(t=r.frame.realWidth),!e&&r.frame&&(e=r.frame.realHeight),this.sourceWidth=t,this.sourceHeight=e,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),i&&r.getCenter&&(n=(r.width-t)/2,s=(r.height-e)/2,this.offset.set(n,s)),this.isCircle=!1,this.radius=0,this},setCircle:function(t,e,i){return void 0===e&&(e=this.offset.x),void 0===i&&(i=this.offset.y),0<t?(this.isCircle=!0,this.radius=t,this.sourceWidth=2*t,this.sourceHeight=2*t,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(e,i),this.updateCenter()):this.isCircle=!1,this},reset:function(t,e){this.stop();var i=this.gameObject;i.setPosition(t,e),i.getTopLeft?i.getTopLeft(this.position):this.position.set(t,e),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=i.angle,this.preRotation=i.angle,this.updateBounds(),this.updateCenter(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function(t,e){return this.isCircle?0<this.radius&&t>=this.left&&t<=this.right&&e>=this.top&&e<=this.bottom&&(this.center.x-t)*(this.center.x-t)+(this.center.y-e)*(this.center.y-e)<=this.radius*this.radius:h(this,t,e)},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return 0<this._dx?this._dx:-this._dx},deltaAbsY:function(){return 0<this._dy?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(t){var e=this.position,i=e.x+this.halfWidth,n=e.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(t.defaultStrokeWidth,this.debugBodyColor),this.isCircle?t.strokeCircle(i,n,this.width/2):(this.checkCollision.up&&t.lineBetween(e.x,e.y,e.x+this.width,e.y),this.checkCollision.right&&t.lineBetween(e.x+this.width,e.y,e.x+this.width,e.y+this.height),this.checkCollision.down&&t.lineBetween(e.x,e.y+this.height,e.x+this.width,e.y+this.height),this.checkCollision.left&&t.lineBetween(e.x,e.y,e.x,e.y+this.height))),this.debugShowVelocity&&(t.lineStyle(t.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),t.lineBetween(i,n,i+this.velocity.x/2,n+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(t,e,i,n){void 0===t&&(t=!0),this.collideWorldBounds=t;var s=void 0!==e,r=void 0!==i;return(s||r)&&(this.worldBounce||(this.worldBounce=new l),s&&(this.worldBounce.x=e),r&&(this.worldBounce.y=i)),void 0!==n&&(this.onWorldBounds=n),this},setVelocity:function(t,e){return this.velocity.set(t,e),t=this.velocity.x,e=this.velocity.y,this.speed=Math.sqrt(t*t+e*e),this},setVelocityX:function(t){this.velocity.x=t;var e=this.velocity.y;return this.speed=Math.sqrt(t*t+e*e),this},setVelocityY:function(t){this.velocity.y=t;var e=this.velocity.x;return this.speed=Math.sqrt(e*e+t*t),this},setMaxVelocity:function(t,e){return this.maxVelocity.set(t,e),this},setMaxVelocityX:function(t){return this.maxVelocity.x=t,this},setMaxVelocityY:function(t){return this.maxVelocity.y=t,this},setMaxSpeed:function(t){return this.maxSpeed=t,this},setBounce:function(t,e){return this.bounce.set(t,e),this},setBounceX:function(t){return this.bounce.x=t,this},setBounceY:function(t){return this.bounce.y=t,this},setAcceleration:function(t,e){return this.acceleration.set(t,e),this},setAccelerationX:function(t){return this.acceleration.x=t,this},setAccelerationY:function(t){return this.acceleration.y=t,this},setAllowDrag:function(t){return void 0===t&&(t=!0),this.allowDrag=t,this},setAllowGravity:function(t){return void 0===t&&(t=!0),this.allowGravity=t,this},setAllowRotation:function(t){return void 0===t&&(t=!0),this.allowRotation=t,this},setDrag:function(t,e){return this.drag.set(t,e),this},setDamping:function(t){return this.useDamping=t,this},setDragX:function(t){return this.drag.x=t,this},setDragY:function(t){return this.drag.y=t,this},setGravity:function(t,e){return this.gravity.set(t,e),this},setGravityX:function(t){return this.gravity.x=t,this},setGravityY:function(t){return this.gravity.y=t,this},setFriction:function(t,e){return this.friction.set(t,e),this},setFrictionX:function(t){return this.friction.x=t,this},setFrictionY:function(t){return this.friction.y=t,this},setAngularVelocity:function(t){return this.angularVelocity=t,this},setAngularAcceleration:function(t){return this.angularAcceleration=t,this},setAngularDrag:function(t){return this.angularDrag=t,this},setMass:function(t){return this.mass=t,this},setImmovable:function(t){return void 0===t&&(t=!0),this.immovable=t,this},setEnable:function(t){return void 0===t&&(t=!0),this.enable=t,this},processX:function(t,e,i,n){this.x+=t,this.updateCenter(),null!==e&&(this.velocity.x=e);var s=this.blocked;i&&(s.left=!0),n&&(s.right=!0)},processY:function(t,e,i,n){this.y+=t,this.updateCenter(),null!==e&&(this.velocity.y=e);var s=this.blocked;i&&(s.up=!0),n&&(s.down=!0)},x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});t.exports=c},function(t,e,i){var n=new(i(0))({initialize:function(t,e,i,n,s,r,a){this.world=t,this.name="",this.active=!0,this.overlapOnly=e,this.object1=i,this.object2=n,this.collideCallback=s,this.processCallback=r,this.callbackContext=a},setName:function(t){return this.name=t,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});t.exports=n},function(t,e,i){var n=i(26),s=i(3),r=new s,a=new s;t.exports=function(t,e,i,s,o,h,l){var c=l.tilemapLayer.tilemap._convert.WorldToTileXY;c(t,e,!0,r,h,l);var u=r.x,d=r.y;c(t+i,e+s,!1,a,h,l);var f=Math.ceil(a.x),p=Math.ceil(a.y);return n(u,d,f-u,p-d,o,l)}},function(t,e){t.exports=function(t,e){return t.collisionCallback?!t.collisionCallback.call(t.collisionCallbackContext,e,t):!t.layer.callbacks[t.index]||!t.layer.callbacks[t.index].callback.call(t.layer.callbacks[t.index].callbackContext,e,t)}},function(t,e,i){var n=i(436);function s(t){if(!(this instanceof s))return new s(t);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}function r(t,e){a(t,0,t.children.length,e,t)}function a(t,e,i,n,s){(s=s||p(null)).minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var r,a=e;a<i;a++)r=t.children[a],o(s,t.leaf?n(r):r);return s}function o(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function h(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(t,e,i,s,r){for(var a,o=[e,i];o.length;)(i=o.pop())-(e=o.pop())<=s||(a=e+Math.ceil((i-e)/s/2)*s,n(t,a,e,i,r),o.push(e,a,a,i))}s.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],n=this.toBBox;if(!f(t,e))return i;for(var s,r,a,o,h=[];e;){for(s=0,r=e.children.length;s<r;s++)a=e.children[s],f(t,o=e.leaf?n(a):a)&&(e.leaf?i.push(a):d(t,o)?this._all(a,i):h.push(a));e=h.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!f(t,e))return!1;for(var n,s,r,a,o=[];e;){for(n=0,s=e.children.length;n<s;n++)if(r=e.children[n],f(t,a=e.leaf?i(r):r)){if(e.leaf||d(t,a))return!0;o.push(r)}e=o.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var n,s=this._build(t.slice(),0,t.length-1,0);return this.data.children.length?this.data.height===s.height?this._splitRoot(this.data,s):(this.data.height<s.height&&(n=this.data,this.data=s,s=n),this._insert(s,this.data.height-s.height-1,!0)):this.data=s,this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=p([]),this},remove:function(t,e){if(!t)return this;for(var i,n,s,r,a=this.data,o=this.toBBox(t),h=[],l=[];a||h.length;){if(a||(a=h.pop(),n=h[h.length-1],i=l.pop(),r=!0),a.leaf&&-1!==(s=function(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}(t,a.children,e)))return a.children.splice(s,1),h.push(a),this._condense(h),this;r||a.leaf||!d(a,o)?n?(i++,a=n.children[i],r=!1):a=null:(h.push(a),l.push(i),i=0,a=(n=a).children[0])}return this},toBBox:function(t){return{minX:t.left,minY:t.top,maxX:t.right,maxY:t.bottom}},compareMinX:function(t,e){return t.left-e.left},compareMinY:function(t,e){return t.top-e.top},toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,n){var s,a=i-e+1,o=this._maxEntries;if(a<=o)return r(s=p(t.slice(e,i+1)),this.toBBox),s;n||(n=Math.ceil(Math.log(a)/Math.log(o)),o=Math.ceil(a/Math.pow(o,n-1))),(s=p([])).leaf=!1,s.height=n;var h,l,c,u,d=Math.ceil(a/o),f=d*Math.ceil(Math.sqrt(o));for(g(t,e,i,f,this.compareMinX),h=e;h<=i;h+=f)for(g(t,h,c=Math.min(h+f-1,i),d,this.compareMinY),l=h;l<=c;l+=d)u=Math.min(l+d-1,c),s.children.push(this._build(t,l,u,n-1));return r(s,this.toBBox),s},_chooseSubtree:function(t,e,i,n){for(var s,r,a,o,h,l,u,d,f,p;n.push(e),!e.leaf&&n.length-1!==i;){for(u=d=1/0,s=0,r=e.children.length;s<r;s++)h=c(a=e.children[s]),f=t,p=a,(l=(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-h)<d?(d=l,u=h<u?h:u,o=a):l===d&&h<u&&(u=h,o=a);e=o||e.children[0]}return e},_insert:function(t,e,i){var n=this.toBBox,s=i?t:n(t),r=[],a=this._chooseSubtree(s,this.data,e,r);for(a.children.push(t),o(a,s);0<=e&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(s,r,e)},_split:function(t,e){var i=t[e],n=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,n);var a=this._chooseSplitIndex(i,s,n),o=p(i.children.splice(a,i.children.length-a));o.height=i.height,o.leaf=i.leaf,r(i,this.toBBox),r(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(t,e){this.data=p([t,e]),this.data.height=t.height+1,this.data.leaf=!1,r(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){for(var n,s,r,o,h,l,u,d,f,p,g,m,v=h=1/0,y=e;y<=i-e;y++)u=n=a(t,0,y,this.toBBox),d=s=a(t,y,i,this.toBBox),f=Math.max(u.minX,d.minX),p=Math.max(u.minY,d.minY),g=Math.min(u.maxX,d.maxX),m=Math.min(u.maxY,d.maxY),r=Math.max(0,g-f)*Math.max(0,m-p),o=c(n)+c(s),r<v?(v=r,l=y,h=o<h?o:h):r===v&&o<h&&(h=o,l=y);return l},_chooseSplitAxis:function(t,e,i){var n=t.leaf?this.compareMinX:h,s=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,s)&&t.children.sort(n)},_allDistMargin:function(t,e,i,n){t.children.sort(n);for(var s,r=this.toBBox,h=a(t,0,e,r),l=a(t,i-e,i,r),c=u(h)+u(l),d=e;d<i-e;d++)s=t.children[d],o(h,t.leaf?r(s):s),c+=u(h);for(d=i-e-1;e<=d;d--)s=t.children[d],o(l,t.leaf?r(s):s),c+=u(l);return c},_adjustParentBBoxes:function(t,e,i){for(var n=i;0<=n;n--)o(e[n],t)},_condense:function(t){for(var e,i=t.length-1;0<=i;i--)0===t[i].children.length?0<i?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():r(t[i],this.toBBox)}},t.exports=s},function(t,e,i){var n=i(533),s=i(535),r=i(248);t.exports=function(t,e,i,a,o,h,l){var c=a.left,u=a.top,d=a.right,f=a.bottom,p=i.faceLeft||i.faceRight,g=i.faceTop||i.faceBottom;if(l||(g=p=!0),!p&&!g)return!1;var m=0,v=0,y=0,_=1;if(e.deltaAbsX()>e.deltaAbsY()?y=-1:e.deltaAbsX()<e.deltaAbsY()&&(_=-1),0!==e.deltaX()&&0!==e.deltaY()&&p&&g&&(y=Math.min(Math.abs(e.position.x-d),Math.abs(e.right-c)),_=Math.min(Math.abs(e.position.y-f),Math.abs(e.bottom-u))),y<_){if(p&&0!==(m=n(e,i,c,d,h,l))&&!r(a,e))return!0;g&&(v=s(e,i,u,f,h,l))}else{if(g&&0!==(v=s(e,i,u,f,h,l))&&!r(a,e))return!0;p&&(m=n(e,i,c,d,h,l))}return 0!==m||0!==v}},function(t,e,i){var n=i(534);t.exports=function(t,e,i,s,r,a){var o=0,h=e.faceLeft,l=e.faceRight,c=e.collideLeft,u=e.collideRight;return a||(u=c=l=h=!0),t.deltaX()<0&&u&&t.checkCollision.left?l&&t.x<s&&(o=t.x-s)<-r&&(o=0):0<t.deltaX()&&c&&t.checkCollision.right&&h&&t.right>i&&r<(o=t.right-i)&&(o=0),0!==o&&(t.customSeparateX?t.overlapX=o:n(t,o)),o}},function(t,e){t.exports=function(t,e){e<0?(t.blocked.none=!1,t.blocked.left=!0):0<e&&(t.blocked.none=!1,t.blocked.right=!0),t.position.x-=e,0===t.bounce.x?t.velocity.x=0:t.velocity.x=-t.velocity.x*t.bounce.x}},function(t,e,i){var n=i(536);t.exports=function(t,e,i,s,r,a){var o=0,h=e.faceTop,l=e.faceBottom,c=e.collideUp,u=e.collideDown;return a||(u=c=l=h=!0),t.deltaY()<0&&u&&t.checkCollision.up?l&&t.y<s&&(o=t.y-s)<-r&&(o=0):0<t.deltaY()&&c&&t.checkCollision.down&&h&&t.bottom>i&&r<(o=t.bottom-i)&&(o=0),0!==o&&(t.customSeparateY?t.overlapY=o:n(t,o)),o}},function(t,e){t.exports=function(t,e){e<0?(t.blocked.none=!1,t.blocked.up=!0):0<e&&(t.blocked.none=!1,t.blocked.down=!0),t.position.y-=e,0===t.bounce.y?t.velocity.y=0:t.velocity.y=-t.velocity.y*t.bounce.y}},function(t,e,i){var n=i(246),s=i(1389);t.exports=function(t,e,i,r){var a=n(t,e,i,r),o=t.immovable,h=e.immovable;if(i||0===a||o&&h||t.customSeparateX||e.customSeparateX)return 0!==a||t.embedded&&e.embedded;var l=s.Set(t,e,a);return o||h?(o?s.RunImmovableBody1(l):h&&s.RunImmovableBody2(l),!0):0<l||s.Check()}},function(t,e,i){var n=i(247),s=i(1390);t.exports=function(t,e,i,r){var a=n(t,e,i,r),o=t.immovable,h=e.immovable;if(i||0===a||o&&h||t.customSeparateY||e.customSeparateY)return 0!==a||t.embedded&&e.embedded;var l=s.Set(t,e,a);return o||h?(o?s.RunImmovableBody1(l):h&&s.RunImmovableBody2(l),!0):0<l||s.Check()}},function(t,e,i){var n=i(66),s=i(0),r=i(62),a=i(57),o=i(3),h=new s({initialize:function(t,e){var i=e.displayWidth?e.displayWidth:64,n=e.displayHeight?e.displayHeight:64;this.world=t,this.gameObject=e,this.debugShowBody=t.defaults.debugShowStaticBody,this.debugBodyColor=t.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new o,this.position=new o(e.x-i*e.originX,e.y-n*e.originY),this.width=i,this.height=n,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new o(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=o.ZERO,this.allowGravity=!1,this.gravity=o.ZERO,this.bounce=o.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=r.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(t,e){return t&&t!==this.gameObject&&(this.gameObject.body=null,(t.body=this).gameObject=t),e&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var t=this.gameObject;return t.getTopLeft(this.position),this.width=t.displayWidth,this.height=t.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(t,e){return void 0===e&&(e=t),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(t,e),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(t,e,i){void 0===i&&(i=!0);var n,s,r=this.gameObject;return!t&&r.frame&&(t=r.frame.realWidth),!e&&r.frame&&(e=r.frame.realHeight),this.world.staticTree.remove(this),this.width=t,this.height=e,this.halfWidth=Math.floor(t/2),this.halfHeight=Math.floor(e/2),i&&r.getCenter&&(n=r.displayWidth/2,s=r.displayHeight/2,this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(n-this.halfWidth,s-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y),this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(t,e,i){return void 0===e&&(e=this.offset.x),void 0===i&&(i=this.offset.y),0<t?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=t,this.width=2*t,this.height=2*t,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(e,i),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(t,e){var i=this.gameObject;void 0===t&&(t=i.x),void 0===e&&(e=i.y),this.world.staticTree.remove(this),i.setPosition(t,e),i.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function(t,e){return(this.isCircle?n:a)(this,t,e)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(t){var e=this.position,i=e.x+this.halfWidth,n=e.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(t.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?t.strokeCircle(i,n,this.width/2):t.strokeRect(e.x,e.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(t){return t<=0&&(t=.1),this.mass=t,this},x:{get:function(){return this.position.x},set:function(t){this.world.staticTree.remove(this),this.position.x=t,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(t){this.world.staticTree.remove(this),this.position.y=t,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});t.exports=h},function(t,e,i){var n=new(i(0))({initialize:function(t){this.pluginManager=t,this.game=t.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=n},function(t,e,i){var n=new(i(3));t.exports=function(t,e,i,s){var r=i.tilemapLayer,a=r.cullPaddingX,o=r.cullPaddingY,h=r.tilemap.tileToWorldXY(t,e,n,s,r);return h.x>s.worldView.x+r.scaleX*i.tileWidth*(-a-.5)&&h.x<s.worldView.right+r.scaleX*i.tileWidth*(a-.5)&&h.y>s.worldView.y+r.scaleY*i.tileHeight*(-o-1)&&h.y<s.worldView.bottom+r.scaleY*i.tileHeight*(o-.5)}},function(t,e,i){var n=i(26);t.exports=function(t,e,i,s,r,a,o){for(var h=n(i,s,r,a,null,o),l=0;l<h.length;l++)h[l]&&h[l].index===t&&(h[l].index=e)}},function(t,e,i){var n=i(10),s=i(139),r=i(76),a=new n;t.exports=function(t,e){var i=t.tilemapLayer.tilemap,n=t.tilemapLayer,o=Math.floor(i.tileWidth*n.scaleX),h=Math.floor(i.tileHeight*n.scaleY),l=r(e.worldView.x-n.x,o,0,!0)-n.cullPaddingX,c=s(e.worldView.right-n.x,o,0,!0)+n.cullPaddingX,u=r(e.worldView.y-n.y,h,0,!0)-n.cullPaddingY,d=s(e.worldView.bottom-n.y,h,0,!0)+n.cullPaddingY;return a.setTo(l,u,c-l,d-u)}},function(t,e,i){var n=i(543),s=i(159);t.exports=function(t,e,i,r){void 0===i&&(i=[]),void 0===r&&(r=0),i.length=0;var a=t.tilemapLayer,o=n(t,e);return!a.skipCull&&1===a.scrollFactorX&&1===a.scrollFactorY||(o.left=0,o.right=t.width,o.top=0,o.bottom=t.height),s(t,o,r,i),i}},function(t,e,i){var n=i(546),s=i(159);t.exports=function(t,e,i,r){void 0===i&&(i=[]),void 0===r&&(r=0),i.length=0;var a,o=t.tilemapLayer;return o.skipCull||1!==o.scrollFactorX||1!==o.scrollFactorY||(a=n(t,e),s(t,a,r,i)),i}},function(t,e,i){var n=i(139),s=i(76);t.exports=function(t,e){var i=t.tilemapLayer.tilemap,r=t.tilemapLayer,a=Math.floor(i.tileWidth*r.scaleX),o=Math.floor(i.tileHeight*r.scaleY),h=t.hexSideLength,l=(o-h)/2+h;return{left:s(e.worldView.x-r.x,a,0,!0)-r.cullPaddingX,right:n(e.worldView.right-r.x,a,0,!0)+r.cullPaddingX,top:s(e.worldView.y-r.y,l,0,!0)-r.cullPaddingY,bottom:n(e.worldView.bottom-r.y,l,0,!0)+r.cullPaddingY}}},function(t,e,i){var n=i(541);t.exports=function(t,e,i,s){void 0===i&&(i=[]),void 0===s&&(s=0),i.length=0;var r,a,o,h=t.tilemapLayer,l=t.data,c=t.width,u=t.height,d=c,f=u;if(!h.skipCull)if(0===s){for(a=0;a<f;a++)for(r=0;l[a]&&r<d;r++)if(n(r,a,t,e)){if(!(o=l[a][r])||-1===o.index||!o.visible||0===o.alpha)continue;i.push(o)}}else if(1===s){for(a=0;a<f;a++)for(r=d;l[a]&&0<=r;r--)if(n(r,a,t,e)){if(!(o=l[a][r])||-1===o.index||!o.visible||0===o.alpha)continue;i.push(o)}}else if(2===s){for(a=f;0<=a;a--)for(r=0;l[a]&&r<d;r++)if(n(r,a,t,e)){if(!(o=l[a][r])||-1===o.index||!o.visible||0===o.alpha)continue;i.push(o)}}else if(3===s)for(a=f;0<=a;a--)for(r=d;l[a]&&0<=r;r--)if(n(r,a,t,e)){if(!(o=l[a][r])||-1===o.index||!o.visible||0===o.alpha)continue;i.push(o)}return h.tilesDrawn=i.length,h.tilesTotal=c*u,i}},function(t,e,i){var n=i(549),s=i(159);t.exports=function(t,e,i,r){void 0===i&&(i=[]),void 0===r&&(r=0),i.length=0;var a,o=t.tilemapLayer;return o.skipCull||1!==o.scrollFactorX||1!==o.scrollFactorY||(a=n(t,e),s(t,a,r,i)),i}},function(t,e,i){var n=i(139),s=i(76);t.exports=function(t,e){var i=t.tilemapLayer.tilemap,r=t.tilemapLayer,a=Math.floor(i.tileWidth*r.scaleX),o=Math.floor(i.tileHeight*r.scaleY);return{left:s(e.worldView.x-r.x,a,0,!0)-r.cullPaddingX,right:n(e.worldView.right-r.x,a,0,!0)+r.cullPaddingX,top:s(e.worldView.y-r.y,o/2,0,!0)-r.cullPaddingY,bottom:n(e.worldView.bottom-r.y,o/2,0,!0)+r.cullPaddingY}}},function(t,e,i){var n=i(3);t.exports=function(t,e,i,s,r){i=i||new n;var a=r.baseTileWidth,o=r.baseTileHeight,h=r.tilemapLayer,l=0,c=0;h&&(s=s||h.scene.cameras.main,l=h.x+s.scrollX*(1-h.scrollFactorX),a*=h.scaleX,c=h.y+s.scrollY*(1-h.scrollFactorY),o*=h.scaleY);var u=r.hexSideLength,d=l+t*a+e%2*(a/2),f=c+e*((o-u)/2+u);return i.set(d,f)}},function(t,e,i){var n=i(3);t.exports=function(t,e,i,s,r){i=i||new n;var a=r.baseTileWidth,o=r.baseTileHeight,h=r.tilemapLayer,l=0,c=0;h&&(s=s||h.scene.cameras.main,l=h.x+s.scrollX*(1-h.scrollFactorX),a*=h.scaleX,c=h.y+s.scrollY*(1-h.scrollFactorY),o*=h.scaleY);var u=l+a/2*(t-e),d=c+(t+e)*(o/2);return i.set(u,d)}},function(t,e,i){var n=i(3);t.exports=function(t,e,i,s,r){i=i||new n;var a=r.baseTileWidth,o=r.baseTileHeight,h=r.tilemapLayer,l=0,c=0;h&&(s=s||h.scene.cameras.main,l=h.x+s.scrollX*(1-h.scrollFactorX),a*=h.scaleX,c=h.y+s.scrollY*(1-h.scrollFactorY),o*=h.scaleY);var u=l+t*a+e%2*(a/2),d=c+e*(o/2);return i.set(u,d)}},function(t,e,i){var n=i(253),s=i(254),r=i(3);t.exports=function(t,e,i,a,o){return(i=i||new r(0,0)).x=n(t,a,o),i.y=s(e,a,o),i}},function(t,e){t.exports=function(t,e,i){var n=i.baseTileHeight,s=i.tilemapLayer,r=0;s&&(void 0===e&&(e=s.scene.cameras.main),r=s.y+e.scrollY*(1-s.scrollFactorY),n*=s.scaleY);var a=s.tilemap.hexSideLength;return r+t*((n-a)/2+a)}},function(t,e){t.exports=function(t,e,i){var n=i.baseTileHeight,s=i.tilemapLayer,r=0;return s&&(void 0===e&&(e=s.scene.cameras.main),r=s.y+e.scrollY*(1-s.scrollFactorY),n*=s.scaleY),r+t*(n/2)}},function(t,e,i){var n=i(3);t.exports=function(t,e,i,s,r,a){s=s||new n;var o=a.baseTileWidth,h=a.baseTileHeight,l=a.tilemapLayer;l&&(r=r||l.scene.cameras.main,e-=l.y+r.scrollY*(1-l.scrollFactorY),h*=l.scaleY,t-=l.x+r.scrollX*(1-l.scrollFactorX),o*=l.scaleX);var c=a.hexSideLength,u=(h-c)/2+c,d=i?Math.floor(e/u):e/u,f=i?Math.floor((t-d%2*.5*o)/o):(t-d%2*.5*o)/o;return s.set(f,d)}},function(t,e,i){var n=i(3);t.exports=function(t,e,i,s,r,a){s=s||new n;var o=a.baseTileWidth,h=a.baseTileHeight,l=a.tilemapLayer;l&&(r=r||l.scene.cameras.main,e-=l.y+r.scrollY*(1-l.scrollFactorY),h*=l.scaleY,t-=l.x+r.scrollX*(1-l.scrollFactorX),o*=l.scaleX);var c=i?Math.floor((t/(o/2)+e/(h/2))/2):(t/(o/2)+e/(h/2))/2,u=i?Math.floor((e/(h/2)-t/(o/2))/2):(e/(h/2)-t/(o/2))/2;return s.set(c,u)}},function(t,e,i){var n=i(3);t.exports=function(t,e,i,s,r,a){s=s||new n;var o=a.baseTileWidth,h=a.baseTileHeight,l=a.tilemapLayer;l&&(r=r||l.scene.cameras.main,e-=l.y+r.scrollY*(1-l.scrollFactorY),h*=l.scaleY,t-=l.x+r.scrollX*(1-l.scrollFactorX),o*=l.scaleX);var c=i?Math.floor(e/(h/2)):e/(h/2),u=i?Math.floor((t+c%2*.5*o)/o):(t+c%2*.5*o)/o;return s.set(u,c)}},function(t,e,i){var n=i(255),s=i(256),r=i(3);t.exports=function(t,e,i,a,o,h){return void 0===i&&(i=!0),(a=a||new r(0,0)).x=n(t,i,o,h),a.y=s(e,i,o,h),a}},function(t,e){t.exports=function(t,e,i,n){var s=n.baseTileHeight,r=n.tilemapLayer;r&&(i=i||r.scene.cameras.main,t-=r.y+i.scrollY*(1-r.scrollFactorY),s*=r.scaleY);var a=n.hexSideLength,o=(s-a)/2+a;return e?Math.floor(t/o):t/o}},function(t,e){t.exports=function(t,e,i,n){var s=n.baseTileHeight,r=n.tilemapLayer;return r&&(i=i||r.scene.cameras.main,t-=r.y+i.scrollY*(1-r.scrollFactorY),s*=r.scaleY),e?Math.floor(t/(s/2)):t/(s/2)}},function(t,e,i){var n=i(119);t.exports=function(t,e,i){if(n(t,e,i)){var s=i.data[e][t];return null!==s&&-1<s.index}return!1}},function(t,e,i){var n=i(85),s=i(119),r=i(252);t.exports=function(t,e,i,a,o){if(void 0===i&&(i=!0),void 0===a&&(a=!0),!s(t,e,o))return null;var h=o.data[e][t];return h?(o.data[e][t]=i?null:new n(o,-1,t,e,o.tileWidth,o.tileHeight),a&&h&&h.collides&&r(t,e,o),h):null}},function(t,e,i){var n=i(40),s=i(259),r=i(565),a=i(566),o=i(577);t.exports=function(t,e,i,h,l,c){var u;switch(e){case n.ARRAY_2D:u=s(t,i,h,l,c);break;case n.CSV:u=r(t,i,h,l,c);break;case n.TILED_JSON:u=a(t,i,c);break;case n.WELTMEISTER:u=o(t,i,c);break;default:console.warn("Unrecognized tilemap data format: "+e),u=null}return u}},function(t,e,i){var n=i(40),s=i(259);t.exports=function(t,e,i,r,a){var o=e.trim().split("\n").map((function(t){return t.split(",")})),h=s(t,o,i,r,a);return h.format=n.CSV,h}},function(t,e,i){var n=i(567),s=i(568),r=i(29),a=i(40),o=i(258),h=i(121),l=i(569),c=i(570),u=i(573),d=i(575);t.exports=function(t,e,i){var f=new h({width:e.width,height:e.height,name:t,tileWidth:e.tilewidth,tileHeight:e.tileheight,orientation:o(e.orientation),format:a.TILED_JSON,version:e.version,properties:e.properties,renderOrder:e.renderorder,infinite:e.infinite});f.orientation===r.HEXAGONAL&&(f.hexSideLength=e.hexsidelength),f.layers=u(e,i),f.images=l(e);var p=d(e);return f.tilesets=p.tilesets,f.imageCollections=p.imageCollections,f.objects=c(e),f.tiles=s(f),n(f),f}},function(t,e,i){var n=i(17);t.exports=function(t){for(var e,i,s,r,a,o=0;o<t.layers.length;o++){e=t.layers[o];for(var h=0;h<e.data.length;h++){a=e.data[h];for(var l=0;l<a.length;l++)null===(i=a[l])||i.index<0||(s=t.tiles[i.index][2],r=t.tilesets[s],i.width=r.tileWidth,i.height=r.tileHeight,r.tileProperties&&r.tileProperties[i.index-r.firstgid]&&(i.properties=n(i.properties,r.tileProperties[i.index-r.firstgid])))}}}},function(t,e,i){var n=i(122);t.exports=function(t){for(var e=[],i=0;i<t.imageCollections.length;i++)for(var s=t.imageCollections[i],r=s.images,a=0;a<r.length;a++){var o,h=r[a];(o=new n(h.image,h.gid,s.imageWidth,s.imageHeight,0,0)).updateTileData(s.imageWidth,s.imageHeight),t.tilesets.push(o)}for(i=0;i<t.tilesets.length;i++)for(var l=(o=t.tilesets[i]).tileMargin,c=o.tileMargin,u=0,d=0,f=0,p=o.firstgid;p<o.firstgid+o.total&&(e[p]=[l,c,i],l+=o.tileWidth+o.tileSpacing,++u!==o.total)&&(++d!==o.columns||(l=o.tileMargin,c+=o.tileHeight+o.tileSpacing,d=0,++f!==o.rows));p++);return e}},function(t,e,i){var n=i(2),s=i(161);t.exports=function(t){for(var e=[],i=[],r=s(t);r.i<r.layers.length||0<i.length;)if(r.i>=r.layers.length){if(i.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}r=i.pop()}else{var a,o,h,l=r.layers[r.i];r.i++,"imagelayer"===l.type?(a=n(l,"offsetx",0)+n(l,"startx",0),o=n(l,"offsety",0)+n(l,"starty",0),e.push({name:r.name+l.name,image:l.image,x:r.x+a+l.x,y:r.y+o+l.y,alpha:r.opacity*l.opacity,visible:r.visible&&l.visible,properties:n(l,"properties",{})})):"group"===l.type&&(h=s(t,l,r),i.push(r),r=h)}return e}},function(t,e,i){var n=i(2),s=i(260),r=i(572),a=i(161);t.exports=function(t){for(var e=[],i=[],o=a(t);o.i<o.layers.length||0<i.length;)if(o.i>=o.layers.length){if(i.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}o=i.pop()}else{var h,l=o.layers[o.i];if(o.i++,l.opacity*=o.opacity,l.visible=o.visible&&l.visible,"objectgroup"===l.type){l.name=o.name+l.name;for(var c=o.x+n(l,"startx",0)+n(l,"offsetx",0),u=o.y+n(l,"starty",0)+n(l,"offsety",0),d=[],f=0;f<l.objects.length;f++){var p=s(l.objects[f],c,u);d.push(p)}var g=new r(l);g.objects=d,e.push(g)}else"group"===l.type&&(h=a(t,l,o),i.push(o),o=h)}return e}},function(t,e,i){var n=i(126);t.exports=function(t,e){for(var i={},s=0;s<e.length;s++){var r=e[s];n(t,r)&&(i[r]=t[r])}return i}},function(t,e,i){var n=i(0),s=i(2),r=new n({initialize:function(t){void 0===t&&(t={}),this.name=s(t,"name","object layer"),this.opacity=s(t,"opacity",1),this.properties=s(t,"properties",{}),this.propertyTypes=s(t,"propertytypes",{}),this.type=s(t,"type","objectgroup"),this.visible=s(t,"visible",!0),this.objects=s(t,"objects",[])}});t.exports=r},function(t,e,i){var n=i(574),s=i(29),r=i(161),a=i(258),o=i(2),h=i(120),l=i(261),c=i(85);t.exports=function(t,e){for(var i=o(t,"infinite",!1),u=[],d=[],f=r(t);f.i<f.layers.length||0<d.length;)if(f.i>=f.layers.length){if(d.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}f=d.pop()}else{var p,g=f.layers[f.i];if(f.i++,"tilelayer"===g.type)if(g.compression)console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+g.name+"'");else{if(g.encoding&&"base64"===g.encoding){if(g.chunks)for(var m=0;m<g.chunks.length;m++)g.chunks[m].data=n(g.chunks[m].data);g.data&&(g.data=n(g.data)),delete g.encoding}var v,y,_=[],x=0;if(i){var w,b=o(g,"startx",0)+g.x,E=o(g,"starty",0)+g.y;(w=new h({name:f.name+g.name,x:f.x+o(g,"offsetx",0)+b*t.tilewidth,y:f.y+o(g,"offsety",0)+E*t.tileheight,width:g.width,height:g.height,tileWidth:t.tilewidth,tileHeight:t.tileheight,alpha:f.opacity*g.opacity,visible:f.visible&&g.visible,properties:o(g,"properties",[]),orientation:a(t.orientation)})).orientation===s.HEXAGONAL&&(w.hexSideLength=t.hexsidelength);for(var T=0;T<g.height;T++){_.push([null]);for(var S=0;S<g.width;S++)_[T][S]=null}for(T=0,F=g.chunks.length;T<F;T++)for(var A=g.chunks[T],O=A.x-b,C=A.y-E,P=0,L=0,R=A.data.length;L<R;L++){var I,M=x+O,D=P+C;0<(I=l(A.data[L])).gid?((v=new c(w,I.gid,M,D,t.tilewidth,t.tileheight)).rotation=I.rotation,v.flipX=I.flipped,_[D][M]=v):(y=e?null:new c(w,-1,M,D,t.tilewidth,t.tileheight),_[D][M]=y),++x===A.width&&(P++,x=0)}}else{(w=new h({name:f.name+g.name,x:f.x+o(g,"offsetx",0)+g.x,y:f.y+o(g,"offsety",0)+g.y,width:g.width,height:g.height,tileWidth:t.tilewidth,tileHeight:t.tileheight,alpha:f.opacity*g.opacity,visible:f.visible&&g.visible,properties:o(g,"properties",[]),orientation:a(t.orientation)})).orientation===s.HEXAGONAL&&(w.hexSideLength=t.hexsidelength);for(var k=[],N=0,F=g.data.length;N<F;N++)0<(I=l(g.data[N])).gid?((v=new c(w,I.gid,x,_.length,t.tilewidth,t.tileheight)).rotation=I.rotation,v.flipX=I.flipped,k.push(v)):(y=e?null:new c(w,-1,x,_.length,t.tilewidth,t.tileheight),k.push(y)),++x===g.width&&(_.push(k),x=0,k=[])}w.data=_,u.push(w)}else"group"===g.type&&(p=r(t,g,f),d.push(f),f=p)}return u}},function(t,e){t.exports=function(t){for(var e=window.atob(t),i=e.length,n=new Array(i/4),s=0;s<i;s+=4)n[s/4]=(e.charCodeAt(s)|e.charCodeAt(s+1)<<8|e.charCodeAt(s+2)<<16|e.charCodeAt(s+3)<<24)>>>0;return n}},function(t,e,i){var n=i(122),s=i(576),r=i(260),a=i(1453);t.exports=function(t){for(var e,i=[],o=[],h=null,l=0;l<t.tilesets.length;l++){var c=t.tilesets[l];if(c.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(c.image){var u=new n(c.name,c.firstgid,c.tilewidth,c.tileheight,c.margin,c.spacing);if(1<t.version){var d=void 0,f=void 0;if(Array.isArray(c.tiles)){d=d||{},f=f||{};for(var p=0;p<c.tiles.length;p++){var g,m,v=c.tiles[p];v.properties&&(g={},v.properties.forEach((function(t){g[t.name]=t.value})),f[v.id]=g),v.objectgroup&&((d[v.id]||(d[v.id]={})).objectgroup=v.objectgroup,v.objectgroup.objects&&(m=v.objectgroup.objects.map((function(t){return r(t)})),d[v.id].objectgroup.objects=m)),v.animation&&((d[v.id]||(d[v.id]={})).animation=v.animation),v.type&&((d[v.id]||(d[v.id]={})).type=v.type)}}Array.isArray(c.wangsets)&&(d=d||{},f=f||{},a(c.wangsets,d)),d&&(u.tileData=d,u.tileProperties=f)}else if(c.tileproperties&&(u.tileProperties=c.tileproperties),c.tiles)for(e in u.tileData=c.tiles,u.tileData){var y,_=u.tileData[e].objectgroup;_&&_.objects&&(y=_.objects.map((function(t){return r(t)})),u.tileData[e].objectgroup.objects=y)}u.updateTileData(c.imagewidth,c.imageheight),i.push(u)}else{var x=new s(c.name,c.firstgid,c.tilewidth,c.tileheight,c.margin,c.spacing,c.properties),w=0;for(p=0;p<c.tiles.length;p++){var b=(v=c.tiles[p]).image,E=parseInt(v.id,10),T=c.firstgid+E;x.addImage(T,b),w=Math.max(E,w)}x.maxId=w,o.push(x)}h&&(h.lastgid=c.firstgid-1),h=c}return{tilesets:i,imageCollections:o}}},function(t,e,i){var n=new(i(0))({initialize:function(t,e,i,n,s,r,a){(void 0===i||i<=0)&&(i=32),(void 0===n||n<=0)&&(n=32),void 0===s&&(s=0),void 0===r&&(r=0),this.name=t,this.firstgid=0|e,this.imageWidth=0|i,this.imageHeight=0|n,this.imageMargin=0|s,this.imageSpacing=0|r,this.properties=a||{},this.images=[],this.total=0},containsImageIndex:function(t){return t>=this.firstgid&&t<this.firstgid+this.total},addImage:function(t,e){return this.images.push({gid:t,image:e}),this.total++,this}});t.exports=n},function(t,e,i){var n=i(40),s=i(121),r=i(578),a=i(579);t.exports=function(t,e,i){if(0===e.layer.length)return console.warn("No layers found in the Weltmeister map: "+t),null;for(var o=0,h=0,l=0;l<e.layer.length;l++)e.layer[l].width>o&&(o=e.layer[l].width),e.layer[l].height>h&&(h=e.layer[l].height);var c=new s({width:o,height:h,name:t,tileWidth:e.layer[0].tilesize,tileHeight:e.layer[0].tilesize,format:n.WELTMEISTER});return c.layers=r(e,i),c.tilesets=a(e),c}},function(t,e,i){var n=i(120),s=i(85);t.exports=function(t,e){for(var i=[],r=0;r<t.layer.length;r++){for(var a=t.layer[r],o=new n({name:a.name,width:a.width,height:a.height,tileWidth:a.tilesize,tileHeight:a.tilesize,visible:1===a.visible}),h=[],l=[],c=0;c<a.data.length;c++){for(var u=0;u<a.data[c].length;u++){var d=a.data[c][u]-1,f=-1<d?new s(o,d,u,c,a.tilesize,a.tilesize):e?null:new s(o,-1,u,c,a.tilesize,a.tilesize);h.push(f)}l.push(h),h=[]}o.data=l,i.push(o)}return i}},function(t,e,i){var n=i(122);t.exports=function(t){for(var e=[],i=[],s=0;s<t.layer.length;s++){var r=t.layer[s],a=r.tilesetName;""!==a&&-1===i.indexOf(a)&&(i.push(a),e.push(new n(a,0,r.tilesize,r.tilesize,0,0)))}return e}},function(t,e,i){var n=i(0),s=i(36),r=i(40),a=i(2),o=i(120),h=i(29),l=i(362),c=i(74),u=i(73),d=i(85),f=i(251),p=i(581),g=i(122),m=new n({initialize:function(t,e){this.scene=t,this.tileWidth=e.tileWidth,this.tileHeight=e.tileHeight,this.width=e.width,this.height=e.height,this.orientation=e.orientation,this.renderOrder=e.renderOrder,this.format=e.format,this.version=e.version,this.properties=e.properties,this.widthInPixels=e.widthInPixels,this.heightInPixels=e.heightInPixels,this.imageCollections=e.imageCollections,this.images=e.images,this.layers=e.layers,this.tilesets=e.tilesets,this.objects=e.objects,this.currentLayerIndex=0,this.hexSideLength=e.hexSideLength;var i=this.orientation;this._convert={WorldToTileXY:f.GetWorldToTileXYFunction(i),WorldToTileX:f.GetWorldToTileXFunction(i),WorldToTileY:f.GetWorldToTileYFunction(i),TileToWorldXY:f.GetTileToWorldXYFunction(i),TileToWorldX:f.GetTileToWorldXFunction(i),TileToWorldY:f.GetTileToWorldYFunction(i)}},createBlankDynamicLayer:function(t,e,i,n,s,r,a,o){return console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer"),this.createBlankLayer(t,e,i,n,s,r,a,o)},createDynamicLayer:function(t,e,i,n){return console.warn("createDynamicLayer is deprecated. Use createLayer"),this.createLayer(t,e,i,n)},createStaticLayer:function(t,e,i,n){return console.warn("createStaticLayer is deprecated. Use createLayer"),this.createLayer(t,e,i,n)},setRenderOrder:function(t){var e=["right-down","left-down","right-up","left-up"];return"number"==typeof t&&(t=e[t]),-1<e.indexOf(t)&&(this.renderOrder=t),this},addTilesetImage:function(t,e,i,n,s,a,o){if(void 0===t)return null;if(null==e&&(e=t),!this.scene.sys.textures.exists(e))return console.warn("Invalid Tileset Image: "+e),null;var h=this.scene.sys.textures.get(e),l=this.getTilesetIndex(t);if(null===l&&this.format===r.TILED_JSON)return console.warn("No data found for Tileset: "+t),null;var c=this.tilesets[l];return c?(c.setTileSize(i,n),c.setSpacing(s,a),c.setImage(h)):(void 0===i&&(i=this.tileWidth),void 0===n&&(n=this.tileHeight),void 0===s&&(s=0),void 0===a&&(a=0),void 0===o&&(o=0),(c=new g(t,o,i,n,s,a)).setImage(h),this.tilesets.push(c)),c},copy:function(t,e,i,n,s,r,a,o){return null!==(o=this.getLayer(o))?(f.Copy(t,e,i,n,s,r,a,o),this):null},createBlankLayer:function(t,e,i,n,s,r,a,h){if(void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=this.width),void 0===r&&(r=this.height),void 0===a&&(a=this.tileWidth),void 0===h&&(h=this.tileHeight),null!==this.getLayerIndex(t))return console.warn("Invalid Tilemap Layer ID: "+t),null;for(var l,c=new o({name:t,tileWidth:a,tileHeight:h,width:s,height:r,orientation:this.orientation}),u=0;u<r;u++){l=[];for(var f=0;f<s;f++)l.push(new d(c,-1,f,u,a,h,this.tileWidth,this.tileHeight));c.data.push(l)}this.layers.push(c),this.currentLayerIndex=this.layers.length-1;var g=new p(this.scene,this,this.currentLayerIndex,e,i,n);return g.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(g),g},createLayer:function(t,e,i,n){var s=this.getLayerIndex(t);if(null===s)return console.warn("Invalid Tilemap Layer ID: "+t),"string"==typeof t&&console.warn("Valid tilelayer names:\n\t"+this.getTileLayerNames().join(",\n\t")),null;var r=this.layers[s];if(r.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+t),null;this.currentLayerIndex=s,void 0===i&&(i=r.x),void 0===n&&(n=r.y);var a=new p(this.scene,this,s,e,i,n);return a.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(a),a},createFromObjects:function(t,e){var i=[],n=this.getObjectLayer(t);if(!n)return console.warn("createFromObjects: Invalid objectLayerName given: "+t),i;Array.isArray(e)||(e=[e]);for(var r=n.objects,o=0;o<e.length;o++){for(var h,c=e[o],d=a(c,"id",null),f=a(c,"gid",null),p=a(c,"name",null),g=[],m=0;m<r.length;m++)h=r[m],(null===d&&null===f&&null===p||null!==d&&h.id===d||null!==f&&h.gid===f||null!==p&&h.name===p)&&g.push(h);for(var v=a(c,"classType",u),y=a(c,"scene",this.scene),_=a(c,"container",null),x=a(c,"key",null),w=a(c,"frame",null),b=0;b<g.length;b++){h=g[b];var E=new v(y);E.setName(h.name),E.setPosition(h.x,h.y),E.setTexture(x,w),h.width&&(E.displayWidth=h.width),h.height&&(E.displayHeight=h.height);var T,S={x:E.originX*h.width,y:(E.originY-1)*h.height};if(h.rotation&&(T=s(h.rotation),l(S,T),E.rotation=T),E.x+=S.x,E.y+=S.y,void 0===h.flippedHorizontal&&void 0===h.flippedVertical||E.setFlip(h.flippedHorizontal,h.flippedVertical),h.visible||(E.visible=!1),Array.isArray(h.properties))h.properties.forEach((function(t){var e=t.name;void 0!==E[e]?E[e]=t.value:E.setData(e,t.value)}));else for(var A in h.properties)void 0!==E[A]?E[A]=h.properties[A]:E.setData(A,h.properties[A]);_?_.add(E):y.add.existing(E),i.push(E)}}return i},createFromTiles:function(t,e,i,n,s,r){return null===(r=this.getLayer(r))?null:f.CreateFromTiles(t,e,i,n,s,r)},fill:function(t,e,i,n,s,r,a){return void 0===r&&(r=!0),null===(a=this.getLayer(a))?null:(f.Fill(t,e,i,n,s,r,a),this)},filterObjects:function(t,e,i){if("string"==typeof t){var n=t;if(!(t=this.getObjectLayer(t)))return console.warn("No object layer found with the name: "+n),null}return t.objects.filter(e,i)},filterTiles:function(t,e,i,n,s,r,a,o){return null===(o=this.getLayer(o))?null:f.FilterTiles(t,e,i,n,s,r,a,o)},findByIndex:function(t,e,i,n){return null===(n=this.getLayer(n))?null:f.FindByIndex(t,e,i,n)},findObject:function(t,e,i){if("string"==typeof t){var n=t;if(!(t=this.getObjectLayer(t)))return console.warn("No object layer found with the name: "+n),null}return t.objects.find(e,i)||null},findTile:function(t,e,i,n,s,r,a,o){return null===(o=this.getLayer(o))?null:f.FindTile(t,e,i,n,s,r,a,o)},forEachTile:function(t,e,i,n,s,r,a,o){return null===(o=this.getLayer(o))?null:(f.ForEachTile(t,e,i,n,s,r,a,o),this)},getImageIndex:function(t){return this.getIndex(this.images,t)},getImageLayerNames:function(){return this.images&&Array.isArray(this.images)?this.images.map((function(t){return t.name})):[]},getIndex:function(t,e){for(var i=0;i<t.length;i++)if(t[i].name===e)return i;return null},getLayer:function(t){var e=this.getLayerIndex(t);return null!==e?this.layers[e]:null},getObjectLayer:function(t){var e=this.getIndex(this.objects,t);return null!==e?this.objects[e]:null},getObjectLayerNames:function(){return this.objects&&Array.isArray(this.objects)?this.objects.map((function(t){return t.name})):[]},getLayerIndex:function(t){return void 0===t?this.currentLayerIndex:"string"==typeof t?this.getLayerIndexByName(t):"number"==typeof t&&t<this.layers.length?t:t instanceof p?t.layerIndex:null},getLayerIndexByName:function(t){return this.getIndex(this.layers,t)},getTileAt:function(t,e,i,n){return null===(n=this.getLayer(n))?null:f.GetTileAt(t,e,i,n)},getTileAtWorldXY:function(t,e,i,n,s){return null===(s=this.getLayer(s))?null:f.GetTileAtWorldXY(t,e,i,n,s)},getTileLayerNames:function(){return this.layers&&Array.isArray(this.layers)?this.layers.map((function(t){return t.name})):[]},getTilesWithin:function(t,e,i,n,s,r){return null===(r=this.getLayer(r))?null:f.GetTilesWithin(t,e,i,n,s,r)},getTilesWithinShape:function(t,e,i,n){return null===(n=this.getLayer(n))?null:f.GetTilesWithinShape(t,e,i,n)},getTilesWithinWorldXY:function(t,e,i,n,s,r,a){return null===(a=this.getLayer(a))?null:f.GetTilesWithinWorldXY(t,e,i,n,s,r,a)},getTileset:function(t){var e=this.getIndex(this.tilesets,t);return null!==e?this.tilesets[e]:null},getTilesetIndex:function(t){return this.getIndex(this.tilesets,t)},hasTileAt:function(t,e,i){return null===(i=this.getLayer(i))?null:f.HasTileAt(t,e,i)},hasTileAtWorldXY:function(t,e,i,n){return null===(n=this.getLayer(n))?null:f.HasTileAtWorldXY(t,e,i,n)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(t){this.setLayer(t)}},putTileAt:function(t,e,i,n,s){return void 0===n&&(n=!0),null===(s=this.getLayer(s))?null:f.PutTileAt(t,e,i,n,s)},putTileAtWorldXY:function(t,e,i,n,s,r){return void 0===n&&(n=!0),null===(r=this.getLayer(r))?null:f.PutTileAtWorldXY(t,e,i,n,s,r)},putTilesAt:function(t,e,i,n,s){return void 0===n&&(n=!0),null===(s=this.getLayer(s))?null:(f.PutTilesAt(t,e,i,n,s),this)},randomize:function(t,e,i,n,s,r){return null===(r=this.getLayer(r))?null:(f.Randomize(t,e,i,n,s,r),this)},calculateFacesAt:function(t,e,i){return null===(i=this.getLayer(i))?null:(f.CalculateFacesAt(t,e,i),this)},calculateFacesWithin:function(t,e,i,n,s){return null===(s=this.getLayer(s))?null:(f.CalculateFacesWithin(t,e,i,n,s),this)},removeLayer:function(t){var e=this.getLayerIndex(t);if(null===e)return null;c(this.layers,e);for(var i=e;i<this.layers.length;i++)this.layers[i].tilemapLayer&&this.layers[i].tilemapLayer.layerIndex--;return this.currentLayerIndex===e&&(this.currentLayerIndex=0),this},destroyLayer:function(t){var e=this.getLayerIndex(t);return null!==e?((t=this.layers[e]).destroy(),c(this.layers,e),this.currentLayerIndex===e&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var t=this.layers,e=0;e<t.length;e++)t[e].tilemapLayer&&t[e].tilemapLayer.destroy(!1);return t.length=0,this.currentLayerIndex=0,this},removeTile:function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=!0);var n=[];Array.isArray(t)||(t=[t]);for(var s=0;s<t.length;s++){var r=t[s];n.push(this.removeTileAt(r.x,r.y,!0,i,r.tilemapLayer)),-1<e&&this.putTileAt(e,r.x,r.y,i,r.tilemapLayer)}return n},removeTileAt:function(t,e,i,n,s){return void 0===i&&(i=!0),void 0===n&&(n=!0),null===(s=this.getLayer(s))?null:f.RemoveTileAt(t,e,i,n,s)},removeTileAtWorldXY:function(t,e,i,n,s,r){return void 0===i&&(i=!0),void 0===n&&(n=!0),null===(r=this.getLayer(r))?null:f.RemoveTileAtWorldXY(t,e,i,n,s,r)},renderDebug:function(t,e,i){return null===(i=this.getLayer(i))?null:(this.orientation===h.ORTHOGONAL&&f.RenderDebug(t,e,i),this)},renderDebugFull:function(t,e){for(var i=this.layers,n=0;n<i.length;n++)f.RenderDebug(t,e,i[n]);return this},replaceByIndex:function(t,e,i,n,s,r,a){return null===(a=this.getLayer(a))?null:(f.ReplaceByIndex(t,e,i,n,s,r,a),this)},setCollision:function(t,e,i,n,s){return void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===s&&(s=!0),null===(n=this.getLayer(n))?null:(f.SetCollision(t,e,i,n,s),this)},setCollisionBetween:function(t,e,i,n,s){return void 0===i&&(i=!0),void 0===n&&(n=!0),null===(s=this.getLayer(s))?null:(f.SetCollisionBetween(t,e,i,n,s),this)},setCollisionByProperty:function(t,e,i,n){return void 0===e&&(e=!0),void 0===i&&(i=!0),null===(n=this.getLayer(n))?null:(f.SetCollisionByProperty(t,e,i,n),this)},setCollisionByExclusion:function(t,e,i,n){return void 0===e&&(e=!0),void 0===i&&(i=!0),null===(n=this.getLayer(n))?null:(f.SetCollisionByExclusion(t,e,i,n),this)},setCollisionFromCollisionGroup:function(t,e,i){return void 0===t&&(t=!0),void 0===e&&(e=!0),null===(i=this.getLayer(i))?null:(f.SetCollisionFromCollisionGroup(t,e,i),this)},setTileIndexCallback:function(t,e,i,n){return null===(n=this.getLayer(n))?null:(f.SetTileIndexCallback(t,e,i,n),this)},setTileLocationCallback:function(t,e,i,n,s,r,a){return null===(a=this.getLayer(a))?null:(f.SetTileLocationCallback(t,e,i,n,s,r,a),this)},setLayer:function(t){var e=this.getLayerIndex(t);return null!==e&&(this.currentLayerIndex=e),this},setBaseTileSize:function(t,e){this.tileWidth=t,this.tileHeight=e,this.widthInPixels=this.width*t,this.heightInPixels=this.height*e;for(var i=0;i<this.layers.length;i++){this.layers[i].baseTileWidth=t,this.layers[i].baseTileHeight=e;for(var n=this.layers[i].data,s=this.layers[i].width,r=this.layers[i].height,a=0;a<r;a++)for(var o=0;o<s;o++){var h=n[a][o];null!==h&&h.setSize(void 0,void 0,t,e)}}return this},setLayerTileSize:function(t,e,i){if(null===(i=this.getLayer(i)))return this;i.tileWidth=t,i.tileHeight=e;for(var n=i.data,s=i.width,r=i.height,a=0;a<r;a++)for(var o=0;o<s;o++){var h=n[a][o];null!==h&&h.setSize(t,e)}return this},shuffle:function(t,e,i,n,s){return null===(s=this.getLayer(s))?null:(f.Shuffle(t,e,i,n,s),this)},swapByIndex:function(t,e,i,n,s,r,a){return null===(a=this.getLayer(a))?null:(f.SwapByIndex(t,e,i,n,s,r,a),this)},tileToWorldX:function(t,e,i){return null===(i=this.getLayer(i))?null:this._convert.TileToWorldX(t,e,i)},tileToWorldY:function(t,e,i){return null===(i=this.getLayer(i))?null:this._convert.TileToWorldY(t,e,i)},tileToWorldXY:function(t,e,i,n,s){return null===(s=this.getLayer(s))?null:this._convert.TileToWorldXY(t,e,i,n,s)},weightedRandomize:function(t,e,i,n,s,r){return null===(r=this.getLayer(r))?null:(f.WeightedRandomize(e,i,n,s,t,r),this)},worldToTileX:function(t,e,i,n){return null===(n=this.getLayer(n))?null:this._convert.WorldToTileX(t,e,i,n)},worldToTileY:function(t,e,i,n){return null===(n=this.getLayer(n))?null:this._convert.WorldToTileY(t,e,i,n)},worldToTileXY:function(t,e,i,n,s,r){return null===(r=this.getLayer(r))?null:this._convert.WorldToTileXY(t,e,i,n,s,r)},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});t.exports=m},function(t,e,i){var n=i(0),s=i(11),r=i(15),a=i(251),o=i(1456),h=new n({Extends:r,Mixins:[s.Alpha,s.BlendMode,s.ComputedSize,s.Depth,s.Flip,s.GetBounds,s.Origin,s.Pipeline,s.Transform,s.Visible,s.ScrollFactor,o],initialize:function(t,e,i,n,s,o){r.call(this,t,"TilemapLayer"),this.isTilemap=!0,this.tilemap=e,this.layerIndex=i,this.layer=e.layers[i],(this.layer.tilemapLayer=this).tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=a.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.setTilesets(n),this.setAlpha(this.layer.alpha),this.setPosition(s,o),this.setOrigin(),this.setSize(e.tileWidth*this.layer.width,e.tileHeight*this.layer.height),this.initPipeline()},setTilesets:function(t){var e=[],i=[],n=this.tilemap;Array.isArray(t)||(t=[t]);for(var s=0;s<t.length;s++){var r=t[s];if("string"==typeof r&&(r=n.getTileset(r)),r){i.push(r);for(var a=r.firstgid,o=0;o<r.total;o++)e[a+o]=r}}this.gidMap=e,this.tileset=i},setRenderOrder:function(t){return"string"==typeof t&&(t=["right-down","left-down","right-up","left-up"].indexOf(t)),0<=t&&t<4&&(this._renderOrder=t),this},calculateFacesAt:function(t,e){return a.CalculateFacesAt(t,e,this.layer),this},calculateFacesWithin:function(t,e,i,n){return a.CalculateFacesWithin(t,e,i,n,this.layer),this},createFromTiles:function(t,e,i,n,s){return a.CreateFromTiles(t,e,i,n,s,this.layer)},cull:function(t){return this.cullCallback(this.layer,t,this.culledTiles,this._renderOrder)},copy:function(t,e,i,n,s,r,o){return a.Copy(t,e,i,n,s,r,o,this.layer),this},fill:function(t,e,i,n,s,r){return a.Fill(t,e,i,n,s,r,this.layer),this},filterTiles:function(t,e,i,n,s,r,o){return a.FilterTiles(t,e,i,n,s,r,o,this.layer)},findByIndex:function(t,e,i){return a.FindByIndex(t,e,i,this.layer)},findTile:function(t,e,i,n,s,r,o){return a.FindTile(t,e,i,n,s,r,o,this.layer)},forEachTile:function(t,e,i,n,s,r,o){return a.ForEachTile(t,e,i,n,s,r,o,this.layer),this},getTileAt:function(t,e,i){return a.GetTileAt(t,e,i,this.layer)},getTileAtWorldXY:function(t,e,i,n){return a.GetTileAtWorldXY(t,e,i,n,this.layer)},getTilesWithin:function(t,e,i,n,s){return a.GetTilesWithin(t,e,i,n,s,this.layer)},getTilesWithinShape:function(t,e,i){return a.GetTilesWithinShape(t,e,i,this.layer)},getTilesWithinWorldXY:function(t,e,i,n,s,r){return a.GetTilesWithinWorldXY(t,e,i,n,s,r,this.layer)},hasTileAt:function(t,e){return a.HasTileAt(t,e,this.layer)},hasTileAtWorldXY:function(t,e,i){return a.HasTileAtWorldXY(t,e,i,this.layer)},putTileAt:function(t,e,i,n){return a.PutTileAt(t,e,i,n,this.layer)},putTileAtWorldXY:function(t,e,i,n,s){return a.PutTileAtWorldXY(t,e,i,n,s,this.layer)},putTilesAt:function(t,e,i,n){return a.PutTilesAt(t,e,i,n,this.layer),this},randomize:function(t,e,i,n,s){return a.Randomize(t,e,i,n,s,this.layer),this},removeTileAt:function(t,e,i,n){return a.RemoveTileAt(t,e,i,n,this.layer)},removeTileAtWorldXY:function(t,e,i,n,s){return a.RemoveTileAtWorldXY(t,e,i,n,s,this.layer)},renderDebug:function(t,e){return a.RenderDebug(t,e,this.layer),this},replaceByIndex:function(t,e,i,n,s,r){return a.ReplaceByIndex(t,e,i,n,s,r,this.layer),this},setSkipCull:function(t){return void 0===t&&(t=!0),this.skipCull=t,this},setCullPadding:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=1),this.cullPaddingX=t,this.cullPaddingY=e,this},setCollision:function(t,e,i,n){return a.SetCollision(t,e,i,this.layer,n),this},setCollisionBetween:function(t,e,i,n){return a.SetCollisionBetween(t,e,i,n,this.layer),this},setCollisionByProperty:function(t,e,i){return a.SetCollisionByProperty(t,e,i,this.layer),this},setCollisionByExclusion:function(t,e,i){return a.SetCollisionByExclusion(t,e,i,this.layer),this},setCollisionFromCollisionGroup:function(t,e){return a.SetCollisionFromCollisionGroup(t,e,this.layer),this},setTileIndexCallback:function(t,e,i){return a.SetTileIndexCallback(t,e,i,this.layer),this},setTileLocationCallback:function(t,e,i,n,s,r){return a.SetTileLocationCallback(t,e,i,n,s,r,this.layer),this},shuffle:function(t,e,i,n){return a.Shuffle(t,e,i,n,this.layer),this},swapByIndex:function(t,e,i,n,s,r){return a.SwapByIndex(t,e,i,n,s,r,this.layer),this},tileToWorldX:function(t,e){return this.tilemap.tileToWorldX(t,e,this)},tileToWorldY:function(t,e){return this.tilemap.tileToWorldY(t,e,this)},tileToWorldXY:function(t,e,i,n){return this.tilemap.tileToWorldXY(t,e,i,n,this)},weightedRandomize:function(t,e,i,n,s){return a.WeightedRandomize(e,i,n,s,t,this.layer),this},worldToTileX:function(t,e,i){return this.tilemap.worldToTileX(t,e,i,this)},worldToTileY:function(t,e,i){return this.tilemap.worldToTileY(t,e,i,this)},worldToTileXY:function(t,e,i,n,s){return this.tilemap.worldToTileXY(t,e,i,n,s,this)},destroy:function(t){void 0===t&&(t=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),t&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],r.prototype.destroy.call(this))}});t.exports=h},function(t,e,i){var n=i(0),s=i(2),r=new n({initialize:function(t){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(t)},reset:function(t){return this.delay=s(t,"delay",0),this.repeat=s(t,"repeat",0),this.loop=s(t,"loop",!1),this.callback=s(t,"callback",void 0),this.callbackScope=s(t,"callbackScope",this.callback),this.args=s(t,"args",[]),this.timeScale=s(t,"timeScale",1),this.startAt=s(t,"startAt",0),this.paused=s(t,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=-1===this.repeat||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(0<this.repeat){var t=this.delay+this.delay*this.repeat;return(this.elapsed+this.delay*(this.repeat-this.repeatCount))/t}return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return.001*this.elapsed},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return.001*this.getRemaining()},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return.001*this.getOverallRemaining()},remove:function(t){void 0===t&&(t=!1),this.elapsed=this.delay,this.hasDispatched=!t,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});t.exports=r},function(t,e,i){var n=i(1465);t.exports=function(t){var e,i=[];if(t.hasOwnProperty("props"))for(e in t.props)"_"!==e.substr(0,1)&&i.push({key:e,value:t.props[e]});else for(e in t)-1===n.indexOf(e)&&"_"!==e.substr(0,1)&&i.push({key:e,value:t[e]});return i}},function(t,e,i){var n=i(6);t.exports=function(t){var e=n(t,"tweens",null);return null===e?[]:("function"==typeof e&&(e=e.call()),Array.isArray(e)||(e=[e]),e)}},function(t,e,i){var n=i(265),s=i(13),r=i(99),a=i(80),o=i(162),h=i(6),l=i(264),c=i(266),u=i(268);t.exports=function(t,e,i){void 0===i&&(i=n);var d=h(e,"from",0),f=h(e,"to",1),p=[{value:d}],g=o(e,"delay",i.delay),m=o(e,"duration",i.duration),v=h(e,"easeParams",i.easeParams),y=a(h(e,"ease",i.ease),v),_=o(e,"hold",i.hold),x=o(e,"repeat",i.repeat),w=o(e,"repeatDelay",i.repeatDelay),b=r(e,"yoyo",i.yoyo),E=[],T=l("value",f),S=u(p[0],0,"value",T.getEnd,T.getStart,T.getActive,y,g,m,b,_,x,w,!1,!1);S.start=d,S.current=d,S.to=f,E.push(S);var A=new c(t,E,p);A.offset=s(e,"offset",null),A.completeDelay=s(e,"completeDelay",0),A.loop=Math.round(s(e,"loop",0)),A.loopDelay=Math.round(s(e,"loopDelay",0)),A.paused=r(e,"paused",!1),A.useFrames=r(e,"useFrames",!1);for(var O=h(e,"callbackScope",A),C=[A,null],P=c.TYPES,L=0;L<P.length;L++){var R,I,M=P[L],D=h(e,M,!1);D&&(R=h(e,M+"Scope",O),I=h(e,M+"Params",[]),A.setCallback(M,D,C.concat(I),R))}return A}},function(t,e,i){var n=i(80),s=i(6),r=i(14);t.exports=function(t,e){void 0===e&&(e={});var i=s(e,"start",0),a=s(e,"ease",null),o=s(e,"grid",null),h=s(e,"from",0),l="first"===h,c="center"===h,u="last"===h,d="number"==typeof h,f=Array.isArray(t),p=f?parseFloat(t[0]):parseFloat(t),g=f?parseFloat(t[1]):0,m=Math.max(p,g);if(f&&(i+=p),o){var v,y,_=o[0],x=o[1],w=0,b=0,E=[];u?(w=_-1,b=x-1):d?(w=h%_,b=Math.floor(h/_)):c&&(w=(_-1)/2,b=(x-1)/2);for(var T=r.MIN_SAFE_INTEGER,S=0;S<x;S++){E[S]=[];for(var A=0;A<_;A++){v=w-A,y=b-S;var O=Math.sqrt(v*v+y*y);T<O&&(T=O),E[S][A]=O}}}var C=a?n(a):null;return o?function(t,e,n,s){var r,a=0,o=s%_,h=Math.floor(s/_);return 0<=o&&o<_&&0<=h&&h<x&&(a=E[h][o]),(f?(r=g-p,C?a/T*r*C(a/T):a/T*r):C?a*p*C(a/T):a*p)+i}:function(t,e,n,s,r){var a,o;return r--,l?a=s:c?a=Math.abs(r/2-s):u?a=r-s:d&&(a=Math.abs(h-s)),(f?(o=c?(g-p)/r*(2*a):(g-p)/r*a,C?o*C(a/r):o):C?r*m*C(a/r):a*p)+i}}},function(t,e,i){var n=i(77),s=i(265),r=i(13),a=i(99),o=i(80),h=i(162),l=i(263),c=i(584),u=i(6),d=i(588),f=i(163);t.exports=function(t,e){var i=new d(t);i.completeDelay=r(e,"completeDelay",0),i.loop=Math.round(r(e,"loop",0)),i.loopDelay=Math.round(r(e,"loopDelay",0)),i.paused=a(e,"paused",!1),i.useFrames=a(e,"useFrames",!1);var p,g,m=u(e,"callbackScope",i),v=[i],y=u(e,"onStart",!1);y&&(p=u(e,"onStartScope",m),g=u(e,"onStartParams",[]),i.setCallback("onStart",y,v.concat(g),p));var _,x,w=u(e,"onUpdate",!1);w&&(_=u(e,"onUpdateScope",m),x=u(e,"onUpdateParams",[]),i.setCallback("onUpdate",w,v.concat(x),_));var b,E,T=u(e,"onLoop",!1);T&&(b=u(e,"onLoopScope",m),E=u(e,"onLoopParams",[]),i.setCallback("onLoop",T,v.concat(E),b));var S,A,O=u(e,"onYoyo",!1);O&&(S=u(e,"onYoyoScope",m),A=u(e,"onYoyoParams",[]),i.setCallback("onYoyo",O,v.concat(null,A),S));var C,P,L=u(e,"onComplete",!1);L&&(C=u(e,"onCompleteScope",m),P=u(e,"onCompleteParams",[]),i.setCallback("onComplete",L,v.concat(P),C));var R=c(e);if(0===R.length)return i.paused=!0,i;var I=n(s);I.targets=l(e);var M=r(e,"totalDuration",0);I.duration=0<M?Math.floor(M/R.length):h(e,"duration",I.duration),I.delay=h(e,"delay",I.delay),I.easeParams=u(e,"easeParams",I.easeParams),I.ease=o(u(e,"ease",I.ease),I.easeParams),I.hold=h(e,"hold",I.hold),I.repeat=h(e,"repeat",I.repeat),I.repeatDelay=h(e,"repeatDelay",I.repeatDelay),I.yoyo=a(e,"yoyo",I.yoyo),I.flipX=a(e,"flipX",I.flipX),I.flipY=a(e,"flipY",I.flipY);for(var D=0;D<R.length;D++)i.queue(f(i,R[D],I));return i}},function(t,e,i){var n=i(0),s=i(9),r=i(267),a=i(163),o=i(100),h=new n({Extends:s,initialize:function(t){s.call(this),this.manager=t,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=o.PENDING_ADD,this._pausedState=o.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(t,e){this.emit(t,this),e&&e.func.apply(e.scope,e.params)},setTimeScale:function(t){return this.timeScale=t,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===o.ACTIVE},add:function(t){return this.queue(a(this,t))},queue:function(t){return this.isPlaying()||(t.parent=this,t.parentIsTimeline=!0,this.data.push(t),this.totalData=this.data.length),this},hasOffset:function(t){return null!==t.offset},isOffsetAbsolute:function(t){return"number"==typeof t},isOffsetRelative:function(t){if("string"==typeof t){var e=t[0];if("-"===e||"+"===e)return!0}return!1},getRelativeOffset:function(t,e){var i=t[0],n=parseFloat(t.substr(2)),s=e;switch(i){case"+":s+=n;break;case"-":s-=n}return Math.max(0,s)},calcDuration:function(){for(var t=0,e=0,i=0,n=0;n<this.totalData;n++){var s=this.data[n];s.init(),this.hasOffset(s)?this.isOffsetAbsolute(s.offset)?(s.calculatedOffset=s.offset,0===s.offset&&(i=0)):this.isOffsetRelative(s.offset)&&(s.calculatedOffset=this.getRelativeOffset(s.offset,t)):s.calculatedOffset=i,t=s.totalDuration+s.calculatedOffset,e+=s.totalDuration,i+=s.totalDuration}this.duration=e,this.loopCounter=-1===this.loop?999999999999:this.loop,0<this.loopCounter?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,!this.paused||(this.state=o.PAUSED,!1)},resetTweens:function(t){for(var e=0;e<this.totalData;e++)this.data[e].play(t)},setCallback:function(t,e,i,n){return-1!==h.TYPES.indexOf(t)&&(this.callbacks[t]={func:e,scope:n,params:i}),this},makeActive:function(t){return this.manager.makeActive(t)},play:function(){if(this.state!==o.ACTIVE){if(this.paused)return this.paused=!1,void this.manager.makeActive(this);this.resetTweens(!1),this.state=o.ACTIVE,this.dispatchTimelineEvent(r.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){0<this.loopCounter?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),0<this.loopDelay?(this.countdown=this.loopDelay,this.state=o.LOOP_DELAY):(this.state=o.ACTIVE,this.dispatchTimelineEvent(r.TIMELINE_LOOP,this.callbacks.onLoop))):0<this.completeDelay?(this.state=o.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=o.PENDING_REMOVE,this.dispatchTimelineEvent(r.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(t,e){if(this.state!==o.PAUSED){switch(this.useFrames&&(e=+this.manager.timeScale),e*=this.timeScale,this.elapsed+=e,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=e,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case o.ACTIVE:for(var i=this.totalData,n=0;n<this.totalData;n++)this.data[n].update(t,e)&&i--;this.dispatchTimelineEvent(r.TIMELINE_UPDATE,this.callbacks.onUpdate),0===i&&this.nextState();break;case o.LOOP_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=o.ACTIVE,this.dispatchTimelineEvent(r.TIMELINE_LOOP,this.callbacks.onLoop));break;case o.COMPLETE_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=o.PENDING_REMOVE,this.dispatchTimelineEvent(r.TIMELINE_COMPLETE,this.callbacks.onComplete))}return this.state===o.PENDING_REMOVE}},stop:function(){this.state=o.PENDING_REMOVE},pause:function(){if(this.state!==o.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=o.PAUSED,this.emit(r.TIMELINE_PAUSE,this),this},resume:function(){return this.state===o.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(r.TIMELINE_RESUME,this)),this},hasTarget:function(t){for(var e=0;e<this.data.length;e++)if(this.data[e].hasTarget(t))return!0;return!1},destroy:function(){for(var t=0;t<this.data.length;t++)this.data[t].stop()}});h.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],t.exports=h},,,,,,,,,,,,function(t,e){var i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){var n=i(276);t.exports=function(t,e,i,s){for(var r=t[0],a=1;a<t.length;a++){var o=t[a];n(o,r,e,i,s),r=o}return t}},function(t,e,i){var n=i(46);t.exports=function(t,e,i,s,r){return n(t,"angle",e,i,s,r)}},function(t,e){t.exports=function(t,e,i){for(var n=0;n<t.length;n++){var s=t[n];e.call(i,s)}return t}},function(t,e){t.exports=function(t,e,i){void 0===i&&(i=0);for(var n=i;n<t.length;n++){var s=t[n],r=!0;for(var a in e)s[a]!==e[a]&&(r=!1);if(r)return s}return null}},function(t,e){t.exports=function(t,e,i){void 0===i&&(i=0);for(var n=i;n<t.length;n++){var s=t[n],r=!0;for(var a in e)s[a]!==e[a]&&(r=!1);if(r)return s}return null}},function(t,e,i){var n=i(289),s=i(123),r=i(2),a=i(1),o=new(i(129))({sys:{queueDepthSort:a,events:{once:a}}},0,0,1,1);t.exports=function(t,e){void 0===e&&(e={});var i=e.hasOwnProperty("width"),a=e.hasOwnProperty("height"),h=r(e,"width",-1),l=r(e,"height",-1),c=r(e,"cellWidth",1),u=r(e,"cellHeight",c),d=r(e,"position",s.TOP_LEFT),f=r(e,"x",0),p=r(e,"y",0),g=0,m=0,v=h*c,y=l*u;o.setPosition(f,p),o.setSize(c,u);for(var _=0;_<t.length;_++)if(n(t[_],o,d),i&&-1===h)o.x+=c;else if(a&&-1===l)o.y+=u;else if(a&&!i){if(m+=u,o.y+=u,m===y&&(m=0,g+=c,o.y=p,o.x+=c,g===v))break}else if(g+=c,o.x+=c,g===v&&(g=0,m+=u,o.x=f,o.y+=u,m===y))break;return t}},function(t,e,i){var n=i(18),s={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t,e,i,s){return void 0===t&&(t=1),void 0===e?this.alpha=t:(this._alphaTL=n(t,0,1),this._alphaTR=n(e,0,1),this._alphaBL=n(i,0,1),this._alphaBR=n(s,0,1)),this},alpha:{get:function(){return this._alpha},set:function(t){var e=n(t,0,1);this._alpha=e,this._alphaTL=e,this._alphaTR=e,this._alphaBL=e,0===(this._alphaBR=e)?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(t){var e=n(t,0,1);0!==(this._alphaTL=e)&&(this.renderFlags|=2)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(t){var e=n(t,0,1);0!==(this._alphaTR=e)&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(t){var e=n(t,0,1);0!==(this._alphaBL=e)&&(this.renderFlags|=2)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(t){var e=n(t,0,1);0!==(this._alphaBR=e)&&(this.renderFlags|=2)}}};t.exports=s},function(t,e){t.exports={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this}}},function(t,e){t.exports={texture:null,frame:null,isCropped:!1,setCrop:function(t,e,i,n){return void 0===t?this.isCropped=!1:this.frame&&("number"==typeof t?this.frame.setCropUVs(this._crop,t,e,i,n,this.flipX,this.flipY):this.frame.setCropUVs(this._crop,t.x,t.y,t.width,t.height,this.flipX,this.flipY),this.isCropped=!0),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},function(t,e){t.exports={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,e){return this.flipX=t,this.flipY=e,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}}},function(t,e,i){var n=i(10),s=i(308),r=i(3),a={prepareBoundsOutput:function(t,e){return void 0===e&&(e=!1),0!==this.rotation&&s(t,this.x,this.y,this.rotation),e&&this.parentContainer&&this.parentContainer.getBoundsTransformMatrix().transformPoint(t.x,t.y,t),t},getCenter:function(t){return void 0===t&&(t=new r),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,t},getTopLeft:function(t,e){return(t=t||new r).x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getTopCenter:function(t,e){return(t=t||new r).x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getTopRight:function(t,e){return(t=t||new r).x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getLeftCenter:function(t,e){return(t=t||new r).x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getRightCenter:function(t,e){return(t=t||new r).x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getBottomLeft:function(t,e){return(t=t||new r).x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBottomCenter:function(t,e){return(t=t||new r).x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBottomRight:function(t,e){return(t=t||new r).x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBounds:function(t){var e,i,s,r,a,o,h,l,c;return void 0===t&&(t=new n),this.parentContainer?(c=this.parentContainer.getBoundsTransformMatrix(),this.getTopLeft(t),c.transformPoint(t.x,t.y,t),e=t.x,i=t.y,this.getTopRight(t),c.transformPoint(t.x,t.y,t),s=t.x,r=t.y,this.getBottomLeft(t),c.transformPoint(t.x,t.y,t),a=t.x,o=t.y,this.getBottomRight(t),c.transformPoint(t.x,t.y,t)):(this.getTopLeft(t),e=t.x,i=t.y,this.getTopRight(t),s=t.x,r=t.y,this.getBottomLeft(t),a=t.x,o=t.y,this.getBottomRight(t)),h=t.x,l=t.y,t.x=Math.min(e,s,a,h),t.y=Math.min(i,r,o,l),t.width=Math.max(e,s,a,h)-t.x,t.height=Math.max(i,r,o,l)-t.y,t}};t.exports=a},function(t,e){t.exports="blur"},function(t,e){t.exports="boot"},function(t,e){t.exports="contextlost"},function(t,e){t.exports="contextrestored"},function(t,e){t.exports="destroy"},function(t,e){t.exports="focus"},function(t,e){t.exports="hidden"},function(t,e){t.exports="pause"},function(t,e){t.exports="postrender"},function(t,e){t.exports="poststep"},function(t,e){t.exports="prerender"},function(t,e){t.exports="prestep"},function(t,e){t.exports="ready"},function(t,e){t.exports="resume"},function(t,e){t.exports="step"},function(t,e){t.exports="visible"},function(t,e){t.exports="postrender"},function(t,e){t.exports="prerender"},function(t,e){t.exports="render"},function(t,e){t.exports="resize"},function(t,e){t.exports={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(t){this._displayOriginX=t,this.originX=t/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(t){this._displayOriginY=t,this.originY=t/this.height}},setOrigin:function(t,e){return void 0===t&&(t=.5),void 0===e&&(e=t),this.originX=t,this.originY=e,this.updateDisplayOrigin()},setOriginFromFrame:function(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.displayOriginX=t,this.displayOriginY=e,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}}},function(t,e,i){var n=i(36),s=i(99),r=i(6),a=i(100),o=i(3),h={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:a.PLAYING_FORWARD,setPath:function(t,e){void 0===e&&(e=this.pathConfig);var i=this.pathTween;return i&&i.isPlaying()&&i.stop(),this.path=t,e&&this.startFollow(e),this},setRotateToPath:function(t,e){return void 0===e&&(e=0),this.rotateToPath=t,this.pathRotationOffset=e,this},isFollowing:function(){var t=this.pathTween;return t&&t.isPlaying()},startFollow:function(t,e){void 0===t&&(t={}),void 0===e&&(e=0);var i=this.pathTween;i&&i.isPlaying()&&i.stop(),"number"==typeof t&&(t={duration:t}),t.from=r(t,"from",0),t.to=r(t,"to",1);var h=s(t,"positionOnPath",!1);this.rotateToPath=s(t,"rotateToPath",!1),this.pathRotationOffset=r(t,"rotationOffset",0);var l,c=r(t,"startAt",e);return c&&(t.onStart=function(t){var e=t.data[0];e.progress=c,e.elapsed=e.duration*c;var i=e.ease(e.progress);e.current=e.start+(e.end-e.start)*i,e.target[e.key]=e.current}),this.pathOffset||(this.pathOffset=new o(this.x,this.y)),this.pathVector||(this.pathVector=new o),this.pathDelta||(this.pathDelta=new o),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(t),this.path.getStartPoint(this.pathOffset),h&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=a.PLAYING_FORWARD,this.rotateToPath&&(l=this.path.getPoint(.1),this.rotation=Math.atan2(l.y-this.y,l.x-this.x)+n(this.pathRotationOffset)),this.pathConfig=t,this},pauseFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.pause(),this},resumeFollow:function(){var t=this.pathTween;return t&&t.isPaused()&&t.resume(),this},stopFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.stop(),this},pathUpdate:function(){var t=this.pathTween;if(t){var e=t.data[0],i=this.pathDelta,s=this.pathVector;if(i.copy(s).negate(),e.state===a.COMPLETE)return this.path.getPoint(1,s),i.add(s),s.add(this.pathOffset),void this.setPosition(s.x,s.y);if(e.state!==a.PLAYING_FORWARD&&e.state!==a.PLAYING_BACKWARD)return;this.path.getPoint(t.getValue(),s),i.add(s),s.add(this.pathOffset);var r=this.x,o=this.y;this.setPosition(s.x,s.y);var h=this.x-r,l=this.y-o;if(0==h&&0==l)return;if(e.state!==this._prevDirection)return void(this._prevDirection=e.state);this.rotateToPath&&(this.rotation=Math.atan2(l,h)+n(this.pathRotationOffset))}}};t.exports=h},function(t,e){var i={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function(t){return void 0===t&&(t=this.frame),this.width=t.realWidth,this.height=t.realHeight,this},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this}};t.exports=i},function(t,e){t.exports={texture:null,frame:null,isCropped:!1,setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t,e,i){return void 0===e&&(e=!0),void 0===i&&(i=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&e&&this.setSizeToFrame(),this._originComponent&&i&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}}},function(t,e){t.exports={texture:null,frame:null,isCropped:!1,setCrop:function(t,e,i,n){return void 0===t?this.isCropped=!1:this.frame&&("number"==typeof t?this.frame.setCropUVs(this._crop,t,e,i,n,this.flipX,this.flipY):this.frame.setCropUVs(this._crop,t.x,t.y,t.width,t.height,this.flipX,this.flipY),this.isCropped=!0),this},setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t,e,i){return void 0===e&&(e=!0),void 0===i&&(i=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&e&&this.setSizeToFrame(),this._originComponent&&i&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},function(t,e){t.exports={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(t,e,i,n){return void 0===t&&(t=16777215),void 0===e&&(n=i=e=t),this.tintTopLeft=t,this.tintTopRight=e,this.tintBottomLeft=i,this.tintBottomRight=n,this.tintFill=!1,this},setTintFill:function(t,e,i,n){return this.setTint(t,e,i,n),this.tintFill=!0,this},tint:{set:function(t){this.setTint(t,t,t,t)}},isTinted:{get:function(){var t=16777215;return this.tintFill||this.tintTopLeft!==t||this.tintTopRight!==t||this.tintBottomLeft!==t||this.tintBottomRight!==t}}}},function(t,e){t.exports="changedata"},function(t,e){t.exports="changedata-"},function(t,e){t.exports="destroy"},function(t,e){t.exports="removedata"},function(t,e){t.exports="setdata"},function(t,e){t.exports="addedtoscene"},function(t,e){t.exports="destroy"},function(t,e){t.exports="removedfromscene"},function(t,e){t.exports="complete"},function(t,e){t.exports="created"},function(t,e){t.exports="error"},function(t,e){t.exports="loop"},function(t,e){t.exports="play"},function(t,e){t.exports="seeked"},function(t,e){t.exports="seeking"},function(t,e){t.exports="stop"},function(t,e){t.exports="timeout"},function(t,e){t.exports="unlocked"},function(t,e){t.exports="addedtoscene"},function(t,e){t.exports="boot"},function(t,e){t.exports="create"},function(t,e){t.exports="destroy"},function(t,e){t.exports="pause"},function(t,e){t.exports="postupdate"},function(t,e){t.exports="prerender"},function(t,e){t.exports="preupdate"},function(t,e){t.exports="ready"},function(t,e){t.exports="removedfromscene"},function(t,e){t.exports="render"},function(t,e){t.exports="resume"},function(t,e){t.exports="shutdown"},function(t,e){t.exports="sleep"},function(t,e){t.exports="start"},function(t,e){t.exports="transitioncomplete"},function(t,e){t.exports="transitioninit"},function(t,e){t.exports="transitionout"},function(t,e){t.exports="transitionstart"},function(t,e){t.exports="transitionwake"},function(t,e){t.exports="update"},function(t,e){t.exports="wake"},function(t,e,i){var n=i(46);t.exports=function(t,e,i,s,r){return n(t,"alpha",e,i,s,r)}},function(t,e,i){var n=i(46);t.exports=function(t,e,i,s,r){return n(t,"x",e,i,s,r)}},function(t,e,i){var n=i(46);t.exports=function(t,e,i,s,r,a,o){return null==i&&(i=e),n(t,"x",e,s,a,o),n(t,"y",i,r,a,o)}},function(t,e,i){var n=i(46);t.exports=function(t,e,i,s,r){return n(t,"y",e,i,s,r)}},function(t,e){t.exports=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=6.28);for(var s=i,r=(n-i)/t.length,a=0;a<t.length;a++)t[a].x=e.x+e.radius*Math.cos(s),t[a].y=e.y+e.radius*Math.sin(s),s+=r;return t}},function(t,e){t.exports=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=6.28);for(var s=i,r=(n-i)/t.length,a=e.width/2,o=e.height/2,h=0;h<t.length;h++)t[h].x=e.x+a*Math.cos(s),t[h].y=e.y+o*Math.sin(s),s+=r;return t}},function(t,e,i){var n=i(172);t.exports=function(t,e){for(var i=n(e,t.length),s=0;s<t.length;s++){var r=t[s],a=i[s];r.x=a.x,r.y=a.y}return t}},function(t,e,i){var n=i(316),s=i(178),r=i(179);t.exports=function(t,e,i){void 0===i&&(i=0);var a=n(e,!1,t.length);0<i?s(a,i):i<0&&r(a,Math.abs(i));for(var o=0;o<t.length;o++)t[o].x=a[o].x,t[o].y=a[o].y;return t}},function(t,e,i){var n=i(317);t.exports=function(t,e,i){var s=n({x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2},i),r=n({x1:e.x2,y1:e.y2,x2:e.x3,y2:e.y3},i),a=n({x1:e.x3,y1:e.y3,x2:e.x1,y2:e.y1},i);s.pop(),r.pop(),a.pop();for(var o=(s=s.concat(r,a)).length/t.length,h=0,l=0;l<t.length;l++){var c=t[l],u=s[Math.floor(h)];c.x=u.x,c.y=u.y,h+=o}return t}},function(t,e){t.exports=function(t,e,i){for(var n=0;n<t.length;n++){var s=t[n];s.anims&&s.anims.play(e,i)}return t}},function(t,e,i){var n=i(170);t.exports=function(t,e){for(var i=0;i<t.length;i++)n(e,t[i]);return t}},function(t,e,i){var n=i(180);t.exports=function(t,e){for(var i=0;i<t.length;i++)n(e,t[i]);return t}},function(t,e,i){var n=i(173);t.exports=function(t,e){for(var i=0;i<t.length;i++)n(e,t[i]);return t}},function(t,e,i){var n=i(174);t.exports=function(t,e){for(var i=0;i<t.length;i++)n(e,t[i]);return t}},function(t,e,i){var n=i(181);t.exports=function(t,e){for(var i=0;i<t.length;i++)n(e,t[i]);return t}},function(t,e,i){var n=i(46);t.exports=function(t,e,i,s,r){return n(t,"rotation",e,i,s,r)}},function(t,e,i){var n=i(182),s=i(50);t.exports=function(t,e,i){for(var r=e.x,a=e.y,o=0;o<t.length;o++){var h=t[o];n(h,r,a,i,Math.max(1,s(h.x,h.y,r,a)))}return t}},function(t,e,i){var n=i(182);t.exports=function(t,e,i,s){var r=e.x,a=e.y;if(0===s)return t;for(var o=0;o<t.length;o++)n(t[o],r,a,i,s);return t}},function(t,e,i){var n=i(46);t.exports=function(t,e,i,s,r){return n(t,"scaleX",e,i,s,r)}},function(t,e,i){var n=i(46);t.exports=function(t,e,i,s,r,a,o){return null==i&&(i=e),n(t,"scaleX",e,s,a,o),n(t,"scaleY",i,r,a,o)}},function(t,e,i){var n=i(46);t.exports=function(t,e,i,s,r){return n(t,"scaleY",e,i,s,r)}},function(t,e,i){var n=i(27);t.exports=function(t,e,i,s,r){return n(t,"alpha",e,i,s,r)}},function(t,e,i){var n=i(27);t.exports=function(t,e,i,s){return n(t,"blendMode",e,0,i,s)}},function(t,e,i){var n=i(27);t.exports=function(t,e,i,s,r){return n(t,"depth",e,i,s,r)}},function(t,e){t.exports=function(t,e,i){for(var n=0;n<t.length;n++)t[n].setInteractive(e,i);return t}},function(t,e,i){var n=i(27);t.exports=function(t,e,i,s,r,a,o){return null==i&&(i=e),n(t,"originX",e,s,a,o),n(t,"originY",i,r,a,o),t.forEach((function(t){t.updateDisplayOrigin()})),t}},function(t,e,i){var n=i(27);t.exports=function(t,e,i,s,r){return n(t,"rotation",e,i,s,r)}},function(t,e,i){var n=i(27);t.exports=function(t,e,i,s,r,a,o){return null==i&&(i=e),n(t,"scaleX",e,s,a,o),n(t,"scaleY",i,r,a,o)}},function(t,e,i){var n=i(27);t.exports=function(t,e,i,s,r){return n(t,"scaleX",e,i,s,r)}},function(t,e,i){var n=i(27);t.exports=function(t,e,i,s,r){return n(t,"scaleY",e,i,s,r)}},function(t,e,i){var n=i(27);t.exports=function(t,e,i,s,r,a,o){return null==i&&(i=e),n(t,"scrollFactorX",e,s,a,o),n(t,"scrollFactorY",i,r,a,o)}},function(t,e,i){var n=i(27);t.exports=function(t,e,i,s,r){return n(t,"scrollFactorX",e,i,s,r)}},function(t,e,i){var n=i(27);t.exports=function(t,e,i,s,r){return n(t,"scrollFactorY",e,i,s,r)}},function(t,e){t.exports=function(t,e,i,n,s){for(var r=0;r<t.length;r++)t[r].setTint(e,i,n,s);return t}},function(t,e,i){var n=i(27);t.exports=function(t,e,i,s){return n(t,"visible",e,0,i,s)}},function(t,e,i){var n=i(27);t.exports=function(t,e,i,s,r){return n(t,"x",e,i,s,r)}},function(t,e,i){var n=i(27);t.exports=function(t,e,i,s,r,a,o){return null==i&&(i=e),n(t,"x",e,s,a,o),n(t,"y",i,r,a,o)}},function(t,e,i){var n=i(27);t.exports=function(t,e,i,s,r){return n(t,"y",e,i,s,r)}},function(t,e,i){var n=i(3);t.exports=function(t,e,i,s,r){var a,o,h;if(void 0===s&&(s=0),void 0===r&&(r=new n),1<t.length)if(0===s){for(var l=t.length-1,c=t[l].x,u=t[l].y,d=l-1;0<=d;d--)a=(h=t[d]).x,o=h.y,h.x=c,h.y=u,c=a,u=o;t[l].x=e,t[l].y=i}else{for(c=t[0].x,u=t[0].y,d=1;d<t.length;d++)a=(h=t[d]).x,o=h.y,h.x=c,h.y=u,c=a,u=o;t[0].x=e,t[0].y=i}else c=t[0].x,u=t[0].y,t[0].x=e,t[0].y=i;return r.x=c,r.y=u,r}},function(t,e,i){var n=i(131);t.exports=function(t){return n(t)}},function(t,e,i){var n=i(183);t.exports=function(t,e,i,s,r){void 0===r&&(r=!1);var a,o=Math.abs(s-i)/t.length;if(r)for(a=0;a<t.length;a++)t[a][e]+=n(a*o,i,s);else for(a=0;a<t.length;a++)t[a][e]=n(a*o,i,s);return t}},function(t,e,i){var n=i(184);t.exports=function(t,e,i,s,r){void 0===r&&(r=!1);var a,o=Math.abs(s-i)/t.length;if(r)for(a=0;a<t.length;a++)t[a][e]+=n(a*o,i,s);else for(a=0;a<t.length;a++)t[a][e]=n(a*o,i,s);return t}},function(t,e){t.exports=function(t,e,i,n,s){void 0===s&&(s=!1);var r,a=Math.abs(n-i)/t.length;if(s)for(r=0;r<t.length;r++)t[r][e]+=r*a+i;else for(r=0;r<t.length;r++)t[r][e]=r*a+i;return t}},function(t,e){t.exports=function(t){for(var e=0;e<t.length;e++)t[e].visible=!t[e].visible;return t}},function(t,e,i){var n=i(68);t.exports=function(t,e,i){void 0===i&&(i=0);for(var s=0;s<t.length;s++){var r=t[s];r.x=n(r.x,e.left-i,e.right+i),r.y=n(r.y,e.top-i,e.bottom+i)}return t}},function(t,e,i){t.exports={Animation:i(185),AnimationFrame:i(319),AnimationManager:i(321),AnimationState:i(164),Events:i(132)}},function(t,e){t.exports="add"},function(t,e){t.exports="animationcomplete"},function(t,e){t.exports="animationcomplete-"},function(t,e){t.exports="animationrepeat"},function(t,e){t.exports="animationrestart"},function(t,e){t.exports="animationstart"},function(t,e){t.exports="animationstop"},function(t,e){t.exports="animationupdate"},function(t,e){t.exports="pauseall"},function(t,e){t.exports="remove"},function(t,e){t.exports="resumeall"},function(t,e,i){t.exports={BaseCache:i(323),CacheManager:i(325),Events:i(324)}},function(t,e){t.exports="add"},function(t,e){t.exports="remove"},function(t,e,i){t.exports={Controls:i(739),Scene2D:i(742)}},function(t,e,i){t.exports={FixedKeyControl:i(740),SmoothedKeyControl:i(741)}},function(t,e,i){var n=i(0),s=i(6),r=new n({initialize:function(t){this.camera=s(t,"camera",null),this.left=s(t,"left",null),this.right=s(t,"right",null),this.up=s(t,"up",null),this.down=s(t,"down",null),this.zoomIn=s(t,"zoomIn",null),this.zoomOut=s(t,"zoomOut",null),this.zoomSpeed=s(t,"zoomSpeed",.01),this.minZoom=s(t,"minZoom",.001),this.maxZoom=s(t,"maxZoom",1e3),this.speedX=0,this.speedY=0;var e=s(t,"speed",null);"number"==typeof e?(this.speedX=e,this.speedY=e):(this.speedX=s(t,"speed.x",0),this.speedY=s(t,"speed.y",0)),this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(t){return this.camera=t,this},update:function(t){var e;this.active&&(void 0===t&&(t=1),e=this.camera,this.up&&this.up.isDown?e.scrollY-=this.speedY*t|0:this.down&&this.down.isDown&&(e.scrollY+=this.speedY*t|0),this.left&&this.left.isDown?e.scrollX-=this.speedX*t|0:this.right&&this.right.isDown&&(e.scrollX+=this.speedX*t|0),this.zoomIn&&this.zoomIn.isDown?(e.zoom-=this.zoomSpeed,e.zoom<this.minZoom&&(e.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(e.zoom+=this.zoomSpeed,e.zoom>this.maxZoom&&(e.zoom=this.maxZoom)))},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});t.exports=r},function(t,e,i){var n=i(0),s=i(6),r=new n({initialize:function(t){this.camera=s(t,"camera",null),this.left=s(t,"left",null),this.right=s(t,"right",null),this.up=s(t,"up",null),this.down=s(t,"down",null),this.zoomIn=s(t,"zoomIn",null),this.zoomOut=s(t,"zoomOut",null),this.zoomSpeed=s(t,"zoomSpeed",.01),this.minZoom=s(t,"minZoom",.001),this.maxZoom=s(t,"maxZoom",1e3),this.accelX=0,this.accelY=0;var e=s(t,"acceleration",null);"number"==typeof e?(this.accelX=e,this.accelY=e):(this.accelX=s(t,"acceleration.x",0),this.accelY=s(t,"acceleration.y",0)),this.dragX=0,this.dragY=0;var i=s(t,"drag",null);"number"==typeof i?(this.dragX=i,this.dragY=i):(this.dragX=s(t,"drag.x",0),this.dragY=s(t,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var n=s(t,"maxSpeed",null);"number"==typeof n?(this.maxSpeedX=n,this.maxSpeedY=n):(this.maxSpeedX=s(t,"maxSpeed.x",0),this.maxSpeedY=s(t,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(t){return this.camera=t,this},update:function(t){var e;this.active&&(void 0===t&&(t=1),e=this.camera,0<this._speedX?(this._speedX-=this.dragX*t,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*t,0<this._speedX&&(this._speedX=0)),0<this._speedY?(this._speedY-=this.dragY*t,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*t,0<this._speedY&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,0!==this._speedX&&(e.scrollX-=this._speedX*t|0),0!==this._speedY&&(e.scrollY-=this._speedY*t|0),0!==this._zoom&&(e.zoom+=this._zoom,e.zoom<this.minZoom?e.zoom=this.minZoom:e.zoom>this.maxZoom&&(e.zoom=this.maxZoom)))},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});t.exports=r},function(t,e,i){t.exports={Camera:i(326),BaseCamera:i(133),CameraManager:i(799),Effects:i(333),Events:i(37)}},function(t,e){t.exports="cameradestroy"},function(t,e){t.exports="camerafadeincomplete"},function(t,e){t.exports="camerafadeinstart"},function(t,e){t.exports="camerafadeoutcomplete"},function(t,e){t.exports="camerafadeoutstart"},function(t,e){t.exports="cameraflashcomplete"},function(t,e){t.exports="cameraflashstart"},function(t,e){t.exports="followupdate"},function(t,e){t.exports="camerapancomplete"},function(t,e){t.exports="camerapanstart"},function(t,e){t.exports="postrender"},function(t,e){t.exports="prerender"},function(t,e){t.exports="camerarotatecomplete"},function(t,e){t.exports="camerarotatestart"},function(t,e){t.exports="camerashakecomplete"},function(t,e){t.exports="camerashakestart"},function(t,e){t.exports="camerazoomcomplete"},function(t,e){t.exports="camerazoomstart"},function(t,e,i){var n=i(18),s=i(0),r=i(37),a=new s({initialize:function(t){this.camera=t,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,i,n,s,a,o,h){if(void 0===t&&(t=!0),void 0===e&&(e=1e3),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0),void 0===a&&(a=!1),void 0===o&&(o=null),void 0===h&&(h=this.camera.scene),!a&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=e,this.direction=t,this.progress=0,this.red=i,this.green=n,this.blue=s,this.alpha=t?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=o,this._onUpdateScope=h;var l=t?r.FADE_OUT_START:r.FADE_IN_START;return this.camera.emit(l,this.camera,this,e,i,n,s),this.camera},update:function(t,e){this.isRunning&&(this._elapsed+=e,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(t){if(!this.isRunning&&!this.isComplete)return!1;var e=this.camera;return t.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",t.fillRect(e.x,e.y,e.width,e.height),!0},postRenderWebGL:function(t,e){if(!this.isRunning&&!this.isComplete)return!1;var i=this.camera,n=this.red/255,s=this.green/255,r=this.blue/255;return t.drawFillRect(i.x,i.y,i.width,i.height,e(r,s,n,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var t=this.direction?r.FADE_OUT_COMPLETE:r.FADE_IN_COMPLETE;this.camera.emit(t,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=a},function(t,e,i){var n=i(18),s=i(0),r=i(37),a=new s({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,i,n,s,a,o){return void 0===t&&(t=250),void 0===e&&(e=255),void 0===i&&(i=255),void 0===n&&(n=255),void 0===s&&(s=!1),void 0===a&&(a=null),void 0===o&&(o=this.camera.scene),!s&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,this.red=e,this.green=i,this.blue=n,this.alpha=1,this._elapsed=0,this._onUpdate=a,this._onUpdateScope=o,this.camera.emit(r.FLASH_START,this.camera,this,t,e,i,n)),this.camera},update:function(t,e){this.isRunning&&(this._elapsed+=e,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(t){if(!this.isRunning)return!1;var e=this.camera;return t.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",t.fillRect(e.x,e.y,e.width,e.height),!0},postRenderWebGL:function(t,e){if(!this.isRunning)return!1;var i=this.camera,n=this.red/255,s=this.green/255,r=this.blue/255;return t.drawFillRect(i.x,i.y,i.width,i.height,e(r,s,n,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=a},function(t,e,i){var n=i(18),s=i(0),r=i(134),a=i(37),o=i(3),h=new s({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=new o,this.current=new o,this.destination=new o,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,i,n,s,o,h){void 0===i&&(i=1e3),void 0===n&&(n=r.Linear),void 0===s&&(s=!1),void 0===o&&(o=null),void 0===h&&(h=this.camera.scene);var l=this.camera;return!s&&this.isRunning||(this.isRunning=!0,this.duration=i,this.progress=0,this.source.set(l.scrollX,l.scrollY),this.destination.set(t,e),l.getScroll(t,e,this.current),"string"==typeof n&&r.hasOwnProperty(n)?this.ease=r[n]:"function"==typeof n&&(this.ease=n),this._elapsed=0,this._onUpdate=o,this._onUpdateScope=h,this.camera.emit(a.PAN_START,this.camera,this,i,t,e)),l},update:function(t,e){var i,s,r,a,o;this.isRunning&&(this._elapsed+=e,i=n(this._elapsed/this.duration,0,1),this.progress=i,s=this.camera,this._elapsed<this.duration?(r=this.ease(i),s.getScroll(this.destination.x,this.destination.y,this.current),a=this.source.x+(this.current.x-this.source.x)*r,o=this.source.y+(this.current.y-this.source.y)*r,s.setScroll(a,o),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,s,i,a,o)):(s.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,s,i,s.scrollX,s.scrollY),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});t.exports=h},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1.70158),t*t*((e+1)*t-e)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1.70158),--t*t*((e+1)*t+e)+1}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1.70158);var i=1.525*e;return(t*=2)<1?t*t*((1+i)*t-i)*.5:.5*((t-=2)*t*((1+i)*t+i)+2)}},function(t,e){t.exports=function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}},function(t,e){t.exports=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},function(t,e){t.exports=function(t){var e=!1;return t<.5?(t=1-2*t,e=!0):t=2*t-1,t<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5}},function(t,e){t.exports=function(t){return 1-Math.sqrt(1-t*t)}},function(t,e){t.exports=function(t){return Math.sqrt(1- --t*t)}},function(t,e){t.exports=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},function(t,e){t.exports=function(t){return t*t*t}},function(t,e){t.exports=function(t){return--t*t*t+1}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},function(t,e){t.exports=function(t,e,i){if(void 0===e&&(e=.1),void 0===i&&(i=.1),0===t)return 0;if(1===t)return 1;var n=i/4;return e<1?e=1:n=i*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*--t)*Math.sin((t-n)*(2*Math.PI)/i)}},function(t,e){t.exports=function(t,e,i){if(void 0===e&&(e=.1),void 0===i&&(i=.1),0===t)return 0;if(1===t)return 1;var n=i/4;return e<1?e=1:n=i*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-n)*(2*Math.PI)/i)+1}},function(t,e){t.exports=function(t,e,i){if(void 0===e&&(e=.1),void 0===i&&(i=.1),0===t)return 0;if(1===t)return 1;var n=i/4;return e<1?e=1:n=i*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*--t)*Math.sin((t-n)*(2*Math.PI)/i)*-.5:e*Math.pow(2,-10*--t)*Math.sin((t-n)*(2*Math.PI)/i)*.5+1}},function(t,e){t.exports=function(t){return Math.pow(2,10*(t-1))-.001}},function(t,e){t.exports=function(t){return 1-Math.pow(2,-10*t)}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}},function(t,e){t.exports=function(t){return t}},function(t,e){t.exports=function(t){return t*t}},function(t,e){t.exports=function(t){return t*(2-t)}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},function(t,e){t.exports=function(t){return t*t*t*t}},function(t,e){t.exports=function(t){return 1- --t*t*t*t}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},function(t,e){t.exports=function(t){return t*t*t*t*t}},function(t,e){t.exports=function(t){return--t*t*t*t*t+1}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},function(t,e){t.exports=function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)}},function(t,e){t.exports=function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)}},function(t,e){t.exports=function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1),t<=0?0:1<=t?1:1/e*(1+(e*t|0))}},function(t,e,i){var n=i(18),s=i(0),r=i(37),a=i(3),o=new s({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.intensity=new a,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(t,e,i,n,s){return void 0===t&&(t=100),void 0===e&&(e=.05),void 0===i&&(i=!1),void 0===n&&(n=null),void 0===s&&(s=this.camera.scene),!i&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,"number"==typeof e?this.intensity.set(e):this.intensity.set(e.x,e.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=n,this._onUpdateScope=s,this.camera.emit(r.SHAKE_START,this.camera,this,t,e)),this.camera},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(t,e){var i,s,r,a;this.isRunning&&(this._elapsed+=e,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?(i=this.intensity,s=this.camera.width,r=this.camera.height,a=this.camera.zoom,this._offsetX=(Math.random()*i.x*s*2-i.x*s)*a,this._offsetY=(Math.random()*i.y*r*2-i.y*r)*a,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))):this.effectComplete())},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});t.exports=o},function(t,e,i){var n=i(18),s=i(0),r=i(37),a=i(134),o=new s({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(t,e,i,n,s,o,h){void 0===i&&(i=1e3),void 0===n&&(n=a.Linear),void 0===s&&(s=!1),void 0===o&&(o=null),void 0===h&&(h=this.camera.scene),void 0===e&&(e=!1),this.shortestPath=e;var l=t;t<0?(l=-1*t,this.clockwise=!1):this.clockwise=!0;var c=360*Math.PI/180;l-=Math.floor(l/c)*c;var u,d,f=this.camera;return!s&&this.isRunning||(this.isRunning=!0,this.duration=i,this.progress=0,this.source=f.rotation,this.destination=l,"string"==typeof n&&a.hasOwnProperty(n)?this.ease=a[n]:"function"==typeof n&&(this.ease=n),this._elapsed=0,this._onUpdate=o,this._onUpdateScope=h,this.shortestPath&&((u=this.destination>this.source?Math.abs(this.destination-this.source):Math.abs(this.destination+c)-this.source)<(d=this.source>this.destination?Math.abs(this.source-this.destination):Math.abs(this.source+c)-this.destination)?this.clockwise=!0:d<u&&(this.clockwise=!1)),this.camera.emit(r.ROTATE_START,this.camera,this,i,l)),f},update:function(t,e){var i,s,r,a,o,h,l,c;this.isRunning&&(this._elapsed+=e,i=n(this._elapsed/this.duration,0,1),this.progress=i,s=this.camera,this._elapsed<this.duration?(r=this.ease(i),this.current=s.rotation,o=360*Math.PI/180,h=this.destination,l=this.current,!1===this.clockwise&&(h=this.current,l=this.destination),a=l<=h?Math.abs(h-l):Math.abs(h+o)-l,c=this.clockwise?s.rotation+a*r:s.rotation-a*r,s.rotation=c,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,s,i,c)):(s.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,s,i,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});t.exports=o},function(t,e,i){var n=i(18),s=i(0),r=i(134),a=i(37),o=new s({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,i,n,s,o){void 0===e&&(e=1e3),void 0===i&&(i=r.Linear),void 0===n&&(n=!1),void 0===s&&(s=null),void 0===o&&(o=this.camera.scene);var h=this.camera;return!n&&this.isRunning||(this.isRunning=!0,this.duration=e,this.progress=0,this.source=h.zoom,this.destination=t,"string"==typeof i&&r.hasOwnProperty(i)?this.ease=r[i]:"function"==typeof i&&(this.ease=i),this._elapsed=0,this._onUpdate=s,this._onUpdateScope=o,this.camera.emit(a.ZOOM_START,this.camera,this,e,t)),h},update:function(t,e){this.isRunning&&(this._elapsed+=e,this.progress=n(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=o},function(t,e,i){var n=i(326),s=i(0),r=i(2),a=i(24),o=i(57),h=i(104),l=i(20),c=new s({initialize:function(t){this.scene=t,this.systems=t.sys,this.roundPixels=t.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,t.sys.events.once(l.BOOT,this.boot,this),t.sys.events.on(l.START,this.start,this)},boot:function(){var t=this.systems;t.settings.cameras?this.fromJSON(t.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new n(0,0,t.scale.width,t.scale.height).setScene(this.scene),t.game.scale.on(h.RESIZE,this.onResize,this),this.systems.events.once(l.DESTROY,this.destroy,this)},start:function(){var t;this.main||((t=this.systems).settings.cameras?this.fromJSON(t.settings.cameras):this.add(),this.main=this.cameras[0]);var e=this.systems.events;e.on(l.UPDATE,this.update,this),e.once(l.SHUTDOWN,this.shutdown,this)},add:function(t,e,i,s,r,a){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.scene.sys.scale.width),void 0===s&&(s=this.scene.sys.scale.height),void 0===r&&(r=!1),void 0===a&&(a="");var o=new n(t,e,i,s);return o.setName(a),o.setScene(this.scene),o.setRoundPixels(this.roundPixels),o.id=this.getNextID(),this.cameras.push(o),r&&(this.main=o),o},addExisting:function(t,e){return void 0===e&&(e=!1),-1===this.cameras.indexOf(t)?(t.id=this.getNextID(),t.setRoundPixels(this.roundPixels),this.cameras.push(t),e&&(this.main=t),t):null},getNextID:function(){for(var t=this.cameras,e=1,i=0;i<32;i++){for(var n=!1,s=0;s<t.length;s++){var r=t[s];r&&r.id===e&&(n=!0)}if(!n)return e;e<<=1}return 0},getTotal:function(t){void 0===t&&(t=!1);for(var e=0,i=this.cameras,n=0;n<i.length;n++){var s=i[n];(!t||t&&s.visible)&&e++}return e},fromJSON:function(t){Array.isArray(t)||(t=[t]);for(var e=this.scene.sys.scale.width,i=this.scene.sys.scale.height,n=0;n<t.length;n++){var s=t[n],a=r(s,"x",0),o=r(s,"y",0),h=r(s,"width",e),l=r(s,"height",i),c=this.add(a,o,h,l);c.name=r(s,"name",""),c.zoom=r(s,"zoom",1),c.rotation=r(s,"rotation",0),c.scrollX=r(s,"scrollX",0),c.scrollY=r(s,"scrollY",0),c.roundPixels=r(s,"roundPixels",!1),c.visible=r(s,"visible",!0);var u=r(s,"backgroundColor",!1);u&&c.setBackgroundColor(u);var d,f,p,g,m=r(s,"bounds",null);m&&(d=r(m,"x",0),f=r(m,"y",0),p=r(m,"width",e),g=r(m,"height",i),c.setBounds(d,f,p,g))}return this},getCamera:function(t){for(var e=this.cameras,i=0;i<e.length;i++)if(e[i].name===t)return e[i];return null},getCamerasBelowPointer:function(t){for(var e=this.cameras,i=t.x,n=t.y,s=[],r=0;r<e.length;r++){var a=e[r];a.visible&&a.inputEnabled&&o(a,i,n)&&s.unshift(a)}return s},remove:function(t,e){void 0===e&&(e=!0),Array.isArray(t)||(t=[t]);for(var i=0,n=this.cameras,s=0;s<t.length;s++){var r=n.indexOf(t[s]);-1!==r&&(e?n[r].destroy():n[r].renderList=[],n.splice(r,1),i++)}return!this.main&&n[0]&&(this.main=n[0]),i},render:function(t,e){for(var i=this.scene,n=this.cameras,s=0;s<this.cameras.length;s++){var r,a=n[s];a.visible&&0<a.alpha&&(a.preRender(),r=this.getVisibleChildren(e.getChildren(),a),t.render(i,r,a))}},getVisibleChildren:function(t,e){for(var i=[],n=0;n<t.length;n++){var s=t[n];s.willRender(e)&&i.push(s)}return i},resetAll:function(){for(var t=0;t<this.cameras.length;t++)this.cameras[t].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(t,e){for(var i=0;i<this.cameras.length;i++)this.cameras[i].update(t,e)},onResize:function(t,e,i,n,s){for(var r=0;r<this.cameras.length;r++){var a=this.cameras[r];0===a._x&&0===a._y&&a._width===n&&a._height===s&&a.setSize(e.width,e.height)}},resize:function(t,e){for(var i=0;i<this.cameras.length;i++)this.cameras[i].setSize(t,e)},shutdown:function(){this.main=void 0;for(var t=0;t<this.cameras.length;t++)this.cameras[t].destroy();this.cameras=[];var e=this.systems.events;e.off(l.UPDATE,this.update,this),e.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(l.START,this.start,this),this.scene=null,this.systems=null}});a.register("CameraManager",c,"cameras"),t.exports=c},function(t,e){t.exports="enterfullscreen"},function(t,e){t.exports="fullscreenfailed"},function(t,e){t.exports="fullscreenunsupported"},function(t,e){t.exports="leavefullscreen"},function(t,e){t.exports="orientationchange"},function(t,e){t.exports="resize"},function(t,e,i){t.exports={Config:i(346),CreateRenderer:i(366),DebugHeader:i(384),Events:i(22),TimeStep:i(385),VisibilityHandler:i(387)}},function(t,e){var i,n,s=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(t){if(i===setTimeout)return setTimeout(t,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:r}catch(t){i=r}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var h,l=[],c=!1,u=-1;function d(){c&&h&&(c=!1,h.length?l=h.concat(l):u=-1,l.length&&f())}function f(){if(!c){var t=o(d);c=!0;for(var e=l.length;e;){for(h=l,l=[];++u<e;)h&&h[u].run();u=-1,e=l.length}h=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}s.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new p(t,e)),1!==l.length||c||o(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=g,s.addListener=g,s.once=g,s.off=g,s.removeListener=g,s.removeAllListeners=g,s.emit=g,s.prependListener=g,s.prependOnceListener=g,s.listeners=function(t){return[]},s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,e,i){var n=i(136),s={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};t.exports=("function"==typeof importScripts||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&1<=navigator.maxTouchPoints)&&(s.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(s.mspointer=!0),navigator.getGamepads&&(s.gamepads=!0),"onwheel"in window||n.ie&&"WheelEvent"in window?s.wheelEvent="wheel":"onmousewheel"in window?s.wheelEvent="mousewheel":n.firefox&&"MouseScrollEvent"in window&&(s.wheelEvent="DOMMouseScroll")),s)},function(t,e,i){var n=i(136),s={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};t.exports=function(){if("function"==typeof importScripts)return s;s.audioData=!!window.Audio,s.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var t,e,i=document.createElement("audio"),r=!!i.canPlayType;try{r&&(i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(s.ogg=!0),(i.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||i.canPlayType("audio/opus;").replace(/^no$/,""))&&(s.opus=!0),i.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(s.mp3=!0),i.canPlayType("audio/wav").replace(/^no$/,"")&&(s.wav=!0),(i.canPlayType("audio/x-m4a;")||i.canPlayType("audio/aac;").replace(/^no$/,""))&&(s.m4a=!0),i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(s.webm=!0),""!==i.canPlayType('audio/mp4;codecs="ec-3"')&&(n.edge?s.dolby=!0:n.safari&&9<=n.safariVersion&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)&&(t=parseInt(RegExp.$1,10),e=parseInt(RegExp.$2,10),(10===t&&11<=e||10<t)&&(s.dolby=!0))))}catch(t){}return s}()},function(t,e){var i={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};t.exports=function(){if("function"==typeof importScripts)return i;var t=document.createElement("video"),e=!!t.canPlayType;try{e&&(t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(i.ogg=!0),t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(i.h264=!0,i.mp4=!0),t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(i.webm=!0),t.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(i.vp9=!0),t.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(i.hls=!0))}catch(t){}return i}()},function(t,e){var i={available:!1,cancel:"",keyboard:!1,request:""};t.exports=function(){if("function"==typeof importScripts)return i;for(var t="Fullscreen",e="FullScreen",n=["request"+t,"request"+e,"webkitRequest"+t,"webkitRequest"+e,"msRequest"+t,"msRequest"+e,"mozRequest"+e,"mozRequest"+t],s=0;s<n.length;s++)if(document.documentElement[n[s]]){i.available=!0,i.request=n[s];break}var r=["cancel"+e,"exit"+t,"webkitCancel"+e,"webkitExit"+t,"msCancel"+e,"msExit"+t,"mozCancel"+e,"mozExit"+t];if(i.available)for(s=0;s<r.length;s++)if(document[r[s]]){i.cancel=r[s];break}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(i.keyboard=!0),Object.defineProperty(i,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),i}()},function(t,e,i){t.exports={Between:i(349),BetweenPoints:i(350),BetweenPointsY:i(813),BetweenY:i(814),CounterClockwise:i(815),Normalize:i(351),Random:i(816),RandomDegrees:i(817),Reverse:i(818),RotateTo:i(819),ShortestBetween:i(820),Wrap:i(269),WrapDegrees:i(270)}},function(t,e){t.exports=function(t,e){return Math.atan2(e.x-t.x,e.y-t.y)}},function(t,e){t.exports=function(t,e,i,n){return Math.atan2(i-t,n-e)}},function(t,e,i){var n=i(14);t.exports=function(t){return t>Math.PI&&(t-=n.PI2),Math.abs(((t+n.TAU)%n.PI2-n.PI2)%n.PI2)}},function(t,e,i){var n=i(137);t.exports=function(){return n(-Math.PI,Math.PI)}},function(t,e,i){var n=i(137);t.exports=function(){return n(-180,180)}},function(t,e,i){var n=i(351);t.exports=function(t){return n(t+Math.PI)}},function(t,e,i){var n=i(14);t.exports=function(t,e,i){return void 0===i&&(i=.05),t===e||(Math.abs(e-t)<=i||Math.abs(e-t)>=n.PI2-i?t=e:(Math.abs(e-t)>Math.PI&&(e<t?e+=n.PI2:e-=n.PI2),t<e?t+=i:e<t&&(t-=i))),t}},function(t,e){t.exports=function(t,e){var i=e-t;return 0==i?0:i-360*Math.floor((i+180)/360)}},function(t,e,i){t.exports={Between:i(50),BetweenPoints:i(352),BetweenPointsSquared:i(822),Chebyshev:i(823),Power:i(824),Snake:i(825),Squared:i(353)}},function(t,e){t.exports=function(t,e){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n}},function(t,e){t.exports=function(t,e,i,n){return Math.max(Math.abs(t-i),Math.abs(e-n))}},function(t,e){t.exports=function(t,e,i,n,s){return void 0===s&&(s=2),Math.sqrt(Math.pow(i-t,s)+Math.pow(n-e,s))}},function(t,e){t.exports=function(t,e,i,n){return Math.abs(t-i)+Math.abs(e-n)}},function(t,e,i){t.exports={Back:i(334),Bounce:i(335),Circular:i(336),Cubic:i(337),Elastic:i(338),Expo:i(339),Linear:i(340),Quadratic:i(341),Quartic:i(342),Quintic:i(343),Sine:i(344),Stepped:i(345)}},function(t,e,i){t.exports={Ceil:i(828),Equal:i(124),Floor:i(829),GreaterThan:i(354),LessThan:i(355)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1e-4),Math.ceil(t-e)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1e-4),Math.floor(t+e)}},function(t,e,i){t.exports={Bezier:i(831),CatmullRom:i(832),CubicBezier:i(358),Linear:i(833),QuadraticBezier:i(359),SmoothStep:i(360),SmootherStep:i(834)}},function(t,e,i){var n=i(356);t.exports=function(t,e){for(var i=0,s=t.length-1,r=0;r<=s;r++)i+=Math.pow(1-e,s-r)*Math.pow(e,r)*t[r]*n(s,r);return i}},function(t,e,i){var n=i(194);t.exports=function(t,e){var i=t.length-1,s=i*e,r=Math.floor(s);return t[0]===t[i]?(e<0&&(r=Math.floor(s=i*(1+e))),n(s-r,t[(r-1+i)%i],t[r],t[(r+1)%i],t[(r+2)%i])):e<0?t[0]-(n(-s,t[0],t[0],t[1],t[1])-t[0]):1<e?t[i]-(n(s-i,t[i],t[i],t[i-1],t[i-1])-t[i]):n(s-r,t[r?r-1:0],t[r],t[i<r+1?i:r+1],t[i<r+2?i:r+2])}},function(t,e,i){var n=i(135);t.exports=function(t,e){var i=t.length-1,s=i*e,r=Math.floor(s);return e<0?n(t[0],t[1],s):1<e?n(t[i],t[i-1],i-s):n(t[r],t[i<r+1?i:r+1],s-r)}},function(t,e,i){var n=i(183);t.exports=function(t,e,i){return e+(i-e)*n(t,0,1)}},function(t,e,i){t.exports={GetNext:i(361),IsSize:i(138),IsValue:i(836)}},function(t,e){t.exports=function(t){return 0<t&&0==(t&t-1)}},function(t,e,i){t.exports={Ceil:i(139),Floor:i(76),To:i(838)}},function(t,e){t.exports=function(t,e,i,n){return void 0===i&&(i=0),0===e?t:(t-=i,t=e*Math.round(t/e),n?(i+t)/e:i+t)}},function(t,e,i){var n=new(i(0))({initialize:function(t){void 0===t&&(t=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],t&&this.init(t)},rnd:function(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},hash:function(t){var e,i=this.n;t=t.toString();for(var n=0;n<t.length;n++)e=.02519603282416938*(i+=t.charCodeAt(n)),e-=i=e>>>0,i=(e*=i)>>>0,i+=4294967296*(e-=i);return 2.3283064365386963e-10*((this.n=i)>>>0)},init:function(t){"string"==typeof t?this.state(t):this.sow(t)},sow:function(t){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,t)for(var e=0;e<t.length&&null!=t[e];e++){var i=t[e];this.s0-=this.hash(i),this.s0+=~~(this.s0<0),this.s1-=this.hash(i),this.s1+=~~(this.s1<0),this.s2-=this.hash(i),this.s2+=~~(this.s2<0)}},integer:function(){return 4294967296*this.rnd()},frac:function(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(t,e){return Math.floor(this.realInRange(0,e-t+1)+t)},between:function(t,e){return Math.floor(this.realInRange(0,e-t+1)+t)},realInRange:function(t,e){return this.frac()*(e-t)+t},normal:function(){return 1-2*this.frac()},uuid:function(){var t="",e="";for(e=t="";t++<36;e+=~t%5|3*t&4?(15^t?8^this.frac()*(20^t?16:4):4).toString(16):"-");return e},pick:function(t){return t[this.integerInRange(0,t.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(t){return t[~~(Math.pow(this.frac(),2)*(t.length-1)+.5)]},timestamp:function(t,e){return this.realInRange(t||9466848e5,e||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(t){return"string"==typeof t&&t.match(/^!rnd/)&&(t=t.split(","),this.c=parseFloat(t[1]),this.s0=parseFloat(t[2]),this.s1=parseFloat(t[3]),this.s2=parseFloat(t[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(t){for(var e=t.length-1;0<e;e--){var i=Math.floor(this.frac()*(e+1)),n=t[i];t[i]=t[e],t[e]=n}return t}});t.exports=n},function(t,e){t.exports=function(t){for(var e=0,i=0;i<t.length;i++)e+=+t[i];return e/t.length}},function(t,e){t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=10);var n=Math.pow(i,-e);return Math.ceil(t*n)/n}},function(t,e){t.exports=function(t,e){return Math.abs(t-e)}},function(t,e,i){var n=i(18),s=i(0),r=i(69),a=i(1),o=new r,h=new s({initialize:function t(e,i,n,s){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=t.DefaultOrder),this._x=e,this._y=i,this._z=n,this._order=s,this.onChangeCallback=a},x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback(this)}},set:function(t,e,i,n){return void 0===n&&(n=this._order),this._x=t,this._y=e,this._z=i,this._order=n,this.onChangeCallback(this),this},copy:function(t){return this.set(t.x,t.y,t.z,t.order)},setFromQuaternion:function(t,e,i){return void 0===e&&(e=this._order),void 0===i&&(i=!1),o.fromQuat(t),this.setFromRotationMatrix(o,e,i)},setFromRotationMatrix:function(t,e,i){void 0===e&&(e=this._order),void 0===i&&(i=!1);var s=t.val,r=s[0],a=s[4],o=s[8],h=s[1],l=s[5],c=s[9],u=s[2],d=s[6],f=s[10],p=0,g=0,m=0,v=.99999;switch(e){case"XYZ":g=Math.asin(n(o,-1,1)),Math.abs(o)<v?(p=Math.atan2(-c,f),m=Math.atan2(-a,r)):p=Math.atan2(d,l);break;case"YXZ":p=Math.asin(-n(c,-1,1)),Math.abs(c)<v?(g=Math.atan2(o,f),m=Math.atan2(h,l)):g=Math.atan2(-u,r);break;case"ZXY":p=Math.asin(n(d,-1,1)),m=Math.abs(d)<v?(g=Math.atan2(-u,f),Math.atan2(-a,l)):Math.atan2(h,r);break;case"ZYX":g=Math.asin(-n(u,-1,1)),m=Math.abs(u)<v?(p=Math.atan2(d,f),Math.atan2(h,r)):Math.atan2(-a,l);break;case"YZX":m=Math.asin(n(h,-1,1)),g=Math.abs(h)<v?(p=Math.atan2(-c,l),Math.atan2(-u,r)):Math.atan2(o,f);break;case"XZY":m=Math.asin(-n(a,-1,1)),Math.abs(a)<v?(p=Math.atan2(d,l),g=Math.atan2(o,r)):p=Math.atan2(-c,f)}return this._x=p,this._y=g,this._z=m,this._order=e,i&&this.onChangeCallback(this),this}});h.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],h.DefaultOrder="XYZ",t.exports=h},function(t,e){t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=10);var n=Math.pow(i,-e);return Math.floor(t*n)/n}},function(t,e){t.exports=function(t,e){return t/e/1e3}},function(t,e){t.exports=function(t){return t==parseFloat(t)?!(t%2):void 0}},function(t,e){t.exports=function(t){return t===parseFloat(t)?!(t%2):void 0}},function(t,e){t.exports=function(t,e,i){return Math.min(t+e,i)}},function(t,e){t.exports=function(t){var e=t.length;if(0===e)return 0;t.sort((function(t,e){return t-e}));var i=Math.floor(e/2);return e%2==0?(t[i]+t[i-1])/2:t[i]}},function(t,e){t.exports=function(t,e,i){return Math.max(t-e,i)}},function(t,e){t.exports=function(t,e,i,n){void 0===i&&(i=e+1);var s=(t-e)/(i-e);return 1<s?void 0!==n?(s=(n-t)/(n-i))<0&&(s=0):s=1:s<0&&(s=0),s}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);var i=2*Math.random()*Math.PI;return t.x=Math.cos(i)*e,t.y=Math.sin(i)*e,t}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);var i=2*Math.random()*Math.PI,n=2*Math.random()-1,s=Math.sqrt(1-n*n)*e;return t.x=Math.cos(i)*s,t.y=Math.sin(i)*s,t.z=n*e,t}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1),t.x=(2*Math.random()-1)*e,t.y=(2*Math.random()-1)*e,t.z=(2*Math.random()-1)*e,t.w=(2*Math.random()-1)*e,t}},function(t,e){t.exports=function(t,e,i,n,s){return t.x=e+s*Math.cos(n),t.y=i+s*Math.sin(n),t}},function(t,e){t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=10);var n=Math.pow(i,-e);return Math.round(t*n)/n}},function(t,e){t.exports=function(t,e,i,n){void 0===e&&(e=1),void 0===i&&(i=1),void 0===n&&(n=1),n*=Math.PI/t;for(var s=[],r=[],a=0;a<t;a++)e+=(i-=e*n)*n,s[a]=i,r[a]=e;return{sin:r,cos:s,length:t}}},function(t,e,i){var n=i(3);t.exports=function(t,e,i,s){void 0===s&&(s=new n);var r=0,a=0;return 0<t&&t<=e*i&&(r=e-1<t?t-(a=Math.floor(t/e))*e:t),s.set(r,a)}},function(t,e){t.exports=function(t,e,i){return Math.abs(t-e)<=i}},function(t,e,i){var n=i(39),s=i(69),r=i(365),a=new s,o=new r,h=new n;t.exports=function(t,e,i){return o.setAxisAngle(e,i),a.fromRotationTranslation(o,h.set(0,0,0)),t.transformMat4(a)}},function(t,e){t.exports="addtexture"},function(t,e){t.exports="onerror"},function(t,e){t.exports="onload"},function(t,e){t.exports="ready"},function(t,e){t.exports="removetexture"},function(t,e){t.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join("\n")},function(t,e){t.exports="pipelineafterflush"},function(t,e){t.exports="pipelinebeforeflush"},function(t,e){t.exports="pipelinebind"},function(t,e){t.exports="pipelineboot"},function(t,e){t.exports="pipelinedestroy"},function(t,e){t.exports="pipelinerebind"},function(t,e){t.exports="pipelineresize"},function(t,e){t.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join("\n")},function(t,e,i){t.exports={GenerateTexture:i(388),Palettes:i(889)}},function(t,e,i){t.exports={ARNE16:i(389),C64:i(890),CGA:i(891),JMP:i(892),MSX:i(893)}},function(t,e){t.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(t,e){t.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(t,e){t.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(t,e){t.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(t,e,i){t.exports={Path:i(895),MoveTo:i(393),CubicBezier:i(390),Curve:i(94),Ellipse:i(391),Line:i(392),QuadraticBezier:i(394),Spline:i(395)}},function(t,e,i){var n=i(0),s=i(390),r=i(391),a=i(5),o=i(392),h=i(393),l=i(394),c=i(10),u=i(395),d=i(3),f=i(14),p=new n({initialize:function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new d,this._tmpVec2A=new d,this._tmpVec2B=new d,"object"==typeof t?this.fromJSON(t):this.startPoint.set(t,e)},add:function(t){return this.curves.push(t),this},circleTo:function(t,e,i){return void 0===e&&(e=!1),this.ellipseTo(t,t,0,360,e,i)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);return t.equals(e)||this.curves.push(new o(e,t)),this},cubicBezierTo:function(t,e,i,n,r,a){var o,h,l=this.getEndPoint(),c=t instanceof d?(o=t,h=e,i):(o=new d(i,n),h=new d(r,a),new d(t,e));return this.add(new s(l,o,h,c))},quadraticBezierTo:function(t,e,i,n){var s,r=this.getEndPoint(),a=t instanceof d?(s=t,e):(s=new d(i,n),new d(t,e));return this.add(new l(r,s,a))},draw:function(t,e){for(var i=0;i<this.curves.length;i++){var n=this.curves[i];n.active&&n.draw(t,e)}return t},ellipseTo:function(t,e,i,n,s,a){var o=new r(0,0,t,e,i,n,s,a),h=this.getEndPoint(this._tmpVec2A),l=o.getStartPoint(this._tmpVec2B);return h.subtract(l),o.x=h.x,o.y=h.y,this.add(o)},fromJSON:function(t){this.curves=[],this.cacheLengths=[],this.startPoint.set(t.x,t.y),this.autoClose=t.autoClose;for(var e=0;e<t.curves.length;e++){var i=t.curves[e];switch(i.type){case"LineCurve":this.add(o.fromJSON(i));break;case"EllipseCurve":this.add(r.fromJSON(i));break;case"SplineCurve":this.add(u.fromJSON(i));break;case"CubicBezierCurve":this.add(s.fromJSON(i));break;case"QuadraticBezierCurve":this.add(l.fromJSON(i))}}return this},getBounds:function(t,e){void 0===t&&(t=new c),void 0===e&&(e=16),t.x=Number.MAX_VALUE,t.y=Number.MAX_VALUE;for(var i=new c,n=f.MIN_SAFE_INTEGER,s=f.MIN_SAFE_INTEGER,r=0;r<this.curves.length;r++){var a=this.curves[r];a.active&&(a.getBounds(i,e),t.x=Math.min(t.x,i.x),t.y=Math.min(t.y,i.y),n=Math.max(n,i.right),s=Math.max(s,i.bottom))}return t.right=n,t.bottom=s,t},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,i=0;i<this.curves.length;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t},getEndPoint:function(t){return void 0===t&&(t=new d),0<this.curves.length?this.curves[this.curves.length-1].getPoint(1,t):t.copy(this.startPoint),t},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},getPoint:function(t,e){void 0===e&&(e=new d);for(var i=t*this.getLength(),n=this.getCurveLengths(),s=0;s<n.length;){if(n[s]>=i){var r=n[s]-i,a=this.curves[s],o=a.getLength(),h=0===o?0:1-r/o;return a.getPointAt(h,e)}s++}return null},getPoints:function(t){void 0===t&&(t=12);for(var e,i=[],n=0;n<this.curves.length;n++){var s=this.curves[n];if(s.active)for(var r=s.getResolution(t),a=s.getPoints(r),o=0;o<a.length;o++){var h=a[o];e&&e.equals(h)||(i.push(h),e=h)}}return this.autoClose&&1<i.length&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},getRandomPoint:function(t){return void 0===t&&(t=new d),this.getPoint(Math.random(),t)},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e},getStartPoint:function(t){return void 0===t&&(t=new d),t.copy(this.startPoint)},getTangent:function(t,e){void 0===e&&(e=new d);for(var i=t*this.getLength(),n=this.getCurveLengths(),s=0;s<n.length;){if(n[s]>=i){var r=n[s]-i,a=this.curves[s],o=a.getLength(),h=0===o?0:1-r/o;return a.getTangentAt(h,e)}s++}return null},lineTo:function(t,e){t instanceof d?this._tmpVec2B.copy(t):this._tmpVec2B.set(t,e);var i=this.getEndPoint(this._tmpVec2A);return this.add(new o([i.x,i.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(t){return t.unshift(this.getEndPoint()),this.add(new u(t))},moveTo:function(t,e){return t instanceof d?this.add(new h(t.x,t.y)):this.add(new h(t,e))},toJSON:function(){for(var t=[],e=0;e<this.curves.length;e++)t.push(this.curves[e].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:t}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});a.register("path",(function(t,e){return new p(t,e)})),t.exports=p},function(t,e,i){t.exports={DataManager:i(101),DataManagerPlugin:i(897),Events:i(315)}},function(t,e,i){var n=i(0),s=i(101),r=i(24),a=i(20),o=new n({Extends:s,initialize:function(t){s.call(this,t,t.sys.events),this.scene=t,this.systems=t.sys,t.sys.events.once(a.BOOT,this.boot,this),t.sys.events.on(a.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(a.DESTROY,this.destroy,this)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){s.prototype.destroy.call(this),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});r.register("DataManagerPlugin",o,"data"),t.exports=o},function(t,e,i){t.exports={Align:i(899),BaseShader:i(396),Bounds:i(902),Canvas:i(906),Color:i(397),ColorMatrix:i(198),Masks:i(916),RGB:i(200)}},function(t,e,i){var n=i(123),s=i(17)(!1,s={In:i(900),To:i(901)},n);t.exports=s},function(t,e,i){t.exports={BottomCenter:i(290),BottomLeft:i(291),BottomRight:i(292),Center:i(293),LeftCenter:i(295),QuickSet:i(289),RightCenter:i(296),TopCenter:i(297),TopLeft:i(298),TopRight:i(299)}},function(t,e,i){t.exports={BottomCenter:i(277),BottomLeft:i(278),BottomRight:i(279),LeftBottom:i(280),LeftCenter:i(281),LeftTop:i(282),QuickSet:i(276),RightBottom:i(283),RightCenter:i(284),RightTop:i(285),TopCenter:i(286),TopLeft:i(287),TopRight:i(288)}},function(t,e,i){t.exports={CenterOn:i(294),GetBottom:i(42),GetBounds:i(903),GetCenterX:i(87),GetCenterY:i(89),GetLeft:i(43),GetOffsetX:i(904),GetOffsetY:i(905),GetRight:i(44),GetTop:i(45),SetBottom:i(55),SetCenterX:i(88),SetCenterY:i(90),SetLeft:i(53),SetRight:i(54),SetTop:i(52)}},function(t,e,i){var n=i(42),s=i(43),r=i(44),a=i(45);t.exports=function(t,e){void 0===e&&(e={});var i=s(t),o=a(t);return e.x=i,e.y=o,e.width=r(t)-i,e.height=n(t)-o,e}},function(t,e){t.exports=function(t){return t.width*t.originX}},function(t,e){t.exports=function(t){return t.height*t.originY}},function(t,e,i){t.exports={CanvasInterpolation:i(367),CanvasPool:i(31),Smoothing:i(192),TouchAction:i(907),UserSelect:i(908)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e="none"),t.style.msTouchAction=e,t.style["ms-touch-action"]=e,t.style["touch-action"]=e,t}},function(t,e){t.exports=function(t,e){return void 0===e&&(e="none"),["-webkit-","-khtml-","-moz-","-ms-",""].forEach((function(i){t.style[i+"user-select"]=e})),t.style["-webkit-touch-callout"]=e,t.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",t}},function(t,e,i){var n=i(103);t.exports=function(t){void 0===t&&(t=1024);var e=[],i=255,s=0,r=0;for(l=0;l<=255;l++)e.push({r:i,g:l,b:r,color:n(i,l,r)});for(l=s=255;0<=l;l--)e.push({r:l,g:s,b:r,color:n(l,s,r)});for(l=i=0;l<=255;l++,s--)e.push({r:i,g:s,b:l,color:n(i,s,l)});for(r=255,l=s=0;l<=255;l++,r--,i++)e.push({r:i,g:s,b:r,color:n(i,s,r)});if(1024===t)return e;for(var a=[],o=0,h=1024/t,l=0;l<t;l++)a.push(e[Math.floor(o)]),o+=h;return a}},function(t,e){t.exports=function(t){var e={r:t>>16&255,g:t>>8&255,b:255&t,a:255};return 16777215<t&&(e.a=t>>>24),e}},function(t,e,i){var n=i(38),s=i(399);t.exports=function(t,e,i){var r,a,o=i,h=i,l=i;return 0!==e&&(o=s(a=2*i-(r=i<.5?i*(1+e):i+e-i*e),r,t+1/3),h=s(a,r,t),l=s(a,r,t-1/3)),(new n).setGLTo(o,h,l,1)}},function(t,e,i){var n=i(188);t.exports=function(t,e){void 0===t&&(t=1),void 0===e&&(e=1);for(var i=[],s=0;s<=359;s++)i.push(n(s/359,t,e));return i}},function(t,e,i){function n(t,e,i,n,r,a,o,h){void 0===o&&(o=100),void 0===h&&(h=0);var l=h/o;return{r:s(t,n,l),g:s(e,r,l),b:s(i,a,l)}}var s=i(135);t.exports={RGBWithRGB:n,ColorWithRGB:function(t,e,i,s,r,a){return void 0===r&&(r=100),void 0===a&&(a=0),n(t.r,t.g,t.b,e,i,s,r,a)},ColorWithColor:function(t,e,i,s){return void 0===i&&(i=100),void 0===s&&(s=0),n(t.r,t.g,t.b,e.r,e.g,e.b,i,s)}}},function(t,e,i){var n=i(195),s=i(38);t.exports=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=255),new s(n(t,e),n(t,e),n(t,e))}},function(t,e,i){var n=i(398);t.exports=function(t,e,i,s,r){return void 0===s&&(s=255),void 0===r&&(r="#"),"#"===r?"#"+((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1,7):"0x"+n(s)+n(t)+n(e)+n(i)}},function(t,e,i){t.exports={BitmapMask:i(310),GeometryMask:i(311)}},function(t,e,i){var n={AddToDOM:i(142),DOMContentLoaded:i(400),GetInnerHeight:i(401),GetScreenOrientation:i(402),GetTarget:i(407),ParseXML:i(408),RemoveFromDOM:i(202),RequestAnimationFrame:i(386)};t.exports=n},function(t,e,i){t.exports={EventEmitter:i(919)}},function(t,e,i){var n=i(0),s=i(9),r=i(24),a=new n({Extends:s,initialize:function(){s.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});r.register("EventEmitter",a,"events"),t.exports=a},function(t,e,i){var n=i(142),s=i(321),r=i(325),a=i(31),o=i(0),h=i(346),l=i(921),c=i(366),u=i(101),d=i(384),f=i(347),p=i(400),g=i(9),m=i(22),v=i(409),y=i(24),_=i(414),x=i(415),w=i(417),b=i(106),E=i(422),T=i(385),S=i(387),A=i(426),O=new o({initialize:function(t){this.config=new h(t),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new g,this.anims=new s(this),this.textures=new E(this),this.cache=new r(this),this.registry=new u(this),this.input=new v(this,this.config),this.scene=new w(this,this.config.sceneConfig),this.device=f,this.scale=new x(this,this.config),this.sound=null,this.sound=A.create(this),this.loop=new T(this,this.config.fps),this.plugins=new _(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,p(this.boot.bind(this))},boot:function(){y.hasCore("EventEmitter")?(this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),c(this),l(this),d(this),n(this.canvas,this.config.parent),this.textures.once(b.READY,this.texturesReady,this),this.events.emit(m.BOOT)):console.warn("Aborting. Core Plugins missing.")},texturesReady:function(){this.events.emit(m.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),S(this);var t=this.events;t.on(m.HIDDEN,this.onHidden,this),t.on(m.VISIBLE,this.onVisible,this),t.on(m.BLUR,this.onBlur,this),t.on(m.FOCUS,this.onFocus,this)},step:function(t,e){if(this.pendingDestroy)return this.runDestroy();var i=this.events;i.emit(m.PRE_STEP,t,e),i.emit(m.STEP,t,e),this.scene.update(t,e),i.emit(m.POST_STEP,t,e);var n=this.renderer;n.preRender(),i.emit(m.PRE_RENDER,n,t,e),this.scene.render(n),n.postRender(),i.emit(m.POST_RENDER,n,t,e)},headlessStep:function(t,e){if(this.pendingDestroy)return this.runDestroy();var i=this.events;i.emit(m.PRE_STEP,t,e),i.emit(m.STEP,t,e),this.scene.update(t,e),i.emit(m.POST_STEP,t,e),i.emit(m.PRE_RENDER),i.emit(m.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(m.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(m.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(t,e){void 0===e&&(e=!1),this.pendingDestroy=!0,this.removeCanvas=t,this.noReturn=e},runDestroy:function(){this.scene.destroy(),this.events.emit(m.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(a.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});t.exports=O},function(t,e,i){var n=i(142);t.exports=function(t){var e,i=t.config;i.parent&&i.domCreateContainer&&((e=document.createElement("div")).style.cssText=["display: block;","width: "+t.scale.width+"px;","height: "+t.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+i.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),t.domContainer=e,n(e,i.parent))}},function(t,e){t.exports="boot"},function(t,e){t.exports="destroy"},function(t,e){t.exports="dragend"},function(t,e){t.exports="dragenter"},function(t,e){t.exports="drag"},function(t,e){t.exports="dragleave"},function(t,e){t.exports="dragover"},function(t,e){t.exports="dragstart"},function(t,e){t.exports="drop"},function(t,e){t.exports="gameout"},function(t,e){t.exports="gameover"},function(t,e){t.exports="gameobjectdown"},function(t,e){t.exports="dragend"},function(t,e){t.exports="dragenter"},function(t,e){t.exports="drag"},function(t,e){t.exports="dragleave"},function(t,e){t.exports="dragover"},function(t,e){t.exports="dragstart"},function(t,e){t.exports="drop"},function(t,e){t.exports="gameobjectmove"},function(t,e){t.exports="gameobjectout"},function(t,e){t.exports="gameobjectover"},function(t,e){t.exports="pointerdown"},function(t,e){t.exports="pointermove"},function(t,e){t.exports="pointerout"},function(t,e){t.exports="pointerover"},function(t,e){t.exports="pointerup"},function(t,e){t.exports="wheel"},function(t,e){t.exports="gameobjectup"},function(t,e){t.exports="gameobjectwheel"},function(t,e){t.exports="boot"},function(t,e){t.exports="process"},function(t,e){t.exports="update"},function(t,e){t.exports="pointerdown"},function(t,e){t.exports="pointerdownoutside"},function(t,e){t.exports="pointermove"},function(t,e){t.exports="pointerout"},function(t,e){t.exports="pointerover"},function(t,e){t.exports="pointerup"},function(t,e){t.exports="pointerupoutside"},function(t,e){t.exports="wheel"},function(t,e){t.exports="pointerlockchange"},function(t,e){t.exports="preupdate"},function(t,e){t.exports="shutdown"},function(t,e){t.exports="start"},function(t,e){t.exports="update"},function(t,e){t.exports="addfile"},function(t,e){t.exports="complete"},function(t,e){t.exports="filecomplete"},function(t,e){t.exports="filecomplete-"},function(t,e){t.exports="loaderror"},function(t,e){t.exports="load"},function(t,e){t.exports="fileprogress"},function(t,e){t.exports="postprocess"},function(t,e){t.exports="progress"},function(t,e){t.exports="start"},function(t,e,i){t.exports={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"}},function(t,e){t.exports=function(t,e,i){if(i.getElementsByTagName("TextureAtlas")){var n=t.source[e];t.add("__BASE",e,0,0,n.width,n.height);for(var s=i.getElementsByTagName("SubTexture"),r=0;r<s.length;r++){var a,o,h,l,c=s[r].attributes,u=c.name.value,d=parseInt(c.x.value,10),f=parseInt(c.y.value,10),p=parseInt(c.width.value,10),g=parseInt(c.height.value,10),m=t.add(u,e,d,f,p,g);c.frameX&&(a=Math.abs(parseInt(c.frameX.value,10)),o=Math.abs(parseInt(c.frameY.value,10)),h=parseInt(c.frameWidth.value,10),l=parseInt(c.frameHeight.value,10),m.setTrim(p,g,a,o,h,l))}return t}console.warn("Invalid Texture Atlas XML given")}},function(t,e){t.exports=function(t,e){var i=t.source[e];return t.add("__BASE",e,0,0,i.width,i.height),t}},function(t,e){t.exports=function(t,e){var i=t.source[e];return t.add("__BASE",e,0,0,i.width,i.height),t}},function(t,e,i){var n=i(77);t.exports=function(t,e,i){if(i.frames||i.textures){var s=t.source[e];t.add("__BASE",e,0,0,s.width,s.height);for(var r=Array.isArray(i.textures)?i.textures[e].frames:i.frames,a=0;a<r.length;a++){var o=r[a],h=t.add(o.filename,e,o.frame.x,o.frame.y,o.frame.w,o.frame.h);o.trimmed&&h.setTrim(o.sourceSize.w,o.sourceSize.h,o.spriteSourceSize.x,o.spriteSourceSize.y,o.spriteSourceSize.w,o.spriteSourceSize.h),o.rotated&&(h.rotated=!0,h.updateUVsInverted());var l=o.anchor||o.pivot;l&&(h.customPivot=!0,h.pivotX=l.x,h.pivotY=l.y),h.customData=n(o)}for(var c in i)"frames"!==c&&(Array.isArray(i[c])?t.customData[c]=i[c].slice(0):t.customData[c]=i[c]);return t}console.warn("Invalid Texture Atlas JSON Array")}},function(t,e,i){var n=i(77);t.exports=function(t,e,i){if(i.frames){var s=t.source[e];t.add("__BASE",e,0,0,s.width,s.height);var r,a,o,h=i.frames;for(var l in h)h.hasOwnProperty(l)&&(r=h[l],a=t.add(l,e,r.frame.x,r.frame.y,r.frame.w,r.frame.h),r.trimmed&&a.setTrim(r.sourceSize.w,r.sourceSize.h,r.spriteSourceSize.x,r.spriteSourceSize.y,r.spriteSourceSize.w,r.spriteSourceSize.h),r.rotated&&(a.rotated=!0,a.updateUVsInverted()),(o=r.anchor||r.pivot)&&(a.customPivot=!0,a.pivotX=o.x,a.pivotY=o.y),a.customData=n(r));for(var c in i)"frames"!==c&&(Array.isArray(i[c])?t.customData[c]=i[c].slice(0):t.customData[c]=i[c]);return t}console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object")}},function(t,e,i){var n=i(2);t.exports=function(t,e,i,s,r,a,o){var h=n(o,"frameWidth",null),l=n(o,"frameHeight",h);if(null===h)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var c=t.source[e];t.add("__BASE",e,0,0,c.width,c.height);var u=n(o,"startFrame",0),d=n(o,"endFrame",-1),f=n(o,"margin",0),p=n(o,"spacing",0),g=Math.floor((r-f+p)/(h+p))*Math.floor((a-f+p)/(l+p));0===g&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",t.key),(g<u||u<-g)&&(u=0),u<0&&(u=g+u),-1!==d&&(g=u+(d+1));for(var m=f,v=f,y=0,_=0,x=0;x<g;x++){_=y=0;var w=m+h,b=v+l;r<w&&(y=w-r),a<b&&(_=b-a),t.add(x,e,i+m,s+v,h-y,l-_),r<(m+=h+p)+h&&(m=f,v+=l+p)}return t}},function(t,e,i){var n=i(2);t.exports=function(t,e,i){var s=n(i,"frameWidth",null),r=n(i,"frameHeight",s);if(!s)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var a=t.source[0];t.add("__BASE",0,0,0,a.width,a.height);var o=n(i,"startFrame",0),h=n(i,"endFrame",-1),l=n(i,"margin",0),c=n(i,"spacing",0),u=e.cutX,d=e.cutY,f=e.cutWidth,p=e.cutHeight,g=e.realWidth,m=e.realHeight,v=Math.floor((g-l+c)/(s+c)),y=Math.floor((m-l+c)/(r+c)),_=v*y,x=e.x,w=s-x,b=s-(g-f-x),E=e.y,T=r-E,S=r-(m-p-E);(_<o||o<-_)&&(o=0),o<0&&(o=_+o),-1!==h&&(_=o+(h+1));for(var A=l,O=l,C=0,P=e.sourceIndex,L=0;L<y;L++){for(var R=0===L,I=L===y-1,M=0;M<v;M++){var D,k,N,F,G,B,z=0===M,U=M===v-1,Y=t.add(C,P,u+A,d+O,s,r);(z||R||U||I)&&(D=z?x:0,k=R?E:0,F=N=0,z&&(N+=s-w),U&&(N+=s-b),R&&(F+=r-T),I&&(F+=r-S),G=s-N,B=r-F,Y.cutWidth=G,Y.cutHeight=B,Y.setTrim(s,r,D,k,G,B)),A+=c,A+=z?w:U?b:s,C++}A=l,O+=c,O+=R?T:I?S:r}return t}},function(t,e){function i(t,e,i,s){var r=n-s.y-s.height;t.add(i,e,s.x,r,s.width,s.height)}var n=0;t.exports=function(t,e,s){var r=t.source[e];t.add("__BASE",e,0,0,r.width,r.height),n=r.height;for(var a=s.split("\n"),o=/^[ ]*(- )*(\w+)+[: ]+(.*)/,h="",l="",c={x:0,y:0,width:0,height:0},u=0;u<a.length;u++){var d=a[u].match(o);if(d){var f="- "===d[1],p=d[2],g=d[3];if(f&&(l!==h&&(i(t,e,l,c),h=l),c={x:0,y:0,width:0,height:0}),"name"!==p)switch(p){case"x":case"y":case"width":case"height":c[p]=parseInt(g,10)}else l=g}}return l!==h&&i(t,e,l,c),t}},function(t,e){t.exports="complete"},function(t,e){t.exports="decoded"},function(t,e){t.exports="decodedall"},function(t,e){t.exports="destroy"},function(t,e){t.exports="detune"},function(t,e){t.exports="detune"},function(t,e){t.exports="mute"},function(t,e){t.exports="rate"},function(t,e){t.exports="volume"},function(t,e){t.exports="loop"},function(t,e){t.exports="looped"},function(t,e){t.exports="mute"},function(t,e){t.exports="pan"},function(t,e){t.exports="pauseall"},function(t,e){t.exports="pause"},function(t,e){t.exports="play"},function(t,e){t.exports="rate"},function(t,e){t.exports="resumeall"},function(t,e){t.exports="resume"},function(t,e){t.exports="seek"},function(t,e){t.exports="stopall"},function(t,e){t.exports="stop"},function(t,e){t.exports="unlocked"},function(t,e){t.exports="volume"},function(t,e,i){var n={Events:i(75),DisplayList:i(1012),GameObjectCreator:i(16),GameObjectFactory:i(5),UpdateList:i(1040),Components:i(11),GetCalcMatrix:i(19),BuildGameObject:i(28),BuildGameObjectAnimation:i(439),GameObject:i(15),BitmapText:i(148),Blitter:i(213),Bob:i(440),Container:i(214),DOMElement:i(442),DynamicBitmapText:i(215),Extern:i(444),Graphics:i(216),Group:i(113),Image:i(125),Layer:i(219),Particles:i(1074),PathFollower:i(457),RenderTexture:i(221),RetroFont:i(1082),Rope:i(223),Sprite:i(73),Text:i(224),GetTextSize:i(458),MeasureText:i(460),TextStyle:i(459),TileSprite:i(225),Zone:i(129),Video:i(226),Shape:i(34),Arc:i(461),Curve:i(462),Ellipse:i(463),Grid:i(464),IsoBox:i(465),IsoTriangle:i(466),Line:i(467),Polygon:i(468),Rectangle:i(473),Star:i(474),Triangle:i(475),Factories:{Blitter:i(1130),Container:i(1131),DOMElement:i(1132),DynamicBitmapText:i(1133),Extern:i(1134),Graphics:i(1135),Group:i(1136),Image:i(1137),Layer:i(1138),Particles:i(1139),PathFollower:i(1140),RenderTexture:i(1141),Rope:i(1142),Sprite:i(1143),StaticBitmapText:i(1144),Text:i(1145),TileSprite:i(1146),Zone:i(1147),Video:i(1148),Arc:i(1149),Curve:i(1150),Ellipse:i(1151),Grid:i(1152),IsoBox:i(1153),IsoTriangle:i(1154),Line:i(1155),Polygon:i(1156),Rectangle:i(1157),Star:i(1158),Triangle:i(1159)},Creators:{Blitter:i(1160),Container:i(1161),DynamicBitmapText:i(1162),Graphics:i(1163),Group:i(1164),Image:i(1165),Layer:i(1166),Particles:i(1167),RenderTexture:i(1168),Rope:i(1169),Sprite:i(1170),StaticBitmapText:i(1171),Text:i(1172),TileSprite:i(1173),Zone:i(1174),Video:i(1175)}};n.Shader=i(229),n.Mesh=i(230),n.PointLight=i(150),n.Factories.Shader=i(1184),n.Factories.Mesh=i(1185),n.Factories.PointLight=i(1186),n.Creators.Shader=i(1187),n.Creators.Mesh=i(1188),n.Creators.PointLight=i(1189),n.Light=i(481),n.LightsManager=i(482),n.LightsPlugin=i(1190),t.exports=n},function(t,e,i){var n=i(0),s=i(110),r=i(24),a=i(75),o=i(20),h=i(79),l=new n({Extends:s,initialize:function(t){s.call(this,t),this.sortChildrenFlag=!1,this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(o.BOOT,this.boot,this),this.events.on(o.START,this.start,this)},boot:function(){this.events.once(o.DESTROY,this.destroy,this)},addChildCallback:function(t){t.displayList&&t.displayList!==this&&t.removeFromDisplayList(),t.displayList||(this.queueDepthSort(),t.displayList=this,t.emit(a.ADDED_TO_SCENE,t,this.scene),this.events.emit(o.ADDED_TO_SCENE,t,this.scene))},removeChildCallback:function(t){this.queueDepthSort(),t.displayList=null,t.emit(a.REMOVED_FROM_SCENE,t,this.scene),this.events.emit(o.REMOVED_FROM_SCENE,t,this.scene)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(h(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(t,e){return t._depth-e._depth},getChildren:function(){return this.list},shutdown:function(){for(var t=this.list,e=t.length;e--;)t[e].destroy(!0);t.length=0,this.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});r.register("DisplayList",l,"displayList"),t.exports=l},function(t,e,i){t.exports={CheckMatrix:i(209),MatrixToString:i(1014),ReverseColumns:i(1015),ReverseRows:i(1016),Rotate180:i(1017),RotateLeft:i(1018),RotateMatrix:i(147),RotateRight:i(1019),Translate:i(1020),TransposeMatrix:i(435)}},function(t,e,i){var n=i(186),s=i(209);t.exports=function(t){var e="";if(!s(t))return e;for(var i=0;i<t.length;i++){for(var r=0;r<t[i].length;r++){var a=t[i][r].toString();e+="undefined"!==a?n(a,2):"?",r<t[i].length-1&&(e+=" |")}if(i<t.length-1){e+="\n";for(var o=0;o<t[i].length;o++)e+="---",o<t[i].length-1&&(e+="+");e+="\n"}}return e}},function(t,e){t.exports=function(t){return t.reverse()}},function(t,e){t.exports=function(t){for(var e=0;e<t.length;e++)t[e].reverse();return t}},function(t,e,i){var n=i(147);t.exports=function(t){return n(t,180)}},function(t,e,i){var n=i(147);t.exports=function(t){return n(t,90)}},function(t,e,i){var n=i(147);t.exports=function(t){return n(t,-90)}},function(t,e,i){var n=i(178),s=i(179);t.exports=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),0!==i&&(i<0?n(t,Math.abs(i)):s(t,i)),0!==e)for(var r=0;r<t.length;r++){var a=t[r];e<0?n(a,Math.abs(e)):s(a,e)}return t}},function(t,e){t.exports=function(t,e,i,n,s){if(void 0===s&&(s=t),0<i){var r=i-t.length;if(r<=0)return null}if(!Array.isArray(e))return-1===t.indexOf(e)?(t.push(e),n&&n.call(s,e),e):null;for(var a=e.length-1;0<=a;)-1!==t.indexOf(e[a])&&e.splice(a,1),a--;if(0===(a=e.length))return null;0<i&&r<a&&(e.splice(r),a=r);for(var o=0;o<a;o++){var h=e[o];t.push(h),n&&n.call(s,h)}return e}},function(t,e){t.exports=function(t,e,i,n,s,r){if(void 0===i&&(i=0),void 0===r&&(r=t),0<n){var a=n-t.length;if(a<=0)return null}if(!Array.isArray(e))return-1===t.indexOf(e)?(t.splice(i,0,e),s&&s.call(r,e),e):null;for(var o=e.length-1;0<=o;)-1!==t.indexOf(e[o])&&e.pop(),o--;if(0===(o=e.length))return null;0<n&&a<o&&(e.splice(a),o=a);for(var h=o-1;0<=h;h--){var l=e[h];t.splice(i,0,l),s&&s.call(r,l)}return e}},function(t,e){t.exports=function(t,e){var i=t.indexOf(e);return-1!==i&&i<t.length&&(t.splice(i,1),t.push(e)),e}},function(t,e,i){var n=i(78);t.exports=function(t,e,i,s,r){void 0===s&&(s=0),void 0===r&&(r=t.length);var a=0;if(n(t,s,r))for(var o=s;o<r;o++)t[o][e]===i&&a++;return a}},function(t,e){t.exports=function(t,e,i){for(var n=[null],s=3;s<arguments.length;s++)n.push(arguments[s]);for(s=0;s<t.length;s++)n[0]=t[s],e.apply(i,n);return t}},function(t,e,i){var n=i(78);t.exports=function(t,e,i,s,r){if(void 0===s&&(s=0),void 0===r&&(r=t.length),n(t,s,r)){for(var a=[null],o=5;o<arguments.length;o++)a.push(arguments[o]);for(o=s;o<r;o++)a[0]=t[o],e.apply(i,a)}return t}},function(t,e){t.exports=function(t,e){var i,n,s=t.indexOf(e);return 0<s&&(i=t[s-1],n=t.indexOf(i),t[s]=i,t[n]=e),t}},function(t,e){t.exports=function(t,e,i){var n=t.indexOf(e);if(-1===n||i<0||i>=t.length)throw new Error("Supplied index out of bounds");return n!==i&&(t.splice(n,1),t.splice(i,0,e)),e}},function(t,e){t.exports=function(t,e){var i,n,s=t.indexOf(e);return-1!==s&&s<t.length-1&&(i=t[s+1],n=t.indexOf(i),t[s]=i,t[n]=e),t}},function(t,e){t.exports=function(t,e,i){if(e===i)return t;var n=t.indexOf(e),s=t.indexOf(i);if(n<0||s<0)throw new Error("Supplied items must be elements of the same array");return s<n||(t.splice(n,1),s===t.length-1?t.push(e):t.splice(s,0,e)),t}},function(t,e){t.exports=function(t,e,i){if(e===i)return t;var n=t.indexOf(e),s=t.indexOf(i);if(n<0||s<0)throw new Error("Supplied items must be elements of the same array");return n<s||(t.splice(n,1),0===s?t.unshift(e):t.splice(s,0,e)),t}},function(t,e,i){var n=i(363);t.exports=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=null),void 0===i&&(i=1),null===e&&(e=t,t=0);for(var s=[],r=Math.max(n((e-t)/(i||1)),0),a=0;a<r;a++)s.push(t),t+=i;return s}},function(t,e,i){var n=i(74);t.exports=function(t,e,i,s){if(void 0===s&&(s=t),e<0||e>t.length-1)throw new Error("Index out of bounds");var r=n(t,e);return i&&i.call(s,r),r}},function(t,e,i){var n=i(78);t.exports=function(t,e,i,s,r){if(void 0===e&&(e=0),void 0===i&&(i=t.length),void 0===r&&(r=t),n(t,e,i)){var a=i-e,o=t.splice(e,a);if(s)for(var h=0;h<o.length;h++){var l=o[h];s.call(r,l)}return o}return[]}},function(t,e,i){var n=i(74);t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=t.length);var s=e+Math.floor(Math.random()*i);return n(t,s)}},function(t,e){t.exports=function(t,e,i){var n=t.indexOf(e),s=t.indexOf(i);return-1!==n&&-1===s&&(t[n]=i,!0)}},function(t,e){t.exports=function(t,e){var i=t.indexOf(e);return-1!==i&&0<i&&(t.splice(i,1),t.unshift(e)),e}},function(t,e,i){var n=i(78);t.exports=function(t,e,i,s,r){if(void 0===s&&(s=0),void 0===r&&(r=t.length),n(t,s,r))for(var a=s;a<r;a++){var o=t[a];o.hasOwnProperty(e)&&(o[e]=i)}return t}},function(t,e){t.exports=function(t,e,i){if(e===i)return t;var n=t.indexOf(e),s=t.indexOf(i);if(n<0||s<0)throw new Error("Supplied items must be elements of the same array");return t[n]=i,t[s]=e,t}},function(t,e,i){var n=i(0),s=i(211),r=i(24),a=i(20),o=new n({Extends:s,initialize:function(t){s.call(this),this.checkQueue=!0,this.scene=t,this.systems=t.sys,t.sys.events.once(a.BOOT,this.boot,this),t.sys.events.on(a.START,this.start,this)},boot:function(){this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(a.PRE_UPDATE,this.update,this),t.on(a.UPDATE,this.sceneUpdate,this),t.once(a.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(t,e){for(var i=this._active,n=i.length,s=0;s<n;s++){var r=i[s];r.active&&r.preUpdate.call(r,t,e)}},shutdown:function(){for(var t=this._active.length;t--;)this._active[t].destroy(!0);for(t=this._pending.length;t--;)this._pending[t].destroy(!0);for(t=this._destroy.length;t--;)this._destroy[t].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var e=this.systems.events;e.off(a.PRE_UPDATE,this.update,this),e.off(a.UPDATE,this.sceneUpdate,this),e.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});r.register("UpdateList",o,"updateList"),t.exports=o},function(t,e){t.exports="add"},function(t,e){t.exports="remove"},function(t,e){t.exports=function(t,e,i,n){if(void 0===i&&(i=!1),void 0===n)return{local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0};var s,r,a,o=t.text,h=o.length,l=t.maxWidth,c=t.wordWrapCharCode,u=Number.MAX_VALUE,d=Number.MAX_VALUE,f=0,p=0,g=t.fontData.chars,m=t.fontData.lineHeight,v=t.letterSpacing,y=0,_=0,x=0,w=null,b=t._align,E=0,T=t.fontSize/t.fontData.size,S=T*t.scaleX,A=T*t.scaleY,O=null,C=0,P=[],L=Number.MAX_VALUE,R=0,I=0,M=0,D=[],k=[],N=null;if(0<l){for(B=0;B<h;B++)10!==(x=o.charCodeAt(B))?(w=g[x])&&(null!==O&&(s=w.kerning[C]),x===c?null!==N&&(D.push({word:N.word,i:N.i,x:N.x*S,y:N.y*A,w:N.w*S,h:N.h*A,cr:!1}),N=null):(null===N&&(N={word:"",i:B,x:y,y:_,w:0,h:m,cr:!1}),N.word=N.word.concat(o[B]),N.w+=w.xOffset+w.xAdvance+(void 0!==s?s:0)),y+=w.xAdvance+v,O=w,C=x):(null!==N&&(D.push({word:N.word,i:N.i,x:N.x*S,y:N.y*A,w:N.w*S,h:N.h*A,cr:!0}),N=null),y=0,_+=m,O=null);null!==N&&D.push({word:N.word,i:N.i,x:N.x*S,y:N.y*A,w:N.w*S,h:N.h*A,cr:!1}),O=null;for(var F=C=_=y=0,G=[],B=0;B<D.length;B++){var z,U=D[B],Y=U.x,X=U.x+U.w;z&&(F=Y-(Y-(z.x+z.w)+z.w),z=null),l<Y-F||l<X-F?(G.push(U.i-1),z=U.cr?(G.push(U.i+U.word.length),F=0,null):U):U.cr&&(G.push(U.i+U.word.length),F=0,z=null)}for(B=G.length-1;0<=B;B--)r=o,a=G[B],o=r.substr(0,a)+"\n"+r.substr(a+1);h=(n.wrappedText=o).length,D=[],N=null}var H,j,W,V,K=0;for(B=0;B<h;B++)10!==(x=o.charCodeAt(B))?(w=g[x])&&(E=y,null!==O&&(E+=void 0!==(H=w.kerning[C])?H:0),E<u&&(u=E),_<d&&(d=_),f<(j=E+w.xAdvance)&&(f=j),p<(W=_+m)&&(p=W),V=w.xOffset+w.xAdvance+(void 0!==H?H:0),x===c?null!==N&&(D.push({word:N.word,i:N.i,x:N.x*S,y:N.y*A,w:N.w*S,h:N.h*A}),N=null):(null===N&&(N={word:"",i:K,x:y,y:_,w:0,h:m}),N.word=N.word.concat(o[B]),N.w+=V),k.push({i:K,char:o[B],code:x,x:(w.xOffset+y)*T,y:(w.yOffset+_)*T,w:w.width*T,h:w.height*T,t:_*T,r:j*T,b:m*T,line:I,glyph:w}),y+=w.xAdvance+v,O=w,C=x,M=j*T,K++):(null!==N&&(D.push({word:N.word,i:N.i,x:N.x*S,y:N.y*A,w:N.w*S,h:N.h*A}),N=null),y=0,_+=m,O=null,R<(P[I]=M)&&(R=M),M<L&&(L=M),I++,M=0);if(null!==N&&D.push({word:N.word,i:N.i,x:N.x*S,y:N.y*A,w:N.w*S,h:N.h*A}),R<(P[I]=M)&&(R=M),M<L&&(L=M),0<b)for(var q=0;q<k.length;q++){var Z,J,$=k[q];1===b?(Z=(R-P[$.line])/2,$.x+=Z,$.r+=Z):2===b&&(J=R-P[$.line],$.x+=J,$.r+=J)}var Q=n.local,tt=n.global,et=n.lines;return Q.x=u*T,Q.y=d*T,Q.width=f*T,Q.height=p*T,tt.x=t.x-t._displayOriginX+u*S,tt.y=t.y-t._displayOriginY+d*A,tt.width=f*S,tt.height=p*A,et.shortest=L,et.longest=R,et.lengths=P,e&&(Q.x=Math.ceil(Q.x),Q.y=Math.ceil(Q.y),Q.width=Math.ceil(Q.width),Q.height=Math.ceil(Q.height),tt.x=Math.ceil(tt.x),tt.y=Math.ceil(tt.y),tt.width=Math.ceil(tt.width),tt.height=Math.ceil(tt.height),et.shortest=Math.ceil(L),et.longest=Math.ceil(R)),i&&(t._displayOriginX=t.originX*Q.width,t._displayOriginY=t.originY*Q.height,tt.x=t.x-t._displayOriginX*t.scaleX,tt.y=t.y-t._displayOriginY*t.scaleY,e&&(tt.x=Math.ceil(tt.x),tt.y=Math.ceil(tt.y))),n.words=D,n.characters=k,n.lines.height=m,n.scale=T,n.scaleX=t.scaleX,n.scaleY=t.scaleY,n}},function(t,e,i){var n=i(212);t.exports=function(t,e,i,s,r,a,o){var h=t.sys.textures.get(i),l=h.get(s),c=t.sys.cache.xml.get(r);if(l&&c){var u=n(c,l,a,o,h);return t.sys.cache.bitmapFont.add(e,{data:u,texture:i,frame:s,fromAtlas:!0}),!0}return!1}},function(t,e,i){var n=i(1),s=i(1);n=i(1046),s=i(1048),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e,i){var n=i(1047),s=i(19),r=i(12);t.exports=function(t,e,i,a){if(0!==e._text.length){i.addToRenderList(e);var o,h=t.pipelines.set(e.pipeline,e),l=s(e,i,a).calc,c=i.roundPixels,u=i.alpha,d=e.charColors,f=e.tintFill,p=r.getTintAppendFloatAlpha,g=p(e.tintTopLeft,u*e._alphaTL),m=p(e.tintTopRight,u*e._alphaTR),v=p(e.tintBottomLeft,u*e._alphaBL),y=p(e.tintBottomRight,u*e._alphaBR),_=e.frame.glTexture,x=h.setGameObject(e),w=e.getTextBounds(!1).characters,b=e.dropShadowX,E=e.dropShadowY,T=0!==b||0!==E;if(t.pipelines.preBatch(e),T)for(var S=e.dropShadowColor,A=e.dropShadowAlpha,O=p(S,u*A*e._alphaTL),C=p(S,u*A*e._alphaTR),P=p(S,u*A*e._alphaBL),L=p(S,u*A*e._alphaBR),R=0;R<w.length;R++)G=(o=w[R]).glyph,32!==o.code&&0!==G.width&&0!==G.height&&n(h,e,o,G,b,E,l,c,O,C,P,L,1,_,x);for(R=0;R<w.length;R++){var I,M,D,k,N,F,G=(o=w[R]).glyph;32!==o.code&&0!==G.width&&0!==G.height&&(d[o.i]?(M=(I=d[o.i]).tintEffect,D=p(I.tintTL,u*e._alphaTL),k=p(I.tintTR,u*e._alphaTR),N=p(I.tintBL,u*e._alphaBL),F=p(I.tintBR,u*e._alphaBR),n(h,e,o,G,0,0,l,c,D,k,N,F,M,_,x)):n(h,e,o,G,0,0,l,c,g,m,v,y,f,_,x))}t.pipelines.postBatch(e)}}},function(t,e){t.exports=function(t,e,i,n,s,r,a,o,h,l,c,u,d,f,p){var g=i.x-e.displayOriginX+s,m=i.y-e.displayOriginY+r,v=g+i.w,y=m+i.h,_=a.getXRound(g,m,o),x=a.getYRound(g,m,o),w=a.getXRound(g,y,o),b=a.getYRound(g,y,o),E=a.getXRound(v,y,o),T=a.getYRound(v,y,o),S=a.getXRound(v,m,o),A=a.getYRound(v,m,o);t.batchQuad(e,_,x,w,b,E,T,S,A,n.u0,n.v0,n.u1,n.v1,h,l,c,u,d,f,p)}},function(t,e,i){var n=i(30);t.exports=function(t,e,i,s){var r=e._text,a=r.length,o=t.currentContext;if(0!==a&&n(t,o,e,i,s)){i.addToRenderList(e);var h,l=e.fromAtlas?e.frame:e.texture.frames.__BASE,c=e.fontData.chars,u=e.fontData.lineHeight,d=e._letterSpacing,f=0,p=0,g=null,m=0,v=0,y=0,_=0,x=0,w=0,b=null,E=0,T=l.source.image,S=l.cutX,A=l.cutY,O=e._fontSize/e.fontData.size,C=e._align,P=0,L=0,R=e.getTextBounds(!1);0<e.maxWidth&&(a=(r=R.wrappedText).length);var I=e._bounds.lines;1===C?L=(I.longest-I.lengths[0])/2:2===C&&(L=I.longest-I.lengths[0]),o.translate(-e.displayOriginX,-e.displayOriginY);for(var M,D=i.roundPixels,k=0;k<a;k++)10!==(h=r.charCodeAt(k))?(g=c[h])&&(m=S+g.x,v=A+g.y,y=g.width,_=g.height,x=g.xOffset+f,w=g.yOffset+p,null!==b&&(x+=void 0!==(M=g.kerning[E])?M:0),x*=O,w*=O,x+=L,f+=g.xAdvance+d,b=g,E=h,0!==y&&0!==_&&32!==h&&(D&&(x=Math.round(x),w=Math.round(w)),o.save(),o.translate(x,w),o.scale(O,O),o.drawImage(T,m,v,y,_,0,0,y,_),o.restore())):(P++,1===C?L=(I.longest-I.lengths[P])/2:2===C&&(L=I.longest-I.lengths[P]),f=0,p+=u,b=null);o.restore()}}},function(t,e,i){var n=i(1),s=i(1);n=i(1050),s=i(1051),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e,i){var n=i(25),s=i(12),r=new n;t.exports=function(t,e,i,n){var a=e.getRenderList();if(0!==a.length){var o=i.alpha*e.alpha;if(0!=o){i.addToRenderList(e);var h=t.pipelines.set(this.pipeline,e),l=i.scrollX*e.scrollFactorX,c=i.scrollY*e.scrollFactorY,u=r.copyFrom(i.matrix);n&&(u.multiplyWithOffset(n,-l,-c),c=l=0);var d=e.x-l,f=e.y-c,p=-1,g=i.roundPixels;t.pipelines.preBatch(e);for(var m=0;m<a.length;m++){var v,y,_,x,w,b,E,T,S,A,O,C,P=a[m],L=P.frame,R=P.alpha*o;0!=R&&(v=L.width,y=L.height,_=d+P.x+L.x,x=f+P.y+L.y,P.flipX&&(v*=-1,_+=L.width),P.flipY&&(y*=-1,x+=L.height),w=_+v,b=x+y,E=u.getX(_,x),T=u.getY(_,x),S=u.getX(w,b),A=u.getY(w,b),O=s.getTintAppendFloatAlpha(P.tint,R),L.sourceIndex!==p&&(C=h.setGameObject(e,L),p=L.sourceIndex),g&&(E=Math.round(E),T=Math.round(T),S=Math.round(S),A=Math.round(A)),h.batchQuad(e,E,T,E,A,S,A,S,T,L.u0,L.v0,L.u1,L.v1,O,O,O,O,!1,L.glTexture,C)&&(p=-1))}t.pipelines.postBatch(e)}}}},function(t,e){t.exports=function(t,e,i,n){var s=e.getRenderList();if(0!==s.length){var r=t.currentContext,a=i.alpha*e.alpha;if(0!=a){i.addToRenderList(e),r.globalCompositeOperation=t.blendModes[e.blendMode],r.imageSmoothingEnabled=!(!t.antialias||e.frame.source.scaleMode);var o=e.x-i.scrollX*e.scrollFactorX,h=e.y-i.scrollY*e.scrollFactorY;r.save(),n&&n.copyToContext(r);for(var l=i.roundPixels,c=0;c<s.length;c++){var u=s[c],d=u.flipX||u.flipY,f=u.frame,p=f.canvasData,g=f.x,m=f.y,v=1,y=1,_=u.alpha*a;0!=_&&(r.globalAlpha=_,d?(u.flipX&&(v=-1,g-=p.width),u.flipY&&(y=-1,m-=p.height),r.save(),r.translate(u.x+o,u.y+h),r.scale(v,y),r.drawImage(f.source.image,p.x,p.y,p.width,p.height,g,m,p.width,p.height),r.restore()):(l&&(g=Math.round(g),m=Math.round(m)),r.drawImage(f.source.image,p.x,p.y,p.width,p.height,g+u.x+o,m+u.y+h,p.width,p.height)))}r.restore()}}}},function(t,e,i){var n=i(1),s=i(1);n=i(1053),s=i(1054),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e){t.exports=function(t,e,i,n){i.addToRenderList(e);var s=e.list,r=s.length;if(0!==r){var a=e.localTransform;n?(a.loadIdentity(),a.multiply(n),a.translate(e.x,e.y),a.rotate(e.rotation),a.scale(e.scaleX,e.scaleY)):a.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),t.pipelines.preBatch(e);var o=-1!==e.blendMode;o||t.setBlendMode(0);for(var h=e.alpha,l=e.scrollFactorX,c=e.scrollFactorY,u=0;u<r;u++){var d,f,p,g,m,v,y,_,x=s[u];x.willRender(i)&&(g=void 0!==x.alphaTopLeft?(d=x.alphaTopLeft,f=x.alphaTopRight,p=x.alphaBottomLeft,x.alphaBottomRight):p=f=d=x.alpha,m=x.scrollFactorX,v=x.scrollFactorY,o||x.blendMode===t.currentBlendMode||t.setBlendMode(x.blendMode),(y=x.mask)&&y.preRenderWebGL(t,x,i),(_=x.type)!==t.currentType&&(t.newType=!0,t.currentType=_),t.nextTypeMatch=u<r-1&&s[u+1].type===t.currentType,x.setScrollFactor(m*l,v*c),x.setAlpha(d*h,f*h,p*h,g*h),x.renderWebGL(t,x,i,a),x.setAlpha(d,f,p,g),x.setScrollFactor(m,v),y&&y.postRenderWebGL(t,i),t.newType=!1)}t.pipelines.postBatch(e)}}},function(t,e){t.exports=function(t,e,i,n){i.addToRenderList(e);var s=e.list;if(0!==s.length){var r=e.localTransform;n?(r.loadIdentity(),r.multiply(n),r.translate(e.x,e.y),r.rotate(e.rotation),r.scale(e.scaleX,e.scaleY)):r.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);var a=-1!==e.blendMode;a||t.setBlendMode(0);var o=e._alpha,h=e.scrollFactorX,l=e.scrollFactorY;e.mask&&e.mask.preRenderCanvas(t,null,i);for(var c=0;c<s.length;c++){var u,d,f,p=s[c];p.willRender(i)&&(u=p.alpha,d=p.scrollFactorX,f=p.scrollFactorY,a||p.blendMode===t.currentBlendMode||t.setBlendMode(p.blendMode),p.setScrollFactor(d*h,f*l),p.setAlpha(u*o),p.renderCanvas(t,p,i,r),p.setAlpha(u),p.setScrollFactor(d,f))}e.mask&&e.mask.postRenderCanvas(t)}}},function(t,e,i){var n=i(1),s=i(1);n=i(443),s=i(443),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e){t.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(t,e,i){var n=i(1),s=i(1);n=i(1058),s=i(1059),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e,i){var n=i(19),s=i(25),r=i(12),a=new s;t.exports=function(t,e,i,s){var o=e.text,h=o.length;if(0!==h){i.addToRenderList(e);var l=t.pipelines.set(e.pipeline,e),c=n(e,i,s),u=c.sprite,d=c.calc,f=a,p=0<e.cropWidth||0<e.cropHeight;p&&(l.flush(),t.pushScissor(d.tx,d.ty,e.cropWidth*d.scaleX,e.cropHeight*d.scaleY));var g,m,v,y,_=e.frame.glTexture,x=e.tintFill,w=r.getTintAppendFloatAlpha(e.tintTopLeft,i.alpha*e._alphaTL),b=r.getTintAppendFloatAlpha(e.tintTopRight,i.alpha*e._alphaTR),E=r.getTintAppendFloatAlpha(e.tintBottomLeft,i.alpha*e._alphaBL),T=r.getTintAppendFloatAlpha(e.tintBottomRight,i.alpha*e._alphaBR),S=l.setGameObject(e),A=0,O=0,C=0,P=e.letterSpacing,L=e.scrollX,R=e.scrollY,I=e.fontData,M=I.chars,D=I.lineHeight,k=e.fontSize/I.size,N=0,F=e._align,G=0,B=0,z=e.getTextBounds(!1);0<e.maxWidth&&(h=(o=z.wrappedText).length);var U=e._bounds.lines;1===F?B=(U.longest-U.lengths[0])/2:2===F&&(B=U.longest-U.lengths[0]);var Y=i.roundPixels,X=e.displayCallback,H=e.callbackData;t.pipelines.preBatch(e);for(var j,W,V,K,q,Z,J,$,Q,tt,et,it,nt,st,rt,at,ot,ht=0;ht<h;ht++)10!==(g=o.charCodeAt(ht))?(ot=M[g])&&(m=ot.width,v=ot.height,V=ot.xOffset+A-L,K=ot.yOffset+O-R,null!==y&&(V+=void 0!==(j=ot.kerning[C])?j:0),A+=ot.xAdvance+P,y=ot,C=g,0!==m&&0!==v&&32!==g&&(k=e.fontSize/e.fontData.size,N=0,X&&(H.color=0,H.tint.topLeft=w,H.tint.topRight=b,H.tint.bottomLeft=E,H.tint.bottomRight=T,H.index=ht,H.charCode=g,H.x=V,H.y=K,H.scale=k,H.rotation=N,H.data=ot.data,V=(W=X(H)).x,K=W.y,k=W.scale,N=W.rotation,T=W.color?(w=W.color,b=W.color,E=W.color,W.color):(w=W.tint.topLeft,b=W.tint.topRight,E=W.tint.bottomLeft,W.tint.bottomRight),w=r.getTintAppendFloatAlpha(w,i.alpha*e._alphaTL),b=r.getTintAppendFloatAlpha(b,i.alpha*e._alphaTR),E=r.getTintAppendFloatAlpha(E,i.alpha*e._alphaBL),T=r.getTintAppendFloatAlpha(T,i.alpha*e._alphaBR)),V*=k,K*=k,V-=e.displayOriginX,K-=e.displayOriginY,V+=B,f.applyITRS(V,K,N,k,k),d.multiply(f,u),q=ot.u0,Z=ot.v0,J=ot.u1,$=ot.v1,Q=u.e,tt=u.f,et=v*u.c+u.e,it=v*u.d+u.f,nt=m*u.a+v*u.c+u.e,st=m*u.b+v*u.d+u.f,rt=m*u.a+u.e,at=m*u.b+u.f,Y&&(Q=Math.round(Q),tt=Math.round(tt),et=Math.round(et),it=Math.round(it),nt=Math.round(nt),st=Math.round(st),rt=Math.round(rt),at=Math.round(at)),l.batchQuad(e,Q,tt,et,it,nt,st,rt,at,q,Z,J,$,w,b,E,T,x,_,S))):(G++,1===F?B=(U.longest-U.lengths[G])/2:2===F&&(B=U.longest-U.lengths[G]),A=0,O+=D,y=null);p&&(l.flush(),t.popScissor()),t.pipelines.postBatch(e)}}},function(t,e,i){var n=i(30);t.exports=function(t,e,i,s){var r=e._text,a=r.length,o=t.currentContext;if(0!==a&&n(t,o,e,i,s)){i.addToRenderList(e);var h,l=e.fromAtlas?e.frame:e.texture.frames.__BASE,c=e.displayCallback,u=e.callbackData,d=e.fontData.chars,f=e.fontData.lineHeight,p=e._letterSpacing,g=0,m=0,v=null,y=0,_=0,x=0,w=0,b=0,E=0,T=null,S=0,A=e.frame.source.image,O=l.cutX,C=l.cutY,P=0,L=0,R=e._fontSize/e.fontData.size,I=e._align,M=0,D=0;e.getTextBounds(!1);var k=e._bounds.lines;1===I?D=(k.longest-k.lengths[0])/2:2===I&&(D=k.longest-k.lengths[0]),o.translate(-e.displayOriginX,-e.displayOriginY);var N=i.roundPixels;0<e.cropWidth&&0<e.cropHeight&&(o.beginPath(),o.rect(0,0,e.cropWidth,e.cropHeight),o.clip());for(var F,G,B=0;B<a;B++)L=R,P=0,10!==(h=r.charCodeAt(B))?(v=d[h])&&(y=O+v.x,_=C+v.y,x=v.width,w=v.height,b=v.xOffset+g-e.scrollX,E=v.yOffset+m-e.scrollY,null!==T&&(b+=void 0!==(F=v.kerning[S])?F:0),c&&(u.index=B,u.charCode=h,u.x=b,u.y=E,u.scale=L,u.rotation=P,u.data=v.data,b=(G=c(u)).x,E=G.y,L=G.scale,P=G.rotation),b*=L,E*=L,b+=D,g+=v.xAdvance+p,T=v,S=h,0!==x&&0!==w&&32!==h&&(N&&(b=Math.round(b),E=Math.round(E)),o.save(),o.translate(b,E),o.rotate(P),o.scale(L,L),o.drawImage(A,y,_,x,w,0,0,x,w),o.restore())):(M++,1===I?D=(k.longest-k.lengths[M])/2:2===I&&(D=k.longest-k.lengths[M]),g=0,m+=f,T=null);o.restore()}}},function(t,e,i){var n=i(1),s=i(1);n=i(1061),s=i(1062),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e,i){var n=i(19);t.exports=function(t,e,i,s){t.pipelines.clear();var r=n(e,i,s).calc;e.render.call(e,t,i,r),t.pipelines.rebind()}},function(t,e){},function(t,e,i){var n=i(1),s=i(1);n=i(1064),i(448),s=i(448),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e,i){function n(t,e,i){this.x=t,this.y=e,this.width=i}function s(t,e,i){this.points=[],this.pointsLength=1,this.points[0]=new n(t,e,i)}var r=i(217),a=i(19),o=i(25),h=i(12),l=[],c=new o;t.exports=function(t,e,i,o){if(0!==e.commandBuffer.length){i.addToRenderList(e);var u=t.pipelines.set(e.pipeline,e);t.pipelines.preBatch(e);for(var d=a(e,i,o).calc,f=c.loadIdentity(),p=e.commandBuffer,g=i.alpha*e.alpha,m=1,v=u.fillTint,y=u.strokeTint,_=0,x=0,w=0,b=2*Math.PI,E=[],T=0,S=!0,A=null,O=h.getTintAppendFloatAlpha,C=0;C<p.length;C++)switch(p[C]){case r.BEGIN_PATH:E.length=0,S=!(A=null);break;case r.CLOSE_PATH:S=!1,A&&A.points.length&&A.points.push(A.points[0]);break;case r.FILL_PATH:for(T=0;T<E.length;T++)u.batchFillPath(E[T].points,f,d);break;case r.STROKE_PATH:for(T=0;T<E.length;T++)u.batchStrokePath(E[T].points,m,S,f,d);break;case r.LINE_STYLE:m=p[++C];var P=O(p[++C],p[++C]*g);y.TL=P,y.TR=P,y.BL=P,y.BR=P;break;case r.FILL_STYLE:var L=O(p[++C],p[++C]*g);v.TL=L,v.TR=L,v.BL=L,v.BR=L;break;case r.GRADIENT_FILL_STYLE:var R=p[++C]*g,I=p[++C]*g,M=p[++C]*g,D=p[++C]*g;v.TL=O(p[++C],R),v.TR=O(p[++C],I),v.BL=O(p[++C],M),v.BR=O(p[++C],D);break;case r.GRADIENT_LINE_STYLE:m=p[++C];var k=p[++C]*g;y.TL=O(p[++C],k),y.TR=O(p[++C],k),y.BL=O(p[++C],k),y.BR=O(p[++C],k);break;case r.ARC:var N=0,F=p[++C],G=p[++C],B=p[++C],z=p[++C],U=p[++C],Y=p[++C],X=p[++C];for(U-=z,Y?U<-b?U=-b:0<U&&(U=U%b-b):b<U?U=b:U<0&&(U=b+U%b),null===A&&(A=new s(F+Math.cos(z)*B,G+Math.sin(z)*B,m),E.push(A),N+=.01);N<1+X;)w=U*N+z,_=F+Math.cos(w)*B,x=G+Math.sin(w)*B,A.points.push(new n(_,x,m)),N+=.01;w=U+z,_=F+Math.cos(w)*B,x=G+Math.sin(w)*B,A.points.push(new n(_,x,m));break;case r.FILL_RECT:u.batchFillRect(p[++C],p[++C],p[++C],p[++C],f,d);break;case r.FILL_TRIANGLE:u.batchFillTriangle(p[++C],p[++C],p[++C],p[++C],p[++C],p[++C],f,d);break;case r.STROKE_TRIANGLE:u.batchStrokeTriangle(p[++C],p[++C],p[++C],p[++C],p[++C],p[++C],m,f,d);break;case r.LINE_TO:null!==A?A.points.push(new n(p[++C],p[++C],m)):(A=new s(p[++C],p[++C],m),E.push(A));break;case r.MOVE_TO:A=new s(p[++C],p[++C],m),E.push(A);break;case r.SAVE:l.push(f.copyToArray());break;case r.RESTORE:f.copyFromArray(l.pop());break;case r.TRANSLATE:F=p[++C],G=p[++C],f.translate(F,G);break;case r.SCALE:F=p[++C],G=p[++C],f.scale(F,G);break;case r.ROTATE:f.rotate(p[++C])}t.pipelines.postBatch(e)}}},function(t,e,i){var n=i(1),s=i(1);n=i(1066),s=i(1067),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e){t.exports=function(t,e,i,n){i.addToRenderList(e),e.pipeline.batchSprite(e,i,n)}},function(t,e){t.exports=function(t,e,i,n){i.addToRenderList(e),t.batchSprite(e,e.frame,i,n)}},function(t,e,i){var n=i(1),s=i(1);n=i(1069),s=i(1070),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e){t.exports=function(t,e,i,n){i.addToRenderList(e),this.pipeline.batchSprite(e,i,n)}},function(t,e){t.exports=function(t,e,i,n){i.addToRenderList(e),t.batchSprite(e,e.frame,i,n)}},function(t,e,i){var n=i(1),s=i(1);n=i(1072),s=i(1073),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e){t.exports=function(t,e,i){var n=e.list,s=n.length;if(0!==s){e.depthSort(),t.pipelines.preBatch(e);var r=-1!==e.blendMode;r||t.setBlendMode(0);for(var a=e.alpha,o=0;o<s;o++){var h,l,c,u,d,f,p=n[o];p.willRender(i)&&(u=void 0!==p.alphaTopLeft?(h=p.alphaTopLeft,l=p.alphaTopRight,c=p.alphaBottomLeft,p.alphaBottomRight):c=l=h=p.alpha,r||p.blendMode===t.currentBlendMode||t.setBlendMode(p.blendMode),(d=p.mask)&&d.preRenderWebGL(t,p,i),(f=p.type)!==t.currentType&&(t.newType=!0,t.currentType=f),t.nextTypeMatch=o<s-1&&n[o+1].type===t.currentType,p.setAlpha(h*a,l*a,c*a,u*a),p.renderWebGL(t,p,i),p.setAlpha(h,l,c,u),d&&d.postRenderWebGL(t,i),t.newType=!1)}t.pipelines.postBatch(e)}}},function(t,e){t.exports=function(t,e,i){var n=e.list;if(0!==n.length){e.depthSort();var s=-1!==e.blendMode;s||t.setBlendMode(0);var r=e._alpha;e.mask&&e.mask.preRenderCanvas(t,null,i);for(var a=0;a<n.length;a++){var o,h=n[a];h.willRender(i)&&(o=h.alpha,s||h.blendMode===t.currentBlendMode||t.setBlendMode(h.blendMode),h.setAlpha(o*r),h.renderCanvas(t,h,i),h.setAlpha(o))}e.mask&&e.mask.postRenderCanvas(t)}}},function(t,e,i){t.exports={EmitterOp:i(449),GravityWell:i(450),Particle:i(451),ParticleEmitter:i(452),ParticleEmitterManager:i(220),Zones:i(1078)}},function(t,e,i){var n=i(1),s=i(1);n=i(1076),s=i(1077),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e,i){var n=i(25),s=i(12),r=new n,a=new n,o=new n,h=new n;t.exports=function(t,e,i,n){var l=e.emitters.list,c=l.length;if(0!==c){var u=t.pipelines.set(e.pipeline),d=r,f=a,p=o,g=h;n?(g.loadIdentity(),g.multiply(n),g.translate(e.x,e.y),g.rotate(e.rotation),g.scale(e.scaleX,e.scaleY)):g.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);var m=i.roundPixels,v=e.defaultFrame.glTexture,y=s.getTintAppendFloatAlpha,_=u.setGameObject(e,e.defaultFrame);t.pipelines.preBatch(e);for(var x=0;x<c;x++){var w=l[x],b=w.alive,E=b.length;if(w.visible&&0!==E){i.addToRenderList(w);var T=w.scrollFactorX,S=w.scrollFactorY;t.setBlendMode(w.blendMode),w.mask&&(w.mask.preRenderWebGL(t,w,i),t.pipelines.set(e.pipeline));for(var A=0;A<E;A++){var O,C,P,L,R,I,M,D,k,N,F,G,B,z,U=b[A],Y=U.alpha*i.alpha;Y<=0||(p.applyITRS(U.x,U.y,U.rotation,U.scaleX,U.scaleY),d.copyFrom(i.matrix),d.multiplyWithOffset(g,-i.scrollX*T,-i.scrollY*S),p.e=U.x,p.f=U.y,d.multiply(p,f),C=-(O=U.frame).halfWidth,P=-O.halfHeight,L=C+O.width,R=P+O.height,I=f.getXRound(C,P,m),M=f.getYRound(C,P,m),D=f.getXRound(C,R,m),k=f.getYRound(C,R,m),N=f.getXRound(L,R,m),F=f.getYRound(L,R,m),G=f.getXRound(L,P,m),B=f.getYRound(L,P,m),z=y(U.tint,Y),u.batchQuad(w,I,M,D,k,N,F,G,B,O.u0,O.v0,O.u1,O.v1,z,z,z,z,0,v,_))}w.mask&&w.mask.postRenderWebGL(t,i)}}t.pipelines.postBatch(e)}}},function(t,e,i){var n=i(25),s=new n,r=new n,a=new n,o=new n;t.exports=function(t,e,i,n){var h=e.emitters.list,l=h.length;if(0!==l){var c=s.copyFrom(i.matrix),u=r,d=a,f=o;n?(f.loadIdentity(),f.multiply(n),f.translate(e.x,e.y),f.rotate(e.rotation),f.scale(e.scaleX,e.scaleY)):f.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);for(var p=t.currentContext,g=i.roundPixels,m=0;m<l;m++){var v=h[m],y=v.alive,_=y.length;if(v.visible&&0!==_){i.addToRenderList(v);var x=v.scrollFactorX,w=v.scrollFactorY;p.save(),p.globalCompositeOperation=t.blendModes[v.blendMode];for(var b=0;b<_;b++){var E,T,S,A,O=y[b],C=O.alpha*i.alpha;C<=0||(d.applyITRS(O.x,O.y,O.rotation,O.scaleX,O.scaleY),c.copyFrom(i.matrix),c.multiplyWithOffset(f,-i.scrollX*x,-i.scrollY*w),d.e=O.x,d.f=O.y,c.multiply(d,u),T=(E=O.frame).canvasData,S=-E.halfWidth,A=-E.halfHeight,p.globalAlpha=C,p.save(),u.setToContext(p),g&&(S=Math.round(S),A=Math.round(A)),p.imageSmoothingEnabled=!(!t.antialias||E.source.scaleMode),p.drawImage(E.source.image,T.x,T.y,T.width,T.height,S,A,T.width,T.height),p.restore())}p.restore()}}}}},function(t,e,i){t.exports={DeathZone:i(453),EdgeZone:i(454),RandomZone:i(456)}},function(t,e,i){var n=i(1),s=i(1);n=i(1080),s=i(1081),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e,i){var n=i(12);t.exports=function(t,e,i,s){i.addToRenderList(e);var r=i.alpha,a=e.renderTarget,o=a.width,h=a.height,l=n.getTintAppendFloatAlpha,c=t.pipelines.set(e.pipeline),u=c.setTexture2D(a.texture);t.pipelines.preBatch(e),c.batchTexture(e,a.texture,o,h,e.x,e.y,o,h,e.scaleX,e.scaleY,e.rotation,e.flipX,!e.flipY,e.scrollFactorX,e.scrollFactorY,e.displayOriginX,e.displayOriginY,0,0,o,h,l(e.tintTopLeft,r*e._alphaTL),l(e.tintTopRight,r*e._alphaTR),l(e.tintBottomLeft,r*e._alphaBL),l(e.tintBottomRight,r*e._alphaBR),e.tintFill,0,0,i,s,!0,u),t.resetTextures(),t.pipelines.postBatch(e)}},function(t,e){t.exports=function(t,e,i,n){i.addToRenderList(e),t.batchSprite(e,e.frame,i,n)}},function(t,e,i){var n=i(1083),s=i(17)(!1,s={Parse:i(1084)},n);t.exports=s},function(t,e){t.exports={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:"ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",TEXT_SET7:"AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:"ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789"}},function(t,e,i){var n=i(6);t.exports=function(t,e){var i=e.width,s=e.height,r=Math.floor(i/2),a=Math.floor(s/2),o=n(e,"chars","");if(""!==o){var h=n(e,"image",""),l=t.sys.textures.getFrame(h),c=l.cutX,u=l.cutY,d=l.source.width,f=l.source.height,p=n(e,"offset.x",0),g=n(e,"offset.y",0),m=n(e,"spacing.x",0),v=n(e,"spacing.y",0),y=n(e,"lineSpacing",0),_=n(e,"charsPerRow",null);null===_&&(_=d/i)>o.length&&(_=o.length);for(var x=p,w=g,b={retroFont:!0,font:h,size:i,lineHeight:s+y,chars:{}},E=0,T=0;T<o.length;T++){var S=o.charCodeAt(T),A=(c+x)/d,O=(u+w)/f,C=(c+x+i)/d,P=(u+w+s)/f;b.chars[S]={x:x,y:w,width:i,height:s,centerX:r,centerY:a,xOffset:0,yOffset:0,xAdvance:i,data:{},kerning:{},u0:A,v0:O,u1:C,v1:P},++E===_?(E=0,x=p,w+=s+v):x+=i+m}return{data:b,frame:null,texture:h}}}},function(t,e,i){var n=i(1),s=i(1);n=i(1086),s=i(1087),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e,i){var n=i(19),s=i(12);t.exports=function(t,e,i,r){i.addToRenderList(e);var a=t.pipelines.set(e.pipeline,e),o=n(e,i,r).calc,h=e.vertices,l=e.uv,c=e.colors,u=e.alphas,d=e.alpha,f=s.getTintAppendFloatAlpha,p=i.roundPixels,g=h.length,m=Math.floor(.5*g);a.flush(),t.pipelines.preBatch(e);var v=a.setGameObject(e),y=a.vertexViewF32,_=a.vertexViewU32,x=a.vertexCount*a.currentShader.vertexComponentCount-1,w=0,b=e.tintFill;e.dirty&&e.updateVertices();for(var E=e.debugCallback,T=[],S=0;S<g;S+=2){var A=h[S+0],O=h[S+1],C=A*o.a+O*o.c+o.e,P=A*o.b+O*o.d+o.f;p&&(C=Math.round(C),P=Math.round(P)),y[++x]=C,y[++x]=P,y[++x]=l[S+0],y[++x]=l[S+1],y[++x]=v,y[++x]=b,_[++x]=f(c[w],i.alpha*(u[w]*d)),w++,E&&(T[S+0]=C,T[S+1]=P)}E&&E.call(e,e,g,T),a.vertexCount+=m,t.pipelines.postBatch(e)}},function(t,e){t.exports=function(){}},function(t,e,i){var n=i(1),s=i(1);n=i(1089),s=i(1090),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e,i){var n=i(12);t.exports=function(t,e,i,s){var r,a,o,h,l,c;0!==e.width&&0!==e.height&&(i.addToRenderList(e),a=(r=e.frame).width,o=r.height,h=n.getTintAppendFloatAlpha,c=(l=t.pipelines.set(e.pipeline,e)).setTexture2D(r.glTexture,e),t.pipelines.preBatch(e),l.batchTexture(e,r.glTexture,a,o,e.x,e.y,a/e.style.resolution,o/e.style.resolution,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.displayOriginX,e.displayOriginY,0,0,a,o,h(e.tintTopLeft,i.alpha*e._alphaTL),h(e.tintTopRight,i.alpha*e._alphaTR),h(e.tintBottomLeft,i.alpha*e._alphaBL),h(e.tintBottomRight,i.alpha*e._alphaBR),e.tintFill,0,0,i,s,!1,c),t.pipelines.postBatch(e))}},function(t,e){t.exports=function(t,e,i,n){0!==e.width&&0!==e.height&&(i.addToRenderList(e),t.batchSprite(e,e.frame,i,n))}},function(t,e,i){var n=i(1),s=i(1);n=i(1092),s=i(1093),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e,i){var n=i(12);t.exports=function(t,e,i,s){e.updateCanvas();var r,a,o,h=e.width,l=e.height;0!==h&&0!==l&&(i.addToRenderList(e),t.pipelines.preBatch(e),r=n.getTintAppendFloatAlpha,o=(a=t.pipelines.set(e.pipeline,e)).setTexture2D(e.fillPattern,e),a.batchTexture(e,e.fillPattern,e.displayFrame.width*e.tileScaleX,e.displayFrame.height*e.tileScaleY,e.x,e.y,h,l,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.originX*h,e.originY*l,0,0,h,l,r(e.tintTopLeft,i.alpha*e._alphaTL),r(e.tintTopRight,i.alpha*e._alphaTR),r(e.tintBottomLeft,i.alpha*e._alphaBL),r(e.tintBottomRight,i.alpha*e._alphaBR),e.tintFill,e.tilePositionX%e.displayFrame.width/e.displayFrame.width,e.tilePositionY%e.displayFrame.height/e.displayFrame.height,i,s,!1,o),t.pipelines.postBatch(e))}},function(t,e){t.exports=function(t,e,i,n){e.updateCanvas(),i.addToRenderList(e),t.batchSprite(e,e.frame,i,n)}},function(t,e,i){var n=i(1),s=i(1);n=i(1095),s=i(1096),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e){t.exports=function(t,e,i,n){e.videoTexture&&(i.addToRenderList(e),e.pipeline.batchSprite(e,i,n))}},function(t,e){t.exports=function(t,e,i,n){e.videoTexture&&(i.addToRenderList(e),t.batchSprite(e,e.frame,i,n))}},function(t,e,i){var n=i(1),s=i(1);n=i(1098),s=i(1099),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e,i){var n=i(19),s=i(114),r=i(81);t.exports=function(t,e,i,a){i.addToRenderList(e);var o=t.pipelines.set(e.pipeline),h=n(e,i,a),l=o.calcMatrix.copyFrom(h.calc),c=e._displayOriginX,u=e._displayOriginY,d=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&s(o,l,e,d,c,u),e.isStroked&&r(o,e,d,c,u),t.pipelines.postBatch(e)}},function(t,e,i){var n=i(36),s=i(48),r=i(60),a=i(30);t.exports=function(t,e,i,o){i.addToRenderList(e);var h,l=t.currentContext;a(t,l,e,i,o)&&(h=e.radius,l.beginPath(),l.arc(h-e.originX*(2*h),h-e.originY*(2*h),h,n(e._startAngle),n(e._endAngle),e.anticlockwise),e.closePath&&l.closePath(),e.isFilled&&(s(l,e),l.fill()),e.isStroked&&(r(l,e),l.stroke()),l.restore())}},function(t,e,i){var n=i(1),s=i(1);n=i(1101),s=i(1102),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e,i){var n=i(114),s=i(19),r=i(81);t.exports=function(t,e,i,a){i.addToRenderList(e);var o=t.pipelines.set(e.pipeline),h=s(e,i,a),l=o.calcMatrix.copyFrom(h.calc),c=e._displayOriginX+e._curveBounds.x,u=e._displayOriginY+e._curveBounds.y,d=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&n(o,l,e,d,c,u),e.isStroked&&r(o,e,d,c,u),t.pipelines.postBatch(e)}},function(t,e,i){var n=i(48),s=i(60),r=i(30);t.exports=function(t,e,i,a){i.addToRenderList(e);var o=t.currentContext;if(r(t,o,e,i,a)){var h=e._displayOriginX+e._curveBounds.x,l=e._displayOriginY+e._curveBounds.y,c=e.pathData,u=c.length-1,d=c[0]-h,f=c[1]-l;o.beginPath(),o.moveTo(d,f),e.closePath||(u-=2);for(var p=2;p<u;p+=2){var g=c[p]-h,m=c[p+1]-l;o.lineTo(g,m)}e.closePath&&o.closePath(),e.isFilled&&(n(o,e),o.fill()),e.isStroked&&(s(o,e),o.stroke()),o.restore()}}},function(t,e,i){var n=i(1),s=i(1);n=i(1104),s=i(1105),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e,i){var n=i(114),s=i(19),r=i(81);t.exports=function(t,e,i,a){i.addToRenderList(e);var o=t.pipelines.set(e.pipeline),h=s(e,i,a),l=o.calcMatrix.copyFrom(h.calc),c=e._displayOriginX,u=e._displayOriginY,d=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&n(o,l,e,d,c,u),e.isStroked&&r(o,e,d,c,u),t.pipelines.postBatch(e)}},function(t,e,i){var n=i(48),s=i(60),r=i(30);t.exports=function(t,e,i,a){i.addToRenderList(e);var o=t.currentContext;if(r(t,o,e,i,a)){var h=e._displayOriginX,l=e._displayOriginY,c=e.pathData,u=c.length-1,d=c[0]-h,f=c[1]-l;o.beginPath(),o.moveTo(d,f),e.closePath||(u-=2);for(var p=2;p<u;p+=2){var g=c[p]-h,m=c[p+1]-l;o.lineTo(g,m)}o.closePath(),e.isFilled&&(n(o,e),o.fill()),e.isStroked&&(s(o,e),o.stroke()),o.restore()}}},function(t,e,i){var n=i(1),s=i(1);n=i(1107),s=i(1108),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e,i){var n=i(19),s=i(12);t.exports=function(t,e,i,r){i.addToRenderList(e);var a=t.pipelines.set(e.pipeline),o=n(e,i,r);a.calcMatrix.copyFrom(o.calc).translate(-e._displayOriginX,-e._displayOriginY);var h,l,c=i.alpha*e.alpha,u=e.width,d=e.height,f=e.cellWidth,p=e.cellHeight,g=Math.ceil(u/f),m=Math.ceil(d/p),v=f,y=p,_=f-(g*f-u),x=p-(m*p-d),w=e.showCells,b=e.showAltCells,E=e.showOutline,T=0,S=0,A=0,O=0,C=0;if(E&&(v--,y--,_===f&&_--,x===p&&x--),t.pipelines.preBatch(e),w&&0<e.fillAlpha)for(h=a.fillTint,l=s.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*c),h.TL=l,h.TR=l,h.BL=l,h.BR=l,S=0;S<m;S++)for(b&&(A=S%2),T=0;T<g;T++)b&&A?A=0:(A++,O=T<g-1?v:_,C=S<m-1?y:x,a.batchFillRect(T*f,S*p,O,C));if(b&&0<e.altFillAlpha)for(h=a.fillTint,l=s.getTintAppendFloatAlpha(e.altFillColor,e.altFillAlpha*c),h.TL=l,h.TR=l,h.BL=l,h.BR=l,S=0;S<m;S++)for(b&&(A=S%2),T=0;T<g;T++)!b||A?(A=0,O=T<g-1?v:_,C=S<m-1?y:x,a.batchFillRect(T*f,S*p,O,C)):A=1;if(E&&0<e.outlineFillAlpha){var P=a.strokeTint,L=s.getTintAppendFloatAlpha(e.outlineFillColor,e.outlineFillAlpha*c);for(P.TL=L,P.TR=L,P.BL=L,P.BR=L,T=1;T<g;T++){var R=T*f;a.batchLine(R,0,R,d,1,1,1,0,!1)}for(S=1;S<m;S++){var I=S*p;a.batchLine(0,I,u,I,1,1,1,0,!1)}}t.pipelines.postBatch(e)}},function(t,e,i){var n=i(48),s=i(60),r=i(30);t.exports=function(t,e,i,a){i.addToRenderList(e);var o=t.currentContext;if(r(t,o,e,i,a)){var h=-e._displayOriginX,l=-e._displayOriginY,c=i.alpha*e.alpha,u=e.width,d=e.height,f=e.cellWidth,p=e.cellHeight,g=Math.ceil(u/f),m=Math.ceil(d/p),v=f,y=p,_=f-(g*f-u),x=p-(m*p-d),w=e.showCells,b=e.showAltCells,E=e.showOutline,T=0,S=0,A=0,O=0,C=0;if(E&&(v--,y--,_===f&&_--,x===p&&x--),w&&0<e.fillAlpha)for(n(o,e),S=0;S<m;S++)for(b&&(A=S%2),T=0;T<g;T++)b&&A?A=0:(A++,O=T<g-1?v:_,C=S<m-1?y:x,o.fillRect(h+T*f,l+S*p,O,C));if(b&&0<e.altFillAlpha)for(n(o,e,e.altFillColor,e.altFillAlpha*c),S=0;S<m;S++)for(b&&(A=S%2),T=0;T<g;T++)!b||A?(A=0,O=T<g-1?v:_,C=S<m-1?y:x,o.fillRect(h+T*f,l+S*p,O,C)):A=1;if(E&&0<e.outlineFillAlpha){for(s(o,e,e.outlineFillColor,e.outlineFillAlpha*c),T=1;T<g;T++){var P=T*f;o.beginPath(),o.moveTo(P+h,l),o.lineTo(P+h,d+l),o.stroke()}for(S=1;S<m;S++){var L=S*p;o.beginPath(),o.moveTo(h,L+l),o.lineTo(h+u,L+l),o.stroke()}}o.restore()}}},function(t,e,i){var n=i(1),s=i(1);n=i(1110),s=i(1111),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e,i){var n=i(19),s=i(12);t.exports=function(t,e,i,r){i.addToRenderList(e);var a,o,h,l,c,u,d,f,p,g=t.pipelines.set(e.pipeline),m=n(e,i,r),v=g.calcMatrix.copyFrom(m.calc),y=e.width,_=e.height,x=y/2,w=y/e.projection,b=i.alpha*e.alpha;e.isFilled&&(t.pipelines.preBatch(e),e.showTop&&(a=s.getTintAppendFloatAlpha(e.fillTop,b),o=v.getX(-x,-_),h=v.getY(-x,-_),l=v.getX(0,-w-_),c=v.getY(0,-w-_),u=v.getX(x,-_),d=v.getY(x,-_),f=v.getX(0,w-_),p=v.getY(0,w-_),g.batchQuad(e,o,h,l,c,u,d,f,p,0,0,1,1,a,a,a,a,2)),e.showLeft&&(a=s.getTintAppendFloatAlpha(e.fillLeft,b),o=v.getX(-x,0),h=v.getY(-x,0),l=v.getX(0,w),c=v.getY(0,w),u=v.getX(0,w-_),d=v.getY(0,w-_),f=v.getX(-x,-_),p=v.getY(-x,-_),g.batchQuad(e,o,h,l,c,u,d,f,p,0,0,1,1,a,a,a,a,2)),e.showRight&&(a=s.getTintAppendFloatAlpha(e.fillRight,b),o=v.getX(x,0),h=v.getY(x,0),l=v.getX(0,w),c=v.getY(0,w),u=v.getX(0,w-_),d=v.getY(0,w-_),f=v.getX(x,-_),p=v.getY(x,-_),g.batchQuad(e,o,h,l,c,u,d,f,p,0,0,1,1,a,a,a,a,2)),t.pipelines.postBatch(e))}},function(t,e,i){var n=i(48),s=i(30);t.exports=function(t,e,i,r){i.addToRenderList(e);var a,o,h,l,c=t.currentContext;s(t,c,e,i,r)&&e.isFilled&&(a=e.width,o=e.height,h=a/2,l=a/e.projection,e.showTop&&(n(c,e,e.fillTop),c.beginPath(),c.moveTo(-h,-o),c.lineTo(0,-l-o),c.lineTo(h,-o),c.lineTo(h,-1),c.lineTo(0,l-1),c.lineTo(-h,-1),c.lineTo(-h,-o),c.fill()),e.showLeft&&(n(c,e,e.fillLeft),c.beginPath(),c.moveTo(-h,0),c.lineTo(0,l),c.lineTo(0,l-o),c.lineTo(-h,-o),c.lineTo(-h,0),c.fill()),e.showRight&&(n(c,e,e.fillRight),c.beginPath(),c.moveTo(h,0),c.lineTo(0,l),c.lineTo(0,l-o),c.lineTo(h,-o),c.lineTo(h,0),c.fill()),c.restore())}},function(t,e,i){var n=i(1),s=i(1);n=i(1113),s=i(1114),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e,i){var n=i(19),s=i(12);t.exports=function(t,e,i,r){i.addToRenderList(e);var a,o,h,l,c,u,d,f,p,g=t.pipelines.set(e.pipeline),m=n(e,i,r),v=g.calcMatrix.copyFrom(m.calc),y=e.width,_=e.height,x=y/2,w=y/e.projection,b=e.isReversed,E=i.alpha*e.alpha;e.isFilled&&(t.pipelines.preBatch(e),e.showTop&&b&&(a=s.getTintAppendFloatAlpha(e.fillTop,E),o=v.getX(-x,-_),h=v.getY(-x,-_),l=v.getX(0,-w-_),c=v.getY(0,-w-_),u=v.getX(x,-_),d=v.getY(x,-_),f=v.getX(0,w-_),p=v.getY(0,w-_),g.batchQuad(e,o,h,l,c,u,d,f,p,0,0,1,1,a,a,a,a,2)),e.showLeft&&(a=s.getTintAppendFloatAlpha(e.fillLeft,E),h=b?(o=v.getX(-x,-_),v.getY(-x,-_)):(o=v.getX(-x,0),v.getY(-x,0)),l=v.getX(0,w),c=v.getY(0,w),u=v.getX(0,w-_),d=v.getY(0,w-_),g.batchTri(e,o,h,l,c,u,d,0,0,1,1,a,a,a,2)),e.showRight&&(a=s.getTintAppendFloatAlpha(e.fillRight,E),h=b?(o=v.getX(x,-_),v.getY(x,-_)):(o=v.getX(x,0),v.getY(x,0)),l=v.getX(0,w),c=v.getY(0,w),u=v.getX(0,w-_),d=v.getY(0,w-_),g.batchTri(e,o,h,l,c,u,d,0,0,1,1,a,a,a,2)),t.pipelines.postBatch(e))}},function(t,e,i){var n=i(48),s=i(30);t.exports=function(t,e,i,r){i.addToRenderList(e);var a,o,h,l,c,u=t.currentContext;s(t,u,e,i,r)&&e.isFilled&&(a=e.width,o=e.height,h=a/2,l=a/e.projection,c=e.isReversed,e.showTop&&c&&(n(u,e,e.fillTop),u.beginPath(),u.moveTo(-h,-o),u.lineTo(0,-l-o),u.lineTo(h,-o),u.lineTo(0,l-o),u.fill()),e.showLeft&&(n(u,e,e.fillLeft),u.beginPath(),c?u.moveTo(-h,-o):u.moveTo(-h,0),u.lineTo(0,l),u.lineTo(0,l-o),u.fill()),e.showRight&&(n(u,e,e.fillRight),u.beginPath(),c?u.moveTo(h,-o):u.moveTo(h,0),u.lineTo(0,l),u.lineTo(0,l-o),u.fill()),u.restore())}},function(t,e,i){var n=i(1),s=i(1);n=i(1116),s=i(1117),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e,i){var n=i(19),s=i(12);t.exports=function(t,e,i,r){i.addToRenderList(e);var a=t.pipelines.set(e.pipeline),o=n(e,i,r);a.calcMatrix.copyFrom(o.calc);var h,l,c,u,d=e._displayOriginX,f=e._displayOriginY,p=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isStroked&&(h=a.strokeTint,l=s.getTintAppendFloatAlpha(e.strokeColor,e.strokeAlpha*p),h.TL=l,h.TR=l,h.BL=l,h.BR=l,c=e._startWidth,u=e._endWidth,a.batchLine(e.geom.x1-d,e.geom.y1-f,e.geom.x2-d,e.geom.y2-f,c,u,1,0,!1,o.sprite,o.camera)),t.pipelines.postBatch(e)}},function(t,e,i){var n=i(60),s=i(30);t.exports=function(t,e,i,r){i.addToRenderList(e);var a,o,h=t.currentContext;s(t,h,e,i,r)&&(a=e._displayOriginX,o=e._displayOriginY,e.isStroked&&(n(h,e),h.beginPath(),h.moveTo(e.geom.x1-a,e.geom.y1-o),h.lineTo(e.geom.x2-a,e.geom.y2-o),h.stroke()),h.restore())}},function(t,e,i){var n=i(1),s=i(1);n=i(1119),s=i(1120),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e,i){var n=i(114),s=i(19),r=i(81);t.exports=function(t,e,i,a){i.addToRenderList(e);var o=t.pipelines.set(e.pipeline),h=s(e,i,a),l=o.calcMatrix.copyFrom(h.calc),c=e._displayOriginX,u=e._displayOriginY,d=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&n(o,l,e,d,c,u),e.isStroked&&r(o,e,d,c,u),t.pipelines.postBatch(e)}},function(t,e,i){var n=i(48),s=i(60),r=i(30);t.exports=function(t,e,i,a){i.addToRenderList(e);var o=t.currentContext;if(r(t,o,e,i,a)){var h=e._displayOriginX,l=e._displayOriginY,c=e.pathData,u=c.length-1,d=c[0]-h,f=c[1]-l;o.beginPath(),o.moveTo(d,f),e.closePath||(u-=2);for(var p=2;p<u;p+=2){var g=c[p]-h,m=c[p+1]-l;o.lineTo(g,m)}o.closePath(),e.isFilled&&(n(o,e),o.fill()),e.isStroked&&(s(o,e),o.stroke()),o.restore()}}},function(t,e,i){var n=i(1),s=i(1);n=i(1122),s=i(1123),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e,i){var n=i(19),s=i(81),r=i(12);t.exports=function(t,e,i,a){i.addToRenderList(e);var o=t.pipelines.set(e.pipeline),h=n(e,i,a);o.calcMatrix.copyFrom(h.calc);var l,c,u=e._displayOriginX,d=e._displayOriginY,f=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&(l=o.fillTint,c=r.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*f),l.TL=c,l.TR=c,l.BL=c,l.BR=c,o.batchFillRect(-u,-d,e.width,e.height)),e.isStroked&&s(o,e,f,u,d),t.pipelines.postBatch(e)}},function(t,e,i){var n=i(48),s=i(60),r=i(30);t.exports=function(t,e,i,a){i.addToRenderList(e);var o,h,l=t.currentContext;r(t,l,e,i,a)&&(o=e._displayOriginX,h=e._displayOriginY,e.isFilled&&(n(l,e),l.fillRect(-o,-h,e.width,e.height)),e.isStroked&&(s(l,e),l.beginPath(),l.rect(-o,-h,e.width,e.height),l.stroke()),l.restore())}},function(t,e,i){var n=i(1),s=i(1);n=i(1125),s=i(1126),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e,i){var n=i(114),s=i(19),r=i(81);t.exports=function(t,e,i,a){i.addToRenderList(e);var o=t.pipelines.set(e.pipeline),h=s(e,i,a),l=o.calcMatrix.copyFrom(h.calc),c=e._displayOriginX,u=e._displayOriginY,d=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&n(o,l,e,d,c,u),e.isStroked&&r(o,e,d,c,u),t.pipelines.postBatch(e)}},function(t,e,i){var n=i(48),s=i(60),r=i(30);t.exports=function(t,e,i,a){i.addToRenderList(e);var o=t.currentContext;if(r(t,o,e,i,a)){var h=e._displayOriginX,l=e._displayOriginY,c=e.pathData,u=c.length-1,d=c[0]-h,f=c[1]-l;o.beginPath(),o.moveTo(d,f),e.closePath||(u-=2);for(var p=2;p<u;p+=2){var g=c[p]-h,m=c[p+1]-l;o.lineTo(g,m)}o.closePath(),e.isFilled&&(n(o,e),o.fill()),e.isStroked&&(s(o,e),o.stroke()),o.restore()}}},function(t,e,i){var n=i(1),s=i(1);n=i(1128),s=i(1129),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e,i){var n=i(19),s=i(81),r=i(12);t.exports=function(t,e,i,a){i.addToRenderList(e);var o=t.pipelines.set(e.pipeline),h=n(e,i,a);o.calcMatrix.copyFrom(h.calc);var l,c,u,d,f,p,g,m,v=e._displayOriginX,y=e._displayOriginY,_=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&(l=o.fillTint,c=r.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*_),l.TL=c,l.TR=c,l.BL=c,l.BR=c,u=e.geom.x1-v,d=e.geom.y1-y,f=e.geom.x2-v,p=e.geom.y2-y,g=e.geom.x3-v,m=e.geom.y3-y,o.batchFillTriangle(u,d,f,p,g,m,h.sprite,h.camera)),e.isStroked&&s(o,e,_,v,y),t.pipelines.postBatch(e)}},function(t,e,i){var n=i(48),s=i(60),r=i(30);t.exports=function(t,e,i,a){i.addToRenderList(e);var o,h,l,c,u,d,f,p,g=t.currentContext;r(t,g,e,i,a)&&(o=e._displayOriginX,h=e._displayOriginY,l=e.geom.x1-o,c=e.geom.y1-h,u=e.geom.x2-o,d=e.geom.y2-h,f=e.geom.x3-o,p=e.geom.y3-h,g.beginPath(),g.moveTo(l,c),g.lineTo(u,d),g.lineTo(f,p),g.closePath(),e.isFilled&&(n(g,e),g.fill()),e.isStroked&&(s(g,e),g.stroke()),g.restore())}},function(t,e,i){var n=i(213);i(5).register("blitter",(function(t,e,i,s){return this.displayList.add(new n(this.scene,t,e,i,s))}))},function(t,e,i){var n=i(214);i(5).register("container",(function(t,e,i){return this.displayList.add(new n(this.scene,t,e,i))}))},function(t,e,i){var n=i(442);i(5).register("dom",(function(t,e,i,s,r){var a=new n(this.scene,t,e,i,s,r);return this.displayList.add(a),a}))},function(t,e,i){var n=i(215);i(5).register("dynamicBitmapText",(function(t,e,i,s,r){return this.displayList.add(new n(this.scene,t,e,i,s,r))}))},function(t,e,i){var n=i(444);i(5).register("extern",(function(){var t=new n(this.scene);return this.displayList.add(t),t}))},function(t,e,i){var n=i(216);i(5).register("graphics",(function(t){return this.displayList.add(new n(this.scene,t))}))},function(t,e,i){var n=i(113);i(5).register("group",(function(t,e){return this.updateList.add(new n(this.scene,t,e))}))},function(t,e,i){var n=i(125);i(5).register("image",(function(t,e,i,s){return this.displayList.add(new n(this.scene,t,e,i,s))}))},function(t,e,i){var n=i(219);i(5).register("layer",(function(t){return this.displayList.add(new n(this.scene,t))}))},function(t,e,i){var n=i(5),s=i(220);n.register("particles",(function(t,e,i){return this.displayList.add(new s(this.scene,t,e,i))}))},function(t,e,i){var n=i(5),s=i(457);n.register("follower",(function(t,e,i,n,r){var a=new s(this.scene,t,e,i,n,r);return this.displayList.add(a),this.updateList.add(a),a}))},function(t,e,i){var n=i(5),s=i(221);n.register("renderTexture",(function(t,e,i,n,r,a){return this.displayList.add(new s(this.scene,t,e,i,n,r,a))}))},function(t,e,i){var n=i(223);i(5).register("rope",(function(t,e,i,s,r,a,o,h){return this.displayList.add(new n(this.scene,t,e,i,s,r,a,o,h))}))},function(t,e,i){var n=i(5),s=i(73);n.register("sprite",(function(t,e,i,n){var r=new s(this.scene,t,e,i,n);return this.displayList.add(r),r}))},function(t,e,i){var n=i(148);i(5).register("bitmapText",(function(t,e,i,s,r,a){return this.displayList.add(new n(this.scene,t,e,i,s,r,a))}))},function(t,e,i){var n=i(224);i(5).register("text",(function(t,e,i,s){return this.displayList.add(new n(this.scene,t,e,i,s))}))},function(t,e,i){var n=i(225);i(5).register("tileSprite",(function(t,e,i,s,r,a){return this.displayList.add(new n(this.scene,t,e,i,s,r,a))}))},function(t,e,i){var n=i(129);i(5).register("zone",(function(t,e,i,s){return this.displayList.add(new n(this.scene,t,e,i,s))}))},function(t,e,i){var n=i(226);i(5).register("video",(function(t,e,i){return this.displayList.add(new n(this.scene,t,e,i))}))},function(t,e,i){var n=i(461),s=i(5);s.register("arc",(function(t,e,i,s,r,a,o,h){return this.displayList.add(new n(this.scene,t,e,i,s,r,a,o,h))})),s.register("circle",(function(t,e,i,s,r){return this.displayList.add(new n(this.scene,t,e,i,0,360,!1,s,r))}))},function(t,e,i){var n=i(5),s=i(462);n.register("curve",(function(t,e,i,n,r){return this.displayList.add(new s(this.scene,t,e,i,n,r))}))},function(t,e,i){var n=i(463);i(5).register("ellipse",(function(t,e,i,s,r,a){return this.displayList.add(new n(this.scene,t,e,i,s,r,a))}))},function(t,e,i){var n=i(5),s=i(464);n.register("grid",(function(t,e,i,n,r,a,o,h,l,c){return this.displayList.add(new s(this.scene,t,e,i,n,r,a,o,h,l,c))}))},function(t,e,i){var n=i(5),s=i(465);n.register("isobox",(function(t,e,i,n,r,a,o){return this.displayList.add(new s(this.scene,t,e,i,n,r,a,o))}))},function(t,e,i){var n=i(5),s=i(466);n.register("isotriangle",(function(t,e,i,n,r,a,o,h){return this.displayList.add(new s(this.scene,t,e,i,n,r,a,o,h))}))},function(t,e,i){var n=i(5),s=i(467);n.register("line",(function(t,e,i,n,r,a,o,h){return this.displayList.add(new s(this.scene,t,e,i,n,r,a,o,h))}))},function(t,e,i){var n=i(5),s=i(468);n.register("polygon",(function(t,e,i,n,r){return this.displayList.add(new s(this.scene,t,e,i,n,r))}))},function(t,e,i){var n=i(5),s=i(473);n.register("rectangle",(function(t,e,i,n,r,a){return this.displayList.add(new s(this.scene,t,e,i,n,r,a))}))},function(t,e,i){var n=i(474);i(5).register("star",(function(t,e,i,s,r,a,o){return this.displayList.add(new n(this.scene,t,e,i,s,r,a,o))}))},function(t,e,i){var n=i(5),s=i(475);n.register("triangle",(function(t,e,i,n,r,a,o,h,l,c){return this.displayList.add(new s(this.scene,t,e,i,n,r,a,o,h,l,c))}))},function(t,e,i){var n=i(213),s=i(28),r=i(16),a=i(13);r.register("blitter",(function(t,e){void 0===t&&(t={});var i=a(t,"key",null),r=a(t,"frame",null),o=new n(this.scene,0,0,i,r);return void 0!==e&&(t.add=e),s(this.scene,o,t),o}))},function(t,e,i){var n=i(28),s=i(214),r=i(16),a=i(13);r.register("container",(function(t,e){void 0===t&&(t={});var i=a(t,"x",0),r=a(t,"y",0),o=a(t,"children",null),h=new s(this.scene,i,r,o);return void 0!==e&&(t.add=e),n(this.scene,h,t),h}))},function(t,e,i){var n=i(215),s=i(28),r=i(16),a=i(13);r.register("dynamicBitmapText",(function(t,e){void 0===t&&(t={});var i=a(t,"font",""),r=a(t,"text",""),o=a(t,"size",!1),h=new n(this.scene,0,0,i,r,o);return void 0!==e&&(t.add=e),s(this.scene,h,t),h}))},function(t,e,i){var n=i(16),s=i(216);n.register("graphics",(function(t,e){void 0===t&&(t={}),void 0!==e&&(t.add=e);var i=new s(this.scene,t);return t.add&&this.scene.sys.displayList.add(i),i}))},function(t,e,i){var n=i(16),s=i(113);n.register("group",(function(t){return new s(this.scene,null,t)}))},function(t,e,i){var n=i(28),s=i(16),r=i(13),a=i(125);s.register("image",(function(t,e){void 0===t&&(t={});var i=r(t,"key",null),s=r(t,"frame",null),o=new a(this.scene,0,0,i,s);return void 0!==e&&(t.add=e),n(this.scene,o,t),o}))},function(t,e,i){var n=i(28),s=i(219),r=i(16),a=i(13);r.register("layer",(function(t,e){void 0===t&&(t={});var i=a(t,"children",null),r=new s(this.scene,i);return void 0!==e&&(t.add=e),n(this.scene,r,t),r}))},function(t,e,i){var n=i(16),s=i(13),r=i(2),a=i(220);n.register("particles",(function(t,e){void 0===t&&(t={});var i=s(t,"key",null),n=s(t,"frame",null),o=r(t,"emitters",null),h=new a(this.scene,i,n,o);return void 0!==e&&(t.add=e),r(t,"add",!1)?this.displayList.add(h):this.updateList.add(h),h}))},function(t,e,i){var n=i(28),s=i(16),r=i(13),a=i(221);s.register("renderTexture",(function(t,e){void 0===t&&(t={});var i=r(t,"x",0),s=r(t,"y",0),o=r(t,"width",32),h=r(t,"height",32),l=r(t,"key",void 0),c=r(t,"frame",void 0),u=new a(this.scene,i,s,o,h,l,c);return void 0!==e&&(t.add=e),n(this.scene,u,t),u}))},function(t,e,i){var n=i(28),s=i(16),r=i(13),a=i(6),o=i(223);s.register("rope",(function(t,e){void 0===t&&(t={});var i=r(t,"key",null),s=r(t,"frame",null),h=r(t,"horizontal",!0),l=a(t,"points",void 0),c=a(t,"colors",void 0),u=a(t,"alphas",void 0),d=new o(this.scene,0,0,i,s,l,h,c,u);return void 0!==e&&(t.add=e),n(this.scene,d,t),t.add||this.updateList.add(d),d}))},function(t,e,i){var n=i(28),s=i(439),r=i(16),a=i(13),o=i(73);r.register("sprite",(function(t,e){void 0===t&&(t={});var i=a(t,"key",null),r=a(t,"frame",null),h=new o(this.scene,0,0,i,r);return void 0!==e&&(t.add=e),n(this.scene,h,t),s(h,t),h}))},function(t,e,i){var n=i(148),s=i(28),r=i(16),a=i(13),o=i(6);r.register("bitmapText",(function(t,e){void 0===t&&(t={});var i=o(t,"font",""),r=a(t,"text",""),h=a(t,"size",!1),l=o(t,"align",0),c=new n(this.scene,0,0,i,r,h,l);return void 0!==e&&(t.add=e),s(this.scene,c,t),c}))},function(t,e,i){var n=i(28),s=i(16),r=i(13),a=i(224);s.register("text",(function(t,e){void 0===t&&(t={});var i=r(t,"text",""),s=r(t,"style",null),o=r(t,"padding",null);null!==o&&(s.padding=o);var h=new a(this.scene,0,0,i,s);return void 0!==e&&(t.add=e),n(this.scene,h,t),h.autoRound=r(t,"autoRound",!0),h.resolution=r(t,"resolution",1),h}))},function(t,e,i){var n=i(28),s=i(16),r=i(13),a=i(225);s.register("tileSprite",(function(t,e){void 0===t&&(t={});var i=r(t,"x",0),s=r(t,"y",0),o=r(t,"width",512),h=r(t,"height",512),l=r(t,"key",""),c=r(t,"frame",""),u=new a(this.scene,i,s,o,h,l,c);return void 0!==e&&(t.add=e),n(this.scene,u,t),u}))},function(t,e,i){var n=i(16),s=i(13),r=i(129);n.register("zone",(function(t){var e=s(t,"x",0),i=s(t,"y",0),n=s(t,"width",1),a=s(t,"height",n);return new r(this.scene,e,i,n,a)}))},function(t,e,i){var n=i(28),s=i(16),r=i(13),a=i(226);s.register("video",(function(t,e){void 0===t&&(t={});var i=r(t,"key",null),s=new a(this.scene,0,0,i);return void 0!==e&&(t.add=e),n(this.scene,s,t),t.add||this.updateList.add(s),s}))},function(t,e,i){var n=i(1),s=i(1);n=i(1177),s=i(1178),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e,i){var n=i(19);t.exports=function(t,e,i,s){var r;e.shader&&(i.addToRenderList(e),t.pipelines.clear(),e.renderToTexture?e.load():(r=n(e,i,s).calc,t.width===e._rendererWidth&&t.height===e._rendererHeight||e.projOrtho(0,t.width,t.height,0),e.load(r.matrix)),e.flush(),t.pipelines.rebind())}},function(t,e){t.exports=function(){}},function(t,e,i){var n=i(1),s=i(1);n=i(1180),s=i(1181),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e,i){var n=i(19);t.exports=function(t,e,i,s){var r=e.faces,a=r.length;if(0!==a){i.addToRenderList(e);var o=t.pipelines.set(e.pipeline,e),h=n(e,i,s).calc,l=o.setGameObject(e),c=o.vertexViewF32,u=o.vertexViewU32,d=o.vertexCount*o.currentShader.vertexComponentCount-1,f=e.tintFill,p=[],g=e.debugCallback,m=h.a,v=h.b,y=h.c,_=h.d,x=h.e,w=h.f,b=e.viewPosition.z,E=e.hideCCW,T=i.roundPixels,S=i.alpha*e.alpha,A=0;t.pipelines.preBatch(e);for(var O=0;O<a;O++){var C=r[O];C.isInView(i,E,b,S,m,v,y,_,x,w,T)&&(o.shouldFlush(3)&&(o.flush(),d=0),d=C.load(c,u,d,l,f),A++,o.vertexCount+=3,g&&p.push(C))}e.totalFrame+=A,g&&g.call(e,e,p),t.pipelines.postBatch(e)}}},function(t,e){t.exports=function(){}},function(t,e,i){var n=i(1),s=i(1);n=i(1183),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e,i){var n=i(19);t.exports=function(t,e,i,s){i.addToRenderList(e);var r=t.pipelines.set(e.pipeline),a=n(e,i,s).calc,o=e.width,h=e.height,l=-e._radius,c=-e._radius,u=l+o,d=c+h,f=a.getX(0,0),p=a.getY(0,0),g=a.getX(l,c),m=a.getY(l,c),v=a.getX(l,d),y=a.getY(l,d),_=a.getX(u,d),x=a.getY(u,d),w=a.getX(u,c),b=a.getY(u,c);t.pipelines.preBatch(e),r.batchPointLight(e,i,g,m,v,y,_,x,w,b,f,p),t.pipelines.postBatch(e)}},function(t,e,i){var n=i(229);i(5).register("shader",(function(t,e,i,s,r,a,o){return this.displayList.add(new n(this.scene,t,e,i,s,r,a,o))}))},function(t,e,i){var n=i(230);i(5).register("mesh",(function(t,e,i,s,r,a,o,h,l,c,u){return this.displayList.add(new n(this.scene,t,e,i,s,r,a,o,h,l,c,u))}))},function(t,e,i){var n=i(5),s=i(150);n.register("pointlight",(function(t,e,i,n,r,a){return this.displayList.add(new s(this.scene,t,e,i,n,r,a))}))},function(t,e,i){var n=i(28),s=i(16),r=i(13),a=i(229);s.register("shader",(function(t,e){void 0===t&&(t={});var i=r(t,"key",null),s=r(t,"x",0),o=r(t,"y",0),h=r(t,"width",128),l=r(t,"height",128),c=new a(this.scene,i,s,o,h,l);return void 0!==e&&(t.add=e),n(this.scene,c,t),c}))},function(t,e,i){var n=i(28),s=i(16),r=i(13),a=i(6),o=i(230);s.register("mesh",(function(t,e){void 0===t&&(t={});var i=r(t,"key",null),s=r(t,"frame",null),h=a(t,"vertices",[]),l=a(t,"uvs",[]),c=a(t,"indicies",[]),u=a(t,"containsZ",!1),d=a(t,"normals",[]),f=a(t,"colors",16777215),p=a(t,"alphas",1),g=new o(this.scene,0,0,i,s,h,l,c,u,d,f,p);return void 0!==e&&(t.add=e),n(this.scene,g,t),g}))},function(t,e,i){var n=i(28),s=i(16),r=i(13),a=i(150);s.register("pointlight",(function(t,e){void 0===t&&(t={});var i=r(t,"color",16777215),s=r(t,"radius",128),o=r(t,"intensity",1),h=r(t,"attenuation",.1),l=new a(this.scene,0,0,i,s,o,h);return void 0!==e&&(t.add=e),n(this.scene,l,t),l}))},function(t,e,i){var n=i(0),s=i(482),r=i(24),a=i(20),o=new n({Extends:s,initialize:function(t){this.scene=t,this.systems=t.sys,t.sys.settings.isBooted||t.sys.events.once(a.BOOT,this.boot,this),s.call(this)},boot:function(){var t=this.systems.events;t.on(a.SHUTDOWN,this.shutdown,this),t.on(a.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});r.register("LightsPlugin",o,"lights"),t.exports=o},function(t,e,i){var n=i(65);n.Area=i(1192),n.Circumference=i(302),n.CircumferencePoint=i(169),n.Clone=i(1193),n.Contains=i(66),n.ContainsPoint=i(1194),n.ContainsRect=i(1195),n.CopyFrom=i(1196),n.Equals=i(1197),n.GetBounds=i(1198),n.GetPoint=i(300),n.GetPoints=i(301),n.Offset=i(1199),n.OffsetPoint=i(1200),n.Random=i(170),t.exports=n},function(t,e){t.exports=function(t){return 0<t.radius?Math.PI*t.radius*t.radius:0}},function(t,e,i){var n=i(65);t.exports=function(t){return new n(t.x,t.y,t.radius)}},function(t,e,i){var n=i(66);t.exports=function(t,e){return n(t,e.x,e.y)}},function(t,e,i){var n=i(66);t.exports=function(t,e){return n(t,e.x,e.y)&&n(t,e.right,e.y)&&n(t,e.x,e.bottom)&&n(t,e.right,e.bottom)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x,t.y,t.radius)}},function(t,e){t.exports=function(t,e){return t.x===e.x&&t.y===e.y&&t.radius===e.radius}},function(t,e,i){var n=i(10);t.exports=function(t,e){return void 0===e&&(e=new n),e.x=t.left,e.y=t.top,e.width=t.diameter,e.height=t.diameter,e}},function(t,e){t.exports=function(t,e,i){return t.x+=e,t.y+=i,t}},function(t,e){t.exports=function(t,e){return t.x+=e.x,t.y+=e.y,t}},function(t,e,i){var n=i(111);n.Area=i(1202),n.Circumference=i(447),n.CircumferencePoint=i(218),n.Clone=i(1203),n.Contains=i(112),n.ContainsPoint=i(1204),n.ContainsRect=i(1205),n.CopyFrom=i(1206),n.Equals=i(1207),n.GetBounds=i(1208),n.GetPoint=i(445),n.GetPoints=i(446),n.Offset=i(1209),n.OffsetPoint=i(1210),n.Random=i(180),t.exports=n},function(t,e){t.exports=function(t){return t.isEmpty()?0:t.getMajorRadius()*t.getMinorRadius()*Math.PI}},function(t,e,i){var n=i(111);t.exports=function(t){return new n(t.x,t.y,t.width,t.height)}},function(t,e,i){var n=i(112);t.exports=function(t,e){return n(t,e.x,e.y)}},function(t,e,i){var n=i(112);t.exports=function(t,e){return n(t,e.x,e.y)&&n(t,e.right,e.y)&&n(t,e.x,e.bottom)&&n(t,e.right,e.bottom)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x,t.y,t.width,t.height)}},function(t,e){t.exports=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}},function(t,e,i){var n=i(10);t.exports=function(t,e){return void 0===e&&(e=new n),e.x=t.left,e.y=t.top,e.width=t.width,e.height=t.height,e}},function(t,e){t.exports=function(t,e,i){return t.x+=e,t.y+=i,t}},function(t,e){t.exports=function(t,e){return t.x+=e.x,t.y+=e.y,t}},function(t,e,i){var n=i(4),s=i(231);t.exports=function(t,e,i){var r,a,o,h,l,c,u,d,f,p,g,m;return void 0===i&&(i=[]),s(t,e)&&(r=t.x,a=t.y,o=t.radius,h=e.x,l=e.y,c=e.radius,a===l?0==(m=(g=-2*l)*g-4*(p=1)*(h*h+(u=(c*c-o*o-h*h+r*r)/(2*(r-h)))*u-2*h*u+l*l-c*c))?i.push(new n(u,-g/(2*p))):0<m&&(i.push(new n(u,(-g+Math.sqrt(m))/(2*p))),i.push(new n(u,(-g-Math.sqrt(m))/(2*p)))):0==(m=(g=2*a*(d=(r-h)/(a-l))-2*(f=(c*c-o*o-h*h+r*r-l*l+a*a)/(2*(a-l)))*d-2*r)*g-4*(p=d*d+1)*(r*r+a*a+f*f-o*o-2*a*f))?(u=-g/(2*p),i.push(new n(u,f-u*d))):0<m&&(u=(-g+Math.sqrt(m))/(2*p),i.push(new n(u,f-u*d)),u=(-g-Math.sqrt(m))/(2*p),i.push(new n(u,f-u*d)))),i}},function(t,e,i){var n=i(232),s=i(151);t.exports=function(t,e,i){var r,a,o,h;return void 0===i&&(i=[]),s(t,e)&&(r=e.getLineA(),a=e.getLineB(),o=e.getLineC(),h=e.getLineD(),n(r,t,i),n(a,t,i),n(o,t,i),n(h,t,i)),i}},function(t,e,i){var n=i(140),s=i(487),r=new(i(47));function a(t,e,i,a,o){var h=Math.cos(t),l=Math.sin(t);r.setTo(e,i,e+h,i+l);var c=s(r,a);c&&o.push(new n(c.x,c.y,t,c.w))}function o(t,e){return t.z-e.z}t.exports=function(t,e,i){Array.isArray(i)||(i=[i]);for(var n=[],s=[],r=0;r<i.length;r++)for(var h=i[r].points,l=0;l<h.length;l++){var c=Math.atan2(h[l].y-e,h[l].x-t);-1===s.indexOf(c)&&(a(c,t,e,i,n),a(c-1e-5,t,e,i,n),a(c+1e-5,t,e,i,n),s.push(c))}return n.sort(o)}},function(t,e,i){var n=i(10),s=i(152);t.exports=function(t,e,i){return void 0===i&&(i=new n),s(t,e)&&(i.x=Math.max(t.x,e.x),i.y=Math.max(t.y,e.y),i.width=Math.min(t.right,e.right)-i.x,i.height=Math.min(t.bottom,e.bottom)-i.y),i}},function(t,e,i){var n=i(234),s=i(152);t.exports=function(t,e,i){var r,a,o,h;return void 0===i&&(i=[]),s(t,e)&&(r=t.getLineA(),a=t.getLineB(),o=t.getLineC(),h=t.getLineD(),n(r,e,i),n(a,e,i),n(o,e,i),n(h,e,i)),i}},function(t,e,i){var n=i(489),s=i(234);t.exports=function(t,e,i){var r,a,o;return void 0===i&&(i=[]),n(t,e)&&(r=e.getLineA(),a=e.getLineB(),o=e.getLineC(),s(r,t,i),s(a,t,i),s(o,t,i)),i}},function(t,e,i){var n=i(232),s=i(491);t.exports=function(t,e,i){var r,a,o;return void 0===i&&(i=[]),s(t,e)&&(r=t.getLineA(),a=t.getLineB(),o=t.getLineC(),n(r,e,i),n(a,e,i),n(o,e,i)),i}},function(t,e,i){var n=i(494),s=i(492);t.exports=function(t,e,i){var r,a,o;return void 0===i&&(i=[]),n(t,e)&&(r=e.getLineA(),a=e.getLineB(),o=e.getLineC(),s(t,r,i),s(t,a,i),s(t,o,i)),i}},function(t,e,i){var n=i(496);t.exports=function(t,e){if(!n(t,e))return!1;var i=Math.min(e.x1,e.x2),s=Math.max(e.x1,e.x2),r=Math.min(e.y1,e.y2),a=Math.max(e.y1,e.y2);return t.x>=i&&t.x<=s&&t.y>=r&&t.y<=a}},function(t,e){t.exports=function(t,e,i,n,s,r){return void 0===r&&(r=0),!(e>t.right+r||i<t.left-r||n>t.bottom+r||s<t.top-r)}},function(t,e,i){var n=i(47);n.Angle=i(97),n.BresenhamPoints=i(317),n.CenterOn=i(1222),n.Clone=i(1223),n.CopyFrom=i(1224),n.Equals=i(1225),n.Extend=i(1226),n.GetEasedPoints=i(1227),n.GetMidPoint=i(1228),n.GetNearestPoint=i(1229),n.GetNormal=i(1230),n.GetPoint=i(307),n.GetPoints=i(172),n.GetShortestDistance=i(1231),n.Height=i(1232),n.Length=i(67),n.NormalAngle=i(497),n.NormalX=i(1233),n.NormalY=i(1234),n.Offset=i(1235),n.PerpSlope=i(1236),n.Random=i(173),n.ReflectAngle=i(1237),n.Rotate=i(1238),n.RotateAroundPoint=i(1239),n.RotateAroundXY=i(236),n.SetToAngle=i(1240),n.Slope=i(1241),n.Width=i(1242),t.exports=n},function(t,e){t.exports=function(t,e,i){var n=e-(t.x1+t.x2)/2,s=i-(t.y1+t.y2)/2;return t.x1+=n,t.y1+=s,t.x2+=n,t.y2+=s,t}},function(t,e,i){var n=i(47);t.exports=function(t){return new n(t.x1,t.y1,t.x2,t.y2)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x1,t.y1,t.x2,t.y2)}},function(t,e){t.exports=function(t,e){return t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2}},function(t,e,i){var n=i(67);t.exports=function(t,e,i){void 0===i&&(i=e);var s=n(t),r=t.x2-t.x1,a=t.y2-t.y1;return e&&(t.x1=t.x1-r/s*e,t.y1=t.y1-a/s*e),i&&(t.x2=t.x2+r/s*i,t.y2=t.y2+a/s*i),t}},function(t,e,i){var n=i(352),s=i(80),r=i(4);t.exports=function(t,e,i,a,o){void 0===a&&(a=0),void 0===o&&(o=[]);var h,l=[],c=t.x1,u=t.y1,d=t.x2-c,f=t.y2-u,p=s(e,o),g=i-1;for(y=0;y<g;y++)h=p(y/g),l.push(new r(c+d*h,u+f*h));if(h=p(1),l.push(new r(c+d*h,u+f*h)),0<a){for(var m=l[0],v=[m],y=1;y<l.length-1;y++){var _=l[y];n(m,_)>=a&&(v.push(_),m=_)}var x=l[l.length-1];return n(m,x)<a&&v.pop(),v.push(x),v}return l}},function(t,e,i){var n=i(4);t.exports=function(t,e){return void 0===e&&(e=new n),e.x=(t.x1+t.x2)/2,e.y=(t.y1+t.y2)/2,e}},function(t,e,i){var n=i(4);t.exports=function(t,e,i){void 0===i&&(i=new n);var s=t.x1,r=t.y1,a=t.x2,o=t.y2,h=(a-s)*(a-s)+(o-r)*(o-r);if(0==h)return i;var l=((e.x-s)*(a-s)+(e.y-r)*(o-r))/h;return i.x=s+l*(a-s),i.y=r+l*(o-r),i}},function(t,e,i){var n=i(14),s=i(97),r=i(4);t.exports=function(t,e){void 0===e&&(e=new r);var i=s(t)-n.TAU;return e.x=Math.cos(i),e.y=Math.sin(i),e}},function(t,e){t.exports=function(t,e){var i=t.x1,n=t.y1,s=t.x2,r=t.y2,a=(s-i)*(s-i)+(r-n)*(r-n);if(0==a)return!1;var o=((n-e.y)*(s-i)-(i-e.x)*(r-n))/a;return Math.abs(o)*Math.sqrt(a)}},function(t,e){t.exports=function(t){return Math.abs(t.y1-t.y2)}},function(t,e,i){var n=i(14),s=i(97);t.exports=function(t){return Math.cos(s(t)-n.TAU)}},function(t,e,i){var n=i(14),s=i(97);t.exports=function(t){return Math.sin(s(t)-n.TAU)}},function(t,e){t.exports=function(t,e,i){return t.x1+=e,t.y1+=i,t.x2+=e,t.y2+=i,t}},function(t,e){t.exports=function(t){return-(t.x2-t.x1)/(t.y2-t.y1)}},function(t,e,i){var n=i(97),s=i(497);t.exports=function(t,e){return 2*s(e)-Math.PI-n(t)}},function(t,e,i){var n=i(236);t.exports=function(t,e){var i=(t.x1+t.x2)/2,s=(t.y1+t.y2)/2;return n(t,i,s,e)}},function(t,e,i){var n=i(236);t.exports=function(t,e,i){return n(t,e.x,e.y,i)}},function(t,e){t.exports=function(t,e,i,n,s){return t.x1=e,t.y1=i,t.x2=e+Math.cos(n)*s,t.y2=i+Math.sin(n)*s,t}},function(t,e){t.exports=function(t){return(t.y2-t.y1)/(t.x2-t.x1)}},function(t,e){t.exports=function(t){return Math.abs(t.x1-t.x2)}},function(t,e,i){var n={Face:i(116),GenerateGridVerts:i(1244),GenerateObjVerts:i(480),GenerateVerts:i(479),ParseObj:i(498),ParseObjMaterial:i(499),RotateFace:i(1245),Vertex:i(117)};t.exports=n},function(t,e,i){var n=i(116),s=i(2),r=i(69),a=i(39),o=i(117),h=new a,l=new a,c=new r;t.exports=function(t){var e=s(t,"mesh"),i=s(t,"texture",null),r=s(t,"frame"),a=s(t,"width",1),u=s(t,"height",a),d=s(t,"widthSegments",1),f=s(t,"heightSegments",d),p=s(t,"x",0),g=s(t,"y",0),m=s(t,"z",0),v=s(t,"rotateX",0),y=s(t,"rotateY",0),_=s(t,"rotateZ",0),x=s(t,"zIsUp",!0),w=s(t,"isOrtho",!!e&&e.dirtyCache[11]),b=s(t,"colors",[16777215]),E=s(t,"alphas",[1]),T=s(t,"tile",!1),S=s(t,"flipY",!1),A=s(t,"width",null),O={faces:[],verts:[]};if(h.set(p,g,m),l.set(v,y,_),c.fromRotationXYTranslation(l,h,x),!i&&e)i=e.texture;else{if(!e||"string"!=typeof i)return O;i=e.scene.sys.textures.get(i)}var C=i.get(r);!A&&w&&i&&e&&(a=C.width/e.height,u=C.height/e.height);var P=a/2,L=u/2,R=Math.floor(d),I=Math.floor(f),M=R+1,D=I+1,k=a/R,N=u/I,F=[],G=[],B=0,z=1,U=0,Y=1;C&&(B=C.u0,z=C.u1,Y=S?(U=C.v1,C.v0):(U=C.v0,C.v1));for(var X=z-B,H=Y-U,j=0;j<D;j++)for(var W=j*N-L,V=0;V<M;V++){var K=V*k-P;G.push(K,-W);var q=B+V/R*X,Z=U+j/I*H;F.push(q,Z)}Array.isArray(b)||(b=[b]),Array.isArray(E)||(E=[E]);var J=0,$=0;for(j=0;j<I;j++)for(V=0;V<R;V++){var Q=2*(V+M*j),tt=2*(V+M*(j+1)),et=2*(V+1+M*(j+1)),it=2*(V+1+M*j),nt=b[$],st=E[J],rt=new o(G[Q],G[1+Q],0,F[Q],F[1+Q],nt,st).transformMat4(c),at=new o(G[tt],G[1+tt],0,F[tt],F[1+tt],nt,st).transformMat4(c),ot=new o(G[it],G[1+it],0,F[it],F[1+it],nt,st).transformMat4(c),ht=new o(G[tt],G[1+tt],0,F[tt],F[1+tt],nt,st).transformMat4(c),lt=new o(G[et],G[1+et],0,F[et],F[1+et],nt,st).transformMat4(c),ct=new o(G[it],G[1+it],0,F[it],F[1+it],nt,st).transformMat4(c);T&&(rt.setUVs(B,Y),at.setUVs(B,U),ot.setUVs(z,Y),ht.setUVs(B,U),lt.setUVs(z,U),ct.setUVs(z,Y)),++$===b.length&&($=0),++J===E.length&&(J=0),O.verts.push(rt,at,ot,ht,lt,ct),O.faces.push(new n(rt,at,ot),new n(ht,lt,ct))}return e&&(e.faces=e.faces.concat(O.faces),e.vertices=e.vertices.concat(O.verts)),O}},function(t,e){t.exports=function(t,e,i,n){var s,r,a;void 0===i&&void 0===n&&(r=(s=t.getInCenter()).x,a=s.y);var o=Math.cos(e),h=Math.sin(e),l=t.vertex1,c=t.vertex2,u=t.vertex3,d=l.x-r,f=l.y-a;l.set(d*o-f*h+r,d*h+f*o+a),d=c.x-r,f=c.y-a,c.set(d*o-f*h+r,d*h+f*o+a),d=u.x-r,f=u.y-a,u.set(d*o-f*h+r,d*h+f*o+a)}},function(t,e,i){var n=i(4);n.Ceil=i(1247),n.Clone=i(1248),n.CopyFrom=i(1249),n.Equals=i(1250),n.Floor=i(1251),n.GetCentroid=i(1252),n.GetMagnitude=i(500),n.GetMagnitudeSq=i(501),n.GetRectangleFromPoints=i(1253),n.Interpolate=i(1254),n.Invert=i(1255),n.Negative=i(1256),n.Project=i(1257),n.ProjectUnit=i(1258),n.SetMagnitude=i(1259),t.exports=n},function(t,e){t.exports=function(t){return t.setTo(Math.ceil(t.x),Math.ceil(t.y))}},function(t,e,i){var n=i(4);t.exports=function(t){return new n(t.x,t.y)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x,t.y)}},function(t,e){t.exports=function(t,e){return t.x===e.x&&t.y===e.y}},function(t,e){t.exports=function(t){return t.setTo(Math.floor(t.x),Math.floor(t.y))}},function(t,e,i){var n=i(4);t.exports=function(t,e){if(void 0===e&&(e=new n),!Array.isArray(t))throw new Error("GetCentroid points argument must be an array");var i=t.length;if(i<1)throw new Error("GetCentroid points array must not be empty");if(1===i)e.x=t[0].x,e.y=t[0].y;else{for(var s=0;s<i;s++)e.x+=t[s].x,e.y+=t[s].y;e.x/=i,e.y/=i}return e}},function(t,e,i){var n=i(10);t.exports=function(t,e){void 0===e&&(e=new n);for(var i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,o=0;o<t.length;o++){var h=t[o];h.x>i&&(i=h.x),h.x<s&&(s=h.x),h.y>r&&(r=h.y),h.y<a&&(a=h.y)}return e.x=s,e.y=a,e.width=i-s,e.height=r-a,e}},function(t,e,i){var n=i(4);t.exports=function(t,e,i,s){return void 0===i&&(i=0),void 0===s&&(s=new n),s.x=t.x+(e.x-t.x)*i,s.y=t.y+(e.y-t.y)*i,s}},function(t,e){t.exports=function(t){return t.setTo(t.y,t.x)}},function(t,e,i){var n=i(4);t.exports=function(t,e){return void 0===e&&(e=new n),e.setTo(-t.x,-t.y)}},function(t,e,i){var n=i(4),s=i(501);t.exports=function(t,e,i){void 0===i&&(i=new n);var r=(t.x*e.x+t.y*e.y)/s(e);return 0!=r&&(i.x=r*e.x,i.y=r*e.y),i}},function(t,e,i){var n=i(4);t.exports=function(t,e,i){void 0===i&&(i=new n);var s=t.x*e.x+t.y*e.y;return 0!=s&&(i.x=s*e.x,i.y=s*e.y),i}},function(t,e,i){var n=i(500);t.exports=function(t,e){var i;return 0===t.x&&0===t.y||(i=n(t),t.x/=i,t.y/=i),t.x*=e,t.y*=e,t}},function(t,e,i){var n=i(227);n.Clone=i(1261),n.Contains=i(228),n.ContainsPoint=i(1262),n.Earcut=i(59),n.GetAABB=i(469),n.GetNumberArray=i(1263),n.GetPoints=i(470),n.Perimeter=i(471),n.Reverse=i(1264),n.Simplify=i(1265),n.Smooth=i(472),n.Translate=i(1266),t.exports=n},function(t,e,i){var n=i(227);t.exports=function(t){return new n(t.points)}},function(t,e,i){var n=i(228);t.exports=function(t,e){return n(t,e.x,e.y)}},function(t,e){t.exports=function(t,e){void 0===e&&(e=[]);for(var i=0;i<t.points.length;i++)e.push(t.points[i].x),e.push(t.points[i].y);return e}},function(t,e){t.exports=function(t){return t.points.reverse(),t}},function(t,e){t.exports=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=!1);var n,s=t.points;return 2<s.length&&(n=e*e,i||(s=function(t,e){for(var i,n,s,r,a,o=t[0],h=[o],l=1,c=t.length;l<c;l++)s=o,e<(r=(n=i=t[l]).x-s.x)*r+(a=n.y-s.y)*a&&(h.push(i),o=i);return o!==i&&h.push(i),h}(s,n)),t.setTo(function(t,e){var i=t.length-1,n=[t[0]];return function t(e,i,n,s,r){for(var a,o,h,l,c,u,d,f,p,g=s,m=i+1;m<n;m++){var v=(o=e[m],h=e[i],l=e[n],p=f=d=u=c=void 0,u=h.x,d=h.y,f=l.x-u,p=l.y-d,0===f&&0===p||(1<(c=((o.x-u)*f+(o.y-d)*p)/(f*f+p*p))?(u=l.x,d=l.y):0<c&&(u+=f*c,d+=p*c)),(f=o.x-u)*f+(p=o.y-d)*p);g<v&&(a=m,g=v)}s<g&&(1<a-i&&t(e,i,a,s,r),r.push(e[a]),1<n-a&&t(e,a,n,s,r))}(t,0,i,e,n),n.push(t[i]),n}(s,n))),t}},function(t,e){t.exports=function(t,e,i){for(var n=t.points,s=0;s<n.length;s++)n[s].x+=e,n[s].y+=i;return t}},function(t,e){t.exports=function(t){return t.width*t.height}},function(t,e){t.exports=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t}},function(t,e){t.exports=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),t}},function(t,e,i){var n=i(10);t.exports=function(t){return new n(t.x,t.y,t.width,t.height)}},function(t,e,i){var n=i(57);t.exports=function(t,e){return n(t,e.x,e.y)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x,t.y,t.width,t.height)}},function(t,e){t.exports=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}},function(t,e,i){var n=i(237);t.exports=function(t,e){var i=n(t);return i<n(e)?t.setSize(e.height*i,e.height):t.setSize(e.width,e.width/i),t.setPosition(e.centerX-t.width/2,e.centerY-t.height/2)}},function(t,e,i){var n=i(237);t.exports=function(t,e){var i=n(t);return i>n(e)?t.setSize(e.height*i,e.height):t.setSize(e.width,e.width/i),t.setPosition(e.centerX-t.width/2,e.centerY-t.height/2)}},function(t,e){t.exports=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t}},function(t,e){t.exports=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t.width=Math.floor(t.width),t.height=Math.floor(t.height),t}},function(t,e,i){var n=i(10);t.exports=function(t,e,i,s,r){return void 0===r&&(r=new n),r.setTo(Math.min(t,i),Math.min(e,s),Math.abs(t-i),Math.abs(e-s))}},function(t,e,i){var n=i(4);t.exports=function(t,e){return void 0===e&&(e=new n),e.x=t.centerX,e.y=t.centerY,e}},function(t,e,i){var n=i(4);t.exports=function(t,e){return void 0===e&&(e=new n),e.x=t.width,e.y=t.height,e}},function(t,e,i){var n=i(190);t.exports=function(t,e,i){var s=t.centerX,r=t.centerY;return t.setSize(t.width+2*e,t.height+2*i),n(t,s,r)}},function(t,e,i){var n=i(10),s=i(152);t.exports=function(t,e,i){return void 0===i&&(i=new n),s(t,e)?(i.x=Math.max(t.x,e.x),i.y=Math.max(t.y,e.y),i.width=Math.min(t.right,e.right)-i.x,i.height=Math.min(t.bottom,e.bottom)-i.y):i.setEmpty(),i}},function(t,e){t.exports=function(t,e){for(var i=t.x,n=t.right,s=t.y,r=t.bottom,a=0;a<e.length;a++)i=Math.min(i,e[a].x),n=Math.max(n,e[a].x),s=Math.min(s,e[a].y),r=Math.max(r,e[a].y);return t.x=i,t.y=s,t.width=n-i,t.height=r-s,t}},function(t,e){t.exports=function(t,e){var i=Math.min(t.x,e.x),n=Math.max(t.right,e.right);t.x=i,t.width=n-i;var s=Math.min(t.y,e.y),r=Math.max(t.bottom,e.bottom);return t.y=s,t.height=r-s,t}},function(t,e){t.exports=function(t,e,i){var n=Math.min(t.x,e),s=Math.max(t.right,e);t.x=n,t.width=s-n;var r=Math.min(t.y,i),a=Math.max(t.bottom,i);return t.y=r,t.height=a-r,t}},function(t,e){t.exports=function(t,e,i){return t.x+=e,t.y+=i,t}},function(t,e){t.exports=function(t,e){return t.x+=e.x,t.y+=e.y,t}},function(t,e){t.exports=function(t,e){return t.x<e.right&&t.right>e.x&&t.y<e.bottom&&t.bottom>e.y}},function(t,e,i){var n=i(4),s=i(36);t.exports=function(t,e,i){void 0===i&&(i=new n),e=s(e);var r=Math.sin(e),a=Math.cos(e),o=0<a?t.width/2:t.width/-2,h=0<r?t.height/2:t.height/-2;return Math.abs(o*r)<Math.abs(h*a)?h=o*r/a:o=h*a/r,i.x=o+t.centerX,i.y=h+t.centerY,i}},function(t,e,i){var n=i(195),s=i(503),r=i(4);t.exports=function(t,e,i){if(void 0===i&&(i=new r),s(t,e))switch(n(0,3)){case 0:i.x=t.x+Math.random()*(e.right-t.x),i.y=t.y+Math.random()*(e.top-t.y);break;case 1:i.x=e.x+Math.random()*(t.right-e.x),i.y=e.bottom+Math.random()*(t.bottom-e.bottom);break;case 2:i.x=t.x+Math.random()*(e.x-t.x),i.y=e.y+Math.random()*(t.bottom-e.y);break;case 3:i.x=e.right+Math.random()*(t.right-e.right),i.y=t.y+Math.random()*(e.bottom-t.y)}return i}},function(t,e){t.exports=function(t,e){return t.width===e.width&&t.height===e.height}},function(t,e){t.exports=function(t,e,i){return void 0===i&&(i=e),t.width*=e,t.height*=i,t}},function(t,e,i){var n=i(82);n.Area=i(1294),n.BuildEquilateral=i(1295),n.BuildFromPolygon=i(1296),n.BuildRight=i(1297),n.CenterOn=i(1298),n.Centroid=i(504),n.CircumCenter=i(1299),n.CircumCircle=i(1300),n.Clone=i(1301),n.Contains=i(115),n.ContainsArray=i(235),n.ContainsPoint=i(1302),n.CopyFrom=i(1303),n.Decompose=i(495),n.Equals=i(1304),n.GetPoint=i(476),n.GetPoints=i(477),n.InCenter=i(506),n.Perimeter=i(1305),n.Offset=i(505),n.Random=i(181),n.Rotate=i(1306),n.RotateAroundPoint=i(1307),n.RotateAroundXY=i(238),t.exports=n},function(t,e){t.exports=function(t){var e=t.x1,i=t.y1,n=t.x2,s=t.y2,r=t.x3,a=t.y3;return Math.abs(((r-e)*(s-i)-(n-e)*(a-i))/2)}},function(t,e,i){var n=i(82);t.exports=function(t,e,i){var s=i*(Math.sqrt(3)/2);return new n(t,e,t+i/2,e+s,t-i/2,e+s)}},function(t,e,i){var n=i(59),s=i(82);t.exports=function(t,e,i,r,a){void 0===e&&(e=null),void 0===i&&(i=1),void 0===r&&(r=1),void 0===a&&(a=[]);for(var o,h,l,c,u,d,f,p,g,m=n(t,e),v=0;v<m.length;v+=3)o=m[v],h=m[v+1],l=m[v+2],c=t[2*o]*i,u=t[2*o+1]*r,d=t[2*h]*i,f=t[2*h+1]*r,p=t[2*l]*i,g=t[2*l+1]*r,a.push(new s(c,u,d,f,p,g));return a}},function(t,e,i){var n=i(82);t.exports=function(t,e,i,s){return void 0===s&&(s=i),new n(t,e,t,e-s,t+i,e)}},function(t,e,i){var n=i(504),s=i(505);t.exports=function(t,e,i,r){void 0===r&&(r=n);var a=r(t),o=e-a.x,h=i-a.y;return s(t,o,h)}},function(t,e,i){var n=i(3);t.exports=function(t,e){void 0===e&&(e=new n);var i=t.x3,s=t.y3,r=t.x1-i,a=t.y1-s,o=t.x2-i,h=t.y2-s,l=2*(r*h-a*o),c=a*(o*o+h*h)-(r*r+a*a)*h,u=r*(o*o+h*h)-(r*r+a*a)*o;return e.x=i-c/l,e.y=s+u/l,e}},function(t,e,i){var n=i(65);t.exports=function(t,e){void 0===e&&(e=new n);var i,s,r,a,o=t.x1,h=t.y1,l=t.x2,c=t.y2,u=t.x3,d=t.y3,f=l-o,p=c-h,g=u-o,m=d-h,v=f*(o+l)+p*(h+c),y=g*(o+u)+m*(h+d),_=2*(f*(d-c)-p*(u-l));return Math.abs(_)<1e-6?(i=Math.min(o,l,u),s=Math.min(h,c,d),r=.5*(Math.max(o,l,u)-i),a=.5*(Math.max(h,c,d)-s),e.x=i+r,e.y=s+a):(e.x=(m*v-p*y)/_,e.y=(f*y-g*v)/_,r=e.x-o,a=e.y-h),e.radius=Math.sqrt(r*r+a*a),e}},function(t,e,i){var n=i(82);t.exports=function(t){return new n(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},function(t,e,i){var n=i(115);t.exports=function(t,e){return n(t,e.x,e.y)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},function(t,e){t.exports=function(t,e){return t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2&&t.x3===e.x3&&t.y3===e.y3}},function(t,e,i){var n=i(67);t.exports=function(t){var e=t.getLineA(),i=t.getLineB(),s=t.getLineC();return n(e)+n(i)+n(s)}},function(t,e,i){var n=i(238),s=i(506);t.exports=function(t,e){var i=s(t);return n(t,i.x,i.y,e)}},function(t,e,i){var n=i(238);t.exports=function(t,e,i){return n(t,e.x,e.y,i)}},function(t,e,i){var n=i(203),s=i(17)(!1,s={CreatePixelPerfectHandler:i(507),CreateInteractiveObject:i(508),Events:i(51),Gamepad:i(1309),InputManager:i(409),InputPlugin:i(1321),InputPluginCache:i(153),Keyboard:i(1322),Mouse:i(1336),Pointer:i(412),Touch:i(1337)},n);t.exports=s},function(t,e,i){t.exports={Axis:i(509),Button:i(510),Events:i(239),Gamepad:i(511),GamepadPlugin:i(1316),Configs:i(1317)}},function(t,e){t.exports="down"},function(t,e){t.exports="up"},function(t,e){t.exports="connected"},function(t,e){t.exports="disconnected"},function(t,e){t.exports="down"},function(t,e){t.exports="up"},function(t,e,i){var n=i(0),s=i(9),r=i(239),a=i(511),o=i(6),h=i(153),l=i(51),c=new n({Extends:s,initialize:function(t){s.call(this),this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,t.pluginEvents.once(l.BOOT,this.boot,this),t.pluginEvents.on(l.START,this.start,this)},boot:function(){var t=this.scene.sys.game,e=this.settings.input,i=t.config;this.enabled=o(e,"gamepad",i.inputGamepad)&&t.device.input.gamepads,this.target=o(e,"gamepad.target",i.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(l.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(l.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){function t(t){!t.defaultPrevented&&e.isActive()&&(e.refreshPads(),e.queue.push(t))}var e=this,i=this.target;this.onGamepadHandler=t,i.addEventListener("gamepadconnected",t,!1),i.addEventListener("gamepaddisconnected",t,!1),this.sceneInputPlugin.pluginEvents.on(l.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(l.UPDATE,this.update);for(var t=0;t<this.gamepads.length;t++)this.gamepads[t].removeAllListeners()},disconnectAll:function(){for(var t=0;t<this.gamepads.length;t++)this.gamepads[t].pad.connected=!1},refreshPads:function(){var t=navigator.getGamepads();if(t)for(var e=this.gamepads,i=0;i<t.length;i++){var n,s,r,o,h=t[i];h&&(n=h.id,(r=e[s=h.index])?r.id!==n?(r.destroy(),e[s]=new a(this,h)):r.update(h):(o=new a(this,h),e[s]=o,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=o):this._pad3=o:this._pad2=o:this._pad1=o))}else this.disconnectAll()},getAll:function(){for(var t=[],e=this.gamepads,i=0;i<e.length;i++)e[i]&&t.push(e[i]);return t},getPad:function(t){for(var e=this.gamepads,i=0;i<e.length;i++)if(e[i]&&e[i].index===t)return e[i]},update:function(){if(this.enabled){this.refreshPads();var t=this.queue.length;if(0!==t)for(var e=this.queue.splice(0,t),i=0;i<t;i++){var n=e[i],s=this.getPad(n.gamepad.index);"gamepadconnected"===n.type?this.emit(r.CONNECTED,s,n):"gamepaddisconnected"===n.type&&this.emit(r.DISCONNECTED,s,n)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var t=0;t<this.gamepads.length;t++)this.gamepads[t]&&this.gamepads[t].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});h.register("GamepadPlugin",c,"gamepad","gamepad","inputGamepad"),t.exports=c},function(t,e,i){t.exports={DUALSHOCK_4:i(1318),SNES_USB:i(1319),XBOX_360:i(1320)}},function(t,e){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(t,e){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(t,e){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(t,e,i){var n=i(65),s=i(66),r=i(0),a=i(203),o=i(508),h=i(507),l=i(50),c=i(111),u=i(112),d=i(51),f=i(9),p=i(2),g=i(56),m=i(153),v=i(7),y=i(24),_=i(10),x=i(57),w=i(20),b=i(82),E=i(115),T=new r({Extends:f,initialize:function(t){f.call(this),this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.manager=t.sys.game.input,this.pluginEvents=new f,this.enabled=!0,this.displayList,this.cameras,m.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var e={cancelled:!1};this._eventContainer={stopPropagation:function(){e.cancelled=!0}},this._eventData=e,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,t.sys.events.once(w.BOOT,this.boot,this),t.sys.events.on(w.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(w.DESTROY,this.destroy,this),this.pluginEvents.emit(d.BOOT)},start:function(){var t=this.systems.events;t.on(w.TRANSITION_START,this.transitionIn,this),t.on(w.TRANSITION_OUT,this.transitionOut,this),t.on(w.TRANSITION_COMPLETE,this.transitionComplete,this),t.on(w.PRE_UPDATE,this.preUpdate,this),t.once(w.SHUTDOWN,this.shutdown,this),this.manager.events.on(d.GAME_OUT,this.onGameOut,this),this.manager.events.on(d.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(d.START)},onGameOver:function(t){this.isActive()&&this.emit(d.GAME_OVER,t.timeStamp,t)},onGameOut:function(t){this.isActive()&&this.emit(d.GAME_OUT,t.timeStamp,t)},preUpdate:function(){this.pluginEvents.emit(d.PRE_UPDATE);var t=this._pendingRemoval,e=this._pendingInsertion,i=t.length,n=e.length;if(0!==i||0!==n){for(var s=this._list,r=0;r<i;r++){var a=t[r],o=s.indexOf(a);-1<o&&(s.splice(o,1),this.clear(a,!0))}t.length=0,this._pendingRemoval.length=0,this._list=s.concat(e.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(t,e){if(!this.isActive())return!1;if(this.pluginEvents.emit(d.UPDATE,t,e),this._updatedThisFrame)return this._updatedThisFrame=!1;for(var i=this.manager,n=i.pointers,s=i.pointersTotal,r=0;r<s;r++)n[r].updateMotion();if(0===this._list.length)return!1;var a=this.pollRate;if(-1===a)return!1;if(0<a){if(this._pollTimer-=e,!(this._pollTimer<0))return!1;this._pollTimer=this.pollRate}var o=!1;for(r=0;r<s;r++){var h=0,l=n[r];this._tempZones=[],this._temp=this.hitTestPointer(l),this.sortGameObjects(this._temp,l),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),h+=this.processOverOutEvents(l),2===this.getDragState(l)&&this.processDragThresholdEvent(l,t),0<h&&(o=!0)}return o},update:function(t,e){if(!this.isActive())return!1;for(var i=e.length,n=!1,s=0;s<i;s++){var r=0,o=e[s];switch(this._tempZones=[],this._temp=this.hitTestPointer(o),this.sortGameObjects(this._temp,o),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),t){case a.MOUSE_DOWN:r+=this.processDragDownEvent(o),r+=this.processDownEvents(o),r+=this.processOverOutEvents(o);break;case a.MOUSE_UP:r+=this.processDragUpEvent(o),r+=this.processUpEvents(o),r+=this.processOverOutEvents(o);break;case a.TOUCH_START:r+=this.processDragDownEvent(o),r+=this.processDownEvents(o),r+=this.processOverEvents(o);break;case a.TOUCH_END:case a.TOUCH_CANCEL:r+=this.processDragUpEvent(o),r+=this.processUpEvents(o),r+=this.processOutEvents(o);break;case a.MOUSE_MOVE:case a.TOUCH_MOVE:r+=this.processDragMoveEvent(o),r+=this.processMoveEvents(o),r+=this.processOverOutEvents(o);break;case a.MOUSE_WHEEL:r+=this.processWheelEvent(o)}0<r&&(n=!0)}return this._updatedThisFrame=!0,n},clear:function(t,e){void 0===e&&(e=!1);var i=t.input;if(i){e||this.queueForRemoval(t),i.gameObject=void 0,i.target=void 0,i.hitArea=void 0,i.hitAreaCallback=void 0,i.callbackContext=void 0,t.input=null;var n=this._draggable.indexOf(t);return-1<n&&this._draggable.splice(n,1),-1<(n=this._drag[0].indexOf(t))&&this._drag[0].splice(n,1),-1<(n=this._over[0].indexOf(t))&&(this._over[0].splice(n,1),this.manager.resetCursor(i)),t}},disable:function(t){t.input.enabled=!1},enable:function(t,e,i,n){return void 0===n&&(n=!1),t.input?t.input.enabled=!0:this.setHitArea(t,e,i),t.input&&n&&!t.input.dropZone&&(t.input.dropZone=n),this},hitTestPointer:function(t){for(var e=this.cameras.getCamerasBelowPointer(t),i=0;i<e.length;i++){for(var n=e[i],s=this.manager.hitTest(t,this._list,n),r=0;r<s.length;r++){var a=s[r];a.input.dropZone&&this._tempZones.push(a)}if(0<s.length)return t.camera=n,s}return t.camera=e[0],[]},processDownEvents:function(t){for(var e=0,i=this._temp,n=this._eventData,s=this._eventContainer,r=n.cancelled=!1,a=0;a<i.length;a++){var o=i[a];if(o.input){if(e++,o.emit(d.GAMEOBJECT_POINTER_DOWN,t,o.input.localX,o.input.localY,s),n.cancelled||!o.input){r=!0;break}if(this.emit(d.GAMEOBJECT_DOWN,t,o,s),n.cancelled||!o.input){r=!0;break}}}return!r&&this.manager&&(t.downElement===this.manager.game.canvas?this.emit(d.POINTER_DOWN,t,i):this.emit(d.POINTER_DOWN_OUTSIDE,t)),e},getDragState:function(t){return this._dragState[t.id]},setDragState:function(t,e){this._dragState[t.id]=e},processDragThresholdEvent:function(t,e){var i=!1,n=this.dragTimeThreshold,s=this.dragDistanceThreshold;if((0<s&&l(t.x,t.y,t.downX,t.downY)>=s||0<n&&e>=t.downTime+n)&&(i=!0),i)return this.setDragState(t,3),this.processDragStartList(t)},processDragStartList:function(t){if(3!==this.getDragState(t))return 0;for(var e=this._drag[t.id],i=0;i<e.length;i++){var n=e[i],s=n.input;s.dragState=2,s.dragStartX=n.x,s.dragStartY=n.y,s.dragStartXGlobal=t.worldX,s.dragStartYGlobal=t.worldY,s.dragX=s.dragStartXGlobal-s.dragStartX,s.dragY=s.dragStartYGlobal-s.dragStartY,n.emit(d.GAMEOBJECT_DRAG_START,t,s.dragX,s.dragY),this.emit(d.DRAG_START,t,n)}return this.setDragState(t,4),e.length},processDragDownEvent:function(t){var e=this._temp;if(0===this._draggable.length||0===e.length||!t.primaryDown||0!==this.getDragState(t))return 0;this.setDragState(t,1);for(var i=[],n=0;n<e.length;n++){var s=e[n];s.input.draggable&&0===s.input.dragState&&i.push(s)}return 0===i.length?(this.setDragState(t,0),0):(1<i.length&&(this.sortGameObjects(i,t),this.topOnly&&i.splice(1)),this._drag[t.id]=i,0===this.dragDistanceThreshold&&0===this.dragTimeThreshold?(this.setDragState(t,3),this.processDragStartList(t)):(this.setDragState(t,2),0))},processDragMoveEvent:function(t){if(2===this.getDragState(t)&&this.processDragThresholdEvent(t,this.manager.game.loop.now),4!==this.getDragState(t))return 0;for(var e=this._tempZones,i=this._drag[t.id],n=0;n<i.length;n++){var s,r,a,o,h,l,c,u,f=i[n],p=f.input,g=p.target;g?0===(s=e.indexOf(g))?(f.emit(d.GAMEOBJECT_DRAG_OVER,t,g),this.emit(d.DRAG_OVER,t,f,g)):0<s?(f.emit(d.GAMEOBJECT_DRAG_LEAVE,t,g),this.emit(d.DRAG_LEAVE,t,f,g),p.target=e[0],g=p.target,f.emit(d.GAMEOBJECT_DRAG_ENTER,t,g),this.emit(d.DRAG_ENTER,t,f,g)):(f.emit(d.GAMEOBJECT_DRAG_LEAVE,t,g),this.emit(d.DRAG_LEAVE,t,f,g),e[0]?(p.target=e[0],g=p.target,f.emit(d.GAMEOBJECT_DRAG_ENTER,t,g),this.emit(d.DRAG_ENTER,t,f,g)):p.target=null):!g&&e[0]&&(p.target=e[0],g=p.target,f.emit(d.GAMEOBJECT_DRAG_ENTER,t,g),this.emit(d.DRAG_ENTER,t,f,g)),a=f.parentContainer?(o=t.worldX-p.dragStartXGlobal,h=t.worldY-p.dragStartYGlobal,l=f.getParentRotation(),c=o*Math.cos(l)+h*Math.sin(l),u=h*Math.cos(l)-o*Math.sin(l),c*=1/f.parentContainer.scaleX,u*=1/f.parentContainer.scaleY,r=c+p.dragStartX,u+p.dragStartY):(r=t.worldX-p.dragX,t.worldY-p.dragY),f.emit(d.GAMEOBJECT_DRAG,t,r,a),this.emit(d.DRAG,t,f,r,a)}return i.length},processDragUpEvent:function(t){for(var e=this._drag[t.id],i=0;i<e.length;i++){var n,s,r=e[i],a=r.input;a&&2===a.dragState&&(a.dragState=0,a.dragX=a.localX-r.displayOriginX,a.dragY=a.localY-r.displayOriginY,n=!1,(s=a.target)&&(r.emit(d.GAMEOBJECT_DROP,t,s),this.emit(d.DROP,t,r,s),n=!(a.target=null)),r.input&&(r.emit(d.GAMEOBJECT_DRAG_END,t,a.dragX,a.dragY,n),this.emit(d.DRAG_END,t,r,n)))}return this.setDragState(t,0),e.splice(0),0},processMoveEvents:function(t){for(var e=0,i=this._temp,n=this._eventData,s=this._eventContainer,r=n.cancelled=!1,a=0;a<i.length;a++){var o=i[a];if(o.input){if(e++,o.emit(d.GAMEOBJECT_POINTER_MOVE,t,o.input.localX,o.input.localY,s),n.cancelled||!o.input){r=!0;break}if(this.emit(d.GAMEOBJECT_MOVE,t,o,s),n.cancelled||!o.input){r=!0;break}if(this.topOnly)break}}return r||this.emit(d.POINTER_MOVE,t,i),e},processWheelEvent:function(t){for(var e=0,i=this._temp,n=this._eventData,s=this._eventContainer,r=n.cancelled=!1,a=t.deltaX,o=t.deltaY,h=t.deltaZ,l=0;l<i.length;l++){var c=i[l];if(c.input){if(e++,c.emit(d.GAMEOBJECT_POINTER_WHEEL,t,a,o,h,s),n.cancelled||!c.input){r=!0;break}if(this.emit(d.GAMEOBJECT_WHEEL,t,c,a,o,h,s),n.cancelled||!c.input){r=!0;break}}}return r||this.emit(d.POINTER_WHEEL,t,i,a,o,h),e},processOverEvents:function(t){var e=this._temp,i=0,n=e.length,s=[];if(0<n){for(var r=this.manager,a=this._eventData,o=this._eventContainer,h=a.cancelled=!1,l=0;l<n;l++){var c=e[l];if(c.input){if(s.push(c),r.setCursor(c.input),c.emit(d.GAMEOBJECT_POINTER_OVER,t,c.input.localX,c.input.localY,o),i++,a.cancelled||!c.input){h=!0;break}if(this.emit(d.GAMEOBJECT_OVER,t,c,o),a.cancelled||!c.input){h=!0;break}}}h||this.emit(d.POINTER_OVER,t,s)}return this._over[t.id]=s,i},processOutEvents:function(t){var e=this._over[t.id],i=0,n=e.length;if(0<n){var s=this.manager,r=this._eventData,a=this._eventContainer,o=r.cancelled=!1;this.sortGameObjects(e,t);for(var h=0;h<n;h++){var l=e[h];if((l=e[h]).input){if(s.resetCursor(l.input),l.emit(d.GAMEOBJECT_POINTER_OUT,t,a),i++,r.cancelled||!l.input){o=!0;break}if(this.emit(d.GAMEOBJECT_OUT,t,l,a),r.cancelled||!l.input){o=!0;break}o||this.emit(d.POINTER_OUT,t,e)}}this._over[t.id]=[]}return i},processOverOutEvents:function(t){for(var e,i=this._temp,n=[],s=[],r=[],a=this._over[t.id],o=this._drag[t.id],h=this.manager,l=0;l<a.length;l++)e=a[l],-1===i.indexOf(e)&&-1===o.indexOf(e)?n.push(e):r.push(e);for(l=0;l<i.length;l++)e=i[l],-1===a.indexOf(e)&&s.push(e);var c=n.length,u=0,f=this._eventData,p=this._eventContainer,g=f.cancelled=!1;if(0<c){for(this.sortGameObjects(n,t),l=0;l<c;l++)if((e=n[l]).input){if(h.resetCursor(e.input),e.emit(d.GAMEOBJECT_POINTER_OUT,t,p),u++,f.cancelled||!e.input){g=!0;break}if(this.emit(d.GAMEOBJECT_OUT,t,e,p),f.cancelled||!e.input){g=!0;break}}g||this.emit(d.POINTER_OUT,t,n)}if(c=s.length,g=f.cancelled=!1,0<c){for(this.sortGameObjects(s,t),l=0;l<c;l++)if((e=s[l]).input){if(h.setCursor(e.input),e.emit(d.GAMEOBJECT_POINTER_OVER,t,e.input.localX,e.input.localY,p),u++,f.cancelled||!e.input){g=!0;break}if(this.emit(d.GAMEOBJECT_OVER,t,e,p),f.cancelled||!e.input){g=!0;break}}g||this.emit(d.POINTER_OVER,t,s)}return a=r.concat(s),this._over[t.id]=this.sortGameObjects(a,t),u},processUpEvents:function(t){for(var e=this._temp,i=this._eventData,n=this._eventContainer,s=i.cancelled=!1,r=0;r<e.length;r++){var a=e[r];if(a.input){if(a.emit(d.GAMEOBJECT_POINTER_UP,t,a.input.localX,a.input.localY,n),i.cancelled||!a.input){s=!0;break}if(this.emit(d.GAMEOBJECT_UP,t,a,n),i.cancelled||!a.input){s=!0;break}}}return!s&&this.manager&&(t.upElement===this.manager.game.canvas?this.emit(d.POINTER_UP,t,e):this.emit(d.POINTER_UP_OUTSIDE,t)),e.length},queueForInsertion:function(t){return-1===this._pendingInsertion.indexOf(t)&&-1===this._list.indexOf(t)&&this._pendingInsertion.push(t),this},queueForRemoval:function(t){return this._pendingRemoval.push(t),this},setDraggable:function(t,e){void 0===e&&(e=!0),Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var n=t[i];n.input.draggable=e;var s=this._draggable.indexOf(n);e&&-1===s?this._draggable.push(n):!e&&-1<s&&this._draggable.splice(s,1)}return this},makePixelPerfect:function(t){void 0===t&&(t=1);var e=this.systems.textures;return h(e,t)},setHitArea:function(t,e,i){if(void 0===e)return this.setHitAreaFromTexture(t);Array.isArray(t)||(t=[t]);var n,s,r=!1,a=!1,h=!1,l=!1,c=!1,u=!0;v(e)?(e=p(n=e,"hitArea",null),i=p(n,"hitAreaCallback",null),r=p(n,"draggable",!1),a=p(n,"dropZone",!1),h=p(n,"cursor",!1),l=p(n,"useHandCursor",!1),c=p(n,"pixelPerfect",!1),s=p(n,"alphaTolerance",1),c&&(e={},i=this.makePixelPerfect(s)),e&&i||(this.setHitAreaFromTexture(t),u=!1)):"function"!=typeof e||i||(i=e,e={});for(var d=0;d<t.length;d++){var f,g=t[d];c&&"Container"===g.type?console.warn("Cannot pixelPerfect test a Container. Use a custom callback."):((f=g.input?g.input:o(g,e,i)).customHitArea=u,f.dropZone=a,f.cursor=l?"pointer":h,g.input=f,r&&this.setDraggable(g),this.queueForInsertion(g))}return this},setHitAreaCircle:function(t,e,i,r,a){void 0===a&&(a=s);var o=new n(e,i,r);return this.setHitArea(t,o,a)},setHitAreaEllipse:function(t,e,i,n,s,r){void 0===r&&(r=u);var a=new c(e,i,n,s);return this.setHitArea(t,a,r)},setHitAreaFromTexture:function(t,e){void 0===e&&(e=x),Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var n=t[i],s=n.frame,r=0,a=0;n.width?(r=n.width,a=n.height):s&&(r=s.realWidth,a=s.realHeight),"Container"!==n.type||0!==r&&0!==a?0!==r&&0!==a&&(n.input=o(n,new _(0,0,r,a),e),this.queueForInsertion(n)):console.warn("Container.setInteractive must specify a Shape or call setSize() first")}return this},setHitAreaRectangle:function(t,e,i,n,s,r){void 0===r&&(r=x);var a=new _(e,i,n,s);return this.setHitArea(t,a,r)},setHitAreaTriangle:function(t,e,i,n,s,r,a,o){void 0===o&&(o=E);var h=new b(e,i,n,s,r,a);return this.setHitArea(t,h,o)},enableDebug:function(t,e){void 0===e&&(e=65280);var i=t.input;if(!i||!i.hitArea)return this;var n=i.hitArea,s=n.type,r=i.hitAreaDebug,a=this.systems.add,o=this.systems.updateList;r&&(o.remove(r),r.destroy(),r=null);var h=0,l=0;switch(s){case g.CIRCLE:r=a.arc(0,0,n.radius),h=n.x-n.radius,l=n.y-n.radius;break;case g.ELLIPSE:r=a.ellipse(0,0,n.width,n.height),h=n.x-n.width/2,l=n.y-n.height/2;break;case g.LINE:r=a.line(0,0,n.x1,n.y1,n.x2,n.y2);break;case g.POLYGON:r=a.polygon(0,0,n.points);break;case g.RECTANGLE:r=a.rectangle(0,0,n.width,n.height),h=n.x,l=n.y;break;case g.TRIANGLE:r=a.triangle(0,0,n.x1,n.y1,n.x2,n.y2,n.x3,n.y3)}return r&&(r.isFilled=!1,r.preUpdate=function(){r.setStrokeStyle(1/t.scale,e),r.setDisplayOrigin(t.displayOriginX,t.displayOriginY);var i,n=t.x,s=t.y,a=t.rotation,o=t.scaleX,c=t.scaleY;t.parentContainer&&(n=(i=t.getWorldTransformMatrix()).tx,s=i.ty,a=i.rotation,o=i.scaleX,c=i.scaleY),r.setRotation(a),r.setScale(o,c),r.setPosition(n+h,s+l),r.setScrollFactor(t.scrollFactorX,t.scrollFactorY),r.setDepth(t.depth)},o.add(r),i.hitAreaDebug=r),this},removeDebug:function(t){var e,i=t.input;return i&&i.hitAreaDebug&&(e=i.hitAreaDebug,this.systems.updateList.remove(e),e.destroy(),i.hitAreaDebug=null),this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(t){return this.pollRate=t,this._pollTimer=0,this},setGlobalTopOnly:function(t){return this.manager.globalTopOnly=t,this},setTopOnly:function(t){return this.topOnly=t,this},sortGameObjects:function(t,e){if(t.length<2)return t;var i=e.camera.renderList;return t.sort((function(t,e){return i.indexOf(e)-i.indexOf(t)}))},sortDropZones:function(t){return t.length<2?t:(this.scene.sys.depthSort(),t.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(t,e){if(t.parentContainer||e.parentContainer){if(t.parentContainer===e.parentContainer)return e.parentContainer.getIndex(e)-t.parentContainer.getIndex(t);if(t.parentContainer===e)return-1;if(e.parentContainer===t)return 1;for(var i=t.getIndexList(),n=e.getIndexList(),s=Math.min(i.length,n.length),r=0;r<s;r++){var a=i[r],o=n[r];if(a!==o)return o-a}return n.length-i.length}return this.displayList.getIndex(e)-this.displayList.getIndex(t)},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(t){return this.manager.addPointer(t)},setDefaultCursor:function(t){return this.manager.setDefaultCursor(t),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(d.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;for(var t=this._dragState.length=0;t<10;t++)this._drag[t]=[],this._over[t]=[];this.removeAllListeners();var e=this.manager;e.canvas.style.cursor=e.defaultCursor;var i=this.systems.events;i.off(w.TRANSITION_START,this.transitionIn,this),i.off(w.TRANSITION_OUT,this.transitionOut,this),i.off(w.TRANSITION_COMPLETE,this.transitionComplete,this),i.off(w.PRE_UPDATE,this.preUpdate,this),e.events.off(d.GAME_OUT,this.onGameOut,this),e.events.off(d.GAME_OVER,this.onGameOver,this),i.off(w.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(d.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(w.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});y.register("InputPlugin",T,"input"),t.exports=T},function(t,e,i){t.exports={Events:i(154),KeyboardManager:i(410),KeyboardPlugin:i(1330),Key:i(512),KeyCodes:i(143),KeyCombo:i(513),AdvanceKeyCombo:i(515),ProcessKeyCombo:i(514),ResetKeyCombo:i(516),JustDown:i(1332),JustUp:i(1333),DownDuration:i(1334),UpDuration:i(1335)}},function(t,e){t.exports="keydown"},function(t,e){t.exports="keyup"},function(t,e){t.exports="keycombomatch"},function(t,e){t.exports="down"},function(t,e){t.exports="keydown-"},function(t,e){t.exports="keyup-"},function(t,e){t.exports="up"},function(t,e,i){var n=i(0),s=i(9),r=i(154),a=i(22),o=i(6),h=i(51),l=i(153),c=i(512),u=i(143),d=i(513),f=i(1331),p=i(20),g=i(76),m=new n({Extends:s,initialize:function(t){s.call(this),this.game=t.systems.game,this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.manager=t.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,t.pluginEvents.once(h.BOOT,this.boot,this),t.pluginEvents.on(h.START,this.start,this)},boot:function(){var t=this.settings.input;this.enabled=o(t,"keyboard",!0);var e=o(t,"keyboard.capture",null);e&&this.addCaptures(e),this.sceneInputPlugin.pluginEvents.once(h.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(h.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(h.SHUTDOWN,this.shutdown,this),this.game.events.on(a.BLUR,this.resetKeys,this),this.scene.sys.events.on(p.PAUSE,this.resetKeys,this),this.scene.sys.events.on(p.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(t){return this.manager.addCapture(t),this},removeCapture:function(t){return this.manager.removeCapture(t),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:u.UP,down:u.DOWN,left:u.LEFT,right:u.RIGHT,space:u.SPACE,shift:u.SHIFT})},addKeys:function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1);var n={};if("string"==typeof t){t=t.split(",");for(var s=0;s<t.length;s++){var r=t[s].trim();r&&(n[r]=this.addKey(r,e,i))}}else for(var a in t)n[a]=this.addKey(t[a],e,i);return n},addKey:function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1);var n=this.keys;if(t instanceof c){var s=n.indexOf(t);return-1<s?n[s]=t:n[t.keyCode]=t,e&&this.addCapture(t.keyCode),t.setEmitOnRepeat(i),t}return"string"==typeof t&&(t=u[t.toUpperCase()]),n[t]||(n[t]=new c(this,t),e&&this.addCapture(t),n[t].setEmitOnRepeat(i)),n[t]},removeKey:function(t,e){void 0===e&&(e=!1);var i,n,s=this.keys;return t instanceof c?-1<(n=s.indexOf(t))&&(i=this.keys[n],this.keys[n]=void 0):"string"==typeof t&&(t=u[t.toUpperCase()]),s[t]&&(i=s[t],s[t]=void 0),i&&(i.plugin=null,e&&i.destroy()),this},removeAllKeys:function(t){for(var e=this.keys,i=0;i<e.length;i++){var n=e[i];n&&(e[i]=void 0,t&&n.destroy())}return this},createCombo:function(t,e){return new d(this,t,e)},checkDown:function(t,e){if(void 0===e&&(e=0),this.enabled&&t.isDown){var i=g(this.time-t.timeDown,e);if(i>t._tick)return t._tick=i,!0}return!1},update:function(){var t=this.manager.queue,e=t.length;if(this.isActive()&&0!==e)for(var i=this.keys,n=0;n<e;n++){var s=t[n],a=s.keyCode,o=i[a],h=!1;void 0===s.cancelled&&(s.cancelled=0,s.stopImmediatePropagation=function(){s.cancelled=1},s.stopPropagation=function(){s.cancelled=-1}),-1!==s.cancelled&&(a===this.prevCode&&s.timeStamp===this.prevTime&&s.type===this.prevType||(this.prevCode=a,this.prevTime=s.timeStamp,this.prevType=s.type,"keydown"===s.type?(o&&(h=o.isDown,o.onDown(s)),s.cancelled||o&&h||(f[a]&&this.emit(r.KEY_DOWN+f[a],s),s.cancelled||this.emit(r.ANY_KEY_DOWN,s))):(o&&o.onUp(s),s.cancelled||(f[a]&&this.emit(r.KEY_UP+f[a],s),s.cancelled||this.emit(r.ANY_KEY_UP,s))),1===s.cancelled&&(s.cancelled=0)))}},resetKeys:function(){for(var t=this.keys,e=0;e<t.length;e++)t[e]&&t[e].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(h.MANAGER_PROCESS,this.update,this),this.game.events.off(a.BLUR,this.resetKeys),this.scene.sys.events.off(p.PAUSE,this.resetKeys,this),this.scene.sys.events.off(p.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var t=this.keys,e=0;e<t.length;e++)t[e]&&t[e].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});l.register("KeyboardPlugin",m,"keyboard","keyboard","inputKeyboard"),t.exports=m},function(t,e,i){var n=i(143),s={};for(var r in n)s[n[r]]=r;t.exports=s},function(t,e){t.exports=function(t){return!!t._justDown&&!(t._justDown=!1)}},function(t,e){t.exports=function(t){return!!t._justUp&&!(t._justUp=!1)}},function(t,e){t.exports=function(t,e){void 0===e&&(e=50);var i=t.plugin.game.loop.time-t.timeDown;return t.isDown&&i<e}},function(t,e){t.exports=function(t,e){void 0===e&&(e=50);var i=t.plugin.game.loop.time-t.timeUp;return t.isUp&&i<e}},function(t,e,i){t.exports={MouseManager:i(411)}},function(t,e,i){t.exports={TouchManager:i(413)}},function(t,e,i){var n=i(21),s=i(17)(!1,s={Events:i(95),FileTypes:i(1339),File:i(23),FileTypesManager:i(8),GetURL:i(155),LoaderPlugin:i(1365),MergeXHRSettings:i(240),MultiFile:i(49),XHRLoader:i(517),XHRSettings:i(156)},n);t.exports=s},function(t,e,i){t.exports={AnimationJSONFile:i(1340),AsepriteFile:i(1341),AtlasJSONFile:i(1342),AtlasXMLFile:i(1343),AudioFile:i(518),AudioSpriteFile:i(1344),BinaryFile:i(1345),BitmapFontFile:i(1346),CSSFile:i(1347),GLSLFile:i(1348),HTML5AudioFile:i(519),HTMLFile:i(1349),HTMLTextureFile:i(1350),ImageFile:i(71),JSONFile:i(61),MultiAtlasFile:i(1351),MultiScriptFile:i(1352),OBJFile:i(1353),PackFile:i(1354),PluginFile:i(1355),SceneFile:i(1356),ScenePluginFile:i(1357),ScriptFile:i(520),SpriteSheetFile:i(1358),SVGFile:i(1359),TextFile:i(242),TilemapCSVFile:i(1360),TilemapImpactFile:i(1361),TilemapJSONFile:i(1362),UnityAtlasFile:i(1363),VideoFile:i(1364),XMLFile:i(241)}},function(t,e,i){var n=i(0),s=i(8),r=i(61),a=i(95),o=new n({Extends:r,initialize:function(t,e,i,n,s){r.call(this,t,e,i,n,s),this.type="animationJSON"},onProcess:function(){this.loader.once(a.POST_PROCESS,this.onLoadComplete,this),r.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});s.register("animation",(function(t,e,i,n){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new o(this,t[s]));else this.addFile(new o(this,t,e,n,i));return this})),t.exports=o},function(t,e,i){var n=i(0),s=i(8),r=i(2),a=i(71),o=i(7),h=i(61),l=i(49),c=new n({Extends:l,initialize:function(t,e,i,n,s,c){var u,d,f=o(e)?(e=r(d=e,"key"),u=new a(t,{key:e,url:r(d,"textureURL"),extension:r(d,"textureExtension","png"),normalMap:r(d,"normalMap"),xhrSettings:r(d,"textureXhrSettings")}),new h(t,{key:e,url:r(d,"atlasURL"),extension:r(d,"atlasExtension","json"),xhrSettings:r(d,"atlasXhrSettings")})):(u=new a(t,e,i,s),new h(t,e,n,c));u.linkFile?l.call(this,t,"atlasjson",e,[u,f,u.linkFile]):l.call(this,t,"atlasjson",e,[u,f])},addToCache:function(){var t,e,i;this.isReadyToProcess()&&(t=this.files[0],e=this.files[1],i=this.files[2]?this.files[2].data:null,this.loader.textureManager.addAtlas(t.key,t.data,e.data,i),e.addToCache(),this.complete=!0)}});s.register("aseprite",(function(t,e,i,n,s){var r;if(Array.isArray(t))for(var a=0;a<t.length;a++)r=new c(this,t[a]),this.addFile(r.files);else r=new c(this,t,e,i,n,s),this.addFile(r.files);return this})),t.exports=c},function(t,e,i){var n=i(0),s=i(8),r=i(2),a=i(71),o=i(7),h=i(61),l=i(49),c=new n({Extends:l,initialize:function(t,e,i,n,s,c){var u,d,f=o(e)?(e=r(d=e,"key"),u=new a(t,{key:e,url:r(d,"textureURL"),extension:r(d,"textureExtension","png"),normalMap:r(d,"normalMap"),xhrSettings:r(d,"textureXhrSettings")}),new h(t,{key:e,url:r(d,"atlasURL"),extension:r(d,"atlasExtension","json"),xhrSettings:r(d,"atlasXhrSettings")})):(u=new a(t,e,i,s),new h(t,e,n,c));u.linkFile?l.call(this,t,"atlasjson",e,[u,f,u.linkFile]):l.call(this,t,"atlasjson",e,[u,f])},addToCache:function(){var t,e,i;this.isReadyToProcess()&&(t=this.files[0],e=this.files[1],i=this.files[2]?this.files[2].data:null,this.loader.textureManager.addAtlas(t.key,t.data,e.data,i),e.pendingDestroy(),this.complete=!0)}});s.register("atlas",(function(t,e,i,n,s){var r;if(Array.isArray(t))for(var a=0;a<t.length;a++)r=new c(this,t[a]),this.addFile(r.files);else r=new c(this,t,e,i,n,s),this.addFile(r.files);return this})),t.exports=c},function(t,e,i){var n=i(0),s=i(8),r=i(2),a=i(71),o=i(7),h=i(49),l=i(241),c=new n({Extends:h,initialize:function(t,e,i,n,s,c){var u,d,f=o(e)?(e=r(d=e,"key"),u=new a(t,{key:e,url:r(d,"textureURL"),extension:r(d,"textureExtension","png"),normalMap:r(d,"normalMap"),xhrSettings:r(d,"textureXhrSettings")}),new l(t,{key:e,url:r(d,"atlasURL"),extension:r(d,"atlasExtension","xml"),xhrSettings:r(d,"atlasXhrSettings")})):(u=new a(t,e,i,s),new l(t,e,n,c));u.linkFile?h.call(this,t,"atlasxml",e,[u,f,u.linkFile]):h.call(this,t,"atlasxml",e,[u,f])},addToCache:function(){var t,e,i;this.isReadyToProcess()&&(t=this.files[0],e=this.files[1],i=this.files[2]?this.files[2].data:null,this.loader.textureManager.addAtlasXML(t.key,t.data,e.data,i),e.pendingDestroy(),this.complete=!0)}});s.register("atlasXML",(function(t,e,i,n,s){var r;if(Array.isArray(t))for(var a=0;a<t.length;a++)r=new c(this,t[a]),this.addFile(r.files);else r=new c(this,t,e,i,n,s),this.addFile(r.files);return this})),t.exports=c},function(t,e,i){var n=i(518),s=i(0),r=i(8),a=i(2),o=i(7),h=i(61),l=i(49),c=new s({Extends:l,initialize:function(t,e,i,s,r,c,u){var d,f,p;o(e)&&(e=a(d=e,"key"),i=a(d,"jsonURL"),s=a(d,"audioURL"),r=a(d,"audioConfig"),c=a(d,"audioXhrSettings"),u=a(d,"jsonXhrSettings")),s?(p=n.create(t,e,s,r,c))&&(f=new h(t,e,i,u),l.call(this,t,"audiosprite",e,[p,f]),this.config.resourceLoad=!1):(f=new h(t,e,i,u),l.call(this,t,"audiosprite",e,[f]),this.config.resourceLoad=!0,this.config.audioConfig=r,this.config.audioXhrSettings=c)},onFileComplete:function(t){var e,i,s,r;-1!==this.files.indexOf(t)&&(this.pending--,this.config.resourceLoad&&"json"===t.type&&t.data.hasOwnProperty("resources")&&(e=t.data.resources,i=a(this.config,"audioConfig"),s=a(this.config,"audioXhrSettings"),(r=n.create(this.loader,t.key,e,i,s))&&(this.addToMultiFile(r),this.loader.addFile(r))))},addToCache:function(){var t,e;this.isReadyToProcess()&&(t=this.files[0],e=this.files[1],t.addToCache(),e.addToCache(),this.complete=!0)}});r.register("audioSprite",(function(t,e,i,n,s,r){var a,o=this.systems.game,h=o.config.audio,l=o.device.audio;if(h&&h.noAudio||!l.webAudio&&!l.audioData)return this;if(Array.isArray(t))for(var u=0;u<t.length;u++)(a=new c(this,t[u])).files&&this.addFile(a.files);else(a=new c(this,t,e,i,n,s,r)).files&&this.addFile(a.files);return this}))},function(t,e,i){var n=i(0),s=i(21),r=i(23),a=i(8),o=i(2),h=i(7),l=new n({Extends:r,initialize:function(t,e,i,n,s){var a,l="bin";h(e)&&(e=o(a=e,"key"),i=o(a,"url"),n=o(a,"xhrSettings"),l=o(a,"extension",l),s=o(a,"dataType",s));var c={type:"binary",cache:t.cacheManager.binary,extension:l,responseType:"arraybuffer",key:e,url:i,xhrSettings:n,config:{dataType:s}};r.call(this,t,c)},onProcess:function(){this.state=s.FILE_PROCESSING;var t=this.config.dataType;this.data=t?new t(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});a.register("binary",(function(t,e,i,n){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new l(this,t[s]));else this.addFile(new l(this,t,e,n,i));return this})),t.exports=l},function(t,e,i){var n=i(0),s=i(8),r=i(2),a=i(71),o=i(7),h=i(49),l=i(212),c=i(241),u=new n({Extends:h,initialize:function(t,e,i,n,s,l){var u,d,f=o(e)?(e=r(d=e,"key"),u=new a(t,{key:e,url:r(d,"textureURL"),extension:r(d,"textureExtension","png"),normalMap:r(d,"normalMap"),xhrSettings:r(d,"textureXhrSettings")}),new c(t,{key:e,url:r(d,"fontDataURL"),extension:r(d,"fontDataExtension","xml"),xhrSettings:r(d,"fontDataXhrSettings")})):(u=new a(t,e,i,s),new c(t,e,n,l));u.linkFile?h.call(this,t,"bitmapfont",e,[u,f,u.linkFile]):h.call(this,t,"bitmapfont",e,[u,f])},addToCache:function(){var t,e,i,n;this.isReadyToProcess()&&(t=this.files[0],e=this.files[1],t.addToCache(),e.pendingDestroy(),i=t.cache.get(t.key),n=l(e.data,t.cache.getFrame(t.key),0,0,i),this.loader.cacheManager.bitmapFont.add(t.key,{data:n,texture:t.key,frame:null}),this.complete=!0)}});s.register("bitmapFont",(function(t,e,i,n,s){var r;if(Array.isArray(t))for(var a=0;a<t.length;a++)r=new u(this,t[a]),this.addFile(r.files);else r=new u(this,t,e,i,n,s),this.addFile(r.files);return this})),t.exports=u},function(t,e,i){var n=i(0),s=i(21),r=i(23),a=i(8),o=i(2),h=i(7),l=new n({Extends:r,initialize:function(t,e,i,n){var s,a="css";h(e)&&(e=o(s=e,"key"),i=o(s,"url"),n=o(s,"xhrSettings"),a=o(s,"extension",a));var l={type:"script",cache:!1,extension:a,responseType:"text",key:e,url:i,xhrSettings:n};r.call(this,t,l)},onProcess:function(){this.state=s.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});a.register("css",(function(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new l(this,t[n]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},function(t,e,i){var n=i(0),s=i(21),r=i(23),a=i(8),o=i(2),h=i(7),l=i(396),c=new n({Extends:r,initialize:function(t,e,i,n,s){var a,l="glsl";h(e)?(e=o(a=e,"key"),i=o(a,"url"),n=o(a,"shaderType","fragment"),s=o(a,"xhrSettings"),l=o(a,"extension",l)):void 0===n&&(n="fragment");var c={type:"glsl",cache:t.cacheManager.shader,extension:l,responseType:"text",key:e,url:i,config:{shaderType:n},xhrSettings:s};r.call(this,t,c)},onProcess:function(){this.state=s.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t=this.data.split("\n"),e=this.extractBlock(t,0);if(e)for(;e;){var i,n=this.getShaderName(e.header),s=this.getShaderType(e.header),r=this.getShaderUniforms(e.header),a=e.shader;this.cache.has(n)?(i=this.cache.get(n),"fragment"===s?i.fragmentSrc=a:i.vertexSrc=a,i.uniforms||(i.uniforms=r)):"fragment"===s?this.cache.add(n,new l(n,a,"",r)):this.cache.add(n,new l(n,"",a,r)),e=this.extractBlock(t,e.offset)}else"fragment"===this.config.shaderType?this.cache.add(this.key,new l(this.key,this.data)):this.cache.add(this.key,new l(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(t){for(var e=0;e<t.length;e++){var i=t[e].trim();if("name:"===i.substring(0,5))return i.substring(5).trim()}return this.key},getShaderType:function(t){for(var e=0;e<t.length;e++){var i=t[e].trim();if("type:"===i.substring(0,5))return i.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(t){for(var e={},i=0;i<t.length;i++){var n=t[i].trim();if("uniform."===n.substring(0,8)){var s=n.indexOf(":");if(s){var r=n.substring(8,s);try{e[r]=JSON.parse(n.substring(s+1))}catch(t){console.warn("Invalid uniform JSON: "+r)}}}}return e},extractBlock:function(t,e){for(var i=-1,n=-1,s=-1,r=!1,a=!1,o=[],h=[],l=e;l<t.length;l++){var c=t[l].trim();if("---"===c)if(-1===i)i=l,r=!0;else{if(!r){a=!1;break}n=l,a=!(r=!1)}else r?o.push(c):a&&(h.push(c),s=l)}return r||-1===n?null:{header:o,shader:h.join("\n"),offset:s}}});a.register("glsl",(function(t,e,i,n){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new c(this,t[s]));else this.addFile(new c(this,t,e,i,n));return this})),t.exports=c},function(t,e,i){var n=i(0),s=i(21),r=i(23),a=i(8),o=i(2),h=i(7),l=new n({Extends:r,initialize:function(t,e,i,n){var s,a="html";h(e)&&(e=o(s=e,"key"),i=o(s,"url"),n=o(s,"xhrSettings"),a=o(s,"extension",a));var l={type:"text",cache:t.cacheManager.html,extension:a,responseType:"text",key:e,url:i,xhrSettings:n};r.call(this,t,l)},onProcess:function(){this.state=s.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});a.register("html",(function(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new l(this,t[n]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},function(t,e,i){var n=i(0),s=i(21),r=i(23),a=i(8),o=i(2),h=i(7),l=new n({Extends:r,initialize:function(t,e,i,n,s,a){void 0===n&&(n=512),void 0===s&&(s=512);var l,c="html";h(e)&&(e=o(l=e,"key"),i=o(l,"url"),a=o(l,"xhrSettings"),c=o(l,"extension",c),n=o(l,"width",n),s=o(l,"height",s));var u={type:"html",cache:t.textureManager,extension:c,responseType:"text",key:e,url:i,xhrSettings:a,config:{width:n,height:s}};r.call(this,t,u)},onProcess:function(){this.state=s.FILE_PROCESSING;var t=this.config.width,e=this.config.height,i=[];i.push('<svg width="'+t+'px" height="'+e+'px" viewBox="0 0 '+t+" "+e+'" xmlns="http://www.w3.org/2000/svg">'),i.push('<foreignObject width="100%" height="100%">'),i.push('<body xmlns="http://www.w3.org/1999/xhtml">'),i.push(this.xhrLoader.responseText),i.push("</body>"),i.push("</foreignObject>"),i.push("</svg>");var n=[i.join("\n")],a=this;try{var o=new window.Blob(n,{type:"image/svg+xml;charset=utf-8"})}catch(t){return a.state=s.FILE_ERRORED,void a.onProcessComplete()}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){r.revokeObjectURL(a.data),a.onProcessComplete()},this.data.onerror=function(){r.revokeObjectURL(a.data),a.onProcessError()},r.createObjectURL(this.data,o,"image/svg+xml")},addToCache:function(){var t=this.cache.addImage(this.key,this.data);this.pendingDestroy(t)}});a.register("htmlTexture",(function(t,e,i,n,s){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new l(this,t[r]));else this.addFile(new l(this,t,e,i,n,s));return this})),t.exports=l},function(t,e,i){var n=i(0),s=i(8),r=i(2),a=i(71),o=i(7),h=i(61),l=i(49),c=new n({Extends:l,initialize:function(t,e,i,n,s,a,c){var u;o(e)&&(e=r(u=e,"key"),i=r(u,"url",!1)?r(u,"url"):r(u,"atlasURL"),a=r(u,"xhrSettings"),n=r(u,"path"),s=r(u,"baseURL"),c=r(u,"textureXhrSettings"));var d=new h(t,e,i,a);l.call(this,t,"multiatlas",e,[d]),this.config.path=n,this.config.baseURL=s,this.config.textureXhrSettings=c},onFileComplete:function(t){if(-1!==this.files.indexOf(t)&&(this.pending--,"json"===t.type&&t.data.hasOwnProperty("textures"))){var e=t.data.textures,i=this.config,n=this.loader,s=n.baseURL,o=n.path,h=n.prefix,l=r(i,"baseURL",this.baseURL),c=r(i,"path",this.path),u=r(i,"prefix",this.prefix),d=r(i,"textureXhrSettings");n.setBaseURL(l),n.setPath(c),n.setPrefix(u);for(var f=0;f<e.length;f++){var p,g=e[f].image,m="MA"+this.multiKeyIndex+"_"+g,v=new a(n,m,g,d);this.addToMultiFile(v),n.addFile(v),e[f].normalMap&&((p=new a(n,m,e[f].normalMap,d)).type="normalMap",v.setLink(p),this.addToMultiFile(p),n.addFile(p))}n.setBaseURL(s),n.setPath(o),n.setPrefix(h)}},addToCache:function(){if(this.isReadyToProcess()){for(var t=this.files[0],e=[],i=[],n=[],s=1;s<this.files.length;s++){var r=this.files[s];if("normalMap"!==r.type)for(var a=r.key.indexOf("_"),o=r.key.substr(a+1),h=r.data,l=0;l<t.data.textures.length;l++){var c=t.data.textures[l];if(c.image===o){i.push(h),e.push(c),r.linkFile&&n.push(r.linkFile.data);break}}}for(0===n.length&&(n=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,i,e,n),this.complete=!0,s=0;s<this.files.length;s++)this.files[s].pendingDestroy()}}});s.register("multiatlas",(function(t,e,i,n,s){var r;if(Array.isArray(t))for(var a=0;a<t.length;a++)r=new c(this,t[a]),this.addFile(r.files);else r=new c(this,t,e,i,n,s),this.addFile(r.files);return this})),t.exports=c},function(t,e,i){var n=i(0),s=i(8),r=i(2),a=i(7),o=i(49),h=i(520),l=new n({Extends:o,initialize:function(t,e,i,n){var s,l="js",c=[];a(e)&&(e=r(s=e,"key"),i=r(s,"url"),n=r(s,"xhrSettings"),l=r(s,"extension",l)),Array.isArray(i)||(i=[i]);for(var u=0;u<i.length;u++){var d=new h(t,{key:e+"_"+u.toString(),url:i[u],extension:l,xhrSettings:n});d.onProcess=function(){this.onProcessComplete()},c.push(d)}o.call(this,t,"scripts",e,c)},addToCache:function(){if(this.isReadyToProcess()){for(var t=0;t<this.files.length;t++){var e=this.files[t];e.data=document.createElement("script"),e.data.language="javascript",e.data.type="text/javascript",e.data.defer=!1,e.data.text=e.xhrLoader.responseText,document.head.appendChild(e.data)}this.complete=!0}}});s.register("scripts",(function(t,e,i){var n;if(Array.isArray(t))for(var s=0;s<t.length;s++)n=new l(this,t[s]),this.addFile(n.files);else n=new l(this,t,e,i),this.addFile(n.files);return this})),t.exports=l},function(t,e,i){var n=i(0),s=i(8),r=i(2),a=i(7),o=i(49),h=i(498),l=i(499),c=i(242),u=new n({Extends:o,initialize:function(t,e,i,n,s,h){var l,u,d,f=t.cacheManager.obj;a(e)?(e=r(d=e,"key"),l=new c(t,{key:e,type:"obj",cache:f,url:r(d,"url"),extension:r(d,"extension","obj"),xhrSettings:r(d,"xhrSettings"),config:{flipUV:r(d,"flipUV",s)}}),(n=r(d,"matURL"))&&(u=new c(t,{key:e,type:"mat",cache:f,url:n,extension:r(d,"matExtension","mat"),xhrSettings:r(d,"xhrSettings")}))):(l=new c(t,{key:e,url:i,type:"obj",cache:f,extension:"obj",xhrSettings:h,config:{flipUV:s}}),n&&(u=new c(t,{key:e,url:n,type:"mat",cache:f,extension:"mat",xhrSettings:h}))),o.call(this,t,"obj",e,[l,u])},addToCache:function(){var t,e,i;this.isReadyToProcess()&&(t=this.files[0],e=this.files[1],i=h(t.data,t.config.flipUV),e&&(i.materials=l(e.data)),t.cache.add(t.key,i),this.complete=!0)}});s.register("obj",(function(t,e,i,n,s){var r;if(Array.isArray(t))for(var a=0;a<t.length;a++)r=new u(this,t[a]),this.addFile(r.files);else r=new u(this,t,e,i,n,s),this.addFile(r.files);return this})),t.exports=u},function(t,e,i){var n=i(0),s=i(21),r=i(8),a=i(61),o=new n({Extends:a,initialize:function(t,e,i,n,s){a.call(this,t,e,i,n,s),this.type="packfile"},onProcess:function(){this.state!==s.FILE_POPULATED&&(this.state=s.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});r.register("pack",(function(t,e,i,n){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new o(this,t[s]));else this.addFile(new o(this,t,e,n,i));return this})),t.exports=o},function(t,e,i){var n=i(0),s=i(21),r=i(23),a=i(8),o=i(2),h=i(7),l=new n({Extends:r,initialize:function(t,e,i,n,a,l){var c,u="js";h(e)&&(e=o(c=e,"key"),i=o(c,"url"),l=o(c,"xhrSettings"),u=o(c,"extension",u),n=o(c,"start"),a=o(c,"mapping"));var d={type:"plugin",cache:!1,extension:u,responseType:"text",key:e,url:i,xhrSettings:l,config:{start:n,mapping:a}};r.call(this,t,d),"function"==typeof i&&(this.data=i,this.state=s.FILE_POPULATED)},onProcess:function(){var t,e=this.loader.systems.plugins,i=this.config,n=o(i,"start",!1),r=o(i,"mapping",null);this.state===s.FILE_POPULATED?e.install(this.key,this.data,n,r):(this.state=s.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),t=e.install(this.key,window[this.key],n,r),(n||r)&&(this.loader.systems[r]=t,this.loader.scene[r]=t)),this.onProcessComplete()}});a.register("plugin",(function(t,e,i,n,s){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new l(this,t[r]));else this.addFile(new l(this,t,e,i,n,s));return this})),t.exports=l},function(t,e,i){var n=i(0),s=i(21),r=i(23),a=i(8),o=i(2),h=i(7),l=new n({Extends:r,initialize:function(t,e,i,n){var s,a="js";h(e)&&(e=o(s=e,"key"),i=o(s,"url"),n=o(s,"xhrSettings"),a=o(s,"extension",a));var l={type:"text",extension:a,responseType:"text",key:e,url:i,xhrSettings:n};r.call(this,t,l)},onProcess:function(){this.state=s.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t=this.data.concat("(function(){\nreturn new "+this.key+"();\n}).call(this);"),e=eval;this.loader.sceneManager.add(this.key,e(t)),this.complete=!0}});a.register("sceneFile",(function(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new l(this,t[n]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},function(t,e,i){var n=i(0),s=i(21),r=i(23),a=i(8),o=i(2),h=i(7),l=new n({Extends:r,initialize:function(t,e,i,n,a,l){var c,u="js";h(e)&&(e=o(c=e,"key"),i=o(c,"url"),l=o(c,"xhrSettings"),u=o(c,"extension",u),n=o(c,"systemKey"),a=o(c,"sceneKey"));var d={type:"scenePlugin",cache:!1,extension:u,responseType:"text",key:e,url:i,xhrSettings:l,config:{systemKey:n,sceneKey:a}};r.call(this,t,d),"function"==typeof i&&(this.data=i,this.state=s.FILE_POPULATED)},onProcess:function(){var t=this.loader.systems.plugins,e=this.config,i=this.key,n=o(e,"systemKey",i),r=o(e,"sceneKey",i);this.state===s.FILE_POPULATED?t.installScenePlugin(n,this.data,r,this.loader.scene,!0):(this.state=s.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),t.installScenePlugin(n,window[this.key],r,this.loader.scene,!0)),this.onProcessComplete()}});a.register("scenePlugin",(function(t,e,i,n,s){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new l(this,t[r]));else this.addFile(new l(this,t,e,i,n,s));return this})),t.exports=l},function(t,e,i){var n=i(0),s=i(8),r=i(71),a=new n({Extends:r,initialize:function(t,e,i,n,s){r.call(this,t,e,i,s,n),this.type="spritesheet"},addToCache:function(){var t=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(t)}});s.register("spritesheet",(function(t,e,i,n){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new a(this,t[s]));else this.addFile(new a(this,t,e,i,n));return this})),t.exports=a},function(t,e,i){var n=i(0),s=i(21),r=i(23),a=i(8),o=i(2),h=i(7),l=new n({Extends:r,initialize:function(t,e,i,n,s){var a,l="svg";h(e)&&(e=o(a=e,"key"),i=o(a,"url"),n=o(a,"svgConfig",{}),s=o(a,"xhrSettings"),l=o(a,"extension",l));var c={type:"svg",cache:t.textureManager,extension:l,responseType:"text",key:e,url:i,xhrSettings:s,config:{width:o(n,"width"),height:o(n,"height"),scale:o(n,"scale")}};r.call(this,t,c)},onProcess:function(){this.state=s.FILE_PROCESSING;var t=this.xhrLoader.responseText,e=[t],i=this.config.width,n=this.config.height,a=this.config.scale;t:if(i&&n||a){var o,h=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("svg")[0],l=h.hasAttribute("viewBox"),c=parseFloat(h.getAttribute("width")),u=parseFloat(h.getAttribute("height"));if(!l&&c&&u?h.setAttribute("viewBox","0  0 "+c+" "+u):!l||c||u||(c=(o=h.getAttribute("viewBox").split(/\s+|,/))[2],u=o[3]),a){if(!c||!u)break t;i=c*a,n=u*a}h.setAttribute("width",i.toString()+"px"),h.setAttribute("height",n.toString()+"px"),e=[(new XMLSerializer).serializeToString(h)]}try{var d=new window.Blob(e,{type:"image/svg+xml;charset=utf-8"})}catch(t){return void this.onProcessError()}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var f=this,p=!1;this.data.onload=function(){p||r.revokeObjectURL(f.data),f.onProcessComplete()},this.data.onerror=function(){p?f.onProcessError():(p=!0,r.revokeObjectURL(f.data),f.data.src="data:image/svg+xml,"+encodeURIComponent(e.join("")))},r.createObjectURL(this.data,d,"image/svg+xml")},addToCache:function(){var t=this.cache.addImage(this.key,this.data);this.pendingDestroy(t)}});a.register("svg",(function(t,e,i,n){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new l(this,t[s]));else this.addFile(new l(this,t,e,i,n));return this})),t.exports=l},function(t,e,i){var n=i(0),s=i(21),r=i(23),a=i(8),o=i(2),h=i(7),l=i(40),c=new n({Extends:r,initialize:function(t,e,i,n){var s,a="csv";h(e)&&(e=o(s=e,"key"),i=o(s,"url"),n=o(s,"xhrSettings"),a=o(s,"extension",a));var c={type:"tilemapCSV",cache:t.cacheManager.tilemap,extension:a,responseType:"text",key:e,url:i,xhrSettings:n};r.call(this,t,c),this.tilemapFormat=l.CSV},onProcess:function(){this.state=s.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});a.register("tilemapCSV",(function(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new c(this,t[n]));else this.addFile(new c(this,t,e,i));return this})),t.exports=c},function(t,e,i){var n=i(0),s=i(8),r=i(61),a=i(40),o=new n({Extends:r,initialize:function(t,e,i,n){r.call(this,t,e,i,n),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function(){var t={format:a.WELTMEISTER,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});s.register("tilemapImpact",(function(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new o(this,t[n]));else this.addFile(new o(this,t,e,i));return this})),t.exports=o},function(t,e,i){var n=i(0),s=i(8),r=i(61),a=i(40),o=new n({Extends:r,initialize:function(t,e,i,n){r.call(this,t,e,i,n),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function(){var t={format:a.TILED_JSON,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});s.register("tilemapTiledJSON",(function(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new o(this,t[n]));else this.addFile(new o(this,t,e,i));return this})),t.exports=o},function(t,e,i){var n=i(0),s=i(8),r=i(2),a=i(71),o=i(7),h=i(49),l=i(242),c=new n({Extends:h,initialize:function(t,e,i,n,s,c){var u,d,f=o(e)?(e=r(d=e,"key"),u=new a(t,{key:e,url:r(d,"textureURL"),extension:r(d,"textureExtension","png"),normalMap:r(d,"normalMap"),xhrSettings:r(d,"textureXhrSettings")}),new l(t,{key:e,url:r(d,"atlasURL"),extension:r(d,"atlasExtension","txt"),xhrSettings:r(d,"atlasXhrSettings")})):(u=new a(t,e,i,s),new l(t,e,n,c));u.linkFile?h.call(this,t,"unityatlas",e,[u,f,u.linkFile]):h.call(this,t,"unityatlas",e,[u,f])},addToCache:function(){var t,e,i;this.isReadyToProcess()&&(t=this.files[0],e=this.files[1],i=this.files[2]?this.files[2].data:null,this.loader.textureManager.addUnityAtlas(t.key,t.data,e.data,i),e.pendingDestroy(),this.complete=!0)}});s.register("unityAtlas",(function(t,e,i,n,s){var r;if(Array.isArray(t))for(var a=0;a<t.length;a++)r=new c(this,t[a]),this.addFile(r.files);else r=new c(this,t,e,i,n,s),this.addFile(r.files);return this})),t.exports=c},function(t,e,i){var n=i(0),s=i(21),r=i(23),a=i(8),o=i(155),h=i(2),l=i(7),c=new n({Extends:r,initialize:function(t,e,i,n,s,a,o){void 0===n&&(n="loadeddata"),void 0===s&&(s=!1),void 0===a&&(a=!1),"loadeddata"!==n&&"canplay"!==n&&"canplaythrough"!==n&&(n="loadeddata");var h={type:"video",cache:t.cacheManager.video,extension:i.type,responseType:"blob",key:e,url:i.url,xhrSettings:o,config:{loadEvent:n,asBlob:s,noAudio:a}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),r.call(this,t,h)},onProcess:function(){var t,e;this.state=s.FILE_PROCESSING,this.config.asBlob?(t=this.createVideoElement(),this.data=t,(e=this).data.onloadeddata=function(){e.onProcessComplete()},this.data.onerror=function(){r.revokeObjectURL(e.data),e.onProcessError()},r.createObjectURL(t,this.xhrLoader.response,""),t.load()):this.onProcessComplete()},createVideoElement:function(){var t=document.createElement("video");return t.controls=!1,t.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(t.muted=!0,t.defaultMuted=!0,t.setAttribute("autoplay","autoplay")),t.setAttribute("playsinline","playsinline"),t.setAttribute("preload","auto"),t},onVideoLoadHandler:function(t){var e=t.target;e.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),e.removeEventListener("error",this.onErrorCallback,!0),this.data=e,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(t){var e=t.target;e&&(e.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),e.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var t,e=this.config.loadEvent;this.config.asBlob?r.prototype.load.call(this):(this.percentComplete=0,(t=this.createVideoElement()).addEventListener(e,this.onLoadCallback,!0),t.addEventListener("error",this.onErrorCallback,!0),t.src=o(this,this.loader.baseURL),t.load())}});c.create=function(t,e,i,n,s,r,a){var o=t.systems.game;l(e)&&(i=h(e,"url",[]),n=h(e,"loadEvent","loadeddata"),s=h(e,"asBlob",!1),r=h(e,"noAudio",!1),a=h(e,"xhrSettings"),e=h(e,"key"));var u=c.getVideoURL(o,i);if(u)return new c(t,e,u,n,s,r,a)},c.getVideoURL=function(t,e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var n,s=h(e[i],"url",e[i]);if(0===s.indexOf("blob:"))return{url:s,type:""};if(n=0===s.indexOf("data:")?s.split(",")[0].match(/\/(.*?);/):s.match(/\.([a-zA-Z0-9]+)($|\?)/),n=h(e[i],"type",n?n[1]:"").toLowerCase(),t.device.video[n])return{url:s,type:n}}return null},a.register("video",(function(t,e,i,n,s,r){var a;if(Array.isArray(t))for(var o=0;o<t.length;o++)(a=c.create(this,t[o]))&&this.addFile(a);else(a=c.create(this,t,e,i,n,s,r))&&this.addFile(a);return this})),t.exports=c},function(t,e,i){var n=i(0),s=i(21),r=i(149),a=i(9),o=i(95),h=i(8),l=i(2),c=i(24),u=i(20),d=i(156),f=new n({Extends:a,initialize:function(t){a.call(this);var e=t.sys.game.config,i=t.sys.settings.loader;this.scene=t,this.systems=t.sys,this.cacheManager=t.sys.cache,this.textureManager=t.sys.textures,this.sceneManager=t.sys.game.scene,h.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(l(i,"baseURL",e.loaderBaseURL)),this.setPath(l(i,"path",e.loaderPath)),this.setPrefix(l(i,"prefix",e.loaderPrefix)),this.maxParallelDownloads=l(i,"maxParallelDownloads",e.loaderMaxParallelDownloads),this.xhr=d(l(i,"responseType",e.loaderResponseType),l(i,"async",e.loaderAsync),l(i,"user",e.loaderUser),l(i,"password",e.loaderPassword),l(i,"timeout",e.loaderTimeout),l(i,"withCredentials",e.loaderWithCredentials)),this.crossOrigin=l(i,"crossOrigin",e.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new r,this.inflight=new r,this.queue=new r,this._deleteQueue=new r,this.totalFailed=0,this.totalComplete=0,this.state=s.LOADER_IDLE,this.multiKeyIndex=0,t.sys.events.once(u.BOOT,this.boot,this),t.sys.events.on(u.START,this.pluginStart,this)},boot:function(){this.systems.events.once(u.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(u.SHUTDOWN,this.shutdown,this)},setBaseURL:function(t){return void 0===t&&(t=""),""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.baseURL=t,this},setPath:function(t){return void 0===t&&(t=""),""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.path=t,this},setPrefix:function(t){return void 0===t&&(t=""),this.prefix=t,this},setCORS:function(t){return this.crossOrigin=t,this},addFile:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=t[e];this.keyExists(i)||(this.list.set(i),this.emit(o.ADD,i.key,i.type,this,i),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(t){var e=t.hasCacheConflict();return e||this.list.iterate((function(i){if(i.type===t.type&&i.key===t.key)return!(e=!0)})),!e&&this.isLoading()&&(this.inflight.iterate((function(i){if(i.type===t.type&&i.key===t.key)return!(e=!0)})),this.queue.iterate((function(i){if(i.type===t.type&&i.key===t.key)return!(e=!0)}))),e},addPack:function(t,e){e&&t.hasOwnProperty(e)&&(t={packKey:t[e]});var i=0,n=this.baseURL,s=this.path,r=this.prefix;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var o=t[a],h=l(o,"baseURL",n),c=l(o,"path",s),u=l(o,"prefix",r),d=l(o,"files",null),f=l(o,"defaultType","void");if(Array.isArray(d)){this.setBaseURL(h),this.setPath(c),this.setPrefix(u);for(var p=0;p<d.length;p++){var g=d[p],m=g.hasOwnProperty("type")?g.type:f;this[m]&&(this[m](g),i++)}}}return this.setBaseURL(n),this.setPath(s),this.setPrefix(r),0<i},isLoading:function(){return this.state===s.LOADER_LOADING||this.state===s.LOADER_PROCESSING},isReady:function(){return this.state===s.LOADER_IDLE||this.state===s.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(o.START,this),0===this.list.size?this.loadComplete():(this.state=s.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(u.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(o.PROGRESS,this.progress)},update:function(){this.state===s.LOADER_LOADING&&0<this.list.size&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each((function(t){if((t.state===s.FILE_POPULATED||t.state===s.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(t),this.list.delete(t),t.crossOrigin||(t.crossOrigin=this.crossOrigin),t.load()),this.inflight.size===this.maxParallelDownloads)return!1}),this)},nextFile:function(t,e){this.inflight&&(this.inflight.delete(t),this.updateProgress(),e?(this.totalComplete++,this.queue.set(t),this.emit(o.FILE_LOAD,t),t.onProcess()):(this.totalFailed++,this._deleteQueue.set(t),this.emit(o.FILE_LOAD_ERROR,t),this.fileProcessComplete(t)))},fileProcessComplete:function(t){this.scene&&this.systems&&this.systems.game&&!this.systems.game.pendingDestroy&&(t.state===s.FILE_ERRORED?t.multiFile&&t.multiFile.onFileFailed(t):t.state===s.FILE_COMPLETE&&(t.multiFile?t.multiFile.isReadyToProcess()&&t.multiFile.addToCache():t.addToCache()),this.queue.delete(t),0===this.list.size&&0===this.inflight.size&&0===this.queue.size&&this.loadComplete())},loadComplete:function(){this.emit(o.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=s.LOADER_COMPLETE,this.systems.events.off(u.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(o.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(t){this._deleteQueue.set(t)},saveJSON:function(t,e){return this.save(JSON.stringify(t),e)},save:function(t,e,i){void 0===e&&(e="file.json"),void 0===i&&(i="application/json");var n=new Blob([t],{type:i}),s=URL.createObjectURL(n),r=document.createElement("a");return r.download=e,r.textContent="Download "+e,r.href=s,r.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var t=this.systems.game.config,e=this.systems.settings.loader;this.setBaseURL(l(e,"baseURL",t.loaderBaseURL)),this.setPath(l(e,"path",t.loaderPath)),this.setPrefix(l(e,"prefix",t.loaderPrefix)),this.state=s.LOADER_IDLE},shutdown:function(){this.reset(),this.state=s.LOADER_SHUTDOWN,this.systems.events.off(u.UPDATE,this.update,this),this.systems.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=s.LOADER_DESTROYED,this.systems.events.off(u.UPDATE,this.update,this),this.systems.events.off(u.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});c.register("Loader",f,"load"),t.exports=f},function(t,e,i){var n=i(62),s=i(17)(!1,s={ArcadePhysics:i(1367),Body:i(527),Collider:i(528),Components:i(243),Events:i(245),Factory:i(521),GetOverlapX:i(246),GetOverlapY:i(247),SeparateX:i(537),SeparateY:i(538),Group:i(524),Image:i(522),Sprite:i(157),StaticBody:i(539),StaticGroup:i(525),Tilemap:i(1391),World:i(526)},n);t.exports=s},function(t,e,i){var n=i(0),s=i(36),r=i(50),a=i(353),o=i(521),h=i(2),l=i(127),c=i(523),u=i(244),d=i(24),f=i(20),p=i(3),g=i(526),m=new n({initialize:function(t){this.scene=t,this.systems=t.sys,this.config=this.getConfig(),this.world,this.add,t.sys.events.once(f.BOOT,this.boot,this),t.sys.events.on(f.START,this.start,this)},boot:function(){this.world=new g(this.scene,this.config),this.add=new o(this.world),this.systems.events.once(f.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new g(this.scene,this.config),this.add=new o(this.world));var t=this.systems.events;h(this.config,"customUpdate",!1)||t.on(f.UPDATE,this.world.update,this.world),t.on(f.POST_UPDATE,this.world.postUpdate,this.world),t.once(f.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(f.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(f.UPDATE,this.world.update,this.world)},getConfig:function(){var t=this.systems.game.config.physics,e=this.systems.settings.physics;return l(h(e,"arcade",{}),h(t,"arcade",{}))},overlap:function(t,e,i,n,s){return void 0===i&&(i=null),void 0===n&&(n=null),void 0===s&&(s=i),this.world.collideObjects(t,e,i,n,s,!0)},collide:function(t,e,i,n,s){return void 0===i&&(i=null),void 0===n&&(n=null),void 0===s&&(s=i),this.world.collideObjects(t,e,i,n,s,!1)},collideTiles:function(t,e,i,n,s){return this.world.collideTiles(t,e,i,n,s)},overlapTiles:function(t,e,i,n,s){return this.world.overlapTiles(t,e,i,n,s)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(t,e,i,n,s,r){void 0===n&&(n=60);var a=Math.atan2(i-t.y,e-t.x);return t.body.acceleration.setToPolar(a,n),void 0!==s&&void 0!==r&&t.body.maxVelocity.set(s,r),a},accelerateToObject:function(t,e,i,n,s){return this.accelerateTo(t,e.x,e.y,i,n,s)},closest:function(t,e){e=e||this.world.bodies.entries;for(var i=Number.MAX_VALUE,n=null,s=t.x,r=t.y,o=e.length,h=0;h<o;h++){var l,c=e[h],u=c.body||c;t!==c&&t!==u&&t!==u.gameObject&&t!==u.center&&(l=a(s,r,u.center.x,u.center.y))<i&&(n=c,i=l)}return n},furthest:function(t,e){e=e||this.world.bodies.entries;for(var i=-1,n=null,s=t.x,r=t.y,o=e.length,h=0;h<o;h++){var l,c=e[h],u=c.body||c;t!==c&&t!==u&&t!==u.gameObject&&t!==u.center&&i<(l=a(s,r,u.center.x,u.center.y))&&(n=c,i=l)}return n},moveTo:function(t,e,i,n,s){void 0===n&&(n=60),void 0===s&&(s=0);var a=Math.atan2(i-t.y,e-t.x);return 0<s&&(n=r(t.x,t.y,e,i)/(s/1e3)),t.body.velocity.setToPolar(a,n),a},moveToObject:function(t,e,i,n){return this.moveTo(t,e.x,e.y,i,n)},velocityFromAngle:function(t,e,i){return void 0===e&&(e=60),void 0===i&&(i=new p),i.setToPolar(s(t),e)},velocityFromRotation:function(t,e,i){return void 0===e&&(e=60),void 0===i&&(i=new p),i.setToPolar(t,e)},overlapRect:function(t,e,i,n,s,r){return u(this.world,t,e,i,n,s,r)},overlapCirc:function(t,e,i,n,s){return c(this.world,t,e,i,n,s)},shutdown:function(){var t;this.world&&((t=this.systems.events).off(f.UPDATE,this.world.update,this.world),t.off(f.POST_UPDATE,this.world.postUpdate,this.world),t.off(f.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null)},destroy:function(){this.shutdown(),this.scene.sys.events.off(f.START,this.start,this),this.scene=null,this.systems=null}});d.register("ArcadePhysics",m,"arcadePhysics"),t.exports=m},function(t,e){t.exports={setAcceleration:function(t,e){return this.body.acceleration.set(t,e),this},setAccelerationX:function(t){return this.body.acceleration.x=t,this},setAccelerationY:function(t){return this.body.acceleration.y=t,this}}},function(t,e){t.exports={setAngularVelocity:function(t){return this.body.angularVelocity=t,this},setAngularAcceleration:function(t){return this.body.angularAcceleration=t,this},setAngularDrag:function(t){return this.body.angularDrag=t,this}}},function(t,e){t.exports={setBounce:function(t,e){return this.body.bounce.set(t,e),this},setBounceX:function(t){return this.body.bounce.x=t,this},setBounceY:function(t){return this.body.bounce.y=t,this},setCollideWorldBounds:function(t,e,i){return this.body.setCollideWorldBounds(t,e,i),this}}},function(t,e){t.exports={setDebug:function(t,e,i){return this.debugShowBody=t,this.debugShowVelocity=e,this.debugBodyColor=i,this},setDebugBodyColor:function(t){return this.body.debugBodyColor=t,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(t){this.body.debugShowBody=t}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(t){this.body.debugShowVelocity=t}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(t){this.body.debugBodyColor=t}}}},function(t,e){t.exports={setDrag:function(t,e){return this.body.drag.set(t,e),this},setDragX:function(t){return this.body.drag.x=t,this},setDragY:function(t){return this.body.drag.y=t,this},setDamping:function(t){return this.body.useDamping=t,this}}},function(t,e){t.exports={enableBody:function(t,e,i,n,s){return t&&this.body.reset(e,i),n&&(this.body.gameObject.active=!0),s&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),this.body.stop(),this.body.enable=!1,t&&(this.body.gameObject.active=!1),e&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}}},function(t,e){t.exports={setFriction:function(t,e){return this.body.friction.set(t,e),this},setFrictionX:function(t){return this.body.friction.x=t,this},setFrictionY:function(t){return this.body.friction.y=t,this}}},function(t,e){t.exports={setGravity:function(t,e){return this.body.gravity.set(t,e),this},setGravityX:function(t){return this.body.gravity.x=t,this},setGravityY:function(t){return this.body.gravity.y=t,this}}},function(t,e){t.exports={setImmovable:function(t){return void 0===t&&(t=!0),this.body.immovable=t,this}}},function(t,e){t.exports={setMass:function(t){return this.body.mass=t,this}}},function(t,e){t.exports={setPushable:function(t){return void 0===t&&(t=!0),this.body.pushable=t,this}}},function(t,e){t.exports={setOffset:function(t,e){return this.body.setOffset(t,e),this},setSize:function(t,e,i){return this.body.setSize(t,e,i),this},setBodySize:function(t,e,i){return this.body.setSize(t,e,i),this},setCircle:function(t,e,i){return this.body.setCircle(t,e,i),this}}},function(t,e){t.exports={setVelocity:function(t,e){return this.body.setVelocity(t,e),this},setVelocityX:function(t){return this.body.setVelocityX(t),this},setVelocityY:function(t){return this.body.setVelocityY(t),this},setMaxVelocity:function(t,e){return this.body.maxVelocity.set(t,e),this}}},function(t,e){t.exports="collide"},function(t,e){t.exports="overlap"},function(t,e){t.exports="pause"},function(t,e){t.exports="resume"},function(t,e){t.exports="tilecollide"},function(t,e){t.exports="tileoverlap"},function(t,e){t.exports="worldbounds"},function(t,e){t.exports="worldstep"},function(t,e){var i,n,s,r,a,o,h,l,c,u,d,f,p,g,m,v,y,_=function(){return u&&m&&n.blocked.right?(i.processX(-y,h,!1,!0),1):c&&v&&n.blocked.left?(i.processX(y,h,!0),1):p&&v&&i.blocked.right?(n.processX(-y,l,!1,!0),2):f&&m&&i.blocked.left?(n.processX(y,l,!0),2):0},x=function(t){var e;return s&&r?(y*=.5,0===t||3===t?(i.processX(y,a),n.processX(-y,o)):(i.processX(-y,a),n.processX(y,o))):s&&!r?0===t||3===t?i.processX(y,h,!0):i.processX(-y,h,!1,!0):!s&&r?0===t||3===t?n.processX(-y,l,!1,!0):n.processX(y,l,!0):(e=.5*y,0===t?g?(i.processX(y,0,!0),n.processX(0,null,!1,!0)):p?(i.processX(e,0,!0),n.processX(-e,0,!1,!0)):(i.processX(e,n.velocity.x,!0),n.processX(-e,null,!1,!0)):1===t?d?(i.processX(0,null,!1,!0),n.processX(y,0,!0)):u?(i.processX(-e,0,!1,!0),n.processX(e,0,!0)):(i.processX(-e,null,!1,!0),n.processX(e,i.velocity.x,!0)):2===t?g?(i.processX(-y,0,!1,!0),n.processX(0,null,!0)):f?(i.processX(-e,0,!1,!0),n.processX(e,0,!0)):(i.processX(-e,n.velocity.x,!1,!0),n.processX(e,null,!0)):3===t&&(d?(i.processX(0,null,!0),n.processX(-y,0,!1,!0)):c?(i.processX(e,0,!0),n.processX(-e,0,!1,!0)):(i.processX(e,n.velocity.y,!0),n.processX(-e,null,!1,!0)))),!0};t.exports={BlockCheck:_,Check:function(){var t=i.velocity.x,e=n.velocity.x,s=Math.sqrt(e*e*n.mass/i.mass)*(0<e?1:-1),r=Math.sqrt(t*t*i.mass/n.mass)*(0<t?1:-1),h=.5*(s+r);return r-=h,a=h+(s-=h)*i.bounce.x,o=h+r*n.bounce.x,c&&v?x(0):f&&m?x(1):u&&m?x(2):!(!p||!v)&&x(3)},Set:function(t,e,a){n=e;var o=(i=t).velocity.x,x=n.velocity.x;return s=i.pushable,c=i._dx<0,u=0<i._dx,d=0===i._dx,m=Math.abs(i.right-n.x)<=Math.abs(n.right-i.x),h=x-o*i.bounce.x,r=n.pushable,f=n._dx<0,p=0<n._dx,g=0===n._dx,v=!m,l=o-x*n.bounce.x,y=Math.abs(a),_()},Run:x,RunImmovableBody1:function(t){1===t?n.velocity.x=0:m?n.processX(y,l,!0):n.processX(-y,l,!1,!0),i.moves&&(n.y+=(i.y-i.prev.y)*i.friction.y,n._dy=n.y-n.prev.y)},RunImmovableBody2:function(t){2===t?i.velocity.x=0:v?i.processX(y,h,!0):i.processX(-y,h,!1,!0),n.moves&&(i.y+=(n.y-n.prev.y)*n.friction.y,i._dy=i.y-i.prev.y)}}},function(t,e){var i,n,s,r,a,o,h,l,c,u,d,f,p,g,m,v,y,_=function(){return u&&m&&n.blocked.down?(i.processY(-y,h,!1,!0),1):c&&v&&n.blocked.up?(i.processY(y,h,!0),1):p&&v&&i.blocked.down?(n.processY(-y,l,!1,!0),2):f&&m&&i.blocked.up?(n.processY(y,l,!0),2):0},x=function(t){var e;return s&&r?(y*=.5,0===t||3===t?(i.processY(y,a),n.processY(-y,o)):(i.processY(-y,a),n.processY(y,o))):s&&!r?0===t||3===t?i.processY(y,h,!0):i.processY(-y,h,!1,!0):!s&&r?0===t||3===t?n.processY(-y,l,!1,!0):n.processY(y,l,!0):(e=.5*y,0===t?g?(i.processY(y,0,!0),n.processY(0,null,!1,!0)):p?(i.processY(e,0,!0),n.processY(-e,0,!1,!0)):(i.processY(e,n.velocity.y,!0),n.processY(-e,null,!1,!0)):1===t?d?(i.processY(0,null,!1,!0),n.processY(y,0,!0)):u?(i.processY(-e,0,!1,!0),n.processY(e,0,!0)):(i.processY(-e,null,!1,!0),n.processY(e,i.velocity.y,!0)):2===t?g?(i.processY(-y,0,!1,!0),n.processY(0,null,!0)):f?(i.processY(-e,0,!1,!0),n.processY(e,0,!0)):(i.processY(-e,n.velocity.y,!1,!0),n.processY(e,null,!0)):3===t&&(d?(i.processY(0,null,!0),n.processY(-y,0,!1,!0)):c?(i.processY(e,0,!0),n.processY(-e,0,!1,!0)):(i.processY(e,n.velocity.y,!0),n.processY(-e,null,!1,!0)))),!0};t.exports={BlockCheck:_,Check:function(){var t=i.velocity.y,e=n.velocity.y,s=Math.sqrt(e*e*n.mass/i.mass)*(0<e?1:-1),r=Math.sqrt(t*t*i.mass/n.mass)*(0<t?1:-1),h=.5*(s+r);return r-=h,a=h+(s-=h)*i.bounce.y,o=h+r*n.bounce.y,c&&v?x(0):f&&m?x(1):u&&m?x(2):!(!p||!v)&&x(3)},Set:function(t,e,a){n=e;var o=(i=t).velocity.y,x=n.velocity.y;return s=i.pushable,c=i._dy<0,u=0<i._dy,d=0===i._dy,m=Math.abs(i.bottom-n.y)<=Math.abs(n.bottom-i.y),h=x-o*i.bounce.y,r=n.pushable,f=n._dy<0,p=0<n._dy,g=0===n._dy,v=!m,l=o-x*n.bounce.y,y=Math.abs(a),_()},Run:x,RunImmovableBody1:function(t){1===t?n.velocity.y=0:m?n.processY(y,l,!0):n.processY(-y,l,!1,!0),i.moves&&(n.x+=(i.x-i.prev.x)*i.friction.x,n._dx=n.x-n.prev.x)},RunImmovableBody2:function(t){2===t?i.velocity.y=0:v?i.processY(y,h,!0):i.processY(-y,h,!1,!0),n.moves&&(i.x+=(n.x-n.prev.x)*n.friction.x,i._dx=i.x-i.prev.x)}}},function(t,e,i){var n={ProcessTileCallbacks:i(530),ProcessTileSeparationX:i(534),ProcessTileSeparationY:i(536),SeparateTile:i(532),TileCheckX:i(533),TileCheckY:i(535),TileIntersectsBody:i(248)};t.exports=n},,,,,,,,,,,,function(t,e,i){t.exports={BasePlugin:i(540),DefaultPlugins:i(197),PluginCache:i(24),PluginManager:i(414),ScenePlugin:i(1404)}},function(t,e,i){var n=i(540),s=i(0),r=i(20),a=new s({Extends:n,initialize:function(t,e,i){n.call(this,e),this.scene=t,this.systems=t.sys,this.pluginKey=i,t.sys.events.once(r.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=a},function(t,e,i){t.exports={Canvas:i(1406),Events:i(91),Snapshot:i(1407),WebGL:i(1408)}},function(t,e,i){t.exports={CanvasRenderer:i(368),GetBlendModes:i(370),SetTransform:i(30)}},function(t,e,i){t.exports={Canvas:i(369),WebGL:i(383)}},function(t,e,i){var n=i(107),s=i(17)(!1,s={PipelineManager:i(372),Pipelines:i(1409),RenderTarget:i(141),Utils:i(12),WebGLPipeline:i(58),WebGLRenderer:i(371),WebGLShader:i(375)},n);t.exports=s},function(t,e,i){var n=i(92),s=i(17)(!1,s={BitmapMaskPipeline:i(373),Events:i(374),GraphicsPipeline:i(376),LightPipeline:i(377),MultiPipeline:i(108),PointLightPipeline:i(378),PostFXPipeline:i(1410),RopePipeline:i(379),SinglePipeline:i(380),UtilityPipeline:i(381)},n);t.exports=s},function(t,e,i){var n=i(0),s=i(198),r=i(2),a=i(1411),o=i(382),h=i(58),l=new n({Extends:h,initialize:function(t){t.renderTarget=r(t,"renderTarget",1),t.fragShader=r(t,"fragShader",a),t.vertShader=r(t,"vertShader",o),t.attributes=r(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),t.batchSize=1,t.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],h.call(this,t),this.isPostFX=!0,this.gameObject,this.colorMatrix=new s,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){h.prototype.boot.call(this);var t=this.manager.UTILITY_PIPELINE;this.fullFrame1=t.fullFrame1,this.fullFrame2=t.fullFrame2,this.halfFrame1=t.halfFrame1,this.halfFrame2=t.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(t){this.bindAndDraw(t)},copyFrame:function(t,e,i,n,s){this.manager.copyFrame(t,e,i,n,s)},copyToGame:function(t){this.manager.copyToGame(t)},drawFrame:function(t,e,i){this.manager.drawFrame(t,e,i,this.colorMatrix)},blendFrames:function(t,e,i,n,s){this.manager.blendFrames(t,e,i,n,s)},blendFramesAdditive:function(t,e,i,n,s){this.manager.blendFramesAdditive(t,e,i,n,s)},clearFrame:function(t,e){this.manager.clearFrame(t,e)},blitFrame:function(t,e,i,n,s,r){this.manager.blitFrame(t,e,i,n,s,r)},copyFrameRect:function(t,e,i,n,s,r,a,o){this.manager.copyFrameRect(t,e,i,n,s,r,a,o)},bindAndDraw:function(t,e,i,n,s){void 0===i&&(i=!0),void 0===n&&(n=!0);var r=this.gl,a=this.renderer;this.bind(s),this.set1i("uMainSampler",0),e?(r.viewport(0,0,e.width,e.height),r.bindFramebuffer(r.FRAMEBUFFER,e.framebuffer),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e.texture,0),i&&(n?r.clearColor(0,0,0,0):r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT))):(a.popFramebuffer(!1,!1,!1),a.currentFramebuffer||r.viewport(0,0,a.width,a.height)),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,t.texture),r.bufferData(r.ARRAY_BUFFER,this.vertexData,r.STATIC_DRAW),r.drawArrays(r.TRIANGLES,0,6),e?(r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null)):a.resetTextures()}});t.exports=l},function(t,e){t.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join("\n")},function(t,e,i){var n=i(17),s=i(201),r=n(!1,r={Center:i(403),Events:i(104),Orientation:i(404),ScaleManager:i(415),ScaleModes:i(405),Zoom:i(406)},s.CENTER);r=n(!1,r,s.ORIENTATION),r=n(!1,r,s.SCALE_MODE),r=n(!1,r,s.ZOOM),t.exports=r},function(t,e,i){var n=i(144),s=i(17)(!1,s={Events:i(20),GetPhysicsPlugins:i(419),GetScenePlugins:i(420),SceneManager:i(417),ScenePlugin:i(1414),Settings:i(421),Systems:i(204)},n);t.exports=s},function(t,e,i){var n=i(18),s=i(0),r=i(20),a=i(2),o=i(24),h=new s({initialize:function(t){this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.key=t.sys.settings.key,this.manager=t.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,t.sys.events.once(r.BOOT,this.boot,this),t.sys.events.on(r.START,this.pluginStart,this)},boot:function(){this.systems.events.once(r.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(r.SHUTDOWN,this.shutdown,this)},start:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",t,e),this},restart:function(t){var e=this.key;return this.manager.queueOp("stop",e),this.manager.queueOp("start",e,t),this},transition:function(t){void 0===t&&(t={});var e=a(t,"target",!1),i=this.manager.getScene(e);if(!e||!this.checkValidTransition(i))return!1;var n=a(t,"duration",1e3);this._elapsed=0,this._target=i,this._duration=n,this._willSleep=a(t,"sleep",!1),this._willRemove=a(t,"remove",!1);var s=a(t,"onUpdate",null);s&&(this._onUpdate=s,this._onUpdateScope=a(t,"onUpdateScope",this.scene));var o=a(t,"allowInput",!1);this.settings.transitionAllowInput=o;var h=i.sys.settings;return h.isTransition=!0,h.transitionFrom=this.scene,h.transitionDuration=n,h.transitionAllowInput=o,a(t,"moveAbove",!1)?this.manager.moveAbove(this.key,e):a(t,"moveBelow",!1)&&this.manager.moveBelow(this.key,e),i.sys.isSleeping()?i.sys.wake(a(t,"data")):this.manager.start(e,a(t,"data")),this.systems.events.emit(r.TRANSITION_OUT,i,n),this.systems.events.on(r.UPDATE,this.step,this),!0},checkValidTransition:function(t){return!(!t||t.sys.isActive()||t.sys.isTransitioning()||t===this.scene||this.systems.isTransitioning())},step:function(t,e){this._elapsed+=e,this.transitionProgress=n(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var t=this._target.sys,e=this._target.sys.settings;this.systems.events.off(r.UPDATE,this.step,this),t.events.emit(r.TRANSITION_COMPLETE,this.scene),e.isTransition=!1,e.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(t,e,i,n){return this.manager.add(t,e,i,n)},launch:function(t,e){return t&&t!==this.key&&this.manager.queueOp("start",t,e),this},run:function(t,e){return t&&t!==this.key&&this.manager.queueOp("run",t,e),this},pause:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("pause",t,e),this},resume:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("resume",t,e),this},sleep:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("sleep",t,e),this},wake:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("wake",t,e),this},switch:function(t){return t!==this.key&&this.manager.queueOp("switch",this.key,t),this},stop:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("stop",t,e),this},setActive:function(t,e,i){void 0===e&&(e=this.key);var n=this.manager.getScene(e);return n&&n.sys.setActive(t,i),this},setVisible:function(t,e){void 0===e&&(e=this.key);var i=this.manager.getScene(e);return i&&i.sys.setVisible(t),this},isSleeping:function(t){return void 0===t&&(t=this.key),this.manager.isSleeping(t)},isActive:function(t){return void 0===t&&(t=this.key),this.manager.isActive(t)},isPaused:function(t){return void 0===t&&(t=this.key),this.manager.isPaused(t)},isVisible:function(t){return void 0===t&&(t=this.key),this.manager.isVisible(t)},swapPosition:function(t,e){return void 0===e&&(e=this.key),t!==e&&this.manager.swapPosition(t,e),this},moveAbove:function(t,e){return void 0===e&&(e=this.key),t!==e&&this.manager.moveAbove(t,e),this},moveBelow:function(t,e){return void 0===e&&(e=this.key),t!==e&&this.manager.moveBelow(t,e),this},remove:function(t){return void 0===t&&(t=this.key),this.manager.remove(t),this},moveUp:function(t){return void 0===t&&(t=this.key),this.manager.moveUp(t),this},moveDown:function(t){return void 0===t&&(t=this.key),this.manager.moveDown(t),this},bringToTop:function(t){return void 0===t&&(t=this.key),this.manager.bringToTop(t),this},sendToBack:function(t){return void 0===t&&(t=this.key),this.manager.sendToBack(t),this},get:function(t){return this.manager.getScene(t)},getIndex:function(t){return void 0===t&&(t=this.key),this.manager.getIndex(t)},shutdown:function(){var t=this.systems.events;t.off(r.SHUTDOWN,this.shutdown,this),t.off(r.POST_UPDATE,this.step,this),t.off(r.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(r.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});o.register("ScenePlugin",h,"scenePlugin"),t.exports=h},function(t,e,i){t.exports={Events:i(438),List:i(110),Map:i(102),ProcessQueue:i(211),RTree:i(531),Set:i(149),Size:i(416)}},function(t,e,i){var n=i(17),s=i(1417),r=n(!1,r={CanvasTexture:i(423),Events:i(106),FilterMode:s,Frame:i(109),Parsers:i(425),Texture:i(206),TextureManager:i(422),TextureSource:i(424)},s);t.exports=r},function(t,e){t.exports={LINEAR:0,NEAREST:1}},function(t,e,i){var n=i(17),s=i(1419),r=n(!1,r={Components:i(251),Parsers:i(1452),Formats:i(40),ImageCollection:i(576),ParseToTilemap:i(262),Tile:i(85),Tilemap:i(580),TilemapCreator:i(1459),TilemapFactory:i(1460),Tileset:i(122),TilemapLayer:i(581),Orientation:i(29),LayerData:i(120),MapData:i(121),ObjectLayer:i(572)},s.ORIENTATION);t.exports=r},function(t,e,i){var n={ORIENTATION:i(29)};t.exports=n},function(t,e,i){var n=i(26),s=i(63);t.exports=function(t,e,i,r,a,o,h,l){void 0===h&&(h=!0),t<0&&(t=0),e<0&&(e=0);for(var c=n(t,e,i,r,null,l),u=a-t,d=o-e,f=0;f<c.length;f++){var p=c[f].x+u,g=c[f].y+d;0<=p&&p<l.width&&0<=g&&g<l.height&&l.data[g][p]&&l.data[g][p].copy(c[f])}h&&s(a-1,o-1,i+2,r+2,l)}},function(t,e,i){var n=i(26),s=i(542);t.exports=function(t,e,i,r,a,o){i=i||{},Array.isArray(t)||(t=[t]);var h=o.tilemapLayer;r=r||h.scene,a=a||r.cameras.main;for(var l=n(0,0,o.width,o.height,null,o),c=[],u=0;u<l.length;u++){var d,f=l[u];-1!==t.indexOf(f.index)&&(d=h.tileToWorldXY(f.x,f.y,void 0,a,o),i.x=d.x,i.y=d.y,c.push(r.make.sprite(i)))}if("number"==typeof e)for(u=0;u<t.length;u++)s(t[u],e,0,0,o.width,o.height,o);else if(Array.isArray(e))for(u=0;u<t.length;u++)s(t[u],e[u],0,0,o.width,o.height,o);return c}},function(t,e,i){var n=i(26),s=i(63),r=i(72);t.exports=function(t,e,i,a,o,h,l){for(var c=-1!==l.collideIndexes.indexOf(t),u=n(e,i,a,o,null,l),d=0;d<u.length;d++)u[d].index=t,r(u[d],c);h&&s(e-1,i-1,a+2,o+2,l)}},function(t,e,i){var n=i(26);t.exports=function(t,e,i,s,r,a,o,h){return n(i,s,r,a,o,h).filter(t,e)}},function(t,e){t.exports=function(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=!1);var s,r,a,o=0;if(i){for(r=n.height-1;0<=r;r--)for(s=n.width-1;0<=s;s--)if((a=n.data[r][s])&&a.index===t){if(o===e)return a;o+=1}}else for(r=0;r<n.height;r++)for(s=0;s<n.width;s++)if((a=n.data[r][s])&&a.index===t){if(o===e)return a;o+=1}return null}},function(t,e,i){var n=i(26);t.exports=function(t,e,i,s,r,a,o,h){return n(i,s,r,a,o,h).find(t,e)||null}},function(t,e,i){var n=i(26);t.exports=function(t,e,i,s,r,a,o,h){n(i,s,r,a,o,h).forEach(t,e)}},function(t,e,i){var n=i(29),s=i(544),r=i(545),a=i(547),o=i(1),h=i(548);t.exports=function(t){return t===n.ORTHOGONAL?s:t===n.HEXAGONAL?r:t===n.STAGGERED?h:t===n.ISOMETRIC?a:o}},function(t,e,i){var n=i(158),s=new(i(3));t.exports=function(t,e,i,r,a){return a.tilemapLayer.worldToTileXY(t,e,!0,s,r),n(s.x,s.y,i,a)}},function(t,e,i){function n(t,e){return a.RectangleToTriangle(e,t)}var s=i(483),r=i(26),a=i(484),o=i(1),h=i(3),l=new h,c=new h,u=new h;t.exports=function(t,e,i,h){if(void 0===t)return[];var d=o;t instanceof s.Circle?d=a.CircleToRectangle:t instanceof s.Rectangle?d=a.RectangleToRectangle:t instanceof s.Triangle?d=n:t instanceof s.Line&&(d=a.LineToRectangle),h.tilemapLayer.worldToTileXY(t.left,t.top,!0,c,i);var f=c.x,p=c.y;h.tilemapLayer.worldToTileXY(t.right,t.bottom,!0,u,i);var g=Math.ceil(u.x),m=Math.ceil(u.y),v=Math.max(g-f,1),y=Math.max(m-p,1),_=r(f,p,v,y,e,h),x=h.tileWidth,w=h.tileHeight;h.tilemapLayer&&(x*=h.tilemapLayer.scaleX,w*=h.tilemapLayer.scaleY);for(var b=[],E=new s.Rectangle(0,0,x,w),T=0;T<_.length;T++){var S=_[T];h.tilemapLayer.tileToWorldXY(S.x,S.y,l,i),E.x=l.x,E.y=l.y,d(t,E)&&b.push(S)}return b}},function(t,e,i){var n=i(29),s=i(1),r=i(253);t.exports=function(t){return t===n.ORTHOGONAL?r:s}},function(t,e,i){var n=i(29),s=i(550),r=i(551),a=i(1),o=i(552),h=i(553);t.exports=function(t){return t===n.ORTHOGONAL?h:t===n.ISOMETRIC?r:t===n.HEXAGONAL?s:t===n.STAGGERED?o:a}},function(t,e,i){var n=i(29),s=i(554),r=i(1),a=i(555),o=i(254);t.exports=function(t){return t===n.ORTHOGONAL?o:t===n.HEXAGONAL?s:t===n.STAGGERED?a:r}},function(t,e,i){var n=i(29),s=i(1),r=i(255);t.exports=function(t){return t===n.ORTHOGONAL?r:s}},function(t,e,i){var n=i(29),s=i(556),r=i(557),a=i(1),o=i(558),h=i(559);t.exports=function(t){return t===n.ORTHOGONAL?h:t===n.ISOMETRIC?r:t===n.HEXAGONAL?s:t===n.STAGGERED?o:a}},function(t,e,i){var n=i(29),s=i(560),r=i(1),a=i(561),o=i(256);t.exports=function(t){return t===n.ORTHOGONAL?o:t===n.HEXAGONAL?s:t===n.STAGGERED?a:r}},function(t,e,i){var n=i(562),s=new(i(3));t.exports=function(t,e,i,r){r.tilemapLayer.worldToTileXY(t,e,!0,s,i);var a=s.x,o=s.y;return n(a,o,r)}},function(t,e,i){var n=i(257),s=new(i(3));t.exports=function(t,e,i,r,a,o){return o.tilemapLayer.worldToTileXY(e,i,!0,s,a,o),n(t,s.x,s.y,r,o)}},function(t,e,i){var n=i(63),s=i(257);t.exports=function(t,e,i,r,a){if(void 0===r&&(r=!0),!Array.isArray(t))return null;Array.isArray(t[0])||(t=[t]);for(var o=t.length,h=t[0].length,l=0;l<o;l++)for(var c=0;c<h;c++){var u=t[l][c];s(u,e+c,i+l,!1,a)}r&&n(e-1,i-1,h+2,o+2,a)}},function(t,e,i){var n=i(26),s=i(210);t.exports=function(t,e,i,r,a,o){var h,l=n(t,e,i,r,{},o);if(!a)for(a=[],h=0;h<l.length;h++)-1===a.indexOf(l[h].index)&&a.push(l[h].index);for(h=0;h<l.length;h++)l[h].index=s(a)}},function(t,e,i){var n=i(563),s=new(i(3));t.exports=function(t,e,i,r,a,o){return o.tilemapLayer.worldToTileXY(t,e,!0,s,a,o),n(s.x,s.y,i,r,o)}},function(t,e,i){var n=i(26),s=i(397),r=new s(105,210,231,150),a=new s(243,134,48,200),o=new s(40,39,37,150);t.exports=function(t,e,i){void 0===e&&(e={});var s=void 0!==e.tileColor?e.tileColor:r,h=void 0!==e.collidingTileColor?e.collidingTileColor:a,l=void 0!==e.faceColor?e.faceColor:o,c=n(0,0,i.width,i.height,null,i);t.translateCanvas(i.tilemapLayer.x,i.tilemapLayer.y),t.scaleCanvas(i.tilemapLayer.scaleX,i.tilemapLayer.scaleY);for(var u=0;u<c.length;u++){var d=c[u],f=d.width,p=d.height,g=d.pixelX,m=d.pixelY,v=d.collides?h:s;null!==v&&(t.fillStyle(v.color,v.alpha/255),t.fillRect(g,m,f,p)),g+=1,m+=1,f-=2,p-=2,null!==l&&(t.lineStyle(1,l.color,l.alpha/255),d.faceTop&&t.lineBetween(g,m,g+f,m),d.faceRight&&t.lineBetween(g+f,m,g+f,m+p),d.faceBottom&&t.lineBetween(g,m+p,g+f,m+p),d.faceLeft&&t.lineBetween(g,m,g,m+p))}}},function(t,e,i){var n=i(72),s=i(63),r=i(160);t.exports=function(t,e,i,a,o){void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===o&&(o=!0),Array.isArray(t)||(t=[t]);for(var h=0;h<t.length;h++)r(t[h],e,a);if(o)for(var l=0;l<a.height;l++)for(var c=0;c<a.width;c++){var u=a.data[l][c];u&&-1!==t.indexOf(u.index)&&n(u,e)}i&&s(0,0,a.width,a.height,a)}},function(t,e,i){var n=i(72),s=i(63),r=i(160);t.exports=function(t,e,i,a,o,h){if(void 0===i&&(i=!0),void 0===a&&(a=!0),void 0===h&&(h=!0),!(e<t)){for(var l=t;l<=e;l++)r(l,i,o);if(h)for(var c=0;c<o.height;c++)for(var u=0;u<o.width;u++){var d=o.data[c][u];d&&d.index>=t&&d.index<=e&&n(d,i)}a&&s(0,0,o.width,o.height,o)}}},function(t,e,i){var n=i(72),s=i(63),r=i(160);t.exports=function(t,e,i,a){void 0===e&&(e=!0),void 0===i&&(i=!0),Array.isArray(t)||(t=[t]);for(var o=0;o<a.height;o++)for(var h=0;h<a.width;h++){var l=a.data[o][h];l&&-1===t.indexOf(l.index)&&(n(l,e),r(l.index,e,a))}i&&s(0,0,a.width,a.height,a)}},function(t,e,i){var n=i(72),s=i(63),r=i(126);t.exports=function(t,e,i,a){void 0===e&&(e=!0),void 0===i&&(i=!0);for(var o=0;o<a.height;o++)for(var h=0;h<a.width;h++){var l=a.data[o][h];if(l)for(var c in t)if(r(l.properties,c)){var u=t[c];Array.isArray(u)||(u=[u]);for(var d=0;d<u.length;d++)l.properties[c]===u[d]&&n(l,e)}}i&&s(0,0,a.width,a.height,a)}},function(t,e,i){var n=i(72),s=i(63);t.exports=function(t,e,i){void 0===t&&(t=!0),void 0===e&&(e=!0);for(var r=0;r<i.height;r++)for(var a=0;a<i.width;a++){var o,h=i.data[r][a];h&&(o=h.getCollisionGroup())&&o.objects&&0<o.objects.length&&n(h,t)}e&&s(0,0,i.width,i.height,i)}},function(t,e){t.exports=function(t,e,i,n){if("number"==typeof t)n.callbacks[t]=null!==e?{callback:e,callbackContext:i}:void 0;else for(var s=0,r=t.length;s<r;s++)n.callbacks[t[s]]=null!==e?{callback:e,callbackContext:i}:void 0}},function(t,e,i){var n=i(26);t.exports=function(t,e,i,s,r,a,o){for(var h=n(t,e,i,s,null,o),l=0;l<h.length;l++)h[l].setCollisionCallback(r,a)}},function(t,e,i){var n=i(26),s=i(131);t.exports=function(t,e,i,r,a){var o=n(t,e,i,r,null,a),h=o.map((function(t){return t.index}));s(h);for(var l=0;l<o.length;l++)o[l].index=h[l]}},function(t,e,i){var n=i(26);t.exports=function(t,e,i,s,r,a,o){for(var h=n(i,s,r,a,null,o),l=0;l<h.length;l++)h[l]&&(h[l].index===t?h[l].index=e:h[l].index===e&&(h[l].index=t))}},function(t,e,i){var n=i(26);t.exports=function(t,e,i,s,r,a){if(r){for(var o=n(t,e,i,s,null,a),h=0,l=0;l<r.length;l++)h+=r[l].weight;if(!(h<=0))for(l=0;l<o.length;l++){for(var c=Math.random()*h,u=0,d=-1,f=0;f<r.length;f++)if(c<=(u+=r[f].weight)){var p=r[f].index;d=Array.isArray(p)?p[Math.floor(Math.random()*p.length)]:p;break}o[l].index=d}}}},function(t,e,i){t.exports={FromOrientationString:i(258),Parse:i(564),Parse2DArray:i(259),ParseCSV:i(565),Impact:i(1454),Tiled:i(1455)}},function(t,e){t.exports=function(t,e){for(var i=0;i<t.length;i++){var n=t[i],s=i;if(n.name&&""!==n.name&&(s=n.name),Array.isArray(n.wangtiles)&&0<n.wangtiles.length){var r,a,o,h={},l={};if(Array.isArray(n.edgecolors))for(r=0;r<n.edgecolors.length;r++)o=1+r,""!==(a=n.edgecolors[r]).name&&(h[o]=a.name);if(Array.isArray(n.cornercolors))for(r=0;r<n.cornercolors.length;r++)o=1+r,""!==(a=n.cornercolors[r]).name&&(l[o]=a.name);if(Array.isArray(n.colors))for(r=0;r<n.colors.length;r++)o=1+r,""!==(a=n.colors[r]).name&&(h[o]=l[o]=a.name);for(var c=[h,l,h,l,h,l,h,l],u=0;u<n.wangtiles.length;u++){for(var d,f=n.wangtiles[u],p=(p=e[f.tileid]||(e[f.tileid]={})).wangid||(p.wangid={}),g=[],m=0;m<Math.min(c.length,f.wangid.length);m++)0!==(a=f.wangid[m])?void 0===(d=c[m][a])?g.push(a):g.push(d):g.push(void 0);p[s]=g}}}}},function(t,e,i){t.exports={ParseTileLayers:i(578),ParseTilesets:i(579),ParseWeltmeister:i(577)}},function(t,e,i){t.exports={AssignTileProperties:i(567),Base64Decode:i(574),BuildTilesetIndex:i(568),CreateGroupLayer:i(161),ParseGID:i(261),ParseImageLayers:i(569),ParseJSONTiled:i(566),ParseObject:i(260),ParseObjectLayers:i(570),ParseTileLayers:i(573),ParseTilesets:i(575)}},function(t,e,i){var n=i(1),s=i(1);n=i(1457),s=i(1458),t.exports={renderWebGL:n,renderCanvas:s}},function(t,e,i){var n=i(12);t.exports=function(t,e,i){var s=e.cull(i),r=s.length,a=i.alpha*e.alpha;if(!(0===r||a<=0)){var o=e.gidMap,h=t.pipelines.set(e.pipeline,e),l=n.getTintAppendFloatAlpha,c=e.scrollFactorX,u=e.scrollFactorY,d=e.x,f=e.y,p=e.scaleX,g=e.scaleY;t.pipelines.preBatch(e);for(var m=0;m<r;m++){var v,y,_,x,w,b,E,T,S,A,O=s[m],C=o[O.index];C&&null!==(v=C.getTileTextureCoordinates(O.index))&&(y=C.glTexture,_=h.setTexture2D(y,e),x=C.tileWidth,w=C.tileHeight,b=v.x,E=v.y,T=.5*C.tileWidth,S=.5*C.tileHeight,A=l(O.tint,a*O.alpha),h.batchTexture(e,y,y.width,y.height,d+(T+O.pixelX)*p,f+(S+O.pixelY)*g,O.width,O.height,p,g,O.rotation,O.flipX,O.flipY,c,u,T,S,b,E,x,w,A,A,A,A,!1,0,0,i,null,!0,_))}t.pipelines.postBatch(e)}}},function(t,e,i){var n=i(25),s=new n,r=new n,a=new n;t.exports=function(t,e,i,n){var o=e.cull(i),h=o.length,l=i.alpha*e.alpha;if(!(0===h||l<=0)){var c=s,u=r,d=a;u.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),c.copyFrom(i.matrix);var f=t.currentContext,p=e.gidMap;f.save(),n?(c.multiplyWithOffset(n,-i.scrollX*e.scrollFactorX,-i.scrollY*e.scrollFactorY),u.e=e.x,u.f=e.y,c.multiply(u,d),d.copyToContext(f)):(u.e-=i.scrollX*e.scrollFactorX,u.f-=i.scrollY*e.scrollFactorY,u.copyToContext(f)),(!t.antialias||1<e.scaleX||1<e.scaleY)&&(f.imageSmoothingEnabled=!1);for(var g=0;g<h;g++){var m,v,y,_,x,w,b=o[g],E=p[b.index];E&&(m=E.image.getSourceImage(),null!==(v=E.getTileTextureCoordinates(b.index))&&(x=.5*(y=E.tileWidth),w=.5*(_=E.tileHeight),f.save(),f.translate(b.pixelX+x,b.pixelY+w),0!==b.rotation&&f.rotate(b.rotation),(b.flipX||b.flipY)&&f.scale(b.flipX?-1:1,b.flipY?-1:1),f.globalAlpha=l*b.alpha,f.drawImage(m,v.x,v.y,y,_,-x,-w,y,_),f.restore()))}f.restore()}}},function(t,e,i){var n=i(16),s=i(262);n.register("tilemap",(function(t){var e=void 0!==t?t:{};return s(this.scene,e.key,e.tileWidth,e.tileHeight,e.width,e.height,e.data,e.insertNull)}))},function(t,e,i){var n=i(5),s=i(262);n.register("tilemap",(function(t,e,i,n,r,a,o){return null===t&&(t=void 0),null===e&&(e=void 0),null===i&&(i=void 0),null===n&&(n=void 0),null===r&&(r=void 0),s(this.scene,t,e,i,n,r,a,o)}))},function(t,e,i){t.exports={Clock:i(1462),TimerEvent:i(582)}},function(t,e,i){var n=i(0),s=i(24),r=i(20),a=i(582),o=i(93),h=new n({initialize:function(t){this.scene=t,this.systems=t.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],t.sys.events.once(r.BOOT,this.boot,this),t.sys.events.on(r.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(r.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(r.PRE_UPDATE,this.preUpdate,this),t.on(r.UPDATE,this.update,this),t.once(r.SHUTDOWN,this.shutdown,this)},addEvent:function(t){var e;return t instanceof a?(e=t,this.removeEvent(e),e.elapsed=e.startAt,e.hasDispatched=!1,e.repeatCount=-1===e.repeat||e.loop?999999999999:e.repeat):e=new a(t),this._pendingInsertion.push(e),e},delayedCall:function(t,e,i,n){return this.addEvent({delay:t,callback:e,args:i,callbackScope:n})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=t[e];o(this._pendingRemoval,i),o(this._pendingInsertion,i),o(this._active,i)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var t=this._pendingRemoval.length,e=this._pendingInsertion.length;if(0!==t||0!==e){for(var i,n=0;n<t;n++){i=this._pendingRemoval[n];var s=this._active.indexOf(i);-1<s&&this._active.splice(s,1),i.destroy()}for(n=0;n<e;n++)i=this._pendingInsertion[n],this._active.push(i);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(t,e){if(this.now=t,!this.paused){e*=this.timeScale;for(var i=0;i<this._active.length;i++){var n,s=this._active[i];s.paused||(s.elapsed+=e*s.timeScale,s.elapsed>=s.delay&&(n=s.elapsed-s.delay,s.elapsed=s.delay,!s.hasDispatched&&s.callback&&(s.hasDispatched=!0,s.callback.apply(s.callbackScope,s.args)),0<s.repeatCount?(s.repeatCount--,s.elapsed=n,s.hasDispatched=!1):this._pendingRemoval.push(s)))}}},shutdown:function(){for(var t=0;t<this._pendingInsertion.length;t++)this._pendingInsertion[t].destroy();for(t=0;t<this._active.length;t++)this._active[t].destroy();for(t=0;t<this._pendingRemoval.length;t++)this._pendingRemoval[t].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var e=this.systems.events;e.off(r.PRE_UPDATE,this.preUpdate,this),e.off(r.UPDATE,this.update,this),e.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(r.START,this.start,this),this.scene=null,this.systems=null}});s.register("Clock",h,"time"),t.exports=h},function(t,e,i){var n=i(100),s=i(17)(!1,s={Builders:i(1464),Events:i(267),TweenManager:i(1480),Tween:i(266),TweenData:i(268),Timeline:i(588)},n);t.exports=s},function(t,e,i){t.exports={GetBoolean:i(99),GetEaseFunction:i(80),GetNewValue:i(162),GetProps:i(583),GetTargets:i(263),GetTweens:i(584),GetValueOp:i(264),NumberTweenBuilder:i(585),StaggerBuilder:i(586),TimelineBuilder:i(587),TweenBuilder:i(163)}},function(t,e){t.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(t,e){t.exports="complete"},function(t,e){t.exports="loop"},function(t,e){t.exports="pause"},function(t,e){t.exports="resume"},function(t,e){t.exports="start"},function(t,e){t.exports="update"},function(t,e){t.exports="active"},function(t,e){t.exports="complete"},function(t,e){t.exports="loop"},function(t,e){t.exports="repeat"},function(t,e){t.exports="start"},function(t,e){t.exports="stop"},function(t,e){t.exports="update"},function(t,e){t.exports="yoyo"},function(t,e,i){var n=i(93),s=i(0),r=i(585),a=i(24),o=i(20),h=i(586),l=i(587),c=i(100),u=i(163),d=new s({initialize:function(t){this.scene=t,this.systems=t.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,t.sys.events.once(o.BOOT,this.boot,this),t.sys.events.on(o.START,this.start,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(o.PRE_UPDATE,this.preUpdate,this),t.on(o.UPDATE,this.update,this),t.once(o.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(t){return l(this,t)},timeline:function(t){var e=l(this,t);return e.paused||(this._add.push(e),this._toProcess++),e},create:function(t){return u(this,t)},add:function(t){var e=u(this,t);return this._add.push(e),this._toProcess++,e},existing:function(t){return this._add.push(t),this._toProcess++,this},addCounter:function(t){var e=r(this,t);return this._add.push(e),this._toProcess++,e},stagger:function(t,e){return h(t,e)},preUpdate:function(){if(0!==this._toProcess){for(var t,e=this._destroy,i=this._active,n=this._pending,s=0;s<e.length;s++){t=e[s];var r=i.indexOf(t);-1===r?-1<(r=n.indexOf(t))&&(t.state=c.REMOVED,n.splice(r,1)):(t.state=c.REMOVED,i.splice(r,1))}for(e.length=0,e=this._add,s=0;s<e.length;s++)(t=e[s]).state===c.PENDING_ADD&&(t.init()?(t.play(),this._active.push(t)):this._pending.push(t));e.length=0,this._toProcess=0}},update:function(t,e){var i,n=this._active;e*=this.timeScale;for(var s=0;s<n.length;s++)(i=n[s]).update(t,e)&&(this._destroy.push(i),this._toProcess++)},remove:function(t){return n(this._add,t),n(this._pending,t),n(this._active,t),n(this._destroy,t),t.state=c.REMOVED,this},makeActive:function(t){if(-1!==this._add.indexOf(t)||-1!==this._active.indexOf(t))return this;var e=this._pending.indexOf(t);return-1!==e&&this._pending.splice(e,1),this._add.push(t),t.state=c.PENDING_ADD,this._toProcess++,this},each:function(t,e){for(var i=[null],n=1;n<arguments.length;n++)i.push(arguments[n]);for(var s in this.list)i[0]=this.list[s],t.apply(e,i)},getAllTweens:function(){for(var t=this._active,e=[],i=0;i<t.length;i++)e.push(t[i]);return e},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(t,e){void 0===e&&(e=!1);var i,n,s,r=this._active,a=[];for(Array.isArray(t)||(t=[t]),n=0;n<r.length;n++)for(i=r[n],s=0;s<t.length;s++)i.hasTarget(t[s])&&a.push(i);if(e)for(r=this._pending,n=0;n<r.length;n++)for(i=r[n],s=0;s<t.length;s++)i.hasTarget(t[s])&&a.push(i);return a},isTweening:function(t){for(var e,i=this._active,n=0;n<i.length;n++)if((e=i[n]).hasTarget(t)&&e.isPlaying())return!0;return!1},killAll:function(){for(var t=this.getAllTweens(),e=0;e<t.length;e++)t[e].stop();return this},killTweensOf:function(t){for(var e=this.getTweensOf(t),i=0;i<e.length;i++)e[i].stop();return this},pauseAll:function(){for(var t=this._active,e=0;e<t.length;e++)t[e].pause();return this},resumeAll:function(){for(var t=this._active,e=0;e<t.length;e++)t[e].resume();return this},setGlobalTimeScale:function(t){return this.timeScale=t,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var t=this.systems.events;t.off(o.PRE_UPDATE,this.preUpdate,this),t.off(o.UPDATE,this.update,this),t.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});a.register("TweenManager",d,"tweens"),t.exports=d},function(t,e,i){t.exports={Array:i(208),Base64:i(1482),Objects:i(1484),String:i(1488),NOOP:i(1)}},function(t,e,i){t.exports={ArrayBufferToBase64:i(1483),Base64ToArrayBuffer:i(433)}},function(t,e){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";t.exports=function(t,e){for(var n=new Uint8Array(t),s=n.length,r=e?"data:"+e+";base64,":"",a=0;a<s;a+=3)r+=i[n[a]>>2],r+=i[(3&n[a])<<4|n[a+1]>>4],r+=i[(15&n[a+1])<<2|n[a+2]>>6],r+=i[63&n[a+2]];return s%3==2?r=r.substring(0,r.length-1)+"=":s%3==1&&(r=r.substring(0,r.length-2)+"=="),r}},function(t,e,i){t.exports={Clone:i(77),DeepCopy:i(175),Extend:i(17),GetAdvancedValue:i(13),GetFastValue:i(2),GetMinMaxValue:i(1485),GetValue:i(6),HasAll:i(1486),HasAny:i(455),HasValue:i(126),IsPlainObject:i(7),Merge:i(127),MergeRight:i(1487),Pick:i(571),SetValue:i(478)}},function(t,e,i){var n=i(6),s=i(18);t.exports=function(t,e,i,r,a){void 0===a&&(a=i);var o=n(t,e,a);return s(o,i,r)}},function(t,e){t.exports=function(t,e){for(var i=0;i<e.length;i++)if(!t.hasOwnProperty(e[i]))return!1;return!0}},function(t,e,i){var n=i(77);t.exports=function(t,e){var i=n(t);for(var s in e)i.hasOwnProperty(s)&&(i[s]=e[s]);return i}},function(t,e,i){t.exports={Format:i(1489),Pad:i(186),RemoveAt:i(1490),Reverse:i(1491),UppercaseFirst:i(205),UUID:i(222)}},function(t,e){t.exports=function(t,e){return t.replace(/%([0-9]+)/g,(function(t,i){return e[Number(i)-1]}))}},function(t,e){t.exports=function(t,e){return 0===e?t.slice(1):t.slice(0,e-1)+t.slice(e)}},function(t,e){t.exports=function(t){return t.split("").reverse().join("")}},function(t,e,i){t.exports={SoundManagerCreator:i(426),Events:i(70),BaseSound:i(146),BaseSoundManager:i(145),WebAudioSound:i(434),WebAudioSoundManager:i(432),HTML5AudioSound:i(429),HTML5AudioSoundManager:i(427),NoAudioSound:i(431),NoAudioSoundManager:i(430)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){(function(e){var n=i(33),s=i(17),r={Actions:i(275),Animations:i(723),BlendModes:i(35),Cache:i(735),Cameras:i(738),Core:i(806),Class:i(0),Create:i(888),Curves:i(894),Data:i(896),Display:i(898),DOM:i(917),Events:i(918),Game:i(920),GameObjects:i(1011),Geom:i(483),Input:i(1308),Loader:i(1338),Math:i(193),Physics:{Arcade:i(1366)},Plugins:i(1403),Renderer:i(1405),Scale:i(1412),ScaleModes:i(168),Scene:i(418),Scenes:i(1413),Structs:i(1415),Textures:i(1416),Tilemaps:i(1418),Time:i(1461),Tweens:i(1463),Utils:i(1481)};r.Sound=i(1492),r=s(!1,r,n),t.exports=r,e.Phaser=r}).call(this,i(600))}],t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:n})},t.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var s in e)t.d(n,s,function(t){return e[t]}.bind(null,s));return n},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t.p="",t(t.s=1529);function t(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var e,i}()},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(7),a=i(0),o=function(t){function e(i,n){var s=t.call(this,i)||this;return e.currentInstance=s,a.GameVars.reactClass=n,s}return s(e,t),e.prototype.onBlur=function(){r.AudioManager.mute(),t.prototype.onBlur.call(this)},e.prototype.onFocus=function(){r.AudioManager.unmute(),t.prototype.onFocus.call(this)},e}(Phaser.Game);e.Game=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Serialize=e.RpcError=e.RpcInterfaces=e.Numeric=e.JsonRpc=e.ApiInterfaces=e.Api=void 0;var n=i(71);Object.defineProperty(e,"Api",{enumerable:!0,get:function(){return n.Api}});var s=i(82);e.ApiInterfaces=s;var r=i(83);Object.defineProperty(e,"JsonRpc",{enumerable:!0,get:function(){return r.JsonRpc}});var a=i(28);e.Numeric=a;var o=i(84);e.RpcInterfaces=o;var h=i(46);Object.defineProperty(e,"RpcError",{enumerable:!0,get:function(){return h.RpcError}});var l=i(42);e.Serialize=l},function(t,e,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var s in e=arguments[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)},s=this&&this.__read||function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,s,r=i.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)a.push(n.value)}catch(t){s={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(s)throw s.error}}return a},r=this&&this.__spreadArray||function(t,e){for(var i=0,n=e.length,s=t.length;i<n;i++,s++)t[s]=e[i];return t},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.serializeQuery=e.deserializeAnyArray=e.serializeAnyArray=e.deserializeAnyObject=e.serializeAnyObject=e.deserializeAnyvarShort=e.deserializeAnyvar=e.serializeAnyvar=e.deserializeAction=e.deserializeActionData=e.serializeAction=e.serializeActionData=e.transactionHeader=e.getTypesFromAbi=e.getType=e.createTransactionTypes=e.createTransactionExtensionTypes=e.createAbiTypes=e.createInitialTypes=e.hexToUint8Array=e.arrayToHex=e.symbolToString=e.stringToSymbol=e.blockTimestampToDate=e.dateToBlockTimestamp=e.timePointSecToDate=e.dateToTimePointSec=e.timePointToDate=e.dateToTimePoint=e.supportedAbiVersion=e.SerialBuffer=e.SerializerState=void 0;var o=i(28),h=function(t){void 0===t&&(t={}),this.skippedBinaryExtension=!1,this.options=t};e.SerializerState=h;var l=function(){function t(t){var e=void 0===t?{}:t,i=e.textEncoder,n=e.textDecoder,s=e.array;this.readPos=0,this.array=s||new Uint8Array(1024),this.length=s?s.length:0,this.textEncoder=i||new TextEncoder,this.textDecoder=n||new TextDecoder("utf-8",{fatal:!0})}return t.prototype.reserve=function(t){if(!(this.length+t<=this.array.length)){for(var e=this.array.length;this.length+t>e;)e=Math.ceil(1.5*e);var i=new Uint8Array(e);i.set(this.array),this.array=i}},t.prototype.haveReadData=function(){return this.readPos<this.length},t.prototype.restartRead=function(){this.readPos=0},t.prototype.asUint8Array=function(){return new Uint8Array(this.array.buffer,this.array.byteOffset,this.length)},t.prototype.pushArray=function(t){this.reserve(t.length),this.array.set(t,this.length),this.length+=t.length},t.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.pushArray(t)},t.prototype.get=function(){if(this.readPos<this.length)return this.array[this.readPos++];throw new Error("Read past end of buffer")},t.prototype.pushUint8ArrayChecked=function(t,e){if(t.length!==e)throw new Error("Binary data has incorrect size");this.pushArray(t)},t.prototype.getUint8Array=function(t){if(this.readPos+t>this.length)throw new Error("Read past end of buffer");var e=new Uint8Array(this.array.buffer,this.array.byteOffset+this.readPos,t);return this.readPos+=t,e},t.prototype.skip=function(t){if(this.readPos+t>this.length)throw new Error("Read past end of buffer");this.readPos+=t},t.prototype.pushUint16=function(t){this.push(t>>0&255,t>>8&255)},t.prototype.getUint16=function(){var t=0;return t|=this.get()<<0,t|=this.get()<<8},t.prototype.pushUint32=function(t){this.push(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},t.prototype.getUint32=function(){var t=0;return t|=this.get()<<0,t|=this.get()<<8,t|=this.get()<<16,(t|=this.get()<<24)>>>0},t.prototype.pushNumberAsUint64=function(t){this.pushUint32(t>>>0),this.pushUint32(Math.floor(t/4294967296)>>>0)},t.prototype.getUint64AsNumber=function(){var t=this.getUint32();return 4294967296*(this.getUint32()>>>0)+(t>>>0)},t.prototype.pushVaruint32=function(t){for(;;){if(!(t>>>7)){this.push(t);break}this.push(128|127&t),t>>>=7}},t.prototype.getVaruint32=function(){for(var t=0,e=0;;){var i=this.get();if(t|=(127&i)<<e,e+=7,!(128&i))break}return t>>>0},t.prototype.pushVarint32=function(t){this.pushVaruint32(t<<1^t>>31)},t.prototype.getVarint32=function(){var t=this.getVaruint32();return 1&t?~t>>1|2147483648:t>>>1},t.prototype.pushFloat32=function(t){this.pushArray(new Uint8Array(new Float32Array([t]).buffer))},t.prototype.getFloat32=function(){return new Float32Array(this.getUint8Array(4).slice().buffer)[0]},t.prototype.pushFloat64=function(t){this.pushArray(new Uint8Array(new Float64Array([t]).buffer))},t.prototype.getFloat64=function(){return new Float64Array(this.getUint8Array(8).slice().buffer)[0]},t.prototype.pushName=function(t){if("string"!=typeof t)throw new Error("Expected string containing name");if(!new RegExp(/^[.1-5a-z]{0,12}[.1-5a-j]?$/).test(t))throw new Error("Name should be less than 13 characters, or less than 14 if last character is between 1-5 or a-j, and only contain the following symbols .12345abcdefghijklmnopqrstuvwxyz");for(var e=function(t){return t>="a".charCodeAt(0)&&t<="z".charCodeAt(0)?t-"a".charCodeAt(0)+6:t>="1".charCodeAt(0)&&t<="5".charCodeAt(0)?t-"1".charCodeAt(0)+1:0},i=new Uint8Array(8),n=63,s=0;s<t.length;++s){var r=e(t.charCodeAt(s));n<5&&(r<<=1);for(var a=4;a>=0;--a)n>=0&&(i[Math.floor(n/8)]|=(r>>a&1)<<n%8,--n)}this.pushArray(i)},t.prototype.getName=function(){for(var t=this.getUint8Array(8),e="",i=63;i>=0;){for(var n=0,s=0;s<5;++s)i>=0&&(n=n<<1|t[Math.floor(i/8)]>>i%8&1,--i);e+=n>=6?String.fromCharCode(n+"a".charCodeAt(0)-6):n>=1?String.fromCharCode(n+"1".charCodeAt(0)-1):"."}for(;e.endsWith(".");)e=e.substr(0,e.length-1);return e},t.prototype.pushBytes=function(t){this.pushVaruint32(t.length),this.pushArray(t)},t.prototype.getBytes=function(){return this.getUint8Array(this.getVaruint32())},t.prototype.pushString=function(t){this.pushBytes(this.textEncoder.encode(t))},t.prototype.getString=function(){return this.textDecoder.decode(this.getBytes())},t.prototype.pushSymbolCode=function(t){if("string"!=typeof t)throw new Error("Expected string containing symbol_code");var e=[];for(e.push.apply(e,r([],s(this.textEncoder.encode(t))));e.length<8;)e.push(0);this.pushArray(e.slice(0,8))},t.prototype.getSymbolCode=function(){var t,e=this.getUint8Array(8);for(t=0;t<e.length&&e[t];++t);return this.textDecoder.decode(new Uint8Array(e.buffer,e.byteOffset,t))},t.prototype.pushSymbol=function(t){var e=t.name,i=t.precision;if(!/^[A-Z]{1,7}$/.test(e))throw new Error("Expected symbol to be A-Z and between one and seven characters");var n=[255&i];for(n.push.apply(n,r([],s(this.textEncoder.encode(e))));n.length<8;)n.push(0);this.pushArray(n.slice(0,8))},t.prototype.getSymbol=function(){var t,e=this.get(),i=this.getUint8Array(7);for(t=0;t<i.length&&i[t];++t);return{name:this.textDecoder.decode(new Uint8Array(i.buffer,i.byteOffset,t)),precision:e}},t.prototype.pushAsset=function(t){if("string"!=typeof t)throw new Error("Expected string containing asset");var e=0,i="",n=0;"-"===(t=t.trim())[e]&&(i+="-",++e);for(var s=!1;e<t.length&&t.charCodeAt(e)>="0".charCodeAt(0)&&t.charCodeAt(e)<="9".charCodeAt(0);)s=!0,i+=t[e],++e;if(!s)throw new Error("Asset must begin with a number");if("."===t[e])for(++e;e<t.length&&t.charCodeAt(e)>="0".charCodeAt(0)&&t.charCodeAt(e)<="9".charCodeAt(0);)i+=t[e],++n,++e;var r=t.substr(e).trim();this.pushArray(o.signedDecimalToBinary(8,i)),this.pushSymbol({name:r,precision:n})},t.prototype.getAsset=function(){var t=this.getUint8Array(8),e=this.getSymbol(),i=e.name,n=e.precision,s=o.signedBinaryToDecimal(t,n+1);return n&&(s=s.substr(0,s.length-n)+"."+s.substr(s.length-n)),s+" "+i},t.prototype.pushPublicKey=function(t){var e=o.stringToPublicKey(t);this.push(e.type),this.pushArray(e.data)},t.prototype.getPublicKey=function(){var t,e=this.get();if(e===o.KeyType.wa){var i=this.readPos;this.skip(34),this.skip(this.getVaruint32()),t=new Uint8Array(this.array.buffer,this.array.byteOffset+i,this.readPos-i)}else t=this.getUint8Array(o.publicKeyDataSize);return o.publicKeyToString({type:e,data:t})},t.prototype.pushPrivateKey=function(t){var e=o.stringToPrivateKey(t);this.push(e.type),this.pushArray(e.data)},t.prototype.getPrivateKey=function(){var t=this.get(),e=this.getUint8Array(o.privateKeyDataSize);return o.privateKeyToString({type:t,data:e})},t.prototype.pushSignature=function(t){var e=o.stringToSignature(t);this.push(e.type),this.pushArray(e.data)},t.prototype.getSignature=function(){var t,e=this.get();if(e===o.KeyType.wa){var i=this.readPos;this.skip(65),this.skip(this.getVaruint32()),this.skip(this.getVaruint32()),t=new Uint8Array(this.array.buffer,this.array.byteOffset+i,this.readPos-i)}else t=this.getUint8Array(o.signatureDataSize);return o.signatureToString({type:e,data:t})},t}();e.SerialBuffer=l;e.supportedAbiVersion=function(t){return t.startsWith("eosio::abi/1.")};var c=function(t){var e=Date.parse(t);if(Number.isNaN(e))throw new Error("Invalid time format");return e};e.dateToTimePoint=function(t){return Math.round(1e3*c(t+"Z"))};e.timePointToDate=function(t){var e=new Date(t/1e3).toISOString();return e.substr(0,e.length-1)};e.dateToTimePointSec=function(t){return Math.round(c(t+"Z")/1e3)};e.timePointSecToDate=function(t){var e=new Date(1e3*t).toISOString();return e.substr(0,e.length-1)};e.dateToBlockTimestamp=function(t){return Math.round((c(t+"Z")-9466848e5)/500)};e.blockTimestampToDate=function(t){var e=new Date(500*t+9466848e5).toISOString();return e.substr(0,e.length-1)};e.stringToSymbol=function(t){if("string"!=typeof t)throw new Error("Expected string containing symbol");var e=t.match(/^([0-9]+),([A-Z]+)$/);if(!e)throw new Error("Invalid symbol");return{name:e[2],precision:+e[1]}};e.symbolToString=function(t){var e=t.name;return t.precision+","+e};e.arrayToHex=function(t){var e,i,n="";try{for(var s=a(t),r=s.next();!r.done;r=s.next()){n+=("00"+r.value.toString(16)).slice(-2)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}return n.toUpperCase()};function u(t,e){throw new Error("Don't know how to serialize "+this.name)}function d(t){throw new Error("Don't know how to deserialize "+this.name)}function f(t,e,i,n){var s,r;if(void 0===i&&(i=new h),void 0===n&&(n=!0),"object"!=typeof e)throw new Error("expected object containing data: "+JSON.stringify(e));this.base&&this.base.serialize(t,e,i,n);try{for(var o=a(this.fields),l=o.next();!l.done;l=o.next()){var c=l.value;if(c.name in e){if(i.skippedBinaryExtension)throw new Error("unexpected "+this.name+"."+c.name);c.type.serialize(t,e[c.name],i,n&&c===this.fields[this.fields.length-1])}else{if(!n||!c.type.extensionOf)throw new Error("missing "+this.name+"."+c.name+" (type="+c.type.name+")");i.skippedBinaryExtension=!0}}}catch(t){s={error:t}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(s)throw s.error}}}function p(t,e,i){var n,s,r;void 0===e&&(e=new h),void 0===i&&(i=!0),r=this.base?this.base.deserialize(t,e,i):{};try{for(var o=a(this.fields),l=o.next();!l.done;l=o.next()){var c=l.value;i&&c.type.extensionOf&&!t.haveReadData()?e.skippedBinaryExtension=!0:r[c.name]=c.type.deserialize(t,e,i)}}catch(t){n={error:t}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(n)throw n.error}}return r}function g(t,e,i,n){if(!Array.isArray(e)||2!==e.length||"string"!=typeof e[0])throw new Error('expected variant: ["type", value]');var s=this.fields.findIndex((function(t){return t.name===e[0]}));if(s<0)throw new Error('type "'+e[0]+'" is not valid for variant');t.pushVaruint32(s),this.fields[s].type.serialize(t,e[1],i,n)}function m(t,e,i){var n=t.getVaruint32();if(n>=this.fields.length)throw new Error("type index "+n+" is not valid for variant");var s=this.fields[n];return[s.name,s.type.deserialize(t,e,i)]}function v(t,e,i,n){var s,r;t.pushVaruint32(e.length);try{for(var o=a(e),h=o.next();!h.done;h=o.next()){var l=h.value;this.arrayOf.serialize(t,l,i,!1)}}catch(t){s={error:t}}finally{try{h&&!h.done&&(r=o.return)&&r.call(o)}finally{if(s)throw s.error}}}function y(t,e,i){for(var n=t.getVaruint32(),s=[],r=0;r<n;++r)s.push(this.arrayOf.deserialize(t,e,!1));return s}function _(t,e,i,n){null==e?t.push(0):(t.push(1),this.optionalOf.serialize(t,e,i,n))}function x(t,e,i){return t.get()?this.optionalOf.deserialize(t,e,i):null}function w(t,e,i,n){this.extensionOf.serialize(t,e,i,n)}function b(t,e,i){return this.extensionOf.deserialize(t,e,i)}function E(t,e,i,n){var r,o,h=Object.entries(e);t.pushVaruint32(h.length);try{for(var l=a(h),c=l.next();!c.done;c=l.next()){var u=s(c.value,2),d=u[0],f=u[1],p=this.fields[0].type,g=this.fields[1].type;p.serialize(t,d,i,n),g.serialize(t,f,i,n)}}catch(t){r={error:t}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}}function T(t,e,i){for(var n=t.getVaruint32(),s={},r=0;r<n;++r){var a=this.fields[0].type,o=this.fields[1].type;s[a.deserialize(t,e,i)]=o.deserialize(t,e,i)}return s}function S(t,e,i,n){var s=this;t.pushVaruint32(e.length),e.forEach((function(e){s.fields[0].type.serialize(t,e[0],i,n),s.fields[1].type.serialize(t,e[1],i,n)}))}function A(t,e,i){for(var n=[],s=t.getVaruint32(),r=0;r<s;++r)n.push(this.fields[0].type.deserialize(t,e,i)),n.push(this.fields[1].type.deserialize(t,e,i));return n}e.hexToUint8Array=function(t){if("string"!=typeof t)throw new Error("Expected string containing hex digits");if(t.length%2)throw new Error("Odd number of hex digits");for(var e=t.length/2,i=new Uint8Array(e),n=0;n<e;++n){var s=parseInt(t.substr(2*n,2),16);if(Number.isNaN(s))throw new Error("Expected hex string");i[n]=s}return i};var O=function(t){return n({name:"<missing name>",aliasOfName:"",arrayOf:null,optionalOf:null,extensionOf:null,baseName:"",base:null,fields:[],serialize:u,deserialize:d},t)},C=function(t,e){if(Number.isNaN(+t)||Number.isNaN(+e)||"number"!=typeof t&&"string"!=typeof t)throw new Error("Expected number");if(+t!=+e)throw new Error("Number is out of range");return+t};e.createInitialTypes=function(){var t=new Map(Object.entries({bool:O({name:"bool",serialize:function(t,e){if("boolean"!=typeof e&&("number"!=typeof e||1!==e&&0!==e))throw new Error("Expected boolean or number equal to 1 or 0");t.push(e?1:0)},deserialize:function(t){return!!t.get()}}),uint8:O({name:"uint8",serialize:function(t,e){t.push(C(e,255&e))},deserialize:function(t){return t.get()}}),int8:O({name:"int8",serialize:function(t,e){t.push(C(e,e<<24>>24))},deserialize:function(t){return t.get()<<24>>24}}),uint16:O({name:"uint16",serialize:function(t,e){t.pushUint16(C(e,65535&e))},deserialize:function(t){return t.getUint16()}}),int16:O({name:"int16",serialize:function(t,e){t.pushUint16(C(e,e<<16>>16))},deserialize:function(t){return t.getUint16()<<16>>16}}),uint32:O({name:"uint32",serialize:function(t,e){t.pushUint32(C(e,e>>>0))},deserialize:function(t){return t.getUint32()}}),uint64:O({name:"uint64",serialize:function(t,e){t.pushArray(o.decimalToBinary(8,""+e))},deserialize:function(t){return o.binaryToDecimal(t.getUint8Array(8))}}),int64:O({name:"int64",serialize:function(t,e){t.pushArray(o.signedDecimalToBinary(8,""+e))},deserialize:function(t){return o.signedBinaryToDecimal(t.getUint8Array(8))}}),int32:O({name:"int32",serialize:function(t,e){t.pushUint32(C(e,0|e))},deserialize:function(t){return 0|t.getUint32()}}),varuint32:O({name:"varuint32",serialize:function(t,e){t.pushVaruint32(C(e,e>>>0))},deserialize:function(t){return t.getVaruint32()}}),varint32:O({name:"varint32",serialize:function(t,e){t.pushVarint32(C(e,0|e))},deserialize:function(t){return t.getVarint32()}}),uint128:O({name:"uint128",serialize:function(t,e){t.pushArray(o.decimalToBinary(16,""+e))},deserialize:function(t){return o.binaryToDecimal(t.getUint8Array(16))}}),int128:O({name:"int128",serialize:function(t,e){t.pushArray(o.signedDecimalToBinary(16,""+e))},deserialize:function(t){return o.signedBinaryToDecimal(t.getUint8Array(16))}}),float32:O({name:"float32",serialize:function(t,e){t.pushFloat32(e)},deserialize:function(t){return t.getFloat32()}}),float64:O({name:"float64",serialize:function(t,e){t.pushFloat64(e)},deserialize:function(t){return t.getFloat64()}}),float128:O({name:"float128",serialize:function(t,i){t.pushUint8ArrayChecked(e.hexToUint8Array(i),16)},deserialize:function(t){return e.arrayToHex(t.getUint8Array(16))}}),bytes:O({name:"bytes",serialize:function(t,i){i instanceof Uint8Array||Array.isArray(i)?t.pushBytes(i):t.pushBytes(e.hexToUint8Array(i))},deserialize:function(t,i){return i&&i.options.bytesAsUint8Array?t.getBytes():e.arrayToHex(t.getBytes())}}),string:O({name:"string",serialize:function(t,e){t.pushString(e)},deserialize:function(t){return t.getString()}}),name:O({name:"name",serialize:function(t,e){t.pushName(e)},deserialize:function(t){return t.getName()}}),time_point:O({name:"time_point",serialize:function(t,i){t.pushNumberAsUint64(e.dateToTimePoint(i))},deserialize:function(t){return e.timePointToDate(t.getUint64AsNumber())}}),time_point_sec:O({name:"time_point_sec",serialize:function(t,i){t.pushUint32(e.dateToTimePointSec(i))},deserialize:function(t){return e.timePointSecToDate(t.getUint32())}}),block_timestamp_type:O({name:"block_timestamp_type",serialize:function(t,i){t.pushUint32(e.dateToBlockTimestamp(i))},deserialize:function(t){return e.blockTimestampToDate(t.getUint32())}}),symbol_code:O({name:"symbol_code",serialize:function(t,e){t.pushSymbolCode(e)},deserialize:function(t){return t.getSymbolCode()}}),symbol:O({name:"symbol",serialize:function(t,i){t.pushSymbol(e.stringToSymbol(i))},deserialize:function(t){return e.symbolToString(t.getSymbol())}}),asset:O({name:"asset",serialize:function(t,e){t.pushAsset(e)},deserialize:function(t){return t.getAsset()}}),checksum160:O({name:"checksum160",serialize:function(t,i){t.pushUint8ArrayChecked(e.hexToUint8Array(i),20)},deserialize:function(t){return e.arrayToHex(t.getUint8Array(20))}}),checksum256:O({name:"checksum256",serialize:function(t,i){t.pushUint8ArrayChecked(e.hexToUint8Array(i),32)},deserialize:function(t){return e.arrayToHex(t.getUint8Array(32))}}),checksum512:O({name:"checksum512",serialize:function(t,i){t.pushUint8ArrayChecked(e.hexToUint8Array(i),64)},deserialize:function(t){return e.arrayToHex(t.getUint8Array(64))}}),public_key:O({name:"public_key",serialize:function(t,e){t.pushPublicKey(e)},deserialize:function(t){return t.getPublicKey()}}),private_key:O({name:"private_key",serialize:function(t,e){t.pushPrivateKey(e)},deserialize:function(t){return t.getPrivateKey()}}),signature:O({name:"signature",serialize:function(t,e){t.pushSignature(e)},deserialize:function(t){return t.getSignature()}})}));return t.set("extended_asset",O({name:"extended_asset",baseName:"",fields:[{name:"quantity",typeName:"asset",type:t.get("asset")},{name:"contract",typeName:"name",type:t.get("name")}],serialize:f,deserialize:p})),t};e.createAbiTypes=function(){var t=e.createInitialTypes();return t.set("extensions_entry",O({name:"extensions_entry",baseName:"",fields:[{name:"tag",typeName:"uint16",type:null},{name:"value",typeName:"bytes",type:null}],serialize:f,deserialize:p})),t.set("type_def",O({name:"type_def",baseName:"",fields:[{name:"new_type_name",typeName:"string",type:null},{name:"type",typeName:"string",type:null}],serialize:f,deserialize:p})),t.set("field_def",O({name:"field_def",baseName:"",fields:[{name:"name",typeName:"string",type:null},{name:"type",typeName:"string",type:null}],serialize:f,deserialize:p})),t.set("struct_def",O({name:"struct_def",baseName:"",fields:[{name:"name",typeName:"string",type:null},{name:"base",typeName:"string",type:null},{name:"fields",typeName:"field_def[]",type:null}],serialize:f,deserialize:p})),t.set("action_def",O({name:"action_def",baseName:"",fields:[{name:"name",typeName:"name",type:null},{name:"type",typeName:"string",type:null},{name:"ricardian_contract",typeName:"string",type:null}],serialize:f,deserialize:p})),t.set("table_def",O({name:"table_def",baseName:"",fields:[{name:"name",typeName:"name",type:null},{name:"index_type",typeName:"string",type:null},{name:"key_names",typeName:"string[]",type:null},{name:"key_types",typeName:"string[]",type:null},{name:"type",typeName:"string",type:null}],serialize:f,deserialize:p})),t.set("clause_pair",O({name:"clause_pair",baseName:"",fields:[{name:"id",typeName:"string",type:null},{name:"body",typeName:"string",type:null}],serialize:f,deserialize:p})),t.set("error_message",O({name:"error_message",baseName:"",fields:[{name:"error_code",typeName:"uint64",type:null},{name:"error_msg",typeName:"string",type:null}],serialize:f,deserialize:p})),t.set("variant_def",O({name:"variant_def",baseName:"",fields:[{name:"name",typeName:"string",type:null},{name:"types",typeName:"string[]",type:null}],serialize:f,deserialize:p})),t.set("action_result",O({name:"action_result",baseName:"",fields:[{name:"name",typeName:"name",type:null},{name:"result_type",typeName:"string",type:null}],serialize:f,deserialize:p})),t.set("primary_key_index_def",O({name:"primary_key_index_def",baseName:"",fields:[{name:"name",typeName:"name",type:null},{name:"type",typeName:"string",type:null}],serialize:f,deserialize:p})),t.set("secondary_index_def",O({name:"secondary_index_def",baseName:"",fields:[{name:"type",typeName:"string",type:null}],serialize:f,deserialize:p})),t.set("secondary_indices",O({name:"secondary_indices",baseName:"",fields:[{name:"name",typeName:"name",type:null},{name:"secondary_index_def",typeName:"secondary_index_def",type:null}],serialize:E,deserialize:T})),t.set("kv_table_entry_def",O({name:"kv_table_entry_def",baseName:"",fields:[{name:"type",typeName:"string",type:null},{name:"primary_index",typeName:"primary_key_index_def",type:null},{name:"secondary_indices",typeName:"secondary_indices",type:null}],serialize:f,deserialize:p})),t.set("kv_table",O({name:"kv_table",baseName:"",fields:[{name:"name",typeName:"name",type:null},{name:"kv_table_entry_def",typeName:"kv_table_entry_def",type:null}],serialize:E,deserialize:T})),t.set("abi_def",O({name:"abi_def",baseName:"",fields:[{name:"version",typeName:"string",type:null},{name:"types",typeName:"type_def[]",type:null},{name:"structs",typeName:"struct_def[]",type:null},{name:"actions",typeName:"action_def[]",type:null},{name:"tables",typeName:"table_def[]",type:null},{name:"ricardian_clauses",typeName:"clause_pair[]",type:null},{name:"error_messages",typeName:"error_message[]",type:null},{name:"abi_extensions",typeName:"extensions_entry[]",type:null},{name:"variants",typeName:"variant_def[]$",type:null},{name:"action_results",typeName:"action_result[]$",type:null},{name:"kv_tables",typeName:"kv_table$",type:null}],serialize:f,deserialize:p})),t};e.createTransactionExtensionTypes=function(){var t=e.createInitialTypes();return t.set("resource_payer",O({name:"resource_payer",baseName:"",fields:[{name:"payer",typeName:"name",type:null},{name:"max_net_bytes",typeName:"uint64",type:null},{name:"max_cpu_us",typeName:"uint64",type:null},{name:"max_memory_bytes",typeName:"uint64",type:null}],serialize:f,deserialize:p})),t};e.createTransactionTypes=function(){var t=e.createInitialTypes();return t.set("permission_level",O({name:"permission_level",baseName:"",fields:[{name:"actor",typeName:"name",type:null},{name:"permission",typeName:"name",type:null}],serialize:f,deserialize:p})),t.set("action",O({name:"action",baseName:"",fields:[{name:"account",typeName:"name",type:null},{name:"name",typeName:"name",type:null},{name:"authorization",typeName:"permission_level[]",type:null},{name:"data",typeName:"bytes",type:null}],serialize:f,deserialize:p})),t.set("extension",O({name:"extension",baseName:"",fields:[{name:"type",typeName:"uint16",type:null},{name:"data",typeName:"bytes",type:null}],serialize:S,deserialize:A})),t.set("transaction_header",O({name:"transaction_header",baseName:"",fields:[{name:"expiration",typeName:"time_point_sec",type:null},{name:"ref_block_num",typeName:"uint16",type:null},{name:"ref_block_prefix",typeName:"uint32",type:null},{name:"max_net_usage_words",typeName:"varuint32",type:null},{name:"max_cpu_usage_ms",typeName:"uint8",type:null},{name:"delay_sec",typeName:"varuint32",type:null}],serialize:f,deserialize:p})),t.set("transaction",O({name:"transaction",baseName:"transaction_header",fields:[{name:"context_free_actions",typeName:"action[]",type:null},{name:"actions",typeName:"action[]",type:null},{name:"transaction_extensions",typeName:"extension",type:null}],serialize:f,deserialize:p})),t};e.getType=function(t,i){var n=t.get(i);if(n&&n.aliasOfName)return e.getType(t,n.aliasOfName);if(n)return n;if(i.endsWith("[]"))return O({name:i,arrayOf:e.getType(t,i.substr(0,i.length-2)),serialize:v,deserialize:y});if(i.endsWith("?"))return O({name:i,optionalOf:e.getType(t,i.substr(0,i.length-1)),serialize:_,deserialize:x});if(i.endsWith("$"))return O({name:i,extensionOf:e.getType(t,i.substr(0,i.length-1)),serialize:w,deserialize:b});throw new Error("Unknown type: "+i)};e.getTypesFromAbi=function(t,i){var n,r,o,h,l,c,u,d,v,y,_=new Map(t);if(i&&i.types)try{for(var x=a(i.types),w=x.next();!w.done;w=x.next()){var b=w.value,E=b.new_type_name,T=b.type;_.set(E,O({name:E,aliasOfName:T}))}}catch(t){n={error:t}}finally{try{w&&!w.done&&(r=x.return)&&r.call(x)}finally{if(n)throw n.error}}if(i&&i.structs)try{for(var S=a(i.structs),A=S.next();!A.done;A=S.next()){var C=A.value,P=C.name,L=C.base,R=C.fields;_.set(P,O({name:P,baseName:L,fields:R.map((function(t){return{name:t.name,typeName:t.type,type:null}})),serialize:f,deserialize:p}))}}catch(t){o={error:t}}finally{try{A&&!A.done&&(h=S.return)&&h.call(S)}finally{if(o)throw o.error}}if(i&&i.variants)try{for(var I=a(i.variants),M=I.next();!M.done;M=I.next()){var D=M.value,k=D.name,N=D.types;_.set(k,O({name:k,fields:N.map((function(t){return{name:t,typeName:t,type:null}})),serialize:g,deserialize:m}))}}catch(t){l={error:t}}finally{try{M&&!M.done&&(c=I.return)&&c.call(I)}finally{if(l)throw l.error}}try{for(var F=a(_),G=F.next();!G.done;G=F.next()){var B=s(G.value,2);B[0];(T=B[1]).baseName&&(T.base=e.getType(_,T.baseName));try{for(var z=(v=void 0,a(T.fields)),U=z.next();!U.done;U=z.next()){var Y=U.value;Y.type=e.getType(_,Y.typeName)}}catch(t){v={error:t}}finally{try{U&&!U.done&&(y=z.return)&&y.call(z)}finally{if(v)throw v.error}}}}catch(t){u={error:t}}finally{try{G&&!G.done&&(d=F.return)&&d.call(F)}finally{if(u)throw u.error}}return _};e.transactionHeader=function(t,i){var n,s=t.header?t.header.timestamp:t.timestamp,r=parseInt((n=t.id.substr(16,8)).substr(6,2)+n.substr(4,2)+n.substr(2,2)+n.substr(0,2),16);return{expiration:e.timePointSecToDate(e.dateToTimePointSec(s)+i),ref_block_num:65535&t.block_num,ref_block_prefix:r}};e.serializeActionData=function(t,i,n,s,r,a){var o=t.actions.get(n);if(!o)throw new Error("Unknown action "+n+" in contract "+i);var h=new l({textEncoder:r,textDecoder:a});return o.serialize(h,s),e.arrayToHex(h.asUint8Array())};e.serializeAction=function(t,i,n,s,r,a,o){return{account:i,name:n,authorization:s,data:e.serializeActionData(t,i,n,r,a,o)}};e.deserializeActionData=function(t,i,n,s,r,a){var o=t.actions.get(n);if("string"==typeof s&&(s=e.hexToUint8Array(s)),!o)throw new Error("Unknown action "+n+" in contract "+i);var h=new l({textDecoder:a,textEncoder:r});return h.pushArray(s),o.deserialize(h)};e.deserializeAction=function(t,i,n,s,r,a,o){return{account:i,name:n,authorization:s,data:e.deserializeActionData(t,i,n,r,a,o)}};e.serializeAnyvar=function(t,e){var i,n,r,a,o,h,l,c,u;null===e?(c=(i=s([R.null_t,e],2))[0],u=i[1]):"string"==typeof e?(c=(n=s([R.string,e],2))[0],u=n[1]):"number"==typeof e?(c=(r=s([R.int32,e],2))[0],u=r[1]):e instanceof Uint8Array?(c=(a=s([R.bytes,e],2))[0],u=a[1]):Array.isArray(e)?(c=(o=s([R.any_array,e],2))[0],u=o[1]):2===Object.keys(e).length&&e.hasOwnProperty("type")&&e.hasOwnProperty("value")?(c=(h=s([R[e.type],e.value],2))[0],u=h[1]):(c=(l=s([R.any_object,e],2))[0],u=l[1]),t.pushVaruint32(c.index),c.type.serialize(t,u)};e.deserializeAnyvar=function(t,e){var i=t.getVaruint32();if(i>=I.length)throw new Error("Tried to deserialize unknown anyvar type");var n=I[i],s=n.type.deserialize(t,e);return e&&e.options.useShortForm||n.useShortForm?s:{type:n.type.name,value:s}};e.deserializeAnyvarShort=function(t){return e.deserializeAnyvar(t,new h({useShortForm:!0}))};e.serializeAnyObject=function(t,i){var n,r,o=Object.entries(i);t.pushVaruint32(o.length);try{for(var h=a(o),l=h.next();!l.done;l=h.next()){var c=s(l.value,2),u=c[0],d=c[1];t.pushString(u),e.serializeAnyvar(t,d)}}catch(t){n={error:t}}finally{try{l&&!l.done&&(r=h.return)&&r.call(h)}finally{if(n)throw n.error}}};e.deserializeAnyObject=function(t,i){for(var n=t.getVaruint32(),s={},r=0;r<n;++r){var a=t.getString();if(a in s){for(var o=1;a+"_"+o in s;)++o;a=a+"_"+o}s[a]=e.deserializeAnyvar(t,i)}return s};e.serializeAnyArray=function(t,i){var n,s;t.pushVaruint32(i.length);try{for(var r=a(i),o=r.next();!o.done;o=r.next()){var h=o.value;e.serializeAnyvar(t,h)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(s=r.return)&&s.call(r)}finally{if(n)throw n.error}}};e.deserializeAnyArray=function(t,i){for(var n=t.getVaruint32(),s=[],r=0;r<n;++r)s.push(e.deserializeAnyvar(t,i));return s};var P,L=((P=e.createInitialTypes()).set("null_t",O({name:"null_t",serialize:function(t,e){},deserialize:function(t,e){}})),P.set("any_object",O({name:"any_object",serialize:e.serializeAnyObject,deserialize:e.deserializeAnyObject})),P.set("any_array",O({name:"any_array",serialize:e.serializeAnyArray,deserialize:e.deserializeAnyArray})),P),R={null_t:{index:0,useShortForm:!0,type:L.get("null_t")},int64:{index:1,useShortForm:!1,type:L.get("int64")},uint64:{index:2,useShortForm:!1,type:L.get("uint64")},int32:{index:3,useShortForm:!0,type:L.get("int32")},uint32:{index:4,useShortForm:!1,type:L.get("uint32")},int16:{index:5,useShortForm:!1,type:L.get("int16")},uint16:{index:6,useShortForm:!1,type:L.get("uint16")},int8:{index:7,useShortForm:!1,type:L.get("int8")},uint8:{index:8,useShortForm:!1,type:L.get("uint8")},time_point:{index:9,useShortForm:!1,type:L.get("time_point")},checksum256:{index:10,useShortForm:!1,type:L.get("checksum256")},float64:{index:11,useShortForm:!1,type:L.get("float64")},string:{index:12,useShortForm:!0,type:L.get("string")},any_object:{index:13,useShortForm:!0,type:L.get("any_object")},any_array:{index:14,useShortForm:!0,type:L.get("any_array")},bytes:{index:15,useShortForm:!1,type:L.get("bytes")},symbol:{index:16,useShortForm:!1,type:L.get("symbol")},symbol_code:{index:17,useShortForm:!1,type:L.get("symbol_code")},asset:{index:18,useShortForm:!1,type:L.get("asset")}},I=[R.null_t,R.int64,R.uint64,R.int32,R.uint32,R.int16,R.uint16,R.int8,R.uint8,R.time_point,R.checksum256,R.float64,R.string,R.any_object,R.any_array,R.bytes,R.symbol,R.symbol_code,R.asset];e.serializeQuery=function(t,i){var n,r,o,h,l,c,u,d;if("string"==typeof i?c=i:Array.isArray(i)&&2===i.length?(c=(n=s(i,2))[0],d=n[1]):Array.isArray(i)&&3===i.length?(c=(r=s(i,3))[0],u=r[1],d=r[2]):(c=(o=s([i.method,i.arg,i.filter],3))[0],u=o[1],d=o[2]),t.pushString(c),void 0===u?t.push(0):(t.push(1),e.serializeAnyvar(t,u)),void 0===d)t.push(0);else{t.pushVaruint32(d.length);try{for(var f=a(d),p=f.next();!p.done;p=f.next()){var g=p.value;e.serializeQuery(t,g)}}catch(t){h={error:t}}finally{try{p&&!p.done&&(l=f.return)&&l.call(f)}finally{if(h)throw h.error}}}}},function(t,e,i){"use strict";var n=i(10).rotr32;function s(t,e,i){return t&e^~t&i}function r(t,e,i){return t&e^t&i^e&i}function a(t,e,i){return t^e^i}e.ft_1=function(t,e,i,n){return 0===t?s(e,i,n):1===t||3===t?a(e,i,n):2===t?r(e,i,n):void 0},e.ch32=s,e.maj32=r,e.p32=a,e.s0_256=function(t){return n(t,2)^n(t,13)^n(t,22)},e.s1_256=function(t){return n(t,6)^n(t,11)^n(t,25)},e.g0_256=function(t){return n(t,7)^n(t,18)^t>>>3},e.g1_256=function(t){return n(t,17)^n(t,19)^t>>>10}},function(t,e,i){"use strict";var n=i(10),s=i(18),r=i(43),a=i(17),o=n.sum32,h=n.sum32_4,l=n.sum32_5,c=r.ch32,u=r.maj32,d=r.s0_256,f=r.s1_256,p=r.g0_256,g=r.g1_256,m=s.BlockHash,v=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function y(){if(!(this instanceof y))return new y;m.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=v,this.W=new Array(64)}n.inherits(y,m),t.exports=y,y.blockSize=512,y.outSize=256,y.hmacStrength=192,y.padLength=64,y.prototype._update=function(t,e){for(var i=this.W,n=0;n<16;n++)i[n]=t[e+n];for(;n<i.length;n++)i[n]=h(g(i[n-2]),i[n-7],p(i[n-15]),i[n-16]);var s=this.h[0],r=this.h[1],m=this.h[2],v=this.h[3],y=this.h[4],_=this.h[5],x=this.h[6],w=this.h[7];for(a(this.k.length===i.length),n=0;n<i.length;n++){var b=l(w,f(y),c(y,_,x),this.k[n],i[n]),E=o(d(s),u(s,r,m));w=x,x=_,_=y,y=o(v,b),v=m,m=r,r=s,s=o(b,E)}this.h[0]=o(this.h[0],s),this.h[1]=o(this.h[1],r),this.h[2]=o(this.h[2],m),this.h[3]=o(this.h[3],v),this.h[4]=o(this.h[4],y),this.h[5]=o(this.h[5],_),this.h[6]=o(this.h[6],x),this.h[7]=o(this.h[7],w)},y.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(t,e,i){"use strict";var n=i(10),s=i(18),r=i(17),a=n.rotr64_hi,o=n.rotr64_lo,h=n.shr64_hi,l=n.shr64_lo,c=n.sum64,u=n.sum64_hi,d=n.sum64_lo,f=n.sum64_4_hi,p=n.sum64_4_lo,g=n.sum64_5_hi,m=n.sum64_5_lo,v=s.BlockHash,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function _(){if(!(this instanceof _))return new _;v.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=y,this.W=new Array(160)}function x(t,e,i,n,s){var r=t&i^~t&s;return r<0&&(r+=4294967296),r}function w(t,e,i,n,s,r){var a=e&n^~e&r;return a<0&&(a+=4294967296),a}function b(t,e,i,n,s){var r=t&i^t&s^i&s;return r<0&&(r+=4294967296),r}function E(t,e,i,n,s,r){var a=e&n^e&r^n&r;return a<0&&(a+=4294967296),a}function T(t,e){var i=a(t,e,28)^a(e,t,2)^a(e,t,7);return i<0&&(i+=4294967296),i}function S(t,e){var i=o(t,e,28)^o(e,t,2)^o(e,t,7);return i<0&&(i+=4294967296),i}function A(t,e){var i=a(t,e,14)^a(t,e,18)^a(e,t,9);return i<0&&(i+=4294967296),i}function O(t,e){var i=o(t,e,14)^o(t,e,18)^o(e,t,9);return i<0&&(i+=4294967296),i}function C(t,e){var i=a(t,e,1)^a(t,e,8)^h(t,e,7);return i<0&&(i+=4294967296),i}function P(t,e){var i=o(t,e,1)^o(t,e,8)^l(t,e,7);return i<0&&(i+=4294967296),i}function L(t,e){var i=a(t,e,19)^a(e,t,29)^h(t,e,6);return i<0&&(i+=4294967296),i}function R(t,e){var i=o(t,e,19)^o(e,t,29)^l(t,e,6);return i<0&&(i+=4294967296),i}n.inherits(_,v),t.exports=_,_.blockSize=1024,_.outSize=512,_.hmacStrength=192,_.padLength=128,_.prototype._prepareBlock=function(t,e){for(var i=this.W,n=0;n<32;n++)i[n]=t[e+n];for(;n<i.length;n+=2){var s=L(i[n-4],i[n-3]),r=R(i[n-4],i[n-3]),a=i[n-14],o=i[n-13],h=C(i[n-30],i[n-29]),l=P(i[n-30],i[n-29]),c=i[n-32],u=i[n-31];i[n]=f(s,r,a,o,h,l,c,u),i[n+1]=p(s,r,a,o,h,l,c,u)}},_.prototype._update=function(t,e){this._prepareBlock(t,e);var i=this.W,n=this.h[0],s=this.h[1],a=this.h[2],o=this.h[3],h=this.h[4],l=this.h[5],f=this.h[6],p=this.h[7],v=this.h[8],y=this.h[9],_=this.h[10],C=this.h[11],P=this.h[12],L=this.h[13],R=this.h[14],I=this.h[15];r(this.k.length===i.length);for(var M=0;M<i.length;M+=2){var D=R,k=I,N=A(v,y),F=O(v,y),G=x(v,y,_,C,P),B=w(v,y,_,C,P,L),z=this.k[M],U=this.k[M+1],Y=i[M],X=i[M+1],H=g(D,k,N,F,G,B,z,U,Y,X),j=m(D,k,N,F,G,B,z,U,Y,X);D=T(n,s),k=S(n,s),N=b(n,s,a,o,h),F=E(n,s,a,o,h,l);var W=u(D,k,N,F),V=d(D,k,N,F);R=P,I=L,P=_,L=C,_=v,C=y,v=u(f,p,H,j),y=d(p,p,H,j),f=h,p=l,h=a,l=o,a=n,o=s,n=u(H,j,W,V),s=d(H,j,W,V)}c(this.h,0,n,s),c(this.h,2,a,o),c(this.h,4,h,l),c(this.h,6,f,p),c(this.h,8,v,y),c(this.h,10,_,C),c(this.h,12,P,L),c(this.h,14,R,I)},_.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.RpcError=void 0;var r=function(t){function e(i){var n=this;return i.error&&i.error.details&&i.error.details.length&&i.error.details[0].message?(n=t.call(this,i.error.details[0].message)||this).details=i.error.details:i.processed&&i.processed.except&&i.processed.except.message?(n=t.call(this,i.processed.except.message)||this).details=i.processed.except:i.result&&i.result.except&&i.result.except.message?(n=t.call(this,i.result.except.message)||this).details=i.result.except:n=t.call(this,i.message)||this,Object.setPrototypeOf(n,e.prototype),n.json=i,n}return s(e,t),e}(Error);e.RpcError=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(29);class s extends n.ActionGenerator{constructor(t,e){super(t),this.api=e,this.config=e.getConfig()}async createcol(t,e,i,s,r,a,o,h){return super.createcol(t,e,i,s,r,a,o,n.toAttributeMap(h,(await this.config).collection_format))}async createtempl(t,e,i,s,r,a,o,h){const l=await this.api.getSchema(i,s),c=n.toAttributeMap(h,l.format);return super.createtempl(t,e,i,s,r,a,o,c)}async mintasset(t,e,i,s,r,a,o,h,l){const c=await this.api.getSchema(i,s),u=n.toAttributeMap(o,c.format),d=n.toAttributeMap(h,c.format);return super.mintasset(t,e,i,s,r,a,u,d,l)}async setassetdata(t,e,i,s,r){const a=await this.api.getAsset(s),o=n.toAttributeMap(r,a.schema.format);return super.setassetdata(t,e,i,s,o)}async setcoldata(t,e,i){const s=n.toAttributeMap(i,(await this.config).collection_format);return super.setcoldata(t,e,s)}}e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(29);class s extends n.ActionGenerator{constructor(t){super(t.contract),this.api=t}async createcol(t,e,i,s,r,a,o,h){const l=await this.api.config();return super.createcol(t,e,i,s,r,a,o,n.toAttributeMap(h,l.collection_format))}async createtempl(t,e,i,s,r,a,o,h){const l=await this.api.getSchema(i,s),c=n.toAttributeMap(h,await l.rawFormat());return super.createtempl(t,e,i,s,r,a,o,c)}async mintasset(t,e,i,s,r,a,o,h,l){const c=await this.api.getTemplate(i,r),u=n.toAttributeMap(o,await(await c.schema()).rawFormat()),d=n.toAttributeMap(h,await(await c.schema()).rawFormat());return super.mintasset(t,e,i,s,r,a,u,d,l)}async setassetdata(t,e,i,s,r){const a=await this.api.getAsset(i,s),o=await a.schema(),h=n.toAttributeMap(r,await o.rawFormat());return super.setassetdata(t,e,i,s,h)}async setcoldata(t,e,i){const s=n.toAttributeMap(i,(await this.api.config()).collection_format);return super.setcoldata(t,e,s)}}e.default=s},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(22),r=n(i(32)),a=n(i(34)),o=n(i(52));e.default=class{constructor(t,e,i,n,s,h,l,c=!0){this.api=t,this.owner=e,this.id=i,this._data=new Promise(async(s,r)=>{if(n)s(n);else try{s(await t.queue.fetchAsset(e,i,c))}catch(t){r(t)}}),this._template=new Promise(async(e,i)=>{if(l)e(l);else try{const i=await this._data;if(Number(i.template_id)<0)return e(null);e(new o.default(t,i.collection_name,i.template_id,void 0,void 0,c))}catch(t){i(t)}}),this._collection=new Promise(async(e,i)=>{if(s)e(s);else try{const i=await this._data;e(new r.default(t,i.collection_name,void 0,c))}catch(t){i(t)}}),this._schema=new Promise(async(e,i)=>{if(h)e(h);else try{const i=await this._data;e(new a.default(t,i.collection_name,i.schema_name,void 0,c))}catch(t){i(t)}})}async template(){return await this._template}async collection(){return await this._collection}async schema(){return await this._schema}async backedTokens(){return(await this._data).backed_tokens}async immutableData(){const t=await this.schema(),e=await this._data;return s.deserialize(e.immutable_serialized_data,await t.format())}async mutableData(){const t=await this.schema(),e=await this._data;return s.deserialize(e.mutable_serialized_data,await t.format())}async data(){const t=await this.mutableData(),e=await this.immutableData(),i=await this.template(),n=i?await i.immutableData():{};return Object.assign({},t,e,n)}async toObject(){const t=await this.template(),e=await this.collection(),i=await this.schema();return{asset_id:this.id,collection:await e.toObject(),schema:await i.toObject(),template:t?await t.toObject():null,backedTokens:await this.backedTokens(),immutableData:await this.immutableData(),mutableData:await this.mutableData(),data:await this.data()}}}},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=n(i(30)),r=i(13);e.default=class{constructor(t){this.attributes=t,this.reserved=4}deserialize(t,e=!1){const i={};for(;t.position<t.data.length;){const n=r.varint_decode(t);if(n.equals(0))break;const s=this.getAttribute(n.toJSNumber(),!e);s&&(i[s.name]=s.value.deserialize(t))}return i}serialize(t){const e=[];for(let i=0;i<this.attributes.length;i++){const n=this.attributes[i];void 0!==t[n.name]&&(e.push(r.varint_encode(i+this.reserved)),e.push(n.value.serialize(t[n.name])))}return e.push(r.varint_encode(0)),r.concat_byte_arrays(e)}getAttribute(t,e=!0){const i=t-this.reserved;if(!(i>=this.attributes.length))return this.attributes[Number(i)];if(e)throw new s.default("attribute does not exists")}}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(22),r=n(i(34));e.default=class{constructor(t,e,i,n,s,a=!0){this.api=t,this.collection=e,this.id=i,this._data=new Promise(async(s,r)=>{if(n)s(n);else try{s(await t.queue.fetchTemplate(e,i,a))}catch(t){r(t)}}),this._schema=new Promise(async(t,i)=>{if(s)t(s);else try{const i=await this._data;t(new r.default(this.api,e,i.schema_name,void 0,a))}catch(t){i(t)}})}async schema(){return await this._schema}async immutableData(){const t=await this._schema;return s.deserialize((await this._data).immutable_serialized_data,await t.format())}async isTransferable(){return(await this._data).transferable}async isBurnable(){return(await this._data).burnable}async maxSupply(){return(await this._data).max_supply}async circulation(){return(await this._data).issued_supply}async toObject(){return{collection_name:this.collection,template_id:this.id,schema:await(await this.schema()).toObject(),immutableData:await this.immutableData(),transferable:await this.isTransferable(),burnable:await this.isBurnable(),maxSupply:await this.maxSupply(),circulation:await this.circulation()}}}},function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},function(t,e,i){(function(t){e.fetch=o(t.fetch)&&o(t.ReadableStream),e.writableStream=o(t.WritableStream),e.abortController=o(t.AbortController),e.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),e.blobConstructor=!0}catch(t){}var i;function n(){if(void 0!==i)return i;if(t.XMLHttpRequest){i=new t.XMLHttpRequest;try{i.open("GET",t.XDomainRequest?"/":"https://example.com")}catch(t){i=null}}else i=null;return i}function s(t){var e=n();if(!e)return!1;try{return e.responseType=t,e.responseType===t}catch(t){}return!1}var r=void 0!==t.ArrayBuffer,a=r&&o(t.ArrayBuffer.prototype.slice);function o(t){return"function"==typeof t}e.arraybuffer=e.fetch||r&&s("arraybuffer"),e.msstream=!e.fetch&&a&&s("ms-stream"),e.mozchunkedarraybuffer=!e.fetch&&r&&s("moz-chunked-arraybuffer"),e.overrideMimeType=e.fetch||!!n()&&o(n().overrideMimeType),e.vbArray=o(t.VBArray),i=null}).call(this,i(4))},function(t,e,i){(function(t,n,s){var r=i(54),a=i(12),o=i(56),h=e.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},l=e.IncomingMessage=function(e,i,a,h){var l=this;if(o.Readable.call(l),l._mode=a,l.headers={},l.rawHeaders=[],l.trailers={},l.rawTrailers=[],l.on("end",(function(){t.nextTick((function(){l.emit("close")}))})),"fetch"===a){if(l._fetchResponse=i,l.url=i.url,l.statusCode=i.status,l.statusMessage=i.statusText,i.headers.forEach((function(t,e){l.headers[e.toLowerCase()]=t,l.rawHeaders.push(e,t)})),r.writableStream){var c=new WritableStream({write:function(t){return new Promise((function(e,i){l._destroyed?i():l.push(new n(t))?e():l._resumeFetch=e}))},close:function(){s.clearTimeout(h),l._destroyed||l.push(null)},abort:function(t){l._destroyed||l.emit("error",t)}});try{return void i.body.pipeTo(c).catch((function(t){s.clearTimeout(h),l._destroyed||l.emit("error",t)}))}catch(t){}}var u=i.body.getReader();!function t(){u.read().then((function(e){if(!l._destroyed){if(e.done)return s.clearTimeout(h),void l.push(null);l.push(new n(e.value)),t()}})).catch((function(t){s.clearTimeout(h),l._destroyed||l.emit("error",t)}))}()}else{if(l._xhr=e,l._pos=0,l.url=e.responseURL,l.statusCode=e.status,l.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach((function(t){var e=t.match(/^([^:]+):\s*(.*)/);if(e){var i=e[1].toLowerCase();"set-cookie"===i?(void 0===l.headers[i]&&(l.headers[i]=[]),l.headers[i].push(e[2])):void 0!==l.headers[i]?l.headers[i]+=", "+e[2]:l.headers[i]=e[2],l.rawHeaders.push(e[1],e[2])}})),l._charset="x-user-defined",!r.overrideMimeType){var d=l.rawHeaders["mime-type"];if(d){var f=d.match(/;\s*charset=([^;])(;|$)/);f&&(l._charset=f[1].toLowerCase())}l._charset||(l._charset="utf-8")}}};a(l,o.Readable),l.prototype._read=function(){var t=this._resumeFetch;t&&(this._resumeFetch=null,t())},l.prototype._onXHRProgress=function(){var t=this,e=t._xhr,i=null;switch(t._mode){case"text:vbarray":if(e.readyState!==h.DONE)break;try{i=new s.VBArray(e.responseBody).toArray()}catch(t){}if(null!==i){t.push(new n(i));break}case"text":try{i=e.responseText}catch(e){t._mode="text:vbarray";break}if(i.length>t._pos){var r=i.substr(t._pos);if("x-user-defined"===t._charset){for(var a=new n(r.length),o=0;o<r.length;o++)a[o]=255&r.charCodeAt(o);t.push(a)}else t.push(r,t._charset);t._pos=i.length}break;case"arraybuffer":if(e.readyState!==h.DONE||!e.response)break;i=e.response,t.push(new n(new Uint8Array(i)));break;case"moz-chunked-arraybuffer":if(i=e.response,e.readyState!==h.LOADING||!i)break;t.push(new n(new Uint8Array(i)));break;case"ms-stream":if(i=e.response,e.readyState!==h.LOADING)break;var l=new s.MSStreamReader;l.onprogress=function(){l.result.byteLength>t._pos&&(t.push(new n(new Uint8Array(l.result.slice(t._pos)))),t._pos=l.result.byteLength)},l.onload=function(){t.push(null)},l.readAsArrayBuffer(i)}t._xhr.readyState===h.DONE&&"ms-stream"!==t._mode&&t.push(null)}}).call(this,i(14),i(19).Buffer,i(4))},function(t,e,i){(e=t.exports=i(57)).Stream=e,e.Readable=e,e.Writable=i(61),e.Duplex=i(15),e.Transform=i(63),e.PassThrough=i(118)},function(t,e,i){"use strict";(function(e,n){var s=i(24);t.exports=_;var r,a=i(53);_.ReadableState=y;i(58).EventEmitter;var o=function(t,e){return t.listeners(e).length},h=i(59),l=i(25).Buffer,c=e.Uint8Array||function(){};var u=i(20);u.inherits=i(12);var d=i(112),f=void 0;f=d&&d.debuglog?d.debuglog("stream"):function(){};var p,g=i(113),m=i(60);u.inherits(_,h);var v=["error","close","destroy","pause","resume"];function y(t,e){t=t||{};var n=e instanceof(r=r||i(15));this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var s=t.highWaterMark,a=t.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=s||0===s?s:n&&(a||0===a)?a:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=i(62).StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function _(t){if(r=r||i(15),!(this instanceof _))return new _(t);this._readableState=new y(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),h.call(this)}function x(t,e,i,n,s){var r,a=t._readableState;null===e?(a.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,E(t)}(t,a)):(s||(r=function(t,e){var i;n=e,l.isBuffer(n)||n instanceof c||"string"==typeof e||void 0===e||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk"));var n;return i}(a,e)),r?t.emit("error",r):a.objectMode||e&&e.length>0?("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===l.prototype||(e=function(t){return l.from(t)}(e)),n?a.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):w(t,a,e,!0):a.ended?t.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!i?(e=a.decoder.write(e),a.objectMode||0!==e.length?w(t,a,e,!1):S(t,a)):w(t,a,e,!1))):n||(a.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(a)}function w(t,e,i,n){e.flowing&&0===e.length&&!e.sync?(t.emit("data",i),t.read(0)):(e.length+=e.objectMode?1:i.length,n?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&E(t)),S(t,e)}Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),_.prototype.destroy=m.destroy,_.prototype._undestroy=m.undestroy,_.prototype._destroy=function(t,e){this.push(null),e(t)},_.prototype.push=function(t,e){var i,n=this._readableState;return n.objectMode?i=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=l.from(t,e),e=""),i=!0),x(this,t,e,!1,i)},_.prototype.unshift=function(t){return x(this,t,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(t){return p||(p=i(62).StringDecoder),this._readableState.decoder=new p(t),this._readableState.encoding=t,this};function b(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=8388608?t=8388608:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function E(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(f("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?s.nextTick(T,t):T(t))}function T(t){f("emit readable"),t.emit("readable"),P(t)}function S(t,e){e.readingMore||(e.readingMore=!0,s.nextTick(A,t,e))}function A(t,e){for(var i=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(f("maybeReadMore read 0"),t.read(0),i!==e.length);)i=e.length;e.readingMore=!1}function O(t){f("readable nexttick read 0"),t.read(0)}function C(t,e){e.reading||(f("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),P(t),e.flowing&&!e.reading&&t.read(0)}function P(t){var e=t._readableState;for(f("flow",e.flowing);e.flowing&&null!==t.read(););}function L(t,e){return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):i=function(t,e,i){var n;t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):n=t===e.head.data.length?e.shift():i?function(t,e){var i=e.head,n=1,s=i.data;t-=s.length;for(;i=i.next;){var r=i.data,a=t>r.length?r.length:t;if(a===r.length?s+=r:s+=r.slice(0,t),0===(t-=a)){a===r.length?(++n,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=r.slice(a));break}++n}return e.length-=n,s}(t,e):function(t,e){var i=l.allocUnsafe(t),n=e.head,s=1;n.data.copy(i),t-=n.data.length;for(;n=n.next;){var r=n.data,a=t>r.length?r.length:t;if(r.copy(i,i.length-t,0,a),0===(t-=a)){a===r.length?(++s,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=r.slice(a));break}++s}return e.length-=s,i}(t,e);return n}(t,e.buffer,e.decoder),i);var i}function R(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,s.nextTick(I,e,t))}function I(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function M(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1}_.prototype.read=function(t){f("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return f("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?R(this):E(this),null;if(0===(t=b(t,e))&&e.ended)return 0===e.length&&R(this),null;var n,s=e.needReadable;return f("need readable",s),(0===e.length||e.length-t<e.highWaterMark)&&f("length less than watermark",s=!0),e.ended||e.reading?f("reading or ended",s=!1):s&&(f("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=b(i,e))),null===(n=t>0?L(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&R(this)),null!==n&&this.emit("data",n),n},_.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(t,e){var i=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t)}r.pipesCount+=1,f("pipe count=%d opts=%j",r.pipesCount,e);var h=(!e||!1!==e.end)&&t!==n.stdout&&t!==n.stderr?c:_;function l(e,n){f("onunpipe"),e===i&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,f("cleanup"),t.removeListener("close",v),t.removeListener("finish",y),t.removeListener("drain",u),t.removeListener("error",m),t.removeListener("unpipe",l),i.removeListener("end",c),i.removeListener("end",_),i.removeListener("data",g),d=!0,!r.awaitDrain||t._writableState&&!t._writableState.needDrain||u())}function c(){f("onend"),t.end()}r.endEmitted?s.nextTick(h):i.once("end",h),t.on("unpipe",l);var u=function(t){return function(){var e=t._readableState;f("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,P(t))}}(i);t.on("drain",u);var d=!1;var p=!1;function g(e){f("ondata"),p=!1,!1!==t.write(e)||p||((1===r.pipesCount&&r.pipes===t||r.pipesCount>1&&-1!==M(r.pipes,t))&&!d&&(f("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,p=!0),i.pause())}function m(e){f("onerror",e),_(),t.removeListener("error",m),0===o(t,"error")&&t.emit("error",e)}function v(){t.removeListener("finish",y),_()}function y(){f("onfinish"),t.removeListener("close",v),_()}function _(){f("unpipe"),i.unpipe(t)}return i.on("data",g),function(t,e,i){if("function"==typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events[e]?a(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]:t.on(e,i)}(t,"error",m),t.once("close",v),t.once("finish",y),t.emit("pipe",i),r.flowing||(f("pipe resume"),i.resume()),t},_.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i)),this;if(!t){var n=e.pipes,s=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var r=0;r<s;r++)n[r].emit("unpipe",this,i);return this}var a=M(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i)),this},_.prototype.on=function(t,e){var i=h.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&E(this):s.nextTick(O,this))}return i},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var t=this._readableState;return t.flowing||(f("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,s.nextTick(C,t,e))}(this,t)),this},_.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(t){var e=this,i=this._readableState,n=!1;for(var s in t.on("end",(function(){if(f("wrapped end"),i.decoder&&!i.ended){var t=i.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(s){(f("wrapped data"),i.decoder&&(s=i.decoder.write(s)),i.objectMode&&null==s)||(i.objectMode||s&&s.length)&&(e.push(s)||(n=!0,t.pause()))})),t)void 0===this[s]&&"function"==typeof t[s]&&(this[s]=function(e){return function(){return t[e].apply(t,arguments)}}(s));for(var r=0;r<v.length;r++)t.on(v[r],this.emit.bind(this,v[r]));return this._read=function(e){f("wrapped _read",e),n&&(n=!1,t.resume())},this},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=L}).call(this,i(4),i(14))},function(t,e,i){"use strict";var n,s="object"==typeof Reflect?Reflect:null,r=s&&"function"==typeof s.apply?s.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};n=s&&"function"==typeof s.ownKeys?s.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function o(){o.init.call(this)}t.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var h=10;function l(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function u(t,e,i,n){var s,r,a,o;if(l(i),void 0===(r=t._events)?(r=t._events=Object.create(null),t._eventsCount=0):(void 0!==r.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),r=t._events),a=r[e]),void 0===a)a=r[e]=i,++t._eventsCount;else if("function"==typeof a?a=r[e]=n?[i,a]:[a,i]:n?a.unshift(i):a.push(i),(s=c(t))>0&&a.length>s&&!a.warned){a.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=t,h.type=e,h.count=a.length,o=h,console&&console.warn&&console.warn(o)}return t}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(t,e,i){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},s=d.bind(n);return s.listener=i,n.wrapFn=s,s}function p(t,e,i){var n=t._events;if(void 0===n)return[];var s=n[e];return void 0===s?[]:"function"==typeof s?i?[s.listener||s]:[s]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(s):m(s,s.length)}function g(t){var e=this._events;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function m(t,e){for(var i=new Array(e),n=0;n<e;++n)i[n]=t[n];return i}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return h},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");h=t}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var n="error"===t,s=this._events;if(void 0!==s)n=n&&void 0===s.error;else if(!n)return!1;if(n){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var h=s[t];if(void 0===h)return!1;if("function"==typeof h)r(h,this,e);else{var l=h.length,c=m(h,l);for(i=0;i<l;++i)r(c[i],this,e)}return!0},o.prototype.addListener=function(t,e){return u(this,t,e,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(t,e){return u(this,t,e,!0)},o.prototype.once=function(t,e){return l(e),this.on(t,f(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){return l(e),this.prependListener(t,f(this,t,e)),this},o.prototype.removeListener=function(t,e){var i,n,s,r,a;if(l(e),void 0===(n=this._events))return this;if(void 0===(i=n[t]))return this;if(i===e||i.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(s=-1,r=i.length-1;r>=0;r--)if(i[r]===e||i[r].listener===e){a=i[r].listener,s=r;break}if(s<0)return this;0===s?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,s),1===i.length&&(n[t]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",t,a||e)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(t){var e,i,n;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0===arguments.length){var s,r=Object.keys(i);for(n=0;n<r.length;++n)"removeListener"!==(s=r[n])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},o.prototype.listeners=function(t){return p(this,t,!0)},o.prototype.rawListeners=function(t){return p(this,t,!1)},o.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):g.call(t,e)},o.prototype.listenerCount=g,o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(t,e,i){t.exports=i(58).EventEmitter},function(t,e,i){"use strict";var n=i(24);function s(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var i=this,r=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return r||a?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||n.nextTick(s,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(n.nextTick(s,i,t),i._writableState&&(i._writableState.errorEmitted=!0)):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,i){"use strict";(function(e,n,s){var r=i(24);function a(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,i){var n=t.entry;t.entry=null;for(;n;){var s=n.callback;e.pendingcb--,s(i),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=y;var o,h=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?n:r.nextTick;y.WritableState=v;var l=i(20);l.inherits=i(12);var c={deprecate:i(117)},u=i(59),d=i(25).Buffer,f=s.Uint8Array||function(){};var p,g=i(60);function m(){}function v(t,e){o=o||i(15),t=t||{};var n=e instanceof o;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var s=t.highWaterMark,l=t.writableHighWaterMark,c=this.objectMode?16:16384;this.highWaterMark=s||0===s?s:n&&(l||0===l)?l:c,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===t.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var i=t._writableState,n=i.sync,s=i.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(i),e)!function(t,e,i,n,s){--e.pendingcb,i?(r.nextTick(s,n),r.nextTick(T,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(s(n),t._writableState.errorEmitted=!0,t.emit("error",n),T(t,e))}(t,i,n,e,s);else{var a=b(i);a||i.corked||i.bufferProcessing||!i.bufferedRequest||w(t,i),n?h(x,t,i,a,s):x(t,i,a,s)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function y(t){if(o=o||i(15),!(p.call(y,this)||this instanceof o))return new y(t);this._writableState=new v(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),u.call(this)}function _(t,e,i,n,s,r,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,i?t._writev(s,e.onwrite):t._write(s,r,e.onwrite),e.sync=!1}function x(t,e,i,n){i||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),T(t,e)}function w(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var n=e.bufferedRequestCount,s=new Array(n),r=e.corkedRequestsFree;r.entry=i;for(var o=0,h=!0;i;)s[o]=i,i.isBuf||(h=!1),i=i.next,o+=1;s.allBuffers=h,_(t,e,!0,e.length,s,"",r.finish),e.pendingcb++,e.lastBufferedRequest=null,r.next?(e.corkedRequestsFree=r.next,r.next=null):e.corkedRequestsFree=new a(e),e.bufferedRequestCount=0}else{for(;i;){var l=i.chunk,c=i.encoding,u=i.callback;if(_(t,e,!1,e.objectMode?1:l.length,l,c,u),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function b(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function E(t,e){t._final((function(i){e.pendingcb--,i&&t.emit("error",i),e.prefinished=!0,t.emit("prefinish"),T(t,e)}))}function T(t,e){var i=b(e);return i&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,r.nextTick(E,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),i}l.inherits(y,u),v.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(v.prototype,"buffer",{get:c.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(t){return!!p.call(this,t)||this===y&&(t&&t._writableState instanceof v)}})):p=function(t){return t instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(t,e,i){var n,s=this._writableState,a=!1,o=!s.objectMode&&(n=t,d.isBuffer(n)||n instanceof f);return o&&!d.isBuffer(t)&&(t=function(t){return d.from(t)}(t)),"function"==typeof e&&(i=e,e=null),o?e="buffer":e||(e=s.defaultEncoding),"function"!=typeof i&&(i=m),s.ended?function(t,e){var i=new Error("write after end");t.emit("error",i),r.nextTick(e,i)}(this,i):(o||function(t,e,i,n){var s=!0,a=!1;return null===i?a=new TypeError("May not write null values to stream"):"string"==typeof i||void 0===i||e.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(t.emit("error",a),r.nextTick(n,a),s=!1),s}(this,s,t,i))&&(s.pendingcb++,a=function(t,e,i,n,s,r){if(!i){var a=function(t,e,i){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=d.from(e,i));return e}(e,n,s);n!==a&&(i=!0,s="buffer",n=a)}var o=e.objectMode?1:n.length;e.length+=o;var h=e.length<e.highWaterMark;h||(e.needDrain=!0);if(e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:s,isBuf:i,callback:r,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else _(t,e,!1,o,n,s,r);return h}(this,s,o,t,e,i)),a},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||w(this,t))},y.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(t,e,i){i(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(t,e,i){var n=this._writableState;"function"==typeof t?(i=t,t=null,e=null):"function"==typeof e&&(i=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(t,e,i){e.ending=!0,T(t,e),i&&(e.finished?r.nextTick(i):t.once("finish",i));e.ended=!0,t.writable=!1}(this,n,i)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),y.prototype.destroy=g.destroy,y.prototype._undestroy=g.undestroy,y.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,i(14),i(115).setImmediate,i(4))},function(t,e,i){"use strict";var n=i(25).Buffer,s=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(n.isEncoding===s||!s(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=h,this.end=l,e=4;break;case"utf8":this.fillLast=o,e=4;break;case"base64":this.text=c,this.end=u,e=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function o(t){var e=this.lastTotal-this.lastNeed,i=function(t,e,i){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==i?i:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function h(t,e){if((t.length-e)%2==0){var i=t.toString("utf16le",e);if(i){var n=i.charCodeAt(i.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function l(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,i)}return e}function c(t,e){var i=(t.length-e)%3;return 0===i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function u(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function d(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}e.StringDecoder=r,r.prototype.write=function(t){if(0===t.length)return"";var e,i;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},r.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},r.prototype.text=function(t,e){var i=function(t,e,i){var n=e.length-1;if(n<i)return 0;var s=a(e[n]);if(s>=0)return s>0&&(t.lastNeed=s-1),s;if(--n<i||-2===s)return 0;if((s=a(e[n]))>=0)return s>0&&(t.lastNeed=s-2),s;if(--n<i||-2===s)return 0;if((s=a(e[n]))>=0)return s>0&&(2===s?s=0:t.lastNeed=s-3),s;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=i;var n=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},r.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,i){"use strict";t.exports=a;var n=i(15),s=i(20);function r(t,e){var i=this._transformState;i.transforming=!1;var n=i.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));i.writechunk=null,i.writecb=null,null!=e&&this.push(e),n(t);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function a(t){if(!(this instanceof a))return new a(t);n.call(this,t),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",o)}function o(){var t=this;"function"==typeof this._flush?this._flush((function(e,i){h(t,e,i)})):h(this,null,null)}function h(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}s.inherits=i(12),s.inherits(a,n),a.prototype.push=function(t,e){return this._transformState.needTransform=!1,n.prototype.push.call(this,t,e)},a.prototype._transform=function(t,e,i){throw new Error("_transform() is not implemented")},a.prototype._write=function(t,e,i){var n=this._transformState;if(n.writecb=i,n.writechunk=t,n.writeencoding=e,!n.transforming){var s=this._readableState;(n.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}},a.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},a.prototype._destroy=function(t,e){var i=this;n.prototype._destroy.call(this,t,(function(t){e(t),i.emit("close")}))}},function(t,e,i){"use strict";var n=i(122),s=i(123);function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=_,e.resolve=function(t,e){return _(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?_(t,!1,!0).resolveObject(e):e},e.format=function(t){s.isString(t)&&(t=_(t));return t instanceof r?t.format():r.prototype.format.call(t)},e.Url=r;var a=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(l),u=["%","/","?",";","#"].concat(c),d=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=i(124);function _(t,e,i){if(t&&s.isObject(t)&&t instanceof r)return t;var n=new r;return n.parse(t,e,i),n}r.prototype.parse=function(t,e,i){if(!s.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),o=-1!==r&&r<t.indexOf("#")?"?":"#",l=t.split(o);l[0]=l[0].replace(/\\/g,"/");var _=t=l.join(o);if(_=_.trim(),!i&&1===t.split("#").length){var x=h.exec(_);if(x)return this.path=_,this.href=_,this.pathname=x[1],x[2]?(this.search=x[2],this.query=e?y.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=a.exec(_);if(w){var b=(w=w[0]).toLowerCase();this.protocol=b,_=_.substr(w.length)}if(i||w||_.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===_.substr(0,2);!E||w&&m[w]||(_=_.substr(2),this.slashes=!0)}if(!m[w]&&(E||w&&!v[w])){for(var T,S,A=-1,O=0;O<d.length;O++){-1!==(C=_.indexOf(d[O]))&&(-1===A||C<A)&&(A=C)}-1!==(S=-1===A?_.lastIndexOf("@"):_.lastIndexOf("@",A))&&(T=_.slice(0,S),_=_.slice(S+1),this.auth=decodeURIComponent(T)),A=-1;for(O=0;O<u.length;O++){var C;-1!==(C=_.indexOf(u[O]))&&(-1===A||C<A)&&(A=C)}-1===A&&(A=_.length),this.host=_.slice(0,A),_=_.slice(A),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var L=this.hostname.split(/\./),R=(O=0,L.length);O<R;O++){var I=L[O];if(I&&!I.match(f)){for(var M="",D=0,k=I.length;D<k;D++)I.charCodeAt(D)>127?M+="x":M+=I[D];if(!M.match(f)){var N=L.slice(0,O),F=L.slice(O+1),G=I.match(p);G&&(N.push(G[1]),F.unshift(G[2])),F.length&&(_="/"+F.join(".")+_),this.hostname=N.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),P||(this.hostname=n.toASCII(this.hostname));var B=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+B,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_))}if(!g[b])for(O=0,R=c.length;O<R;O++){var U=c[O];if(-1!==_.indexOf(U)){var Y=encodeURIComponent(U);Y===U&&(Y=escape(U)),_=_.split(U).join(Y)}}var X=_.indexOf("#");-1!==X&&(this.hash=_.substr(X),_=_.slice(0,X));var H=_.indexOf("?");if(-1!==H?(this.search=_.substr(H),this.query=_.substr(H+1),e&&(this.query=y.parse(this.query)),_=_.slice(0,H)):e&&(this.search="",this.query={}),_&&(this.pathname=_),v[b]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){B=this.pathname||"";var j=this.search||"";this.path=B+j}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",r=!1,a="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&s.isObject(this.query)&&Object.keys(this.query).length&&(a=y.stringify(this.query));var o=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||v[e])&&!1!==r?(r="//"+(r||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):r||(r=""),n&&"#"!==n.charAt(0)&&(n="#"+n),o&&"?"!==o.charAt(0)&&(o="?"+o),e+r+(i=i.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(o=o.replace("#","%23"))+n},r.prototype.resolve=function(t){return this.resolveObject(_(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(s.isString(t)){var e=new r;e.parse(t,!1,!0),t=e}for(var i=new r,n=Object.keys(this),a=0;a<n.length;a++){var o=n[a];i[o]=this[o]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var h=Object.keys(t),l=0;l<h.length;l++){var c=h[l];"protocol"!==c&&(i[c]=t[c])}return v[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!v[t.protocol]){for(var u=Object.keys(t),d=0;d<u.length;d++){var f=u[d];i[f]=t[f]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||m[t.protocol])i.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),i.pathname=p.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var g=i.pathname||"",y=i.search||"";i.path=g+y}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var _=i.pathname&&"/"===i.pathname.charAt(0),x=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=x||_||i.host&&t.pathname,b=w,E=i.pathname&&i.pathname.split("/")||[],T=(p=t.pathname&&t.pathname.split("/")||[],i.protocol&&!v[i.protocol]);if(T&&(i.hostname="",i.port=null,i.host&&(""===E[0]?E[0]=i.host:E.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),w=w&&(""===p[0]||""===E[0])),x)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,E=p;else if(p.length)E||(E=[]),E.pop(),E=E.concat(p),i.search=t.search,i.query=t.query;else if(!s.isNullOrUndefined(t.search)){if(T)i.hostname=i.host=E.shift(),(P=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=P.shift(),i.host=i.hostname=P.shift());return i.search=t.search,i.query=t.query,s.isNull(i.pathname)&&s.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!E.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var S=E.slice(-1)[0],A=(i.host||t.host||E.length>1)&&("."===S||".."===S)||""===S,O=0,C=E.length;C>=0;C--)"."===(S=E[C])?E.splice(C,1):".."===S?(E.splice(C,1),O++):O&&(E.splice(C,1),O--);if(!w&&!b)for(;O--;O)E.unshift("..");!w||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),A&&"/"!==E.join("/").substr(-1)&&E.push("");var P,L=""===E[0]||E[0]&&"/"===E[0].charAt(0);T&&(i.hostname=i.host=L?"":E.length?E.shift():"",(P=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=P.shift(),i.host=i.hostname=P.shift()));return(w=w||i.host&&E.length)&&!L&&E.unshift(""),E.length?i.pathname=E.join("/"):(i.pathname=null,i.path=null),s.isNull(i.pathname)&&s.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},r.prototype.parseHost=function(){var t=this.host,e=o.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,i){"use strict";var n,s,r,a,o,h=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var c=i(9),u=i(0),d=l(i(2)),f=function(t){function e(i,n){var s=t.call(this,i)||this;return s.player=n,s.f=0,s.invulnerable=!1,s.blinking=!1,s.hit=!1,s.mouseSprite=new Phaser.GameObjects.Sprite(s.scene,0,0,"texture_atlas_1","standard_idle_02"),s.scene.add.existing(s.mouseSprite),s.add(s.mouseSprite),s.mouseSpriteFX=new Phaser.GameObjects.Sprite(s.scene,0,0,"texture_atlas_1","standard_idle_02"),s.scene.add.existing(s.mouseSpriteFX),s.mouseSpriteFX.visible=!1,s.add(s.mouseSpriteFX),s.mouseSpriteFX.play(e.ANIMATION_IDLE_HORIZONTAL),s.mouseSprite.play(e.ANIMATION_IDLE_HORIZONTAL),s.tintTween=null,s.x=s.player.position.x*c.BoardContainer.CELLS_SIZE,s.y=s.player.position.y*c.BoardContainer.CELLS_SIZE,s.powerPelletFX=new Phaser.GameObjects.Sprite(s.scene,0,25,"texture_atlas_1","powerUp_00"),s.powerPelletFX.setOrigin(.5,1),s.scene.add.existing(s.powerPelletFX),s.powerPelletFX.visible=!1,s.add(s.powerPelletFX),s}return h(e,t),e.prototype.update=function(){if(!u.GameVars.mazeEngine.gameOver){if(this.setAnimation(),null===this.player.exitingPortal){var t=.5*(this.player.position.x*c.BoardContainer.CELLS_SIZE-this.x),i=.5*(this.player.position.y*c.BoardContainer.CELLS_SIZE-e.OFFSET_Y-this.y);this.x+=t,this.y+=i}else this.x=this.player.position.x*c.BoardContainer.CELLS_SIZE,this.y=this.player.position.y*c.BoardContainer.CELLS_SIZE-e.OFFSET_Y;this.player.active&&(this.setScale(1),this.player.respawned||this.blinking?(this.f++,this.f>=5&&(this.f=0,this.alpha=.5===this.alpha?1:.5)):this.alpha=1)}},e.prototype.onPlayerRespawned=function(){this.hit=!1,this.f=0,this.x=this.player.position.x*c.BoardContainer.CELLS_SIZE,this.y=this.player.position.y*c.BoardContainer.CELLS_SIZE,this.mouseSprite.play(e.ANIMATION_IDLE_DOWN),this.mouseSpriteFX.play(e.ANIMATION_IDLE_DOWN),this.mouseSprite.tint=16777215,this.mouseSprite.alpha=1},e.prototype.onGameOver=function(){if(u.GameVars.mazeEngine.levelTime&&u.GameVars.mazeEngine.tick===u.GameVars.mazeEngine.levelTime||!u.GameVars.mazeEngine.levelTime&&u.GameVars.mazeEngine.lifes>0){var t=e.IDLE_ANIMATION_MAP[this.mouseSprite.anims.currentAnim.key];t&&(this.mouseSprite.play(t),this.mouseSpriteFX.play(t))}},e.prototype.onPlayerHit=function(){this.hit=!0;var t=this.player.dir;if(u.GameVars.mazeEngine.gameOver)if(null!==t){var i=e.ANIMATION_MAP[t].gameOver;this.mouseSprite.play(i),this.mouseSpriteFX.play(i)}else{var n=e.GAMEOVER_ANIMATION_MAP[this.mouseSprite.anims.currentAnim.key];n&&(this.mouseSprite.play(n),this.mouseSpriteFX.play(n))}else{if(null!==t){i=e.ANIMATION_MAP[t].hit;this.mouseSprite.play(i),this.mouseSpriteFX.play(i)}else{var s=e.HIT_ANIMATION_MAP[this.mouseSprite.anims.currentAnim.key];s&&(this.mouseSprite.play(s),this.mouseSpriteFX.play(s))}this.mouseSprite.on("animationcomplete",(function(t,e){this.mouseSprite.tint=16711680,this.mouseSprite.alpha=.65,this.mouseSprite.off("animationcomplete")}),this)}},e.prototype.onTeleported=function(t){var e;switch(t){case d.Cells.PORTAL_1:e=15138881;break;case d.Cells.PORTAL_2:e=28647;break;case d.Cells.PORTAL_3:e=16774656;break;case d.Cells.PORTAL_4:e=10086144}this.mouseSpriteFX.visible&&this.tintTween.stop(),this.mouseSpriteFX.visible=!0,this.mouseSpriteFX.alpha=1,this.mouseSpriteFX.setTintFill(e),this.tintTween=this.scene.tweens.add({targets:this.mouseSpriteFX,alpha:0,ease:Phaser.Math.Easing.Cubic.Out,duration:1200,onComplete:function(){this.mouseSpriteFX.visible=!1},onCompleteScope:this})},e.prototype.setAnimation=function(){if(!this.hit){var t,i,n=this.player.dir;if(this.player.invulnerable)if(this.invulnerable||(this.invulnerable=!0,this.powerPelletFX.visible=!0,this.powerPelletFX.play("pill_big_01_fx")),null!==n)(t=e.ANIMATION_MAP[n].invulnerable)!==this.mouseSprite.anims.currentAnim.key&&(this.mouseSprite.play(t),this.mouseSpriteFX.play(t));else(i=e.IDLE_ANIMATION_MAP[this.mouseSprite.anims.currentAnim.key])&&(this.mouseSprite.play(i),this.mouseSpriteFX.play(i));else if(this.invulnerable&&(this.invulnerable=!1),null!==n)(t=e.ANIMATION_MAP[n].normal)!==this.mouseSprite.anims.currentAnim.key&&(this.mouseSprite.play(t),this.mouseSpriteFX.play(t));else(i=e.IDLE_ANIMATION_MAP[this.mouseSprite.anims.currentAnim.key])&&(this.mouseSprite.play(i),this.mouseSpriteFX.play(i));this.player.dir===d.Direction.RIGHT?(this.mouseSprite.scaleX=1,this.mouseSpriteFX.scaleX=1):this.player.dir===d.Direction.LEFT&&(this.mouseSprite.scaleX=-1,this.mouseSpriteFX.scaleX=-1)}},e.ANIMATION_RUN_UP="run_up",e.ANIMATION_RUN_DOWN="run_down",e.ANIMATION_RUN_HORIZONTAL="run_horizontal",e.ANIMATION_IDLE_HORIZONTAL="idle_horizontal",e.ANIMATION_IDLE_UP="idle_up",e.ANIMATION_IDLE_DOWN="idle_down",e.ANIMATION_INVULNERABLE_RUN_UP="invulnerable_run_up",e.ANIMATION_INVULNERABLE_RUN_DOWN="invulnerable_run_down",e.ANIMATION_INVULNERABLE_RUN_HORIZONTAL="invulnerable_run_horizontal",e.ANIMATION_INVULNERABLE_IDLE_HORIZONTAL="invulnerable_idle_horizontal",e.ANIMATION_INVULNERABLE_IDLE_UP="invulnerable_idle_up",e.ANIMATION_INVULNERABLE_IDLE_DOWN="invulnerable_idle_down",e.ANIMATION_HIT_UP="hit up",e.ANIMATION_HIT_DOWN="hit down",e.ANIMATION_HIT_HORIZONTAL="hit horizontal",e.ANIMATION_GAMEOVER_UP="gameover up",e.ANIMATION_GAMEOVER_DOWN="gameover down",e.ANIMATION_GAMEOVER_HORIZONTAL="gameover horizontal",e.ANIMATION_MAP=((s={})[d.Direction.UP]={normal:e.ANIMATION_RUN_UP,invulnerable:e.ANIMATION_INVULNERABLE_RUN_UP,hit:e.ANIMATION_HIT_UP,gameOver:e.ANIMATION_GAMEOVER_UP},s[d.Direction.DOWN]={normal:e.ANIMATION_RUN_DOWN,invulnerable:e.ANIMATION_INVULNERABLE_RUN_DOWN,hit:e.ANIMATION_HIT_DOWN,gameOver:e.ANIMATION_GAMEOVER_DOWN},s[d.Direction.LEFT]={normal:e.ANIMATION_RUN_HORIZONTAL,invulnerable:e.ANIMATION_INVULNERABLE_RUN_HORIZONTAL,hit:e.ANIMATION_HIT_HORIZONTAL,gameOver:e.ANIMATION_GAMEOVER_HORIZONTAL},s[d.Direction.RIGHT]={normal:e.ANIMATION_RUN_HORIZONTAL,invulnerable:e.ANIMATION_INVULNERABLE_RUN_HORIZONTAL,hit:e.ANIMATION_HIT_HORIZONTAL,gameOver:e.ANIMATION_GAMEOVER_HORIZONTAL},s),e.IDLE_ANIMATION_MAP=((r={})[e.ANIMATION_RUN_HORIZONTAL]=e.ANIMATION_IDLE_HORIZONTAL,r[e.ANIMATION_RUN_UP]=e.ANIMATION_IDLE_UP,r[e.ANIMATION_RUN_DOWN]=e.ANIMATION_IDLE_DOWN,r[e.ANIMATION_INVULNERABLE_RUN_UP]=e.ANIMATION_INVULNERABLE_IDLE_UP,r[e.ANIMATION_INVULNERABLE_RUN_DOWN]=e.ANIMATION_INVULNERABLE_IDLE_DOWN,r[e.ANIMATION_INVULNERABLE_RUN_HORIZONTAL]=e.ANIMATION_INVULNERABLE_IDLE_HORIZONTAL,r),e.HIT_ANIMATION_MAP=((a={})[e.ANIMATION_RUN_UP]=e.ANIMATION_HIT_UP,a[e.ANIMATION_RUN_DOWN]=e.ANIMATION_HIT_DOWN,a[e.ANIMATION_RUN_HORIZONTAL]=e.ANIMATION_HIT_HORIZONTAL,a[e.ANIMATION_IDLE_UP]=e.ANIMATION_HIT_UP,a[e.ANIMATION_IDLE_DOWN]=e.ANIMATION_HIT_DOWN,a[e.ANIMATION_IDLE_HORIZONTAL]=e.ANIMATION_HIT_HORIZONTAL,a),e.GAMEOVER_ANIMATION_MAP=((o={})[e.ANIMATION_RUN_UP]=e.ANIMATION_GAMEOVER_UP,o[e.ANIMATION_RUN_DOWN]=e.ANIMATION_GAMEOVER_DOWN,o[e.ANIMATION_RUN_HORIZONTAL]=e.ANIMATION_GAMEOVER_HORIZONTAL,o[e.ANIMATION_IDLE_UP]=e.ANIMATION_GAMEOVER_UP,o[e.ANIMATION_IDLE_DOWN]=e.ANIMATION_GAMEOVER_DOWN,o[e.ANIMATION_IDLE_HORIZONTAL]=e.ANIMATION_GAMEOVER_HORIZONTAL,o),e.OFFSET_Y=10,e}(Phaser.GameObjects.Container);e.PlayerActor=f},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(7),a=i(1),o=i(0),h=i(3),l=function(t){function e(i,n,s){var r,h,l=t.call(this,i)||this;l.valueSet=!1,l.type=n,l.subMenuGameOver=s,l.x=l.type===e.LIFES?a.GameConstants.GAME_WIDTH-170*o.GameVars.scaleX:a.GameConstants.GAME_WIDTH-85*o.GameVars.scaleX,l.scaleX=o.GameVars.scaleX,l.tab=new Phaser.GameObjects.Image(l.scene,0,0,"texture_atlas_1",l.type===e.LIFES?"tab_lifes":"tab_time"),l.tab.setOrigin(.5,0),l.tab.setInteractive({useHandCursor:!0,pixelPerfect:!0}),l.tab.on("pointerdown",l.onDownTab,l),l.add(l.tab),l.type===e.LIFES?(r=28,h=-14):(r=19,h=-2),l.valueLabel=new Phaser.GameObjects.BitmapText(l.scene,h,27,"supercell-white","-",r),l.valueLabel.setOrigin(.5),l.add(l.valueLabel),l.selectorContainer=new Phaser.GameObjects.Container(l.scene),l.selectorContainer.visible=!1,l.add(l.selectorContainer);var c,u=new Phaser.GameObjects.Image(l.scene,0,0,"texture_atlas_1","dropdown_menu");u.setOrigin(.5,0),u.setInteractive({useHandCursor:!0}),u.on("pointerdown",l.onDownSelector,l),u.on("pointerout",l.onOutSelector,l),l.selectorContainer.add(u);for(var d=0;d<7;d++){if(l.type===e.LIFES){c=0===e.LIFES_VALUES[d]?"-":e.LIFES_VALUES[d].toString();var f=new Phaser.GameObjects.Image(l.scene,18,40+e.DELTA_Y*d,"texture_atlas_1","icon_heart");l.selectorContainer.add(f)}else c=0===e.TIME_VALUES[d]?"-":e.TIME_VALUES[d].toString()+"s.";var p=new Phaser.GameObjects.BitmapText(l.scene,h,36+e.DELTA_Y*d,"supercell-white",c,r);p.setOrigin(.5),l.selectorContainer.add(p)}return l.selectedFrame=new Phaser.GameObjects.Image(l.scene,0,0,"texture_atlas_1","selected_frame_lifes_time_on"),l.selectorContainer.add(l.selectedFrame),l.scene.game.device.os.desktop?(l.hoverFrame=new Phaser.GameObjects.Image(l.scene,0,0,"texture_atlas_1","selected_frame_lifes_time_off"),l.selectorContainer.add(l.hoverFrame)):l.scene.input.on("pointerdown",l.onDownInMobileScene,l),l.forceUpdate(),l}return s(e,t),e.prototype.update=function(){if(this.selectorContainer.visible&&this.scene.game.device.os.desktop&&!this.valueSet){var t=Math.floor(this.scene.input.activePointer.y/e.DELTA_Y);t=this.type===e.LIFES?Math.min(t,e.LIFES_VALUES.length-1):Math.min(t,e.TIME_VALUES.length-1),this.hoverFrame.y=35+e.DELTA_Y*t}},e.prototype.forceUpdate=function(){this.type===e.LIFES?this.valueLabel.text=0===h.LevelEditionManager.gameOverOptions.lifes||void 0===h.LevelEditionManager.gameOverOptions.lifes?"-":h.LevelEditionManager.gameOverOptions.lifes.toString():this.valueLabel.text=0===h.LevelEditionManager.gameOverOptions.time||void 0===h.LevelEditionManager.gameOverOptions.time?"-":(h.LevelEditionManager.gameOverOptions.time/60).toString()},e.prototype.onDownTab=function(){if(o.GameVars.inputsEnabled&&!h.LevelEditionManager.showingLayer){var t;if(this.type===e.LIFES){var i=h.LevelEditionManager.lifes;t=e.LIFES_VALUES.indexOf(i)}else{var n=h.LevelEditionManager.time/60;t=e.TIME_VALUES.indexOf(n)}var s=this.scene.game.device.os.desktop?0:20;this.scene.time.delayedCall(s,(function(){this.selectedFrame.y=35+e.DELTA_Y*t}),[],this),this.showSelector(),r.AudioManager.playSound("btn_click")}},e.prototype.onDownSelector=function(){var t=this.scene.input.activePointer.y;if(!(!o.GameVars.inputsEnabled||h.LevelEditionManager.showingLayer||t>7*e.DELTA_Y)){var i=Math.floor(t/e.DELTA_Y);if(this.type===e.LIFES){var n=e.LIFES_VALUES[i];h.LevelEditionManager.updateLifes(n)}else{n=e.TIME_VALUES[i];h.LevelEditionManager.updateTime(n)}this.type===e.LIFES?this.valueLabel.text=0===h.LevelEditionManager.gameOverOptions.lifes?"-":h.LevelEditionManager.gameOverOptions.lifes.toString():this.valueLabel.text=0===h.LevelEditionManager.gameOverOptions.time?"-":(h.LevelEditionManager.gameOverOptions.time/60).toString(),this.subMenuGameOver.forceUpdate(),this.valueSet=!0,this.onOutSelector(),r.AudioManager.playSound("btn_click")}},e.prototype.onOutSelector=function(){this.scene.game.device.os.desktop&&(this.valueSet?(this.selectedFrame.visible=!1,this.hoverFrame.setFrame("selected_frame_lifes_time_on")):this.hoverFrame.visible=!1),this.scene.time.delayedCall(300,(function(){this.tab.visible=!0,this.selectorContainer.visible=!1}),[],this)},e.prototype.showSelector=function(){this.valueSet=!1,this.tab.visible=!1,this.selectorContainer.visible=!0,this.scene.game.device.os.desktop&&(this.selectedFrame.visible=!0,this.hoverFrame.visible=!0,this.hoverFrame.setFrame("selected_frame_lifes_time_off"))},e.prototype.onDownInMobileScene=function(){if(this.selectorContainer.visible){var t=Math.floor(this.scene.input.activePointer.x),i=Math.floor(this.scene.input.activePointer.y);if(t>this.x+50||t<this.x-50||i>7*e.DELTA_Y)this.onOutSelector();else{var n=Math.floor(this.scene.input.activePointer.y/e.DELTA_Y);n=this.type===e.LIFES?Math.min(n,e.LIFES_VALUES.length-1):Math.min(n,e.TIME_VALUES.length-1),this.selectedFrame.y=35+e.DELTA_Y*n}}},e.LIFES="lifes",e.TIME="time",e.LIFES_VALUES=[0,1,2,3,4,5,6],e.TIME_VALUES=[0,30,60,75,90,120,180],e.DELTA_Y=71,e}(Phaser.GameObjects.Container);e.LifesValuesSetter=l},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),a=i(8),o=i(0),h=i(6),l=i(3),c=i(140),u=i(142),d=function(t){function e(i){var n=t.call(this,i)||this;e.currentInstance=n;var s=new Phaser.GameObjects.Graphics(n.scene);s.fillStyle(1853525,.5),s.fillRect(0,0,r.GameConstants.GAME_WIDTH,r.GameConstants.GAME_HEIGHT),n.add(s),n.scaledItemsContainer=new Phaser.GameObjects.Container(n.scene),n.scaledItemsContainer.x=r.GameConstants.GAME_WIDTH/2,n.scaledItemsContainer.scaleX=o.GameVars.scaleX,n.add(n.scaledItemsContainer);var a=new Phaser.GameObjects.Image(n.scene,0,370,"texture_atlas_1","equip_menu_bg");a.setScale(2),n.scaledItemsContainer.add(a);var l=new Phaser.GameObjects.Image(n.scene,0,r.GameConstants.GAME_HEIGHT/2+200,"texture_atlas_1","equip_menu_stripe");l.scaleY=20.5,n.scaledItemsContainer.add(l),n.nftsContainer=new c.NFTsContainer(n.scene,n),n.scaledItemsContainer.add(n.nftsContainer);var d=new Phaser.GameObjects.Text(n.scene,0,100,"WISP MANAGER",{fontFamily:"Supercell",fontSize:"36px",color:"#1c4856"});d.setOrigin(.5),n.scaledItemsContainer.add(d);var f=new Phaser.GameObjects.Text(n.scene,0,150,"WISPS (       ) are used to build traps and special items. Equip them to increase your WISP BALANCE.",{fontFamily:"Oswald-ExtraLight",fontSize:"26px",color:"#597173"});f.setOrigin(.5),n.scaledItemsContainer.add(f);var p=new Phaser.GameObjects.Image(n.scene,-334,f.y,"texture_atlas_1","icon_red_wisp");n.scaledItemsContainer.add(p),n.stakePile=new u.StakePile(n.scene),n.scaledItemsContainer.add(n.stakePile);var g=new Phaser.GameObjects.Image(n.scene,-425,435,"texture_atlas_1","tab_items_list");n.scaledItemsContainer.add(g);var m=new h.Button(n.scene,-r.GameConstants.GAME_WIDTH/2+50,50,"texture_atlas_1","btn_close_off","btn_close_on");return m.onDown(n.onClickCloseMenu,n),n.scaledItemsContainer.add(m),n}return s(e,t),e.prototype.onBlockchainInfoRetrieved=function(t){this.nftsContainer.onBlockchainInfoRetrieved(t)},e.prototype.clearPile=function(){this.nftsContainer.clearPile()},e.prototype.onNFTsStaked=function(){this.stakePile.clear()},e.prototype.onClickRefresh=function(){this.nftsContainer.onRefreshNFTs(),l.LevelEditionManager.onRefreshNFTs()},e.prototype.onClickCloseMenu=function(){o.GameVars.inputsEnabled&&(this.visible=!1,a.GameManager.retrieveEditedLevelData())},e}(Phaser.GameObjects.Container);e.WispManagementLayer=d},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=r(i(5)),o=i(0),h=i(6),l=i(3),c=function(t){function e(i,n,s,r,a){var o=t.call(this,i)||this;if(o.asset_ids=r,o.name=n,o.imgName=s,o.stakeUnstakeContainer=a,o.imgName)o.nftImageBackground=new Phaser.GameObjects.Image(o.scene,0,0,o.imgName);else switch(o.name){case"red":o.nftImageBackground=new Phaser.GameObjects.Image(o.scene,0,0,"texture_atlas_1","wisp_red");break;case"green":o.nftImageBackground=new Phaser.GameObjects.Image(o.scene,0,0,"texture_atlas_1","wisp_green");break;case"yellow":o.nftImageBackground=new Phaser.GameObjects.Image(o.scene,0,0,"texture_atlas_1","wisp_yellow");break;case"blue":o.nftImageBackground=new Phaser.GameObjects.Image(o.scene,0,0,"texture_atlas_1","wisp_blue")}o.nftImageBackground.setScale(e.IMG_WIDTH/o.nftImageBackground.width),o.nftImageBackground.setInteractive(),o.nftImageBackground.on("pointerdown",o.moveToPile,o),o.add(o.nftImageBackground),o.nftImages=[];var l=new h.Button(o.scene,0,95,"texture_atlas_1","btn_buy_off","btn_buy_on");return l.onDown(o.onClickBuy,o),o.add(l),o.redCircle=new Phaser.GameObjects.Graphics(o.scene),o.redCircle.fillStyle(16711680),o.redCircle.fillCircle(0,0,12),o.redCircle.x=48,o.redCircle.y=-65,o.add(o.redCircle),o.quantityLabel=new Phaser.GameObjects.Text(o.scene,o.redCircle.x,o.redCircle.y,o.asset_ids.length.toString(),{fontFamily:"Arial",fontSize:"18px",color:"#FFFFFF"}),o.quantityLabel.setOrigin(.5),o.add(o.quantityLabel),o.asset_ids.length<=1&&(o.redCircle.visible=!1,o.quantityLabel.visible=!1,0===o.asset_ids.length&&(o.nftImageBackground.alpha=.5,o.nftImageBackground.tint=10066329,o.nftImageBackground.disableInteractive())),o}return s(e,t),e.prototype.backToDeck=function(){var t=this.nftImages.length;if(0!==t){var e=this.x;this.scene.tweens.add({targets:this.nftImages,x:e,y:200,angle:0,ease:Phaser.Math.Easing.Cubic.Out,duration:500,delay:250*Math.random(),onComplete:function(){for(var e=0;e<t;e++)this.nftImages[e].destroy();this.nftImages=[],this.quantityLabel.text=t.toString(),this.n>1&&(this.quantityLabel.visible=!0,this.redCircle.visible=!0),this.nftImageBackground.alpha=1,this.nftImageBackground.setInteractive()},onCompleteScope:this})}},e.prototype.moveToPile=function(t){var i,n=4-8*Math.random(),s=6-12*Math.random(),r=3-6*Math.random(),a=this.x+n,o=200+s;if(this.imgName)i=new Phaser.GameObjects.Image(this.scene,a,o,this.imgName);else switch(this.name){case"red":i=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_1","wisp_red");break;case"green":i=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_1","wisp_green");break;case"yellow":i=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_1","wisp_yellow");break;case"blue":i=new Phaser.GameObjects.Image(this.scene,0,0,"texture_atlas_1","wisp_blue")}i.setScale(e.IMG_WIDTH/i.width),this.stakeUnstakeContainer.deckContainer.add(i),this.nftImages.push(i),this.scene.tweens.add({targets:i,x:0,y:0,angle:r,ease:Phaser.Math.Easing.Cubic.Out,duration:350,delay:t?50*t:0});var h=this.asset_ids.length;this.quantityLabel.text=(h-this.nftImages.length).toString(),h-this.nftImages.length==1?(this.quantityLabel.visible=!1,this.redCircle.visible=!1):h-this.nftImages.length==0&&(this.nftImageBackground.alpha=.25,this.nftImageBackground.disableInteractive()),l.LevelEditionManager.onNFTAddedToStakePile(this.asset_ids[h-this.nftImages.length])},e.prototype.moveAllNFTsToPile=function(){if(this.asset_ids.length-this.nftImages.length!=0)for(var t=0;t<this.asset_ids.length-this.nftImages.length;t++)this.moveToPile(t)},e.prototype.onClickBuy=function(){var t;o.GameVars.inputsEnabled&&(t=a.SDK.development?"https://wax-test.atomichub.io/market?collection_name=clashdomenft&order=asc&sort=price&symbol=WAX&search="+this.name:"https://wax.atomichub.io/market?collection_name=clashdomenft&order=asc&sort=price&symbol=WAX&search="+this.name,a.Utils.openExternalLink(t))},e.IMG_WIDTH=105,e}(Phaser.GameObjects.Container);e.NFT=c},function(t,e,i){(function(t){(function(e){"use strict";ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return null!==t&&"object"==typeof t&&t.buffer instanceof ArrayBuffer}),"undefined"==typeof globalThis&&"undefined"!=typeof window&&(window.globalThis=window)
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */;var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function s(t,e,i,n){return new(i||(i=Promise))((function(s,r){function a(t){try{h(n.next(t))}catch(t){r(t)}}function o(t){try{h(n.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}h((n=n.apply(t,e||[])).next())}))}function r(t,e){var i,n,s,r,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function o(r){return function(o){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(s=2&r[0]?n.return:r[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){a.label=r[1];break}if(6===r[0]&&a.label<s[1]){a.label=s[1],s=r;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(r);break}s[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,o])}}}function a(t,e){e.headers=t.headers||{},e.statusMessage=t.statusText,e.statusCode=t.status,e.data=t.response}function o(t,e,i){return new Promise((function(n,s){i=i||{};var r,o,h,l=new XMLHttpRequest,c=i.body,u=i.headers||{};for(r in i.timeout&&(l.timeout=i.timeout),l.ontimeout=l.onerror=function(t){t.timeout="timeout"==t.type,s(t)},l.open(t,e.href||e),l.onload=function(){for(h=l.getAllResponseHeaders().trim().split(/[\r\n]+/),a(l,l);o=h.shift();)o=o.split(": "),l.headers[o.shift().toLowerCase()]=o.join(": ");if((o=l.headers["content-type"])&&~o.indexOf("application/json"))try{l.data=JSON.parse(l.data,i.reviver)}catch(t){return a(l,t),s(t)}(l.status>=400?s:n)(l)},typeof FormData<"u"&&c instanceof FormData||c&&"object"==typeof c&&(u["content-type"]="application/json",c=JSON.stringify(c)),l.withCredentials=!!i.withCredentials,u)l.setRequestHeader(r,u[r]);l.send(c)}))}var h=o.bind(o,"GET"),l=o.bind(o,"POST"),c=o.bind(o,"PATCH"),u=o.bind(o,"DELETE"),d=h,f=c,p=l,g=o.bind(o,"PUT"),m=o,v={del:u,get:d,patch:f,post:p,put:g,send:m},y=Object.freeze(Object.assign(Object.create(null),v,{default:v,del:u,get:d,patch:f,post:p,put:g,send:m})),_=function(t){function e(e,i){var n=t.call(this,i)||this;return n.name="ServerError",n.code=e,n}return n(e,t),e}(Error);function x(t,e){if(this._offset=e,t instanceof ArrayBuffer)this._buffer=t,this._view=new DataView(this._buffer);else{if(!ArrayBuffer.isView(t))throw new Error("Invalid argument");this._buffer=t.buffer,this._view=new DataView(this._buffer,t.byteOffset,t.byteLength)}}function w(t,e,i){for(var n=0,s=0,r=i.length;s<r;s++)(n=i.charCodeAt(s))<128?t.setUint8(e++,n):n<2048?(t.setUint8(e++,192|n>>6),t.setUint8(e++,128|63&n)):n<55296||n>=57344?(t.setUint8(e++,224|n>>12),t.setUint8(e++,128|n>>6&63),t.setUint8(e++,128|63&n)):(s++,n=65536+((1023&n)<<10|1023&i.charCodeAt(s)),t.setUint8(e++,240|n>>18),t.setUint8(e++,128|n>>12&63),t.setUint8(e++,128|n>>6&63),t.setUint8(e++,128|63&n))}function b(t){var e=[],i=[],n=function t(e,i,n){var s=typeof n,r=0,a=0,o=0,h=0,l=0,c=0;if("string"===s){if((l=function(t){for(var e=0,i=0,n=0,s=t.length;n<s;n++)(e=t.charCodeAt(n))<128?i+=1:e<2048?i+=2:e<55296||e>=57344?i+=3:(n++,i+=4);return i}(n))<32)e.push(160|l),c=1;else if(l<256)e.push(217,l),c=2;else if(l<65536)e.push(218,l>>8,l),c=3;else{if(!(l<4294967296))throw new Error("String too long");e.push(219,l>>24,l>>16,l>>8,l),c=5}return i.push({_str:n,_length:l,_offset:e.length}),c+l}if("number"===s)return Math.floor(n)===n&&isFinite(n)?n>=0?n<128?(e.push(n),1):n<256?(e.push(204,n),2):n<65536?(e.push(205,n>>8,n),3):n<4294967296?(e.push(206,n>>24,n>>16,n>>8,n),5):(o=n/Math.pow(2,32)>>0,h=n>>>0,e.push(207,o>>24,o>>16,o>>8,o,h>>24,h>>16,h>>8,h),9):n>=-32?(e.push(n),1):n>=-128?(e.push(208,n),2):n>=-32768?(e.push(209,n>>8,n),3):n>=-2147483648?(e.push(210,n>>24,n>>16,n>>8,n),5):(o=Math.floor(n/Math.pow(2,32)),h=n>>>0,e.push(211,o>>24,o>>16,o>>8,o,h>>24,h>>16,h>>8,h),9):(e.push(203),i.push({_float:n,_length:8,_offset:e.length}),9);if("object"===s){if(null===n)return e.push(192),1;if(Array.isArray(n)){if((l=n.length)<16)e.push(144|l),c=1;else if(l<65536)e.push(220,l>>8,l),c=3;else{if(!(l<4294967296))throw new Error("Array too large");e.push(221,l>>24,l>>16,l>>8,l),c=5}for(r=0;r<l;r++)c+=t(e,i,n[r]);return c}if(n instanceof Date){var u=n.getTime();return o=Math.floor(u/Math.pow(2,32)),h=u>>>0,e.push(215,0,o>>24,o>>16,o>>8,o,h>>24,h>>16,h>>8,h),10}if(n instanceof ArrayBuffer){if((l=n.byteLength)<256)e.push(196,l),c=2;else if(l<65536)e.push(197,l>>8,l),c=3;else{if(!(l<4294967296))throw new Error("Buffer too large");e.push(198,l>>24,l>>16,l>>8,l),c=5}return i.push({_bin:n,_length:l,_offset:e.length}),c+l}if("function"==typeof n.toJSON)return t(e,i,n.toJSON());var d=[],f="",p=Object.keys(n);for(r=0,a=p.length;r<a;r++)"function"!=typeof n[f=p[r]]&&d.push(f);if((l=d.length)<16)e.push(128|l),c=1;else if(l<65536)e.push(222,l>>8,l),c=3;else{if(!(l<4294967296))throw new Error("Object too large");e.push(223,l>>24,l>>16,l>>8,l),c=5}for(r=0;r<l;r++)c+=t(e,i,f=d[r]),c+=t(e,i,n[f]);return c}if("boolean"===s)return e.push(n?195:194),1;if("undefined"===s)return e.push(212,0,0),3;throw new Error("Could not encode")}(e,i,t),s=new ArrayBuffer(n),r=new DataView(s),a=0,o=0,h=-1;i.length>0&&(h=i[0]._offset);for(var l,c=0,u=0,d=0,f=e.length;d<f;d++)if(r.setUint8(o+d,e[d]),d+1===h){if(c=(l=i[a])._length,u=o+h,l._bin)for(var p=new Uint8Array(l._bin),g=0;g<c;g++)r.setUint8(u+g,p[g]);else l._str?w(r,u,l._str):void 0!==l._float&&r.setFloat64(u,l._float);o+=c,i[++a]&&(h=i[a]._offset)}return s}x.prototype._array=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=this._parse();return e},x.prototype._map=function(t){for(var e={},i=0;i<t;i++)e[this._parse()]=this._parse();return e},x.prototype._str=function(t){var e=function(t,e,i){for(var n="",s=0,r=e,a=e+i;r<a;r++){var o=t.getUint8(r);if(0!=(128&o))if(192!=(224&o))if(224!=(240&o)){if(240!=(248&o))throw new Error("Invalid byte "+o.toString(16));(s=(7&o)<<18|(63&t.getUint8(++r))<<12|(63&t.getUint8(++r))<<6|(63&t.getUint8(++r))<<0)>=65536?(s-=65536,n+=String.fromCharCode(55296+(s>>>10),56320+(1023&s))):n+=String.fromCharCode(s)}else n+=String.fromCharCode((15&o)<<12|(63&t.getUint8(++r))<<6|(63&t.getUint8(++r))<<0);else n+=String.fromCharCode((31&o)<<6|63&t.getUint8(++r));else n+=String.fromCharCode(o)}return n}(this._view,this._offset,t);return this._offset+=t,e},x.prototype._bin=function(t){var e=this._buffer.slice(this._offset,this._offset+t);return this._offset+=t,e},x.prototype._parse=function(){var t,e=this._view.getUint8(this._offset++),i=0,n=0,s=0,r=0;if(e<192)return e<128?e:e<144?this._map(15&e):e<160?this._array(15&e):this._str(31&e);if(e>223)return-1*(255-e+1);switch(e){case 192:return null;case 194:return!1;case 195:return!0;case 196:return i=this._view.getUint8(this._offset),this._offset+=1,this._bin(i);case 197:return i=this._view.getUint16(this._offset),this._offset+=2,this._bin(i);case 198:return i=this._view.getUint32(this._offset),this._offset+=4,this._bin(i);case 199:return i=this._view.getUint8(this._offset),n=this._view.getInt8(this._offset+1),this._offset+=2,[n,this._bin(i)];case 200:return i=this._view.getUint16(this._offset),n=this._view.getInt8(this._offset+2),this._offset+=3,[n,this._bin(i)];case 201:return i=this._view.getUint32(this._offset),n=this._view.getInt8(this._offset+4),this._offset+=5,[n,this._bin(i)];case 202:return t=this._view.getFloat32(this._offset),this._offset+=4,t;case 203:return t=this._view.getFloat64(this._offset),this._offset+=8,t;case 204:return t=this._view.getUint8(this._offset),this._offset+=1,t;case 205:return t=this._view.getUint16(this._offset),this._offset+=2,t;case 206:return t=this._view.getUint32(this._offset),this._offset+=4,t;case 207:return s=this._view.getUint32(this._offset)*Math.pow(2,32),r=this._view.getUint32(this._offset+4),this._offset+=8,s+r;case 208:return t=this._view.getInt8(this._offset),this._offset+=1,t;case 209:return t=this._view.getInt16(this._offset),this._offset+=2,t;case 210:return t=this._view.getInt32(this._offset),this._offset+=4,t;case 211:return s=this._view.getInt32(this._offset)*Math.pow(2,32),r=this._view.getUint32(this._offset+4),this._offset+=8,s+r;case 212:return n=this._view.getInt8(this._offset),this._offset+=1,0===n?void(this._offset+=1):[n,this._bin(1)];case 213:return n=this._view.getInt8(this._offset),this._offset+=1,[n,this._bin(2)];case 214:return n=this._view.getInt8(this._offset),this._offset+=1,[n,this._bin(4)];case 215:return n=this._view.getInt8(this._offset),this._offset+=1,0===n?(s=this._view.getInt32(this._offset)*Math.pow(2,32),r=this._view.getUint32(this._offset+4),this._offset+=8,new Date(s+r)):[n,this._bin(8)];case 216:return n=this._view.getInt8(this._offset),this._offset+=1,[n,this._bin(16)];case 217:return i=this._view.getUint8(this._offset),this._offset+=1,this._str(i);case 218:return i=this._view.getUint16(this._offset),this._offset+=2,this._str(i);case 219:return i=this._view.getUint32(this._offset),this._offset+=4,this._str(i);case 220:return i=this._view.getUint16(this._offset),this._offset+=2,this._array(i);case 221:return i=this._view.getUint32(this._offset),this._offset+=4,this._array(i);case 222:return i=this._view.getUint16(this._offset),this._offset+=2,this._map(i);case 223:return i=this._view.getUint32(this._offset),this._offset+=4,this._map(i)}throw new Error("Could not parse")};var E,T,S=globalThis.WebSocket||function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")},A=function(){function t(t){this.events=t}return t.prototype.send=function(t){t instanceof ArrayBuffer?this.ws.send(t):Array.isArray(t)&&this.ws.send(new Uint8Array(t).buffer)},t.prototype.connect=function(t){this.ws=new S(t,this.protocols),this.ws.binaryType="arraybuffer",this.ws.onopen=this.events.onopen,this.ws.onmessage=this.events.onmessage,this.ws.onclose=this.events.onclose,this.ws.onerror=this.events.onerror},t.prototype.close=function(t,e){this.ws.close(t,e)},t}(),O=function(){function t(){this.events={},this.transport=new A(this.events)}return t.prototype.send=function(t){this.transport.send(t)},t.prototype.connect=function(t){this.transport.connect(t)},t.prototype.close=function(t,e){this.transport.close(t,e)},t}(),C={};function P(t,e){C[t]=e}function L(t){var e=C[t];if(!e)throw new Error("missing serializer: "+t);return e}e.Protocol=void 0,(E=e.Protocol||(e.Protocol={}))[E.HANDSHAKE=9]="HANDSHAKE",E[E.JOIN_ROOM=10]="JOIN_ROOM",E[E.ERROR=11]="ERROR",E[E.LEAVE_ROOM=12]="LEAVE_ROOM",E[E.ROOM_DATA=13]="ROOM_DATA",E[E.ROOM_STATE=14]="ROOM_STATE",E[E.ROOM_STATE_PATCH=15]="ROOM_STATE_PATCH",E[E.ROOM_DATA_SCHEMA=16]="ROOM_DATA_SCHEMA",e.ErrorCode=void 0,(T=e.ErrorCode||(e.ErrorCode={}))[T.MATCHMAKE_NO_HANDLER=4210]="MATCHMAKE_NO_HANDLER",T[T.MATCHMAKE_INVALID_CRITERIA=4211]="MATCHMAKE_INVALID_CRITERIA",T[T.MATCHMAKE_INVALID_ROOM_ID=4212]="MATCHMAKE_INVALID_ROOM_ID",T[T.MATCHMAKE_UNHANDLED=4213]="MATCHMAKE_UNHANDLED",T[T.MATCHMAKE_EXPIRED=4214]="MATCHMAKE_EXPIRED",T[T.AUTH_FAILED=4215]="AUTH_FAILED",T[T.APPLICATION_ERROR=4216]="APPLICATION_ERROR";let R=()=>({events:{},emit(t,...e){(this.events[t]||[]).forEach(t=>t(...e))},on(t,e){return(this.events[t]=this.events[t]||[]).push(e),()=>this.events[t]=(this.events[t]||[]).filter(t=>t!==e)}});var I=function(){function t(){this.handlers=[]}return t.prototype.register=function(t,e){return this.handlers.push(t),this},t.prototype.invoke=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.handlers.forEach((function(i){return i.apply(t,e)}))},t.prototype.invokeAsync=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return Promise.all(this.handlers.map((function(i){return i.apply(t,e)})))},t.prototype.remove=function(t){var e=this.handlers.indexOf(t);this.handlers[e]=this.handlers[this.handlers.length-1],this.handlers.pop()},t.prototype.clear=function(){this.handlers=[]},t}();function M(){var t=new I;function e(e){return t.register(e,null===this)}return e.once=function(e){var i=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];e.apply(this,n),t.remove(i)};t.register(i)},e.remove=function(e){return t.remove(e)},e.invoke=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.invoke.apply(t,e)},e.invokeAsync=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.invokeAsync.apply(t,e)},e.clear=function(){return t.clear()},e}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t||"undefined"!=typeof self&&self;var D,k,N=function(t){var e={exports:{}};return t(e,e.exports),e.exports}((function(t,e){!function(t){
/*! *****************************************************************************
        Copyright (c) Microsoft Corporation.

        Permission to use, copy, modify, and/or distribute this software for any
        purpose with or without fee is hereby granted.

        THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
        REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
        AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
        INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
        LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
        OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
        PERFORMANCE OF THIS SOFTWARE.
        ***************************************************************************** */
var e,i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function s(t,e,i,n){var s,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(r<3?s(a):r>3?s(e,i,a):s(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a}function r(t,e){for(var i=0,n=e.length,s=t.length;i<n;i++,s++)t[s]=e[i];return t}t.OPERATION=void 0,(e=t.OPERATION||(t.OPERATION={}))[e.ADD=128]="ADD",e[e.REPLACE=0]="REPLACE",e[e.DELETE=64]="DELETE",e[e.DELETE_AND_ADD=192]="DELETE_AND_ADD",e[e.TOUCH=1]="TOUCH",e[e.CLEAR=10]="CLEAR";var a=function(){function t(){this.refs=new Map,this.refCounts={},this.deletedRefs=new Set,this.nextUniqueId=0}return t.prototype.getNextUniqueId=function(){return this.nextUniqueId++},t.prototype.addRef=function(t,e,i){void 0===i&&(i=!0),this.refs.set(t,e),i&&(this.refCounts[t]=(this.refCounts[t]||0)+1)},t.prototype.removeRef=function(t){this.refCounts[t]=this.refCounts[t]-1,this.deletedRefs.add(t)},t.prototype.clearRefs=function(){this.refs.clear(),this.deletedRefs.clear(),this.refCounts={}},t.prototype.garbageCollectDeletedRefs=function(){var t=this;this.deletedRefs.forEach((function(e){if(t.refCounts[e]<=0){var i=t.refs.get(e);if(i instanceof ht)for(var n in i._definition.schema)"string"!=typeof i._definition.schema[n]&&i[n]&&i[n].$changes&&t.removeRef(i[n].$changes.refId);else{var s=i.$changes.parent._definition,r=s.schema[s.fieldsByIndex[i.$changes.parentIndex]];"function"==typeof Object.values(r)[0]&&Array.from(i.values()).forEach((function(e){return t.removeRef(e.$changes.refId)}))}t.refs.delete(e),delete t.refCounts[e]}})),this.deletedRefs.clear()},t}(),o=function(){function e(t,e,i){this.changed=!1,this.changes=new Map,this.allChanges=new Set,this.caches={},this.currentCustomOperation=0,this.ref=t,this.setParent(e,i)}return e.prototype.setParent=function(t,e,i){var n=this;if(this.indexes||(this.indexes=this.ref instanceof ht?this.ref._definition.indexes:{}),this.parent=t,this.parentIndex=i,e)if(this.root=e,this.ref instanceof ht){var s=this.ref._definition;for(var r in s.schema){var a=this.ref[r];if(a&&a.$changes){var o=s.indexes[r];a.$changes.setParent(this.ref,e,o)}}}else"object"==typeof this.ref&&this.ref.forEach((function(t,e){if(t instanceof ht){var i=t.$changes,s=n.ref.$changes.indexes[e];i.setParent(n.ref,n.root,s)}}))},e.prototype.operation=function(t){this.changes.set(--this.currentCustomOperation,t)},e.prototype.change=function(e,i){void 0===i&&(i=t.OPERATION.ADD);var n="number"==typeof e?e:this.indexes[e];this.assertValidIndex(n,e);var s=this.changes.get(n);s&&s.op!==t.OPERATION.DELETE&&s.op!==t.OPERATION.TOUCH||this.changes.set(n,{op:s&&s.op===t.OPERATION.DELETE?t.OPERATION.DELETE_AND_ADD:i,index:n}),this.allChanges.add(n),this.changed=!0,this.touchParents()},e.prototype.touch=function(e){var i="number"==typeof e?e:this.indexes[e];this.assertValidIndex(i,e),this.changes.has(i)||this.changes.set(i,{op:t.OPERATION.TOUCH,index:i}),this.allChanges.add(i),this.touchParents()},e.prototype.touchParents=function(){this.parent&&this.parent.$changes.touch(this.parentIndex)},e.prototype.getType=function(t){if(this.ref._definition)return(e=this.ref._definition).schema[e.fieldsByIndex[t]];var e,i=(e=this.parent._definition).schema[e.fieldsByIndex[this.parentIndex]];return Object.values(i)[0]},e.prototype.getChildrenFilter=function(){var t=this.parent._definition.childFilters;return t&&t[this.parentIndex]},e.prototype.getValue=function(t){return this.ref.getByIndex(t)},e.prototype.delete=function(e){var i="number"==typeof e?e:this.indexes[e];if(void 0!==i){var n=this.getValue(i);this.changes.set(i,{op:t.OPERATION.DELETE,index:i}),this.allChanges.delete(i),delete this.caches[i],n&&n.$changes&&(n.$changes.parent=void 0),this.changed=!0,this.touchParents()}else console.warn("@colyseus/schema "+this.ref.constructor.name+": trying to delete non-existing index: "+e+" ("+i+")")},e.prototype.discard=function(e,i){var n=this;void 0===e&&(e=!1),void 0===i&&(i=!1),this.ref instanceof ht||this.changes.forEach((function(e){if(e.op===t.OPERATION.DELETE){var i=n.ref.getIndex(e.index);delete n.indexes[i]}})),this.changes.clear(),this.changed=e,i&&this.allChanges.clear(),this.currentCustomOperation=0},e.prototype.discardAll=function(){var t=this;this.changes.forEach((function(e){var i=t.getValue(e.index);i&&i.$changes&&i.$changes.discardAll()})),this.discard()},e.prototype.cache=function(t,e){this.caches[t]=e},e.prototype.clone=function(){return new e(this.ref,this.parent,this.root)},e.prototype.ensureRefId=function(){void 0===this.refId&&(this.refId=this.root.getNextUniqueId())},e.prototype.assertValidIndex=function(t,e){if(void 0===t)throw new Error('ChangeTree: missing index for field "'+e+'"')},e}(),h=function(t,e){var i=t.toString(),n=e.toString();return i<n?-1:i>n?1:0};function l(t){return t.$proxy=!0,t=new Proxy(t,{get:function(t,e){return"symbol"==typeof e||isNaN(e)?t[e]:t.at(e)},set:function(t,e,i){if("symbol"==typeof e||isNaN(e))t[e]=i;else{var n=Array.from(t.$items.keys()),s=parseInt(n[e]||e);null==i?t.deleteAt(s):t.setAt(s,i)}return!0},deleteProperty:function(t,e){return"number"==typeof e?t.deleteAt(e):delete t[e],!0}})}var c=function(){function e(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.$changes=new o(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,this.push.apply(this,t)}return e.is=function(t){return Array.isArray(t)||void 0!==t.array},Object.defineProperty(e.prototype,"length",{get:function(){return this.$items.size},set:function(t){0===t?this.clear():this.splice(t,this.length-t)},enumerable:!1,configurable:!0}),e.prototype.push=function(){for(var t,e=this,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return i.forEach((function(i){t=e.$refId++,e.setAt(t,i)})),t},e.prototype.pop=function(){var t=Array.from(this.$indexes.values()).pop();if(void 0!==t){this.$changes.delete(t),this.$indexes.delete(t);var e=this.$items.get(t);return this.$items.delete(t),e}},e.prototype.at=function(t){var e=Array.from(this.$items.keys())[t];return this.$items.get(e)},e.prototype.setAt=function(e,i){var n,s;void 0!==i.$changes&&i.$changes.setParent(this,this.$changes.root,e);var r=null!==(s=null===(n=this.$changes.indexes[e])||void 0===n?void 0:n.op)&&void 0!==s?s:t.OPERATION.ADD;this.$changes.indexes[e]=e,this.$indexes.set(e,e),this.$items.set(e,i),this.$changes.change(e,r)},e.prototype.deleteAt=function(t){var e=Array.from(this.$items.keys())[t];return void 0!==e&&this.$deleteAt(e)},e.prototype.$deleteAt=function(t){return this.$changes.delete(t),this.$indexes.delete(t),this.$items.delete(t)},e.prototype.clear=function(e){var i=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),e&&"string"!=typeof this.$changes.getType()&&this.$items.forEach((function(t){i.$changes.root.removeRef(t.$changes.refId)})),this.$items.clear(),this.$changes.operation({index:0,op:t.OPERATION.CLEAR}),this.$changes.touchParents()},e.prototype.concat=function(){for(var t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return new(e.bind.apply(e,r([void 0],(t=Array.from(this.$items.values())).concat.apply(t,i))))},e.prototype.join=function(t){return Array.from(this.$items.values()).join(t)},e.prototype.reverse=function(){var t=this,e=Array.from(this.$items.keys());return Array.from(this.$items.values()).reverse().forEach((function(i,n){t.setAt(e[n],i)})),this},e.prototype.shift=function(){var t=Array.from(this.$items.keys()).shift();if(void 0!==t){var e=this.$items.get(t);return this.$deleteAt(t),e}},e.prototype.slice=function(t,i){return new(e.bind.apply(e,r([void 0],Array.from(this.$items.values()).slice(t,i))))},e.prototype.sort=function(t){var e=this;void 0===t&&(t=h);var i=Array.from(this.$items.keys());return Array.from(this.$items.values()).sort(t).forEach((function(t,n){e.setAt(i[n],t)})),this},e.prototype.splice=function(t,e){void 0===e&&(e=this.length-t);for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];for(var s=Array.from(this.$items.keys()),r=[],a=t;a<t+e;a++)r.push(this.$items.get(s[a])),this.$deleteAt(s[a]);return r},e.prototype.unshift=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this.length,s=e.length,r=Array.from(this.$items.values());return e.forEach((function(e,i){t.setAt(i,e)})),r.forEach((function(e,i){t.setAt(s+i,e)})),n+s},e.prototype.indexOf=function(t,e){return Array.from(this.$items.values()).indexOf(t,e)},e.prototype.lastIndexOf=function(t,e){return void 0===e&&(e=this.length-1),Array.from(this.$items.values()).lastIndexOf(t,e)},e.prototype.every=function(t,e){return Array.from(this.$items.values()).every(t,e)},e.prototype.some=function(t,e){return Array.from(this.$items.values()).some(t,e)},e.prototype.forEach=function(t,e){Array.from(this.$items.values()).forEach(t,e)},e.prototype.map=function(t,e){return Array.from(this.$items.values()).map(t,e)},e.prototype.filter=function(t,e){return Array.from(this.$items.values()).filter(t,e)},e.prototype.reduce=function(t,e){return Array.from(this.$items.values()).reduce(t,e)},e.prototype.reduceRight=function(t,e){return Array.from(this.$items.values()).reduceRight(t,e)},e.prototype.find=function(t,e){return Array.from(this.$items.values()).find(t,e)},e.prototype.findIndex=function(t,e){return Array.from(this.$items.values()).findIndex(t,e)},e.prototype.fill=function(t,e,i){throw new Error("ArraySchema#fill() not implemented")},e.prototype.copyWithin=function(t,e,i){throw new Error("ArraySchema#copyWithin() not implemented")},e.prototype.toString=function(){return this.$items.toString()},e.prototype.toLocaleString=function(){return this.$items.toLocaleString()},e.prototype[Symbol.iterator]=function(){return Array.from(this.$items.values())[Symbol.iterator]()},e.prototype[Symbol.unscopables]=function(){return this.$items[Symbol.unscopables]()},e.prototype.entries=function(){return this.$items.entries()},e.prototype.keys=function(){return this.$items.keys()},e.prototype.values=function(){return this.$items.values()},e.prototype.includes=function(t,e){return Array.from(this.$items.values()).includes(t,e)},e.prototype.flatMap=function(t,e){throw new Error("ArraySchema#flatMap() is not supported.")},e.prototype.flat=function(t){throw new Error("ArraySchema#flat() is not supported.")},e.prototype.setIndex=function(t,e){this.$indexes.set(t,e)},e.prototype.getIndex=function(t){return this.$indexes.get(t)},e.prototype.getByIndex=function(t){return this.$items.get(this.$indexes.get(t))},e.prototype.deleteByIndex=function(t){var e=this.$indexes.get(t);this.$items.delete(e),this.$indexes.delete(t)},e.prototype.toArray=function(){return Array.from(this.$items.values())},e.prototype.toJSON=function(){return this.toArray().map((function(t){return"function"==typeof t.toJSON?t.toJSON():t}))},e.prototype.clone=function(t){return t?new(e.bind.apply(e,r([void 0],Array.from(this.$items.values())))):new(e.bind.apply(e,r([void 0],this.map((function(t){return t.$changes?t.clone():t})))))},e.prototype.triggerAll=function(){ht.prototype.triggerAll.apply(this)},e}();function u(t){return t.$proxy=!0,t=new Proxy(t,{get:function(t,e){return"symbol"!=typeof e&&void 0===t[e]?t.get(e):t[e]},set:function(t,e,i){return"symbol"!=typeof e&&-1===e.indexOf("$")&&"onAdd"!==e&&"onRemove"!==e&&"onChange"!==e?t.set(e,i):t[e]=i,!0},deleteProperty:function(t,e){return t.delete(e),!0}})}var d=function(){function e(t){var e=this;if(this.$changes=new o(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,t)if(t instanceof Map)t.forEach((function(t,i){return e.set(i,t)}));else for(var i in t)this.set(i,t[i])}return e.is=function(t){return void 0!==t.map},e.prototype[Symbol.iterator]=function(){return this.$items[Symbol.iterator]()},Object.defineProperty(e.prototype,Symbol.toStringTag,{get:function(){return this.$items[Symbol.toStringTag]},enumerable:!1,configurable:!0}),e.prototype.set=function(e,i){if(null==i)throw new Error("MapSchema#set('"+e+"', "+i+"): trying to set "+i+" value on '"+e+"'.");var n=void 0!==this.$changes.indexes[e],s=n?this.$changes.indexes[e]:this.$refId++,r=n?t.OPERATION.REPLACE:t.OPERATION.ADD,a=void 0!==i.$changes;return a&&i.$changes.setParent(this,this.$changes.root,s),n?a&&this.$items.get(e)!==i&&(r=t.OPERATION.ADD):(this.$changes.indexes[e]=s,this.$indexes.set(s,e)),this.$items.set(e,i),this.$changes.change(e,r),this},e.prototype.get=function(t){return this.$items.get(t)},e.prototype.delete=function(t){return this.$changes.delete(t),this.$items.delete(t)},e.prototype.clear=function(e){var i=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),e&&"string"!=typeof this.$changes.getType()&&this.$items.forEach((function(t){i.$changes.root.removeRef(t.$changes.refId)})),this.$items.clear(),this.$changes.operation({index:0,op:t.OPERATION.CLEAR}),this.$changes.touchParents()},e.prototype.has=function(t){return this.$items.has(t)},e.prototype.forEach=function(t){this.$items.forEach(t)},e.prototype.entries=function(){return this.$items.entries()},e.prototype.keys=function(){return this.$items.keys()},e.prototype.values=function(){return this.$items.values()},Object.defineProperty(e.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),e.prototype.setIndex=function(t,e){this.$indexes.set(t,e)},e.prototype.getIndex=function(t){return this.$indexes.get(t)},e.prototype.getByIndex=function(t){return this.$items.get(this.$indexes.get(t))},e.prototype.deleteByIndex=function(t){var e=this.$indexes.get(t);this.$items.delete(e),this.$indexes.delete(t)},e.prototype.toJSON=function(){var t={};return this.forEach((function(e,i){t[i]="function"==typeof e.toJSON?e.toJSON():e})),t},e.prototype.clone=function(t){var i;return t?i=Object.assign(new e,this):(i=new e,this.forEach((function(t,e){t.$changes?i.set(e,t.clone()):i.set(e,t)}))),i},e.prototype.triggerAll=function(){ht.prototype.triggerAll.apply(this)},e}(),f={};function p(t,e){f[t]=e}function g(t){return f[t]}var m=function(){function t(){this.indexes={},this.fieldsByIndex={},this.deprecated={},this.descriptors={}}return t.create=function(e){var i=new t;return i.schema=Object.assign({},e&&e.schema||{}),i.indexes=Object.assign({},e&&e.indexes||{}),i.fieldsByIndex=Object.assign({},e&&e.fieldsByIndex||{}),i.descriptors=Object.assign({},e&&e.descriptors||{}),i.deprecated=Object.assign({},e&&e.deprecated||{}),i},t.prototype.addField=function(t,e){var i=this.getNextFieldIndex();this.fieldsByIndex[i]=t,this.indexes[t]=i,this.schema[t]=Array.isArray(e)?{array:e[0]}:e},t.prototype.addFilter=function(t,e){return this.filters||(this.filters={},this.indexesWithFilters=[]),this.filters[this.indexes[t]]=e,this.indexesWithFilters.push(this.indexes[t]),!0},t.prototype.addChildrenFilter=function(t,e){var i=this.indexes[t],n=this.schema[t];if(g(Object.keys(n)[0]))return this.childFilters||(this.childFilters={}),this.childFilters[i]=e,!0;console.warn("@filterChildren: field '"+t+"' can't have children. Ignoring filter.")},t.prototype.getChildrenFilter=function(t){return this.childFilters&&this.childFilters[this.indexes[t]]},t.prototype.getNextFieldIndex=function(){return Object.keys(this.schema||{}).length},t}(),v=function(){function t(){this.types={},this.schemas=new Map,this.useFilters=!1}return t.prototype.has=function(t){return this.schemas.has(t)},t.prototype.get=function(t){return this.types[t]},t.prototype.add=function(t,e){void 0===e&&(e=this.schemas.size),t._definition=m.create(t._definition),t._typeid=e,this.types[e]=t,this.schemas.set(t,e)},t.create=function(e){return void 0===e&&(e=new t),function(t){return _(t,e)}},t}(),y=new v;function _(t,e){return void 0===e&&(e=y),function(i,n){var s=i.constructor;s._context=e,e.has(s)||e.add(s);var a=s._definition;if(a.addField(n,t),a.descriptors[n]){if(a.deprecated[n])return;try{throw new Error("@colyseus/schema: Duplicate '"+n+"' definition on '"+s.name+"'.\nCheck @type() annotation")}catch(t){var o=t.stack.split("\n")[4].trim();throw new Error(t.message+" "+o)}}var h=c.is(t),f=!h&&d.is(t);if("string"!=typeof t&&!ht.is(t)){var p=Object.values(t)[0];"string"==typeof p||e.has(p)||e.add(p)}var g="_"+n;a.descriptors[g]={enumerable:!1,configurable:!1,writable:!0},a.descriptors[n]={get:function(){return this[g]},set:function(t){t!==this[g]&&(null!=t?(!h||t instanceof c||(t=new(c.bind.apply(c,r([void 0],t)))),!f||t instanceof d||(t=new d(t)),void 0===t.$proxy&&(f?t=u(t):h&&(t=l(t))),this.$changes.change(n),t.$changes&&t.$changes.setParent(this,this.$changes.root,this._definition.indexes[n])):this.$changes.delete(n),this[g]=t)},enumerable:!0,configurable:!0}}}function x(t,e,i){for(var n=0,s=0,r=i.length;s<r;s++)(n=i.charCodeAt(s))<128?t[e++]=n:n<2048?(t[e++]=192|n>>6,t[e++]=128|63&n):n<55296||n>=57344?(t[e++]=224|n>>12,t[e++]=128|n>>6&63,t[e++]=128|63&n):(s++,n=65536+((1023&n)<<10|1023&i.charCodeAt(s)),t[e++]=240|n>>18,t[e++]=128|n>>12&63,t[e++]=128|n>>6&63,t[e++]=128|63&n)}function w(t,e){t.push(255&e)}function b(t,e){t.push(255&e)}function E(t,e){t.push(255&e),t.push(e>>8&255)}function T(t,e){t.push(255&e),t.push(e>>8&255)}function S(t,e){t.push(255&e),t.push(e>>8&255),t.push(e>>16&255),t.push(e>>24&255)}function A(t,e){var i=e>>24,n=e>>16,s=e>>8,r=e;t.push(255&r),t.push(255&s),t.push(255&n),t.push(255&i)}function O(t,e){var i=Math.floor(e/Math.pow(2,32));A(t,e>>>0),A(t,i)}function C(t,e){var i=e/Math.pow(2,32)>>0;A(t,e>>>0),A(t,i)}var P=new Int32Array(2),L=new Float32Array(P.buffer),R=new Float64Array(P.buffer);function I(t,e){L[0]=e,S(t,P[0])}function M(t,e){R[0]=e,S(t,P[0]),S(t,P[1])}function D(t,e){e||(e="");var i=function(t){for(var e=0,i=0,n=0,s=t.length;n<s;n++)(e=t.charCodeAt(n))<128?i+=1:e<2048?i+=2:e<55296||e>=57344?i+=3:(n++,i+=4);return i}(e),n=0;if(i<32)t.push(160|i),n=1;else if(i<256)t.push(217),b(t,i),n=2;else if(i<65536)t.push(218),T(t,i),n=3;else{if(!(i<4294967296))throw new Error("String too long");t.push(219),A(t,i),n=5}return x(t,t.length,e),n+i}function k(t,e){return isNaN(e)?k(t,0):isFinite(e)?e!==(0|e)?(t.push(203),M(t,e),9):e>=0?e<128?(b(t,e),1):e<256?(t.push(204),b(t,e),2):e<65536?(t.push(205),T(t,e),3):e<4294967296?(t.push(206),A(t,e),5):(t.push(207),C(t,e),9):e>=-32?(t.push(224|e+32),1):e>=-128?(t.push(208),w(t,e),2):e>=-32768?(t.push(209),E(t,e),3):e>=-2147483648?(t.push(210),S(t,e),5):(t.push(211),O(t,e),9):k(t,e>0?Number.MAX_SAFE_INTEGER:-Number.MAX_SAFE_INTEGER)}var N=Object.freeze({__proto__:null,utf8Write:x,int8:w,uint8:b,int16:E,uint16:T,int32:S,uint32:A,int64:O,uint64:C,float32:function(t,e){I(t,e)},float64:function(t,e){M(t,e)},writeFloat32:I,writeFloat64:M,boolean:function(t,e){return b(t,e?1:0)},string:D,number:k});function F(t,e){return G(t,e)<<24>>24}function G(t,e){return t[e.offset++]}function B(t,e){return z(t,e)<<16>>16}function z(t,e){return t[e.offset++]|t[e.offset++]<<8}function U(t,e){return t[e.offset++]|t[e.offset++]<<8|t[e.offset++]<<16|t[e.offset++]<<24}function Y(t,e){return U(t,e)>>>0}function X(t,e){var i=Y(t,e);return U(t,e)*Math.pow(2,32)+i}function H(t,e){var i=Y(t,e);return Y(t,e)*Math.pow(2,32)+i}var j=new Int32Array(2),W=new Float32Array(j.buffer),V=new Float64Array(j.buffer);function K(t,e){return j[0]=U(t,e),W[0]}function q(t,e){return j[0]=U(t,e),j[1]=U(t,e),V[0]}function Z(t,e){var i,n=t[e.offset++];n<192?i=31&n:217===n?i=G(t,e):218===n?i=z(t,e):219===n&&(i=Y(t,e));var s=function(t,e,i){for(var n="",s=0,r=e,a=e+i;r<a;r++){var o=t[r];0!=(128&o)?192!=(224&o)?224!=(240&o)?240!=(248&o)?console.error("Invalid byte "+o.toString(16)):(s=(7&o)<<18|(63&t[++r])<<12|(63&t[++r])<<6|(63&t[++r])<<0)>=65536?(s-=65536,n+=String.fromCharCode(55296+(s>>>10),56320+(1023&s))):n+=String.fromCharCode(s):n+=String.fromCharCode((15&o)<<12|(63&t[++r])<<6|(63&t[++r])<<0):n+=String.fromCharCode((31&o)<<6|63&t[++r]):n+=String.fromCharCode(o)}return n}(t,e.offset,i);return e.offset+=i,s}function J(t,e){var i=t[e.offset++];return i<128?i:202===i?K(t,e):203===i?q(t,e):204===i?G(t,e):205===i?z(t,e):206===i?Y(t,e):207===i?H(t,e):208===i?F(t,e):209===i?B(t,e):210===i?U(t,e):211===i?X(t,e):i>223?-1*(255-i+1):void 0}function $(t,e){return 255===t[e.offset-1]&&(t[e.offset]<128||t[e.offset]>=202&&t[e.offset]<=211)}var Q=Object.freeze({__proto__:null,int8:F,uint8:G,int16:B,uint16:z,int32:U,uint32:Y,float32:function(t,e){return K(t,e)},float64:function(t,e){return q(t,e)},int64:X,uint64:H,readFloat32:K,readFloat64:q,boolean:function(t,e){return G(t,e)>0},string:Z,stringCheck:function(t,e){var i=t[e.offset];return i<192&&i>160||217===i||218===i||219===i},number:J,numberCheck:function(t,e){var i=t[e.offset];return i<128||i>=202&&i<=211},arrayCheck:function(t,e){return t[e.offset]<160},switchStructureCheck:$}),tt=function(){function e(t){var e=this;this.$changes=new o(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,t&&t.forEach((function(t){return e.add(t)}))}return e.is=function(t){return void 0!==t.collection},e.prototype.add=function(t){var e=this.$refId++;return void 0!==t.$changes&&t.$changes.setParent(this,this.$changes.root,e),this.$changes.indexes[e]=e,this.$indexes.set(e,e),this.$items.set(e,t),this.$changes.change(e),e},e.prototype.at=function(t){var e=Array.from(this.$items.keys())[t];return this.$items.get(e)},e.prototype.entries=function(){return this.$items.entries()},e.prototype.delete=function(t){for(var e,i,n=this.$items.entries();(i=n.next())&&!i.done;)if(t===i.value[1]){e=i.value[0];break}return void 0!==e&&(this.$changes.delete(e),this.$indexes.delete(e),this.$items.delete(e))},e.prototype.clear=function(e){var i=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),e&&"string"!=typeof this.$changes.getType()&&this.$items.forEach((function(t){i.$changes.root.removeRef(t.$changes.refId)})),this.$items.clear(),this.$changes.operation({index:0,op:t.OPERATION.CLEAR}),this.$changes.touchParents()},e.prototype.has=function(t){return Array.from(this.$items.values()).some((function(e){return e===t}))},e.prototype.forEach=function(t){var e=this;this.$items.forEach((function(i,n,s){return t(i,n,e)}))},e.prototype.values=function(){return this.$items.values()},Object.defineProperty(e.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),e.prototype.setIndex=function(t,e){this.$indexes.set(t,e)},e.prototype.getIndex=function(t){return this.$indexes.get(t)},e.prototype.getByIndex=function(t){return this.$items.get(this.$indexes.get(t))},e.prototype.deleteByIndex=function(t){var e=this.$indexes.get(t);this.$items.delete(e),this.$indexes.delete(t)},e.prototype.toArray=function(){return Array.from(this.$items.values())},e.prototype.toJSON=function(){var t=[];return this.forEach((function(e,i){t.push("function"==typeof e.toJSON?e.toJSON():e)})),t},e.prototype.clone=function(t){var i;return t?i=Object.assign(new e,this):(i=new e,this.forEach((function(t){t.$changes?i.add(t.clone()):i.add(t)}))),i},e.prototype.triggerAll=function(){ht.prototype.triggerAll.apply(this)},e}(),et=function(){function e(t){var e=this;this.$changes=new o(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,t&&t.forEach((function(t){return e.add(t)}))}return e.is=function(t){return void 0!==t.set},e.prototype.add=function(e){var i,n;if(this.has(e))return!1;var s=this.$refId++;void 0!==e.$changes&&e.$changes.setParent(this,this.$changes.root,s);var r=null!==(n=null===(i=this.$changes.indexes[s])||void 0===i?void 0:i.op)&&void 0!==n?n:t.OPERATION.ADD;return this.$changes.indexes[s]=s,this.$indexes.set(s,s),this.$items.set(s,e),this.$changes.change(s,r),s},e.prototype.entries=function(){return this.$items.entries()},e.prototype.delete=function(t){for(var e,i,n=this.$items.entries();(i=n.next())&&!i.done;)if(t===i.value[1]){e=i.value[0];break}return void 0!==e&&(this.$changes.delete(e),this.$indexes.delete(e),this.$items.delete(e))},e.prototype.clear=function(e){var i=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),e&&"string"!=typeof this.$changes.getType()&&this.$items.forEach((function(t){i.$changes.root.removeRef(t.$changes.refId)})),this.$items.clear(),this.$changes.operation({index:0,op:t.OPERATION.CLEAR}),this.$changes.touchParents()},e.prototype.has=function(t){for(var e,i=this.$items.values(),n=!1;(e=i.next())&&!e.done;)if(t===e.value){n=!0;break}return n},e.prototype.forEach=function(t){var e=this;this.$items.forEach((function(i,n,s){return t(i,n,e)}))},e.prototype.values=function(){return this.$items.values()},Object.defineProperty(e.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),e.prototype.setIndex=function(t,e){this.$indexes.set(t,e)},e.prototype.getIndex=function(t){return this.$indexes.get(t)},e.prototype.getByIndex=function(t){return this.$items.get(this.$indexes.get(t))},e.prototype.deleteByIndex=function(t){var e=this.$indexes.get(t);this.$items.delete(e),this.$indexes.delete(t)},e.prototype.toArray=function(){return Array.from(this.$items.values())},e.prototype.toJSON=function(){var t=[];return this.forEach((function(e,i){t.push("function"==typeof e.toJSON?e.toJSON():e)})),t},e.prototype.clone=function(t){var i;return t?i=Object.assign(new e,this):(i=new e,this.forEach((function(t){t.$changes?i.add(t.clone()):i.add(t)}))),i},e.prototype.triggerAll=function(){ht.prototype.triggerAll.apply(this)},e}(),it=function(){function t(){this.handlers=[]}return t.prototype.register=function(t,e){return this.handlers.push(t),this},t.prototype.invoke=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.handlers.forEach((function(e){return e.apply(void 0,t)}))},t.prototype.invokeAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Promise.all(this.handlers.map((function(e){return e.apply(void 0,t)})))},t.prototype.remove=function(t){var e=this.handlers.indexOf(t);this.handlers[e]=this.handlers[this.handlers.length-1],this.handlers.pop()},t.prototype.clear=function(){this.handlers=[]},t}(),nt=function(){function t(){this.refIds=new WeakSet,this.containerIndexes=new WeakMap}return t.prototype.addRefId=function(t){this.refIds.has(t)||(this.refIds.add(t),this.containerIndexes.set(t,new Set))},t.get=function(e){return void 0===e.$filterState&&(e.$filterState=new t),e.$filterState},t}(),st=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(Error);function rt(t,e,i,n){if(!(t instanceof e))throw new st("a '"+e.name+"' was expected, but '"+t.constructor.name+"' was provided in "+i.constructor.name+"#"+n)}function at(t,e,i,n,s){!function(t,e,i,n){var s,r=!1;switch(e){case"number":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":case"int64":case"uint64":case"float32":case"float64":s="number",isNaN(t)&&console.log('trying to encode "NaN" in '+i.constructor.name+"#"+n);break;case"string":s="string",r=!0;break;case"boolean":return}if(typeof t!==s&&(!r||r&&null!==t)){var a="'"+JSON.stringify(t)+"'"+(t&&t.constructor&&" ("+t.constructor.name+")"||"");throw new st("a '"+s+"' was expected, but "+a+" was provided in "+i.constructor.name+"#"+n)}}(i,t,n,s);var r=N[t];if(!r)throw new st("a '"+t+"' was expected, but "+i+" was provided in "+n.constructor.name+"#"+s);r(e,i)}function ot(t,e,i){return Q[t](e,i)}var ht=function(){function e(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Object.defineProperties(this,{$changes:{value:new o(this,void 0,new a),enumerable:!1,writable:!0},$listeners:{value:{},enumerable:!1,writable:!0}});var i=this._definition.descriptors;i&&Object.defineProperties(this,i),t[0]&&this.assign(t[0])}return e.onError=function(t){console.error(t)},e.is=function(t){return t._definition&&void 0!==t._definition.schema},e.prototype.assign=function(t){return Object.assign(this,t),this},Object.defineProperty(e.prototype,"_definition",{get:function(){return this.constructor._definition},enumerable:!1,configurable:!0}),e.prototype.listen=function(t,e){var i=this;return this.$listeners[t]||(this.$listeners[t]=new it),this.$listeners[t].register(e),function(){return i.$listeners[t].remove(e)}},e.prototype.decode=function(i,n,s,r){void 0===n&&(n={offset:0}),void 0===s&&(s=this),void 0===r&&(r=new Map);var a=this.$changes.root,o=i.length,h=0,l=[];for(a.refs.set(h,this),r.set(h,l);n.offset<o;){var u=i[n.offset++];if(255!=u){var f=s.$changes,p=void 0!==s._definition,m=p?u>>6<<6:u;if(m!==t.OPERATION.CLEAR){var v=p?u%(m||255):J(i,n),y=p?s._definition.fieldsByIndex[v]:"",_=f.getType(v),x=void 0,w=void 0,b=void 0;if(p?w=s["_"+y]:(w=s.getByIndex(v),(m&t.OPERATION.ADD)===t.OPERATION.ADD?(b=s instanceof d?Z(i,n):v,s.setIndex(v,b)):b=s.getIndex(v)),(m&t.OPERATION.DELETE)===t.OPERATION.DELETE&&(m!==t.OPERATION.DELETE_AND_ADD&&s.deleteByIndex(v),w&&w.$changes&&a.removeRef(w.$changes.refId),x=null),void 0!==y){if(m===t.OPERATION.DELETE);else if(e.is(_)){var E=J(i,n);if(x=a.refs.get(E),m!==t.OPERATION.REPLACE){var T=this.getSchemaType(i,n,_);x||((x=this.createTypeInstance(T)).$changes.refId=E,w&&(x.onChange=w.onChange,x.onRemove=w.onRemove,x.$listeners=w.$listeners,w.$changes.refId&&E!==w.$changes.refId&&a.removeRef(w.$changes.refId))),a.addRef(E,x,x!==w)}}else if("string"==typeof _)x=ot(_,i,n);else{var S=g(Object.keys(_)[0]),A=J(i,n),O=a.refs.has(A)?w||a.refs.get(A):new S.constructor;if((x=O.clone(!0)).$changes.refId=A,w&&(x.onAdd=w.onAdd,x.onRemove=w.onRemove,x.onChange=w.onChange,w.$changes.refId&&A!==w.$changes.refId)){a.removeRef(w.$changes.refId);for(var C=[],P=w.entries(),L=void 0;(L=P.next())&&!L.done;){var R=L.value,I=R[0],M=R[1];C.push({op:t.OPERATION.DELETE,field:I,value:void 0,previousValue:M})}r.set(w.$changes.refId,C)}a.addRef(A,x,O!==w),S.getProxy&&(x=S.getProxy(x))}var D=w!==x;if(null!=x)if(x.$changes&&x.$changes.setParent(f.ref,f.root,v),s instanceof e)s[y]=x;else if(s instanceof d)I=b,s.$items.set(I,x);else if(s instanceof c)s.setAt(v,x);else if(s instanceof tt){var k=s.add(x);s.setIndex(v,k)}else s instanceof et&&!1!==(k=s.add(x))&&s.setIndex(v,k);D&&l.push({op:m,field:y,dynamicIndex:b,value:x,previousValue:w})}else{console.warn("@colyseus/schema: definition mismatch");for(var N={offset:n.offset};n.offset<o&&(!$(i,n)||(N.offset=n.offset+1,!a.refs.has(J(i,N))));)n.offset++}}else s.clear(!0)}else{h=J(i,n);var F=a.refs.get(h);if(!F)throw new Error('"refId" not found: '+h);s=F,l=[],r.set(h,l)}}return this._triggerChanges(r),a.garbageCollectDeletedRefs(),r},e.prototype.encode=function(i,n,s){void 0===i&&(i=!1),void 0===n&&(n=[]),void 0===s&&(s=!1);for(var r=this.$changes,a=new WeakSet,o=[r],h=1,l=0;l<h;l++){var c=o[l],u=c.ref,f=u instanceof e;c.ensureRefId(),a.add(c),c!==r&&(c.changed||i)&&(b(n,255),k(n,c.refId));for(var p=i?Array.from(c.allChanges):Array.from(c.changes.values()),m=0,v=p.length;m<v;m++){var y=i?{op:t.OPERATION.ADD,index:p[m]}:p[m],_=y.index,x=f?u._definition.fieldsByIndex&&u._definition.fieldsByIndex[_]:_,w=n.length;if(y.op!==t.OPERATION.TOUCH)if(f)b(n,_|y.op);else{if(b(n,y.op),y.op===t.OPERATION.CLEAR)continue;k(n,_)}if(f||(y.op&t.OPERATION.ADD)!=t.OPERATION.ADD||u instanceof d&&D(n,c.ref.$indexes.get(_)),y.op!==t.OPERATION.DELETE){var E=c.getType(_),T=c.getValue(_);if(T&&T.$changes&&!a.has(T.$changes)&&(o.push(T.$changes),T.$changes.ensureRefId(),h++),y.op!==t.OPERATION.TOUCH){if(e.is(E))rt(T,E,u,x),k(n,T.$changes.refId),(y.op&t.OPERATION.ADD)===t.OPERATION.ADD&&this.tryEncodeTypeId(n,E,T.constructor);else if("string"==typeof E)at(E,n,T,u,x);else{var S=g(Object.keys(E)[0]);rt(u["_"+x],S.constructor,u,x),k(n,T.$changes.refId)}s&&c.cache(_,n.slice(w))}}}i||s||c.discard()}return n},e.prototype.encodeAll=function(t){return this.encode(!0,[],t)},e.prototype.applyFilters=function(i,n){var s,r;void 0===n&&(n=!1);for(var a=this,o=new Set,h=nt.get(i),l=[this.$changes],c=1,u=[],f=function(f){var p=l[f];if(o.has(p.refId))return"continue";var g=p.ref,m=g instanceof e;b(u,255),k(u,p.refId);var v=h.refIds.has(p),y=n||!v;h.addRefId(p);var _=h.containerIndexes.get(p),x=y?Array.from(p.allChanges):Array.from(p.changes.values());!n&&m&&g._definition.indexesWithFilters&&g._definition.indexesWithFilters.forEach((function(e){!_.has(e)&&p.allChanges.has(e)&&(y?x.push(e):x.push({op:t.OPERATION.ADD,index:e}))}));for(var w=0,E=x.length;w<E;w++){var T=y?{op:t.OPERATION.ADD,index:x[w]}:x[w];if(T.op!==t.OPERATION.CLEAR){var S=T.index;if(T.op!==t.OPERATION.DELETE){var A=p.getValue(S),O=p.getType(S);if(m){if((C=g._definition.filters&&g._definition.filters[S])&&!C.call(g,i,A,a)){A&&A.$changes&&o.add(A.$changes.refId);continue}}else{var C,P=p.parent;if((C=p.getChildrenFilter())&&!C.call(P,i,g.$indexes.get(S),A,a)){A&&A.$changes&&o.add(A.$changes.refId);continue}}if(A.$changes&&(l.push(A.$changes),c++),T.op!==t.OPERATION.TOUCH)if(T.op===t.OPERATION.ADD||m)u.push.apply(u,null!==(s=p.caches[S])&&void 0!==s?s:[]),_.add(S);else if(_.has(S))u.push.apply(u,null!==(r=p.caches[S])&&void 0!==r?r:[]);else{if(_.add(S),b(u,t.OPERATION.ADD),k(u,S),g instanceof d){var L=p.ref.$indexes.get(S);D(u,L)}A.$changes?k(u,A.$changes.refId):N[O](u,A)}else A.$changes&&!m&&(b(u,t.OPERATION.ADD),k(u,S),g instanceof d&&(L=p.ref.$indexes.get(S),D(u,L)),k(u,A.$changes.refId))}else m?b(u,T.op|S):(b(u,T.op),k(u,S))}else b(u,T.op)}},p=0;p<c;p++)f(p);return u},e.prototype.clone=function(){var t=new this.constructor,e=this._definition.schema;for(var i in e)"object"==typeof this[i]&&"function"==typeof this[i].clone?t[i]=this[i].clone():t[i]=this[i];return t},e.prototype.triggerAll=function(){if(0!==this.$changes.root.refs.size){var t=new Map;e.prototype._triggerAllFillChanges.call(this,this,t);try{e.prototype._triggerChanges.call(this,t)}catch(t){e.onError(t)}}},e.prototype.toJSON=function(){var t=this._definition.schema,e=this._definition.deprecated,i={};for(var n in t)e[n]||null===this[n]||void 0===this[n]||(i[n]="function"==typeof this[n].toJSON?this[n].toJSON():this["_"+n]);return i},e.prototype.discardAllChanges=function(){this.$changes.discardAll()},e.prototype.getByIndex=function(t){return this[this._definition.fieldsByIndex[t]]},e.prototype.deleteByIndex=function(t){this[this._definition.fieldsByIndex[t]]=void 0},e.prototype.tryEncodeTypeId=function(t,e,i){e._typeid!==i._typeid&&(b(t,213),k(t,i._typeid))},e.prototype.getSchemaType=function(t,e,i){var n;return 213===t[e.offset]&&(e.offset++,n=this.constructor._context.get(J(t,e))),n||i},e.prototype.createTypeInstance=function(t){var e=new t;return e.$changes.root=this.$changes.root,e},e.prototype._triggerAllFillChanges=function(i,n){if(!n.has(i.$changes.refId)){var s=[];if(n.set(i.$changes.refId||0,s),i instanceof e){var r=i._definition.schema;for(var a in r)void 0!==(u=i["_"+a])&&(s.push({op:t.OPERATION.ADD,field:a,value:u,previousValue:void 0}),void 0!==u.$changes&&e.prototype._triggerAllFillChanges.call(this,u,n))}else for(var o=i.entries(),h=void 0;(h=o.next())&&!h.done;){var l=h.value,c=l[0],u=l[1];s.push({op:t.OPERATION.ADD,field:c,dynamicIndex:c,value:u,previousValue:void 0}),void 0!==u.$changes&&e.prototype._triggerAllFillChanges.call(this,u,n)}}},e.prototype._triggerChanges=function(i){var n=this;i.forEach((function(i,s){var r,a,o,h,l,c,u,d,f,p,g,m;if(i.length>0){for(var v=n.$changes.root.refs.get(s),y=v instanceof e,_=0;_<i.length;_++){var x=i[_],w=v.$listeners&&v.$listeners[x.field];if(y||(x.op===t.OPERATION.ADD&&void 0===x.previousValue?null===(a=(r=v).onAdd)||void 0===a||a.call(r,x.value,null!==(o=x.dynamicIndex)&&void 0!==o?o:x.field):x.op===t.OPERATION.DELETE?void 0!==x.previousValue&&(null===(l=(h=v).onRemove)||void 0===l||l.call(h,x.previousValue,null!==(c=x.dynamicIndex)&&void 0!==c?c:x.field)):x.op===t.OPERATION.DELETE_AND_ADD?(void 0!==x.previousValue&&(null===(d=(u=v).onRemove)||void 0===d||d.call(u,x.previousValue,x.dynamicIndex)),null===(p=(f=v).onAdd)||void 0===p||p.call(f,x.value,x.dynamicIndex)):x.op!==t.OPERATION.REPLACE&&x.value===x.previousValue||null===(m=(g=v).onChange)||void 0===m||m.call(g,x.value,x.dynamicIndex)),(x.op&t.OPERATION.DELETE)===t.OPERATION.DELETE&&x.previousValue instanceof e&&x.previousValue.onRemove&&x.previousValue.onRemove(),w)try{w.invoke(x.value,x.previousValue)}catch(t){e.onError(t)}}if(y&&v.onChange)try{v.onChange(i)}catch(t){e.onError(t)}}}))},e._definition=m.create(),e}(),lt=new v,ct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),s([_("string",lt)],e.prototype,"name",void 0),s([_("string",lt)],e.prototype,"type",void 0),s([_("number",lt)],e.prototype,"referencedType",void 0),e}(ht),ut=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fields=new c,e}return n(e,t),s([_("number",lt)],e.prototype,"id",void 0),s([_([ct],lt)],e.prototype,"fields",void 0),e}(ht),dt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.types=new c,e}return n(e,t),e.encode=function(t){var i=t.constructor,n=new e;n.rootType=i._typeid;var s=function(t,e){for(var i in e){var s=new ct;s.name=i;var r=void 0;if("string"==typeof e[i])r=e[i];else{var a=e[i],o=void 0;ht.is(a)?(r="ref",o=e[i]):"string"==typeof a[r=Object.keys(a)[0]]?r+=":"+a[r]:o=a[r],s.referencedType=o?o._typeid:-1}s.type=r,t.fields.push(s)}n.types.push(t)},r=i._context.types;for(var a in r){var o=new ut;o.id=Number(a),s(o,r[a]._definition.schema)}return n.encodeAll()},e.decode=function(t,i){var s=new v,r=new e;r.decode(t,i);var a=r.types.reduce((function(t,e){var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(ht),r=e.id;return t[r]=i,s.add(i,r),t}),{});r.types.forEach((function(t){var e=a[t.id];t.fields.forEach((function(t){var i;if(void 0!==t.referencedType){var n=t.type,r=a[t.referencedType];if(!r){var o=t.type.split(":");n=o[0],r=o[1]}"ref"===n?_(r,s)(e.prototype,t.name):_(((i={})[n]=r,i),s)(e.prototype,t.name)}else _(t.type,s)(e.prototype,t.name)}))}));var o=a[r.rootType],h=new o;for(var l in o._definition.schema){var c=o._definition.schema[l];"string"!=typeof c&&(h[l]="function"==typeof c?new c:new(g(Object.keys(c)[0]).constructor))}return h},s([_([ut],lt)],e.prototype,"types",void 0),s([_("number",lt)],e.prototype,"rootType",void 0),e}(ht);p("map",{constructor:d,getProxy:u}),p("array",{constructor:c,getProxy:l}),p("set",{constructor:et}),p("collection",{constructor:tt}),t.ArraySchema=c,t.CollectionSchema=tt,t.Context=v,t.MapSchema=d,t.Reflection=dt,t.ReflectionField=ct,t.ReflectionType=ut,t.Schema=ht,t.SchemaDefinition=m,t.SetSchema=et,t.decode=Q,t.defineTypes=function(t,e,i){for(var n in void 0===i&&(i=t._context||y),e)_(e[n],i)(t.prototype,n);return t},t.deprecated=function(t,e){return void 0===t&&(t=!0),function(e,i){var n=e.constructor._definition;n.deprecated[i]=!0,t&&(n.descriptors[i]={get:function(){throw new Error(i+" is deprecated.")},set:function(t){},enumerable:!1,configurable:!0})}},t.dumpChanges=function(t){for(var e=[t.$changes],i={},n=i,s=function(t){var i=e[t];i.changes.forEach((function(t){var e=i.ref,s=t.index,r=e._definition?e._definition.fieldsByIndex[s]:e.$indexes.get(s);n[r]=i.getValue(s)}))},r=0;r<1;r++)s(r);return i},t.encode=N,t.filter=function(t){return function(e,i){var n=e.constructor;n._definition.addFilter(i,t)&&(n._context.useFilters=!0)}},t.filterChildren=function(t){return function(e,i){var n=e.constructor;n._definition.addChildrenFilter(i,t)&&(n._context.useFilters=!0)}},t.hasFilter=function(t){return t._context&&t._context.useFilters},t.registerType=p,t.type=_,Object.defineProperty(t,"__esModule",{value:!0})}(e)})),F=function(){function t(t,e){var i=this;this.onStateChange=M(),this.onError=M(),this.onLeave=M(),this.onJoin=M(),this.hasJoined=!1,this.onMessageHandlers=R(),this.id=null,this.name=t,e&&(this.serializer=new(L("schema")),this.rootSchema=e,this.serializer.state=new e),this.onError((function(t,e){return console.warn("colyseus.js - onError => ("+t+") "+e)})),this.onLeave((function(){return i.removeAllListeners()}))}return t.prototype.connect=function(t){var e=this;this.connection=new O,this.connection.events.onmessage=this.onMessageCallback.bind(this),this.connection.events.onclose=function(t){if(!e.hasJoined)return console.warn("Room connection was closed unexpectedly ("+t.code+"): "+t.reason),void e.onError.invoke(t.code,t.reason);e.onLeave.invoke(t.code),e.destroy()},this.connection.events.onerror=function(t){console.warn("Room, onError ("+t.code+"): "+t.reason),e.onError.invoke(t.code,t.reason)},this.connection.connect(t)},t.prototype.leave=function(t){var i=this;return void 0===t&&(t=!0),new Promise((function(n){i.onLeave((function(t){return n(t)})),i.connection?t?i.connection.send([e.Protocol.LEAVE_ROOM]):i.connection.close():i.onLeave.invoke(4e3)}))},t.prototype.onMessage=function(t,e){return this.onMessageHandlers.on(this.getMessageHandlerKey(t),e)},t.prototype.send=function(t,i){var n,s=[e.Protocol.ROOM_DATA];if("string"==typeof t?N.encode.string(s,t):N.encode.number(s,t),void 0!==i){var r=b(i);(n=new Uint8Array(s.length+r.byteLength)).set(new Uint8Array(s),0),n.set(new Uint8Array(r),s.length)}else n=new Uint8Array(s);this.connection.send(n.buffer)},Object.defineProperty(t.prototype,"state",{get:function(){return this.serializer.getState()},enumerable:!1,configurable:!0}),t.prototype.removeAllListeners=function(){this.onJoin.clear(),this.onStateChange.clear(),this.onError.clear(),this.onLeave.clear(),this.onMessageHandlers.events={}},t.prototype.onMessageCallback=function(t){var i=Array.from(new Uint8Array(t.data)),n=i[0];if(n===e.Protocol.JOIN_ROOM){var s=1;if(this.serializerId=function(t,e){for(var i=t[e++],n="",s=0,r=e,a=e+i;r<a;r++){var o=t[r];if(0!=(128&o))if(192!=(224&o))if(224!=(240&o)){if(240!=(248&o))throw new Error("Invalid byte "+o.toString(16));(s=(7&o)<<18|(63&t[++r])<<12|(63&t[++r])<<6|(63&t[++r])<<0)>=65536?(s-=65536,n+=String.fromCharCode(55296+(s>>>10),56320+(1023&s))):n+=String.fromCharCode(s)}else n+=String.fromCharCode((15&o)<<12|(63&t[++r])<<6|(63&t[++r])<<0);else n+=String.fromCharCode((31&o)<<6|63&t[++r]);else n+=String.fromCharCode(o)}return n}(i,s),s+=function(t){void 0===t&&(t="");for(var e=0,i=0,n=0,s=t.length;n<s;n++)(e=t.charCodeAt(n))<128?i+=1:e<2048?i+=2:e<55296||e>=57344?i+=3:(n++,i+=4);return i+1}(this.serializerId),!this.serializer){var r=L(this.serializerId);this.serializer=new r}i.length>s&&this.serializer.handshake&&this.serializer.handshake(i,{offset:s}),this.hasJoined=!0,this.onJoin.invoke(),this.connection.send([e.Protocol.JOIN_ROOM])}else if(n===e.Protocol.ERROR){var a={offset:1},o=N.decode.number(i,a),h=N.decode.string(i,a);this.onError.invoke(o,h)}else if(n===e.Protocol.LEAVE_ROOM)this.leave();else if(n===e.Protocol.ROOM_DATA_SCHEMA){var l={offset:1};(h=new(u=this.serializer.getState().constructor._context.get(N.decode.number(i,l)))).decode(i,l),this.dispatchMessage(u,h)}else if(n===e.Protocol.ROOM_STATE)i.shift(),this.setState(i);else if(n===e.Protocol.ROOM_STATE_PATCH)i.shift(),this.patch(i);else if(n===e.Protocol.ROOM_DATA){var c={offset:1},u=N.decode.stringCheck(i,c)?N.decode.string(i,c):N.decode.number(i,c);h=i.length>c.offset?function(t,e){void 0===e&&(e=0);var i=new x(t,e),n=i._parse();if(i._offset!==t.byteLength)throw new Error(t.byteLength-i._offset+" trailing bytes");return n}(t.data,c.offset):void 0,this.dispatchMessage(u,h)}},t.prototype.setState=function(t){this.serializer.setState(t),this.onStateChange.invoke(this.serializer.getState())},t.prototype.patch=function(t){this.serializer.patch(t),this.onStateChange.invoke(this.serializer.getState())},t.prototype.dispatchMessage=function(t,e){var i=this.getMessageHandlerKey(t);this.onMessageHandlers.events[i]?this.onMessageHandlers.emit(i,e):this.onMessageHandlers.events["*"]?this.onMessageHandlers.emit("*",t,e):console.warn("colyseus.js: onMessage() not registered for type '"+t+"'.")},t.prototype.destroy=function(){this.serializer&&this.serializer.teardown()},t.prototype.getMessageHandlerKey=function(t){switch(typeof t){case"function":return"$"+t._typeid;case"string":return t;case"number":return"i"+t;default:throw new Error("invalid message type.")}},t}();function G(){return D||(D="undefined"!=typeof cc&&cc.sys&&cc.sys.localStorage?cc.sys.localStorage:"undefined"!=typeof window&&window.localStorage?window.localStorage:{cache:{},setItem:function(t,e){this.cache[t]=e},getItem:function(t){this.cache[t]},removeItem:function(t){delete this.cache[t]}}),D}e.Platform=void 0,(k=e.Platform||(e.Platform={})).ios="ios",k.android="android";var B,z=function(){function t(t){var e,i,n,s=this;this._id=void 0,this.username=void 0,this.displayName=void 0,this.avatarUrl=void 0,this.isAnonymous=void 0,this.email=void 0,this.lang=void 0,this.location=void 0,this.timezone=void 0,this.metadata=void 0,this.devices=void 0,this.facebookId=void 0,this.twitterId=void 0,this.googleId=void 0,this.gameCenterId=void 0,this.steamId=void 0,this.friendIds=void 0,this.blockedUserIds=void 0,this.createdAt=void 0,this.updatedAt=void 0,this.token=void 0,this.endpoint=t.replace("ws","http"),e="colyseus-auth-token",i=function(t){return s.token=t},n=G().getItem(e),"undefined"!=typeof Promise&&n instanceof Promise?n.then((function(t){return i(t)})):i(n)}return Object.defineProperty(t.prototype,"hasToken",{get:function(){return!!this.token},enumerable:!1,configurable:!0}),t.prototype.login=function(t){return void 0===t&&(t={}),s(this,void 0,void 0,(function(){var e,i,n;return r(this,(function(s){switch(s.label){case 0:return e=Object.assign({},t),this.hasToken&&(e.token=this.token),[4,this.request("post","/auth",e)];case 1:for(n in i=s.sent(),this.token=i.token,r="colyseus-auth-token",a=this.token,G().setItem(r,a),i)this.hasOwnProperty(n)&&(this[n]=i[n]);return this.registerPingService(),[2,this]}var r,a}))}))},t.prototype.save=function(){return s(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this.request("put","/auth",{},{username:this.username,displayName:this.displayName,avatarUrl:this.avatarUrl,lang:this.lang,location:this.location,timezone:this.timezone})];case 1:return t.sent(),[2,this]}}))}))},t.prototype.getFriends=function(){return s(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this.request("get","/friends/all")];case 1:return[2,t.sent()]}}))}))},t.prototype.getOnlineFriends=function(){return s(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this.request("get","/friends/online")];case 1:return[2,t.sent()]}}))}))},t.prototype.getFriendRequests=function(){return s(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this.request("get","/friends/requests")];case 1:return[2,t.sent()]}}))}))},t.prototype.sendFriendRequest=function(t){return s(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.request("post","/friends/requests",{userId:t})];case 1:return[2,e.sent()]}}))}))},t.prototype.acceptFriendRequest=function(t){return s(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.request("put","/friends/requests",{userId:t})];case 1:return[2,e.sent()]}}))}))},t.prototype.declineFriendRequest=function(t){return s(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.request("del","/friends/requests",{userId:t})];case 1:return[2,e.sent()]}}))}))},t.prototype.blockUser=function(t){return s(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.request("post","/friends/block",{userId:t})];case 1:return[2,e.sent()]}}))}))},t.prototype.unblockUser=function(t){return s(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.request("put","/friends/block",{userId:t})];case 1:return[2,e.sent()]}}))}))},t.prototype.request=function(t,e,i,n,a){return void 0===i&&(i={}),void 0===a&&(a={}),s(this,void 0,void 0,(function(){var s,o,h,l;return r(this,(function(r){switch(r.label){case 0:for(o in a.Accept="application/json",this.hasToken&&(a.Authorization="Bearer "+this.token),s=[],i)s.push(o+"="+i[o]);return h=s.length>0?"?"+s.join("&"):"",l={headers:a},n&&(l.body=n),[4,y[t](""+this.endpoint+e+h,l)];case 1:return[2,r.sent().data]}}))}))},t.prototype.logout=function(){var t;this.token=void 0,t="colyseus-auth-token",G().removeItem(t),this.unregisterPingService()},t.prototype.registerPingService=function(t){var e=this;void 0===t&&(t=15e3),this.unregisterPingService(),this.keepOnlineInterval=setInterval((function(){return e.request("get","/auth")}),t)},t.prototype.unregisterPingService=function(){clearInterval(this.keepOnlineInterval)},t}(),U=function(t){function e(i,n){var s=t.call(this,i)||this;return s.code=n,Object.setPrototypeOf(s,e.prototype),s}return n(e,t),e}(Error),Y="undefined"!=typeof window&&void 0!==(null===(B=null===window||void 0===window?void 0:window.location)||void 0===B?void 0:B.hostname)?window.location.protocol.replace("http","ws")+"//"+window.location.hostname+(window.location.port&&":"+window.location.port):"ws://127.0.0.1:2567",X=function(){function t(t){void 0===t&&(t=Y),this.endpoint=t}return Object.defineProperty(t.prototype,"auth",{get:function(){return this._auth||(this._auth=new z(this.endpoint)),this._auth},enumerable:!1,configurable:!0}),t.prototype.joinOrCreate=function(t,e,i){return void 0===e&&(e={}),s(this,void 0,void 0,(function(){return r(this,(function(n){switch(n.label){case 0:return[4,this.createMatchMakeRequest("joinOrCreate",t,e,i)];case 1:return[2,n.sent()]}}))}))},t.prototype.create=function(t,e,i){return void 0===e&&(e={}),s(this,void 0,void 0,(function(){return r(this,(function(n){switch(n.label){case 0:return[4,this.createMatchMakeRequest("create",t,e,i)];case 1:return[2,n.sent()]}}))}))},t.prototype.join=function(t,e,i){return void 0===e&&(e={}),s(this,void 0,void 0,(function(){return r(this,(function(n){switch(n.label){case 0:return[4,this.createMatchMakeRequest("join",t,e,i)];case 1:return[2,n.sent()]}}))}))},t.prototype.joinById=function(t,e,i){return void 0===e&&(e={}),s(this,void 0,void 0,(function(){return r(this,(function(n){switch(n.label){case 0:return[4,this.createMatchMakeRequest("joinById",t,e,i)];case 1:return[2,n.sent()]}}))}))},t.prototype.reconnect=function(t,e,i){return s(this,void 0,void 0,(function(){return r(this,(function(n){switch(n.label){case 0:return[4,this.createMatchMakeRequest("joinById",t,{sessionId:e},i)];case 1:return[2,n.sent()]}}))}))},t.prototype.getAvailableRooms=function(t){return void 0===t&&(t=""),s(this,void 0,void 0,(function(){var e;return r(this,(function(i){switch(i.label){case 0:return e=this.endpoint.replace("ws","http")+"/matchmake/"+t,[4,d(e,{headers:{Accept:"application/json"}})];case 1:return[2,i.sent().data]}}))}))},t.prototype.consumeSeatReservation=function(t,e){return s(this,void 0,void 0,(function(){var i;return r(this,(function(n){return(i=this.createRoom(t.room.name,e)).id=t.room.roomId,i.sessionId=t.sessionId,i.connect(this.buildEndpoint(t.room,{sessionId:i.sessionId})),[2,new Promise((function(t,e){var n=function(t,i){return e(new _(t,i))};i.onError.once(n),i.onJoin.once((function(){i.onError.remove(n),t(i)}))}))]}))}))},t.prototype.createMatchMakeRequest=function(t,e,i,n){return void 0===i&&(i={}),s(this,void 0,void 0,(function(){var s,a;return r(this,(function(r){switch(r.label){case 0:return s=this.endpoint.replace("ws","http")+"/matchmake/"+t+"/"+e,this._auth&&this._auth.hasToken&&(i.token=this._auth.token),[4,p(s,{headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i)})];case 1:if((a=r.sent().data).error)throw new U(a.error,a.code);return[2,this.consumeSeatReservation(a,n)]}}))}))},t.prototype.createRoom=function(t,e){return new F(t,e)},t.prototype.buildEndpoint=function(t,e){void 0===e&&(e={});var i=[];for(var n in e)e.hasOwnProperty(n)&&i.push(n+"="+e[n]);return this.endpoint+"/"+t.processId+"/"+t.roomId+"?"+i.join("&")},t}(),H=function(){function t(){}return t.prototype.setState=function(t){this.state.decode(t)},t.prototype.getState=function(){return this.state},t.prototype.patch=function(t){this.state.decode(t)},t.prototype.teardown=function(){var t,e;null===(e=null===(t=this.state)||void 0===t?void 0:t.$changes)||void 0===e||e.root.clearRefs()},t.prototype.handshake=function(t,e){this.state?(new N.Reflection).decode(t,e):this.state=N.Reflection.decode(t,e)},t}(),j=function(){function t(){}return t.prototype.setState=function(t){},t.prototype.getState=function(){return null},t.prototype.patch=function(t){},t.prototype.teardown=function(){},t.prototype.handshake=function(t){},t}();P("schema",H),P("none",j),e.Auth=z,e.Client=X,e.Room=F,e.SchemaSerializer=H,e.registerSerializer=P,Object.defineProperty(e,"__esModule",{value:!0})})(e)}).call(this,i(4))},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0}),i(39);var r,a=n(i(160)),o=i(40),h=i(1),l=i(136),c=i(137),u=i(26),d=i(0),f=i(8),p=i(38),g=i(157),m=i(158),v=i(159),y=s(i(5));if(h.GameConstants.DEVELOPMENT)window.onload=function(){var t={type:Phaser.AUTO,backgroundColor:"020c18",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,parent:"content",width:h.GameConstants.GAME_WIDTH,height:h.GameConstants.GAME_HEIGHT},plugins:{scene:[{key:"rexGestures",plugin:a.default,mapping:"rexGestures"}]},scene:[l.BootScene,c.PreloadScene,g.SplashScene,m.PaymentScene,u.BoardScene,p.LevelEditionScene]};r=new o.Game(t),window.focus(),_(),window.addEventListener("resize",_,!1),window.addEventListener("orientationchange",x,!1)};else{try{d.GameVars.clashdomeClient=new v.ClashdomeMessageClient({onLoginSuccess:function(){y.SDK.onLoginSuccess()},onStartGame:function(t){var e,i;e=t,i={type:Phaser.AUTO,backgroundColor:"CCCCCC",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,parent:"content",width:h.GameConstants.GAME_WIDTH,height:h.GameConstants.GAME_HEIGHT},plugins:{scene:[{key:"rexGestures",plugin:a.default,mapping:"rexGestures"}]},scene:[l.BootScene,c.PreloadScene,g.SplashScene,m.PaymentScene,u.BoardScene,p.LevelEditionScene]},r=new o.Game(i,e),window.focus(),d.GameVars.clashdomeClient.dispatchGameStarted(r)}}),console.log(d.GameVars.clashdomeClient)}catch(t){console.log(t)}}function _(){var t=document.querySelector("canvas"),e=window.innerWidth,i=window.innerHeight,n=e/i,s=r.config.width/r.config.height;n<s?(t.style.width=e+"px",t.style.height=e/s+"px"):(t.style.width=i*s+"px",t.style.height=i+"px")}function x(){var t=window.innerWidth;window.innerHeight>t?(d.GameVars.intitialised||setTimeout((function(){f.GameManager.init()}),300),document.getElementById("orientation").style.display="none",document.getElementById("content").style.display="block"):(document.getElementById("orientation").style.display="block",document.getElementById("content").style.display="none")}},function(t,e,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var s in e=arguments[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)},s=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function a(t){try{h(n.next(t))}catch(t){r(t)}}function o(t){try{h(n.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}h((n=n.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var i,n,s,r,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function o(r){return function(o){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(s=2&r[0]?n.return:r[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(s=a.trys,(s=s.length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){a.label=r[1];break}if(6===r[0]&&a.label<s[1]){a.label=s[1],s=r;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(r);break}s[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,o])}}},a=this&&this.__read||function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,s,r=i.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)a.push(n.value)}catch(t){s={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(s)throw s.error}}return a},o=this&&this.__spreadArray||function(t,e){for(var i=0,n=e.length,s=t.length;i<n;i++,s++)t[s]=e[i];return t},h=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.ActionBuilder=e.TransactionBuilder=e.Api=void 0;var l=i(72),c=i(42),u=function(){function t(t){this.contracts=new Map,this.cachedAbis=new Map,this.transactionExtensions=[{id:1,type:"resource_payer",keys:["payer","max_net_bytes","max_cpu_us","max_memory_bytes"]}],this.rpc=t.rpc,this.authorityProvider=t.authorityProvider||t.rpc,this.abiProvider=t.abiProvider||t.rpc,this.signatureProvider=t.signatureProvider,this.chainId=t.chainId,this.textEncoder=t.textEncoder,this.textDecoder=t.textDecoder,this.abiTypes=c.getTypesFromAbi(c.createAbiTypes()),this.transactionTypes=c.getTypesFromAbi(c.createTransactionTypes())}return t.prototype.rawAbiToJson=function(t){var e=new c.SerialBuffer({textEncoder:this.textEncoder,textDecoder:this.textDecoder,array:t});if(!c.supportedAbiVersion(e.getString()))throw new Error("Unsupported abi version");return e.restartRead(),this.abiTypes.get("abi_def").deserialize(e)},t.prototype.jsonToRawAbi=function(t){var e=new c.SerialBuffer({textEncoder:this.textEncoder,textDecoder:this.textDecoder});if(this.abiTypes.get("abi_def").serialize(e,t),!c.supportedAbiVersion(e.getString()))throw new Error("Unsupported abi version");return e.asUint8Array()},t.prototype.getCachedAbi=function(t,e){return void 0===e&&(e=!1),s(this,void 0,void 0,(function(){var i,n,s,a;return r(this,(function(r){switch(r.label){case 0:if(!e&&this.cachedAbis.get(t))return[2,this.cachedAbis.get(t)];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.abiProvider.getRawAbi(t)];case 2:return n=r.sent().abi,s=this.rawAbiToJson(n),i={rawAbi:n,abi:s},[3,4];case 3:throw(a=r.sent()).message="fetching abi for "+t+": "+a.message,a;case 4:if(!i)throw new Error("Missing abi for "+t);return this.cachedAbis.set(t,i),[2,i]}}))}))},t.prototype.getAbi=function(t,e){return void 0===e&&(e=!1),s(this,void 0,void 0,(function(){return r(this,(function(i){switch(i.label){case 0:return[4,this.getCachedAbi(t,e)];case 1:return[2,i.sent().abi]}}))}))},t.prototype.getTransactionAbis=function(t,e){return void 0===e&&(e=!1),s(this,void 0,void 0,(function(){var i,n,h,l,c=this;return r(this,(function(u){return i=(t.context_free_actions||[]).concat(t.actions),n=i.map((function(t){return t.account})),h=new Set(n),l=o([],a(h)).map((function(t){return s(c,void 0,void 0,(function(){var i;return r(this,(function(n){switch(n.label){case 0:return i={accountName:t},[4,this.getCachedAbi(t,e)];case 1:return[2,(i.abi=n.sent().rawAbi,i)]}}))}))})),[2,Promise.all(l)]}))}))},t.prototype.getContract=function(t,e){return void 0===e&&(e=!1),s(this,void 0,void 0,(function(){var i,n,s,a,o,l,u,d,f,p,g;return r(this,(function(r){switch(r.label){case 0:return!e&&this.contracts.get(t)?[2,this.contracts.get(t)]:[4,this.getAbi(t,e)];case 1:i=r.sent(),n=c.getTypesFromAbi(c.createInitialTypes(),i),s=new Map;try{for(a=h(i.actions),o=a.next();!o.done;o=a.next())l=o.value,u=l.name,d=l.type,s.set(u,c.getType(n,d))}catch(t){p={error:t}}finally{try{o&&!o.done&&(g=a.return)&&g.call(a)}finally{if(p)throw p.error}}return f={types:n,actions:s},this.contracts.set(t,f),[2,f]}}))}))},t.prototype.serialize=function(t,e,i){this.transactionTypes.get(e).serialize(t,i)},t.prototype.deserialize=function(t,e){return this.transactionTypes.get(e).deserialize(t)},t.prototype.serializeTransaction=function(t){var e=new c.SerialBuffer({textEncoder:this.textEncoder,textDecoder:this.textDecoder});return this.serialize(e,"transaction",n({max_net_usage_words:0,max_cpu_usage_ms:0,delay_sec:0,context_free_actions:[],actions:[],transaction_extensions:[]},t)),e.asUint8Array()},t.prototype.serializeContextFreeData=function(t){var e,i;if(!t||!t.length)return null;var n=new c.SerialBuffer({textEncoder:this.textEncoder,textDecoder:this.textDecoder});n.pushVaruint32(t.length);try{for(var s=h(t),r=s.next();!r.done;r=s.next()){var a=r.value;n.pushBytes(a)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}return n.asUint8Array()},t.prototype.deserializeTransaction=function(t){var e=new c.SerialBuffer({textEncoder:this.textEncoder,textDecoder:this.textDecoder});return e.pushArray(t),this.deserialize(e,"transaction")},t.prototype.serializeTransactionExtensions=function(t){var e=[];if(t.resource_payer){var i=new c.SerialBuffer({textEncoder:this.textEncoder,textDecoder:this.textDecoder});c.getTypesFromAbi(c.createTransactionExtensionTypes()).get("resource_payer").serialize(i,t.resource_payer),e=o(o([],a(e)),[[1,c.arrayToHex(i.asUint8Array())]])}return e},t.prototype.deserializeTransactionExtensions=function(t){var e=this,i={};return t.forEach((function(t){var n=e.transactionExtensions.find((function(e){return e.id===t[0]}));if(void 0===n)throw new Error("Transaction Extension could not be determined: "+t);var s=c.getTypesFromAbi(c.createTransactionExtensionTypes()),r=new c.SerialBuffer({textEncoder:e.textEncoder,textDecoder:e.textDecoder});r.pushArray(c.hexToUint8Array(t[1]));var a=s.get(n.type).deserialize(r);1===t[0]&&(a.max_net_bytes=Number(a.max_net_bytes),a.max_cpu_us=Number(a.max_cpu_us),a.max_memory_bytes=Number(a.max_memory_bytes),i.resource_payer=a)})),i},t.prototype.deleteTransactionExtensionObjects=function(t){return delete t.resource_payer,t},t.prototype.serializeActions=function(t){return s(this,void 0,void 0,(function(){var e=this;return r(this,(function(i){switch(i.label){case 0:return[4,Promise.all(t.map((function(t){return s(e,void 0,void 0,(function(){var e,i,n,s,a;return r(this,(function(r){switch(r.label){case 0:return e=t.account,i=t.name,n=t.authorization,s=t.data,[4,this.getContract(e)];case 1:return a=r.sent(),"object"!=typeof s?[2,t]:[2,c.serializeAction(a,e,i,n,s,this.textEncoder,this.textDecoder)]}}))}))})))];case 1:return[2,i.sent()]}}))}))},t.prototype.deserializeActions=function(t){return s(this,void 0,void 0,(function(){var e=this;return r(this,(function(i){switch(i.label){case 0:return[4,Promise.all(t.map((function(t){var i=t.account,n=t.name,a=t.authorization,o=t.data;return s(e,void 0,void 0,(function(){var t;return r(this,(function(e){switch(e.label){case 0:return[4,this.getContract(i)];case 1:return t=e.sent(),[2,c.deserializeAction(t,i,n,a,o,this.textEncoder,this.textDecoder)]}}))}))})))];case 1:return[2,i.sent()]}}))}))},t.prototype.deserializeTransactionWithActions=function(t){return s(this,void 0,void 0,(function(){var e,i,s;return r(this,(function(r){switch(r.label){case 0:return"string"==typeof t&&(t=c.hexToUint8Array(t)),e=this.deserializeTransaction(t),[4,this.deserializeActions(e.context_free_actions)];case 1:return i=r.sent(),[4,this.deserializeActions(e.actions)];case 2:return s=r.sent(),[2,n(n({},e),{context_free_actions:i,actions:s})]}}))}))},t.prototype.deflateSerializedArray=function(t){return l.deflate(t,{level:9})},t.prototype.inflateSerializedArray=function(t){return l.inflate(t)},t.prototype.transact=function(t,e){var i=void 0===e?{}:e,a=i.broadcast,o=void 0===a||a,h=i.sign,l=void 0===h||h,c=i.readOnlyTrx,u=i.returnFailureTraces,d=i.requiredKeys,f=i.compression,p=i.blocksBehind,g=i.useLastIrreversible,m=i.expireSeconds;return s(this,void 0,void 0,(function(){var e,i,s,a,h,v,y,_;return r(this,(function(r){switch(r.label){case 0:if("number"==typeof p&&g)throw new Error("Use either blocksBehind or useLastIrreversible");return this.chainId?[3,2]:[4,this.rpc.get_info()];case 1:e=r.sent(),this.chainId=e.chain_id,r.label=2;case 2:return"number"!=typeof p&&!g||!m?[3,4]:[4,this.generateTapos(e,t,p,g,m)];case 3:t=r.sent(),r.label=4;case 4:if(!this.hasRequiredTaposFields(t))throw new Error("Required configuration or TAPOS fields are not present");return[4,this.getTransactionAbis(t)];case 5:return i=r.sent(),s=[n({},t)],_={},[4,this.serializeTransactionExtensions(t)];case 6:return _.transaction_extensions=r.sent(),[4,this.serializeActions(t.context_free_actions||[])];case 7:return _.context_free_actions=r.sent(),[4,this.serializeActions(t.actions)];case 8:return t=n.apply(void 0,s.concat([(_.actions=r.sent(),_)])),t=this.deleteTransactionExtensionObjects(t),a=this.serializeTransaction(t),h=this.serializeContextFreeData(t.context_free_data),v={serializedTransaction:a,serializedContextFreeData:h,signatures:[]},l?d?[3,11]:[4,this.signatureProvider.getAvailableKeys()]:[3,13];case 9:return y=r.sent(),[4,this.authorityProvider.getRequiredKeys({transaction:t,availableKeys:y})];case 10:d=r.sent(),r.label=11;case 11:return[4,this.signatureProvider.sign({chainId:this.chainId,requiredKeys:d,serializedTransaction:a,serializedContextFreeData:h,abis:i})];case 12:v=r.sent(),r.label=13;case 13:return o?f?[2,this.pushCompressedSignedTransaction(v,c,u)]:[2,this.pushSignedTransaction(v,c,u)]:[2,v]}}))}))},t.prototype.query=function(t,e,i,a){var o=a.sign,h=a.requiredKeys,l=a.authorization,u=void 0===l?[]:l;return s(this,void 0,void 0,(function(){var s,a,l,d,f,p,g,m,v,y,_;return r(this,(function(r){switch(r.label){case 0:return[4,this.rpc.get_info()];case 1:return s=r.sent(),[4,this.tryRefBlockFromGetInfo(s)];case 2:return a=r.sent(),l=new c.SerialBuffer({textEncoder:this.textEncoder,textDecoder:this.textDecoder}),c.serializeQuery(l,i),d=n(n({},c.transactionHeader(a,1800)),{context_free_actions:[],actions:[{account:t,name:"queryit",authorization:u,data:c.arrayToHex(l.asUint8Array())}]}),f=this.serializeTransaction(d),p=[],o?[4,this.getTransactionAbis(d)]:[3,8];case 3:return g=r.sent(),h?[3,6]:[4,this.signatureProvider.getAvailableKeys()];case 4:return m=r.sent(),[4,this.authorityProvider.getRequiredKeys({transaction:d,availableKeys:m})];case 5:h=r.sent(),r.label=6;case 6:return[4,this.signatureProvider.sign({chainId:this.chainId,requiredKeys:h,serializedTransaction:f,serializedContextFreeData:null,abis:g})];case 7:v=r.sent(),p=v.signatures,r.label=8;case 8:return[4,this.rpc.send_transaction({signatures:p,compression:0,serializedTransaction:f})];case 9:return y=r.sent(),_=new c.SerialBuffer({textEncoder:this.textEncoder,textDecoder:this.textDecoder,array:c.hexToUint8Array(y.processed.action_traces[0][1].return_value)}),e?[2,c.deserializeAnyvarShort(_)]:[2,c.deserializeAnyvar(_)]}}))}))},t.prototype.pushSignedTransaction=function(t,e,i){var n=t.signatures,a=t.serializedTransaction,o=t.serializedContextFreeData;return void 0===e&&(e=!1),void 0===i&&(i=!1),s(this,void 0,void 0,(function(){return r(this,(function(t){return e?[2,this.rpc.push_ro_transaction({signatures:n,serializedTransaction:a,serializedContextFreeData:o},i)]:[2,this.rpc.push_transaction({signatures:n,serializedTransaction:a,serializedContextFreeData:o})]}))}))},t.prototype.pushCompressedSignedTransaction=function(t,e,i){var n=t.signatures,a=t.serializedTransaction,o=t.serializedContextFreeData;return void 0===e&&(e=!1),void 0===i&&(i=!1),s(this,void 0,void 0,(function(){var t,s;return r(this,(function(r){return t=this.deflateSerializedArray(a),s=this.deflateSerializedArray(o||new Uint8Array(0)),e?[2,this.rpc.push_ro_transaction({signatures:n,compression:1,serializedTransaction:t,serializedContextFreeData:s},i)]:[2,this.rpc.push_transaction({signatures:n,compression:1,serializedTransaction:t,serializedContextFreeData:s})]}))}))},t.prototype.generateTapos=function(t,e,i,a,o){return s(this,void 0,void 0,(function(){var s,h,l,u;return r(this,(function(r){switch(r.label){case 0:return t?[3,2]:[4,this.rpc.get_info()];case 1:t=r.sent(),r.label=2;case 2:return a?[4,this.tryRefBlockFromGetInfo(t)]:[3,4];case 3:return s=r.sent(),[2,n(n({},c.transactionHeader(s,o)),e)];case 4:return(h=t.head_block_num-i)<=t.last_irreversible_block_num?[4,this.tryGetBlockInfo(h)]:[3,6];case 5:return u=r.sent(),[3,8];case 6:return[4,this.tryGetBlockHeaderState(h)];case 7:u=r.sent(),r.label=8;case 8:return l=u,[2,n(n({},c.transactionHeader(l,o)),e)]}}))}))},t.prototype.hasRequiredTaposFields=function(t){var e=t.expiration,i=t.ref_block_num,n=t.ref_block_prefix;return!(!e||"number"!=typeof i||"number"!=typeof n)},t.prototype.tryGetBlockHeaderState=function(t){return s(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,4]),[4,this.rpc.get_block_header_state(t)];case 1:return[2,e.sent()];case 2:return e.sent(),[4,this.tryGetBlockInfo(t)];case 3:return[2,e.sent()];case 4:return[2]}}))}))},t.prototype.tryGetBlockInfo=function(t){return s(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,4]),[4,this.rpc.get_block_info(t)];case 1:return[2,e.sent()];case 2:return e.sent(),[4,this.rpc.get_block(t)];case 3:return[2,e.sent()];case 4:return[2]}}))}))},t.prototype.tryRefBlockFromGetInfo=function(t){return s(this,void 0,void 0,(function(){var e;return r(this,(function(i){switch(i.label){case 0:return t.hasOwnProperty("last_irreversible_block_id")&&t.hasOwnProperty("last_irreversible_block_num")&&t.hasOwnProperty("last_irreversible_block_time")?[2,{block_num:t.last_irreversible_block_num,id:t.last_irreversible_block_id,timestamp:t.last_irreversible_block_time}]:[3,1];case 1:return[4,this.tryGetBlockInfo(t.last_irreversible_block_num)];case 2:return[2,{block_num:(e=i.sent()).block_num,id:e.id,timestamp:e.timestamp}]}}))}))},t.prototype.with=function(t){return new f(this,t)},t.prototype.buildTransaction=function(t){var e=new d(this);return t?t(e):e},t}();e.Api=u;var d=function(){function t(t){this.actions=[],this.contextFreeGroups=[],this.api=t}return t.prototype.with=function(t){var e=new f(this.api,t);return this.actions.push(e),e},t.prototype.associateContextFree=function(t){return this.contextFreeGroups.push(t),this},t.prototype.send=function(t){return s(this,void 0,void 0,(function(){var e,i,n,a=this;return r(this,(function(o){switch(o.label){case 0:return e=[],i=[],n=this.actions.map((function(t){return t.serializedData})),[4,Promise.all(this.contextFreeGroups.map((function(t){return s(a,void 0,void 0,(function(){var s,a,o,h;return r(this,(function(r){return s=t({cfd:e.length,cfa:i.length}),a=s.action,o=s.contextFreeAction,h=s.contextFreeData,a&&n.push(a),o&&i.push(o),h&&e.push(h),[2]}))}))})))];case 1:return o.sent(),this.contextFreeGroups=[],this.actions=[],[4,this.api.transact({context_free_data:e,context_free_actions:i,actions:n},t)];case 2:return[2,o.sent()]}}))}))},t}();e.TransactionBuilder=d;var f=function(){function t(t,e){this.api=t,this.accountName=e}return t.prototype.as=function(t){void 0===t&&(t=[]);var e=[];return e=t&&"string"==typeof t?[{actor:t,permission:"active"}]:t,new p(this,this.api,this.accountName,e)},t}();e.ActionBuilder=f;var p=function(t,e,i,n){var s,r,a=this,o=e.cachedAbis.get(i);if(!o)throw new Error("ABI must be cached before using ActionBuilder, run api.getAbi()");var l=c.getTypesFromAbi(c.createInitialTypes(),o.abi),u=new Map;try{for(var d=h(o.abi.actions),f=d.next();!f.done;f=d.next()){var p=f.value,g=p.name,m=p.type;u.set(g,c.getType(l,m))}}catch(t){s={error:t}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(s)throw s.error}}u.forEach((function(s,r){var o;Object.assign(a,((o={})[r]=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var h={};a.forEach((function(t,e){var i=s.fields[e];h[i.name]=t}));var d=c.serializeAction({types:l,actions:u},i,r,n,h,e.textEncoder,e.textDecoder);return t.serializedData=d,d},o))}))}},function(t,e,i){"use strict";i.r(e),i.d(e,"Deflate",(function(){return Ke})),i.d(e,"Inflate",(function(){return $e})),i.d(e,"constants",(function(){return ii})),i.d(e,"deflate",(function(){return qe})),i.d(e,"deflateRaw",(function(){return Ze})),i.d(e,"gzip",(function(){return Je})),i.d(e,"inflate",(function(){return Qe})),i.d(e,"inflateRaw",(function(){return ti})),i.d(e,"ungzip",(function(){return ei}));function n(t){let e=t.length;for(;--e>=0;)t[e]=0}const s=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),r=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),a=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),o=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),h=new Array(576);n(h);const l=new Array(60);n(l);const c=new Array(512);n(c);const u=new Array(256);n(u);const d=new Array(29);n(d);const f=new Array(30);function p(t,e,i,n,s){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=s,this.has_stree=t&&t.length}let g,m,v;function y(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}n(f);const _=t=>t<256?c[t]:c[256+(t>>>7)],x=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},w=(t,e,i)=>{t.bi_valid>16-i?(t.bi_buf|=e<<t.bi_valid&65535,x(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)},b=(t,e,i)=>{w(t,i[2*e],i[2*e+1])},E=(t,e)=>{let i=0;do{i|=1&t,t>>>=1,i<<=1}while(--e>0);return i>>>1},T=(t,e,i)=>{const n=new Array(16);let s,r,a=0;for(s=1;s<=15;s++)n[s]=a=a+i[s-1]<<1;for(r=0;r<=e;r++){let e=t[2*r+1];0!==e&&(t[2*r]=E(n[e]++,e))}},S=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},A=t=>{t.bi_valid>8?x(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},O=(t,e,i,n)=>{const s=2*e,r=2*i;return t[s]<t[r]||t[s]===t[r]&&n[e]<=n[i]},C=(t,e,i)=>{const n=t.heap[i];let s=i<<1;for(;s<=t.heap_len&&(s<t.heap_len&&O(e,t.heap[s+1],t.heap[s],t.depth)&&s++,!O(e,n,t.heap[s],t.depth));)t.heap[i]=t.heap[s],i=s,s<<=1;t.heap[i]=n},P=(t,e,i)=>{let n,a,o,h,l=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*l]<<8|t.pending_buf[t.d_buf+2*l+1],a=t.pending_buf[t.l_buf+l],l++,0===n?b(t,a,e):(o=u[a],b(t,o+256+1,e),h=s[o],0!==h&&(a-=d[o],w(t,a,h)),n--,o=_(n),b(t,o,i),h=r[o],0!==h&&(n-=f[o],w(t,n,h)))}while(l<t.last_lit);b(t,256,e)},L=(t,e)=>{const i=e.dyn_tree,n=e.stat_desc.static_tree,s=e.stat_desc.has_stree,r=e.stat_desc.elems;let a,o,h,l=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<r;a++)0!==i[2*a]?(t.heap[++t.heap_len]=l=a,t.depth[a]=0):i[2*a+1]=0;for(;t.heap_len<2;)h=t.heap[++t.heap_len]=l<2?++l:0,i[2*h]=1,t.depth[h]=0,t.opt_len--,s&&(t.static_len-=n[2*h+1]);for(e.max_code=l,a=t.heap_len>>1;a>=1;a--)C(t,i,a);h=r;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],C(t,i,1),o=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=o,i[2*h]=i[2*a]+i[2*o],t.depth[h]=(t.depth[a]>=t.depth[o]?t.depth[a]:t.depth[o])+1,i[2*a+1]=i[2*o+1]=h,t.heap[1]=h++,C(t,i,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const i=e.dyn_tree,n=e.max_code,s=e.stat_desc.static_tree,r=e.stat_desc.has_stree,a=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,h=e.stat_desc.max_length;let l,c,u,d,f,p,g=0;for(d=0;d<=15;d++)t.bl_count[d]=0;for(i[2*t.heap[t.heap_max]+1]=0,l=t.heap_max+1;l<573;l++)c=t.heap[l],d=i[2*i[2*c+1]+1]+1,d>h&&(d=h,g++),i[2*c+1]=d,c>n||(t.bl_count[d]++,f=0,c>=o&&(f=a[c-o]),p=i[2*c],t.opt_len+=p*(d+f),r&&(t.static_len+=p*(s[2*c+1]+f)));if(0!==g){do{for(d=h-1;0===t.bl_count[d];)d--;t.bl_count[d]--,t.bl_count[d+1]+=2,t.bl_count[h]--,g-=2}while(g>0);for(d=h;0!==d;d--)for(c=t.bl_count[d];0!==c;)u=t.heap[--l],u>n||(i[2*u+1]!==d&&(t.opt_len+=(d-i[2*u+1])*i[2*u],i[2*u+1]=d),c--)}})(t,e),T(i,l,t.bl_count)},R=(t,e,i)=>{let n,s,r=-1,a=e[1],o=0,h=7,l=4;for(0===a&&(h=138,l=3),e[2*(i+1)+1]=65535,n=0;n<=i;n++)s=a,a=e[2*(n+1)+1],++o<h&&s===a||(o<l?t.bl_tree[2*s]+=o:0!==s?(s!==r&&t.bl_tree[2*s]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,r=s,0===a?(h=138,l=3):s===a?(h=6,l=3):(h=7,l=4))},I=(t,e,i)=>{let n,s,r=-1,a=e[1],o=0,h=7,l=4;for(0===a&&(h=138,l=3),n=0;n<=i;n++)if(s=a,a=e[2*(n+1)+1],!(++o<h&&s===a)){if(o<l)do{b(t,s,t.bl_tree)}while(0!=--o);else 0!==s?(s!==r&&(b(t,s,t.bl_tree),o--),b(t,16,t.bl_tree),w(t,o-3,2)):o<=10?(b(t,17,t.bl_tree),w(t,o-3,3)):(b(t,18,t.bl_tree),w(t,o-11,7));o=0,r=s,0===a?(h=138,l=3):s===a?(h=6,l=3):(h=7,l=4)}};let M=!1;const D=(t,e,i,n)=>{w(t,0+(n?1:0),3),((t,e,i,n)=>{A(t),n&&(x(t,i),x(t,~i)),t.pending_buf.set(t.window.subarray(e,e+i),t.pending),t.pending+=i})(t,e,i,!0)};var k={_tr_init:t=>{M||((()=>{let t,e,i,n,o;const y=new Array(16);for(i=0,n=0;n<28;n++)for(d[n]=i,t=0;t<1<<s[n];t++)u[i++]=n;for(u[i-1]=n,o=0,n=0;n<16;n++)for(f[n]=o,t=0;t<1<<r[n];t++)c[o++]=n;for(o>>=7;n<30;n++)for(f[n]=o<<7,t=0;t<1<<r[n]-7;t++)c[256+o++]=n;for(e=0;e<=15;e++)y[e]=0;for(t=0;t<=143;)h[2*t+1]=8,t++,y[8]++;for(;t<=255;)h[2*t+1]=9,t++,y[9]++;for(;t<=279;)h[2*t+1]=7,t++,y[7]++;for(;t<=287;)h[2*t+1]=8,t++,y[8]++;for(T(h,287,y),t=0;t<30;t++)l[2*t+1]=5,l[2*t]=E(t,5);g=new p(h,s,257,286,15),m=new p(l,r,0,30,15),v=new p(new Array(0),a,0,19,7)})(),M=!0),t.l_desc=new y(t.dyn_ltree,g),t.d_desc=new y(t.dyn_dtree,m),t.bl_desc=new y(t.bl_tree,v),t.bi_buf=0,t.bi_valid=0,S(t)},_tr_stored_block:D,_tr_flush_block:(t,e,i,n)=>{let s,r,a=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),L(t,t.l_desc),L(t,t.d_desc),a=(t=>{let e;for(R(t,t.dyn_ltree,t.l_desc.max_code),R(t,t.dyn_dtree,t.d_desc.max_code),L(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*o[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),s=t.opt_len+3+7>>>3,r=t.static_len+3+7>>>3,r<=s&&(s=r)):s=r=i+5,i+4<=s&&-1!==e?D(t,e,i,n):4===t.strategy||r===s?(w(t,2+(n?1:0),3),P(t,h,l)):(w(t,4+(n?1:0),3),((t,e,i,n)=>{let s;for(w(t,e-257,5),w(t,i-1,5),w(t,n-4,4),s=0;s<n;s++)w(t,t.bl_tree[2*o[s]+1],3);I(t,t.dyn_ltree,e-1),I(t,t.dyn_dtree,i-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),P(t,t.dyn_ltree,t.dyn_dtree)),S(t),n&&A(t)},_tr_tally:(t,e,i)=>(t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(u[i]+256+1)]++,t.dyn_dtree[2*_(e)]++),t.last_lit===t.lit_bufsize-1),_tr_align:t=>{w(t,2,3),b(t,256,h),(t=>{16===t.bi_valid?(x(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}};var N=(t,e,i,n)=>{let s=65535&t|0,r=t>>>16&65535|0,a=0;for(;0!==i;){a=i>2e3?2e3:i,i-=a;do{s=s+e[n++]|0,r=r+s|0}while(--a);s%=65521,r%=65521}return s|r<<16|0};const F=new Uint32Array((()=>{let t,e=[];for(var i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e})());var G=(t,e,i,n)=>{const s=F,r=n+i;t^=-1;for(let i=n;i<r;i++)t=t>>>8^s[255&(t^e[i])];return-1^t},B={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},z={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:U,_tr_stored_block:Y,_tr_flush_block:X,_tr_tally:H,_tr_align:j}=k,{Z_NO_FLUSH:W,Z_PARTIAL_FLUSH:V,Z_FULL_FLUSH:K,Z_FINISH:q,Z_BLOCK:Z,Z_OK:J,Z_STREAM_END:$,Z_STREAM_ERROR:Q,Z_DATA_ERROR:tt,Z_BUF_ERROR:et,Z_DEFAULT_COMPRESSION:it,Z_FILTERED:nt,Z_HUFFMAN_ONLY:st,Z_RLE:rt,Z_FIXED:at,Z_DEFAULT_STRATEGY:ot,Z_UNKNOWN:ht,Z_DEFLATED:lt}=z,ct=(t,e)=>(t.msg=B[e],e),ut=t=>(t<<1)-(t>4?9:0),dt=t=>{let e=t.length;for(;--e>=0;)t[e]=0};let ft=(t,e,i)=>(e<<t.hash_shift^i)&t.hash_mask;const pt=t=>{const e=t.state;let i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+i),t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))},gt=(t,e)=>{X(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,pt(t.strm)},mt=(t,e)=>{t.pending_buf[t.pending++]=e},vt=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},yt=(t,e,i,n)=>{let s=t.avail_in;return s>n&&(s=n),0===s?0:(t.avail_in-=s,e.set(t.input.subarray(t.next_in,t.next_in+s),i),1===t.state.wrap?t.adler=N(t.adler,e,s,i):2===t.state.wrap&&(t.adler=G(t.adler,e,s,i)),t.next_in+=s,t.total_in+=s,s)},_t=(t,e)=>{let i,n,s=t.max_chain_length,r=t.strstart,a=t.prev_length,o=t.nice_match;const h=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,l=t.window,c=t.w_mask,u=t.prev,d=t.strstart+258;let f=l[r+a-1],p=l[r+a];t.prev_length>=t.good_match&&(s>>=2),o>t.lookahead&&(o=t.lookahead);do{if(i=e,l[i+a]===p&&l[i+a-1]===f&&l[i]===l[r]&&l[++i]===l[r+1]){r+=2,i++;do{}while(l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&r<d);if(n=258-(d-r),r=d-258,n>a){if(t.match_start=e,a=n,n>=o)break;f=l[r+a-1],p=l[r+a]}}}while((e=u[e&c])>h&&0!=--s);return a<=t.lookahead?a:t.lookahead},xt=t=>{const e=t.w_size;let i,n,s,r,a;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-262)){t.window.set(t.window.subarray(e,e+e),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,n=t.hash_size,i=n;do{s=t.head[--i],t.head[i]=s>=e?s-e:0}while(--n);n=e,i=n;do{s=t.prev[--i],t.prev[i]=s>=e?s-e:0}while(--n);r+=e}if(0===t.strm.avail_in)break;if(n=yt(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=n,t.lookahead+t.insert>=3)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=ft(t,t.ins_h,t.window[a+1]);t.insert&&(t.ins_h=ft(t,t.ins_h,t.window[a+3-1]),t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)},wt=(t,e)=>{let i,n;for(;;){if(t.lookahead<262){if(xt(t),t.lookahead<262&&e===W)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-262&&(t.match_length=_t(t,i)),t.match_length>=3)if(n=H(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=ft(t,t.ins_h,t.window[t.strstart+1]);else n=H(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(gt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===q?(gt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(gt(t,!1),0===t.strm.avail_out)?1:2},bt=(t,e)=>{let i,n,s;for(;;){if(t.lookahead<262){if(xt(t),t.lookahead<262&&e===W)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-262&&(t.match_length=_t(t,i),t.match_length<=5&&(t.strategy===nt||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-3,n=H(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=s&&(t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(gt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(n=H(t,0,t.window[t.strstart-1]),n&&gt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=H(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===q?(gt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(gt(t,!1),0===t.strm.avail_out)?1:2};function Et(t,e,i,n,s){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=s}const Tt=[new Et(0,0,0,0,(t,e)=>{let i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(xt(t),0===t.lookahead&&e===W)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;const n=t.block_start+i;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,gt(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-262&&(gt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===q?(gt(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(gt(t,!1),t.strm.avail_out),1)}),new Et(4,4,8,4,wt),new Et(4,5,16,8,wt),new Et(4,6,32,32,wt),new Et(4,4,16,16,bt),new Et(8,16,32,32,bt),new Et(8,16,128,128,bt),new Et(8,32,128,256,bt),new Et(32,128,258,1024,bt),new Et(32,258,258,4096,bt)];function St(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=lt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),dt(this.dyn_ltree),dt(this.dyn_dtree),dt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),dt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),dt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const At=t=>{if(!t||!t.state)return ct(t,Q);t.total_in=t.total_out=0,t.data_type=ht;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=W,U(e),J},Ot=t=>{const e=At(t);var i;return e===J&&((i=t.state).window_size=2*i.w_size,dt(i.head),i.max_lazy_match=Tt[i.level].max_lazy,i.good_match=Tt[i.level].good_length,i.nice_match=Tt[i.level].nice_length,i.max_chain_length=Tt[i.level].max_chain,i.strstart=0,i.block_start=0,i.lookahead=0,i.insert=0,i.match_length=i.prev_length=2,i.match_available=0,i.ins_h=0),e},Ct=(t,e,i,n,s,r)=>{if(!t)return Q;let a=1;if(e===it&&(e=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),s<1||s>9||i!==lt||n<8||n>15||e<0||e>9||r<0||r>at)return ct(t,Q);8===n&&(n=9);const o=new St;return t.state=o,o.strm=t,o.wrap=a,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=s+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<s+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=r,o.method=i,Ot(t)};var Pt={deflateInit:(t,e)=>Ct(t,e,lt,15,8,ot),deflateInit2:Ct,deflateReset:Ot,deflateResetKeep:At,deflateSetHeader:(t,e)=>t&&t.state?2!==t.state.wrap?Q:(t.state.gzhead=e,J):Q,deflate:(t,e)=>{let i,n;if(!t||!t.state||e>Z||e<0)return t?ct(t,Q):Q;const s=t.state;if(!t.output||!t.input&&0!==t.avail_in||666===s.status&&e!==q)return ct(t,0===t.avail_out?et:Q);s.strm=t;const r=s.last_flush;if(s.last_flush=e,42===s.status)if(2===s.wrap)t.adler=0,mt(s,31),mt(s,139),mt(s,8),s.gzhead?(mt(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),mt(s,255&s.gzhead.time),mt(s,s.gzhead.time>>8&255),mt(s,s.gzhead.time>>16&255),mt(s,s.gzhead.time>>24&255),mt(s,9===s.level?2:s.strategy>=st||s.level<2?4:0),mt(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(mt(s,255&s.gzhead.extra.length),mt(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(t.adler=G(t.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=69):(mt(s,0),mt(s,0),mt(s,0),mt(s,0),mt(s,0),mt(s,9===s.level?2:s.strategy>=st||s.level<2?4:0),mt(s,3),s.status=113);else{let e=lt+(s.w_bits-8<<4)<<8,i=-1;i=s.strategy>=st||s.level<2?0:s.level<6?1:6===s.level?2:3,e|=i<<6,0!==s.strstart&&(e|=32),e+=31-e%31,s.status=113,vt(s,e),0!==s.strstart&&(vt(s,t.adler>>>16),vt(s,65535&t.adler)),t.adler=1}if(69===s.status)if(s.gzhead.extra){for(i=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>i&&(t.adler=G(t.adler,s.pending_buf,s.pending-i,i)),pt(t),i=s.pending,s.pending!==s.pending_buf_size));)mt(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>i&&(t.adler=G(t.adler,s.pending_buf,s.pending-i,i)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=73)}else s.status=73;if(73===s.status)if(s.gzhead.name){i=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>i&&(t.adler=G(t.adler,s.pending_buf,s.pending-i,i)),pt(t),i=s.pending,s.pending===s.pending_buf_size)){n=1;break}n=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,mt(s,n)}while(0!==n);s.gzhead.hcrc&&s.pending>i&&(t.adler=G(t.adler,s.pending_buf,s.pending-i,i)),0===n&&(s.gzindex=0,s.status=91)}else s.status=91;if(91===s.status)if(s.gzhead.comment){i=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>i&&(t.adler=G(t.adler,s.pending_buf,s.pending-i,i)),pt(t),i=s.pending,s.pending===s.pending_buf_size)){n=1;break}n=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,mt(s,n)}while(0!==n);s.gzhead.hcrc&&s.pending>i&&(t.adler=G(t.adler,s.pending_buf,s.pending-i,i)),0===n&&(s.status=103)}else s.status=103;if(103===s.status&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&pt(t),s.pending+2<=s.pending_buf_size&&(mt(s,255&t.adler),mt(s,t.adler>>8&255),t.adler=0,s.status=113)):s.status=113),0!==s.pending){if(pt(t),0===t.avail_out)return s.last_flush=-1,J}else if(0===t.avail_in&&ut(e)<=ut(r)&&e!==q)return ct(t,et);if(666===s.status&&0!==t.avail_in)return ct(t,et);if(0!==t.avail_in||0!==s.lookahead||e!==W&&666!==s.status){let i=s.strategy===st?((t,e)=>{let i;for(;;){if(0===t.lookahead&&(xt(t),0===t.lookahead)){if(e===W)return 1;break}if(t.match_length=0,i=H(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(gt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===q?(gt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(gt(t,!1),0===t.strm.avail_out)?1:2})(s,e):s.strategy===rt?((t,e)=>{let i,n,s,r;const a=t.window;for(;;){if(t.lookahead<=258){if(xt(t),t.lookahead<=258&&e===W)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(s=t.strstart-1,n=a[s],n===a[++s]&&n===a[++s]&&n===a[++s])){r=t.strstart+258;do{}while(n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&s<r);t.match_length=258-(r-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(i=H(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=H(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(gt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===q?(gt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(gt(t,!1),0===t.strm.avail_out)?1:2})(s,e):Tt[s.level].func(s,e);if(3!==i&&4!==i||(s.status=666),1===i||3===i)return 0===t.avail_out&&(s.last_flush=-1),J;if(2===i&&(e===V?j(s):e!==Z&&(Y(s,0,0,!1),e===K&&(dt(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),pt(t),0===t.avail_out))return s.last_flush=-1,J}return e!==q?J:s.wrap<=0?$:(2===s.wrap?(mt(s,255&t.adler),mt(s,t.adler>>8&255),mt(s,t.adler>>16&255),mt(s,t.adler>>24&255),mt(s,255&t.total_in),mt(s,t.total_in>>8&255),mt(s,t.total_in>>16&255),mt(s,t.total_in>>24&255)):(vt(s,t.adler>>>16),vt(s,65535&t.adler)),pt(t),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?J:$)},deflateEnd:t=>{if(!t||!t.state)return Q;const e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?ct(t,Q):(t.state=null,113===e?ct(t,tt):J)},deflateSetDictionary:(t,e)=>{let i=e.length;if(!t||!t.state)return Q;const n=t.state,s=n.wrap;if(2===s||1===s&&42!==n.status||n.lookahead)return Q;if(1===s&&(t.adler=N(t.adler,e,i,0)),n.wrap=0,i>=n.w_size){0===s&&(dt(n.head),n.strstart=0,n.block_start=0,n.insert=0);let t=new Uint8Array(n.w_size);t.set(e.subarray(i-n.w_size,i),0),e=t,i=n.w_size}const r=t.avail_in,a=t.next_in,o=t.input;for(t.avail_in=i,t.next_in=0,t.input=e,xt(n);n.lookahead>=3;){let t=n.strstart,e=n.lookahead-2;do{n.ins_h=ft(n,n.ins_h,n.window[t+3-1]),n.prev[t&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=t,t++}while(--e);n.strstart=t,n.lookahead=2,xt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=a,t.input=o,t.avail_in=r,n.wrap=s,J},deflateInfo:"pako deflate (from Nodeca project)"};const Lt=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Rt=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(const e in i)Lt(i,e)&&(t[e]=i[e])}}return t},It=t=>{let e=0;for(let i=0,n=t.length;i<n;i++)e+=t[i].length;const i=new Uint8Array(e);for(let e=0,n=0,s=t.length;e<s;e++){let s=t[e];i.set(s,n),n+=s.length}return i};let Mt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Mt=!1}const Dt=new Uint8Array(256);for(let t=0;t<256;t++)Dt[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Dt[254]=Dt[254]=1;var kt=t=>{let e,i,n,s,r,a=t.length,o=0;for(s=0;s<a;s++)i=t.charCodeAt(s),55296==(64512&i)&&s+1<a&&(n=t.charCodeAt(s+1),56320==(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),s++)),o+=i<128?1:i<2048?2:i<65536?3:4;for(e=new Uint8Array(o),r=0,s=0;r<o;s++)i=t.charCodeAt(s),55296==(64512&i)&&s+1<a&&(n=t.charCodeAt(s+1),56320==(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),s++)),i<128?e[r++]=i:i<2048?(e[r++]=192|i>>>6,e[r++]=128|63&i):i<65536?(e[r++]=224|i>>>12,e[r++]=128|i>>>6&63,e[r++]=128|63&i):(e[r++]=240|i>>>18,e[r++]=128|i>>>12&63,e[r++]=128|i>>>6&63,e[r++]=128|63&i);return e},Nt=(t,e)=>{let i,n;const s=e||t.length,r=new Array(2*s);for(n=0,i=0;i<s;){let e=t[i++];if(e<128){r[n++]=e;continue}let a=Dt[e];if(a>4)r[n++]=65533,i+=a-1;else{for(e&=2===a?31:3===a?15:7;a>1&&i<s;)e=e<<6|63&t[i++],a--;a>1?r[n++]=65533:e<65536?r[n++]=e:(e-=65536,r[n++]=55296|e>>10&1023,r[n++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&Mt)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let i="";for(let n=0;n<e;n++)i+=String.fromCharCode(t[n]);return i})(r,n)},Ft=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let i=e-1;for(;i>=0&&128==(192&t[i]);)i--;return i<0||0===i?e:i+Dt[t[i]]>e?i:e};var Gt=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Bt=Object.prototype.toString,{Z_NO_FLUSH:zt,Z_SYNC_FLUSH:Ut,Z_FULL_FLUSH:Yt,Z_FINISH:Xt,Z_OK:Ht,Z_STREAM_END:jt,Z_DEFAULT_COMPRESSION:Wt,Z_DEFAULT_STRATEGY:Vt,Z_DEFLATED:Kt}=z;function qt(t){this.options=Rt({level:Wt,method:Kt,chunkSize:16384,windowBits:15,memLevel:8,strategy:Vt},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Gt,this.strm.avail_out=0;let i=Pt.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(i!==Ht)throw new Error(B[i]);if(e.header&&Pt.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?kt(e.dictionary):"[object ArrayBuffer]"===Bt.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,i=Pt.deflateSetDictionary(this.strm,t),i!==Ht)throw new Error(B[i]);this._dict_set=!0}}function Zt(t,e){const i=new qt(e);if(i.push(t,!0),i.err)throw i.msg||B[i.err];return i.result}qt.prototype.push=function(t,e){const i=this.strm,n=this.options.chunkSize;let s,r;if(this.ended)return!1;for(r=e===~~e?e:!0===e?Xt:zt,"string"==typeof t?i.input=kt(t):"[object ArrayBuffer]"===Bt.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;;)if(0===i.avail_out&&(i.output=new Uint8Array(n),i.next_out=0,i.avail_out=n),(r===Ut||r===Yt)&&i.avail_out<=6)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if(s=Pt.deflate(i,r),s===jt)return i.next_out>0&&this.onData(i.output.subarray(0,i.next_out)),s=Pt.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===Ht;if(0!==i.avail_out){if(r>0&&i.next_out>0)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(0===i.avail_in)break}else this.onData(i.output)}return!0},qt.prototype.onData=function(t){this.chunks.push(t)},qt.prototype.onEnd=function(t){t===Ht&&(this.result=It(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Jt={Deflate:qt,deflate:Zt,deflateRaw:function(t,e){return(e=e||{}).raw=!0,Zt(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,Zt(t,e)},constants:z};var $t=function(t,e){let i,n,s,r,a,o,h,l,c,u,d,f,p,g,m,v,y,_,x,w,b,E,T,S;const A=t.state;i=t.next_in,T=t.input,n=i+(t.avail_in-5),s=t.next_out,S=t.output,r=s-(e-t.avail_out),a=s+(t.avail_out-257),o=A.dmax,h=A.wsize,l=A.whave,c=A.wnext,u=A.window,d=A.hold,f=A.bits,p=A.lencode,g=A.distcode,m=(1<<A.lenbits)-1,v=(1<<A.distbits)-1;t:do{f<15&&(d+=T[i++]<<f,f+=8,d+=T[i++]<<f,f+=8),y=p[d&m];e:for(;;){if(_=y>>>24,d>>>=_,f-=_,_=y>>>16&255,0===_)S[s++]=65535&y;else{if(!(16&_)){if(0==(64&_)){y=p[(65535&y)+(d&(1<<_)-1)];continue e}if(32&_){A.mode=12;break t}t.msg="invalid literal/length code",A.mode=30;break t}x=65535&y,_&=15,_&&(f<_&&(d+=T[i++]<<f,f+=8),x+=d&(1<<_)-1,d>>>=_,f-=_),f<15&&(d+=T[i++]<<f,f+=8,d+=T[i++]<<f,f+=8),y=g[d&v];i:for(;;){if(_=y>>>24,d>>>=_,f-=_,_=y>>>16&255,!(16&_)){if(0==(64&_)){y=g[(65535&y)+(d&(1<<_)-1)];continue i}t.msg="invalid distance code",A.mode=30;break t}if(w=65535&y,_&=15,f<_&&(d+=T[i++]<<f,f+=8,f<_&&(d+=T[i++]<<f,f+=8)),w+=d&(1<<_)-1,w>o){t.msg="invalid distance too far back",A.mode=30;break t}if(d>>>=_,f-=_,_=s-r,w>_){if(_=w-_,_>l&&A.sane){t.msg="invalid distance too far back",A.mode=30;break t}if(b=0,E=u,0===c){if(b+=h-_,_<x){x-=_;do{S[s++]=u[b++]}while(--_);b=s-w,E=S}}else if(c<_){if(b+=h+c-_,_-=c,_<x){x-=_;do{S[s++]=u[b++]}while(--_);if(b=0,c<x){_=c,x-=_;do{S[s++]=u[b++]}while(--_);b=s-w,E=S}}}else if(b+=c-_,_<x){x-=_;do{S[s++]=u[b++]}while(--_);b=s-w,E=S}for(;x>2;)S[s++]=E[b++],S[s++]=E[b++],S[s++]=E[b++],x-=3;x&&(S[s++]=E[b++],x>1&&(S[s++]=E[b++]))}else{b=s-w;do{S[s++]=S[b++],S[s++]=S[b++],S[s++]=S[b++],x-=3}while(x>2);x&&(S[s++]=S[b++],x>1&&(S[s++]=S[b++]))}break}}break}}while(i<n&&s<a);x=f>>3,i-=x,f-=x<<3,d&=(1<<f)-1,t.next_in=i,t.next_out=s,t.avail_in=i<n?n-i+5:5-(i-n),t.avail_out=s<a?a-s+257:257-(s-a),A.hold=d,A.bits=f};const Qt=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),te=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ee=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ie=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ne=(t,e,i,n,s,r,a,o)=>{const h=o.bits;let l,c,u,d,f,p,g=0,m=0,v=0,y=0,_=0,x=0,w=0,b=0,E=0,T=0,S=null,A=0;const O=new Uint16Array(16),C=new Uint16Array(16);let P,L,R,I=null,M=0;for(g=0;g<=15;g++)O[g]=0;for(m=0;m<n;m++)O[e[i+m]]++;for(_=h,y=15;y>=1&&0===O[y];y--);if(_>y&&(_=y),0===y)return s[r++]=20971520,s[r++]=20971520,o.bits=1,0;for(v=1;v<y&&0===O[v];v++);for(_<v&&(_=v),b=1,g=1;g<=15;g++)if(b<<=1,b-=O[g],b<0)return-1;if(b>0&&(0===t||1!==y))return-1;for(C[1]=0,g=1;g<15;g++)C[g+1]=C[g]+O[g];for(m=0;m<n;m++)0!==e[i+m]&&(a[C[e[i+m]]++]=m);if(0===t?(S=I=a,p=19):1===t?(S=Qt,A-=257,I=te,M-=257,p=256):(S=ee,I=ie,p=-1),T=0,m=0,g=v,f=r,x=_,w=0,u=-1,E=1<<_,d=E-1,1===t&&E>852||2===t&&E>592)return 1;for(;;){P=g-w,a[m]<p?(L=0,R=a[m]):a[m]>p?(L=I[M+a[m]],R=S[A+a[m]]):(L=96,R=0),l=1<<g-w,c=1<<x,v=c;do{c-=l,s[f+(T>>w)+c]=P<<24|L<<16|R|0}while(0!==c);for(l=1<<g-1;T&l;)l>>=1;if(0!==l?(T&=l-1,T+=l):T=0,m++,0==--O[g]){if(g===y)break;g=e[i+a[m]]}if(g>_&&(T&d)!==u){for(0===w&&(w=_),f+=v,x=g-w,b=1<<x;x+w<y&&(b-=O[x+w],!(b<=0));)x++,b<<=1;if(E+=1<<x,1===t&&E>852||2===t&&E>592)return 1;u=T&d,s[u]=_<<24|x<<16|f-r|0}}return 0!==T&&(s[f+T]=g-w<<24|64<<16|0),o.bits=_,0};const{Z_FINISH:se,Z_BLOCK:re,Z_TREES:ae,Z_OK:oe,Z_STREAM_END:he,Z_NEED_DICT:le,Z_STREAM_ERROR:ce,Z_DATA_ERROR:ue,Z_MEM_ERROR:de,Z_BUF_ERROR:fe,Z_DEFLATED:pe}=z,ge=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function me(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ve=t=>{if(!t||!t.state)return ce;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,oe},ye=t=>{if(!t||!t.state)return ce;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,ve(t)},_e=(t,e)=>{let i;if(!t||!t.state)return ce;const n=t.state;return e<0?(i=0,e=-e):(i=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?ce:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,ye(t))},xe=(t,e)=>{if(!t)return ce;const i=new me;t.state=i,i.window=null;const n=_e(t,e);return n!==oe&&(t.state=null),n};let we,be,Ee=!0;const Te=t=>{if(Ee){we=new Int32Array(512),be=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(ne(1,t.lens,0,288,we,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;ne(2,t.lens,0,32,be,0,t.work,{bits:5}),Ee=!1}t.lencode=we,t.lenbits=9,t.distcode=be,t.distbits=5},Se=(t,e,i,n)=>{let s;const r=t.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Uint8Array(r.wsize)),n>=r.wsize?(r.window.set(e.subarray(i-r.wsize,i),0),r.wnext=0,r.whave=r.wsize):(s=r.wsize-r.wnext,s>n&&(s=n),r.window.set(e.subarray(i-n,i-n+s),r.wnext),(n-=s)?(r.window.set(e.subarray(i-n,i),0),r.wnext=n,r.whave=r.wsize):(r.wnext+=s,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=s))),0};var Ae={inflateReset:ye,inflateReset2:_e,inflateResetKeep:ve,inflateInit:t=>xe(t,15),inflateInit2:xe,inflate:(t,e)=>{let i,n,s,r,a,o,h,l,c,u,d,f,p,g,m,v,y,_,x,w,b,E,T=0;const S=new Uint8Array(4);let A,O;const C=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return ce;i=t.state,12===i.mode&&(i.mode=13),a=t.next_out,s=t.output,h=t.avail_out,r=t.next_in,n=t.input,o=t.avail_in,l=i.hold,c=i.bits,u=o,d=h,E=oe;t:for(;;)switch(i.mode){case 1:if(0===i.wrap){i.mode=13;break}for(;c<16;){if(0===o)break t;o--,l+=n[r++]<<c,c+=8}if(2&i.wrap&&35615===l){i.check=0,S[0]=255&l,S[1]=l>>>8&255,i.check=G(i.check,S,2,0),l=0,c=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&l)<<8)+(l>>8))%31){t.msg="incorrect header check",i.mode=30;break}if((15&l)!==pe){t.msg="unknown compression method",i.mode=30;break}if(l>>>=4,c-=4,b=8+(15&l),0===i.wbits)i.wbits=b;else if(b>i.wbits){t.msg="invalid window size",i.mode=30;break}i.dmax=1<<i.wbits,t.adler=i.check=1,i.mode=512&l?10:12,l=0,c=0;break;case 2:for(;c<16;){if(0===o)break t;o--,l+=n[r++]<<c,c+=8}if(i.flags=l,(255&i.flags)!==pe){t.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=l>>8&1),512&i.flags&&(S[0]=255&l,S[1]=l>>>8&255,i.check=G(i.check,S,2,0)),l=0,c=0,i.mode=3;case 3:for(;c<32;){if(0===o)break t;o--,l+=n[r++]<<c,c+=8}i.head&&(i.head.time=l),512&i.flags&&(S[0]=255&l,S[1]=l>>>8&255,S[2]=l>>>16&255,S[3]=l>>>24&255,i.check=G(i.check,S,4,0)),l=0,c=0,i.mode=4;case 4:for(;c<16;){if(0===o)break t;o--,l+=n[r++]<<c,c+=8}i.head&&(i.head.xflags=255&l,i.head.os=l>>8),512&i.flags&&(S[0]=255&l,S[1]=l>>>8&255,i.check=G(i.check,S,2,0)),l=0,c=0,i.mode=5;case 5:if(1024&i.flags){for(;c<16;){if(0===o)break t;o--,l+=n[r++]<<c,c+=8}i.length=l,i.head&&(i.head.extra_len=l),512&i.flags&&(S[0]=255&l,S[1]=l>>>8&255,i.check=G(i.check,S,2,0)),l=0,c=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&(f=i.length,f>o&&(f=o),f&&(i.head&&(b=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Uint8Array(i.head.extra_len)),i.head.extra.set(n.subarray(r,r+f),b)),512&i.flags&&(i.check=G(i.check,n,f,r)),o-=f,r+=f,i.length-=f),i.length))break t;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===o)break t;f=0;do{b=n[r+f++],i.head&&b&&i.length<65536&&(i.head.name+=String.fromCharCode(b))}while(b&&f<o);if(512&i.flags&&(i.check=G(i.check,n,f,r)),o-=f,r+=f,b)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===o)break t;f=0;do{b=n[r+f++],i.head&&b&&i.length<65536&&(i.head.comment+=String.fromCharCode(b))}while(b&&f<o);if(512&i.flags&&(i.check=G(i.check,n,f,r)),o-=f,r+=f,b)break t}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;c<16;){if(0===o)break t;o--,l+=n[r++]<<c,c+=8}if(l!==(65535&i.check)){t.msg="header crc mismatch",i.mode=30;break}l=0,c=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=12;break;case 10:for(;c<32;){if(0===o)break t;o--,l+=n[r++]<<c,c+=8}t.adler=i.check=ge(l),l=0,c=0,i.mode=11;case 11:if(0===i.havedict)return t.next_out=a,t.avail_out=h,t.next_in=r,t.avail_in=o,i.hold=l,i.bits=c,le;t.adler=i.check=1,i.mode=12;case 12:if(e===re||e===ae)break t;case 13:if(i.last){l>>>=7&c,c-=7&c,i.mode=27;break}for(;c<3;){if(0===o)break t;o--,l+=n[r++]<<c,c+=8}switch(i.last=1&l,l>>>=1,c-=1,3&l){case 0:i.mode=14;break;case 1:if(Te(i),i.mode=20,e===ae){l>>>=2,c-=2;break t}break;case 2:i.mode=17;break;case 3:t.msg="invalid block type",i.mode=30}l>>>=2,c-=2;break;case 14:for(l>>>=7&c,c-=7&c;c<32;){if(0===o)break t;o--,l+=n[r++]<<c,c+=8}if((65535&l)!=(l>>>16^65535)){t.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&l,l=0,c=0,i.mode=15,e===ae)break t;case 15:i.mode=16;case 16:if(f=i.length,f){if(f>o&&(f=o),f>h&&(f=h),0===f)break t;s.set(n.subarray(r,r+f),a),o-=f,r+=f,h-=f,a+=f,i.length-=f;break}i.mode=12;break;case 17:for(;c<14;){if(0===o)break t;o--,l+=n[r++]<<c,c+=8}if(i.nlen=257+(31&l),l>>>=5,c-=5,i.ndist=1+(31&l),l>>>=5,c-=5,i.ncode=4+(15&l),l>>>=4,c-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;c<3;){if(0===o)break t;o--,l+=n[r++]<<c,c+=8}i.lens[C[i.have++]]=7&l,l>>>=3,c-=3}for(;i.have<19;)i.lens[C[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,A={bits:i.lenbits},E=ne(0,i.lens,0,19,i.lencode,0,i.work,A),i.lenbits=A.bits,E){t.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;T=i.lencode[l&(1<<i.lenbits)-1],m=T>>>24,v=T>>>16&255,y=65535&T,!(m<=c);){if(0===o)break t;o--,l+=n[r++]<<c,c+=8}if(y<16)l>>>=m,c-=m,i.lens[i.have++]=y;else{if(16===y){for(O=m+2;c<O;){if(0===o)break t;o--,l+=n[r++]<<c,c+=8}if(l>>>=m,c-=m,0===i.have){t.msg="invalid bit length repeat",i.mode=30;break}b=i.lens[i.have-1],f=3+(3&l),l>>>=2,c-=2}else if(17===y){for(O=m+3;c<O;){if(0===o)break t;o--,l+=n[r++]<<c,c+=8}l>>>=m,c-=m,b=0,f=3+(7&l),l>>>=3,c-=3}else{for(O=m+7;c<O;){if(0===o)break t;o--,l+=n[r++]<<c,c+=8}l>>>=m,c-=m,b=0,f=11+(127&l),l>>>=7,c-=7}if(i.have+f>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=30;break}for(;f--;)i.lens[i.have++]=b}}if(30===i.mode)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,A={bits:i.lenbits},E=ne(1,i.lens,0,i.nlen,i.lencode,0,i.work,A),i.lenbits=A.bits,E){t.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,A={bits:i.distbits},E=ne(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,A),i.distbits=A.bits,E){t.msg="invalid distances set",i.mode=30;break}if(i.mode=20,e===ae)break t;case 20:i.mode=21;case 21:if(o>=6&&h>=258){t.next_out=a,t.avail_out=h,t.next_in=r,t.avail_in=o,i.hold=l,i.bits=c,$t(t,d),a=t.next_out,s=t.output,h=t.avail_out,r=t.next_in,n=t.input,o=t.avail_in,l=i.hold,c=i.bits,12===i.mode&&(i.back=-1);break}for(i.back=0;T=i.lencode[l&(1<<i.lenbits)-1],m=T>>>24,v=T>>>16&255,y=65535&T,!(m<=c);){if(0===o)break t;o--,l+=n[r++]<<c,c+=8}if(v&&0==(240&v)){for(_=m,x=v,w=y;T=i.lencode[w+((l&(1<<_+x)-1)>>_)],m=T>>>24,v=T>>>16&255,y=65535&T,!(_+m<=c);){if(0===o)break t;o--,l+=n[r++]<<c,c+=8}l>>>=_,c-=_,i.back+=_}if(l>>>=m,c-=m,i.back+=m,i.length=y,0===v){i.mode=26;break}if(32&v){i.back=-1,i.mode=12;break}if(64&v){t.msg="invalid literal/length code",i.mode=30;break}i.extra=15&v,i.mode=22;case 22:if(i.extra){for(O=i.extra;c<O;){if(0===o)break t;o--,l+=n[r++]<<c,c+=8}i.length+=l&(1<<i.extra)-1,l>>>=i.extra,c-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;T=i.distcode[l&(1<<i.distbits)-1],m=T>>>24,v=T>>>16&255,y=65535&T,!(m<=c);){if(0===o)break t;o--,l+=n[r++]<<c,c+=8}if(0==(240&v)){for(_=m,x=v,w=y;T=i.distcode[w+((l&(1<<_+x)-1)>>_)],m=T>>>24,v=T>>>16&255,y=65535&T,!(_+m<=c);){if(0===o)break t;o--,l+=n[r++]<<c,c+=8}l>>>=_,c-=_,i.back+=_}if(l>>>=m,c-=m,i.back+=m,64&v){t.msg="invalid distance code",i.mode=30;break}i.offset=y,i.extra=15&v,i.mode=24;case 24:if(i.extra){for(O=i.extra;c<O;){if(0===o)break t;o--,l+=n[r++]<<c,c+=8}i.offset+=l&(1<<i.extra)-1,l>>>=i.extra,c-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(0===h)break t;if(f=d-h,i.offset>f){if(f=i.offset-f,f>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=30;break}f>i.wnext?(f-=i.wnext,p=i.wsize-f):p=i.wnext-f,f>i.length&&(f=i.length),g=i.window}else g=s,p=a-i.offset,f=i.length;f>h&&(f=h),h-=f,i.length-=f;do{s[a++]=g[p++]}while(--f);0===i.length&&(i.mode=21);break;case 26:if(0===h)break t;s[a++]=i.length,h--,i.mode=21;break;case 27:if(i.wrap){for(;c<32;){if(0===o)break t;o--,l|=n[r++]<<c,c+=8}if(d-=h,t.total_out+=d,i.total+=d,d&&(t.adler=i.check=i.flags?G(i.check,s,d,a-d):N(i.check,s,d,a-d)),d=h,(i.flags?l:ge(l))!==i.check){t.msg="incorrect data check",i.mode=30;break}l=0,c=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;c<32;){if(0===o)break t;o--,l+=n[r++]<<c,c+=8}if(l!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=30;break}l=0,c=0}i.mode=29;case 29:E=he;break t;case 30:E=ue;break t;case 31:return de;case 32:default:return ce}return t.next_out=a,t.avail_out=h,t.next_in=r,t.avail_in=o,i.hold=l,i.bits=c,(i.wsize||d!==t.avail_out&&i.mode<30&&(i.mode<27||e!==se))&&Se(t,t.output,t.next_out,d-t.avail_out),u-=t.avail_in,d-=t.avail_out,t.total_in+=u,t.total_out+=d,i.total+=d,i.wrap&&d&&(t.adler=i.check=i.flags?G(i.check,s,d,t.next_out-d):N(i.check,s,d,t.next_out-d)),t.data_type=i.bits+(i.last?64:0)+(12===i.mode?128:0)+(20===i.mode||15===i.mode?256:0),(0===u&&0===d||e===se)&&E===oe&&(E=fe),E},inflateEnd:t=>{if(!t||!t.state)return ce;let e=t.state;return e.window&&(e.window=null),t.state=null,oe},inflateGetHeader:(t,e)=>{if(!t||!t.state)return ce;const i=t.state;return 0==(2&i.wrap)?ce:(i.head=e,e.done=!1,oe)},inflateSetDictionary:(t,e)=>{const i=e.length;let n,s,r;return t&&t.state?(n=t.state,0!==n.wrap&&11!==n.mode?ce:11===n.mode&&(s=1,s=N(s,e,i,0),s!==n.check)?ue:(r=Se(t,e,i,i),r?(n.mode=31,de):(n.havedict=1,oe))):ce},inflateInfo:"pako inflate (from Nodeca project)"};var Oe=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Ce=Object.prototype.toString,{Z_NO_FLUSH:Pe,Z_FINISH:Le,Z_OK:Re,Z_STREAM_END:Ie,Z_NEED_DICT:Me,Z_STREAM_ERROR:De,Z_DATA_ERROR:ke,Z_MEM_ERROR:Ne}=z;function Fe(t){this.options=Rt({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Gt,this.strm.avail_out=0;let i=Ae.inflateInit2(this.strm,e.windowBits);if(i!==Re)throw new Error(B[i]);if(this.header=new Oe,Ae.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=kt(e.dictionary):"[object ArrayBuffer]"===Ce.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(i=Ae.inflateSetDictionary(this.strm,e.dictionary),i!==Re)))throw new Error(B[i])}function Ge(t,e){const i=new Fe(e);if(i.push(t),i.err)throw i.msg||B[i.err];return i.result}Fe.prototype.push=function(t,e){const i=this.strm,n=this.options.chunkSize,s=this.options.dictionary;let r,a,o;if(this.ended)return!1;for(a=e===~~e?e:!0===e?Le:Pe,"[object ArrayBuffer]"===Ce.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(n),i.next_out=0,i.avail_out=n),r=Ae.inflate(i,a),r===Me&&s&&(r=Ae.inflateSetDictionary(i,s),r===Re?r=Ae.inflate(i,a):r===ke&&(r=Me));i.avail_in>0&&r===Ie&&i.state.wrap>0&&0!==t[i.next_in];)Ae.inflateReset(i),r=Ae.inflate(i,a);switch(r){case De:case ke:case Me:case Ne:return this.onEnd(r),this.ended=!0,!1}if(o=i.avail_out,i.next_out&&(0===i.avail_out||r===Ie))if("string"===this.options.to){let t=Ft(i.output,i.next_out),e=i.next_out-t,s=Nt(i.output,t);i.next_out=e,i.avail_out=n-e,e&&i.output.set(i.output.subarray(t,t+e),0),this.onData(s)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(r!==Re||0!==o){if(r===Ie)return r=Ae.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},Fe.prototype.onData=function(t){this.chunks.push(t)},Fe.prototype.onEnd=function(t){t===Re&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=It(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Be={Inflate:Fe,inflate:Ge,inflateRaw:function(t,e){return(e=e||{}).raw=!0,Ge(t,e)},ungzip:Ge,constants:z};const{Deflate:ze,deflate:Ue,deflateRaw:Ye,gzip:Xe}=Jt,{Inflate:He,inflate:je,inflateRaw:We,ungzip:Ve}=Be;var Ke=ze,qe=Ue,Ze=Ye,Je=Xe,$e=He,Qe=je,ti=We,ei=Ve,ii=z,ni={Deflate:Ke,deflate:qe,deflateRaw:Ze,gzip:Je,Inflate:$e,inflate:Qe,inflateRaw:ti,ungzip:ei,constants:ii};e.default=ni},function(t,e,i){var n=e;n.utils=i(10),n.common=i(18),n.sha=i(75),n.ripemd=i(79),n.hmac=i(80),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}}},function(t,e,i){"use strict";e.sha1=i(76),e.sha224=i(77),e.sha256=i(44),e.sha384=i(78),e.sha512=i(45)},function(t,e,i){"use strict";var n=i(10),s=i(18),r=i(43),a=n.rotl32,o=n.sum32,h=n.sum32_5,l=r.ft_1,c=s.BlockHash,u=[1518500249,1859775393,2400959708,3395469782];function d(){if(!(this instanceof d))return new d;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(d,c),t.exports=d,d.blockSize=512,d.outSize=160,d.hmacStrength=80,d.padLength=64,d.prototype._update=function(t,e){for(var i=this.W,n=0;n<16;n++)i[n]=t[e+n];for(;n<i.length;n++)i[n]=a(i[n-3]^i[n-8]^i[n-14]^i[n-16],1);var s=this.h[0],r=this.h[1],c=this.h[2],d=this.h[3],f=this.h[4];for(n=0;n<i.length;n++){var p=~~(n/20),g=h(a(s,5),l(p,r,c,d),f,i[n],u[p]);f=d,d=c,c=a(r,30),r=s,s=g}this.h[0]=o(this.h[0],s),this.h[1]=o(this.h[1],r),this.h[2]=o(this.h[2],c),this.h[3]=o(this.h[3],d),this.h[4]=o(this.h[4],f)},d.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(t,e,i){"use strict";var n=i(10),s=i(44);function r(){if(!(this instanceof r))return new r;s.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(r,s),t.exports=r,r.blockSize=512,r.outSize=224,r.hmacStrength=192,r.padLength=64,r.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},function(t,e,i){"use strict";var n=i(10),s=i(45);function r(){if(!(this instanceof r))return new r;s.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(r,s),t.exports=r,r.blockSize=1024,r.outSize=384,r.hmacStrength=192,r.padLength=128,r.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},function(t,e,i){"use strict";var n=i(10),s=i(18),r=n.rotl32,a=n.sum32,o=n.sum32_3,h=n.sum32_4,l=s.BlockHash;function c(){if(!(this instanceof c))return new c;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function u(t,e,i,n){return t<=15?e^i^n:t<=31?e&i|~e&n:t<=47?(e|~i)^n:t<=63?e&n|i&~n:e^(i|~n)}function d(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function f(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}n.inherits(c,l),e.ripemd160=c,c.blockSize=512,c.outSize=160,c.hmacStrength=192,c.padLength=64,c.prototype._update=function(t,e){for(var i=this.h[0],n=this.h[1],s=this.h[2],l=this.h[3],c=this.h[4],y=i,_=n,x=s,w=l,b=c,E=0;E<80;E++){var T=a(r(h(i,u(E,n,s,l),t[p[E]+e],d(E)),m[E]),c);i=c,c=l,l=r(s,10),s=n,n=T,T=a(r(h(y,u(79-E,_,x,w),t[g[E]+e],f(E)),v[E]),b),y=b,b=w,w=r(x,10),x=_,_=T}T=o(this.h[1],s,w),this.h[1]=o(this.h[2],l,b),this.h[2]=o(this.h[3],c,y),this.h[3]=o(this.h[4],i,_),this.h[4]=o(this.h[0],n,x),this.h[0]=T},c.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"little"):n.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],g=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],m=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],v=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(t,e,i){"use strict";var n=i(10),s=i(17);function r(t,e,i){if(!(this instanceof r))return new r(t,e,i);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(e,i))}t.exports=r,r.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),s(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},r.prototype.update=function(t,e){return this.inner.update(t,e),this},r.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},function(t,e,i){"use strict";var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,s=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){s=!0,r=t}finally{try{!n&&o.return&&o.return()}finally{if(s)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return s(t,null,[{key:"get_n_pad_bytes",value:function(t){return 64-(t+8&63)}},{key:"pad",value:function(e){var i,s,r=e.byteLength,a=t.get_n_pad_bytes(r),o=(i=r,s=536870912,[Math.floor(i/s),i%s]).map((function(t,e){return e?8*t:t})),h=n(o,2),l=h[0],c=h[1],u=new Uint8Array(r+a+8);u.set(new Uint8Array(e),0);var d=new DataView(u.buffer);return d.setUint8(r,128),d.setUint32(r+a,c,!0),d.setUint32(r+a+4,l,!0),u.buffer}},{key:"f",value:function(t,e,i,n){return 0<=t&&t<=15?e^i^n:16<=t&&t<=31?e&i|~e&n:32<=t&&t<=47?(e|~i)^n:48<=t&&t<=63?e&n|i&~n:64<=t&&t<=79?e^(i|~n):void 0}},{key:"K",value:function(t){return 0<=t&&t<=15?0:16<=t&&t<=31?1518500249:32<=t&&t<=47?1859775393:48<=t&&t<=63?2400959708:64<=t&&t<=79?2840853838:void 0}},{key:"KP",value:function(t){return 0<=t&&t<=15?1352829926:16<=t&&t<=31?1548603684:32<=t&&t<=47?1836072691:48<=t&&t<=63?2053994217:64<=t&&t<=79?0:void 0}},{key:"add_modulo32",value:function(){return 0|Array.from(arguments).reduce((function(t,e){return t+e}),0)}},{key:"rol32",value:function(t,e){return t<<e|t>>>32-e}},{key:"hash",value:function(e){for(var i=t.pad(e),n=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],s=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],r=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],a=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],o=i.byteLength/64,h=new Array(o).fill(void 0).map((function(t,e){return function(t){return new DataView(i,64*e,64).getUint32(4*t,!0)}})),l=[1732584193,4023233417,2562383102,271733878,3285377520],c=0;c<o;++c){for(var u=l[0],d=l[1],f=l[2],p=l[3],g=l[4],m=u,v=d,y=f,_=p,x=g,w=0;w<80;++w){var b=t.add_modulo32(t.rol32(t.add_modulo32(u,t.f(w,d,f,p),h[c](n[w]),t.K(w)),r[w]),g);u=g,g=p,p=t.rol32(f,10),f=d,d=b,b=t.add_modulo32(t.rol32(t.add_modulo32(m,t.f(79-w,v,y,_),h[c](s[w]),t.KP(w)),a[w]),x),m=x,x=_,_=t.rol32(y,10),y=v,v=b}var E=t.add_modulo32(l[1],f,_);l[1]=t.add_modulo32(l[2],p,x),l[2]=t.add_modulo32(l[3],g,m),l[3]=t.add_modulo32(l[4],u,v),l[4]=t.add_modulo32(l[0],d,y),l[0]=E}var T=new ArrayBuffer(20),S=new DataView(T);return l.forEach((function(t,e){return S.setUint32(4*e,t,!0)})),T}}]),t}();t.exports={RIPEMD160:r}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,i){"use strict";(function(t){var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function a(t){try{h(n.next(t))}catch(t){r(t)}}function o(t){try{h(n.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}h((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var i,n,s,r,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function o(r){return function(o){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(s=2&r[0]?n.return:r[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(s=a.trys,(s=s.length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){a.label=r[1];break}if(6===r[0]&&a.label<s[1]){a.label=s[1],s=r;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(r);break}s[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,o])}}},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.JsonRpc=void 0;var a=i(28),o=i(46),h=function(t){var e,i,n="";try{for(var s=r(t),a=s.next();!a.done;a=s.next()){n+=("00"+a.value.toString(16)).slice(-2)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}return n},l=function(){function e(e,i){void 0===i&&(i={}),this.endpoint=e.replace(/\/$/,""),i.fetch?this.fetchBuiltin=i.fetch:this.fetchBuiltin=t.fetch}return e.prototype.fetch=function(t,e){return n(this,void 0,void 0,(function(){var i,n,r;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,(0,this.fetchBuiltin)(this.endpoint+t,{body:JSON.stringify(e),method:"POST"})];case 1:return[4,(i=s.sent()).json()];case 2:if((n=s.sent()).processed&&n.processed.except)throw new o.RpcError(n);if(n.result&&n.result.except)throw new o.RpcError(n);return[3,4];case 3:throw(r=s.sent()).isFetchError=!0,r;case 4:if(!i.ok)throw new o.RpcError(n);return[2,n]}}))}))},e.prototype.abi_bin_to_json=function(t,e,i){return n(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,this.fetch("/v1/chain/abi_bin_to_json",{code:t,action:e,binargs:i})];case 1:return[2,n.sent()]}}))}))},e.prototype.abi_json_to_bin=function(t,e,i){return n(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,this.fetch("/v1/chain/abi_json_to_bin",{code:t,action:e,args:i})];case 1:return[2,n.sent()]}}))}))},e.prototype.get_abi=function(t){return n(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.fetch("/v1/chain/get_abi",{account_name:t})];case 1:return[2,e.sent()]}}))}))},e.prototype.get_account=function(t){return n(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.fetch("/v1/chain/get_account",{account_name:t})];case 1:return[2,e.sent()]}}))}))},e.prototype.get_accounts_by_authorizers=function(t,e){return n(this,void 0,void 0,(function(){return s(this,(function(i){switch(i.label){case 0:return[4,this.fetch("/v1/chain/get_accounts_by_authorizers",{accounts:t,keys:e})];case 1:return[2,i.sent()]}}))}))},e.prototype.get_activated_protocol_features=function(t){var e=t.limit,i=void 0===e?10:e,r=t.search_by_block_num,a=void 0!==r&&r,o=t.reverse,h=void 0!==o&&o,l=t.lower_bound,c=void 0===l?null:l,u=t.upper_bound,d=void 0===u?null:u;return n(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.fetch("/v1/chain/get_activated_protocol_features",{lower_bound:c,upper_bound:d,limit:i,search_by_block_num:a,reverse:h})];case 1:return[2,t.sent()]}}))}))},e.prototype.get_block_header_state=function(t){return n(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.fetch("/v1/chain/get_block_header_state",{block_num_or_id:t})];case 1:return[2,e.sent()]}}))}))},e.prototype.get_block_info=function(t){return n(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.fetch("/v1/chain/get_block_info",{block_num:t})];case 1:return[2,e.sent()]}}))}))},e.prototype.get_block=function(t){return n(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.fetch("/v1/chain/get_block",{block_num_or_id:t})];case 1:return[2,e.sent()]}}))}))},e.prototype.get_code=function(t){return n(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.fetch("/v1/chain/get_code",{account_name:t,code_as_wasm:!0})];case 1:return[2,e.sent()]}}))}))},e.prototype.get_code_hash=function(t){return n(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.fetch("/v1/chain/get_code_hash",{account_name:t})];case 1:return[2,e.sent()]}}))}))},e.prototype.get_currency_balance=function(t,e,i){return void 0===i&&(i=null),n(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,this.fetch("/v1/chain/get_currency_balance",{code:t,account:e,symbol:i})];case 1:return[2,n.sent()]}}))}))},e.prototype.get_currency_stats=function(t,e){return n(this,void 0,void 0,(function(){return s(this,(function(i){switch(i.label){case 0:return[4,this.fetch("/v1/chain/get_currency_stats",{code:t,symbol:e})];case 1:return[2,i.sent()]}}))}))},e.prototype.get_info=function(){return n(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.fetch("/v1/chain/get_info",{})];case 1:return[2,t.sent()]}}))}))},e.prototype.get_producer_schedule=function(){return n(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.fetch("/v1/chain/get_producer_schedule",{})];case 1:return[2,t.sent()]}}))}))},e.prototype.get_producers=function(t,e,i){return void 0===t&&(t=!0),void 0===e&&(e=""),void 0===i&&(i=50),n(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,this.fetch("/v1/chain/get_producers",{json:t,lower_bound:e,limit:i})];case 1:return[2,n.sent()]}}))}))},e.prototype.get_raw_code_and_abi=function(t){return n(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.fetch("/v1/chain/get_raw_code_and_abi",{account_name:t})];case 1:return[2,e.sent()]}}))}))},e.prototype.getRawAbi=function(t){return n(this,void 0,void 0,(function(){var e,i;return s(this,(function(n){switch(n.label){case 0:return[4,this.get_raw_abi(t)];case 1:return e=n.sent(),i=a.base64ToBinary(e.abi),[2,{accountName:e.account_name,abi:i}]}}))}))},e.prototype.get_raw_abi=function(t){return n(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.fetch("/v1/chain/get_raw_abi",{account_name:t})];case 1:return[2,e.sent()]}}))}))},e.prototype.get_scheduled_transactions=function(t,e,i){return void 0===t&&(t=!0),void 0===e&&(e=""),void 0===i&&(i=50),n(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,this.fetch("/v1/chain/get_scheduled_transactions",{json:t,lower_bound:e,limit:i})];case 1:return[2,n.sent()]}}))}))},e.prototype.get_table_rows=function(t){var e=t.json,i=void 0===e||e,r=t.code,a=t.scope,o=t.table,h=t.lower_bound,l=void 0===h?"":h,c=t.upper_bound,u=void 0===c?"":c,d=t.index_position,f=void 0===d?1:d,p=t.key_type,g=void 0===p?"":p,m=t.limit,v=void 0===m?10:m,y=t.reverse,_=void 0!==y&&y,x=t.show_payer,w=void 0!==x&&x;return n(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.fetch("/v1/chain/get_table_rows",{json:i,code:r,scope:a,table:o,lower_bound:l,upper_bound:u,index_position:f,key_type:g,limit:v,reverse:_,show_payer:w})];case 1:return[2,t.sent()]}}))}))},e.prototype.get_kv_table_rows=function(t){var e=t.json,i=void 0===e||e,r=t.code,a=t.table,o=t.index_name,h=t.encode_type,l=void 0===h?"bytes":h,c=t.index_value,u=t.lower_bound,d=t.upper_bound,f=t.limit,p=void 0===f?10:f,g=t.reverse,m=void 0!==g&&g,v=t.show_payer,y=void 0!==v&&v;return n(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.fetch("/v1/chain/get_kv_table_rows",{json:i,code:r,table:a,index_name:o,encode_type:l,index_value:c,lower_bound:u,upper_bound:d,limit:p,reverse:m,show_payer:y})];case 1:return[2,t.sent()]}}))}))},e.prototype.get_table_by_scope=function(t){var e=t.code,i=t.table,r=t.lower_bound,a=void 0===r?"":r,o=t.upper_bound,h=void 0===o?"":o,l=t.limit,c=void 0===l?10:l;return n(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.fetch("/v1/chain/get_table_by_scope",{code:e,table:i,lower_bound:a,upper_bound:h,limit:c})];case 1:return[2,t.sent()]}}))}))},e.prototype.getRequiredKeys=function(t){return n(this,void 0,void 0,(function(){var e;return s(this,(function(i){switch(i.label){case 0:return e=a.convertLegacyPublicKeys,[4,this.fetch("/v1/chain/get_required_keys",{transaction:t.transaction,available_keys:t.availableKeys})];case 1:return[2,e.apply(void 0,[i.sent().required_keys])]}}))}))},e.prototype.push_transaction=function(t){var e=t.signatures,i=t.compression,r=void 0===i?0:i,a=t.serializedTransaction,o=t.serializedContextFreeData;return n(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.fetch("/v1/chain/push_transaction",{signatures:e,compression:r,packed_context_free_data:h(o||new Uint8Array(0)),packed_trx:h(a)})];case 1:return[2,t.sent()]}}))}))},e.prototype.push_ro_transaction=function(t,e){var i=t.signatures,r=t.compression,a=void 0===r?0:r,o=t.serializedTransaction;return void 0===e&&(e=!1),n(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.fetch("/v1/chain/push_ro_transaction",{transaction:{signatures:i,compression:a,packed_context_free_data:h(new Uint8Array(0)),packed_trx:h(o)},return_failure_traces:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.push_transactions=function(t){return n(this,void 0,void 0,(function(){var e;return s(this,(function(i){switch(i.label){case 0:return e=t.map((function(t){var e=t.signatures,i=t.compression,n=void 0===i?0:i,s=t.serializedTransaction,r=t.serializedContextFreeData;return{signatures:e,compression:n,packed_context_free_data:h(r||new Uint8Array(0)),packed_trx:h(s)}})),[4,this.fetch("/v1/chain/push_transactions",e)];case 1:return[2,i.sent()]}}))}))},e.prototype.send_transaction=function(t){var e=t.signatures,i=t.compression,r=void 0===i?0:i,a=t.serializedTransaction,o=t.serializedContextFreeData;return n(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.fetch("/v1/chain/send_transaction",{signatures:e,compression:r,packed_context_free_data:h(o||new Uint8Array(0)),packed_trx:h(a)})];case 1:return[2,t.sent()]}}))}))},e.prototype.db_size_get=function(){return n(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.fetch("/v1/db_size/get",{})];case 1:return[2,t.sent()]}}))}))},e.prototype.trace_get_block=function(t){return n(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.fetch("/v1/trace_api/get_block",{block_num:t})];case 1:return[2,e.sent()]}}))}))},e.prototype.history_get_actions=function(t,e,i){return void 0===e&&(e=null),void 0===i&&(i=null),n(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,this.fetch("/v1/history/get_actions",{account_name:t,pos:e,offset:i})];case 1:return[2,n.sent()]}}))}))},e.prototype.history_get_transaction=function(t,e){return void 0===e&&(e=null),n(this,void 0,void 0,(function(){return s(this,(function(i){switch(i.label){case 0:return[4,this.fetch("/v1/history/get_transaction",{id:t,block_num_hint:e})];case 1:return[2,i.sent()]}}))}))},e.prototype.history_get_key_accounts=function(t){return n(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.fetch("/v1/history/get_key_accounts",{public_key:t})];case 1:return[2,e.sent()]}}))}))},e.prototype.history_get_controlled_accounts=function(t){return n(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.fetch("/v1/history/get_controlled_accounts",{controlling_account:t})];case 1:return[2,e.sent()]}}))}))},e}();e.JsonRpc=l}).call(this,i(4))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=n(i(47)),r=n(i(86));function a(t,e){var i;const n={};for(const t of e){const e=null!==(i=t.type)&&void 0!==i?i:"data";"number"==typeof t.value?n[e+":number."+t.key]=String(t.value):"boolean"==typeof t.value?n[e+":bool."+t.key]=t.value?"true":"false":n[e+"."+t.key]=t.value}return Object.assign({},t,n)}e.default=class{constructor(t,e,i){this.endpoint=t,this.namespace=e,i.fetch?this.fetchBuiltin=i.fetch:this.fetchBuiltin=window.fetch,this.action=(async()=>new s.default((await this.getConfig()).contract,this))()}async getConfig(){return await this.fetchEndpoint("/v1/config",{})}async getAssets(t={},e=1,i=100,n=[]){return await this.fetchEndpoint("/v1/assets",Object.assign({page:e,limit:i},a(t,n)))}async countAssets(t,e=[]){return await this.countEndpoint("/v1/assets",a(t,e))}async getAsset(t){return await this.fetchEndpoint("/v1/assets/"+t,{})}async getAssetStats(t){return await this.fetchEndpoint("/v1/assets/"+t+"/stats",{})}async getAssetLogs(t,e=1,i=100,n="desc"){return await this.fetchEndpoint("/v1/assets/"+t+"/logs",{page:e,limit:i,order:n})}async getCollections(t={},e=1,i=100){return await this.fetchEndpoint("/v1/collections",Object.assign({page:e,limit:i},t))}async countCollections(t={}){return await this.countEndpoint("/v1/collections",t)}async getCollection(t){return await this.fetchEndpoint("/v1/collections/"+t,{})}async getCollectionStats(t){return await this.fetchEndpoint("/v1/collections/"+t+"/stats",{})}async getCollectionLogs(t,e=1,i=100,n="desc"){return await this.fetchEndpoint("/v1/collections/"+t+"/logs",{page:e,limit:i,order:n})}async getSchemas(t={},e=1,i=100){return await this.fetchEndpoint("/v1/schemas",Object.assign({page:e,limit:i},t))}async countSchemas(t={}){return await this.countEndpoint("/v1/schemas",t)}async getSchema(t,e){return await this.fetchEndpoint("/v1/schemas/"+t+"/"+e,{})}async getSchemaStats(t,e){return await this.fetchEndpoint("/v1/schemas/"+t+"/"+e+"/stats",{})}async getSchemaLogs(t,e,i=1,n=100,s="desc"){return await this.fetchEndpoint("/v1/schemas/"+t+"/"+e+"/logs",{page:i,limit:n,order:s})}async getTemplates(t={},e=1,i=100,n=[]){return await this.fetchEndpoint("/v1/templates",Object.assign({page:e,limit:i},a(t,n)))}async countTemplates(t={},e=[]){return await this.countEndpoint("/v1/templates",a(t,e))}async getTemplate(t,e){return await this.fetchEndpoint("/v1/templates/"+t+"/"+e,{})}async getTemplateStats(t,e){return await this.fetchEndpoint("/v1/templates/"+t+"/"+e+"/stats",{})}async getTemplateLogs(t,e,i=1,n=100,s="desc"){return await this.fetchEndpoint("/v1/templates/"+t+"/"+e+"/logs",{page:i,limit:n,order:s})}async getTransfers(t={},e=1,i=100){return await this.fetchEndpoint("/v1/transfers",Object.assign({page:e,limit:i},t))}async countTransfers(t={}){return await this.countEndpoint("/v1/transfers",t)}async getOffers(t={},e=1,i=100){return await this.fetchEndpoint("/v1/offers",Object.assign({page:e,limit:i},t))}async countOffers(t={}){return await this.countEndpoint("/v1/offers",t)}async getOffer(t){return await this.fetchEndpoint("/v1/offers/"+t,{})}async getAccounts(t={},e=1,i=100){return await this.fetchEndpoint("/v1/accounts",Object.assign({page:e,limit:i},t))}async getBurns(t={},e=1,i=100){return await this.fetchEndpoint("/v1/burns",Object.assign({page:e,limit:i},t))}async countAccounts(t={}){return await this.countEndpoint("/v1/accounts",t)}async getAccount(t,e={}){return await this.fetchEndpoint("/v1/accounts/"+t,e)}async getAccountCollection(t,e){return await this.fetchEndpoint("/v1/accounts/"+t+"/"+e,{})}async getAccountBurns(t,e={}){return await this.fetchEndpoint("/v1/burns/"+t,e)}async fetchEndpoint(t,e){let i,n;const s=this.fetchBuiltin,a=Object.keys(e).map(t=>{let i=e[t];return!0===i&&(i="true"),!1===i&&(i="false"),t+"="+encodeURIComponent(i)}).join("&");try{i=await s(this.endpoint+"/"+this.namespace+t+(a.length>0?"?"+a:"")),n=await i.json()}catch(t){throw new r.default(t.message,500)}if(200!==i.status)throw new r.default(n.message,i.status);if(!n.success)throw new r.default(n.message,i.status);return n.data}async countEndpoint(t,e){const i=await this.fetchEndpoint(t+"/_count",e);return parseInt(i,10)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n extends Error{constructor(t,e){super(t),this.message=t,this.status=e,this.isApiError=!0}}e.default=n},function(t,e,i){"use strict";(function(t){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=n(i(48)),r=n(i(88)),a=n(i(49)),o=n(i(93)),h=n(i(32)),l=n(i(95)),c=n(i(96)),u=n(i(34)),d=n(i(52));e.default=class{constructor(e,i,n={rateLimit:4}){this.endpoint=e,this.contract=i,n.fetch?this.fetchBuiltin=n.fetch:this.fetchBuiltin=t.fetch,this.queue=new c.default(this,n.rateLimit),this.cache=new o.default,this.action=new s.default(this),this._config=new Promise(async(t,e)=>{try{const i=await this.getTableRows({code:this.contract,scope:this.contract,table:"config"});return 1!==i.rows.length?e("invalid config"):t(i.rows[0])}catch(t){e(t)}})}async config(){return await this._config}async getAsset(t,e,i=!0){i||this.cache.deleteAsset(e);const n=await this.queue.fetchAsset(t,e,i);return new a.default(this,t,e,n,void 0,void 0,void 0,i)}async getTemplate(t,e,i=!0){i||this.cache.deleteTemplate(t,e);const n=await this.queue.fetchTemplate(t,e,i);return new d.default(this,t,e,n,void 0,i)}async getCollection(t,e=!0){e||this.cache.deleteCollection(t);const i=await this.queue.fetchCollection(t,e);return new h.default(this,t,i,e)}async getCollectionTemplates(t){return(await this.queue.fetchCollectionTemplates(t)).map(e=>new d.default(this,t,String(e.template_id),e,void 0))}async getCollectionsSchemas(t){return(await this.queue.fetchCollectionSchemas(t)).map(e=>new u.default(this,t,e.schema_name,void 0))}async getSchema(t,e,i=!0){i||this.cache.deleteSchema(t,e);const n=await this.queue.fetchSchema(t,e,i);return new u.default(this,t,e,n,i)}async getOffer(t,e=!0){e||this.cache.deleteOffer(t);const i=await this.queue.fetchOffer(t,e);return new l.default(this,t,i,void 0,void 0,e)}async getAccountOffers(t){return(await this.queue.fetchAccountOffers(t)).map(t=>new l.default(this,t.offer_id,t,void 0,void 0))}async getAccountAssets(t){return(await this.queue.fetchAccountAssets(t)).map(e=>new a.default(this,t,e.asset_id,e,void 0,void 0,void 0))}async getCollectionInventory(t,e){return await this.queue.preloadCollection(t,!0),(await this.queue.fetchAccountAssets(e)).filter(e=>e.collection_name===t).map(t=>new a.default(this,e,t.asset_id,t,void 0,void 0,void 0))}async preloadCollection(t,e=!0){await this.queue.preloadCollection(t,e)}async getTableRows({code:t,scope:e,table:i,table_key:n="",lower_bound:s="",upper_bound:r="",index_position:a=1,key_type:o=""}){return await this.fetchRpc("/v1/chain/get_table_rows",{code:t,scope:e,table:i,table_key:n,lower_bound:s,upper_bound:r,index_position:a,key_type:o,limit:101,reverse:!1,show_payer:!1,json:!0})}async fetchRpc(t,e){let i,n;try{const s=this.fetchBuiltin;i=await s(this.endpoint+t,{body:JSON.stringify(e),method:"POST"}),n=await i.json()}catch(t){throw t.isFetchError=!0,t}if(n.processed&&n.processed.except||!i.ok)throw new r.default(n);return n}}}).call(this,i(4))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n extends Error{constructor(t){t.error&&t.error.details&&t.error.details.length&&t.error.details[0].message?super(t.error.details[0].message):t.processed&&t.processed.except&&t.processed.except.message?super(t.processed.except.message):super(t.message),this.json=t}}e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t){if(this.ALPHABET=t,t.length>=255)throw new TypeError("Alphabet too long");this.BASE_MAP=new Uint8Array(256);for(let t=0;t<this.BASE_MAP.length;t++)this.BASE_MAP[t]=255;for(let e=0;e<t.length;e++){const i=t.charAt(e),n=i.charCodeAt(0);if(255!==this.BASE_MAP[n])throw new TypeError(i+" is ambiguous");this.BASE_MAP[n]=e}this.BASE=t.length,this.LEADER=t.charAt(0),this.FACTOR=Math.log(this.BASE)/Math.log(256),this.iFACTOR=Math.log(256)/Math.log(this.BASE)}encode(t){if(0===t.length)return"";let e=0,i=0,n=0;const s=t.length;for(;n!==s&&0===t[n];)n++,e++;const r=(s-n)*this.iFACTOR+1>>>0,a=new Uint8Array(r);for(;n!==s;){let e=t[n],s=0;for(let t=r-1;(0!==e||s<i)&&-1!==t;t--,s++)e+=256*a[t]>>>0,a[t]=e%this.BASE>>>0,e=e/this.BASE>>>0;if(0!==e)throw new Error("Non-zero carry");i=s,n++}let o=r-i;for(;o!==r&&0===a[o];)o++;let h=this.LEADER.repeat(e);for(;o<r;++o)h+=this.ALPHABET.charAt(a[o]);return h}decode(t){const e=this.decodeUnsafe(t);if(e)return e;throw new Error("Non-base"+this.BASE+" character")}decodeUnsafe(t){if(0===t.length)return new Uint8Array(0);let e=0;if(" "===t[e])return new Uint8Array(0);let i=0,n=0;for(;t[e]===this.LEADER;)i++,e++;const s=(t.length-e)*this.FACTOR+1>>>0,r=new Uint8Array(s);for(;t[e];){let i=this.BASE_MAP[t.charCodeAt(e)];if(255===i)return new Uint8Array(0);let a=0;for(let t=s-1;(0!==i||a<n)&&-1!==t;t--,a++)i+=this.BASE*r[t]>>>0,r[t]=i%256>>>0,i=i/256>>>0;if(0!==i)throw new Error("Non-zero carry");n=a,e++}if(" "===t[e])return new Uint8Array(0);let a=s-n;for(;a!==s&&0===r[a];)a++;const o=new Uint8Array(i+(s-a));o.fill(0,0,i);let h=i;for(;a!==s;)o[h++]=r[a++];return o}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.prepare=void 0;class n{constructor(t,e=0){this.data=t,this.position=e}}e.default=n,e.prepare=function(t){return new n(t,0)}},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=n(i(30)),r=i(11);e.default=class{constructor(t){if(void 0===r.ParserTypes[t])throw new s.default(`attribute type '${t}' not defined`);this.parser=r.ParserTypes[t]}deserialize(t){return this.parser.deserialize(t)}serialize(t){return this.parser.serialize(t)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(13);e.default=class{constructor(t){this.element=t}deserialize(t){const e=n.varint_decode(t).toJSNumber(),i=[];for(let n=0;n<e;n++)i.push(this.element.deserialize(t));return i}serialize(t){const e=[n.varint_encode(t.length)];for(const i of t)e.push(this.element.serialize(i));return n.concat_byte_arrays(e)}}},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=n(i(94));e.default=class{constructor(){this.cache=new s.default({expiryCheckInterval:6e4})}getAsset(t,e){return e&&(e.mutable_serialized_data=new Uint8Array(e.mutable_serialized_data),e.immutable_serialized_data=new Uint8Array(e.immutable_serialized_data)),this.access("assets",t,e)}deleteAsset(t){this.delete("assets",t)}getTemplate(t,e,i){return i&&(i.immutable_serialized_data=new Uint8Array(i.immutable_serialized_data)),this.access("templates",t+":"+e,i)}deleteTemplate(t,e){this.delete("templates",t+":"+e)}getSchema(t,e,i){return this.access("schemas",t+":"+e,i)}deleteSchema(t,e){this.delete("schemas",t+":"+e)}getCollection(t,e){return this.access("collections",t,e)}deleteCollection(t){this.delete("collections",t)}getOffer(t,e){return this.access("offers",t,e)}deleteOffer(t){this.delete("offers",t)}access(t,e,i){if(void 0===i){const i=this.cache.get(t+":"+e);return null===i?null:i.value}return this.cache.put(t+":"+e,i,9e5),i}delete(t,e){this.cache.remove(t+":"+e)}}},function(t,e,i){t.exports=function(){"use strict";function t(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function e(e){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?t(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(t){return{all:t=t||new Map,on:function(e,i){var n=t.get(e);n?n.push(i):t.set(e,[i])},off:function(e,i){var n=t.get(e);n&&(i?n.splice(n.indexOf(i)>>>0,1):t.set(e,[]))},emit:function(e,i){var n=t.get(e);n&&n.slice().map((function(t){t(i)})),(n=t.get("*"))&&n.slice().map((function(t){t(e,i)}))}}}var o="expiry",h=function(t){if(t)throw new Error("Cannot use disposed instance.")},l={expiryCheckInterval:100},c=function(){function t(){var n=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),r(this,"expire",(function(){h(n.disposed);for(var t=Date.now(),e=t;e>=n.lastExpiredTime;e-=1){var i=n.queue[e];i&&(delete n.queue[e],i.forEach((function(t){var e=t.key;return(0,t.onExpire)(e)})))}n.lastExpiredTime=t})),this.config=e(e({},l),s),this.queue={},this.disposed=!1,this.lastExpiredTime=Date.now()-1;var a=this.config.expiryCheckInterval;this.timer=setInterval(this.expire,a)}return s(t,[{key:"add",value:function(t,e,i){return h(this.disposed),this.queue[t]||(this.queue[t]=[]),this.queue[t].push({key:e,onExpire:i}),!0}},{key:"remove",value:function(t,e){h(this.disposed);var i=this.queue[t];if(i){var n=i.filter((function(t){return t.key!==e}));return n.length?this.queue[t]=n:delete this.queue[t],!0}return!1}},{key:"dispose",value:function(){return h(this.disposed),clearInterval(this.timer),this.timer=null,this.queue={},this.disposed=!0,!0}}]),t}(),u={defaultCacheExpiryIn:6e4,expiryCheckInterval:100};return function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;i(this,t),this.config=e(e({},u),n);var r=a(),o=r.on,h=r.off,l=r.emit,d=[o,h,l];this.on=d[0],this.off=d[1],this.emit=d[2],this.cacheStore={},this.disposed=!1;var f=this.config.expiryCheckInterval;this.cacheExpirer=new s({expiryCheckInterval:f})}return s(t,[{key:"put",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.config.defaultCacheExpiryIn;h(this.disposed),this.cacheStore[e]&&this.remove(e);var s=Date.now(),r=n?s+n:null,a={value:i,addedAt:s,expiryAt:r};if(this.cacheStore[e]=a,r){var l=function(){t.remove(e),t.emit(o,{key:e,data:t.cacheStore[e]})};this.cacheExpirer.add(r,e,l)}return this.emit("add",{key:e,data:a}),a}},{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";h(this.disposed);var e=this.cacheStore[t];return e?(this.emit("get",{key:t,data:e}),e):null}},{key:"remove",value:function(t){h(this.disposed);var e=this.cacheStore[t];if(e){delete this.cacheStore[t];var i=e.expiryAt;return this.cacheExpirer.remove(i,t),this.emit("remove",{key:t,data:e}),!0}return!1}},{key:"dispose",value:function(){var t=this;return h(this.disposed),Object.keys(this.cacheStore).forEach((function(e){return t.remove(e)})),this.emit("clear",{}),this.cacheExpirer.dispose(),this.disposed=!0,!0}}]),t}()}()},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=n(i(49));e.default=class{constructor(t,e,i,n,r,a=!0){this.api=t,this.id=e,this._data=new Promise(async(t,n)=>{if(i)t(i);else try{t(await this.api.queue.fetchOffer(e,a))}catch(t){n(t)}}),this._senderAssets=new Promise(async(t,e)=>{if(n)t(n);else try{const e=await this._data,i=await this.api.queue.fetchAccountAssets(e.sender);return t(e.sender_asset_ids.map(t=>{const n=i.find(e=>e.asset_id===t);return n?new s.default(this.api,e.sender,t,n,void 0,void 0,void 0,a):t}))}catch(t){return e(t)}}),this._recipientAssets=new Promise(async(t,e)=>{if(r)t(r);else try{const e=await this._data,i=await this.api.queue.fetchAccountAssets(e.recipient);return t(e.recipient_asset_ids.map(t=>{const n=i.find(e=>e.asset_id===t);return n?new s.default(this.api,e.recipient,t,n,void 0,void 0,void 0,a):t}))}catch(t){return e(t)}})}async sender(){return(await this._data).sender}async recipient(){return(await this._data).recipient}async senderAssets(){return await this._senderAssets}async recipientAssets(){return await this._recipientAssets}async memo(){return(await this._data).memo}async toObject(){return{offer_id:this.id,sender:{account:await this.sender(),assets:await Promise.all((await this.senderAssets()).map(async t=>"string"==typeof t?t:await t.toObject()))},recipient:{account:await this.recipient(),assets:await Promise.all((await this.recipientAssets()).map(async t=>"string"==typeof t?t:await t.toObject()))},memo:await this.memo()}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e=4){this.api=t,this.requestLimit=e,this.elements=[],this.interval=null,this.preloadedCollections={}}async fetchAsset(t,e,i=!0){return await this.fetch_single_row("assets",t,e,t=>i||void 0!==t?this.api.cache.getAsset(e,t):null)}async fetchAccountAssets(t){return(await this.fetch_all_rows("assets",t,"asset_id")).map(t=>this.api.cache.getAsset(t.asset_id,t))}async fetchTemplate(t,e,i=!0){return await this.fetch_single_row("templates",t,e,n=>i||void 0!==n?this.api.cache.getTemplate(t,e,n):null)}async fetchSchema(t,e,i=!0){return await this.fetch_single_row("schemas",t,e,n=>i||void 0!==n?this.api.cache.getSchema(t,e,n):null)}async fetchCollection(t,e=!0){return await this.fetch_single_row("collections",this.api.contract,t,i=>e||void 0!==i?this.api.cache.getCollection(t,i):null)}async fetchCollectionSchemas(t){return(await this.fetch_all_rows("schemas",t,"schema_name")).map(e=>this.api.cache.getSchema(t,e.schema_name,e))}async fetchCollectionTemplates(t){return(await this.fetch_all_rows("templates",t,"template_id")).map(e=>this.api.cache.getTemplate(t,String(e.template_id),e))}async preloadCollection(t,e=!0){(!e||!this.preloadedCollections[t]||this.preloadedCollections[t]+9e5<Date.now())&&(await this.fetchCollectionSchemas(t),await this.fetchCollectionTemplates(t))}async fetchOffer(t,e=!0){return await this.fetch_single_row("offers",this.api.contract,t,i=>e||void 0!==i?this.api.cache.getOffer(t,i):null)}async fetchAccountOffers(t){const e=await Promise.all([this.fetch_all_rows("offers",this.api.contract,"offer_sender",t,t,2,"name"),this.fetch_all_rows("offers",this.api.contract,"offer_recipient",t,t,3,"name")]);return e[0].concat(e[1]).map(t=>this.api.cache.getOffer(t.offer_id,t))}dequeue(){this.interval||(this.interval=setInterval(async()=>{this.elements.length>0?this.elements.shift()():(clearInterval(this.interval),this.interval=null)},Math.ceil(1e3/this.requestLimit)))}async fetch_single_row(t,e,i,n,s=1,r=""){return new Promise((a,o)=>{let h=n();if(null!==h)return a(h);this.elements.push(async()=>{if(h=n(),null!==h)return a(h);try{const h={code:this.api.contract,table:t,scope:e,limit:1,lower_bound:i,upper_bound:i,index_position:s,key_type:r},l=await this.api.getTableRows(h);return 0===l.rows.length?o(new Error("Row not found for "+JSON.stringify(h))):a(n(l.rows[0]))}catch(t){return o(t)}}),this.dequeue()})}async fetch_all_rows(t,e,i,n="",s="",r=1,a=""){return new Promise(async(o,h)=>{this.elements.push(async()=>{const l=await this.api.getTableRows({code:this.api.contract,scope:e,table:t,lower_bound:n,upper_bound:s,limit:1e3,index_position:r,key_type:a});l.more&&1===r?(this.elements.unshift(async()=>{try{const n=await this.fetch_all_rows(t,e,i,l.rows[l.rows.length-1][i],s,r,a);n.length>0&&n.shift(),o(l.rows.concat(n))}catch(t){h(t)}}),this.dequeue()):o(l.rows)}),this.dequeue()})}}},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ParserTypes=void 0;const s=n(i(98)),r=i(99),a=n(i(100)),o=n(i(101)),h=n(i(103)),l=n(i(104)),c=n(i(105));e.ParserTypes={int8:new c.default(1,!1),int16:new c.default(2,!1),int32:new c.default(4,!1),int64:new c.default(8,!1),uint8:new c.default(1,!0),uint16:new c.default(2,!0),uint32:new c.default(4,!0),uint64:new c.default(8,!0),fixed8:new a.default(1),fixed16:new a.default(2),fixed32:new a.default(4),fixed64:new a.default(8),bool:new s.default,bytes:new r.ByteParser,string:new l.default,image:new l.default,ipfs:new h.default,float:new o.default(!1),double:new o.default(!0)}},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=n(i(35));class r extends s.default{constructor(){super(1)}deserialize(t){return 1===super.deserialize(t)[0]?1:0}serialize(t){return super.serialize(new Uint8Array([t?1:0]))}}e.default=r},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ByteParser=void 0;const s=n(i(36));class r extends s.default{deserialize(t){return super.deserialize(t)}serialize(t){return super.serialize(t)}}e.ByteParser=r},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=n(i(31)),r=n(i(35));class a extends r.default{deserialize(t){const e=super.deserialize(t).reverse();let i=s.default(0);for(const t of e)i=i.shiftLeft(8),i=i.plus(t);return this.size<=6?i.toJSNumber():i.toString()}serialize(t){let e=s.default(t);const i=[];for(let t=0;t<this.size;t++)i.push(e.and(255).toJSNumber()),e=e.shiftRight(8);return super.serialize(new Uint8Array(i))}}e.default=a},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=n(i(35)),r=i(102);class a extends s.default{constructor(t){super(t?8:4),this.isDouble=t}deserialize(t){return this.isDouble?r.readDoubleLE(super.deserialize(t)):r.readFloatLE(super.deserialize(t))}serialize(t){let e=[];return this.isDouble?(r.writeDoubleLE(e,t),super.serialize(new Uint8Array(e))):(r.writeFloatLE(e,t),super.serialize(new Uint8Array(e)))}}e.default=a},function(t,e,i){"use strict";var n,s,r,a,o,h,l,c,u,d,f,p,g=!1;function m(t,e,i){var n=t[e++],s=t[e++],r=t[e++],a=t[e];return"bige"===i?256*(256*(256*n+s)+r)+a:256*(256*(256*a+r)+s)+n}function v(t,e,i,n){var s=e>>>24&255,r=e>>16&255,a=e>>8&255,o=255&e;"bige"===n?(t[i++]=s,t[i++]=r,t[i++]=a,t[i]=o):(t[i++]=o,t[i++]=a,t[i++]=r,t[i]=s)}function y(t,e,i,n,s){"bige"===s?(v(t,e,n,s),v(t,i,n+4,s)):(v(t,i,n,s),v(t,e,n+4,s))}"function"==typeof Float32Array&&(u=new Float32Array(1),d=new Uint8Array(u.buffer),u[0]=-1,g=0===d[3],n=function(t,e){return(e=e||0)<0||e+4>t.length?0:(d[0]=t[e++],d[1]=t[e++],d[2]=t[e++],d[3]=t[e],u[0])},r=function(t,e){return(e=e||0)<0||e+4>t.length?0:(d[3]=t[e++],d[2]=t[e++],d[1]=t[e++],d[0]=t[e],u[0])},s=function(t,e,i){i=i||0,u[0]=e,t[i++]=d[0],t[i++]=d[1],t[i++]=d[2],t[i]=d[3]},a=function(t,e,i){i=i||0,u[0]=e,t[i++]=d[3],t[i++]=d[2],t[i++]=d[1],t[i]=d[0]}),"function"==typeof Float64Array&&(f=new Float64Array(1),p=new Uint8Array(f.buffer),o=function(t,e){return(e=e||0)<0||e+8>t.length?0:(p[0]=t[e+0],p[1]=t[e+1],p[2]=t[e+2],p[3]=t[e+3],p[4]=t[e+4],p[5]=t[e+5],p[6]=t[e+6],p[7]=t[e+7],f[0])},l=function(t,e){return(e=e||0)<0||e+8>t.length?0:(p[7]=t[e+0],p[6]=t[e+1],p[5]=t[e+2],p[4]=t[e+3],p[3]=t[e+4],p[2]=t[e+5],p[1]=t[e+6],p[0]=t[e+7],f[0])},h=function(t,e,i){i=i||0,f[0]=e,t[i+0]=p[0],t[i+1]=p[1],t[i+2]=p[2],t[i+3]=p[3],t[i+4]=p[4],t[i+5]=p[5],t[i+6]=p[6],t[i+7]=p[7]},c=function(t,e,i){i=i||0,f[0]=e,t[i+0]=p[7],t[i+1]=p[6],t[i+2]=p[5],t[i+3]=p[4],t[i+4]=p[3],t[i+5]=p[2],t[i+6]=p[1],t[i+7]=p[0]});for(var _=new Array,x=0;x<1200;x++)_[x]=Math.pow(2,x);var w=new Array;for(x=0;x<1200;x++)w[x]=Math.pow(2,-x);function b(t){return t>=0?_[t]:w[-t]}b(-1023);function E(t,e,i){var n,s,r=m(t,e,i),a=m(t,e+4,i);"bige"===i?(n=r,s=a):(n=a,s=r);var o=4294967296*(1048575&n)+s,h=(2146435072&n)>>>20;return(n>>31||1)*(0===h?o?o*b(-1074):0:h<2047?o>=0?(1+2220446049250313e-31*o)*b(h-1023):0:o?NaN:1/0)}var T=Math.pow(2,-23),S=Math.pow(2,-127);function A(t,e,i){var n=m(t,e,i),s=8388607&n,r=(2139095040&n)>>>23;return(n>>31||1)*(0===r?s?s*T*2*S:0:r<255?(1+s*T)*b(r-127):s?NaN:1/0)}var O={exp:0,mant:0};function C(t){var e=0;return t>=2?(t*=b(-(e=L(1,t))))>=2&&(t/=2,e+=1):t<1&&((e=L(t,2))<=1023?t*=b(e):(t*=b(e-100),t*=b(100)),e=-e),O.exp=e,O.mant=t,O}var P=Math.pow(2,192);function L(t,e){for(var i=0;t*P<e;)t*=P,i+=192;for(;0x10000000000000000*t<e;)t*=0x10000000000000000,i+=64;for(;65536*t<e;)t*=65536,i+=16;for(;64*t<e;)t*=64,i+=6;for(;2*t<e;)t*=2,i+=1;return i}function R(t,e){return(t*=e)-Math.floor(t)!=.5||1&t?t+.5:t}function I(t,e,i,n){var s,r=0;e<0&&(r=2147483648,e=-e),e&&e<1/0?((s=C(e)).exp+=127,s.exp<=0?s.exp<=-25?(s.mant=0,s.exp=0):(s.mant=R(s.mant,b(22+s.exp)),s.exp=0,s.mant>=8388608&&(s.mant-=8388608,s.exp+=1)):(s.mant=R(s.mant-1,8388608),s.mant>=8388608&&(s.mant-=8388608,s.exp+=1),s.exp>254&&(s.mant=0,s.exp=255)),v(t,r|s.exp<<23|s.mant,i,n)):v(t,0===e?1/e<0?2147483648:0:e===1/0?2139095040|r:2143289344,i,n)}new Uint8Array(8);var M=Math.pow(2,52);function D(t,e,i,n){var s,r,a,o=0;e<0&&(o=2147483648,e=-e),e&&e<1/0?((s=C(e)).exp+=1023,s.exp<=0?(s.mant*=b(51+s.exp),s.exp=0):s.mant=(s.mant-1)*M,y(t,r=o|s.exp<<20|s.mant/4294967296,a=s.mant>>>0,i,n)):(0===e?(r=1/e<0?2147483648:0,a=0):e===1/0?(r=o+2146435072,a=0):(r=2146959360,a=0),y(t,r,a,i,n))}(function e(){var i=t.exports||this;i.readWord=m,i.writeWord=v,i.writeDoubleWord=y,i.readFloat=A,i.writeFloat=I,i.readDouble=E,i.writeDouble=D,i._useFloatArray=function(t){i._usingFloatArray=t,t?("full"==t&&(i.readFloatLE=g?r:n),i.writeFloatLE=g?a:s,"full"==t&&(i.readFloatBE=g?n:r),i.writeFloatBE=g?s:a,i.readDoubleLE=g?l:o,i.writeDoubleLE=g?c:h,i.readDoubleBE=g?o:l,i.writeDoubleBE=g?h:c):(i._usingFloatArray="",i.readFloatLE=function(t,e){return i.readFloat(t,e||0,"le")},i.writeFloatLE=function(t,e,n){i.writeFloat(t,e,n||0,"le")},i.readFloatBE=function(t,e){return i.readFloat(t,e||0,"bige")},i.writeFloatBE=function(t,e,n){i.writeFloat(t,e,n||0,"bige")},i.readDoubleLE=function(t,e){return i.readDouble(t,e||0,"le")},i.writeDoubleLE=function(t,e,n){i.writeDouble(t,e,n||0,"le")},i.readDoubleBE=function(t,e){return i.readDouble(t,e||0,"bige")},i.writeDoubleBE=function(t,e,n){i.writeDouble(t,e,n||0,"bige")})},i._getBigeCpu=function(){return g},i._setBigeCpu=function(t){g=t},i._useFloatArray(!1),i._useFloatArray(n&&o&&"fastest"),e.prototype=i}).call(this)},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(13),r=n(i(36));class a extends r.default{deserialize(t){return s.base58_encode(super.deserialize(t))}serialize(t){return super.serialize(s.base58_decode(t))}}e.default=a},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=n(i(36));class r extends s.default{deserialize(t){return(new TextDecoder).decode(super.deserialize(t))}serialize(t){return super.serialize((new TextEncoder).encode(t))}}e.default=r},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=n(i(31)),r=n(i(23)),a=n(i(21)),o=i(13);e.default=class{constructor(t,e){this.size=t,this.unsigned=e}deserialize(t){let e=o.varint_decode(t);if(this.unsigned||(e=o.zigzag_decode(e)),e.greaterOrEquals(s.default(2).pow(8*this.size-(this.unsigned?0:1))))throw new r.default("number '"+e.toString()+"' too large for given type");return this.size<=6?e.toJSNumber():e.toString()}serialize(t){let e=s.default(t);if(e.greaterOrEquals(s.default(2).pow(8*this.size-(this.unsigned?0:1))))throw new a.default("number '"+e.toString()+"' too large for given type");return this.unsigned||(e=o.zigzag_encode(e)),o.varint_encode(e)}}},function(t,e,i){"use strict";var n=i(107),s={"user-agent":"ipapi/ipapi-nodejs/0.3"},r=["ip","city","region","country","postal","latitude","longitude","timezone","latlong"];t.exports={location:function(t,e,i,a){var o,h=!1;if("function"!=typeof t)return"Callback function is required";if(void 0!==a&&""!==a){if(-1===r.indexOf(a))return"Invalid field";h=!0}o=h?void 0!==e?"/"+e+"/"+a+"/":"/"+a+"/":void 0!==e?"/"+e+"/json/":"/json/",void 0!==i&&""!==i&&(o=o+"?key="+i),function(t,e,i){var r={host:"ipapi.co",path:t,headers:s};n.get(r,(function(t){var n="";t.on("data",(function(t){n+=t})),t.on("end",(function(){if(i){var t=JSON.parse(n);e(t)}else{e(t=n)}}))})).on("error",(function(t){e(new Error(t))}))}(o,t,!h)}}},function(t,e,i){var n=i(108),s=i(64),r=t.exports;for(var a in n)n.hasOwnProperty(a)&&(r[a]=n[a]);function o(t){if("string"==typeof t&&(t=s.parse(t)),t.protocol||(t.protocol="https:"),"https:"!==t.protocol)throw new Error('Protocol "'+t.protocol+'" not supported. Expected "https:"');return t}r.request=function(t,e){return t=o(t),n.request.call(this,t,e)},r.get=function(t,e){return t=o(t),n.get.call(this,t,e)}},function(t,e,i){(function(t){var n=i(109),s=i(55),r=i(120),a=i(121),o=i(64),h=e;h.request=function(e,i){e="string"==typeof e?o.parse(e):r(e);var s=-1===t.location.protocol.search(/^https?:$/)?"http:":"",a=e.protocol||s,h=e.hostname||e.host,l=e.port,c=e.path||"/";h&&-1!==h.indexOf(":")&&(h="["+h+"]"),e.url=(h?a+"//"+h:"")+(l?":"+l:"")+c,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var u=new n(e);return i&&u.on("response",i),u},h.get=function(t,e){var i=h.request(t,e);return i.end(),i},h.ClientRequest=n,h.IncomingMessage=s.IncomingMessage,h.Agent=function(){},h.Agent.defaultMaxSockets=4,h.globalAgent=new h.Agent,h.STATUS_CODES=a,h.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,i(4))},function(t,e,i){(function(e,n,s){var r=i(54),a=i(12),o=i(55),h=i(56),l=i(119),c=o.IncomingMessage,u=o.readyStates;var d=t.exports=function(t){var i,n=this;h.Writable.call(n),n._opts=t,n._body=[],n._headers={},t.auth&&n.setHeader("Authorization","Basic "+new e(t.auth).toString("base64")),Object.keys(t.headers).forEach((function(e){n.setHeader(e,t.headers[e])}));var s=!0;if("disable-fetch"===t.mode||"requestTimeout"in t&&!r.abortController)s=!1,i=!0;else if("prefer-streaming"===t.mode)i=!1;else if("allow-wrong-content-type"===t.mode)i=!r.overrideMimeType;else{if(t.mode&&"default"!==t.mode&&"prefer-fast"!==t.mode)throw new Error("Invalid value for opts.mode");i=!0}n._mode=function(t,e){return r.fetch&&e?"fetch":r.mozchunkedarraybuffer?"moz-chunked-arraybuffer":r.msstream?"ms-stream":r.arraybuffer&&t?"arraybuffer":r.vbArray&&t?"text:vbarray":"text"}(i,s),n._fetchTimer=null,n.on("finish",(function(){n._onFinish()}))};a(d,h.Writable),d.prototype.setHeader=function(t,e){var i=t.toLowerCase();-1===f.indexOf(i)&&(this._headers[i]={name:t,value:e})},d.prototype.getHeader=function(t){var e=this._headers[t.toLowerCase()];return e?e.value:null},d.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},d.prototype._onFinish=function(){var t=this;if(!t._destroyed){var i=t._opts,a=t._headers,o=null;"GET"!==i.method&&"HEAD"!==i.method&&(o=r.arraybuffer?l(e.concat(t._body)):r.blobConstructor?new n.Blob(t._body.map((function(t){return l(t)})),{type:(a["content-type"]||{}).value||""}):e.concat(t._body).toString());var h=[];if(Object.keys(a).forEach((function(t){var e=a[t].name,i=a[t].value;Array.isArray(i)?i.forEach((function(t){h.push([e,t])})):h.push([e,i])})),"fetch"===t._mode){var c=null;if(r.abortController){var d=new AbortController;c=d.signal,t._fetchAbortController=d,"requestTimeout"in i&&0!==i.requestTimeout&&(t._fetchTimer=n.setTimeout((function(){t.emit("requestTimeout"),t._fetchAbortController&&t._fetchAbortController.abort()}),i.requestTimeout))}n.fetch(t._opts.url,{method:t._opts.method,headers:h,body:o||void 0,mode:"cors",credentials:i.withCredentials?"include":"same-origin",signal:c}).then((function(e){t._fetchResponse=e,t._connect()}),(function(e){n.clearTimeout(t._fetchTimer),t._destroyed||t.emit("error",e)}))}else{var f=t._xhr=new n.XMLHttpRequest;try{f.open(t._opts.method,t._opts.url,!0)}catch(e){return void s.nextTick((function(){t.emit("error",e)}))}"responseType"in f&&(f.responseType=t._mode.split(":")[0]),"withCredentials"in f&&(f.withCredentials=!!i.withCredentials),"text"===t._mode&&"overrideMimeType"in f&&f.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in i&&(f.timeout=i.requestTimeout,f.ontimeout=function(){t.emit("requestTimeout")}),h.forEach((function(t){f.setRequestHeader(t[0],t[1])})),t._response=null,f.onreadystatechange=function(){switch(f.readyState){case u.LOADING:case u.DONE:t._onXHRProgress()}},"moz-chunked-arraybuffer"===t._mode&&(f.onprogress=function(){t._onXHRProgress()}),f.onerror=function(){t._destroyed||t.emit("error",new Error("XHR error"))};try{f.send(o)}catch(e){return void s.nextTick((function(){t.emit("error",e)}))}}}},d.prototype._onXHRProgress=function(){(function(t){try{var e=t.status;return null!==e&&0!==e}catch(t){return!1}})(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},d.prototype._connect=function(){var t=this;t._destroyed||(t._response=new c(t._xhr,t._fetchResponse,t._mode,t._fetchTimer),t._response.on("error",(function(e){t.emit("error",e)})),t.emit("response",t._response))},d.prototype._write=function(t,e,i){this._body.push(t),i()},d.prototype.abort=d.prototype.destroy=function(){this._destroyed=!0,n.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},d.prototype.end=function(t,e,i){"function"==typeof t&&(i=t,t=void 0),h.Writable.prototype.end.call(this,t,e,i)},d.prototype.flushHeaders=function(){},d.prototype.setTimeout=function(){},d.prototype.setNoDelay=function(){},d.prototype.setSocketKeepAlive=function(){};var f=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,i(19).Buffer,i(4),i(14))},function(t,e,i){"use strict";e.byteLength=function(t){var e=l(t),i=e[0],n=e[1];return 3*(i+n)/4-n},e.toByteArray=function(t){var e,i,n=l(t),a=n[0],o=n[1],h=new r(function(t,e,i){return 3*(e+i)/4-i}(0,a,o)),c=0,u=o>0?a-4:a;for(i=0;i<u;i+=4)e=s[t.charCodeAt(i)]<<18|s[t.charCodeAt(i+1)]<<12|s[t.charCodeAt(i+2)]<<6|s[t.charCodeAt(i+3)],h[c++]=e>>16&255,h[c++]=e>>8&255,h[c++]=255&e;2===o&&(e=s[t.charCodeAt(i)]<<2|s[t.charCodeAt(i+1)]>>4,h[c++]=255&e);1===o&&(e=s[t.charCodeAt(i)]<<10|s[t.charCodeAt(i+1)]<<4|s[t.charCodeAt(i+2)]>>2,h[c++]=e>>8&255,h[c++]=255&e);return h},e.fromByteArray=function(t){for(var e,i=t.length,s=i%3,r=[],a=0,o=i-s;a<o;a+=16383)r.push(c(t,a,a+16383>o?o:a+16383));1===s?(e=t[i-1],r.push(n[e>>2]+n[e<<4&63]+"==")):2===s&&(e=(t[i-2]<<8)+t[i-1],r.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return r.join("")};for(var n=[],s=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,h=a.length;o<h;++o)n[o]=a[o],s[a.charCodeAt(o)]=o;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function c(t,e,i){for(var s,r,a=[],o=e;o<i;o+=3)s=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),a.push(n[(r=s)>>18&63]+n[r>>12&63]+n[r>>6&63]+n[63&r]);return a.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,i,n,s){var r,a,o=8*s-n-1,h=(1<<o)-1,l=h>>1,c=-7,u=i?s-1:0,d=i?-1:1,f=t[e+u];for(u+=d,r=f&(1<<-c)-1,f>>=-c,c+=o;c>0;r=256*r+t[e+u],u+=d,c-=8);for(a=r&(1<<-c)-1,r>>=-c,c+=n;c>0;a=256*a+t[e+u],u+=d,c-=8);if(0===r)r=1-l;else{if(r===h)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,n),r-=l}return(f?-1:1)*a*Math.pow(2,r-n)},e.write=function(t,e,i,n,s,r){var a,o,h,l=8*r-s-1,c=(1<<l)-1,u=c>>1,d=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:r-1,p=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-a))<1&&(a--,h*=2),(e+=a+u>=1?d/h:d*Math.pow(2,1-u))*h>=2&&(a++,h/=2),a+u>=c?(o=0,a=c):a+u>=1?(o=(e*h-1)*Math.pow(2,s),a+=u):(o=e*Math.pow(2,u-1)*Math.pow(2,s),a=0));s>=8;t[i+f]=255&o,f+=p,o/=256,s-=8);for(a=a<<s|o,l+=s;l>0;t[i+f]=255&a,f+=p,a/=256,l-=8);t[i+f-p]|=128*g}},function(t,e){},function(t,e,i){"use strict";var n=i(25).Buffer,s=i(114);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i},t.prototype.concat=function(t){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var e,i,s,r=n.allocUnsafe(t>>>0),a=this.head,o=0;a;)e=a.data,i=r,s=o,e.copy(i,s),o+=a.data.length,a=a.next;return r},t}(),s&&s.inspect&&s.inspect.custom&&(t.exports.prototype[s.inspect.custom]=function(){var t=s.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,i){(function(t){var n=void 0!==t&&t||"undefined"!=typeof self&&self||window,s=Function.prototype.apply;function r(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new r(s.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new r(s.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},i(116),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,i(4))},function(t,e,i){(function(t,e){!function(t,i){"use strict";if(!t.setImmediate){var n,s,r,a,o,h=1,l={},c=!1,u=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick((function(){p(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}()?t.MessageChannel?((r=new MessageChannel).port1.onmessage=function(t){p(t.data)},n=function(t){r.port2.postMessage(t)}):u&&"onreadystatechange"in u.createElement("script")?(s=u.documentElement,n=function(t){var e=u.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,s.removeChild(e),e=null},s.appendChild(e)}):n=function(t){setTimeout(p,0,t)}:(a="setImmediate$"+Math.random()+"$",o=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&p(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",o,!1):t.attachEvent("onmessage",o),n=function(e){t.postMessage(a+e,"*")}),d.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var s={callback:t,args:e};return l[h]=s,n(h),h++},d.clearImmediate=f}function f(t){delete l[t]}function p(t){if(c)setTimeout(p,0,t);else{var e=l[t];if(e){c=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(void 0,i)}}(e)}finally{f(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,i(4),i(14))},function(t,e,i){(function(e){function i(t){try{if(!e.localStorage)return!1}catch(t){return!1}var i=e.localStorage[t];return null!=i&&"true"===String(i).toLowerCase()}t.exports=function(t,e){if(i("noDeprecation"))return t;var n=!1;return function(){if(!n){if(i("throwDeprecation"))throw new Error(e);i("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}}).call(this,i(4))},function(t,e,i){"use strict";t.exports=r;var n=i(63),s=i(20);function r(t){if(!(this instanceof r))return new r(t);n.call(this,t)}s.inherits=i(12),s.inherits(r,n),r.prototype._transform=function(t,e,i){i(null,t)}},function(t,e,i){var n=i(19).Buffer;t.exports=function(t){if(t instanceof Uint8Array){if(0===t.byteOffset&&t.byteLength===t.buffer.byteLength)return t.buffer;if("function"==typeof t.buffer.slice)return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}if(n.isBuffer(t)){for(var e=new Uint8Array(t.length),i=t.length,s=0;s<i;s++)e[s]=t[s];return e.buffer}throw new Error("Argument must be a Buffer")}},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var s in n)i.call(n,s)&&(t[s]=n[s])}return t};var i=Object.prototype.hasOwnProperty},function(t,e){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(t,e,i){(function(t,n){var s;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(r){e&&e.nodeType,t&&t.nodeType;var a="object"==typeof n&&n;a.global!==a&&a.window!==a&&a.self;var o,h=2147483647,l=/^xn--/,c=/[^\x20-\x7E]/,u=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,p=String.fromCharCode;function g(t){throw new RangeError(d[t])}function m(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function v(t,e){var i=t.split("@"),n="";return i.length>1&&(n=i[0]+"@",t=i[1]),n+m((t=t.replace(u,".")).split("."),e).join(".")}function y(t){for(var e,i,n=[],s=0,r=t.length;s<r;)(e=t.charCodeAt(s++))>=55296&&e<=56319&&s<r?56320==(64512&(i=t.charCodeAt(s++)))?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),s--):n.push(e);return n}function _(t){return m(t,(function(t){var e="";return t>65535&&(e+=p((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=p(t)})).join("")}function x(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function w(t,e,i){var n=0;for(t=i?f(t/700):t>>1,t+=f(t/e);t>455;n+=36)t=f(t/35);return f(n+36*t/(t+38))}function b(t){var e,i,n,s,r,a,o,l,c,u,d,p=[],m=t.length,v=0,y=128,x=72;for((i=t.lastIndexOf("-"))<0&&(i=0),n=0;n<i;++n)t.charCodeAt(n)>=128&&g("not-basic"),p.push(t.charCodeAt(n));for(s=i>0?i+1:0;s<m;){for(r=v,a=1,o=36;s>=m&&g("invalid-input"),((l=(d=t.charCodeAt(s++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:36)>=36||l>f((h-v)/a))&&g("overflow"),v+=l*a,!(l<(c=o<=x?1:o>=x+26?26:o-x));o+=36)a>f(h/(u=36-c))&&g("overflow"),a*=u;x=w(v-r,e=p.length+1,0==r),f(v/e)>h-y&&g("overflow"),y+=f(v/e),v%=e,p.splice(v++,0,y)}return _(p)}function E(t){var e,i,n,s,r,a,o,l,c,u,d,m,v,_,b,E=[];for(m=(t=y(t)).length,e=128,i=0,r=72,a=0;a<m;++a)(d=t[a])<128&&E.push(p(d));for(n=s=E.length,s&&E.push("-");n<m;){for(o=h,a=0;a<m;++a)(d=t[a])>=e&&d<o&&(o=d);for(o-e>f((h-i)/(v=n+1))&&g("overflow"),i+=(o-e)*v,e=o,a=0;a<m;++a)if((d=t[a])<e&&++i>h&&g("overflow"),d==e){for(l=i,c=36;!(l<(u=c<=r?1:c>=r+26?26:c-r));c+=36)b=l-u,_=36-u,E.push(p(x(u+b%_,0))),l=f(b/_);E.push(p(x(l,0))),r=w(i,v,n==s),i=0,++n}++i,++e}return E.join("")}o={version:"1.4.1",ucs2:{decode:y,encode:_},decode:b,encode:E,toASCII:function(t){return v(t,(function(t){return c.test(t)?"xn--"+E(t):t}))},toUnicode:function(t){return v(t,(function(t){return l.test(t)?b(t.slice(4).toLowerCase()):t}))}},void 0===(s=function(){return o}.call(e,i,e,t))||(t.exports=s)}()}).call(this,i(51)(t),i(4))},function(t,e,i){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,i){"use strict";e.decode=e.parse=i(125),e.encode=e.stringify=i(126)},function(t,e,i){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,i,r){e=e||"&",i=i||"=";var a={};if("string"!=typeof t||0===t.length)return a;var o=/\+/g;t=t.split(e);var h=1e3;r&&"number"==typeof r.maxKeys&&(h=r.maxKeys);var l=t.length;h>0&&l>h&&(l=h);for(var c=0;c<l;++c){var u,d,f,p,g=t[c].replace(o,"%20"),m=g.indexOf(i);m>=0?(u=g.substr(0,m),d=g.substr(m+1)):(u=g,d=""),f=decodeURIComponent(u),p=decodeURIComponent(d),n(a,f)?s(a[f])?a[f].push(p):a[f]=[a[f],p]:a[f]=p}return a};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,i){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,i,o){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?r(a(t),(function(a){var o=encodeURIComponent(n(a))+i;return s(t[a])?r(t[a],(function(t){return o+encodeURIComponent(n(t))})).join(e):o+encodeURIComponent(n(t[a]))})).join(e):o?encodeURIComponent(n(o))+i+encodeURIComponent(n(t)):""};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function r(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var a=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(1),o=i(0),h=r(i(5)),l=function(t){function e(e){var i=t.call(this,e)||this;if(i.x=a.GameConstants.GAME_WIDTH/2,i.scaleX=o.GameVars.scaleX,i.tweeningTimeLabel=!1,i.scoreLabel=new Phaser.GameObjects.BitmapText(i.scene,0,42,"supercell-gold","0",50),i.scoreLabel.setOrigin(.5),i.add(i.scoreLabel),a.GameConstants.DEVELOPMENT?(i.ticksLabel=new Phaser.GameObjects.Text(i.scene,a.GameConstants.GAME_WIDTH/2-20,a.GameConstants.GAME_HEIGHT-20,"0",{fontFamily:"Arial",fontSize:"20px",color:"#FFFFFF"}),i.ticksLabel.setOrigin(1,.5),i.add(i.ticksLabel)):i.ticksLabel=null,o.GameVars.testingLevel){var n=new Phaser.GameObjects.Text(i.scene,-a.GameConstants.GAME_WIDTH/2+20,a.GameConstants.GAME_HEIGHT-20,"TESTING LEVEL",{fontFamily:"Arial",fontSize:"22px",color:"#CCCCCC"});n.setOrigin(0,.5),i.add(n),i.scene.tweens.add({targets:n,alpha:.25,ease:Phaser.Math.Easing.Cubic.Out,duration:600,yoyo:!0,repeat:-1})}return i}return s(e,t),e.prototype.update=function(){if(this.scoreLabel.text=o.GameVars.formatNumber(o.GameVars.mazeEngine.score),this.timeLabel){var t=o.GameVars.testingLevel?o.GameVars.levelData:h.SDK.levelData,e=Math.ceil((t.gameOverOptions.time-o.GameVars.mazeEngine.tick)/60);this.timeLabel.text=e.toString();var i=void 0;i=e>99?20:e>9?25:30,this.timeLabel.setFontSize(i),e<10&&!this.tweeningTimeLabel&&(this.tweeningTimeLabel=!0,this.tweenTimeLabelUp())}this.lifesLabel&&(this.lifesLabel.text=o.GameVars.mazeEngine.lifes.toString()),this.ticksLabel&&(this.ticksLabel.text=o.GameVars.mazeEngine.tick.toString())},e.prototype.startGame=function(){var t=o.GameVars.testingLevel?o.GameVars.levelData:h.SDK.levelData;if(0!==t.gameOverOptions.time){var e=new Phaser.GameObjects.Image(this.scene,a.GameConstants.GAME_WIDTH/2/o.GameVars.scaleX-85,0,"texture_atlas_1","tab_time");e.setOrigin(.5,0),this.add(e);var i=t.gameOverOptions.time/60;this.timeLabel=new Phaser.GameObjects.BitmapText(this.scene,e.x+16,24,"supercell-white",i.toString(),30),this.timeLabel.setOrigin(1,.5),this.add(this.timeLabel)}else this.timeLabel=null;if(0!==t.gameOverOptions.lifes){var n=new Phaser.GameObjects.Image(this.scene,a.GameConstants.GAME_WIDTH/2/o.GameVars.scaleX-170,0,"texture_atlas_1","tab_lifes");n.setOrigin(.5,0),this.add(n);var s=t.gameOverOptions.lifes;this.lifesLabel=new Phaser.GameObjects.BitmapText(this.scene,n.x-14,28,"supercell-white",s.toString(),28),this.lifesLabel.setOrigin(.5),this.add(this.lifesLabel)}else this.lifesLabel=null},e.prototype.tweenTimeLabelUp=function(){this.scene.tweens.add({targets:this.timeLabel,scaleX:1.1,scaleY:1.1,ease:Phaser.Math.Easing.Cubic.Out,duration:250,onComplete:this.tweenTimeLabelDown,onCompleteScope:this})},e.prototype.tweenTimeLabelDown=function(){this.scene.tweens.add({targets:this.timeLabel,scaleX:1,scaleY:1,ease:Phaser.Math.Easing.Cubic.Out,duration:700,onComplete:this.tweenTimeLabelUp,onCompleteScope:this})},e}(Phaser.GameObjects.Container);e.HUD=l},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(6),o=i(0),h=i(1),l=i(8),c=i(16),u=r(i(5)),d=i(37),f=function(t){function e(e){var i=t.call(this,e)||this;if(i.x=h.GameConstants.GAME_WIDTH/2,i.scaleX=o.GameVars.scaleX,u.SDK.replayMode){var n=new d.AudioButtonContainer(i.scene);n.setPosition(-h.GameConstants.GAME_WIDTH/2+50,50),i.add(n)}else i.backButton=new a.Button(i.scene,-h.GameConstants.GAME_WIDTH/2+50,50,"texture_atlas_1","btn_menu_off","btn_menu_on"),i.backButton.onDown(i.onClickBack,i),i.add(i.backButton);if(h.GameConstants.DEVELOPMENT){var s=new a.Button(i.scene,h.GameConstants.GAME_WIDTH/2-40,h.GameConstants.GAME_HEIGHT-60,"texture_atlas_1","btn_menu_off","btn_menu_on");s.onDown(i.onClickReset,i),s.setScale(.65),i.add(s)}return i}return s(e,t),e.prototype.onGamePaused=function(){this.backButton.visible=!1},e.prototype.onGameResumed=function(){this.backButton.visible=!0},e.prototype.onClickBack=function(){o.GameVars.testingLevel?l.GameManager.enterLevelEditionScene():c.BoardManager.currentInstance.pauseGame()},e.prototype.onClickReset=function(){l.GameManager.resetGame()},e.prototype.onClickFrightened=function(){c.BoardManager.currentInstance.forceFrightenedState()},e}(Phaser.GameObjects.Container);e.GUI=f},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(9),o=r(i(2)),h=function(t){function e(e,i){var n=t.call(this,e)||this;switch(n.ghost=i,n.blinking=!1,n.f=0,n.justSpawned=!0,n.ghost.type){case o.GhostType.BLINKY:n.haloTintColor=13837823;break;case o.GhostType.PINKY:n.haloTintColor=16730031;break;case o.GhostType.INKY:n.haloTintColor=65343;break;case o.GhostType.CLYDE:n.haloTintColor=16747008}return n.halo=new Phaser.GameObjects.Image(n.scene,0,0,"texture_atlas_1","portal_halo"),n.halo.setOrigin(.5,.55),n.halo.tint=n.haloTintColor,n.halo.setScale(1,.95),n.halo.alpha=.8,n.add(n.halo),n.ghostSprite=new Phaser.GameObjects.Sprite(n.scene,0,0,"texture_atlas_1","ghost_green_01"),n.ghostSprite.setOrigin(.5,.62),n.scene.add.existing(n.ghostSprite),n.ghostSprite.play(n.ghost.type),n.add(n.ghostSprite),n.frightenedGhostSprite=new Phaser.GameObjects.Sprite(n.scene,0,0,"texture_atlas_1","ghost_scared_01"),n.frightenedGhostSprite.setOrigin(.5,.62),n.scene.add.existing(n.frightenedGhostSprite),n.frightenedGhostSprite.play("frightened"),n.add(n.frightenedGhostSprite),n.x=n.ghost.initialPosition.x*a.BoardContainer.CELLS_SIZE,n.y=n.ghost.initialPosition.y*a.BoardContainer.CELLS_SIZE,n.alpha=0,n.scene.tweens.add({targets:n,alpha:1,ease:Phaser.Math.Easing.Cubic.Out,duration:300,delay:150,onComplete:function(){this.justSpawned=!1},onCompleteScope:n}),n}return s(e,t),e.prototype.update=function(){var t=.4*(this.ghost.position.x*a.BoardContainer.CELLS_SIZE-this.x),e=.4*(this.ghost.position.y*a.BoardContainer.CELLS_SIZE-this.y);this.x+=t,this.y+=e,this.ghost.state===o.GhostState.FRIGHTENED?(this.ghostSprite.visible=!1,this.frightenedGhostSprite.visible=!0,this.blinking?(this.f++,5===this.f&&(this.f=0,this.alpha=.5===this.alpha?1:.5)):this.alpha=1):(this.ghostSprite.visible=!0,this.frightenedGhostSprite.visible=!1,this.justSpawned||(this.alpha=1)),this.ghost.dir===o.Direction.RIGHT?(this.ghostSprite.scaleX=-1,this.frightenedGhostSprite.scaleX=-1):this.ghost.dir===o.Direction.LEFT&&(this.ghostSprite.scaleX=1,this.frightenedGhostSprite.scaleX=1)},e}(Phaser.GameObjects.Container);e.GhostActor=h},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(0),o=i(9),h=r(i(2)),l=function(t){function e(e){var i=t.call(this,e)||this;i.cellGraphics=new Phaser.GameObjects.Graphics(i.scene),i.add(i.cellGraphics);for(var n=a.GameVars.mazeEngine.board,s=a.GameVars.mazeEngine.c,r=a.GameVars.mazeEngine.r,l=0;l<s;l++)for(var c=0;c<r;c++){var u=l*o.BoardContainer.CELLS_SIZE,d=c*o.BoardContainer.CELLS_SIZE;n[l][c]===h.Cells.PATH?i.cellGraphics.fillStyle(16777215):n[l][c]===h.Cells.WALL?i.cellGraphics.fillStyle(16711680):n[l][c]===h.Cells.GROUND&&i.cellGraphics.fillStyle(65280),i.cellGraphics.fillPoint(u,d,4)}return i.targetPointGraphics=new Phaser.GameObjects.Graphics(i.scene),i.add(i.targetPointGraphics),i}return s(e,t),e.prototype.update=function(){},e.prototype.drawPoint=function(t,e){this.cellGraphics.fillStyle(16776960),this.cellGraphics.fillPoint(t,e,1)},e}(Phaser.GameObjects.Container);e.DebugContainer=l},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(0),o=i(9),h=i(1),l=r(i(2)),c=function(t){function e(e){var i=t.call(this,e)||this;i.firstHitSinglePortal=!1,i.harmContainer=new Phaser.GameObjects.Container(i.scene),i.harmContainer.visible=!1,i.add(i.harmContainer),i.harmContainer.x=h.GameConstants.GAME_WIDTH/2,i.harmContainer.y=h.GameConstants.GAME_HEIGHT/2-o.BoardContainer.CONTAINER_DY;var n=new Phaser.GameObjects.Image(i.scene,0,0,"texture_atlas_1","harm_quadrant");return n.setOrigin(1,1),i.harmContainer.add(n),(n=new Phaser.GameObjects.Image(i.scene,0,0,"texture_atlas_1","harm_quadrant")).setOrigin(1,1),n.scaleX=-1,i.harmContainer.add(n),(n=new Phaser.GameObjects.Image(i.scene,0,0,"texture_atlas_1","harm_quadrant")).setOrigin(1,1),n.scaleY=-1,i.harmContainer.add(n),(n=new Phaser.GameObjects.Image(i.scene,0,0,"texture_atlas_1","harm_quadrant")).setOrigin(1,1),n.scaleX=-1,n.scaleY=-1,i.harmContainer.add(n),i}return s(e,t),e.prototype.update=function(){if(this.firstHitSinglePortal){var t=a.GameVars.mazeEngine.playerManager.player.position.x,e=a.GameVars.mazeEngine.playerManager.player.position.y,i=Math.round(t),n=Math.round(e);i===this.singlePortalPosition.c&&n===this.singlePortalPosition.r||(this.firstHitSinglePortal=!1,this.singlePortalPosition=null)}},e.prototype.onGhostEaten=function(t,e){var i=new Phaser.GameObjects.Sprite(this.scene,t.x,t.y,"texture_atlas_1","death_fx_green_01");this.scene.add.existing(i),i.play("explosion_"+t.ghost.type),this.add(i),i.once(Phaser.Animations.Events.ANIMATION_COMPLETE,(function(){i.destroy()}));var n=l.Engine.POINTS_GHOST*e,s=new Phaser.GameObjects.BitmapText(this.scene,t.x,t.y,"supercell-gold",a.GameVars.formatNumber(n),17);s.originX=.5,s.originY=.5,s.scaleY=0,this.add(s),this.scene.tweens.add({targets:s,scaleY:1,ease:Phaser.Math.Easing.Elastic.Out,duration:500,onComplete:function(){this.scene.tweens.add({targets:s,scaleX:0,scaleY:0,ease:Phaser.Math.Easing.Cubic.In,duration:300,onComplete:function(){s.destroy()},onCompleteScope:this})},onCompleteScope:this})},e.prototype.onDotEaten=function(t){var e=t.c*o.BoardContainer.CELLS_SIZE,i=t.r*o.BoardContainer.CELLS_SIZE-.2*o.BoardContainer.CELLS_SIZE,n=new Phaser.GameObjects.Sprite(this.scene,e,i,"texture_atlas_1","fx_catch_pill_01");this.scene.add.existing(n),n.play("dot_fx"),this.add(n),n.once(Phaser.Animations.Events.ANIMATION_COMPLETE,(function(){n.destroy()}))},e.prototype.onPlayerHitSinglePortal=function(t,e){this.firstHitSinglePortal||(this.firstHitSinglePortal=!0,this.singlePortalPosition=e,this.onPlayerTeleported(t,e,!0))},e.prototype.onPlayerTeleported=function(t,e,i){var n,s=e.c*o.BoardContainer.CELLS_SIZE,r=e.r*o.BoardContainer.CELLS_SIZE;switch(t){case l.Cells.PORTAL_1:n=15138881;break;case l.Cells.PORTAL_2:n=10158079;break;case l.Cells.PORTAL_3:n=16774656;break;case l.Cells.PORTAL_4:n=10086144}var a=new Phaser.GameObjects.Image(this.scene,s,r-.15*o.BoardContainer.CELLS_SIZE,"texture_atlas_1","portal_halo");a.tint=n,a.setScale(i?1.15:2),this.add(a),this.scene.tweens.add({targets:a,scaleX:1,scaleY:1,alpha:0,ease:Phaser.Math.Easing.Cubic.In,duration:i?150:300,onComplete:function(){a.destroy()},onCompleteScope:this});var h=new Phaser.GameObjects.Image(this.scene,s,r,"texture_atlas_1","portal_halo_vert");h.tint=n,h.setOrigin(.5,1),h.scaleY=i?1.15:2,this.add(h),this.scene.tweens.add({targets:h,scaleY:.1,ease:Phaser.Math.Easing.Cubic.In,duration:i?200:400,onComplete:function(){h.destroy()},onCompleteScope:this})},e.prototype.onGhostRespawned=function(t){var e=new Phaser.GameObjects.Sprite(this.scene,t.x,t.y,"texture_atlas_1","death_fx_green_01");this.scene.add.existing(e),e.anims.playReverse("explosion_"+t.ghost.type),this.add(e),e.once(Phaser.Animations.Events.ANIMATION_COMPLETE,(function(){e.destroy()}))},e.prototype.onPlayerHit=function(){this.harmContainer.visible=!0,this.harmContainer.alpha=1,this.harmContainer.setScale(1),this.scene.tweens.add({targets:this.harmContainer,scaleX:1.35,scaleY:1.35,ease:Phaser.Math.Easing.Cubic.Out,duration:1500,onComplete:function(){this.scene.tweens.add({targets:this.harmContainer,alpha:0,ease:Phaser.Math.Easing.Cubic.Out,duration:300,onComplete:function(){this.harmContainer.visible=!1},onCompleteScope:this})},onCompleteScope:this})},e}(Phaser.GameObjects.Container);e.FXContainer=c},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=r(i(2)),o=function(t){function e(e,i){var n,s=t.call(this,e)||this;switch(s.id=i,i){case a.Cells.PORTAL_1:n="portal_red";break;case a.Cells.PORTAL_2:n="portal_blue";break;case a.Cells.PORTAL_3:n="portal_yellow";break;case a.Cells.PORTAL_4:n="portal_green"}return s.portalSprite=new Phaser.GameObjects.Sprite(s.scene,0,0,"texture_atlas_1","portal_blue_01"),s.scene.add.existing(s.portalSprite),s.portalSprite.play(n),s.add(s.portalSprite),s}return s(e,t),e}(Phaser.GameObjects.Container);e.Portal=o},function(t,e,i){"use strict";var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var s=i(16),r=n(i(2)),a=function(){function t(t){t.game.device.input.touch?(this.cursors=null,t.rexGestures.add.swipe({enable:!0,bounds:void 0,threshold:10,velocityThreshold:1e3,dir:"4dir"}).on("swipe",(function(t){t.left&&s.BoardManager.currentInstance.changePlayerDirection(r.Direction.LEFT),t.right&&s.BoardManager.currentInstance.changePlayerDirection(r.Direction.RIGHT),t.up&&s.BoardManager.currentInstance.changePlayerDirection(r.Direction.UP),t.down&&s.BoardManager.currentInstance.changePlayerDirection(r.Direction.DOWN)}),this)):this.cursors=t.input.keyboard.createCursorKeys()}return t.prototype.update=function(){this.cursors&&(this.cursors.up.isDown?s.BoardManager.currentInstance.changePlayerDirection(r.Direction.UP):this.cursors.down.isDown?s.BoardManager.currentInstance.changePlayerDirection(r.Direction.DOWN):this.cursors.left.isDown?s.BoardManager.currentInstance.changePlayerDirection(r.Direction.LEFT):this.cursors.right.isDown&&s.BoardManager.currentInstance.changePlayerDirection(r.Direction.RIGHT))},t}();e.PlayerController=a},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(6),o=i(0),h=i(1),l=i(16),c=r(i(5)),u=i(37),d=function(t){function e(e){var i=t.call(this,e)||this,n=new Phaser.GameObjects.Graphics(i.scene);n.fillStyle(1321259,.5),n.fillRect(0,0,h.GameConstants.GAME_WIDTH,h.GameConstants.GAME_HEIGHT),i.add(n);var s=new a.Button(i.scene,55*o.GameVars.scaleX,55,"texture_atlas_1","btn_close_off","btn_close_on");s.onDown(i.onClickCloseButton,i),s.scaleX=o.GameVars.scaleX,i.add(s);var r=new Phaser.GameObjects.Container(i.scene);r.x=h.GameConstants.GAME_WIDTH/2,r.y=h.GameConstants.GAME_HEIGHT/2,r.scaleX=o.GameVars.scaleX,i.add(r);var l=new Phaser.GameObjects.Graphics(i.scene);l.fillGradientStyle(15067602,15067602,14276793,14276793,1),l.fillRect(-218,-238,436,476),r.add(l);var c=new Phaser.GameObjects.Text(i.scene,0,-195,"PAUSE",{fontFamily:"Supercell",fontSize:"40px",color:"#1d4858"});c.setOrigin(.5),r.add(c),i.container1=new Phaser.GameObjects.Container(i.scene),r.add(i.container1);var d=new u.AudioButtonContainer(i.scene);d.setPosition(0,-45),i.container1.add(d);var f=new a.Button(i.scene,0,110,"texture_atlas_1","btn_restart_off","btn_restart_on");f.onDown(i.onClickRestartButton,i),i.container1.add(f),i.container2=new Phaser.GameObjects.Container(i.scene),i.container2.visible=!1,r.add(i.container2);var p=new Phaser.GameObjects.Text(i.scene,0,-100,"YOU WILL LOSE YOUR\nPROGRESS AND ENTRY FEE",{fontFamily:"Supercell",align:"center",fontSize:"18px",color:"#d61347"});p.setOrigin(.5,0),i.container2.add(p);var g=new Phaser.GameObjects.Text(i.scene,0,10,"ARE YOU SURE?",{fontFamily:"Supercell",align:"center",fontSize:"18px",color:"#1d4858"});g.setOrigin(.5,0),i.container2.add(g);var m=new a.Button(i.scene,105,120,"texture_atlas_1","btn_restart_off","btn_restart_on");m.onDown(i.onClickConfirmRestartButton,i),i.container2.add(m);var v=new a.Button(i.scene,-m.x,m.y,"texture_atlas_1","btn_continue_off","btn_continue_on");return v.onDown(i.onClickCancelButton,i),i.container2.add(v),i}return s(e,t),e.prototype.onClickCloseButton=function(){l.BoardManager.currentInstance.resumeGame()},e.prototype.onClickRestartButton=function(){this.container1.visible=!1,this.container2.visible=!0},e.prototype.onClickCancelButton=function(){this.container1.visible=!0,this.container2.visible=!1},e.prototype.onClickConfirmRestartButton=function(){this.destroy(),c.SDK.onGameOver(o.GameVars.mazeEngine.score,!0)},e}(Phaser.GameObjects.Container);e.PauseLayer=d},function(t,e,i){"use strict";var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var s=i(0),r=i(26),a=i(16),o=i(9),h=n(i(2)),l=n(i(5)),c=function(){function t(){t.currentInstance=this,this.frozen=!1,this.f=0,this.i=0,this.nextDir=null,this.changeDirTick=null,s.GameVars.paused=!1;l.SDK.onReplayStart({position:"down",backgroundColor:1449038,gradient:"vertical",fontColor:"#CCCCCC"}),s.GameVars.mazeEngine=new h.Engine,s.GameVars.mazeEngine.init(l.SDK.landID,l.SDK.levelData),this.addEngineListeners(),r.BoardScene.currentInstance.startGame(),this.processAction()}return t.prototype.update=function(){this.frozen?(this.f++,this.f===a.BoardManager.FROZEN_FRAMES&&(this.f=0,this.frozen=!1)):(s.GameVars.mazeEngine.tick===this.changeDirTick&&(s.GameVars.mazeEngine.changePlayerDirection(this.nextDir),this.processAction()),s.GameVars.mazeEngine.update())},t.prototype.onFrightenedStateEntered=function(){s.GameVars.mazeEngine.playerManager.player.invulnerable||(o.BoardContainer.currentInstance.shake(),this.frozen=!0),r.BoardScene.currentInstance.onFrightenedStateEntered()},t.prototype.onContactWithInteractiveElement=function(t,e){t!==h.Cells.DOT&&t!==h.Cells.POWER_PELLET||l.SDK.onScoreUpdated(s.GameVars.mazeEngine.score),o.BoardContainer.currentInstance.onContactWithInteractiveElement(t,e)},t.prototype.onGhostEaten=function(t,e){o.BoardContainer.currentInstance.onGhostEaten(t,e)},t.prototype.onGhostSpawned=function(t){o.BoardContainer.currentInstance.onGhostSpawned(t)},t.prototype.onGameOver=function(){l.SDK.onReplayGameOver()},t.prototype.addEngineListeners=function(){s.GameVars.mazeEngine.addEventListener(h.Event.FRIGHTENED_STATE_ENTERED,this.onFrightenedStateEntered,this),s.GameVars.mazeEngine.addEventListener(h.Event.CONTACT_INTERACTIVE_ITEM,this.onContactWithInteractiveElement,this),s.GameVars.mazeEngine.addEventListener(h.Event.GHOST_EATEN,this.onGhostEaten,this),s.GameVars.mazeEngine.addEventListener(h.Event.GHOST_SPAWNED,this.onGhostSpawned,this),s.GameVars.mazeEngine.addEventListener(h.Event.GAME_OVER,this.onGameOver,this)},t.prototype.processAction=function(){if(this.i!==s.GameVars.actions.length){var t=s.GameVars.actions[this.i];switch(this.i++,t.type){case l.ActionType.START_GAME:case l.ActionType.CONFIG:this.processAction();break;case l.ActionType.SKIP_GAME:this.onGameOver();break;case h.ActionType.CHANGE_DIRECTION:var e=t.data;this.nextDir=e.dir,this.changeDirTick=e.tick-1;break;case l.ActionType.PURCHASE_BOOSTER:}}else l.SDK.onReplayGameOver()},t}();e.ReplayManager=c},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(8),o=i(40),h=i(1),l=i(0),c=r(i(5)),u=function(t){function e(){return t.call(this,"BootScene")||this}return s(e,t),e.onOrientationChange=function(){e.currentInstance.time.addEvent({delay:100,callback:function(){l.GameVars.scaleX=h.GameConstants.GAME_HEIGHT/h.GameConstants.GAME_WIDTH/(window.innerHeight/window.innerWidth),o.Game.currentInstance.scale.refresh()},callbackScope:e.currentInstance})},e.prototype.preload=function(){e.currentInstance=this,a.GameManager.setCurrentScene(this),this.load.image("rotate-device","assets/rotate-device.png"),c.SDK.loadPreloaderAssets("maze")},e.prototype.create=function(){e.currentInstance=this,a.GameManager.setCurrentScene(this),this.scene.setVisible(!1),l.GameVars.isDesktop=l.GameVars.currentScene.sys.game.device.os.desktop&&!(navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)),l.GameVars.isDesktop?a.GameManager.init():window.innerWidth<window.innerHeight?(document.getElementById("orientation").style.display="block",document.getElementById("content").style.display="none"):a.GameManager.init()},e}(Phaser.Scene);e.BootScene=u},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(8),o=r(i(5)),h=i(138),l=i(7),c=function(t){function e(){var i=t.call(this,"PreloadScene")||this;return e.currentInstance=i,i}return s(e,t),e.prototype.preload=function(){a.GameManager.setCurrentScene(this),this.composeScene(),this.loadAssets()},e.prototype.create=function(){var t=this.cache.json.get("audiosprite");t=JSON.parse(JSON.stringify(t).replace("urls","src")),t=JSON.parse(JSON.stringify(t).replace("../","")),t=JSON.parse(JSON.stringify(t).replace("../","")),l.AudioManager.howl=new h.Howl(t),l.AudioManager.howl.on("load",(function(){a.GameManager.onGameAssetsLoaded()}))},e.prototype.composeScene=function(){this.add.text(-100,-100,"abcdefg",{fontFamily:"Oswald-ExtraLight",fontSize:"26px",color:"#FFFF00"}),this.add.text(-100,-100,"abcdefg",{fontFamily:"Oswald-Medium",fontSize:"26px",color:"#FFFF00"}),this.add.text(-100,-100,"abcdefg",{fontFamily:"Supercell",fontSize:"26px",color:"#FFFF00"}),this.load.bitmapFont("supercell-gold","assets/fonts/supercell-gold.png","assets/fonts/supercell-gold.xml"),this.load.bitmapFont("supercell-white","assets/fonts/supercell-white.png","assets/fonts/supercell-white.xml")},e.prototype.loadAssets=function(){o.SDK.loadAssets(),this.load.atlas("texture_atlas_1","assets/texture_atlas_1.png","assets/texture_atlas_1.json"),this.load.json("audiosprite","assets/audio/audiosprite.json")},e}(Phaser.Scene);e.PreloadScene=c},function(t,e,i){(function(i){var n;
/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */!function(){"use strict";var s=function(){this.init()};s.prototype={init:function(){var t=this||r;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var e=this||r;if(t=parseFloat(t),e.ctx||f(),void 0!==t&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,r.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),s=0;s<n.length;s++){var a=e._howls[i]._soundById(n[s]);a&&a._node&&(a._node.volume=a._volume*t)}return e}return e._volume},mute:function(t){var e=this||r;e.ctx||f(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,r.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),s=0;s<n.length;s++){var a=e._howls[i]._soundById(n[s]);a&&a._node&&(a._node.muted=!!t||a._muted)}return e},stop:function(){for(var t=this||r,e=0;e<t._howls.length;e++)t._howls[e].stop();return t},unload:function(){for(var t=this||r,e=t._howls.length-1;e>=0;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,f()),t},codecs:function(t){return(this||r)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||r;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(t){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||r,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!e||"function"!=typeof e.canPlayType)return t;var i=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n=t._navigator?t._navigator.userAgent:"",s=n.match(/OPR\/([0-6].)/g),a=s&&parseInt(s[0].split("/")[1],10)<33,o=-1!==n.indexOf("Safari")&&-1===n.indexOf("Chrome"),h=n.match(/Version\/(.*?) /),l=o&&h&&parseInt(h[1],10)<15;return t._codecs={mp3:!(a||!i&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!i,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(e.canPlayType('audio/wav; codecs="1"')||e.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(e.canPlayType("audio/x-m4b;")||e.canPlayType("audio/m4b;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(l||!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(l||!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||r;if(!t._audioUnlocked&&t.ctx){t._audioUnlocked=!1,t.autoUnlock=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var e=function(i){for(;t._html5AudioPool.length<t.html5PoolSize;)try{var n=new Audio;n._unlocked=!0,t._releaseHtml5Audio(n)}catch(i){t.noAudio=!0;break}for(var s=0;s<t._howls.length;s++)if(!t._howls[s]._webAudio)for(var r=t._howls[s]._getSoundIds(),a=0;a<r.length;a++){var o=t._howls[s]._soundById(r[a]);o&&o._node&&!o._node._unlocked&&(o._node._unlocked=!0,o._node.load())}t._autoResume();var h=t.ctx.createBufferSource();h.buffer=t._scratchBuffer,h.connect(t.ctx.destination),void 0===h.start?h.noteOn(0):h.start(0),"function"==typeof t.ctx.resume&&t.ctx.resume(),h.onended=function(){h.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",e,!0),document.removeEventListener("touchend",e,!0),document.removeEventListener("click",e,!0),document.removeEventListener("keydown",e,!0);for(var i=0;i<t._howls.length;i++)t._howls[i]._emit("unlock")}};return document.addEventListener("touchstart",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("click",e,!0),document.addEventListener("keydown",e,!0),t}},_obtainHtml5Audio:function(){var t=this||r;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var e=(new Audio).play();return e&&"undefined"!=typeof Promise&&(e instanceof Promise||"function"==typeof e.then)&&e.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(t){var e=this||r;return t._unlocked&&e._html5AudioPool.push(t),e},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&r.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var i=0;i<t._howls[e]._sounds.length;i++)if(!t._howls[e]._sounds[i]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout((function(){if(t.autoSuspend){t._suspendTimer=null,t.state="suspending";var e=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())};t.ctx.suspend().then(e,e)}}),3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&r.usingWebAudio)return"running"===t.state&&"interrupted"!==t.ctx.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state||"running"===t.state&&"interrupted"===t.ctx.state?(t.ctx.resume().then((function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")})),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var r=new s,a=function(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")};a.prototype={init:function(t){var e=this;return r.ctx||f(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload&&"metadata"!==t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:!(!t.xhr||!t.xhr.withCredentials)&&t.xhr.withCredentials},e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onunlock=t.onunlock?[{fn:t.onunlock}]:[],e._onresume=[],e._webAudio=r.usingWebAudio&&!e._html5,void 0!==r.ctx&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&"none"!==e._preload&&e.load(),e},load:function(){var t=null;if(r.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var e=0;e<this._src.length;e++){var i,n;if(this._format&&this._format[e])i=this._format[e];else{if("string"!=typeof(n=this._src[e])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(i=/^data:audio\/([^;,]+);/i.exec(n))||(i=/\.([^.]+)$/.exec(n.split("?",1)[0])),i&&(i=i[1].toLowerCase())}if(i||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),i&&r.codecs(i)){t=this._src[e];break}}if(t)return this._src=t,this._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new o(this),this._webAudio&&l(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(t,e){var i=this,n=null;if("number"==typeof t)n=t,t=null;else{if("string"==typeof t&&"loaded"===i._state&&!i._sprite[t])return null;if(void 0===t&&(t="__default",!i._playLock)){for(var s=0,a=0;a<i._sounds.length;a++)i._sounds[a]._paused&&!i._sounds[a]._ended&&(s++,n=i._sounds[a]._id);1===s?t=null:n=null}}var o=n?i._soundById(n):i._inactiveSound();if(!o)return null;if(n&&!t&&(t=o._sprite||"__default"),"loaded"!==i._state){o._sprite=t,o._ended=!1;var h=o._id;return i._queue.push({event:"play",action:function(){i.play(h)}}),h}if(n&&!o._paused)return e||i._loadQueue("play"),o._id;i._webAudio&&r._autoResume();var l=Math.max(0,o._seek>0?o._seek:i._sprite[t][0]/1e3),c=Math.max(0,(i._sprite[t][0]+i._sprite[t][1])/1e3-l),u=1e3*c/Math.abs(o._rate),d=i._sprite[t][0]/1e3,f=(i._sprite[t][0]+i._sprite[t][1])/1e3;o._sprite=t,o._ended=!1;var p=function(){o._paused=!1,o._seek=l,o._start=d,o._stop=f,o._loop=!(!o._loop&&!i._sprite[t][2])};if(!(l>=f)){var g=o._node;if(i._webAudio){var m=function(){i._playLock=!1,p(),i._refreshBuffer(o);var t=o._muted||i._muted?0:o._volume;g.gain.setValueAtTime(t,r.ctx.currentTime),o._playStart=r.ctx.currentTime,void 0===g.bufferSource.start?o._loop?g.bufferSource.noteGrainOn(0,l,86400):g.bufferSource.noteGrainOn(0,l,c):o._loop?g.bufferSource.start(0,l,86400):g.bufferSource.start(0,l,c),u!==1/0&&(i._endTimers[o._id]=setTimeout(i._ended.bind(i,o),u)),e||setTimeout((function(){i._emit("play",o._id),i._loadQueue()}),0)};"running"===r.state&&"interrupted"!==r.ctx.state?m():(i._playLock=!0,i.once("resume",m),i._clearTimer(o._id))}else{var v=function(){g.currentTime=l,g.muted=o._muted||i._muted||r._muted||g.muted,g.volume=o._volume*r.volume(),g.playbackRate=o._rate;try{var n=g.play();if(n&&"undefined"!=typeof Promise&&(n instanceof Promise||"function"==typeof n.then)?(i._playLock=!0,p(),n.then((function(){i._playLock=!1,g._unlocked=!0,e?i._loadQueue():i._emit("play",o._id)})).catch((function(){i._playLock=!1,i._emit("playerror",o._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),o._ended=!0,o._paused=!0}))):e||(i._playLock=!1,p(),i._emit("play",o._id)),g.playbackRate=o._rate,g.paused)return void i._emit("playerror",o._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==t||o._loop?i._endTimers[o._id]=setTimeout(i._ended.bind(i,o),u):(i._endTimers[o._id]=function(){i._ended(o),g.removeEventListener("ended",i._endTimers[o._id],!1)},g.addEventListener("ended",i._endTimers[o._id],!1))}catch(t){i._emit("playerror",o._id,t)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===g.src&&(g.src=i._src,g.load());var y=window&&window.ejecta||!g.readyState&&r._navigator.isCocoonJS;if(g.readyState>=3||y)v();else{i._playLock=!0,i._state="loading";var _=function(){i._state="loaded",v(),g.removeEventListener(r._canPlayEvent,_,!1)};g.addEventListener(r._canPlayEvent,_,!1),i._clearTimer(o._id)}}return o._id}i._ended(o)},pause:function(t){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var i=e._getSoundIds(t),n=0;n<i.length;n++){e._clearTimer(i[n]);var s=e._soundById(i[n]);if(s&&!s._paused&&(s._seek=e.seek(i[n]),s._rateSeek=0,s._paused=!0,e._stopFade(i[n]),s._node))if(e._webAudio){if(!s._node.bufferSource)continue;void 0===s._node.bufferSource.stop?s._node.bufferSource.noteOff(0):s._node.bufferSource.stop(0),e._cleanBuffer(s._node)}else isNaN(s._node.duration)&&s._node.duration!==1/0||s._node.pause();arguments[1]||e._emit("pause",s?s._id:null)}return e},stop:function(t,e){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"stop",action:function(){i.stop(t)}}),i;for(var n=i._getSoundIds(t),s=0;s<n.length;s++){i._clearTimer(n[s]);var r=i._soundById(n[s]);r&&(r._seek=r._start||0,r._rateSeek=0,r._paused=!0,r._ended=!0,i._stopFade(n[s]),r._node&&(i._webAudio?r._node.bufferSource&&(void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),i._cleanBuffer(r._node)):isNaN(r._node.duration)&&r._node.duration!==1/0||(r._node.currentTime=r._start||0,r._node.pause(),r._node.duration===1/0&&i._clearSound(r._node))),e||i._emit("stop",r._id))}return i},mute:function(t,e){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"mute",action:function(){i.mute(t,e)}}),i;if(void 0===e){if("boolean"!=typeof t)return i._muted;i._muted=t}for(var n=i._getSoundIds(e),s=0;s<n.length;s++){var a=i._soundById(n[s]);a&&(a._muted=t,a._interval&&i._stopFade(a._id),i._webAudio&&a._node?a._node.gain.setValueAtTime(t?0:a._volume,r.ctx.currentTime):a._node&&(a._node.muted=!!r._muted||t),i._emit("mute",a._id))}return i},volume:function(){var t,e,i,n=this,s=arguments;if(0===s.length)return n._volume;if(1===s.length||2===s.length&&void 0===s[1]){var a=n._getSoundIds(),o=a.indexOf(s[0]);o>=0?e=parseInt(s[0],10):t=parseFloat(s[0])}else s.length>=2&&(t=parseFloat(s[0]),e=parseInt(s[1],10));if(!(void 0!==t&&t>=0&&t<=1))return(i=e?n._soundById(e):n._sounds[0])?i._volume:0;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"volume",action:function(){n.volume.apply(n,s)}}),n;void 0===e&&(n._volume=t),e=n._getSoundIds(e);for(var h=0;h<e.length;h++)(i=n._soundById(e[h]))&&(i._volume=t,s[2]||n._stopFade(e[h]),n._webAudio&&i._node&&!i._muted?i._node.gain.setValueAtTime(t,r.ctx.currentTime):i._node&&!i._muted&&(i._node.volume=t*r.volume()),n._emit("volume",i._id));return n},fade:function(t,e,i,n){var s=this;if("loaded"!==s._state||s._playLock)return s._queue.push({event:"fade",action:function(){s.fade(t,e,i,n)}}),s;t=Math.min(Math.max(0,parseFloat(t)),1),e=Math.min(Math.max(0,parseFloat(e)),1),i=parseFloat(i),s.volume(t,n);for(var a=s._getSoundIds(n),o=0;o<a.length;o++){var h=s._soundById(a[o]);if(h){if(n||s._stopFade(a[o]),s._webAudio&&!h._muted){var l=r.ctx.currentTime,c=l+i/1e3;h._volume=t,h._node.gain.setValueAtTime(t,l),h._node.gain.linearRampToValueAtTime(e,c)}s._startFadeInterval(h,t,e,i,a[o],void 0===n)}}return s},_startFadeInterval:function(t,e,i,n,s,r){var a=this,o=e,h=i-e,l=Math.abs(h/.01),c=Math.max(4,l>0?n/l:n),u=Date.now();t._fadeTo=i,t._interval=setInterval((function(){var s=(Date.now()-u)/n;u=Date.now(),o+=h*s,o=Math.round(100*o)/100,o=h<0?Math.max(i,o):Math.min(i,o),a._webAudio?t._volume=o:a.volume(o,t._id,!0),r&&(a._volume=o),(i<e&&o<=i||i>e&&o>=i)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,a.volume(i,t._id),a._emit("fade",t._id))}),c)},_stopFade:function(t){var e=this._soundById(t);return e&&e._interval&&(this._webAudio&&e._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(e._interval),e._interval=null,this.volume(e._fadeTo,t),e._fadeTo=null,this._emit("fade",t)),this},loop:function(){var t,e,i,n=this,s=arguments;if(0===s.length)return n._loop;if(1===s.length){if("boolean"!=typeof s[0])return!!(i=n._soundById(parseInt(s[0],10)))&&i._loop;t=s[0],n._loop=t}else 2===s.length&&(t=s[0],e=parseInt(s[1],10));for(var r=n._getSoundIds(e),a=0;a<r.length;a++)(i=n._soundById(r[a]))&&(i._loop=t,n._webAudio&&i._node&&i._node.bufferSource&&(i._node.bufferSource.loop=t,t&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop,n.playing(r[a])&&(n.pause(r[a],!0),n.play(r[a],!0)))));return n},rate:function(){var t,e,i,n=this,s=arguments;if(0===s.length)e=n._sounds[0]._id;else if(1===s.length){var a=n._getSoundIds(),o=a.indexOf(s[0]);o>=0?e=parseInt(s[0],10):t=parseFloat(s[0])}else 2===s.length&&(t=parseFloat(s[0]),e=parseInt(s[1],10));if("number"!=typeof t)return(i=n._soundById(e))?i._rate:n._rate;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"rate",action:function(){n.rate.apply(n,s)}}),n;void 0===e&&(n._rate=t),e=n._getSoundIds(e);for(var h=0;h<e.length;h++)if(i=n._soundById(e[h])){n.playing(e[h])&&(i._rateSeek=n.seek(e[h]),i._playStart=n._webAudio?r.ctx.currentTime:i._playStart),i._rate=t,n._webAudio&&i._node&&i._node.bufferSource?i._node.bufferSource.playbackRate.setValueAtTime(t,r.ctx.currentTime):i._node&&(i._node.playbackRate=t);var l=n.seek(e[h]),c=(n._sprite[i._sprite][0]+n._sprite[i._sprite][1])/1e3-l,u=1e3*c/Math.abs(i._rate);!n._endTimers[e[h]]&&i._paused||(n._clearTimer(e[h]),n._endTimers[e[h]]=setTimeout(n._ended.bind(n,i),u)),n._emit("rate",i._id)}return n},seek:function(){var t,e,i=this,n=arguments;if(0===n.length)i._sounds.length&&(e=i._sounds[0]._id);else if(1===n.length){var s=i._getSoundIds(),a=s.indexOf(n[0]);a>=0?e=parseInt(n[0],10):i._sounds.length&&(e=i._sounds[0]._id,t=parseFloat(n[0]))}else 2===n.length&&(t=parseFloat(n[0]),e=parseInt(n[1],10));if(void 0===e)return 0;if("number"==typeof t&&("loaded"!==i._state||i._playLock))return i._queue.push({event:"seek",action:function(){i.seek.apply(i,n)}}),i;var o=i._soundById(e);if(o){if(!("number"==typeof t&&t>=0)){if(i._webAudio){var h=i.playing(e)?r.ctx.currentTime-o._playStart:0,l=o._rateSeek?o._rateSeek-o._seek:0;return o._seek+(l+h*Math.abs(o._rate))}return o._node.currentTime}var c=i.playing(e);c&&i.pause(e,!0),o._seek=t,o._ended=!1,i._clearTimer(e),i._webAudio||!o._node||isNaN(o._node.duration)||(o._node.currentTime=t);var u=function(){c&&i.play(e,!0),i._emit("seek",e)};if(c&&!i._webAudio){var d=function(){i._playLock?setTimeout(d,0):u()};setTimeout(d,0)}else u()}return i},playing:function(t){if("number"==typeof t){var e=this._soundById(t);return!!e&&!e._paused}for(var i=0;i<this._sounds.length;i++)if(!this._sounds[i]._paused)return!0;return!1},duration:function(t){var e=this._duration,i=this._soundById(t);return i&&(e=this._sprite[i._sprite][1]/1e3),e},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,i=0;i<e.length;i++)e[i]._paused||t.stop(e[i]._id),t._webAudio||(t._clearSound(e[i]._node),e[i]._node.removeEventListener("error",e[i]._errorFn,!1),e[i]._node.removeEventListener(r._canPlayEvent,e[i]._loadFn,!1),e[i]._node.removeEventListener("ended",e[i]._endFn,!1),r._releaseHtml5Audio(e[i]._node)),delete e[i]._node,t._clearTimer(e[i]._id);var n=r._howls.indexOf(t);n>=0&&r._howls.splice(n,1);var s=!0;for(i=0;i<r._howls.length;i++)if(r._howls[i]._src===t._src||t._src.indexOf(r._howls[i]._src)>=0){s=!1;break}return h&&s&&delete h[t._src],r.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,i,n){var s=this["_on"+t];return"function"==typeof e&&s.push(n?{id:i,fn:e,once:n}:{id:i,fn:e}),this},off:function(t,e,i){var n=this["_on"+t],s=0;if("number"==typeof e&&(i=e,e=null),e||i)for(s=0;s<n.length;s++){var r=i===n[s].id;if(e===n[s].fn&&r||!e&&r){n.splice(s,1);break}}else if(t)this["_on"+t]=[];else{var a=Object.keys(this);for(s=0;s<a.length;s++)0===a[s].indexOf("_on")&&Array.isArray(this[a[s]])&&(this[a[s]]=[])}return this},once:function(t,e,i){return this.on(t,e,i,1),this},_emit:function(t,e,i){for(var n=this["_on"+t],s=n.length-1;s>=0;s--)n[s].id&&n[s].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,i)}.bind(this,n[s].fn),0),n[s].once&&this.off(t,n[s].fn,n[s].id));return this._loadQueue(t),this},_loadQueue:function(t){if(this._queue.length>0){var e=this._queue[0];e.event===t&&(this._queue.shift(),this._loadQueue()),t||e.action()}return this},_ended:function(t){var e=t._sprite;if(!this._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(this._ended.bind(this,t),100),this;var i=!(!t._loop&&!this._sprite[e][2]);if(this._emit("end",t._id),!this._webAudio&&i&&this.stop(t._id,!0).play(t._id),this._webAudio&&i){this._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=r.ctx.currentTime;var n=1e3*(t._stop-t._start)/Math.abs(t._rate);this._endTimers[t._id]=setTimeout(this._ended.bind(this,t),n)}return this._webAudio&&!i&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,this._clearTimer(t._id),this._cleanBuffer(t._node),r._autoSuspend()),this._webAudio||i||this.stop(t._id,!0),this},_clearTimer:function(t){if(this._endTimers[t]){if("function"!=typeof this._endTimers[t])clearTimeout(this._endTimers[t]);else{var e=this._soundById(t);e&&e._node&&e._node.removeEventListener("ended",this._endTimers[t],!1)}delete this._endTimers[t]}return this},_soundById:function(t){for(var e=0;e<this._sounds.length;e++)if(t===this._sounds[e]._id)return this._sounds[e];return null},_inactiveSound:function(){this._drain();for(var t=0;t<this._sounds.length;t++)if(this._sounds[t]._ended)return this._sounds[t].reset();return new o(this)},_drain:function(){var t=this._pool,e=0,i=0;if(!(this._sounds.length<t)){for(i=0;i<this._sounds.length;i++)this._sounds[i]._ended&&e++;for(i=this._sounds.length-1;i>=0;i--){if(e<=t)return;this._sounds[i]._ended&&(this._webAudio&&this._sounds[i]._node&&this._sounds[i]._node.disconnect(0),this._sounds.splice(i,1),e--)}}},_getSoundIds:function(t){if(void 0===t){for(var e=[],i=0;i<this._sounds.length;i++)e.push(this._sounds[i]._id);return e}return[t]},_refreshBuffer:function(t){return t._node.bufferSource=r.ctx.createBufferSource(),t._node.bufferSource.buffer=h[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,r.ctx.currentTime),this},_cleanBuffer:function(t){var e=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(r._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),e))try{t.bufferSource.buffer=r._scratchBuffer}catch(t){}return t.bufferSource=null,this},_clearSound:function(t){/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent)||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var o=function(t){this._parent=t,this.init()};o.prototype={init:function(){var t=this._parent;return this._muted=t._muted,this._loop=t._loop,this._volume=t._volume,this._rate=t._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++r._counter,t._sounds.push(this),this.create(),this},create:function(){var t=this._parent,e=r._muted||this._muted||this._parent._muted?0:this._volume;return t._webAudio?(this._node=void 0===r.ctx.createGain?r.ctx.createGainNode():r.ctx.createGain(),this._node.gain.setValueAtTime(e,r.ctx.currentTime),this._node.paused=!0,this._node.connect(r.masterGain)):r.noAudio||(this._node=r._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(r._canPlayEvent,this._loadFn,!1),this._endFn=this._endListener.bind(this),this._node.addEventListener("ended",this._endFn,!1),this._node.src=t._src,this._node.preload=!0===t._preload?"auto":t._preload,this._node.volume=e*r.volume(),this._node.load()),this},reset:function(){var t=this._parent;return this._muted=t._muted,this._loop=t._loop,this._volume=t._volume,this._rate=t._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++r._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var t=this._parent;t._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),this._node.removeEventListener(r._canPlayEvent,this._loadFn,!1)},_endListener:function(){var t=this._parent;t._duration===1/0&&(t._duration=Math.ceil(10*this._node.duration)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration),t._ended(this)),this._node.removeEventListener("ended",this._endFn,!1)}};var h={},l=function(t){var e=t._src;if(h[e])return t._duration=h[e].duration,void d(t);if(/^data:[^;]+;base64,/.test(e)){for(var i=atob(e.split(",")[1]),n=new Uint8Array(i.length),s=0;s<i.length;++s)n[s]=i.charCodeAt(s);u(n.buffer,t)}else{var r=new XMLHttpRequest;r.open(t._xhr.method,e,!0),r.withCredentials=t._xhr.withCredentials,r.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach((function(e){r.setRequestHeader(e,t._xhr.headers[e])})),r.onload=function(){var e=(r.status+"")[0];"0"===e||"2"===e||"3"===e?u(r.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+r.status+".")},r.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete h[e],t.load())},c(r)}},c=function(t){try{t.send()}catch(e){t.onerror()}},u=function(t,e){var i=function(){e._emit("loaderror",null,"Decoding audio data failed.")},n=function(t){t&&e._sounds.length>0?(h[e._src]=t,d(e,t)):i()};"undefined"!=typeof Promise&&1===r.ctx.decodeAudioData.length?r.ctx.decodeAudioData(t).then(n).catch(i):r.ctx.decodeAudioData(t,n,i)},d=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},f=function(){if(r.usingWebAudio){try{"undefined"!=typeof AudioContext?r.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch(t){r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),e=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i=e?parseInt(e[1],10):null;if(t&&i&&i<9){var n=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());r._navigator&&!n&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=void 0===r.ctx.createGain?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};void 0===(n=function(){return{Howler:r,Howl:a}}.apply(e,[]))||(t.exports=n),e.Howler=r,e.Howl=a,void 0!==i?(i.HowlerGlobal=s,i.Howler=r,i.Howl=a,i.Sound=o):"undefined"!=typeof window&&(window.HowlerGlobal=s,window.Howler=r,window.Howl=a,window.Sound=o)}(),
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){"use strict";var t;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){if(!this.ctx||!this.ctx.listener)return this;for(var e=this._howls.length-1;e>=0;e--)this._howls[e].stereo(t);return this},HowlerGlobal.prototype.pos=function(t,e,i){return this.ctx&&this.ctx.listener?(e="number"!=typeof e?this._pos[1]:e,i="number"!=typeof i?this._pos[2]:i,"number"!=typeof t?this._pos:(this._pos=[t,e,i],void 0!==this.ctx.listener.positionX?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this},HowlerGlobal.prototype.orientation=function(t,e,i,n,s,r){if(!this.ctx||!this.ctx.listener)return this;var a=this._orientation;return e="number"!=typeof e?a[1]:e,i="number"!=typeof i?a[2]:i,n="number"!=typeof n?a[3]:n,s="number"!=typeof s?a[4]:s,r="number"!=typeof r?a[5]:r,"number"!=typeof t?a:(this._orientation=[t,e,i,n,s,r],void 0!==this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(n,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(s,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(r,Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(t,e,i,n,s,r),this)},Howl.prototype.init=(t=Howl.prototype.init,function(e){return this._orientation=e.orientation||[1,0,0],this._stereo=e.stereo||null,this._pos=e.pos||null,this._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},this._onstereo=e.onstereo?[{fn:e.onstereo}]:[],this._onpos=e.onpos?[{fn:e.onpos}]:[],this._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}),Howl.prototype.stereo=function(t,i){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"stereo",action:function(){n.stereo(t,i)}}),n;var s=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===i){if("number"!=typeof t)return n._stereo;n._stereo=t,n._pos=[t,0,0]}for(var r=n._getSoundIds(i),a=0;a<r.length;a++){var o=n._soundById(r[a]);if(o){if("number"!=typeof t)return o._stereo;o._stereo=t,o._pos=[t,0,0],o._node&&(o._pannerAttr.panningModel="equalpower",o._panner&&o._panner.pan||e(o,s),"spatial"===s?void 0!==o._panner.positionX?(o._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),o._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),o._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):o._panner.setPosition(t,0,0):o._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),n._emit("stereo",o._id)}}return n},Howl.prototype.pos=function(t,i,n,s){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"pos",action:function(){r.pos(t,i,n,s)}}),r;if(i="number"!=typeof i?0:i,n="number"!=typeof n?-.5:n,void 0===s){if("number"!=typeof t)return r._pos;r._pos=[t,i,n]}for(var a=r._getSoundIds(s),o=0;o<a.length;o++){var h=r._soundById(a[o]);if(h){if("number"!=typeof t)return h._pos;h._pos=[t,i,n],h._node&&(h._panner&&!h._panner.pan||e(h,"spatial"),void 0!==h._panner.positionX?(h._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),h._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):h._panner.setPosition(t,i,n)),r._emit("pos",h._id)}}return r},Howl.prototype.orientation=function(t,i,n,s){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"orientation",action:function(){r.orientation(t,i,n,s)}}),r;if(i="number"!=typeof i?r._orientation[1]:i,n="number"!=typeof n?r._orientation[2]:n,void 0===s){if("number"!=typeof t)return r._orientation;r._orientation=[t,i,n]}for(var a=r._getSoundIds(s),o=0;o<a.length;o++){var h=r._soundById(a[o]);if(h){if("number"!=typeof t)return h._orientation;h._orientation=[t,i,n],h._node&&(h._panner||(h._pos||(h._pos=r._pos||[0,0,-.5]),e(h,"spatial")),void 0!==h._panner.orientationX?(h._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),h._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):h._panner.setOrientation(t,i,n)),r._emit("orientation",h._id)}}return r},Howl.prototype.pannerAttr=function(){var t,i,n,s=this,r=arguments;if(!s._webAudio)return s;if(0===r.length)return s._pannerAttr;if(1===r.length){if("object"!=typeof r[0])return(n=s._soundById(parseInt(r[0],10)))?n._pannerAttr:s._pannerAttr;t=r[0],void 0===i&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),s._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:s._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:s._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:s._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:s._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:s._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:s._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:s._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:s._panningModel})}else 2===r.length&&(t=r[0],i=parseInt(r[1],10));for(var a=s._getSoundIds(i),o=0;o<a.length;o++)if(n=s._soundById(a[o])){var h=n._pannerAttr;h={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:h.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:h.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:h.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:h.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:h.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:h.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:h.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:h.panningModel};var l=n._panner;l?(l.coneInnerAngle=h.coneInnerAngle,l.coneOuterAngle=h.coneOuterAngle,l.coneOuterGain=h.coneOuterGain,l.distanceModel=h.distanceModel,l.maxDistance=h.maxDistance,l.refDistance=h.refDistance,l.rolloffFactor=h.rolloffFactor,l.panningModel=h.panningModel):(n._pos||(n._pos=s._pos||[0,0,-.5]),e(n,"spatial"))}return s},Sound.prototype.init=function(t){return function(){var e=this._parent;this._orientation=e._orientation,this._stereo=e._stereo,this._pos=e._pos,this._pannerAttr=e._pannerAttr,t.call(this),this._stereo?e.stereo(this._stereo):this._pos&&e.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this._parent;return this._orientation=e._orientation,this._stereo=e._stereo,this._pos=e._pos,this._pannerAttr=e._pannerAttr,this._stereo?e.stereo(this._stereo):this._pos?e.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,e._refreshBuffer(this)),t.call(this)}}(Sound.prototype.reset);var e=function(t,e){"spatial"===(e=e||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,void 0!==t._panner.positionX?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),void 0!==t._panner.orientationX?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}()}).call(this,i(4))},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(9),a=i(3),o=function(t){function e(e){var i=t.call(this,e)||this;i.graphics=new Phaser.GameObjects.Graphics(i.scene),i.add(i.graphics),i.graphics.clear(),i.graphics.lineStyle(.5,16776960,.2);for(var n=0;n<a.LevelEditionManager.COLS+1;n++){var s=n*r.BoardContainer.CELLS_SIZE,o=0;i.graphics.moveTo(s,o),o=a.LevelEditionManager.ROWS*r.BoardContainer.CELLS_SIZE,i.graphics.lineTo(s,o),i.graphics.stroke()}for(var h=0;h<a.LevelEditionManager.ROWS+1;h++){s=0,o=h*r.BoardContainer.CELLS_SIZE;i.graphics.moveTo(s,o),s=a.LevelEditionManager.COLS*r.BoardContainer.CELLS_SIZE,i.graphics.lineTo(s,o),i.graphics.stroke()}return i}return s(e,t),e}(Phaser.GameObjects.Container);e.GridContainer=o},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),a=i(68),o=i(141),h=function(t){function e(e,i){var n=t.call(this,e)||this;return n.wispManagementLayer=i,n.y=510,n.addPlaceHolders(),n}return s(e,t),e.prototype.onBlockchainInfoRetrieved=function(t){for(var e=0;e<4;e++)this.nftPlaceHolders[e].destroy();this.nftPlaceHolders=[],this.nfts=[];var i={red:[],green:[],yellow:[],blue:[]};t.forEach((function(t){switch(t.name){case"Red Wisp":i.red.push(t.asset_id);break;case"Green Wisp":i.green.push(t.asset_id);break;case"Yellow Wisp":i.yellow.push(t.asset_id);break;case"Blue Wisp":i.blue.push(t.asset_id)}}));var n=0;for(var s in i){var o=new a.NFT(this.scene,s,i[s][0],i[s],this.wispManagementLayer.stakePile);o.x=125*(n-r.GameConstants.NFT_DATA_TESTNET.length/2+.5),o.y=15,this.add(o),this.nfts.push(o),n++}},e.prototype.onRefreshNFTs=function(){for(var t=0;t<r.GameConstants.NFT_DATA_TESTNET.length;t++)this.nfts[t].destroy();this.nfts=[],this.addPlaceHolders()},e.prototype.clearPile=function(){for(var t=0;t<this.nfts.length;t++)this.nfts[t].backToDeck()},e.prototype.moveAllNFTsToPile=function(){for(var t=0;t<this.nfts.length;t++)this.nfts[t].moveAllNFTsToPile()},e.prototype.addPlaceHolders=function(){this.nftPlaceHolders=[];for(var t=0;t<r.GameConstants.NFT_DATA_TESTNET.length;t++){var e=new o.NFTPlaceHolder(this.scene);e.x=125*(t-r.GameConstants.NFT_DATA_TESTNET.length/2+.5),e.y=15,this.add(e),this.nftPlaceHolders.push(e)}},e}(Phaser.GameObjects.Container);e.NFTsContainer=h},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(68),a=function(t){function e(e){var i=t.call(this,e)||this,n=new Phaser.GameObjects.Image(i.scene,0,0,"texture_atlas_1","nft_background");n.setScale(r.NFT.IMG_WIDTH/n.width),i.add(n);var s=new Phaser.GameObjects.Image(i.scene,0,0,"texture_atlas_0","load_icon");return s.setScale(.85),i.add(s),i.scene.tweens.add({targets:s,angle:360,ease:Phaser.Math.Easing.Linear,duration:2e3,repeat:-1}),i}return s(e,t),e}(Phaser.GameObjects.Container);e.NFTPlaceHolder=a},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(6),a=i(3),o=function(t){function e(e){var i=t.call(this,e)||this;i.y=320;var n=new Phaser.GameObjects.Image(i.scene,0,0,"texture_atlas_1","area_stakeable");i.add(n);var s=new Phaser.GameObjects.Image(i.scene,-32,-62,"texture_atlas_1","tab_equip_pile");return s.setOrigin(1),i.add(s),i.stakeButton=new r.Button(i.scene,180,-20,"texture_atlas_1","btn_stake_off","btn_stake_on"),i.stakeButton.onDown(a.LevelEditionManager.stakeWispsNFTs,a.LevelEditionManager),i.add(i.stakeButton),i.cancelLabel=new Phaser.GameObjects.Text(i.scene,i.stakeButton.x,i.stakeButton.y+62,"CANCEL",{fontFamily:"Supercell",fontSize:"20px",color:"#ee1b56"}),i.cancelLabel.setOrigin(.5),i.cancelLabel.setInteractive(),i.cancelLabel.on("pointerdown",a.LevelEditionManager.clearStakePile,a.LevelEditionManager),i.add(i.cancelLabel),i.deckContainer=new Phaser.GameObjects.Container(i.scene),i.add(i.deckContainer),i}return s(e,t),e.prototype.clear=function(){this.deckContainer.destroy(),this.deckContainer=new Phaser.GameObjects.Container(this.scene),this.add(this.deckContainer)},e}(Phaser.GameObjects.Container);e.StakePile=o},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(6),a=i(3),o=i(144),h=i(0),l=i(145),c=i(147),u=i(149),d=function(t){function e(e){var i=t.call(this,e)||this;return i.menuButton=new r.Button(i.scene,50*h.GameVars.scaleX,50,"texture_atlas_1","btn_menu_off","btn_menu_on"),i.menuButton.onDown(i.onClickMenuButton,i),i.menuButton.scaleX=h.GameVars.scaleX,i.add(i.menuButton),i.submMenuTiles=new c.SubMenuTiles(i.scene),i.add(i.submMenuTiles),i.subMenuNFTs=new l.SubMenuNFTs(i.scene),i.add(i.subMenuNFTs),i.subMenuGameOver=new o.SubMenuGameOver(i.scene),i.add(i.subMenuGameOver),i.scene.game.device.os.desktop||(i.subMenuZoom=new u.SubMenuZoomAndPan(i.scene),i.subMenuZoom.x=75*h.GameVars.scaleX,i.subMenuZoom.y=130,i.add(i.subMenuZoom)),i}return s(e,t),e.prototype.update=function(){this.subMenuNFTs.update(),this.submMenuTiles.update(),this.subMenuGameOver.update()},e.prototype.onMenuShown=function(){this.menuButton.visible=!1},e.prototype.onMenuHidden=function(){this.menuButton.visible=!0},e.prototype.onClickMenuButton=function(){a.LevelEditionManager.showingLayer||a.LevelEditionManager.showMenu()},e}(Phaser.GameObjects.Container);e.LevelEditionMenu=d},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(66),a=function(t){function e(e){var i=t.call(this,e)||this;return i.timeSetter=new r.LifesValuesSetter(i.scene,r.LifesValuesSetter.TIME,i),i.add(i.timeSetter),i.lifesSetter=new r.LifesValuesSetter(i.scene,r.LifesValuesSetter.LIFES,i),i.add(i.lifesSetter),i}return s(e,t),e.prototype.update=function(){this.timeSetter.update(),this.lifesSetter.update()},e.prototype.forceUpdate=function(){this.timeSetter.forceUpdate(),this.lifesSetter.forceUpdate()},e}(Phaser.GameObjects.Container);e.SubMenuGameOver=a},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),a=i(146),o=i(0),h=function(t){function e(i){var n=t.call(this,i)||this;n.y=r.GameConstants.GAME_HEIGHT,n.scene.game.device.os.desktop||n.setScale(1.25*o.GameVars.scaleX,1.25),n.tabs=[];var s=new a.NFTTab(n.scene,0);return s.x=0*e.DELTA_TAB+752,n.add(s),n.tabs.push(s),(s=new a.NFTTab(n.scene,3)).x=1*e.DELTA_TAB+752,n.add(s),n.tabs.push(s),(s=new a.NFTTab(n.scene,2)).x=2*e.DELTA_TAB+752,n.add(s),n.tabs.push(s),(s=new a.NFTTab(n.scene,1)).x=3*e.DELTA_TAB+752,n.add(s),n.tabs.push(s),n}return s(e,t),e.prototype.update=function(){this.tabs.forEach((function(t){t.update()}))},e.DELTA_TAB=78,e}(Phaser.GameObjects.Container);e.SubMenuNFTs=h},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(7),a=i(1),o=i(0),h=i(3),l=function(t){function e(e,i){var n=t.call(this,e)||this;n.id=i+11,n.tabImg=new Phaser.GameObjects.Image(n.scene,0,0,"texture_atlas_1","btn_empty_nfts"),n.tabImg.setOrigin(.5,1),n.tabImg.setInteractive({useHandCursor:!0}),n.tabImg.on("pointerdown",n.onDownTab,n),n.add(n.tabImg),n.itemImg=new Phaser.GameObjects.Image(n.scene,0,-25,"texture_atlas_1","portal_"+(i+1)+"_icon"),n.add(n.itemImg),n.seletedFrameImg=new Phaser.GameObjects.Image(n.scene,0,0,"texture_atlas_1","selected_default_nft"),n.seletedFrameImg.setOrigin(.5,1),n.add(n.seletedFrameImg),3===i?i=1:1===i&&(i=3);var s="#"+a.GameConstants.WISP_DATA[i].labelColor.toString(16),r=new Phaser.GameObjects.Text(n.scene,n.itemImg.x+18,n.itemImg.y-22,"1",{fontFamily:"Supercell",fontSize:"13px",color:s});return n.add(r),n}return s(e,t),e.prototype.update=function(){this.seletedFrameImg.visible=h.LevelEditionManager.selectedTile===this.id},e.prototype.onDownTab=function(){o.GameVars.inputsEnabled&&!h.LevelEditionManager.showingLayer&&(h.LevelEditionManager.setSelectedTile(this.id),r.AudioManager.playSound("btn_click"))},e}(Phaser.GameObjects.Container);e.NFTTab=l},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(0),o=i(1),h=r(i(2)),l=i(148),c=function(t){function e(e){var i=t.call(this,e)||this;i.y=o.GameConstants.GAME_HEIGHT,i.scene.game.device.os.desktop||i.setScale(1.25*a.GameVars.scaleX,1.25);var n=new Phaser.GameObjects.Image(i.scene,0,0,"texture_atlas_1","default_tool_menu");n.setOrigin(0,1),i.add(n),i.tabs=[];var s=new l.TileTab(i.scene,h.Cells.GROUND);s.x=30,i.add(s),i.tabs.push(s);var r=new l.TileTab(i.scene,h.Cells.PATH);r.x=100,i.add(r),i.tabs.push(r);var c=new l.TileTab(i.scene,h.Cells.WALL);c.x=172,i.add(c),i.tabs.push(c);var u=new l.TileTab(i.scene,h.Cells.PACMAN_SPAWNING_POINT);u.x=240,i.add(u),i.tabs.push(u);var d=new l.TileTab(i.scene,h.Cells.GHOSTS_1_SPAWNING_POINT);d.x=308,i.add(d),i.tabs.push(d);var f=new l.TileTab(i.scene,h.Cells.POWER_PELLET);return f.x=376,i.add(f),i.tabs.push(f),i}return s(e,t),e.prototype.update=function(){this.tabs.forEach((function(t){t.update()}))},e}(Phaser.GameObjects.Container);e.SubMenuTiles=c},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=r(i(2)),o=i(7),h=i(0),l=i(3),c=function(t){function e(e,i){var n,s=t.call(this,e)||this;switch(s.itemType=i,s.x4TileSize=!1,s.itemType){case a.Cells.GROUND:n="grass_01";break;case a.Cells.PATH:n="floor";break;case a.Cells.WALL:n="outer_wall";break;case a.Cells.PACMAN_SPAWNING_POINT:n="player-icon";break;case a.Cells.GHOSTS_1_SPAWNING_POINT:n="icon_4_ghost";break;case a.Cells.POWER_PELLET:n="pill_big_icon"}return s.itemImg=new Phaser.GameObjects.Image(s.scene,0,-25,"texture_atlas_1",n),s.itemImg.setInteractive({useHandCursor:!0}),s.itemImg.on("pointerdown",s.onDownTab,s),s.add(s.itemImg),s.seletedFrameImg=new Phaser.GameObjects.Image(s.scene,0,0,"texture_atlas_1","selected_default_tile"),s.seletedFrameImg.setOrigin(.5,1),s.add(s.seletedFrameImg),s}return s(e,t),e.prototype.update=function(){this.seletedFrameImg.visible=l.LevelEditionManager.selectedTile===this.itemType},e.prototype.onDownTab=function(){if(h.GameVars.inputsEnabled&&!l.LevelEditionManager.showingLayer){if(this.itemType===a.Cells.GHOSTS_1_SPAWNING_POINT)l.LevelEditionManager.selectedTile===this.itemType&&(l.LevelEditionManager.changeGhostNum(),this.itemImg.setFrame("icon_"+l.LevelEditionManager.numGhosts+"_ghost"));else if(l.LevelEditionManager.selectedTile===this.itemType){l.LevelEditionManager.changeTileSize(),this.x4TileSize=l.LevelEditionManager.x4TileSize;var t=void 0;if(l.LevelEditionManager.x4TileSize)switch(this.itemType){case a.Cells.GROUND:t="grass_tile_divided";break;case a.Cells.PATH:t="floor_divided";break;case a.Cells.WALL:t="btn_wall_tile_divided"}else switch(this.itemType){case a.Cells.GROUND:t="grass_01";break;case a.Cells.PATH:t="floor";break;case a.Cells.WALL:t="outer_wall"}this.itemImg.setFrame(t)}else l.LevelEditionManager.changeTileSize(!0,this.x4TileSize);l.LevelEditionManager.setSelectedTile(this.itemType),o.AudioManager.playSound("btn_click")}},e}(Phaser.GameObjects.Container);e.TileTab=c},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),a=i(6),o=i(27),h=i(3),l=function(t){function e(e){var i=t.call(this,e)||this;i.setScale(1.5*r.GameVars.scaleX,1.5);var n=new a.Button(i.scene,0,0,"texture_atlas_1","btn_less","btn_less");n.onDown((function(){this.onClickZoomButton(!1)}),i),n.setOrigin(1,.5),n.setScale(.55),i.add(n);var s=new a.Button(i.scene,0,0,"texture_atlas_1","btn_more","btn_more");return s.onDown((function(){this.onClickZoomButton(!0)}),i),s.setOrigin(0,.5),s.setScale(.55),i.add(s),i.panOnBtn=new a.Button(i.scene,0,40,"texture_atlas_1","btn_switch_off_off","btn_switch_off_off"),i.panOnBtn.setScale(.5),i.panOnBtn.onDown(i.onClickPanBtn,i),i.panOnBtn.visible=!h.LevelEditionManager.pan,i.add(i.panOnBtn),i.panOffBtn=new a.Button(i.scene,0,40,"texture_atlas_1","btn_switch_on_off","btn_switch_on_off"),i.panOffBtn.setScale(.5),i.panOffBtn.onDown(i.onClickPanBtn,i),i.panOffBtn.visible=h.LevelEditionManager.pan,i.add(i.panOffBtn),i}return s(e,t),e.prototype.onClickZoomButton=function(t){o.LevelEditionContainer.currentInstance.zoom(t)},e.prototype.onClickPanBtn=function(){h.LevelEditionManager.switchPan(),this.panOnBtn.visible=!h.LevelEditionManager.pan,this.panOffBtn.visible=h.LevelEditionManager.pan},e}(Phaser.GameObjects.Container);e.SubMenuZoomAndPan=l},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(9),o=i(3),h=i(38),l=r(i(2)),c=i(27),u=function(t){function e(e){var i=t.call(this,e)||this,n=o.LevelEditionManager.COLS,s=o.LevelEditionManager.ROWS,r=c.LevelEditionContainer.currentInstance.x,h=c.LevelEditionContainer.currentInstance.y;return i.x=r-n*a.BoardContainer.CELLS_SIZE/2,i.y=h-s*a.BoardContainer.CELLS_SIZE/2,i.cursorImg1=new Phaser.GameObjects.Image(i.scene,0,0,"texture_atlas_1","idle_standard_front_01"),i.cursorImg1.setOrigin(0),i.add(i.cursorImg1),i.cursorImg2=new Phaser.GameObjects.Image(i.scene,0,0,"texture_atlas_1","idle_standard_front_01"),i.cursorImg2.setOrigin(0),i.add(i.cursorImg2),i.cursorImg3=new Phaser.GameObjects.Image(i.scene,0,0,"texture_atlas_1","idle_standard_front_01"),i.cursorImg3.setOrigin(0),i.add(i.cursorImg3),i.cursorImg4=new Phaser.GameObjects.Image(i.scene,0,0,"texture_atlas_1","idle_standard_front_01"),i.cursorImg4.setOrigin(0),i.add(i.cursorImg4),i.cursorImg1.alpha=.5,i.cursorImg2.alpha=.5,i.cursorImg3.alpha=.5,i.cursorImg4.alpha=.5,i}return s(e,t),e.prototype.update=function(){var t=h.LevelEditionScene.currentInstance.getColAndRow();t&&(this.setCursorPosition(t.c,t.r),this.setCursorVisibility(),this.setCursorImg())},e.prototype.setCursorPosition=function(t,e){this.cursorImg1.x=t*a.BoardContainer.CELLS_SIZE,this.cursorImg1.y=e*a.BoardContainer.CELLS_SIZE,this.cursorImg2.setPosition(this.cursorImg1.x+a.BoardContainer.CELLS_SIZE,this.cursorImg1.y),this.cursorImg3.setPosition(this.cursorImg1.x,this.cursorImg1.y+a.BoardContainer.CELLS_SIZE),this.cursorImg4.setPosition(this.cursorImg1.x+a.BoardContainer.CELLS_SIZE,this.cursorImg1.y+a.BoardContainer.CELLS_SIZE)},e.prototype.setCursorVisibility=function(){this.visible=!o.LevelEditionManager.showingLayer,this.cursorImg1.visible=null!==o.LevelEditionManager.selectedTile;var t=o.LevelEditionManager.selectedTile===l.Cells.GROUND||o.LevelEditionManager.selectedTile===l.Cells.PATH||o.LevelEditionManager.selectedTile===l.Cells.WALL;this.cursorImg2.visible=t&&o.LevelEditionManager.x4TileSize&&null!==o.LevelEditionManager.selectedTile,this.cursorImg3.visible=t&&o.LevelEditionManager.x4TileSize&&null!==o.LevelEditionManager.selectedTile,this.cursorImg4.visible=t&&o.LevelEditionManager.x4TileSize&&null!==o.LevelEditionManager.selectedTile},e.prototype.setCursorImg=function(){var t;if(null!==o.LevelEditionManager.selectedTile){switch(o.LevelEditionManager.selectedTile){case l.Cells.GROUND:t="grass_01";break;case l.Cells.PATH:t="floor";break;case l.Cells.WALL:t="v_wall";break;case l.Cells.PACMAN_SPAWNING_POINT:t="player-icon";break;case l.Cells.GHOSTS_1_SPAWNING_POINT:case l.Cells.GHOSTS_2_SPAWNING_POINT:case l.Cells.GHOSTS_3_SPAWNING_POINT:case l.Cells.GHOSTS_4_SPAWNING_POINT:t="ghost-icon";break;case l.Cells.POWER_PELLET:t="pill_big_icon";break;case l.Cells.PORTAL_1:t="portal_1_icon";break;case l.Cells.PORTAL_2:t="portal_2_icon";break;case l.Cells.PORTAL_3:t="portal_3_icon";break;case l.Cells.PORTAL_4:t="portal_4_icon"}t&&(this.cursorImg1.setFrame(t),this.cursorImg2.setFrame(t),this.cursorImg3.setFrame(t),this.cursorImg4.setFrame(t))}},e}(Phaser.GameObjects.Container);e.EditionCursor=u},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(6),a=i(0),o=i(1),h=i(8),l=i(3),c=i(152),u=i(153),d=i(154),f=function(t){function e(e){var i=t.call(this,e)||this,n=new Phaser.GameObjects.Graphics(i.scene);n.fillStyle(1853525,.65),n.fillRect(0,0,o.GameConstants.GAME_WIDTH,o.GameConstants.GAME_HEIGHT),i.add(n),i.scaledItemsContainer=new Phaser.GameObjects.Container(i.scene),i.scaledItemsContainer.x=o.GameConstants.GAME_WIDTH/2,i.scaledItemsContainer.scaleX=a.GameVars.scaleX,i.add(i.scaledItemsContainer);var s=new Phaser.GameObjects.Image(i.scene,0,370,"texture_atlas_1","equip_menu_bg");s.setScale(2),i.scaledItemsContainer.add(s);var h=new Phaser.GameObjects.Text(i.scene,0,110,"MAZE EDITOR",{fontFamily:"Supercell",fontSize:"34px",color:"#1c4855"});h.setOrigin(.5),i.scaledItemsContainer.add(h);var l=new Phaser.GameObjects.Image(i.scene,0,o.GameConstants.GAME_HEIGHT/2-20,"texture_atlas_1","equip_menu_stripe");l.scaleY=27,i.scaledItemsContainer.add(l),i.buttons=[];var d=new r.Button(i.scene,0,l.y,"texture_atlas_1","btn_test_level_off","btn_test_level_on");d.setScale(.95),d.onDown(i.onClickTest,i),d.onOver((function(){i.testMazeBtnTween.pause(),d.setScale(1.1)}),i),d.onOut((function(){i.testMazeBtnTween.resume()}),i),i.scaledItemsContainer.add(d),i.buttons.push(d),i.testMazeBtnTween=i.scene.tweens.add({targets:d,scaleX:1,scaleY:1,angle:-2,ease:Phaser.Math.Easing.Cubic.Out,duration:1250,yoyo:!0,repeat:-1}),i.mintingCostBox=new c.MintingCostsBox(i.scene),i.scaledItemsContainer.add(i.mintingCostBox),i.mintingButtonsContainer=new u.MintingButtonsContainer(i.scene,i),i.scaledItemsContainer.add(i.mintingButtonsContainer);var f=new Phaser.GameObjects.Image(i.scene,415,225,"texture_atlas_1","label_add_wisps");i.scaledItemsContainer.add(f);var p=new r.Button(i.scene,505,f.y+2,"texture_atlas_1","btn_equip_items_off","btn_equip_items_on");p.onDown(i.onClickAddWisps,i),i.scaledItemsContainer.add(p),i.buttons.push(p);var g=new r.Button(i.scene,230,h.y,"texture_atlas_1","btn_exit_off","btn_exit_on");g.onDown(i.onClickGoHome,i),i.scaledItemsContainer.add(g),i.buttons.push(g);var m=new r.Button(i.scene,-440,230,"texture_atlas_1","btn_clear_off","btn_clear_on");m.onDown(i.clearLevel,i),i.scaledItemsContainer.add(m),i.buttons.push(m);var v=new r.Button(i.scene,m.x,290,"texture_atlas_1","btn_random_fill_off","btn_random_fill_on");v.onDown(i.onClickRandomFill,i),i.scaledItemsContainer.add(v),v.disable();var y=new r.Button(i.scene,-o.GameConstants.GAME_WIDTH/2+50,50,"texture_atlas_1","btn_close_off","btn_close_on");return y.onDown(i.onClickCloseMenu,i),i.scaledItemsContainer.add(y),i.buttons.push(y),i}return s(e,t),e.prototype.resetMintingButtonsContainer=function(){this.mintingButtonsContainer.destroy(),this.mintingButtonsContainer=new u.MintingButtonsContainer(this.scene,this),this.scaledItemsContainer.add(this.mintingButtonsContainer)},e.prototype.onMenuShown=function(){this.mintingCostBox.destroy(),this.mintingCostBox=new c.MintingCostsBox(this.scene),this.scaledItemsContainer.add(this.mintingCostBox),this.mintingButtonsContainer.destroy(),this.mintingButtonsContainer=new u.MintingButtonsContainer(this.scene,this),this.scaledItemsContainer.add(this.mintingButtonsContainer)},e.prototype.showLevelSelectionMenu=function(){this.levelSelectionMenu=new d.LevelSelectionMenu(this.scene,this),this.scaledItemsContainer.add(this.levelSelectionMenu),this.disableButtons()},e.prototype.onNFTSelected=function(t){this.levelSelectionMenu.destroy(),this.levelSelectionMenu=null,this.enableButtons(),l.LevelEditionManager.stakeLevel(t)},e.prototype.hideLevelSelectionMenu=function(){this.enableButtons(),this.levelSelectionMenu.destroy(),this.levelSelectionMenu=null,this.mintingButtonsContainer.destroy(),this.mintingButtonsContainer=new u.MintingButtonsContainer(this.scene,this),this.scaledItemsContainer.add(this.mintingButtonsContainer)},e.prototype.disableButtons=function(){this.buttons.forEach((function(t){return t.disable()}))},e.prototype.enableButtons=function(){this.buttons.forEach((function(t){return t.enable()}))},e.prototype.clearLevel=function(){l.LevelEditionManager.clearLevel()},e.prototype.onClickRandomFill=function(){},e.prototype.onClickTest=function(){a.GameVars.inputsEnabled&&l.LevelEditionManager.testLevel()},e.prototype.onClickCloseMenu=function(){a.GameVars.inputsEnabled&&l.LevelEditionManager.hideMenu()},e.prototype.onClickGoHome=function(){a.GameVars.inputsEnabled&&h.GameManager.enterSplashScene()},e.prototype.onClickAddWisps=function(){a.GameVars.inputsEnabled&&(l.LevelEditionManager.hideMenu(),l.LevelEditionManager.showWispManagerLayer())},e}(Phaser.GameObjects.Container);e.MenuLayer=f},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),a=i(0),o=i(3),h=function(t){function e(e){var i=t.call(this,e)||this;i.x=50,i.y=470;var n=new Phaser.GameObjects.Text(i.scene,-155,20,"MINTING COST",{fontFamily:"Supercell",fontSize:"16px",color:"#1c4855"});if(n.setOrigin(1,.5),i.add(n),o.LevelEditionManager.isBalanceExceeded()){n.y=8;var s=new Phaser.GameObjects.Text(i.scene,-155,30,"INSUFFICIENT WISPS",{fontFamily:"Supercell",fontSize:"12px",color:"#ec2b5f"});s.setOrigin(1,.5),i.add(s)}var h=new Phaser.GameObjects.Image(i.scene,0,0,"texture_atlas_1","minting_costs_background");h.setOrigin(.5,0),i.add(h);var l=new Phaser.GameObjects.Text(i.scene,150,20,"+      1 LUDIO",{fontFamily:"Supercell",fontSize:"18px",color:"#1c4855"});l.setOrigin(0,.5),i.add(l);var c=new Phaser.GameObjects.Image(i.scene,180,20,"texture_atlas_1","ludio_icon");i.add(c);for(var u=0;u<r.GameConstants.WISP_DATA.length;u++){var d=new Phaser.GameObjects.Image(i.scene,60*(u-1.5)-10,18,"texture_atlas_1",r.GameConstants.WISP_DATA[u].imgName);i.add(d);var f="#"+r.GameConstants.WISP_DATA[u].labelColor.toString(16),p=void 0,g=void 0;switch(u){case 0:p=a.GameVars.wispData.red-o.LevelEditionManager.wispData.red,g=o.LevelEditionManager.wispData.red;break;case 1:p=a.GameVars.wispData.green-o.LevelEditionManager.wispData.green,g=o.LevelEditionManager.wispData.green;break;case 2:p=a.GameVars.wispData.yellow-o.LevelEditionManager.wispData.yellow,g=o.LevelEditionManager.wispData.yellow;break;case 3:p=a.GameVars.wispData.blue-o.LevelEditionManager.wispData.blue,g=o.LevelEditionManager.wispData.blue}var m=new Phaser.GameObjects.Text(i.scene,d.x+20,d.y-3,p.toString(),{fontFamily:"Supercell",fontSize:"14px",color:f});if(i.add(m),g<0){var v=new Phaser.GameObjects.Image(i.scene,d.x+9,d.y+14,"texture_atlas_1","alert_signal");i.add(v),i.scene.tweens.add({targets:v,scaleX:1.15,scaleY:1.15,ease:Phaser.Math.Easing.Linear,duration:600,repeat:-1,yoyo:!0})}}return i}return s(e,t),e}(Phaser.GameObjects.Container);e.MintingCostsBox=h},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),a=i(6),o=i(3),h=function(t){function e(e,i){var n=t.call(this,e)||this;n.menuLayer=i,n.y=575;var s=new Phaser.GameObjects.Image(n.scene,0,0,"texture_atlas_1","minting-buttons-background");n.add(s),n.burnMazeBtn=new a.Button(n.scene,-160,0,"texture_atlas_1","btn_burn_maze_off","btn_burn_maze_on"),n.burnMazeBtn.onDown(n.onClickBurnMaze,n),n.add(n.burnMazeBtn),n.okSign=new Phaser.GameObjects.Image(n.scene,n.burnMazeBtn.x-72,n.burnMazeBtn.y-2,"texture_atlas_1","ok_sign"),n.add(n.okSign),n.mintMazeBtn=new a.Button(n.scene,148,0,"texture_atlas_1","btn_mint_maze_off","btn_mint_maze_on"),n.mintMazeBtn.onDown(n.onClickMintMaze,n),n.add(n.mintMazeBtn),n.lockSign=new Phaser.GameObjects.Image(n.scene,n.mintMazeBtn.x-104,n.mintMazeBtn.y-2,"texture_atlas_1","lock_icon"),n.add(n.lockSign);var r=new Phaser.GameObjects.Text(n.scene,0,70,"Burn an OLD MAZE to mint a new one",{fontFamily:"Oswald-ExtraLight",fontSize:"24px",color:"#597173"});return r.setOrigin(.5),n.add(r),n.setUpButtons(),n}return s(e,t),e.prototype.setUpButtons=function(){r.GameVars.hasPlayerLevelsStaked?(this.burnMazeBtn.disable(),o.LevelEditionManager.isBalanceExceeded()&&this.mintMazeBtn.disable(),this.lockSign.visible=!1):(this.okSign.visible=!1,this.mintMazeBtn.disable())},e.prototype.onClickBurnMaze=function(){r.GameVars.inputsEnabled&&(this.burnMazeBtn.disable(),this.addLoadingIcons(!0),this.menuLayer.showLevelSelectionMenu())},e.prototype.onClickMintMaze=function(){r.GameVars.inputsEnabled&&(this.mintMazeBtn.disable(),this.addLoadingIcons(!1),o.LevelEditionManager.mintLevel())},e.prototype.addLoadingIcons=function(t){var e=new Phaser.GameObjects.Image(this.scene,t?this.burnMazeBtn.x:this.mintMazeBtn.x,t?this.burnMazeBtn.y:this.mintMazeBtn.y,"texture_atlas_0","load_icon");e.setScale(.9),this.add(e),this.scene.tweens.add({targets:e,angle:360,ease:Phaser.Math.Easing.Linear,duration:2e3,repeat:-1})},e}(Phaser.GameObjects.Container);e.MintingButtonsContainer=h},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(1),o=i(155),h=r(i(5)),l=i(6),c=function(t){function e(e,i){var n=t.call(this,e)||this;n.menuLayer=i;var s=new Phaser.GameObjects.Graphics(n.scene);s.fillStyle(1853525,.25),s.fillRect(0,0,a.GameConstants.GAME_WIDTH,a.GameConstants.GAME_HEIGHT),s.x=-a.GameConstants.GAME_WIDTH/2,n.add(s);var r=new Phaser.GameObjects.Image(n.scene,0,370,"texture_atlas_1","equip_menu_bg");r.setScale(1.92,1.82),n.add(r);var o=new Phaser.GameObjects.Text(n.scene,0,140,"SELECT A MAZE TO BURN",{fontFamily:"Supercell",fontSize:"22px",color:"#1c4855"});o.setOrigin(.5),n.add(o);var c=new l.Button(n.scene,-a.GameConstants.GAME_WIDTH/2+50,50,"texture_atlas_1","btn_close_off","btn_close_on");return c.onDown(n.onClickCloseMenu,n),n.add(c),n.loadIcon=new Phaser.GameObjects.Image(n.scene,0,380,"texture_atlas_0","load_icon"),n.loadIcon.setScale(.9),n.add(n.loadIcon),n.scene.tweens.add({targets:n.loadIcon,angle:360,ease:Phaser.Math.Easing.Linear,duration:2e3,repeat:-1}),h.DataManager.getNFTsAndImages(a.GameConstants.SCHEMA_LEVELS,a.GameConstants.COLLECTION,n.addNFTs,n),n}return s(e,t),e.prototype.onNFTSelected=function(t){this.nftContainers.forEach((function(e){e.disable(t)})),this.scene.time.delayedCall(1e3,(function(){this.menuLayer.onNFTSelected(t)}),[],this)},e.prototype.onClickCloseMenu=function(){this.menuLayer.hideLevelSelectionMenu()},e.prototype.addNFTs=function(t){this.loadIcon.destroy(),this.nftContainers=[],this.scrollContainer=new Phaser.GameObjects.Container(this.scene),this.add(this.scrollContainer);for(var i=0;i<t.length;i++){var n=new o.LevelNFTContainer(this.scene,this,t[i].asset_id);n.x=e.DELTA_Y*(i-1),1===t.length?n.x=0:2===t.length?n.x=-e.DELTA_Y/2+310*i:n.x=e.DELTA_Y*(i-1),n.y=400,n.visible=i<3,this.scrollContainer.add(n),this.nftContainers.push(n)}if(this.scrollIndex=0,t.length>3){this.leftNextBtn=new l.Button(this.scene,-490,390,"texture_atlas_1","btn_next_off","btn_next_on"),this.leftNextBtn.disable(),this.leftNextBtn.onDown((function(){this.scroll("left")}),this),this.leftNextBtn.scaleX=-1,this.add(this.leftNextBtn),this.rightNextBtn=new l.Button(this.scene,490,390,"texture_atlas_1","btn_next_off","btn_next_on"),this.rightNextBtn.onDown((function(){this.scroll("right")}),this),this.add(this.rightNextBtn)}},e.prototype.scroll=function(t){var i=this;"right"===t?(this.scrollIndex+=3,this.nftContainers.forEach((function(t,e){e<i.scrollIndex||e>=i.scrollIndex+3?t.visible=!1:t.visible=!0})),this.scrollContainer.x-=3*e.DELTA_Y,this.scrollContainer.x+=15):(this.scrollIndex-=3,this.nftContainers.forEach((function(t,e){e<i.scrollIndex||e>=i.scrollIndex+3?t.visible=!1:t.visible=!0})),this.scrollContainer.x+=3*e.DELTA_Y,this.scrollContainer.x-=15),this.scene.tweens.add({targets:this.scrollContainer,x:"right"===t?this.scrollContainer.x-10:this.scrollContainer.x+10,ease:Phaser.Math.Easing.Cubic.Out,duration:300}),this.scrollIndex>0?this.leftNextBtn.enable():this.leftNextBtn.disable(),this.scrollIndex+3>=this.nftContainers.length?this.rightNextBtn.visible=!1:this.rightNextBtn.visible=!0},e.DELTA_Y=310,e}(Phaser.GameObjects.Container);e.LevelSelectionMenu=c},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,i,n){var s=t.call(this,e)||this;s.asset_id=n,s.levelSelectionMenu=i,s.background=new Phaser.GameObjects.Image(s.scene,0,0,"texture_atlas_1","level_nft_container_background"),s.background.setInteractive({useHandCursor:!0}),s.background.on("pointerdown",s.onDownBackground,s),s.add(s.background);var r=new Phaser.GameObjects.Image(s.scene,0,-30,s.asset_id.toString());return r.setScale(275/r.width),s.add(r),s.okSign=new Phaser.GameObjects.Image(s.scene,2,148,"texture_atlas_1","ok_sign"),s.okSign.visible=!1,s.okSign.setScale(.9),s.add(s.okSign),s}return s(e,t),e.prototype.disable=function(t){this.background.disableInteractive(),t!==this.asset_id&&(this.alpha=.5)},e.prototype.onDownBackground=function(){this.okSign.visible=!this.okSign.visible,this.levelSelectionMenu.onNFTSelected(this.asset_id)},e}(Phaser.GameObjects.Container);e.LevelNFTContainer=r},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),a=i(0),o=i(6),h=i(3),l=function(t){function e(e){var i=t.call(this,e)||this,n=new Phaser.GameObjects.Image(i.scene,0,0,"texture_atlas_1","wisp_balance_box_background");n.setOrigin(.5,0),i.add(n),i.balanceLabels=[],i.alertSignals=[];for(var s=0;s<r.GameConstants.WISP_DATA.length;s++){var a=new Phaser.GameObjects.Image(i.scene,60*(s-1.5)-10,18,"texture_atlas_1",r.GameConstants.WISP_DATA[s].imgName);i.add(a);var h="#"+r.GameConstants.WISP_DATA[s].labelColor.toString(16),l=new Phaser.GameObjects.Text(i.scene,a.x+16,a.y-3,"3",{fontFamily:"Supercell",fontSize:"14px",color:h});i.add(l),i.balanceLabels.push(l);var c=new Phaser.GameObjects.Image(i.scene,a.x+9,a.y+10,"texture_atlas_1","alert_signal");c.setScale(.8),i.add(c),i.scene.tweens.add({targets:c,scaleX:1.05,scaleY:1.05,ease:Phaser.Math.Easing.Linear,duration:600,repeat:-1,yoyo:!0}),i.alertSignals.push(c)}return i.addWispsButton=new o.Button(i.scene,152,26,"texture_atlas_1","btn_equip_items_off","btn_equip_items_on"),i.addWispsButton.onDown(i.onClickAddWispsButton,i),i.add(i.addWispsButton),i}return s(e,t),e.prototype.update=function(){h.LevelEditionManager.wispData.red<99?(this.balanceLabels[0].text=h.LevelEditionManager.wispData.red.toString(),this.balanceLabels[0].setFontSize(14)):(this.balanceLabels[0].text="+99",this.balanceLabels[0].setFontSize(11.5)),h.LevelEditionManager.wispData.green<99?(this.balanceLabels[1].text=h.LevelEditionManager.wispData.green.toString(),this.balanceLabels[1].setFontSize(14)):(this.balanceLabels[1].text="+99",this.balanceLabels[1].setFontSize(11.5)),h.LevelEditionManager.wispData.yellow<99?(this.balanceLabels[2].text=h.LevelEditionManager.wispData.yellow.toString(),this.balanceLabels[2].setFontSize(14)):(this.balanceLabels[2].text="+99",this.balanceLabels[2].setFontSize(11.5)),h.LevelEditionManager.wispData.blue<99?(this.balanceLabels[3].text=h.LevelEditionManager.wispData.blue.toString(),this.balanceLabels[3].setFontSize(14)):(this.balanceLabels[3].text="+99",this.balanceLabels[3].setFontSize(11.5)),this.alertSignals[0].visible=!(h.LevelEditionManager.wispData.red>-1),this.alertSignals[1].visible=!(h.LevelEditionManager.wispData.green>-1),this.alertSignals[2].visible=!(h.LevelEditionManager.wispData.yellow>-1),this.alertSignals[3].visible=!(h.LevelEditionManager.wispData.blue>-1)},e.prototype.onMenuShown=function(){this.addWispsButton.visible=!1},e.prototype.onMenuHidden=function(){this.addWispsButton.visible=!0},e.prototype.onClickAddWispsButton=function(){a.GameVars.inputsEnabled&&!h.LevelEditionManager.showingLayer&&h.LevelEditionManager.showWispManagerLayer()},e}(Phaser.GameObjects.Container);e.WispBalanceBox=l},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(7),a=i(1),o=i(8),h=i(0),l=i(6),c=i(37),u=function(t){function e(){var i=t.call(this,"SplashScene")||this;return e.currentInstance=i,i}return s(e,t),e.prototype.create=function(){var t=this;o.GameManager.setCurrentScene(this),this.add.image(a.GameConstants.GAME_WIDTH/2,a.GameConstants.GAME_HEIGHT/2,"texture_atlas_1","splash_bg_tile").scaleX=a.GameConstants.GAME_WIDTH,this.scaledItemsContainer=this.add.container(),this.scaledItemsContainer.setPosition(a.GameConstants.GAME_WIDTH/2,a.GameConstants.GAME_HEIGHT/2),this.scaledItemsContainer.scaleX=h.GameVars.scaleX;var e=new Phaser.GameObjects.Image(this,0,0,"texture_atlas_1","splash");this.scaledItemsContainer.add(e);var i=new Phaser.GameObjects.Image(this,-24,-250,"texture_atlas_1","splash_title");this.scaledItemsContainer.add(i);var n=new c.AudioButtonContainer(this);n.setPosition(55*h.GameVars.scaleX,55),n.scaleX=h.GameVars.scaleX,this.add.existing(n);var s=new l.Button(this,420,180,"texture_atlas_1","btn_play",null,!0);s.onDown(this.onClickPlay,this),s.onOver((function(){t.playBtnTween.pause(),s.setScale(1.1)}),this),s.onOut((function(){t.playBtnTween.resume()}),this),s.setScale(.96),this.scaledItemsContainer.add(s),this.playBtnTween=this.tweens.add({targets:s,scaleX:1,scaleY:1,angle:2,ease:Phaser.Math.Easing.Linear,duration:900,yoyo:!0,repeat:-1}),this.levelEditionButton=new l.Button(this,-420,180,"texture_atlas_1","btn_level_editor",null,!0),this.levelEditionButton.onDown(this.onClickLevelEdition,this),this.levelEditionButton.onOver((function(){t.editBtnTween.pause(),t.levelEditionButton.setScale(1.1)}),this),this.levelEditionButton.onOut((function(){t.editBtnTween.resume()}),this),this.levelEditionButton.setScale(.96),this.scaledItemsContainer.add(this.levelEditionButton),this.editBtnTween=this.tweens.add({targets:this.levelEditionButton,scaleX:1,scaleY:1,angle:-2,ease:Phaser.Math.Easing.Linear,duration:900,yoyo:!0,repeat:-1}),h.GameVars.hasPlayerVIPPass||(s.alpha=.5,s.disableInteractive(),this.levelEditionButton.alpha=.5,this.levelEditionButton.disableInteractive()),r.AudioManager.stopLoop(),r.AudioManager.playSound("loop_tension_menus",!0)},e.prototype.onClickPlay=function(){h.GameVars.inputsEnabled&&o.GameManager.enterPaymentScene()},e.prototype.onClickLevelEdition=function(){if(h.GameVars.inputsEnabled){this.levelEditionButton.disable(),this.editBtnTween.stop();var t=new Phaser.GameObjects.Image(this,this.levelEditionButton.x,this.levelEditionButton.y,"texture_atlas_0","load_icon");t.setScale(.9),this.scaledItemsContainer.add(t),this.tweens.add({targets:t,angle:360,ease:Phaser.Math.Easing.Linear,duration:2e3,repeat:-1}),o.GameManager.retrieveEditedLevelData()}},e}(Phaser.Scene);e.SplashScene=u},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=r(i(5)),o=i(1),h=i(8),l=function(t){function e(){var i=t.call(this,"PaymentScene")||this;return e.currentInstance=i,i}return s(e,t),e.prototype.create=function(){h.GameManager.setCurrentScene(this);var t=this.add.graphics();t.fillStyle(134168),t.fillRect(0,0,o.GameConstants.GAME_WIDTH,o.GameConstants.GAME_HEIGHT),a.SDK.showPaymentLayer(h.GameManager.enterBoardScene,h.GameManager)},e}(Phaser.Scene);e.PaymentScene=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){console.log("ClashdomeMessageClient:","started"),this._callbacks=t,this._onStartGame=this._onStartGame.bind(this),this._onLoginSuccess=this._onLoginSuccess.bind(this),this._onCustomEvent=this._onCustomEvent.bind(this),this._onDisposeGame=this._onDisposeGame.bind(this),this._customEventListeners=[],window.addEventListener("start-game",this._onStartGame),window.addEventListener("login-success",this._onLoginSuccess),window.addEventListener("clashdome-server-event",this._onCustomEvent),window.addEventListener("dispose-game",this._onDisposeGame)}return t.prototype.dispatchGameStarted=function(t){console.log("ClashdomeMessageClient:","dispatchGameStarted");var e=new Event("game-started");e.game=t,window.dispatchEvent(e)},t.prototype.dispatchMessageToWeb=function(t){console.log("ClashdomeMessageClient:","dispatchMessageToWeb",t);var e=new Event("clashdome-client-event");e.data=t,window.dispatchEvent(e)},t.prototype.addCustomEventListener=function(t,e,i){this._customEventListeners.push({id:t,callback:e,context:i})},t.prototype.removeCustomEventListener=function(t){var e=this._customEventListeners.findIndex((function(e){return e.id===t}));this._customEventListeners.splice(e,1)},t.prototype.removeCustomEventListeners=function(){this._customEventListeners=[]},t.prototype._onStartGame=function(t){console.log("ClashdomeMessageClient:","_onStartGame",t),this._callbacks.onStartGame(t.reactClass),window.removeEventListener("start-game",this._onStartGame)},t.prototype._onDisposeGame=function(){window.removeEventListener("start-game",this._onStartGame),window.removeEventListener("login-success",this._onLoginSuccess),window.removeEventListener("clashdome-server-event",this._onCustomEvent),window.removeEventListener("dispose-game",this._onDisposeGame)},t.prototype._onLoginSuccess=function(){console.log("ClashdomeMessageClient:","_onLoginSuccess"),this._callbacks.onLoginSuccess(),window.removeEventListener("login-success",this._onLoginSuccess)},t.prototype._onCustomEvent=function(t){console.log("ClashdomeMessageClient:","custom-event:",t),this._customEventListeners.forEach((function(e){e.id===t.data.id&&e.callback.call(e.context,t.data.payload)}))},t}();e.ClashdomeMessageClient=n},function(t,e,i){"use strict";i.r(e);class n{constructor(t){this.scene=t}static register(t,e){n.prototype[t]=e}}var s=n,r={setEventEmitter(t,e){return void 0===e&&(e=Phaser.Events.EventEmitter),this._privateEE=!0===t||void 0===t,this._eventEmitter=this._privateEE?new e:t,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(t){return this._eventEmitter&&t&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}};const a=Phaser.Scene;var o=function(t){return t instanceof a},h=function(t){return null==t||"object"!=typeof t?null:o(t)?t:t.scene&&o(t.scene)?t.scene:t.parent&&t.parent.scene&&o(t.parent.scene)?t.parent.scene:void 0};const l=Phaser.Utils.Objects.GetValue;class c{constructor(t,e){this.parent=t,this.scene=h(t),this.isShutdown=!1,this.setEventEmitter(l(e,"eventEmitter",!0)),this.parent&&this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this)}shutdown(t){this.isShutdown||(this.parent&&this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.isShutdown=!0)}destroy(t){this.shutdown(t)}onSceneDestroy(){this.destroy(!0)}onParentDestroy(t,e){this.destroy(e)}}Object.assign(c.prototype,r);var u=c;const d=Phaser.Utils.Objects.GetValue;const f={no:0,lazy:1,always:2};var p=class extends u{constructor(t,e){super(t,e),this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(d(e,"tickingMode",1))}boot(){2!==this.tickingMode||this.tickingState||this.startTicking()}shutdown(t){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(t))}setTickingMode(t){"string"==typeof t&&(t=f[t]),this.tickingMode=t}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(t){this._isRunning!==t&&(this._isRunning=t,1===this.tickingMode&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}};const g=Phaser.Utils.Objects.GetValue;const m=0,v=1,y="IDLE";var _=class extends p{constructor(t,e){var i=h(t);i===t&&(t=void 0),super(i,e),this.gameObject=t,t&&t.setInteractive(g(e,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.setEnable(g(t,"enable",!0)),this.setDetectBounds(),void 0===this.gameObject?this.setDetectBounds(g(t,"bounds",void 0)):this.setDetectBounds(),this.tracerState=m,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(t){this.scene&&(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}setDetectBounds(t){return this.bounds=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t,e){this.enable&&(void 0===this.pointer&&(!this.bounds||this.bounds.contains(t.x,t.y))&&this.pointer!==t&&(this.pointer=t,this.lastPointer=t,this.movedState=!1,this.tracerState=v,void 0===this.gameObject&&(this.isTouchingAnyObject=e.length>0),this.onDragStart()))}onPointerUp(t){this.enable&&((!this.bounds||this.bounds.contains(t.x,t.y))&&this.pointer===t&&(this.pointer=void 0,this.movedState=!1,this.tracerState=m,this.onDragEnd()))}onPointerMove(t){if(this.enable&&t.isDown){var e=!this.bounds||this.bounds.contains(t.x,t.y),i=this.pointer===t;!i&&e||(i&&!e?this.onPointerUp(t):(this.movedState||(this.movedState=t.x!==t.downX||t.y!==t.downY),this.movedState&&this.onDrag()))}}dragCancel(){return this.tracerState===v&&this.onDragEnd(),this.pointer=void 0,this.tracerState=m,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(t,e){}postUpdate(t,e){}startTicking(){super.startTicking(),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=y,this}},x=function(t,e,i){if(t&&"number"!=typeof t){if(t.hasOwnProperty(e))return t[e];if(-1!==e.indexOf(".")){for(var n=e.split("."),s=t,r=i,a=0;a<n.length;a++){if(!s.hasOwnProperty(n[a])){r=i;break}r=s[n[a]],s=s[n[a]]}return r}return i}return i};
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */class w{constructor(t){var e=x(t,"states",void 0);e&&this.addStates(e);var i=x(t,"extend",void 0);if(i)for(var n in i)this.hasOwnProperty(n)&&void 0!==this[n]||(this[n]=i[n]);var s=x(t,"eventEmitter",void 0),r=x(t,"EventEmitterClass",void 0);this.setEventEmitter(s,r),this._stateLock=!1,this.resetFromJSON(t)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(t){this.setEnable(x(t,"enable",!0)),this.start(x(t,"start",void 0));var e=x(t,"init",void 0);return e&&e.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}set state(t){if(this.enable&&!this._stateLock&&this._state!==t){if(this._prevState=this._state,this._state=t,this._stateLock=!0,this.emit("statechange",this),null!=this._prevState){var e="exit_"+this._prevState,i=this[e];i&&i.call(this),this.emit(e,this)}if(this._stateLock=!1,null!=this._state){var n="enter_"+this._state,s=this[n];s&&s.call(this),this.emit(n,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(t){return this._start=t,this._prevState=void 0,this._state=t,this}goto(t){return null!=t&&(this.state=t),this}next(){var t,e=this["next_"+this.state];return e&&(t="string"==typeof e?e:e.call(this)),this.goto(t),this}addState(t,e){"string"!=typeof t&&(t=(e=t).name);var i=e.next;i&&(this["next_"+t]=i);var n=e.exit;n&&(this["exit_"+t]=n);var s=e.enter;return s&&(this["enter_"+t]=s),this}addStates(t){if(Array.isArray(t))for(var e=0,i=t.length;e<i;e++)this.addState(t[e]);else for(var n in t)this.addState(n,t[n]);return this}runMethod(t,e,i,n,s,r){var a=this[t+"_"+this.state];if(a){var o=arguments.length;switch(o){case 1:return a.call(this);case 2:return a.call(this,e);case 3:return a.call(this,e,i);case 4:return a.call(this,e,i,n);case 5:return a.call(this,e,i,n,s);case 6:return a.call(this,e,i,n,s,r)}for(var h=new Array(o-1),l=1;l<o;l++)h[l-1]=arguments[l];return a.apply(this,h)}}update(t,e){this.runMethod("update",t,e)}preupdate(t,e){this.runMethod("preupdate",t,e)}postupdate(t,e){this.runMethod("postupdate",t,e)}}Object.assign(w.prototype,r);var b=w;const E=Phaser.Utils.Objects.GetValue,T=Phaser.Math.Distance.Between;const S="IDLE",A="BEGIN",O="RECOGNIZED";var C=class extends _{constructor(t,e){super(t,e);var i=this,n={states:{IDLE:{enter:function(){i.stop(),i.tapsCount=0,i.x=0,i.y=0,i.worldX=0,i.worldY=0},exit:function(){var t=i.lastPointer;i.x=t.x,i.y=t.y,i.worldX=t.worldX,i.worldY=t.worldY}},BEGIN:{enter:function(){i.start(),i.tapsCount=0,i.emit("tappingstart",i,i.gameObject,i.lastPointer)}},RECOGNIZED:{enter:function(){i.start(),i.emit("tap",i,i.gameObject,i.lastPointer),i.emit(`${i.tapsCount}tap`,i,i.gameObject,i.lastPointer)}}},init:function(){this.state=S},eventEmitter:!1};this.setRecongizedStateObject(new b(n))}resetFromJSON(t){super.resetFromJSON(t),this.setHoldTime(E(t,"time",250)),this.setTapInterval(E(t,"tapInterval",200)),this.setDragThreshold(E(t,"threshold",9)),this.setTapOffset(E(t,"tapOffset",10));var e=E(t,"taps",void 0);return void 0!==e?this.setTaps(e):(this.setMaxTaps(E(t,"maxTaps",void 0)),this.setMinTaps(E(t,"minTaps",void 0))),this}onDragStart(){switch(this.state){case S:this.state=A;break;case A:var t=this.lastPointer;T(t.upX,t.upY,t.x,t.y)>this.tapOffset&&(this.state=O,this.state=A);break;case O:this.state=A}}onDragEnd(){this.state===A&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),void 0!==this.maxTaps&&this.tapsCount===this.maxTaps&&(this.state=O))}onDrag(){this.state!==S&&this.pointer.getDistance()>this.dragThreshold&&(this.state=S)}preUpdate(t,e){if(this.isRunning&&this.enable&&this.state===A){var i=this.lastPointer;if(i.isDown)t-i.downTime>this.holdTime&&(this.state=S);else t-i.upTime>this.tapInterval&&(void 0===this.minTaps||this.tapsCount>=this.minTaps?this.state=O:this.state=S)}}postUpdate(t,e){this.isRunning&&this.enable&&this.state===O&&(this.state=S)}get isTapped(){return this.state===O}setHoldTime(t){return this.holdTime=t,this}setTapInterval(t){return this.tapInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setTapOffset(t){return this.tapOffset=t,this}setMaxTaps(t){return this.maxTaps=t,this}setMinTaps(t){return this.minTaps=t,this}setTaps(t,e){return void 0===e&&(e=t),this.setMinTaps(t).setMaxTaps(e),this}},P=function(t){return null==t||""===t||0===t.length},L=function(t,e,i,n){if(void 0===n&&(n="."),"object"==typeof t){if(P(e)){if(null==i)return;"object"==typeof i&&(t=i)}else{"string"==typeof e&&(e=e.split(n));var s=e.pop();(function(t,e,i){var n=t;if(P(e));else{var s;"string"==typeof e&&(e=e.split("."));for(var r=0,a=e.length;r<a;r++){var o;if(null==n[s=e[r]]||"object"!=typeof n[s])o=r===a-1?void 0===i?{}:i:{},n[s]=o;n=n[s]}}return n}(t,e))[s]=i}return t}};const R=Phaser.GameObjects.GameObject;var I=function(t){return t instanceof R};s.register("tap",(function(t,e){return I(t)||(e=t,t=this.scene),new C(t,e)})),L(window,"RexPlugins.Gestures.Tap",C);const M=Phaser.Utils.Objects.GetValue;const D="IDLE",k="BEGIN",N="RECOGNIZED";var F=class extends _{constructor(t,e){super(t,e);var i=this,n={states:{IDLE:{enter:function(){i.x=0,i.y=0,i.worldX=0,i.worldY=0},exit:function(){var t=i.lastPointer;i.x=t.x,i.y=t.y,i.worldX=t.worldX,i.worldY=t.worldY}},BEGIN:{enter:function(){i.start()},exit:function(){i.stop()}},RECOGNIZED:{enter:function(){i.emit("pressstart",i,i.gameObject,i.lastPointer)},exit:function(){i.emit("pressend",i,i.gameObject,i.lastPointer)}}},init:function(){this.state=D},eventEmitter:!1};this.setRecongizedStateObject(new b(n))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(M(t,"threshold",9)),this.setHoldTime(M(t,"time",251)),this}onDragStart(){this.state=k,0===this.holdTime&&(this.state=N)}onDragEnd(){this.state=D}onDrag(){this.state!==D&&this.pointer.getDistance()>this.dragThreshold&&(this.state=D)}preUpdate(t,e){this.isRunning&&this.enable&&(this.state===k&&t-this.pointer.downTime>=this.holdTime&&(this.state=N))}get isPressed(){return this.state===N}setHoldTime(t){return this.holdTime=t,this}setDragThreshold(t){return this.dragThreshold=t,this}};s.register("press",(function(t,e){return I(t)||(e=t,t=this.scene),new F(t,e)})),L(window,"RexPlugins.Gestures.Press",F);const G=Phaser.Utils.Objects.GetValue;const B="IDLE",z="BEGIN",U="RECOGNIZED";var Y=class extends _{constructor(t,e){super(t,e);var i=this,n={states:{IDLE:{},BEGIN:{enter:function(){var t=i.pointer;i.startX=t.x,i.startY=t.y,i.startWorldX=t.worldX,i.startWorldY=t.worldY}},RECOGNIZED:{enter:function(){i.emit("panstart",i,i.gameObject,i.lastPointer)},exit:function(){var t=i.lastPointer;i.endX=t.x,i.endY=t.y,i.endWorldX=t.worldX,i.endWorldY=t.worldY,i.emit("panend",i,i.gameObject,i.lastPointer)}}},init:function(){this.state=B},eventEmitter:!1};this.setRecongizedStateObject(new b(n))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(G(t,"threshold",10)),this}onDragStart(){this.state=z,0===this.dragThreshold&&(this.state=U)}onDragEnd(){this.state=B}onDrag(){switch(this.state){case z:this.pointer.getDistance()>=this.dragThreshold&&(this.state=U);break;case U:var t=this.pointer.position,e=this.pointer.prevPosition;this.dx=t.x-e.x,this.dy=t.y-e.y;var i=this.pointer;this.x=i.x,this.y=i.y,this.worldX=i.worldX,this.worldY=i.worldY,this.emit("pan",this,this.gameObject,this.lastPointer)}}get isPanned(){return this.state===U}setDragThreshold(t){return this.dragThreshold=t,this}};s.register("pan",(function(t,e){return I(t)||(e=t,t=this.scene),new Y(t,e)})),L(window,"RexPlugins.Gestures.Pan",Y);const X=Phaser.Game;var H=function(t){return t instanceof X},j=function(t){return H(t)?t:H(t.game)?t.game:o(t)?t.sys.game:o(t.scene)?t.scene.sys.game:void 0},W=function(t){return j(t).loop.delta};const V=Phaser.Math.Distance.Between,K=Phaser.Math.Angle.Between;var q={getDt:function(){return W(this.scene)},getVelocity:function(){var t=this.pointer.position,e=this.pointer.prevPosition;return V(e.x,e.y,t.x,t.y)/(.001*this.getDt())},getVelocityX:function(){var t=this.pointer.position,e=this.pointer.prevPosition;return Math.abs(t.x-e.x)/(.001*this.getDt())},getVelocityY:function(){var t=this.pointer.position,e=this.pointer.prevPosition;return Math.abs(t.y-e.y)/(.001*this.getDt())},getVelocityAngle:function(){var t=this.pointer.position,e=this.pointer.prevPosition;return K(e.x,e.y,t.x,t.y)}},Z={"up&down":0,"left&right":1,"4dir":2,"8dir":3},J={},$=function(t,e,i){switch(void 0===i?i={}:!0===i&&(i=J),i.left=!1,i.right=!1,i.up=!1,i.down=!1,t=(t+360)%360,e){case 0:t<180?i.down=!0:i.up=!0;break;case 1:t>90&&t<=270?i.left=!0:i.right=!0;break;case 2:t>45&&t<=135?i.down=!0:t>135&&t<=225?i.left=!0:t>225&&t<=315?i.up=!0:i.right=!0;break;case 3:t>22.5&&t<=67.5?(i.down=!0,i.right=!0):t>67.5&&t<=112.5?i.down=!0:t>112.5&&t<=157.5?(i.down=!0,i.left=!0):t>157.5&&t<=202.5?i.left=!0:t>202.5&&t<=247.5?(i.left=!0,i.up=!0):t>247.5&&t<=292.5?i.up=!0:t>292.5&&t<=337.5?(i.up=!0,i.right=!0):i.right=!0}return i};const Q=Phaser.Utils.Objects.GetValue,tt=Phaser.Math.RadToDeg;class et extends _{constructor(t,e){super(t,e);var i=this,n={states:{IDLE:{enter:function(){i.x=0,i.y=0,i.worldX=0,i.worldY=0},exit:function(){var t=i.lastPointer;i.x=t.x,i.y=t.y,i.worldX=t.worldX,i.worldY=t.worldY}},BEGIN:{enter:function(){i.validDrag=!1}},RECOGNIZED:{enter:function(){i.start(),i.updateDirectionStates(),i.emit("swipe",i,i.gameObject,i.lastPointer)},exit:function(){i.stop(),i.clearDirectionStates()}}},init:function(){this.state=it},eventEmitter:!1};this.setRecongizedStateObject(new b(n)),this.clearDirectionStates()}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Q(t,"threshold",10)),this.setVelocityThreshold(Q(t,"velocityThreshold",1e3)),this.setDirectionMode(Q(t,"dir","8dir")),this}onDragStart(){this.state=nt}onDragEnd(){this.state=it}onDrag(){this.state===nt&&(this.validDrag||(this.validDrag=0===this.dragThreshold||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=st))}postUpdate(t,e){this.isRunning&&this.enable&&this.state===st&&(this.state=it)}get isSwiped(){return this.state===st}get dragVelocity(){var t;switch(this.dirMode){case 0:t=this.getVelocityY();break;case 1:t=this.getVelocityX();break;default:t=this.getVelocity()}return t}setDragThreshold(t){return this.dragThreshold=t,this}setVelocityThreshold(t){return this.velocityThreshold=t,this}setDirectionMode(t){return"string"==typeof t&&(t=Z[t]),this.dirMode=t,this}updateDirectionStates(){var t=tt(this.getVelocityAngle());return $(t,this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}}Object.assign(et.prototype,q);const it="IDLE",nt="BEGIN",st="RECOGNIZED";var rt=et;s.register("swipe",(function(t,e){return I(t)||(e=t,t=this.scene),new rt(t,e)})),L(window,"RexPlugins.Gestures.Swipe",rt);var at=function(t){if("object"!=typeof t||null===t)return t;if(Array.isArray(t))t.length=0;else for(var e in t)delete t[e];return t};const ot=Phaser.Utils.Objects.GetValue,ht=Phaser.Utils.Array.SpliceOne,lt=Phaser.Math.Distance.Between,ct=Phaser.Math.Angle.Between;class ut{constructor(t,e){var i=t.input.manager.pointersTotal-1;i<2&&t.input.addPointer(2-i),this.scene=t,this.setEventEmitter(ot(e,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.setEnable(ot(t,"enable",!0)),this.bounds=ot(t,"bounds",void 0),this.tracerState=ft,this.pointers.length=0,at(this.movedState),this}boot(){this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(){this.scene&&(this.destroyEventEmitter(),this.pointers.length=0,at(this.movedState),this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t){if(this.enable&&(2!==this.pointers.length&&(!this.bounds||this.bounds.contains(t.x,t.y))&&-1===this.pointers.indexOf(t)))switch(this.movedState[t.id]=!1,this.pointers.push(t),this.tracerState){case ft:this.tracerState=pt,this.onDrag1Start();break;case pt:this.tracerState=gt,this.onDrag2Start()}}onPointerUp(t){if(this.enable&&(!this.bounds||this.bounds.contains(t.x,t.y))){var e=this.pointers.indexOf(t);if(-1!==e)switch(delete this.movedState[t.id],ht(this.pointers,e),this.tracerState){case pt:this.tracerState=ft,this.onDrag1End();break;case gt:this.tracerState=pt,this.onDrag2End(),this.onDrag1Start()}}}onPointerMove(t){if(this.enable&&t.isDown){var e=!this.bounds||this.bounds.contains(t.x,t.y),i=-1!==this.pointers.indexOf(t);if(!i&&e);else if(i&&!e)this.onPointerUp(t);else if(this.movedState[t.id]||(this.movedState[t.id]=t.x!==t.downX||t.y!==t.downY),this.movedState[t.id])switch(this.tracerState){case pt:this.onDrag1();break;case gt:this.onDrag2()}}}dragCancel(){return this.tracerState===gt&&this.onDrag2End(),this.pointers.length=0,at(this.movedState),this.tracerState=ft,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==gt)return 0;var t=this.pointers[0],e=this.pointers[1];return lt(t.x,t.y,e.x,e.y)}get angleBetween(){if(this.tracerState!==gt)return 0;var t=this.pointers[0],e=this.pointers[1];return ct(t.x,t.y,e.x,e.y)}get drag1Vector(){var t=this.pointers[0];if(t&&this.movedState[t.id]){var e=t.position,i=t.prevPosition;dt.x=e.x-i.x,dt.y=e.y-i.y}else dt.x=0,dt.y=0;return dt}get centerX(){if(this.tracerState!==gt)return 0;var t=this.pointers[0].position,e=this.pointers[1].position;return(t.x+e.x)/2}get centerY(){if(this.tracerState!==gt)return 0;var t=this.pointers[0].position,e=this.pointers[1].position;return(t.y+e.y)/2}get prevCenterX(){if(this.tracerState!==gt)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,e=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.x+e.x)/2}get prevCenterY(){if(this.tracerState!==gt)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,e=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.y+e.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=mt,this}}Object.assign(ut.prototype,r);var dt={};const ft=0,pt=1,gt=2,mt="IDLE";var vt=ut;const yt=Phaser.Utils.Objects.GetValue;const _t="IDLE",xt="BEGIN",wt="RECOGNIZED";var bt=class extends vt{constructor(t,e){super(t,e);var i=this,n={states:{IDLE:{enter:function(){i.prevDistance=void 0,i.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function(){i.emit("pinchstart",i)},exit:function(){i.emit("pinchend",i)}}},init:function(){this.state=_t},eventEmitter:!1};this.setRecongizedStateObject(new b(n))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(yt(t,"threshold",0)),this}onDrag2Start(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=xt,0===this.dragThreshold&&(this.state=wt)}onDrag2End(){this.state=_t}onDrag2(){switch(this.state){case xt:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.prevDistance=t,this.state=wt}break;case wt:t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.emit("pinch",this),this.prevDistance=t}}get isPinched(){return this.state===wt}setDragThreshold(t){return this.dragThreshold=t,this}};s.register("pinch",(function(t){return new bt(this.scene,t)})),L(window,"RexPlugins.Gestures.Pinch",bt);const Et=Phaser.Math.RotateAround;var Tt=function(t,e,i,n){return Et(t,e,i,n),t.rotation+=n,t},St={},At=function(t,e,i,n){return void 0===n?n={}:!0===n&&(n=St),i.getWorldPoint(t,e,n),n},Ot=function(t,e){if(!this.isRotation)return this;void 0===e&&(e=this.pointers[0].camera);var i=this.movementCenterX,n=this.movementCenterY,s=At(this.centerX,this.centerY,e,!0),r=s.x,a=s.y,o=this.rotation;if(Array.isArray(t))for(var h=t,l=0,c=h.length;l<c;l++)(t=h[l]).x+=i,t.y+=n,Tt(t,r,a,o);else t.x+=i,t.y+=n,Tt(t,r,a,o);return this};const Ct=Phaser.Utils.Objects.GetValue,Pt=Phaser.Math.Angle.WrapDegrees,Lt=Phaser.Math.Angle.ShortestBetween,Rt=Phaser.Math.RadToDeg,It=Phaser.Math.DegToRad;class Mt extends vt{constructor(t,e){super(t,e);var i=this,n={states:{IDLE:{enter:function(){i.prevAngle=void 0,i.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){i.emit("rotatestart",i)},exit:function(){i.emit("rotateend",i)}}},init:function(){this.state=kt},eventEmitter:!1};this.setRecongizedStateObject(new b(n))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Ct(t,"threshold",0)),this}onDrag2Start(){this.prevAngle=Pt(Rt(this.angleBetween)),this.state=Nt,0===this.dragThreshold&&(this.state=Ft)}onDrag2End(){this.state=kt}onDrag2(){switch(this.state){case Nt:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=Pt(Rt(this.angleBetween));this.angle=Lt(this.prevAngle,t),this.prevAngle=t,this.state=Ft}break;case Ft:t=Pt(Rt(this.angleBetween));this.angle=Lt(this.prevAngle,t),this.prevAngle=t,this.emit("rotate",this)}}get isRotated(){return this.state===Ft}get rotation(){return It(this.angle)}setDragThreshold(t){return this.dragThreshold=t,this}}var Dt={spinObject:Ot};Object.assign(Mt.prototype,Dt);const kt="IDLE",Nt="BEGIN",Ft="RECOGNIZED";var Gt=Mt;s.register("rotate",(function(t){return new Gt(this.scene,t)})),L(window,"RexPlugins.Gestures.Rotate",Gt);class Bt extends Phaser.Plugins.ScenePlugin{constructor(t,e){super(t,e),this.add=new s(t)}}e.default=Bt}]);
//# sourceMappingURL=bundle.js.map